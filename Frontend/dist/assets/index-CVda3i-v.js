var hC=Object.freeze,mC=Object.defineProperty;var gF=(e,t,n)=>t in e?mC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var j0=(e,t,n)=>gF(e,typeof t!="symbol"?t+"":t,n);var Qt=(e,t)=>hC(mC(e,"raw",{value:hC(t||e.slice())}));function Dde(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}function xF(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Ts(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w0={exports:{}},zd={},N0={exports:{}},Rt={};var pC;function vF(){if(pC)return Rt;pC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),m=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,y={};function b(F,L,X){this.props=F,this.context=L,this.refs=y,this.updater=X||v}b.prototype.isReactComponent={},b.prototype.setState=function(F,L){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,L,"setState")},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function N(){}N.prototype=b.prototype;function k(F,L,X){this.props=F,this.context=L,this.refs=y,this.updater=X||v}var D=k.prototype=new N;D.constructor=k,j(D,b.prototype),D.isPureReactComponent=!0;var E=Array.isArray,P=Object.prototype.hasOwnProperty,C={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function A(F,L,X){var Y,me={},xe=null,Pe=null;if(L!=null)for(Y in L.ref!==void 0&&(Pe=L.ref),L.key!==void 0&&(xe=""+L.key),L)P.call(L,Y)&&!O.hasOwnProperty(Y)&&(me[Y]=L[Y]);var Ge=arguments.length-2;if(Ge===1)me.children=X;else if(1<Ge){for(var he=Array(Ge),ie=0;ie<Ge;ie++)he[ie]=arguments[ie+2];me.children=he}if(F&&F.defaultProps)for(Y in Ge=F.defaultProps,Ge)me[Y]===void 0&&(me[Y]=Ge[Y]);return{$$typeof:e,type:F,key:xe,ref:Pe,props:me,_owner:C.current}}function _(F,L){return{$$typeof:e,type:F.type,key:L,ref:F.ref,props:F.props,_owner:F._owner}}function z(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function G(F){var L={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(X){return L[X]})}var T=/\/+/g;function M(F,L){return typeof F=="object"&&F!==null&&F.key!=null?G(""+F.key):L.toString(36)}function W(F,L,X,Y,me){var xe=typeof F;(xe==="undefined"||xe==="boolean")&&(F=null);var Pe=!1;if(F===null)Pe=!0;else switch(xe){case"string":case"number":Pe=!0;break;case"object":switch(F.$$typeof){case e:case t:Pe=!0}}if(Pe)return Pe=F,me=me(Pe),F=Y===""?"."+M(Pe,0):Y,E(me)?(X="",F!=null&&(X=F.replace(T,"$&/")+"/"),W(me,L,X,"",function(ie){return ie})):me!=null&&(z(me)&&(me=_(me,X+(!me.key||Pe&&Pe.key===me.key?"":(""+me.key).replace(T,"$&/")+"/")+F)),L.push(me)),1;if(Pe=0,Y=Y===""?".":Y+":",E(F))for(var Ge=0;Ge<F.length;Ge++){xe=F[Ge];var he=Y+M(xe,Ge);Pe+=W(xe,L,X,he,me)}else if(he=p(F),typeof he=="function")for(F=he.call(F),Ge=0;!(xe=F.next()).done;)xe=xe.value,he=Y+M(xe,Ge++),Pe+=W(xe,L,X,he,me);else if(xe==="object")throw L=String(F),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Pe}function Z(F,L,X){if(F==null)return F;var Y=[],me=0;return W(F,Y,"","",function(xe){return L.call(X,xe,me++)}),Y}function B(F){if(F._status===-1){var L=F._result;L=L(),L.then(function(X){(F._status===0||F._status===-1)&&(F._status=1,F._result=X)},function(X){(F._status===0||F._status===-1)&&(F._status=2,F._result=X)}),F._status===-1&&(F._status=0,F._result=L)}if(F._status===1)return F._result.default;throw F._result}var U={current:null},$={transition:null},K={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:$,ReactCurrentOwner:C};function V(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:Z,forEach:function(F,L,X){Z(F,function(){L.apply(this,arguments)},X)},count:function(F){var L=0;return Z(F,function(){L++}),L},toArray:function(F){return Z(F,function(L){return L})||[]},only:function(F){if(!z(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Rt.Component=b,Rt.Fragment=n,Rt.Profiler=s,Rt.PureComponent=k,Rt.StrictMode=a,Rt.Suspense=f,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Rt.act=V,Rt.cloneElement=function(F,L,X){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Y=j({},F.props),me=F.key,xe=F.ref,Pe=F._owner;if(L!=null){if(L.ref!==void 0&&(xe=L.ref,Pe=C.current),L.key!==void 0&&(me=""+L.key),F.type&&F.type.defaultProps)var Ge=F.type.defaultProps;for(he in L)P.call(L,he)&&!O.hasOwnProperty(he)&&(Y[he]=L[he]===void 0&&Ge!==void 0?Ge[he]:L[he])}var he=arguments.length-2;if(he===1)Y.children=X;else if(1<he){Ge=Array(he);for(var ie=0;ie<he;ie++)Ge[ie]=arguments[ie+2];Y.children=Ge}return{$$typeof:e,type:F.type,key:me,ref:xe,props:Y,_owner:Pe}},Rt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},Rt.createElement=A,Rt.createFactory=function(F){var L=A.bind(null,F);return L.type=F,L},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(F){return{$$typeof:c,render:F}},Rt.isValidElement=z,Rt.lazy=function(F){return{$$typeof:u,_payload:{_status:-1,_result:F},_init:B}},Rt.memo=function(F,L){return{$$typeof:h,type:F,compare:L===void 0?null:L}},Rt.startTransition=function(F){var L=$.transition;$.transition={};try{F()}finally{$.transition=L}},Rt.unstable_act=V,Rt.useCallback=function(F,L){return U.current.useCallback(F,L)},Rt.useContext=function(F){return U.current.useContext(F)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(F){return U.current.useDeferredValue(F)},Rt.useEffect=function(F,L){return U.current.useEffect(F,L)},Rt.useId=function(){return U.current.useId()},Rt.useImperativeHandle=function(F,L,X){return U.current.useImperativeHandle(F,L,X)},Rt.useInsertionEffect=function(F,L){return U.current.useInsertionEffect(F,L)},Rt.useLayoutEffect=function(F,L){return U.current.useLayoutEffect(F,L)},Rt.useMemo=function(F,L){return U.current.useMemo(F,L)},Rt.useReducer=function(F,L,X){return U.current.useReducer(F,L,X)},Rt.useRef=function(F){return U.current.useRef(F)},Rt.useState=function(F){return U.current.useState(F)},Rt.useSyncExternalStore=function(F,L,X){return U.current.useSyncExternalStore(F,L,X)},Rt.useTransition=function(){return U.current.useTransition()},Rt.version="18.3.1",Rt}var gC;function Rc(){return gC||(gC=1,N0.exports=vF()),N0.exports}var xC;function yF(){if(xC)return zd;xC=1;var e=Rc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,h){var u,m={},p=null,v=null;h!==void 0&&(p=""+h),f.key!==void 0&&(p=""+f.key),f.ref!==void 0&&(v=f.ref);for(u in f)a.call(f,u)&&!o.hasOwnProperty(u)&&(m[u]=f[u]);if(c&&c.defaultProps)for(u in f=c.defaultProps,f)m[u]===void 0&&(m[u]=f[u]);return{$$typeof:t,type:c,key:p,ref:v,props:m,_owner:s.current}}return zd.Fragment=n,zd.jsx=l,zd.jsxs=l,zd}var vC;function bF(){return vC||(vC=1,w0.exports=yF()),w0.exports}var r=bF(),x=Rc();const Nt=Ts(x),ED=xF({__proto__:null,default:Nt},[x]);var Ch={},S0={exports:{}},ta={},C0={exports:{}},k0={};var yC;function jF(){return yC||(yC=1,(function(e){function t($,K){var V=$.length;$.push(K);e:for(;0<V;){var F=V-1>>>1,L=$[F];if(0<s(L,K))$[F]=K,$[V]=L,V=F;else break e}}function n($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var K=$[0],V=$.pop();if(V!==K){$[0]=V;e:for(var F=0,L=$.length,X=L>>>1;F<X;){var Y=2*(F+1)-1,me=$[Y],xe=Y+1,Pe=$[xe];if(0>s(me,V))xe<L&&0>s(Pe,me)?($[F]=Pe,$[xe]=V,F=xe):($[F]=me,$[Y]=V,F=Y);else if(xe<L&&0>s(Pe,V))$[F]=Pe,$[xe]=V,F=xe;else break e}}return K}function s($,K){var V=$.sortIndex-K.sortIndex;return V!==0?V:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var f=[],h=[],u=1,m=null,p=3,v=!1,j=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D($){for(var K=n(h);K!==null;){if(K.callback===null)a(h);else if(K.startTime<=$)a(h),K.sortIndex=K.expirationTime,t(f,K);else break;K=n(h)}}function E($){if(y=!1,D($),!j)if(n(f)!==null)j=!0,B(P);else{var K=n(h);K!==null&&U(E,K.startTime-$)}}function P($,K){j=!1,y&&(y=!1,N(A),A=-1),v=!0;var V=p;try{for(D(K),m=n(f);m!==null&&(!(m.expirationTime>K)||$&&!G());){var F=m.callback;if(typeof F=="function"){m.callback=null,p=m.priorityLevel;var L=F(m.expirationTime<=K);K=e.unstable_now(),typeof L=="function"?m.callback=L:m===n(f)&&a(f),D(K)}else a(f);m=n(f)}if(m!==null)var X=!0;else{var Y=n(h);Y!==null&&U(E,Y.startTime-K),X=!1}return X}finally{m=null,p=V,v=!1}}var C=!1,O=null,A=-1,_=5,z=-1;function G(){return!(e.unstable_now()-z<_)}function T(){if(O!==null){var $=e.unstable_now();z=$;var K=!0;try{K=O(!0,$)}finally{K?M():(C=!1,O=null)}}else C=!1}var M;if(typeof k=="function")M=function(){k(T)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=T,M=function(){Z.postMessage(null)}}else M=function(){b(T,0)};function B($){O=$,C||(C=!0,M())}function U($,K){A=b(function(){$(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,B(P))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function($){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var V=p;p=K;try{return $()}finally{p=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var V=p;p=$;try{return K()}finally{p=V}},e.unstable_scheduleCallback=function($,K,V){var F=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?F+V:F):V=F,$){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=V+L,$={id:u++,callback:K,priorityLevel:$,startTime:V,expirationTime:L,sortIndex:-1},V>F?($.sortIndex=V,t(h,$),n(f)===null&&$===n(h)&&(y?(N(A),A=-1):y=!0,U(E,V-F))):($.sortIndex=L,t(f,$),j||v||(j=!0,B(P))),$},e.unstable_shouldYield=G,e.unstable_wrapCallback=function($){var K=p;return function(){var V=p;p=K;try{return $.apply(this,arguments)}finally{p=V}}}})(k0)),k0}var bC;function wF(){return bC||(bC=1,C0.exports=jF()),C0.exports}var jC;function NF(){if(jC)return ta;jC=1;var e=Rc(),t=wF();function n(i){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+i,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+i+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function o(i,d){l(i,d),l(i+"Capture",d)}function l(i,d){for(s[i]=d,i=0;i<d.length;i++)a.add(d[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},m={};function p(i){return f.call(m,i)?!0:f.call(u,i)?!1:h.test(i)?m[i]=!0:(u[i]=!0,!1)}function v(i,d,g,w){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,d,g,w){if(d===null||typeof d>"u"||v(i,d,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function y(i,d,g,w,S,I,R){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=S,this.mustUseProperty=g,this.propertyName=i,this.type=d,this.sanitizeURL=I,this.removeEmptyString=R}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new y(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var d=i[0];b[d]=new y(d,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new y(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new y(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new y(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new y(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new y(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new y(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new y(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function k(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var d=i.replace(N,k);b[d]=new y(d,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var d=i.replace(N,k);b[d]=new y(d,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var d=i.replace(N,k);b[d]=new y(d,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new y(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new y(i,1,!1,i.toLowerCase(),null,!0,!0)});function D(i,d,g,w){var S=b.hasOwnProperty(d)?b[d]:null;(S!==null?S.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(j(d,g,S,w)&&(g=null),w||S===null?p(d)&&(g===null?i.removeAttribute(d):i.setAttribute(d,""+g)):S.mustUseProperty?i[S.propertyName]=g===null?S.type===3?!1:"":g:(d=S.attributeName,w=S.attributeNamespace,g===null?i.removeAttribute(d):(S=S.type,g=S===3||S===4&&g===!0?"":""+g,w?i.setAttributeNS(w,d,g):i.setAttribute(d,g))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),C=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),G=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),$=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var V=Object.assign,F;function L(i){if(F===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);F=d&&d[1]||""}return"\n"+F+i}var X=!1;function Y(i,d){if(!i||X)return"";X=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ee){var w=Ee}Reflect.construct(i,[],d)}else{try{d.call()}catch(Ee){w=Ee}i.call(d.prototype)}else{try{throw Error()}catch(Ee){w=Ee}i()}}catch(Ee){if(Ee&&w&&typeof Ee.stack=="string"){for(var S=Ee.stack.split("\n"),I=w.stack.split("\n"),R=S.length-1,te=I.length-1;1<=R&&0<=te&&S[R]!==I[te];)te--;for(;1<=R&&0<=te;R--,te--)if(S[R]!==I[te]){if(R!==1||te!==1)do if(R--,te--,0>te||S[R]!==I[te]){var ce="\n"+S[R].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=R&&0<=te);break}}}finally{X=!1,Error.prepareStackTrace=g}return(i=i?i.displayName||i.name:"")?L(i):""}function me(i){switch(i.tag){case 5:return L(i.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return i=Y(i.type,!1),i;case 11:return i=Y(i.type.render,!1),i;case 1:return i=Y(i.type,!0),i;default:return""}}function xe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case C:return"Portal";case _:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case W:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case G:return(i.displayName||"Context")+".Consumer";case z:return(i._context.displayName||"Context")+".Provider";case T:var d=i.render;return i=i.displayName,i||(i=d.displayName||d.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Z:return d=i.displayName||null,d!==null?d:xe(i.type)||"Memo";case B:d=i._payload,i=i._init;try{return xe(i(d))}catch(g){}}return null}function Pe(i){var d=i.type;switch(i.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=d.render,i=i.displayName||i.name||"",d.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(d);case 8:return d===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ge(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function he(i){var d=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ie(i){var d=he(i)?"checked":"value",g=Object.getOwnPropertyDescriptor(i.constructor.prototype,d),w=""+i[d];if(!i.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var S=g.get,I=g.set;return Object.defineProperty(i,d,{configurable:!0,get:function(){return S.call(this)},set:function(R){w=""+R,I.call(this,R)}}),Object.defineProperty(i,d,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(R){w=""+R},stopTracking:function(){i._valueTracker=null,delete i[d]}}}}function Ce(i){i._valueTracker||(i._valueTracker=ie(i))}function se(i){if(!i)return!1;var d=i._valueTracker;if(!d)return!0;var g=d.getValue(),w="";return i&&(w=he(i)?i.checked?"true":"false":i.value),i=w,i!==g?(d.setValue(i),!0):!1}function oe(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch(d){return i.body}}function Fe(i,d){var g=d.checked;return V({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g!=null?g:i._wrapperState.initialChecked})}function ze(i,d){var g=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;g=Ge(d.value!=null?d.value:g),i._wrapperState={initialChecked:w,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function De(i,d){d=d.checked,d!=null&&D(i,"checked",d,!1)}function Ue(i,d){De(i,d);var g=Ge(d.value),w=d.type;if(g!=null)w==="number"?(g===0&&i.value===""||i.value!=g)&&(i.value=""+g):i.value!==""+g&&(i.value=""+g);else if(w==="submit"||w==="reset"){i.removeAttribute("value");return}d.hasOwnProperty("value")?Ze(i,d.type,g):d.hasOwnProperty("defaultValue")&&Ze(i,d.type,Ge(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(i.defaultChecked=!!d.defaultChecked)}function Xe(i,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+i._wrapperState.initialValue,g||d===i.value||(i.value=d),i.defaultValue=d}g=i.name,g!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,g!==""&&(i.name=g)}function Ze(i,d,g){(d!=="number"||oe(i.ownerDocument)!==i)&&(g==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+g&&(i.defaultValue=""+g))}var J=Array.isArray;function fe(i,d,g,w){if(i=i.options,d){d={};for(var S=0;S<g.length;S++)d["$"+g[S]]=!0;for(g=0;g<i.length;g++)S=d.hasOwnProperty("$"+i[g].value),i[g].selected!==S&&(i[g].selected=S),S&&w&&(i[g].defaultSelected=!0)}else{for(g=""+Ge(g),d=null,S=0;S<i.length;S++){if(i[S].value===g){i[S].selected=!0,w&&(i[S].defaultSelected=!0);return}d!==null||i[S].disabled||(d=i[S])}d!==null&&(d.selected=!0)}}function pe(i,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return V({},d,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ie(i,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(n(92));if(J(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),g=d}i._wrapperState={initialValue:Ge(g)}}function Oe(i,d){var g=Ge(d.value),w=Ge(d.defaultValue);g!=null&&(g=""+g,g!==i.value&&(i.value=g),d.defaultValue==null&&i.defaultValue!==g&&(i.defaultValue=g)),w!=null&&(i.defaultValue=""+w)}function _e(i){var d=i.textContent;d===i._wrapperState.initialValue&&d!==""&&d!==null&&(i.value=d)}function Re(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ee(i,d){return i==null||i==="http://www.w3.org/1999/xhtml"?Re(d):i==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ye,Me=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,w,S){MSApp.execUnsafeLocalFunction(function(){return i(d,g,w,S)})}:i})(function(i,d){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=d;else{for(ye=ye||document.createElement("div"),ye.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=ye.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;d.firstChild;)i.appendChild(d.firstChild)}});function ne(i,d){if(d){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=d;return}}i.textContent=d}var q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q=["Webkit","ms","Moz","O"];Object.keys(q).forEach(function(i){Q.forEach(function(d){d=d+i.charAt(0).toUpperCase()+i.substring(1),q[d]=q[i]})});function ve(i,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||q.hasOwnProperty(i)&&q[i]?(""+d).trim():d+"px"}function be(i,d){i=i.style;for(var g in d)if(d.hasOwnProperty(g)){var w=g.indexOf("--")===0,S=ve(g,d[g],w);g==="float"&&(g="cssFloat"),w?i.setProperty(g,S):i[g]=S}}var Le=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qe(i,d){if(d){if(Le[i]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function tt(i,d){if(i.indexOf("-")===-1)return typeof d.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ct=null;function Ft(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Dt=null,Et=null,qt=null;function dt(i){if(i=Cd(i)){if(typeof Dt!="function")throw Error(n(280));var d=i.stateNode;d&&(d=zf(d),Dt(i.stateNode,i.type,d))}}function wr(i){Et?qt?qt.push(i):qt=[i]:Et=i}function er(){if(Et){var i=Et,d=qt;if(qt=Et=null,dt(i),d)for(i=0;i<d.length;i++)dt(d[i])}}function la(i,d){return i(d)}function kn(){}var bi=!1;function kl(i,d,g){if(bi)return i(d,g);bi=!0;try{return la(i,d,g)}finally{bi=!1,(Et!==null||qt!==null)&&(kn(),er())}}function Pn(i,d){var g=i.stateNode;if(g===null)return null;var w=zf(g);if(w===null)return null;g=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(i=i.type,w=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!w;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var Po=!1;if(c)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Po=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch(i){Po=!1}function ae(i,d,g,w,S,I,R,te,ce){var Ee=Array.prototype.slice.call(arguments,3);try{d.apply(g,Ee)}catch(qe){this.onError(qe)}}var Ae=!1,Se=null,$e=!1,jt=null,St={onError:function(i){Ae=!0,Se=i}};function yt(i,d,g,w,S,I,R,te,ce){Ae=!1,Se=null,ae.apply(St,arguments)}function ft(i,d,g,w,S,I,R,te,ce){if(yt.apply(this,arguments),Ae){if(Ae){var Ee=Se;Ae=!1,Se=null}else throw Error(n(198));$e||($e=!0,jt=Ee)}}function $r(i){var d=i,g=i;if(i.alternate)for(;d.return;)d=d.return;else{i=d;do d=i,(d.flags&4098)!==0&&(g=d.return),i=d.return;while(i)}return d.tag===3?g:null}function Pl(i){if(i.tag===13){var d=i.memoizedState;if(d===null&&(i=i.alternate,i!==null&&(d=i.memoizedState)),d!==null)return d.dehydrated}return null}function ji(i){if($r(i)!==i)throw Error(n(188))}function El(i){var d=i.alternate;if(!d){if(d=$r(i),d===null)throw Error(n(188));return d!==i?null:i}for(var g=i,w=d;;){var S=g.return;if(S===null)break;var I=S.alternate;if(I===null){if(w=S.return,w!==null){g=w;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===g)return ji(S),i;if(I===w)return ji(S),d;I=I.sibling}throw Error(n(188))}if(g.return!==w.return)g=S,w=I;else{for(var R=!1,te=S.child;te;){if(te===g){R=!0,g=S,w=I;break}if(te===w){R=!0,w=S,g=I;break}te=te.sibling}if(!R){for(te=I.child;te;){if(te===g){R=!0,g=I,w=S;break}if(te===w){R=!0,w=I,g=S;break}te=te.sibling}if(!R)throw Error(n(189))}}if(g.alternate!==w)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?i:d}function Al(i){return i=El(i),i!==null?jf(i):null}function jf(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var d=jf(i);if(d!==null)return d;i=i.sibling}return null}var Il=t.unstable_scheduleCallback,wf=t.unstable_cancelCallback,nd=t.unstable_shouldYield,ad=t.unstable_requestPaint,Nr=t.unstable_now,sd=t.unstable_getCurrentPriorityLevel,od=t.unstable_ImmediatePriority,Nf=t.unstable_UserBlockingPriority,wi=t.unstable_NormalPriority,qg=t.unstable_LowPriority,id=t.unstable_IdlePriority,Ni=null,Kn=null;function Gg(i){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Ni,i,void 0,(i.current.flags&128)===128)}catch(d){}}var Yn=Math.clz32?Math.clz32:Wg,Hg=Math.log,Sf=Math.LN2;function Wg(i){return i>>>=0,i===0?32:31-(Hg(i)/Sf|0)|0}var Si=64,Ci=4194304;function $s(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Dl(i,d){var g=i.pendingLanes;if(g===0)return 0;var w=0,S=i.suspendedLanes,I=i.pingedLanes,R=g&268435455;if(R!==0){var te=R&~S;te!==0?w=$s(te):(I&=R,I!==0&&(w=$s(I)))}else R=g&~S,R!==0?w=$s(R):I!==0&&(w=$s(I));if(w===0)return 0;if(d!==0&&d!==w&&(d&S)===0&&(S=w&-w,I=d&-d,S>=I||S===16&&(I&4194240)!==0))return d;if((w&4)!==0&&(w|=g&16),d=i.entangledLanes,d!==0)for(i=i.entanglements,d&=w;0<d;)g=31-Yn(d),S=1<<g,w|=i[g],d&=~S;return w}function ld(i,d){switch(i){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cd(i,d){for(var g=i.suspendedLanes,w=i.pingedLanes,S=i.expirationTimes,I=i.pendingLanes;0<I;){var R=31-Yn(I),te=1<<R,ce=S[R];ce===-1?((te&g)===0||(te&w)!==0)&&(S[R]=ld(te,d)):ce<=d&&(i.expiredLanes|=te),I&=~te}}function xs(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function dd(){var i=Si;return Si<<=1,(Si&4194240)===0&&(Si=64),i}function Eo(i){for(var d=[],g=0;31>g;g++)d.push(i);return d}function ki(i,d,g){i.pendingLanes|=d,d!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,d=31-Yn(d),i[d]=g}function Kg(i,d){var g=i.pendingLanes&~d;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=d,i.mutableReadLanes&=d,i.entangledLanes&=d,d=i.entanglements;var w=i.eventTimes;for(i=i.expirationTimes;0<g;){var S=31-Yn(g),I=1<<S;d[S]=0,w[S]=-1,i[S]=-1,g&=~I}}function Ol(i,d){var g=i.entangledLanes|=d;for(i=i.entanglements;g;){var w=31-Yn(g),S=1<<w;S&d|i[w]&d&&(i[w]|=d),g&=~S}}var Jt=0;function Cf(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ud,fd,kf,Pf,Ef,hd=!1,Ml=[],vs=null,ys=null,bs=null,Pi=new Map,Ei=new Map,ue=[],je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xt(i,d){switch(i){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Pi.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(d.pointerId)}}function Ct(i,d,g,w,S,I){return i===null||i.nativeEvent!==I?(i={blockedOn:d,domEventName:g,eventSystemFlags:w,nativeEvent:I,targetContainers:[S]},d!==null&&(d=Cd(d),d!==null&&fd(d)),i):(i.eventSystemFlags|=w,d=i.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),i)}function Aa(i,d,g,w,S){switch(d){case"focusin":return vs=Ct(vs,i,d,g,w,S),!0;case"dragenter":return ys=Ct(ys,i,d,g,w,S),!0;case"mouseover":return bs=Ct(bs,i,d,g,w,S),!0;case"pointerover":var I=S.pointerId;return Pi.set(I,Ct(Pi.get(I)||null,i,d,g,w,S)),!0;case"gotpointercapture":return I=S.pointerId,Ei.set(I,Ct(Ei.get(I)||null,i,d,g,w,S)),!0}return!1}function Ai(i){var d=Di(i.target);if(d!==null){var g=$r(d);if(g!==null){if(d=g.tag,d===13){if(d=Pl(g),d!==null){i.blockedOn=d,Ef(i.priority,function(){kf(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Fs(i){if(i.blockedOn!==null)return!1;for(var d=i.targetContainers;0<d.length;){var g=Do(i.domEventName,i.eventSystemFlags,d[0],i.nativeEvent);if(g===null){g=i.nativeEvent;var w=new g.constructor(g.type,g);ct=w,g.target.dispatchEvent(w),ct=null}else return d=Cd(g),d!==null&&fd(d),i.blockedOn=g,!1;d.shift()}return!0}function wt(i,d,g){Fs(i)&&g.delete(d)}function Ii(){hd=!1,vs!==null&&Fs(vs)&&(vs=null),ys!==null&&Fs(ys)&&(ys=null),bs!==null&&Fs(bs)&&(bs=null),Pi.forEach(wt),Ei.forEach(wt)}function ca(i,d){i.blockedOn===d&&(i.blockedOn=null,hd||(hd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ii)))}function da(i){function d(S){return ca(S,i)}if(0<Ml.length){ca(Ml[0],i);for(var g=1;g<Ml.length;g++){var w=Ml[g];w.blockedOn===i&&(w.blockedOn=null)}}for(vs!==null&&ca(vs,i),ys!==null&&ca(ys,i),bs!==null&&ca(bs,i),Pi.forEach(d),Ei.forEach(d),g=0;g<ue.length;g++)w=ue[g],w.blockedOn===i&&(w.blockedOn=null);for(;0<ue.length&&(g=ue[0],g.blockedOn===null);)Ai(g),g.blockedOn===null&&ue.shift()}var En=E.ReactCurrentBatchConfig,Ya=!0;function Ao(i,d,g,w){var S=Jt,I=En.transition;En.transition=null;try{Jt=1,nr(i,d,g,w)}finally{Jt=S,En.transition=I}}function Io(i,d,g,w){var S=Jt,I=En.transition;En.transition=null;try{Jt=4,nr(i,d,g,w)}finally{Jt=S,En.transition=I}}function nr(i,d,g,w){if(Ya){var S=Do(i,d,g,w);if(S===null)ux(i,d,w,tn,g),xt(i,w);else if(Aa(S,i,d,g,w))w.stopPropagation();else if(xt(i,w),d&4&&-1<je.indexOf(i)){for(;S!==null;){var I=Cd(S);if(I!==null&&ud(I),I=Do(i,d,g,w),I===null&&ux(i,d,w,tn,g),I===S)break;S=I}S!==null&&w.stopPropagation()}else ux(i,d,w,null,g)}}var tn=null;function Do(i,d,g,w){if(tn=null,i=Ft(w),i=Di(i),i!==null)if(d=$r(i),d===null)i=null;else if(g=d.tag,g===13){if(i=Pl(d),i!==null)return i;i=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;i=null}else d!==i&&(i=null);return tn=i,null}function Tl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sd()){case od:return 1;case Nf:return 4;case wi:case qg:return 16;case id:return 536870912;default:return 16}default:return 16}}var Oo=null,Yg=null,Af=null;function e1(){if(Af)return Af;var i,d=Yg,g=d.length,w,S="value"in Oo?Oo.value:Oo.textContent,I=S.length;for(i=0;i<g&&d[i]===S[i];i++);var R=g-i;for(w=1;w<=R&&d[g-w]===S[I-w];w++);return Af=S.slice(i,1<w?1-w:void 0)}function If(i){var d=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&d===13&&(i=13)):i=d,i===10&&(i=13),32<=i||i===13?i:0}function Df(){return!0}function t1(){return!1}function ua(i){function d(g,w,S,I,R){this._reactName=g,this._targetInst=S,this.type=w,this.nativeEvent=I,this.target=R,this.currentTarget=null;for(var te in i)i.hasOwnProperty(te)&&(g=i[te],this[te]=g?g(I):I[te]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Df:t1,this.isPropagationStopped=t1,this}return V(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Df)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Df)},persist:function(){},isPersistent:Df}),d}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xg=ua(_l),md=V({},_l,{view:0,detail:0}),V$=ua(md),Jg,Qg,pd,Of=V({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ex,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pd&&(pd&&i.type==="mousemove"?(Jg=i.screenX-pd.screenX,Qg=i.screenY-pd.screenY):Qg=Jg=0,pd=i),Jg)},movementY:function(i){return"movementY"in i?i.movementY:Qg}}),r1=ua(Of),q$=V({},Of,{dataTransfer:0}),G$=ua(q$),H$=V({},md,{relatedTarget:0}),Zg=ua(H$),W$=V({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),K$=ua(W$),Y$=V({},_l,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),X$=ua(Y$),J$=V({},_l,{data:0}),n1=ua(J$),Q$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t3(i){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(i):(i=e3[i])?!!d[i]:!1}function ex(){return t3}var r3=V({},md,{key:function(i){if(i.key){var d=Q$[i.key]||i.key;if(d!=="Unidentified")return d}return i.type==="keypress"?(i=If(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Z$[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ex,charCode:function(i){return i.type==="keypress"?If(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?If(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),n3=ua(r3),a3=V({},Of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a1=ua(a3),s3=V({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ex}),o3=ua(s3),i3=V({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=ua(i3),c3=V({},Of,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),d3=ua(c3),u3=[9,13,27,32],tx=c&&"CompositionEvent"in window,gd=null;c&&"documentMode"in document&&(gd=document.documentMode);var f3=c&&"TextEvent"in window&&!gd,s1=c&&(!tx||gd&&8<gd&&11>=gd),o1=" ",i1=!1;function l1(i,d){switch(i){case"keyup":return u3.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Rl=!1;function h3(i,d){switch(i){case"compositionend":return c1(d);case"keypress":return d.which!==32?null:(i1=!0,o1);case"textInput":return i=d.data,i===o1&&i1?null:i;default:return null}}function m3(i,d){if(Rl)return i==="compositionend"||!tx&&l1(i,d)?(i=e1(),Af=Yg=Oo=null,Rl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return s1&&d.locale!=="ko"?null:d.data;default:return null}}var p3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d1(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d==="input"?!!p3[i.type]:d==="textarea"}function u1(i,d,g,w){wr(w),d=$f(d,"onChange"),0<d.length&&(g=new Xg("onChange","change",null,g,w),i.push({event:g,listeners:d}))}var xd=null,vd=null;function g3(i){A1(i,0)}function Mf(i){var d=Bl(i);if(se(d))return i}function x3(i,d){if(i==="change")return d}var f1=!1;if(c){var rx;if(c){var nx="oninput"in document;if(!nx){var h1=document.createElement("div");h1.setAttribute("oninput","return;"),nx=typeof h1.oninput=="function"}rx=nx}else rx=!1;f1=rx&&(!document.documentMode||9<document.documentMode)}function m1(){xd&&(xd.detachEvent("onpropertychange",p1),vd=xd=null)}function p1(i){if(i.propertyName==="value"&&Mf(vd)){var d=[];u1(d,vd,i,Ft(i)),kl(g3,d)}}function v3(i,d,g){i==="focusin"?(m1(),xd=d,vd=g,xd.attachEvent("onpropertychange",p1)):i==="focusout"&&m1()}function y3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mf(vd)}function b3(i,d){if(i==="click")return Mf(d)}function j3(i,d){if(i==="input"||i==="change")return Mf(d)}function w3(i,d){return i===d&&(i!==0||1/i===1/d)||i!==i&&d!==d}var Xa=typeof Object.is=="function"?Object.is:w3;function yd(i,d){if(Xa(i,d))return!0;if(typeof i!="object"||i===null||typeof d!="object"||d===null)return!1;var g=Object.keys(i),w=Object.keys(d);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var S=g[w];if(!f.call(d,S)||!Xa(i[S],d[S]))return!1}return!0}function g1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function x1(i,d){var g=g1(i);i=0;for(var w;g;){if(g.nodeType===3){if(w=i+g.textContent.length,i<=d&&w>=d)return{node:g,offset:d-i};i=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=g1(g)}}function v1(i,d){return i&&d?i===d?!0:i&&i.nodeType===3?!1:d&&d.nodeType===3?v1(i,d.parentNode):"contains"in i?i.contains(d):i.compareDocumentPosition?!!(i.compareDocumentPosition(d)&16):!1:!1}function y1(){for(var i=window,d=oe();d instanceof i.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch(w){g=!1}if(g)i=d.contentWindow;else break;d=oe(i.document)}return d}function ax(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d&&(d==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||d==="textarea"||i.contentEditable==="true")}function N3(i){var d=y1(),g=i.focusedElem,w=i.selectionRange;if(d!==g&&g&&g.ownerDocument&&v1(g.ownerDocument.documentElement,g)){if(w!==null&&ax(g)){if(d=w.start,i=w.end,i===void 0&&(i=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(i,g.value.length);else if(i=(d=g.ownerDocument||document)&&d.defaultView||window,i.getSelection){i=i.getSelection();var S=g.textContent.length,I=Math.min(w.start,S);w=w.end===void 0?I:Math.min(w.end,S),!i.extend&&I>w&&(S=w,w=I,I=S),S=x1(g,I);var R=x1(g,w);S&&R&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==R.node||i.focusOffset!==R.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),i.removeAllRanges(),I>w?(i.addRange(d),i.extend(R.node,R.offset)):(d.setEnd(R.node,R.offset),i.addRange(d)))}}for(d=[],i=g;i=i.parentNode;)i.nodeType===1&&d.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)i=d[g],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var S3=c&&"documentMode"in document&&11>=document.documentMode,$l=null,sx=null,bd=null,ox=!1;function b1(i,d,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ox||$l==null||$l!==oe(w)||(w=$l,"selectionStart"in w&&ax(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),bd&&yd(bd,w)||(bd=w,w=$f(sx,"onSelect"),0<w.length&&(d=new Xg("onSelect","select",null,d,g),i.push({event:d,listeners:w}),d.target=$l)))}function Tf(i,d){var g={};return g[i.toLowerCase()]=d.toLowerCase(),g["Webkit"+i]="webkit"+d,g["Moz"+i]="moz"+d,g}var Fl={animationend:Tf("Animation","AnimationEnd"),animationiteration:Tf("Animation","AnimationIteration"),animationstart:Tf("Animation","AnimationStart"),transitionend:Tf("Transition","TransitionEnd")},ix={},j1={};c&&(j1=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function _f(i){if(ix[i])return ix[i];if(!Fl[i])return i;var d=Fl[i],g;for(g in d)if(d.hasOwnProperty(g)&&g in j1)return ix[i]=d[g];return i}var w1=_f("animationend"),N1=_f("animationiteration"),S1=_f("animationstart"),C1=_f("transitionend"),k1=new Map,P1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mo(i,d){k1.set(i,d),o(d,[i])}for(var lx=0;lx<P1.length;lx++){var cx=P1[lx],C3=cx.toLowerCase(),k3=cx[0].toUpperCase()+cx.slice(1);Mo(C3,"on"+k3)}Mo(w1,"onAnimationEnd"),Mo(N1,"onAnimationIteration"),Mo(S1,"onAnimationStart"),Mo("dblclick","onDoubleClick"),Mo("focusin","onFocus"),Mo("focusout","onBlur"),Mo(C1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P3=new Set("cancel close invalid load scroll toggle".split(" ").concat(jd));function E1(i,d,g){var w=i.type||"unknown-event";i.currentTarget=g,ft(w,d,void 0,i),i.currentTarget=null}function A1(i,d){d=(d&4)!==0;for(var g=0;g<i.length;g++){var w=i[g],S=w.event;w=w.listeners;e:{var I=void 0;if(d)for(var R=w.length-1;0<=R;R--){var te=w[R],ce=te.instance,Ee=te.currentTarget;if(te=te.listener,ce!==I&&S.isPropagationStopped())break e;E1(S,te,Ee),I=ce}else for(R=0;R<w.length;R++){if(te=w[R],ce=te.instance,Ee=te.currentTarget,te=te.listener,ce!==I&&S.isPropagationStopped())break e;E1(S,te,Ee),I=ce}}}if($e)throw i=jt,$e=!1,jt=null,i}function ur(i,d){var g=d[xx];g===void 0&&(g=d[xx]=new Set);var w=i+"__bubble";g.has(w)||(I1(d,i,2,!1),g.add(w))}function dx(i,d,g){var w=0;d&&(w|=4),I1(g,i,w,d)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function wd(i){if(!i[Rf]){i[Rf]=!0,a.forEach(function(g){g!=="selectionchange"&&(P3.has(g)||dx(g,!1,i),dx(g,!0,i))});var d=i.nodeType===9?i:i.ownerDocument;d===null||d[Rf]||(d[Rf]=!0,dx("selectionchange",!1,d))}}function I1(i,d,g,w){switch(Tl(d)){case 1:var S=Ao;break;case 4:S=Io;break;default:S=nr}g=S.bind(null,d,g,i),S=void 0,!Po||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),w?S!==void 0?i.addEventListener(d,g,{capture:!0,passive:S}):i.addEventListener(d,g,!0):S!==void 0?i.addEventListener(d,g,{passive:S}):i.addEventListener(d,g,!1)}function ux(i,d,g,w,S){var I=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var R=w.tag;if(R===3||R===4){var te=w.stateNode.containerInfo;if(te===S||te.nodeType===8&&te.parentNode===S)break;if(R===4)for(R=w.return;R!==null;){var ce=R.tag;if((ce===3||ce===4)&&(ce=R.stateNode.containerInfo,ce===S||ce.nodeType===8&&ce.parentNode===S))return;R=R.return}for(;te!==null;){if(R=Di(te),R===null)return;if(ce=R.tag,ce===5||ce===6){w=I=R;continue e}te=te.parentNode}}w=w.return}kl(function(){var Ee=I,qe=Ft(g),He=[];e:{var Ve=k1.get(i);if(Ve!==void 0){var et=Xg,at=i;switch(i){case"keypress":if(If(g)===0)break e;case"keydown":case"keyup":et=n3;break;case"focusin":at="focus",et=Zg;break;case"focusout":at="blur",et=Zg;break;case"beforeblur":case"afterblur":et=Zg;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=r1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=G$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=o3;break;case w1:case N1:case S1:et=K$;break;case C1:et=l3;break;case"scroll":et=V$;break;case"wheel":et=d3;break;case"copy":case"cut":case"paste":et=X$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=a1}var ut=(d&4)!==0,Mr=!ut&&i==="scroll",we=ut?Ve!==null?Ve+"Capture":null:Ve;ut=[];for(var de=Ee,Ne;de!==null;){Ne=de;var Ke=Ne.stateNode;if(Ne.tag===5&&Ke!==null&&(Ne=Ke,we!==null&&(Ke=Pn(de,we),Ke!=null&&ut.push(Nd(de,Ke,Ne)))),Mr)break;de=de.return}0<ut.length&&(Ve=new et(Ve,at,null,g,qe),He.push({event:Ve,listeners:ut}))}}if((d&7)===0){e:{if(Ve=i==="mouseover"||i==="pointerover",et=i==="mouseout"||i==="pointerout",Ve&&g!==ct&&(at=g.relatedTarget||g.fromElement)&&(Di(at)||at[Ls]))break e;if((et||Ve)&&(Ve=qe.window===qe?qe:(Ve=qe.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,et?(at=g.relatedTarget||g.toElement,et=Ee,at=at?Di(at):null,at!==null&&(Mr=$r(at),at!==Mr||at.tag!==5&&at.tag!==6)&&(at=null)):(et=null,at=Ee),et!==at)){if(ut=r1,Ke="onMouseLeave",we="onMouseEnter",de="mouse",(i==="pointerout"||i==="pointerover")&&(ut=a1,Ke="onPointerLeave",we="onPointerEnter",de="pointer"),Mr=et==null?Ve:Bl(et),Ne=at==null?Ve:Bl(at),Ve=new ut(Ke,de+"leave",et,g,qe),Ve.target=Mr,Ve.relatedTarget=Ne,Ke=null,Di(qe)===Ee&&(ut=new ut(we,de+"enter",at,g,qe),ut.target=Ne,ut.relatedTarget=Mr,Ke=ut),Mr=Ke,et&&at)t:{for(ut=et,we=at,de=0,Ne=ut;Ne;Ne=Ll(Ne))de++;for(Ne=0,Ke=we;Ke;Ke=Ll(Ke))Ne++;for(;0<de-Ne;)ut=Ll(ut),de--;for(;0<Ne-de;)we=Ll(we),Ne--;for(;de--;){if(ut===we||we!==null&&ut===we.alternate)break t;ut=Ll(ut),we=Ll(we)}ut=null}else ut=null;et!==null&&D1(He,Ve,et,ut,!1),at!==null&&Mr!==null&&D1(He,Mr,at,ut,!0)}}e:{if(Ve=Ee?Bl(Ee):window,et=Ve.nodeName&&Ve.nodeName.toLowerCase(),et==="select"||et==="input"&&Ve.type==="file")var mt=x3;else if(d1(Ve))if(f1)mt=j3;else{mt=y3;var kt=v3}else(et=Ve.nodeName)&&et.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(mt=b3);if(mt&&(mt=mt(i,Ee))){u1(He,mt,g,qe);break e}kt&&kt(i,Ve,Ee),i==="focusout"&&(kt=Ve._wrapperState)&&kt.controlled&&Ve.type==="number"&&Ze(Ve,"number",Ve.value)}switch(kt=Ee?Bl(Ee):window,i){case"focusin":(d1(kt)||kt.contentEditable==="true")&&($l=kt,sx=Ee,bd=null);break;case"focusout":bd=sx=$l=null;break;case"mousedown":ox=!0;break;case"contextmenu":case"mouseup":case"dragend":ox=!1,b1(He,g,qe);break;case"selectionchange":if(S3)break;case"keydown":case"keyup":b1(He,g,qe)}var Pt;if(tx)e:{switch(i){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else Rl?l1(i,g)&&(Ot="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(Ot="onCompositionStart");Ot&&(s1&&g.locale!=="ko"&&(Rl||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Rl&&(Pt=e1()):(Oo=qe,Yg="value"in Oo?Oo.value:Oo.textContent,Rl=!0)),kt=$f(Ee,Ot),0<kt.length&&(Ot=new n1(Ot,i,null,g,qe),He.push({event:Ot,listeners:kt}),Pt?Ot.data=Pt:(Pt=c1(g),Pt!==null&&(Ot.data=Pt)))),(Pt=f3?h3(i,g):m3(i,g))&&(Ee=$f(Ee,"onBeforeInput"),0<Ee.length&&(qe=new n1("onBeforeInput","beforeinput",null,g,qe),He.push({event:qe,listeners:Ee}),qe.data=Pt))}A1(He,d)})}function Nd(i,d,g){return{instance:i,listener:d,currentTarget:g}}function $f(i,d){for(var g=d+"Capture",w=[];i!==null;){var S=i,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Pn(i,g),I!=null&&w.unshift(Nd(i,I,S)),I=Pn(i,d),I!=null&&w.push(Nd(i,I,S))),i=i.return}return w}function Ll(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function D1(i,d,g,w,S){for(var I=d._reactName,R=[];g!==null&&g!==w;){var te=g,ce=te.alternate,Ee=te.stateNode;if(ce!==null&&ce===w)break;te.tag===5&&Ee!==null&&(te=Ee,S?(ce=Pn(g,I),ce!=null&&R.unshift(Nd(g,ce,te))):S||(ce=Pn(g,I),ce!=null&&R.push(Nd(g,ce,te)))),g=g.return}R.length!==0&&i.push({event:d,listeners:R})}var E3=/\r\n?/g,A3=/\u0000|\uFFFD/g;function O1(i){return(typeof i=="string"?i:""+i).replace(E3,"\n").replace(A3,"")}function Ff(i,d,g){if(d=O1(d),O1(i)!==d&&g)throw Error(n(425))}function Lf(){}var fx=null,hx=null;function mx(i,d){return i==="textarea"||i==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var px=typeof setTimeout=="function"?setTimeout:void 0,I3=typeof clearTimeout=="function"?clearTimeout:void 0,M1=typeof Promise=="function"?Promise:void 0,D3=typeof queueMicrotask=="function"?queueMicrotask:typeof M1<"u"?function(i){return M1.resolve(null).then(i).catch(O3)}:px;function O3(i){setTimeout(function(){throw i})}function gx(i,d){var g=d,w=0;do{var S=g.nextSibling;if(i.removeChild(g),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(w===0){i.removeChild(S),da(d);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=S}while(g);da(d)}function To(i){for(;i!=null;i=i.nextSibling){var d=i.nodeType;if(d===1||d===3)break;if(d===8){if(d=i.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return i}function T1(i){i=i.previousSibling;for(var d=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return i;d--}else g==="/$"&&d++}i=i.previousSibling}return null}var zl=Math.random().toString(36).slice(2),js="__reactFiber$"+zl,Sd="__reactProps$"+zl,Ls="__reactContainer$"+zl,xx="__reactEvents$"+zl,M3="__reactListeners$"+zl,T3="__reactHandles$"+zl;function Di(i){var d=i[js];if(d)return d;for(var g=i.parentNode;g;){if(d=g[Ls]||g[js]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(i=T1(i);i!==null;){if(g=i[js])return g;i=T1(i)}return d}i=g,g=i.parentNode}return null}function Cd(i){return i=i[js]||i[Ls],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Bl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function zf(i){return i[Sd]||null}var vx=[],Ul=-1;function _o(i){return{current:i}}function fr(i){0>Ul||(i.current=vx[Ul],vx[Ul]=null,Ul--)}function cr(i,d){Ul++,vx[Ul]=i.current,i.current=d}var Ro={},An=_o(Ro),Xn=_o(!1),Oi=Ro;function Vl(i,d){var g=i.type.contextTypes;if(!g)return Ro;var w=i.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in g)S[I]=d[I];return w&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=d,i.__reactInternalMemoizedMaskedChildContext=S),S}function Jn(i){return i=i.childContextTypes,i!=null}function Bf(){fr(Xn),fr(An)}function _1(i,d,g){if(An.current!==Ro)throw Error(n(168));cr(An,d),cr(Xn,g)}function R1(i,d,g){var w=i.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var S in w)if(!(S in d))throw Error(n(108,Pe(i)||"Unknown",S));return V({},g,w)}function Uf(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ro,Oi=An.current,cr(An,i),cr(Xn,Xn.current),!0}function $1(i,d,g){var w=i.stateNode;if(!w)throw Error(n(169));g?(i=R1(i,d,Oi),w.__reactInternalMemoizedMergedChildContext=i,fr(Xn),fr(An),cr(An,i)):fr(Xn),cr(Xn,g)}var zs=null,Vf=!1,yx=!1;function F1(i){zs===null?zs=[i]:zs.push(i)}function _3(i){Vf=!0,F1(i)}function $o(){if(!yx&&zs!==null){yx=!0;var i=0,d=Jt;try{var g=zs;for(Jt=1;i<g.length;i++){var w=g[i];do w=w(!0);while(w!==null)}zs=null,Vf=!1}catch(S){throw zs!==null&&(zs=zs.slice(i+1)),Il(od,$o),S}finally{Jt=d,yx=!1}}return null}var ql=[],Gl=0,qf=null,Gf=0,Ia=[],Da=0,Mi=null,Bs=1,Us="";function Ti(i,d){ql[Gl++]=Gf,ql[Gl++]=qf,qf=i,Gf=d}function L1(i,d,g){Ia[Da++]=Bs,Ia[Da++]=Us,Ia[Da++]=Mi,Mi=i;var w=Bs;i=Us;var S=32-Yn(w)-1;w&=~(1<<S),g+=1;var I=32-Yn(d)+S;if(30<I){var R=S-S%5;I=(w&(1<<R)-1).toString(32),w>>=R,S-=R,Bs=1<<32-Yn(d)+S|g<<S|w,Us=I+i}else Bs=1<<I|g<<S|w,Us=i}function bx(i){i.return!==null&&(Ti(i,1),L1(i,1,0))}function jx(i){for(;i===qf;)qf=ql[--Gl],ql[Gl]=null,Gf=ql[--Gl],ql[Gl]=null;for(;i===Mi;)Mi=Ia[--Da],Ia[Da]=null,Us=Ia[--Da],Ia[Da]=null,Bs=Ia[--Da],Ia[Da]=null}var fa=null,ha=null,pr=!1,Ja=null;function z1(i,d){var g=_a(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=i,d=i.deletions,d===null?(i.deletions=[g],i.flags|=16):d.push(g)}function B1(i,d){switch(i.tag){case 5:var g=i.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(i.stateNode=d,fa=i,ha=To(d.firstChild),!0):!1;case 6:return d=i.pendingProps===""||d.nodeType!==3?null:d,d!==null?(i.stateNode=d,fa=i,ha=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=Mi!==null?{id:Bs,overflow:Us}:null,i.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=_a(18,null,null,0),g.stateNode=d,g.return=i,i.child=g,fa=i,ha=null,!0):!1;default:return!1}}function wx(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Nx(i){if(pr){var d=ha;if(d){var g=d;if(!B1(i,d)){if(wx(i))throw Error(n(418));d=To(g.nextSibling);var w=fa;d&&B1(i,d)?z1(w,g):(i.flags=i.flags&-4097|2,pr=!1,fa=i)}}else{if(wx(i))throw Error(n(418));i.flags=i.flags&-4097|2,pr=!1,fa=i}}}function U1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fa=i}function Hf(i){if(i!==fa)return!1;if(!pr)return U1(i),pr=!0,!1;var d;if((d=i.tag!==3)&&!(d=i.tag!==5)&&(d=i.type,d=d!=="head"&&d!=="body"&&!mx(i.type,i.memoizedProps)),d&&(d=ha)){if(wx(i))throw V1(),Error(n(418));for(;d;)z1(i,d),d=To(d.nextSibling)}if(U1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,d=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"){if(d===0){ha=To(i.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}i=i.nextSibling}ha=null}}else ha=fa?To(i.stateNode.nextSibling):null;return!0}function V1(){for(var i=ha;i;)i=To(i.nextSibling)}function Hl(){ha=fa=null,pr=!1}function Sx(i){Ja===null?Ja=[i]:Ja.push(i)}var R3=E.ReactCurrentBatchConfig;function kd(i,d,g){if(i=g.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var w=g.stateNode}if(!w)throw Error(n(147,i));var S=w,I=""+i;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(R){var te=S.refs;R===null?delete te[I]:te[I]=R},d._stringRef=I,d)}if(typeof i!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,i))}return i}function Wf(i,d){throw i=Object.prototype.toString.call(d),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":i))}function q1(i){var d=i._init;return d(i._payload)}function G1(i){function d(we,de){if(i){var Ne=we.deletions;Ne===null?(we.deletions=[de],we.flags|=16):Ne.push(de)}}function g(we,de){if(!i)return null;for(;de!==null;)d(we,de),de=de.sibling;return null}function w(we,de){for(we=new Map;de!==null;)de.key!==null?we.set(de.key,de):we.set(de.index,de),de=de.sibling;return we}function S(we,de){return we=Go(we,de),we.index=0,we.sibling=null,we}function I(we,de,Ne){return we.index=Ne,i?(Ne=we.alternate,Ne!==null?(Ne=Ne.index,Ne<de?(we.flags|=2,de):Ne):(we.flags|=2,de)):(we.flags|=1048576,de)}function R(we){return i&&we.alternate===null&&(we.flags|=2),we}function te(we,de,Ne,Ke){return de===null||de.tag!==6?(de=p0(Ne,we.mode,Ke),de.return=we,de):(de=S(de,Ne),de.return=we,de)}function ce(we,de,Ne,Ke){var mt=Ne.type;return mt===O?qe(we,de,Ne.props.children,Ke,Ne.key):de!==null&&(de.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===B&&q1(mt)===de.type)?(Ke=S(de,Ne.props),Ke.ref=kd(we,de,Ne),Ke.return=we,Ke):(Ke=xh(Ne.type,Ne.key,Ne.props,null,we.mode,Ke),Ke.ref=kd(we,de,Ne),Ke.return=we,Ke)}function Ee(we,de,Ne,Ke){return de===null||de.tag!==4||de.stateNode.containerInfo!==Ne.containerInfo||de.stateNode.implementation!==Ne.implementation?(de=g0(Ne,we.mode,Ke),de.return=we,de):(de=S(de,Ne.children||[]),de.return=we,de)}function qe(we,de,Ne,Ke,mt){return de===null||de.tag!==7?(de=Ui(Ne,we.mode,Ke,mt),de.return=we,de):(de=S(de,Ne),de.return=we,de)}function He(we,de,Ne){if(typeof de=="string"&&de!==""||typeof de=="number")return de=p0(""+de,we.mode,Ne),de.return=we,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case P:return Ne=xh(de.type,de.key,de.props,null,we.mode,Ne),Ne.ref=kd(we,null,de),Ne.return=we,Ne;case C:return de=g0(de,we.mode,Ne),de.return=we,de;case B:var Ke=de._init;return He(we,Ke(de._payload),Ne)}if(J(de)||K(de))return de=Ui(de,we.mode,Ne,null),de.return=we,de;Wf(we,de)}return null}function Ve(we,de,Ne,Ke){var mt=de!==null?de.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return mt!==null?null:te(we,de,""+Ne,Ke);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case P:return Ne.key===mt?ce(we,de,Ne,Ke):null;case C:return Ne.key===mt?Ee(we,de,Ne,Ke):null;case B:return mt=Ne._init,Ve(we,de,mt(Ne._payload),Ke)}if(J(Ne)||K(Ne))return mt!==null?null:qe(we,de,Ne,Ke,null);Wf(we,Ne)}return null}function et(we,de,Ne,Ke,mt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return we=we.get(Ne)||null,te(de,we,""+Ke,mt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case P:return we=we.get(Ke.key===null?Ne:Ke.key)||null,ce(de,we,Ke,mt);case C:return we=we.get(Ke.key===null?Ne:Ke.key)||null,Ee(de,we,Ke,mt);case B:var kt=Ke._init;return et(we,de,Ne,kt(Ke._payload),mt)}if(J(Ke)||K(Ke))return we=we.get(Ne)||null,qe(de,we,Ke,mt,null);Wf(de,Ke)}return null}function at(we,de,Ne,Ke){for(var mt=null,kt=null,Pt=de,Ot=de=0,an=null;Pt!==null&&Ot<Ne.length;Ot++){Pt.index>Ot?(an=Pt,Pt=null):an=Pt.sibling;var Wt=Ve(we,Pt,Ne[Ot],Ke);if(Wt===null){Pt===null&&(Pt=an);break}i&&Pt&&Wt.alternate===null&&d(we,Pt),de=I(Wt,de,Ot),kt===null?mt=Wt:kt.sibling=Wt,kt=Wt,Pt=an}if(Ot===Ne.length)return g(we,Pt),pr&&Ti(we,Ot),mt;if(Pt===null){for(;Ot<Ne.length;Ot++)Pt=He(we,Ne[Ot],Ke),Pt!==null&&(de=I(Pt,de,Ot),kt===null?mt=Pt:kt.sibling=Pt,kt=Pt);return pr&&Ti(we,Ot),mt}for(Pt=w(we,Pt);Ot<Ne.length;Ot++)an=et(Pt,we,Ot,Ne[Ot],Ke),an!==null&&(i&&an.alternate!==null&&Pt.delete(an.key===null?Ot:an.key),de=I(an,de,Ot),kt===null?mt=an:kt.sibling=an,kt=an);return i&&Pt.forEach(function(Ho){return d(we,Ho)}),pr&&Ti(we,Ot),mt}function ut(we,de,Ne,Ke){var mt=K(Ne);if(typeof mt!="function")throw Error(n(150));if(Ne=mt.call(Ne),Ne==null)throw Error(n(151));for(var kt=mt=null,Pt=de,Ot=de=0,an=null,Wt=Ne.next();Pt!==null&&!Wt.done;Ot++,Wt=Ne.next()){Pt.index>Ot?(an=Pt,Pt=null):an=Pt.sibling;var Ho=Ve(we,Pt,Wt.value,Ke);if(Ho===null){Pt===null&&(Pt=an);break}i&&Pt&&Ho.alternate===null&&d(we,Pt),de=I(Ho,de,Ot),kt===null?mt=Ho:kt.sibling=Ho,kt=Ho,Pt=an}if(Wt.done)return g(we,Pt),pr&&Ti(we,Ot),mt;if(Pt===null){for(;!Wt.done;Ot++,Wt=Ne.next())Wt=He(we,Wt.value,Ke),Wt!==null&&(de=I(Wt,de,Ot),kt===null?mt=Wt:kt.sibling=Wt,kt=Wt);return pr&&Ti(we,Ot),mt}for(Pt=w(we,Pt);!Wt.done;Ot++,Wt=Ne.next())Wt=et(Pt,we,Ot,Wt.value,Ke),Wt!==null&&(i&&Wt.alternate!==null&&Pt.delete(Wt.key===null?Ot:Wt.key),de=I(Wt,de,Ot),kt===null?mt=Wt:kt.sibling=Wt,kt=Wt);return i&&Pt.forEach(function(pF){return d(we,pF)}),pr&&Ti(we,Ot),mt}function Mr(we,de,Ne,Ke){if(typeof Ne=="object"&&Ne!==null&&Ne.type===O&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case P:e:{for(var mt=Ne.key,kt=de;kt!==null;){if(kt.key===mt){if(mt=Ne.type,mt===O){if(kt.tag===7){g(we,kt.sibling),de=S(kt,Ne.props.children),de.return=we,we=de;break e}}else if(kt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===B&&q1(mt)===kt.type){g(we,kt.sibling),de=S(kt,Ne.props),de.ref=kd(we,kt,Ne),de.return=we,we=de;break e}g(we,kt);break}else d(we,kt);kt=kt.sibling}Ne.type===O?(de=Ui(Ne.props.children,we.mode,Ke,Ne.key),de.return=we,we=de):(Ke=xh(Ne.type,Ne.key,Ne.props,null,we.mode,Ke),Ke.ref=kd(we,de,Ne),Ke.return=we,we=Ke)}return R(we);case C:e:{for(kt=Ne.key;de!==null;){if(de.key===kt)if(de.tag===4&&de.stateNode.containerInfo===Ne.containerInfo&&de.stateNode.implementation===Ne.implementation){g(we,de.sibling),de=S(de,Ne.children||[]),de.return=we,we=de;break e}else{g(we,de);break}else d(we,de);de=de.sibling}de=g0(Ne,we.mode,Ke),de.return=we,we=de}return R(we);case B:return kt=Ne._init,Mr(we,de,kt(Ne._payload),Ke)}if(J(Ne))return at(we,de,Ne,Ke);if(K(Ne))return ut(we,de,Ne,Ke);Wf(we,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,de!==null&&de.tag===6?(g(we,de.sibling),de=S(de,Ne),de.return=we,we=de):(g(we,de),de=p0(Ne,we.mode,Ke),de.return=we,we=de),R(we)):g(we,de)}return Mr}var Wl=G1(!0),H1=G1(!1),Kf=_o(null),Yf=null,Kl=null,Cx=null;function kx(){Cx=Kl=Yf=null}function Px(i){var d=Kf.current;fr(Kf),i._currentValue=d}function Ex(i,d,g){for(;i!==null;){var w=i.alternate;if((i.childLanes&d)!==d?(i.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),i===g)break;i=i.return}}function Yl(i,d){Yf=i,Cx=Kl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&d)!==0&&(Qn=!0),i.firstContext=null)}function Oa(i){var d=i._currentValue;if(Cx!==i)if(i={context:i,memoizedValue:d,next:null},Kl===null){if(Yf===null)throw Error(n(308));Kl=i,Yf.dependencies={lanes:0,firstContext:i}}else Kl=Kl.next=i;return d}var _i=null;function Ax(i){_i===null?_i=[i]:_i.push(i)}function W1(i,d,g,w){var S=d.interleaved;return S===null?(g.next=g,Ax(d)):(g.next=S.next,S.next=g),d.interleaved=g,Vs(i,w)}function Vs(i,d){i.lanes|=d;var g=i.alternate;for(g!==null&&(g.lanes|=d),g=i,i=i.return;i!==null;)i.childLanes|=d,g=i.alternate,g!==null&&(g.childLanes|=d),g=i,i=i.return;return g.tag===3?g.stateNode:null}var Fo=!1;function Ix(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K1(i,d){i=i.updateQueue,d.updateQueue===i&&(d.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function qs(i,d){return{eventTime:i,lane:d,tag:0,payload:null,callback:null,next:null}}function Lo(i,d,g){var w=i.updateQueue;if(w===null)return null;if(w=w.shared,(Gt&2)!==0){var S=w.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),w.pending=d,Vs(i,g)}return S=w.interleaved,S===null?(d.next=d,Ax(w)):(d.next=S.next,S.next=d),w.interleaved=d,Vs(i,g)}function Xf(i,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var w=d.lanes;w&=i.pendingLanes,g|=w,d.lanes=g,Ol(i,g)}}function Y1(i,d){var g=i.updateQueue,w=i.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var S=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var R={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};I===null?S=I=R:I=I.next=R,g=g.next}while(g!==null);I===null?S=I=d:I=I.next=d}else S=I=d;g={baseState:w.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:w.shared,effects:w.effects},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=d:i.next=d,g.lastBaseUpdate=d}function Jf(i,d,g,w){var S=i.updateQueue;Fo=!1;var I=S.firstBaseUpdate,R=S.lastBaseUpdate,te=S.shared.pending;if(te!==null){S.shared.pending=null;var ce=te,Ee=ce.next;ce.next=null,R===null?I=Ee:R.next=Ee,R=ce;var qe=i.alternate;qe!==null&&(qe=qe.updateQueue,te=qe.lastBaseUpdate,te!==R&&(te===null?qe.firstBaseUpdate=Ee:te.next=Ee,qe.lastBaseUpdate=ce))}if(I!==null){var He=S.baseState;R=0,qe=Ee=ce=null,te=I;do{var Ve=te.lane,et=te.eventTime;if((w&Ve)===Ve){qe!==null&&(qe=qe.next={eventTime:et,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var at=i,ut=te;switch(Ve=d,et=g,ut.tag){case 1:if(at=ut.payload,typeof at=="function"){He=at.call(et,He,Ve);break e}He=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ut.payload,Ve=typeof at=="function"?at.call(et,He,Ve):at,Ve==null)break e;He=V({},He,Ve);break e;case 2:Fo=!0}}te.callback!==null&&te.lane!==0&&(i.flags|=64,Ve=S.effects,Ve===null?S.effects=[te]:Ve.push(te))}else et={eventTime:et,lane:Ve,tag:te.tag,payload:te.payload,callback:te.callback,next:null},qe===null?(Ee=qe=et,ce=He):qe=qe.next=et,R|=Ve;if(te=te.next,te===null){if(te=S.shared.pending,te===null)break;Ve=te,te=Ve.next,Ve.next=null,S.lastBaseUpdate=Ve,S.shared.pending=null}}while(!0);if(qe===null&&(ce=He),S.baseState=ce,S.firstBaseUpdate=Ee,S.lastBaseUpdate=qe,d=S.shared.interleaved,d!==null){S=d;do R|=S.lane,S=S.next;while(S!==d)}else I===null&&(S.shared.lanes=0);Fi|=R,i.lanes=R,i.memoizedState=He}}function X1(i,d,g){if(i=d.effects,d.effects=null,i!==null)for(d=0;d<i.length;d++){var w=i[d],S=w.callback;if(S!==null){if(w.callback=null,w=g,typeof S!="function")throw Error(n(191,S));S.call(w)}}}var Pd={},ws=_o(Pd),Ed=_o(Pd),Ad=_o(Pd);function Ri(i){if(i===Pd)throw Error(n(174));return i}function Dx(i,d){switch(cr(Ad,d),cr(Ed,i),cr(ws,Pd),i=d.nodeType,i){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ee(null,"");break;default:i=i===8?d.parentNode:d,d=i.namespaceURI||null,i=i.tagName,d=ee(d,i)}fr(ws),cr(ws,d)}function Xl(){fr(ws),fr(Ed),fr(Ad)}function J1(i){Ri(Ad.current);var d=Ri(ws.current),g=ee(d,i.type);d!==g&&(cr(Ed,i),cr(ws,g))}function Ox(i){Ed.current===i&&(fr(ws),fr(Ed))}var Sr=_o(0);function Qf(i){for(var d=i;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Mx=[];function Tx(){for(var i=0;i<Mx.length;i++)Mx[i]._workInProgressVersionPrimary=null;Mx.length=0}var Zf=E.ReactCurrentDispatcher,_x=E.ReactCurrentBatchConfig,$i=0,Cr=null,Gr=null,rn=null,eh=!1,Id=!1,Dd=0,$3=0;function In(){throw Error(n(321))}function Rx(i,d){if(d===null)return!1;for(var g=0;g<d.length&&g<i.length;g++)if(!Xa(i[g],d[g]))return!1;return!0}function $x(i,d,g,w,S,I){if($i=I,Cr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Zf.current=i===null||i.memoizedState===null?B3:U3,i=g(w,S),Id){I=0;do{if(Id=!1,Dd=0,25<=I)throw Error(n(301));I+=1,rn=Gr=null,d.updateQueue=null,Zf.current=V3,i=g(w,S)}while(Id)}if(Zf.current=nh,d=Gr!==null&&Gr.next!==null,$i=0,rn=Gr=Cr=null,eh=!1,d)throw Error(n(300));return i}function Fx(){var i=Dd!==0;return Dd=0,i}function Ns(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Cr.memoizedState=rn=i:rn=rn.next=i,rn}function Ma(){if(Gr===null){var i=Cr.alternate;i=i!==null?i.memoizedState:null}else i=Gr.next;var d=rn===null?Cr.memoizedState:rn.next;if(d!==null)rn=d,Gr=i;else{if(i===null)throw Error(n(310));Gr=i,i={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},rn===null?Cr.memoizedState=rn=i:rn=rn.next=i}return rn}function Od(i,d){return typeof d=="function"?d(i):d}function Lx(i){var d=Ma(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var w=Gr,S=w.baseQueue,I=g.pending;if(I!==null){if(S!==null){var R=S.next;S.next=I.next,I.next=R}w.baseQueue=S=I,g.pending=null}if(S!==null){I=S.next,w=w.baseState;var te=R=null,ce=null,Ee=I;do{var qe=Ee.lane;if(($i&qe)===qe)ce!==null&&(ce=ce.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),w=Ee.hasEagerState?Ee.eagerState:i(w,Ee.action);else{var He={lane:qe,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ce===null?(te=ce=He,R=w):ce=ce.next=He,Cr.lanes|=qe,Fi|=qe}Ee=Ee.next}while(Ee!==null&&Ee!==I);ce===null?R=w:ce.next=te,Xa(w,d.memoizedState)||(Qn=!0),d.memoizedState=w,d.baseState=R,d.baseQueue=ce,g.lastRenderedState=w}if(i=g.interleaved,i!==null){S=i;do I=S.lane,Cr.lanes|=I,Fi|=I,S=S.next;while(S!==i)}else S===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function zx(i){var d=Ma(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var w=g.dispatch,S=g.pending,I=d.memoizedState;if(S!==null){g.pending=null;var R=S=S.next;do I=i(I,R.action),R=R.next;while(R!==S);Xa(I,d.memoizedState)||(Qn=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),g.lastRenderedState=I}return[I,w]}function Q1(){}function Z1(i,d){var g=Cr,w=Ma(),S=d(),I=!Xa(w.memoizedState,S);if(I&&(w.memoizedState=S,Qn=!0),w=w.queue,Bx(rS.bind(null,g,w,i),[i]),w.getSnapshot!==d||I||rn!==null&&rn.memoizedState.tag&1){if(g.flags|=2048,Md(9,tS.bind(null,g,w,S,d),void 0,null),nn===null)throw Error(n(349));($i&30)!==0||eS(g,d,S)}return S}function eS(i,d,g){i.flags|=16384,i={getSnapshot:d,value:g},d=Cr.updateQueue,d===null?(d={lastEffect:null,stores:null},Cr.updateQueue=d,d.stores=[i]):(g=d.stores,g===null?d.stores=[i]:g.push(i))}function tS(i,d,g,w){d.value=g,d.getSnapshot=w,nS(d)&&aS(i)}function rS(i,d,g){return g(function(){nS(d)&&aS(i)})}function nS(i){var d=i.getSnapshot;i=i.value;try{var g=d();return!Xa(i,g)}catch(w){return!0}}function aS(i){var d=Vs(i,1);d!==null&&ts(d,i,1,-1)}function sS(i){var d=Ns();return typeof i=="function"&&(i=i()),d.memoizedState=d.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:i},d.queue=i,i=i.dispatch=z3.bind(null,Cr,i),[d.memoizedState,i]}function Md(i,d,g,w){return i={tag:i,create:d,destroy:g,deps:w,next:null},d=Cr.updateQueue,d===null?(d={lastEffect:null,stores:null},Cr.updateQueue=d,d.lastEffect=i.next=i):(g=d.lastEffect,g===null?d.lastEffect=i.next=i:(w=g.next,g.next=i,i.next=w,d.lastEffect=i)),i}function oS(){return Ma().memoizedState}function th(i,d,g,w){var S=Ns();Cr.flags|=i,S.memoizedState=Md(1|d,g,void 0,w===void 0?null:w)}function rh(i,d,g,w){var S=Ma();w=w===void 0?null:w;var I=void 0;if(Gr!==null){var R=Gr.memoizedState;if(I=R.destroy,w!==null&&Rx(w,R.deps)){S.memoizedState=Md(d,g,I,w);return}}Cr.flags|=i,S.memoizedState=Md(1|d,g,I,w)}function iS(i,d){return th(8390656,8,i,d)}function Bx(i,d){return rh(2048,8,i,d)}function lS(i,d){return rh(4,2,i,d)}function cS(i,d){return rh(4,4,i,d)}function dS(i,d){if(typeof d=="function")return i=i(),d(i),function(){d(null)};if(d!=null)return i=i(),d.current=i,function(){d.current=null}}function uS(i,d,g){return g=g!=null?g.concat([i]):null,rh(4,4,dS.bind(null,d,i),g)}function Ux(){}function fS(i,d){var g=Ma();d=d===void 0?null:d;var w=g.memoizedState;return w!==null&&d!==null&&Rx(d,w[1])?w[0]:(g.memoizedState=[i,d],i)}function hS(i,d){var g=Ma();d=d===void 0?null:d;var w=g.memoizedState;return w!==null&&d!==null&&Rx(d,w[1])?w[0]:(i=i(),g.memoizedState=[i,d],i)}function mS(i,d,g){return($i&21)===0?(i.baseState&&(i.baseState=!1,Qn=!0),i.memoizedState=g):(Xa(g,d)||(g=dd(),Cr.lanes|=g,Fi|=g,i.baseState=!0),d)}function F3(i,d){var g=Jt;Jt=g!==0&&4>g?g:4,i(!0);var w=_x.transition;_x.transition={};try{i(!1),d()}finally{Jt=g,_x.transition=w}}function pS(){return Ma().memoizedState}function L3(i,d,g){var w=Vo(i);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},gS(i))xS(d,g);else if(g=W1(i,d,g,w),g!==null){var S=zn();ts(g,i,w,S),vS(g,d,w)}}function z3(i,d,g){var w=Vo(i),S={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(gS(i))xS(d,S);else{var I=i.alternate;if(i.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var R=d.lastRenderedState,te=I(R,g);if(S.hasEagerState=!0,S.eagerState=te,Xa(te,R)){var ce=d.interleaved;ce===null?(S.next=S,Ax(d)):(S.next=ce.next,ce.next=S),d.interleaved=S;return}}catch(Ee){}finally{}g=W1(i,d,S,w),g!==null&&(S=zn(),ts(g,i,w,S),vS(g,d,w))}}function gS(i){var d=i.alternate;return i===Cr||d!==null&&d===Cr}function xS(i,d){Id=eh=!0;var g=i.pending;g===null?d.next=d:(d.next=g.next,g.next=d),i.pending=d}function vS(i,d,g){if((g&4194240)!==0){var w=d.lanes;w&=i.pendingLanes,g|=w,d.lanes=g,Ol(i,g)}}var nh={readContext:Oa,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},B3={readContext:Oa,useCallback:function(i,d){return Ns().memoizedState=[i,d===void 0?null:d],i},useContext:Oa,useEffect:iS,useImperativeHandle:function(i,d,g){return g=g!=null?g.concat([i]):null,th(4194308,4,dS.bind(null,d,i),g)},useLayoutEffect:function(i,d){return th(4194308,4,i,d)},useInsertionEffect:function(i,d){return th(4,2,i,d)},useMemo:function(i,d){var g=Ns();return d=d===void 0?null:d,i=i(),g.memoizedState=[i,d],i},useReducer:function(i,d,g){var w=Ns();return d=g!==void 0?g(d):d,w.memoizedState=w.baseState=d,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},w.queue=i,i=i.dispatch=L3.bind(null,Cr,i),[w.memoizedState,i]},useRef:function(i){var d=Ns();return i={current:i},d.memoizedState=i},useState:sS,useDebugValue:Ux,useDeferredValue:function(i){return Ns().memoizedState=i},useTransition:function(){var i=sS(!1),d=i[0];return i=F3.bind(null,i[1]),Ns().memoizedState=i,[d,i]},useMutableSource:function(){},useSyncExternalStore:function(i,d,g){var w=Cr,S=Ns();if(pr){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),nn===null)throw Error(n(349));($i&30)!==0||eS(w,d,g)}S.memoizedState=g;var I={value:g,getSnapshot:d};return S.queue=I,iS(rS.bind(null,w,I,i),[i]),w.flags|=2048,Md(9,tS.bind(null,w,I,g,d),void 0,null),g},useId:function(){var i=Ns(),d=nn.identifierPrefix;if(pr){var g=Us,w=Bs;g=(w&~(1<<32-Yn(w)-1)).toString(32)+g,d=":"+d+"R"+g,g=Dd++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=$3++,d=":"+d+"r"+g.toString(32)+":";return i.memoizedState=d},unstable_isNewReconciler:!1},U3={readContext:Oa,useCallback:fS,useContext:Oa,useEffect:Bx,useImperativeHandle:uS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:hS,useReducer:Lx,useRef:oS,useState:function(){return Lx(Od)},useDebugValue:Ux,useDeferredValue:function(i){var d=Ma();return mS(d,Gr.memoizedState,i)},useTransition:function(){var i=Lx(Od)[0],d=Ma().memoizedState;return[i,d]},useMutableSource:Q1,useSyncExternalStore:Z1,useId:pS,unstable_isNewReconciler:!1},V3={readContext:Oa,useCallback:fS,useContext:Oa,useEffect:Bx,useImperativeHandle:uS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:hS,useReducer:zx,useRef:oS,useState:function(){return zx(Od)},useDebugValue:Ux,useDeferredValue:function(i){var d=Ma();return Gr===null?d.memoizedState=i:mS(d,Gr.memoizedState,i)},useTransition:function(){var i=zx(Od)[0],d=Ma().memoizedState;return[i,d]},useMutableSource:Q1,useSyncExternalStore:Z1,useId:pS,unstable_isNewReconciler:!1};function Qa(i,d){if(i&&i.defaultProps){d=V({},d),i=i.defaultProps;for(var g in i)d[g]===void 0&&(d[g]=i[g]);return d}return d}function Vx(i,d,g,w){d=i.memoizedState,g=g(w,d),g=g==null?d:V({},d,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var ah={isMounted:function(i){return(i=i._reactInternals)?$r(i)===i:!1},enqueueSetState:function(i,d,g){i=i._reactInternals;var w=zn(),S=Vo(i),I=qs(w,S);I.payload=d,g!=null&&(I.callback=g),d=Lo(i,I,S),d!==null&&(ts(d,i,S,w),Xf(d,i,S))},enqueueReplaceState:function(i,d,g){i=i._reactInternals;var w=zn(),S=Vo(i),I=qs(w,S);I.tag=1,I.payload=d,g!=null&&(I.callback=g),d=Lo(i,I,S),d!==null&&(ts(d,i,S,w),Xf(d,i,S))},enqueueForceUpdate:function(i,d){i=i._reactInternals;var g=zn(),w=Vo(i),S=qs(g,w);S.tag=2,d!=null&&(S.callback=d),d=Lo(i,S,w),d!==null&&(ts(d,i,w,g),Xf(d,i,w))}};function yS(i,d,g,w,S,I,R){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(w,I,R):d.prototype&&d.prototype.isPureReactComponent?!yd(g,w)||!yd(S,I):!0}function bS(i,d,g){var w=!1,S=Ro,I=d.contextType;return typeof I=="object"&&I!==null?I=Oa(I):(S=Jn(d)?Oi:An.current,w=d.contextTypes,I=(w=w!=null)?Vl(i,S):Ro),d=new d(g,I),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ah,i.stateNode=d,d._reactInternals=i,w&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=I),d}function jS(i,d,g,w){i=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,w),d.state!==i&&ah.enqueueReplaceState(d,d.state,null)}function qx(i,d,g,w){var S=i.stateNode;S.props=g,S.state=i.memoizedState,S.refs={},Ix(i);var I=d.contextType;typeof I=="object"&&I!==null?S.context=Oa(I):(I=Jn(d)?Oi:An.current,S.context=Vl(i,I)),S.state=i.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(Vx(i,d,I,g),S.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&ah.enqueueReplaceState(S,S.state,null),Jf(i,g,S,w),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function Jl(i,d){try{var g="",w=d;do g+=me(w),w=w.return;while(w);var S=g}catch(I){S="\nError generating stack: "+I.message+"\n"+I.stack}return{value:i,source:d,stack:S,digest:null}}function Gx(i,d,g){return{value:i,source:null,stack:g!=null?g:null,digest:d!=null?d:null}}function Hx(i,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var q3=typeof WeakMap=="function"?WeakMap:Map;function wS(i,d,g){g=qs(-1,g),g.tag=3,g.payload={element:null};var w=d.value;return g.callback=function(){uh||(uh=!0,i0=w),Hx(i,d)},g}function NS(i,d,g){g=qs(-1,g),g.tag=3;var w=i.type.getDerivedStateFromError;if(typeof w=="function"){var S=d.value;g.payload=function(){return w(S)},g.callback=function(){Hx(i,d)}}var I=i.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(g.callback=function(){Hx(i,d),typeof w!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})}),g}function SS(i,d,g){var w=i.pingCache;if(w===null){w=i.pingCache=new q3;var S=new Set;w.set(d,S)}else S=w.get(d),S===void 0&&(S=new Set,w.set(d,S));S.has(g)||(S.add(g),i=aF.bind(null,i,d,g),d.then(i,i))}function CS(i){do{var d;if((d=i.tag===13)&&(d=i.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return i;i=i.return}while(i!==null);return null}function kS(i,d,g,w,S){return(i.mode&1)===0?(i===d?i.flags|=65536:(i.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=qs(-1,1),d.tag=2,Lo(g,d,1))),g.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var G3=E.ReactCurrentOwner,Qn=!1;function Ln(i,d,g,w){d.child=i===null?H1(d,null,g,w):Wl(d,i.child,g,w)}function PS(i,d,g,w,S){g=g.render;var I=d.ref;return Yl(d,S),w=$x(i,d,g,w,I,S),g=Fx(),i!==null&&!Qn?(d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~S,Gs(i,d,S)):(pr&&g&&bx(d),d.flags|=1,Ln(i,d,w,S),d.child)}function ES(i,d,g,w,S){if(i===null){var I=g.type;return typeof I=="function"&&!m0(I)&&I.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=I,AS(i,d,I,w,S)):(i=xh(g.type,null,w,d,d.mode,S),i.ref=d.ref,i.return=d,d.child=i)}if(I=i.child,(i.lanes&S)===0){var R=I.memoizedProps;if(g=g.compare,g=g!==null?g:yd,g(R,w)&&i.ref===d.ref)return Gs(i,d,S)}return d.flags|=1,i=Go(I,w),i.ref=d.ref,i.return=d,d.child=i}function AS(i,d,g,w,S){if(i!==null){var I=i.memoizedProps;if(yd(I,w)&&i.ref===d.ref)if(Qn=!1,d.pendingProps=w=I,(i.lanes&S)!==0)(i.flags&131072)!==0&&(Qn=!0);else return d.lanes=i.lanes,Gs(i,d,S)}return Wx(i,d,g,w,S)}function IS(i,d,g){var w=d.pendingProps,S=w.children,I=i!==null?i.memoizedState:null;if(w.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(Zl,ma),ma|=g;else{if((g&1073741824)===0)return i=I!==null?I.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:i,cachePool:null,transitions:null},d.updateQueue=null,cr(Zl,ma),ma|=i,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=I!==null?I.baseLanes:g,cr(Zl,ma),ma|=w}else I!==null?(w=I.baseLanes|g,d.memoizedState=null):w=g,cr(Zl,ma),ma|=w;return Ln(i,d,S,g),d.child}function DS(i,d){var g=d.ref;(i===null&&g!==null||i!==null&&i.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function Wx(i,d,g,w,S){var I=Jn(g)?Oi:An.current;return I=Vl(d,I),Yl(d,S),g=$x(i,d,g,w,I,S),w=Fx(),i!==null&&!Qn?(d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~S,Gs(i,d,S)):(pr&&w&&bx(d),d.flags|=1,Ln(i,d,g,S),d.child)}function OS(i,d,g,w,S){if(Jn(g)){var I=!0;Uf(d)}else I=!1;if(Yl(d,S),d.stateNode===null)oh(i,d),bS(d,g,w),qx(d,g,w,S),w=!0;else if(i===null){var R=d.stateNode,te=d.memoizedProps;R.props=te;var ce=R.context,Ee=g.contextType;typeof Ee=="object"&&Ee!==null?Ee=Oa(Ee):(Ee=Jn(g)?Oi:An.current,Ee=Vl(d,Ee));var qe=g.getDerivedStateFromProps,He=typeof qe=="function"||typeof R.getSnapshotBeforeUpdate=="function";He||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(te!==w||ce!==Ee)&&jS(d,R,w,Ee),Fo=!1;var Ve=d.memoizedState;R.state=Ve,Jf(d,w,R,S),ce=d.memoizedState,te!==w||Ve!==ce||Xn.current||Fo?(typeof qe=="function"&&(Vx(d,g,qe,w),ce=d.memoizedState),(te=Fo||yS(d,g,te,w,Ve,ce,Ee))?(He||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(d.flags|=4194308)):(typeof R.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ce),R.props=w,R.state=ce,R.context=Ee,w=te):(typeof R.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{R=d.stateNode,K1(i,d),te=d.memoizedProps,Ee=d.type===d.elementType?te:Qa(d.type,te),R.props=Ee,He=d.pendingProps,Ve=R.context,ce=g.contextType,typeof ce=="object"&&ce!==null?ce=Oa(ce):(ce=Jn(g)?Oi:An.current,ce=Vl(d,ce));var et=g.getDerivedStateFromProps;(qe=typeof et=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(te!==He||Ve!==ce)&&jS(d,R,w,ce),Fo=!1,Ve=d.memoizedState,R.state=Ve,Jf(d,w,R,S);var at=d.memoizedState;te!==He||Ve!==at||Xn.current||Fo?(typeof et=="function"&&(Vx(d,g,et,w),at=d.memoizedState),(Ee=Fo||yS(d,g,Ee,w,Ve,at,ce)||!1)?(qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(w,at,ce),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(w,at,ce)),typeof R.componentDidUpdate=="function"&&(d.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof R.componentDidUpdate!="function"||te===i.memoizedProps&&Ve===i.memoizedState||(d.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||te===i.memoizedProps&&Ve===i.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=at),R.props=w,R.state=at,R.context=ce,w=Ee):(typeof R.componentDidUpdate!="function"||te===i.memoizedProps&&Ve===i.memoizedState||(d.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||te===i.memoizedProps&&Ve===i.memoizedState||(d.flags|=1024),w=!1)}return Kx(i,d,g,w,I,S)}function Kx(i,d,g,w,S,I){DS(i,d);var R=(d.flags&128)!==0;if(!w&&!R)return S&&$1(d,g,!1),Gs(i,d,I);w=d.stateNode,G3.current=d;var te=R&&typeof g.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,i!==null&&R?(d.child=Wl(d,i.child,null,I),d.child=Wl(d,null,te,I)):Ln(i,d,te,I),d.memoizedState=w.state,S&&$1(d,g,!0),d.child}function MS(i){var d=i.stateNode;d.pendingContext?_1(i,d.pendingContext,d.pendingContext!==d.context):d.context&&_1(i,d.context,!1),Dx(i,d.containerInfo)}function TS(i,d,g,w,S){return Hl(),Sx(S),d.flags|=256,Ln(i,d,g,w),d.child}var Yx={dehydrated:null,treeContext:null,retryLane:0};function Xx(i){return{baseLanes:i,cachePool:null,transitions:null}}function _S(i,d,g){var w=d.pendingProps,S=Sr.current,I=!1,R=(d.flags&128)!==0,te;if((te=R)||(te=i!==null&&i.memoizedState===null?!1:(S&2)!==0),te?(I=!0,d.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),cr(Sr,S&1),i===null)return Nx(d),i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((d.mode&1)===0?d.lanes=1:i.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(R=w.children,i=w.fallback,I?(w=d.mode,I=d.child,R={mode:"hidden",children:R},(w&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=R):I=vh(R,w,0,null),i=Ui(i,w,g,null),I.return=d,i.return=d,I.sibling=i,d.child=I,d.child.memoizedState=Xx(g),d.memoizedState=Yx,i):Jx(d,R));if(S=i.memoizedState,S!==null&&(te=S.dehydrated,te!==null))return H3(i,d,R,w,te,S,g);if(I){I=w.fallback,R=d.mode,S=i.child,te=S.sibling;var ce={mode:"hidden",children:w.children};return(R&1)===0&&d.child!==S?(w=d.child,w.childLanes=0,w.pendingProps=ce,d.deletions=null):(w=Go(S,ce),w.subtreeFlags=S.subtreeFlags&14680064),te!==null?I=Go(te,I):(I=Ui(I,R,g,null),I.flags|=2),I.return=d,w.return=d,w.sibling=I,d.child=w,w=I,I=d.child,R=i.child.memoizedState,R=R===null?Xx(g):{baseLanes:R.baseLanes|g,cachePool:null,transitions:R.transitions},I.memoizedState=R,I.childLanes=i.childLanes&~g,d.memoizedState=Yx,w}return I=i.child,i=I.sibling,w=Go(I,{mode:"visible",children:w.children}),(d.mode&1)===0&&(w.lanes=g),w.return=d,w.sibling=null,i!==null&&(g=d.deletions,g===null?(d.deletions=[i],d.flags|=16):g.push(i)),d.child=w,d.memoizedState=null,w}function Jx(i,d){return d=vh({mode:"visible",children:d},i.mode,0,null),d.return=i,i.child=d}function sh(i,d,g,w){return w!==null&&Sx(w),Wl(d,i.child,null,g),i=Jx(d,d.pendingProps.children),i.flags|=2,d.memoizedState=null,i}function H3(i,d,g,w,S,I,R){if(g)return d.flags&256?(d.flags&=-257,w=Gx(Error(n(422))),sh(i,d,R,w)):d.memoizedState!==null?(d.child=i.child,d.flags|=128,null):(I=w.fallback,S=d.mode,w=vh({mode:"visible",children:w.children},S,0,null),I=Ui(I,S,R,null),I.flags|=2,w.return=d,I.return=d,w.sibling=I,d.child=w,(d.mode&1)!==0&&Wl(d,i.child,null,R),d.child.memoizedState=Xx(R),d.memoizedState=Yx,I);if((d.mode&1)===0)return sh(i,d,R,null);if(S.data==="$!"){if(w=S.nextSibling&&S.nextSibling.dataset,w)var te=w.dgst;return w=te,I=Error(n(419)),w=Gx(I,w,void 0),sh(i,d,R,w)}if(te=(R&i.childLanes)!==0,Qn||te){if(w=nn,w!==null){switch(R&-R){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(w.suspendedLanes|R))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,Vs(i,S),ts(w,i,S,-1))}return h0(),w=Gx(Error(n(421))),sh(i,d,R,w)}return S.data==="$?"?(d.flags|=128,d.child=i.child,d=sF.bind(null,i),S._reactRetry=d,null):(i=I.treeContext,ha=To(S.nextSibling),fa=d,pr=!0,Ja=null,i!==null&&(Ia[Da++]=Bs,Ia[Da++]=Us,Ia[Da++]=Mi,Bs=i.id,Us=i.overflow,Mi=d),d=Jx(d,w.children),d.flags|=4096,d)}function RS(i,d,g){i.lanes|=d;var w=i.alternate;w!==null&&(w.lanes|=d),Ex(i.return,d,g)}function Qx(i,d,g,w,S){var I=i.memoizedState;I===null?i.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:S}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=w,I.tail=g,I.tailMode=S)}function $S(i,d,g){var w=d.pendingProps,S=w.revealOrder,I=w.tail;if(Ln(i,d,w.children,g),w=Sr.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=d.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&RS(i,g,d);else if(i.tag===19)RS(i,g,d);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===d)break e;for(;i.sibling===null;){if(i.return===null||i.return===d)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}w&=1}if(cr(Sr,w),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(g=d.child,S=null;g!==null;)i=g.alternate,i!==null&&Qf(i)===null&&(S=g),g=g.sibling;g=S,g===null?(S=d.child,d.child=null):(S=g.sibling,g.sibling=null),Qx(d,!1,S,g,I);break;case"backwards":for(g=null,S=d.child,d.child=null;S!==null;){if(i=S.alternate,i!==null&&Qf(i)===null){d.child=S;break}i=S.sibling,S.sibling=g,g=S,S=i}Qx(d,!0,g,null,I);break;case"together":Qx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function oh(i,d){(d.mode&1)===0&&i!==null&&(i.alternate=null,d.alternate=null,d.flags|=2)}function Gs(i,d,g){if(i!==null&&(d.dependencies=i.dependencies),Fi|=d.lanes,(g&d.childLanes)===0)return null;if(i!==null&&d.child!==i.child)throw Error(n(153));if(d.child!==null){for(i=d.child,g=Go(i,i.pendingProps),d.child=g,g.return=d;i.sibling!==null;)i=i.sibling,g=g.sibling=Go(i,i.pendingProps),g.return=d;g.sibling=null}return d.child}function W3(i,d,g){switch(d.tag){case 3:MS(d),Hl();break;case 5:J1(d);break;case 1:Jn(d.type)&&Uf(d);break;case 4:Dx(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,S=d.memoizedProps.value;cr(Kf,w._currentValue),w._currentValue=S;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(cr(Sr,Sr.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?_S(i,d,g):(cr(Sr,Sr.current&1),i=Gs(i,d,g),i!==null?i.sibling:null);cr(Sr,Sr.current&1);break;case 19:if(w=(g&d.childLanes)!==0,(i.flags&128)!==0){if(w)return $S(i,d,g);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),cr(Sr,Sr.current),w)break;return null;case 22:case 23:return d.lanes=0,IS(i,d,g)}return Gs(i,d,g)}var FS,Zx,LS,zS;FS=function(i,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Zx=function(){},LS=function(i,d,g,w){var S=i.memoizedProps;if(S!==w){i=d.stateNode,Ri(ws.current);var I=null;switch(g){case"input":S=Fe(i,S),w=Fe(i,w),I=[];break;case"select":S=V({},S,{value:void 0}),w=V({},w,{value:void 0}),I=[];break;case"textarea":S=pe(i,S),w=pe(i,w),I=[];break;default:typeof S.onClick!="function"&&typeof w.onClick=="function"&&(i.onclick=Lf)}Qe(g,w);var R;g=null;for(Ee in S)if(!w.hasOwnProperty(Ee)&&S.hasOwnProperty(Ee)&&S[Ee]!=null)if(Ee==="style"){var te=S[Ee];for(R in te)te.hasOwnProperty(R)&&(g||(g={}),g[R]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(s.hasOwnProperty(Ee)?I||(I=[]):(I=I||[]).push(Ee,null));for(Ee in w){var ce=w[Ee];if(te=S!=null?S[Ee]:void 0,w.hasOwnProperty(Ee)&&ce!==te&&(ce!=null||te!=null))if(Ee==="style")if(te){for(R in te)!te.hasOwnProperty(R)||ce&&ce.hasOwnProperty(R)||(g||(g={}),g[R]="");for(R in ce)ce.hasOwnProperty(R)&&te[R]!==ce[R]&&(g||(g={}),g[R]=ce[R])}else g||(I||(I=[]),I.push(Ee,g)),g=ce;else Ee==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,te=te?te.__html:void 0,ce!=null&&te!==ce&&(I=I||[]).push(Ee,ce)):Ee==="children"?typeof ce!="string"&&typeof ce!="number"||(I=I||[]).push(Ee,""+ce):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ee)?(ce!=null&&Ee==="onScroll"&&ur("scroll",i),I||te===ce||(I=[])):(I=I||[]).push(Ee,ce))}g&&(I=I||[]).push("style",g);var Ee=I;(d.updateQueue=Ee)&&(d.flags|=4)}},zS=function(i,d,g,w){g!==w&&(d.flags|=4)};function Td(i,d){if(!pr)switch(i.tailMode){case"hidden":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?d||i.tail===null?i.tail=null:i.tail.sibling=null:w.sibling=null}}function Dn(i){var d=i.alternate!==null&&i.alternate.child===i.child,g=0,w=0;if(d)for(var S=i.child;S!==null;)g|=S.lanes|S.childLanes,w|=S.subtreeFlags&14680064,w|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)g|=S.lanes|S.childLanes,w|=S.subtreeFlags,w|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=w,i.childLanes=g,d}function K3(i,d,g){var w=d.pendingProps;switch(jx(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(d),null;case 1:return Jn(d.type)&&Bf(),Dn(d),null;case 3:return w=d.stateNode,Xl(),fr(Xn),fr(An),Tx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(i===null||i.child===null)&&(Hf(d)?d.flags|=4:i===null||i.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ja!==null&&(d0(Ja),Ja=null))),Zx(i,d),Dn(d),null;case 5:Ox(d);var S=Ri(Ad.current);if(g=d.type,i!==null&&d.stateNode!=null)LS(i,d,g,w,S),i.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(n(166));return Dn(d),null}if(i=Ri(ws.current),Hf(d)){w=d.stateNode,g=d.type;var I=d.memoizedProps;switch(w[js]=d,w[Sd]=I,i=(d.mode&1)!==0,g){case"dialog":ur("cancel",w),ur("close",w);break;case"iframe":case"object":case"embed":ur("load",w);break;case"video":case"audio":for(S=0;S<jd.length;S++)ur(jd[S],w);break;case"source":ur("error",w);break;case"img":case"image":case"link":ur("error",w),ur("load",w);break;case"details":ur("toggle",w);break;case"input":ze(w,I),ur("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!I.multiple},ur("invalid",w);break;case"textarea":Ie(w,I),ur("invalid",w)}Qe(g,I),S=null;for(var R in I)if(I.hasOwnProperty(R)){var te=I[R];R==="children"?typeof te=="string"?w.textContent!==te&&(I.suppressHydrationWarning!==!0&&Ff(w.textContent,te,i),S=["children",te]):typeof te=="number"&&w.textContent!==""+te&&(I.suppressHydrationWarning!==!0&&Ff(w.textContent,te,i),S=["children",""+te]):s.hasOwnProperty(R)&&te!=null&&R==="onScroll"&&ur("scroll",w)}switch(g){case"input":Ce(w),Xe(w,I,!0);break;case"textarea":Ce(w),_e(w);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(w.onclick=Lf)}w=S,d.updateQueue=w,w!==null&&(d.flags|=4)}else{R=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Re(g)),i==="http://www.w3.org/1999/xhtml"?g==="script"?(i=R.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof w.is=="string"?i=R.createElement(g,{is:w.is}):(i=R.createElement(g),g==="select"&&(R=i,w.multiple?R.multiple=!0:w.size&&(R.size=w.size))):i=R.createElementNS(i,g),i[js]=d,i[Sd]=w,FS(i,d,!1,!1),d.stateNode=i;e:{switch(R=tt(g,w),g){case"dialog":ur("cancel",i),ur("close",i),S=w;break;case"iframe":case"object":case"embed":ur("load",i),S=w;break;case"video":case"audio":for(S=0;S<jd.length;S++)ur(jd[S],i);S=w;break;case"source":ur("error",i),S=w;break;case"img":case"image":case"link":ur("error",i),ur("load",i),S=w;break;case"details":ur("toggle",i),S=w;break;case"input":ze(i,w),S=Fe(i,w),ur("invalid",i);break;case"option":S=w;break;case"select":i._wrapperState={wasMultiple:!!w.multiple},S=V({},w,{value:void 0}),ur("invalid",i);break;case"textarea":Ie(i,w),S=pe(i,w),ur("invalid",i);break;default:S=w}Qe(g,S),te=S;for(I in te)if(te.hasOwnProperty(I)){var ce=te[I];I==="style"?be(i,ce):I==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&Me(i,ce)):I==="children"?typeof ce=="string"?(g!=="textarea"||ce!=="")&&ne(i,ce):typeof ce=="number"&&ne(i,""+ce):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?ce!=null&&I==="onScroll"&&ur("scroll",i):ce!=null&&D(i,I,ce,R))}switch(g){case"input":Ce(i),Xe(i,w,!1);break;case"textarea":Ce(i),_e(i);break;case"option":w.value!=null&&i.setAttribute("value",""+Ge(w.value));break;case"select":i.multiple=!!w.multiple,I=w.value,I!=null?fe(i,!!w.multiple,I,!1):w.defaultValue!=null&&fe(i,!!w.multiple,w.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=Lf)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Dn(d),null;case 6:if(i&&d.stateNode!=null)zS(i,d,i.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(n(166));if(g=Ri(Ad.current),Ri(ws.current),Hf(d)){if(w=d.stateNode,g=d.memoizedProps,w[js]=d,(I=w.nodeValue!==g)&&(i=fa,i!==null))switch(i.tag){case 3:Ff(w.nodeValue,g,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ff(w.nodeValue,g,(i.mode&1)!==0)}I&&(d.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[js]=d,d.stateNode=w}return Dn(d),null;case 13:if(fr(Sr),w=d.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(pr&&ha!==null&&(d.mode&1)!==0&&(d.flags&128)===0)V1(),Hl(),d.flags|=98560,I=!1;else if(I=Hf(d),w!==null&&w.dehydrated!==null){if(i===null){if(!I)throw Error(n(318));if(I=d.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(n(317));I[js]=d}else Hl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Dn(d),I=!1}else Ja!==null&&(d0(Ja),Ja=null),I=!0;if(!I)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(w=w!==null,w!==(i!==null&&i.memoizedState!==null)&&w&&(d.child.flags|=8192,(d.mode&1)!==0&&(i===null||(Sr.current&1)!==0?Hr===0&&(Hr=3):h0())),d.updateQueue!==null&&(d.flags|=4),Dn(d),null);case 4:return Xl(),Zx(i,d),i===null&&wd(d.stateNode.containerInfo),Dn(d),null;case 10:return Px(d.type._context),Dn(d),null;case 17:return Jn(d.type)&&Bf(),Dn(d),null;case 19:if(fr(Sr),I=d.memoizedState,I===null)return Dn(d),null;if(w=(d.flags&128)!==0,R=I.rendering,R===null)if(w)Td(I,!1);else{if(Hr!==0||i!==null&&(i.flags&128)!==0)for(i=d.child;i!==null;){if(R=Qf(i),R!==null){for(d.flags|=128,Td(I,!1),w=R.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=g,g=d.child;g!==null;)I=g,i=w,I.flags&=14680066,R=I.alternate,R===null?(I.childLanes=0,I.lanes=i,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=R.childLanes,I.lanes=R.lanes,I.child=R.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=R.memoizedProps,I.memoizedState=R.memoizedState,I.updateQueue=R.updateQueue,I.type=R.type,i=R.dependencies,I.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),g=g.sibling;return cr(Sr,Sr.current&1|2),d.child}i=i.sibling}I.tail!==null&&Nr()>ec&&(d.flags|=128,w=!0,Td(I,!1),d.lanes=4194304)}else{if(!w)if(i=Qf(R),i!==null){if(d.flags|=128,w=!0,g=i.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Td(I,!0),I.tail===null&&I.tailMode==="hidden"&&!R.alternate&&!pr)return Dn(d),null}else 2*Nr()-I.renderingStartTime>ec&&g!==1073741824&&(d.flags|=128,w=!0,Td(I,!1),d.lanes=4194304);I.isBackwards?(R.sibling=d.child,d.child=R):(g=I.last,g!==null?g.sibling=R:d.child=R,I.last=R)}return I.tail!==null?(d=I.tail,I.rendering=d,I.tail=d.sibling,I.renderingStartTime=Nr(),d.sibling=null,g=Sr.current,cr(Sr,w?g&1|2:g&1),d):(Dn(d),null);case 22:case 23:return f0(),w=d.memoizedState!==null,i!==null&&i.memoizedState!==null!==w&&(d.flags|=8192),w&&(d.mode&1)!==0?(ma&1073741824)!==0&&(Dn(d),d.subtreeFlags&6&&(d.flags|=8192)):Dn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function Y3(i,d){switch(jx(d),d.tag){case 1:return Jn(d.type)&&Bf(),i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 3:return Xl(),fr(Xn),fr(An),Tx(),i=d.flags,(i&65536)!==0&&(i&128)===0?(d.flags=i&-65537|128,d):null;case 5:return Ox(d),null;case 13:if(fr(Sr),i=d.memoizedState,i!==null&&i.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Hl()}return i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 19:return fr(Sr),null;case 4:return Xl(),null;case 10:return Px(d.type._context),null;case 22:case 23:return f0(),null;case 24:return null;default:return null}}var ih=!1,On=!1,X3=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Ql(i,d){var g=i.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){Ir(i,d,w)}else g.current=null}function e0(i,d,g){try{g()}catch(w){Ir(i,d,w)}}var BS=!1;function J3(i,d){if(fx=Ya,i=y1(),ax(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var S=w.anchorOffset,I=w.focusNode;w=w.focusOffset;try{g.nodeType,I.nodeType}catch(Ke){g=null;break e}var R=0,te=-1,ce=-1,Ee=0,qe=0,He=i,Ve=null;t:for(;;){for(var et;He!==g||S!==0&&He.nodeType!==3||(te=R+S),He!==I||w!==0&&He.nodeType!==3||(ce=R+w),He.nodeType===3&&(R+=He.nodeValue.length),(et=He.firstChild)!==null;)Ve=He,He=et;for(;;){if(He===i)break t;if(Ve===g&&++Ee===S&&(te=R),Ve===I&&++qe===w&&(ce=R),(et=He.nextSibling)!==null)break;He=Ve,Ve=He.parentNode}He=et}g=te===-1||ce===-1?null:{start:te,end:ce}}else g=null}g=g||{start:0,end:0}}else g=null;for(hx={focusedElem:i,selectionRange:g},Ya=!1,rt=d;rt!==null;)if(d=rt,i=d.child,(d.subtreeFlags&1028)!==0&&i!==null)i.return=d,rt=i;else for(;rt!==null;){d=rt;try{var at=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ut=at.memoizedProps,Mr=at.memoizedState,we=d.stateNode,de=we.getSnapshotBeforeUpdate(d.elementType===d.type?ut:Qa(d.type,ut),Mr);we.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Ne=d.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ke){Ir(d,d.return,Ke)}if(i=d.sibling,i!==null){i.return=d.return,rt=i;break}rt=d.return}return at=BS,BS=!1,at}function _d(i,d,g){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var S=w=w.next;do{if((S.tag&i)===i){var I=S.destroy;S.destroy=void 0,I!==void 0&&e0(d,g,I)}S=S.next}while(S!==w)}}function lh(i,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&i)===i){var w=g.create;g.destroy=w()}g=g.next}while(g!==d)}}function t0(i){var d=i.ref;if(d!==null){var g=i.stateNode;switch(i.tag){case 5:i=g;break;default:i=g}typeof d=="function"?d(i):d.current=i}}function US(i){var d=i.alternate;d!==null&&(i.alternate=null,US(d)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(d=i.stateNode,d!==null&&(delete d[js],delete d[Sd],delete d[xx],delete d[M3],delete d[T3])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function VS(i){return i.tag===5||i.tag===3||i.tag===4}function qS(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||VS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function r0(i,d,g){var w=i.tag;if(w===5||w===6)i=i.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(i,d):g.insertBefore(i,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(i,g)):(d=g,d.appendChild(i)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Lf));else if(w!==4&&(i=i.child,i!==null))for(r0(i,d,g),i=i.sibling;i!==null;)r0(i,d,g),i=i.sibling}function n0(i,d,g){var w=i.tag;if(w===5||w===6)i=i.stateNode,d?g.insertBefore(i,d):g.appendChild(i);else if(w!==4&&(i=i.child,i!==null))for(n0(i,d,g),i=i.sibling;i!==null;)n0(i,d,g),i=i.sibling}var xn=null,Za=!1;function zo(i,d,g){for(g=g.child;g!==null;)GS(i,d,g),g=g.sibling}function GS(i,d,g){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Ni,g)}catch(te){}switch(g.tag){case 5:On||Ql(g,d);case 6:var w=xn,S=Za;xn=null,zo(i,d,g),xn=w,Za=S,xn!==null&&(Za?(i=xn,g=g.stateNode,i.nodeType===8?i.parentNode.removeChild(g):i.removeChild(g)):xn.removeChild(g.stateNode));break;case 18:xn!==null&&(Za?(i=xn,g=g.stateNode,i.nodeType===8?gx(i.parentNode,g):i.nodeType===1&&gx(i,g),da(i)):gx(xn,g.stateNode));break;case 4:w=xn,S=Za,xn=g.stateNode.containerInfo,Za=!0,zo(i,d,g),xn=w,Za=S;break;case 0:case 11:case 14:case 15:if(!On&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){S=w=w.next;do{var I=S,R=I.destroy;I=I.tag,R!==void 0&&((I&2)!==0||(I&4)!==0)&&e0(g,d,R),S=S.next}while(S!==w)}zo(i,d,g);break;case 1:if(!On&&(Ql(g,d),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(te){Ir(g,d,te)}zo(i,d,g);break;case 21:zo(i,d,g);break;case 22:g.mode&1?(On=(w=On)||g.memoizedState!==null,zo(i,d,g),On=w):zo(i,d,g);break;default:zo(i,d,g)}}function HS(i){var d=i.updateQueue;if(d!==null){i.updateQueue=null;var g=i.stateNode;g===null&&(g=i.stateNode=new X3),d.forEach(function(w){var S=oF.bind(null,i,w);g.has(w)||(g.add(w),w.then(S,S))})}}function es(i,d){var g=d.deletions;if(g!==null)for(var w=0;w<g.length;w++){var S=g[w];try{var I=i,R=d,te=R;e:for(;te!==null;){switch(te.tag){case 5:xn=te.stateNode,Za=!1;break e;case 3:xn=te.stateNode.containerInfo,Za=!0;break e;case 4:xn=te.stateNode.containerInfo,Za=!0;break e}te=te.return}if(xn===null)throw Error(n(160));GS(I,R,S),xn=null,Za=!1;var ce=S.alternate;ce!==null&&(ce.return=null),S.return=null}catch(Ee){Ir(S,d,Ee)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)WS(d,i),d=d.sibling}function WS(i,d){var g=i.alternate,w=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(es(d,i),Ss(i),w&4){try{_d(3,i,i.return),lh(3,i)}catch(ut){Ir(i,i.return,ut)}try{_d(5,i,i.return)}catch(ut){Ir(i,i.return,ut)}}break;case 1:es(d,i),Ss(i),w&512&&g!==null&&Ql(g,g.return);break;case 5:if(es(d,i),Ss(i),w&512&&g!==null&&Ql(g,g.return),i.flags&32){var S=i.stateNode;try{ne(S,"")}catch(ut){Ir(i,i.return,ut)}}if(w&4&&(S=i.stateNode,S!=null)){var I=i.memoizedProps,R=g!==null?g.memoizedProps:I,te=i.type,ce=i.updateQueue;if(i.updateQueue=null,ce!==null)try{te==="input"&&I.type==="radio"&&I.name!=null&&De(S,I),tt(te,R);var Ee=tt(te,I);for(R=0;R<ce.length;R+=2){var qe=ce[R],He=ce[R+1];qe==="style"?be(S,He):qe==="dangerouslySetInnerHTML"?Me(S,He):qe==="children"?ne(S,He):D(S,qe,He,Ee)}switch(te){case"input":Ue(S,I);break;case"textarea":Oe(S,I);break;case"select":var Ve=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var et=I.value;et!=null?fe(S,!!I.multiple,et,!1):Ve!==!!I.multiple&&(I.defaultValue!=null?fe(S,!!I.multiple,I.defaultValue,!0):fe(S,!!I.multiple,I.multiple?[]:"",!1))}S[Sd]=I}catch(ut){Ir(i,i.return,ut)}}break;case 6:if(es(d,i),Ss(i),w&4){if(i.stateNode===null)throw Error(n(162));S=i.stateNode,I=i.memoizedProps;try{S.nodeValue=I}catch(ut){Ir(i,i.return,ut)}}break;case 3:if(es(d,i),Ss(i),w&4&&g!==null&&g.memoizedState.isDehydrated)try{da(d.containerInfo)}catch(ut){Ir(i,i.return,ut)}break;case 4:es(d,i),Ss(i);break;case 13:es(d,i),Ss(i),S=i.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(o0=Nr())),w&4&&HS(i);break;case 22:if(qe=g!==null&&g.memoizedState!==null,i.mode&1?(On=(Ee=On)||qe,es(d,i),On=Ee):es(d,i),Ss(i),w&8192){if(Ee=i.memoizedState!==null,(i.stateNode.isHidden=Ee)&&!qe&&(i.mode&1)!==0)for(rt=i,qe=i.child;qe!==null;){for(He=rt=qe;rt!==null;){switch(Ve=rt,et=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:_d(4,Ve,Ve.return);break;case 1:Ql(Ve,Ve.return);var at=Ve.stateNode;if(typeof at.componentWillUnmount=="function"){w=Ve,g=Ve.return;try{d=w,at.props=d.memoizedProps,at.state=d.memoizedState,at.componentWillUnmount()}catch(ut){Ir(w,g,ut)}}break;case 5:Ql(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){XS(He);continue}}et!==null?(et.return=Ve,rt=et):XS(He)}qe=qe.sibling}e:for(qe=null,He=i;;){if(He.tag===5){if(qe===null){qe=He;try{S=He.stateNode,Ee?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(te=He.stateNode,ce=He.memoizedProps.style,R=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,te.style.display=ve("display",R))}catch(ut){Ir(i,i.return,ut)}}}else if(He.tag===6){if(qe===null)try{He.stateNode.nodeValue=Ee?"":He.memoizedProps}catch(ut){Ir(i,i.return,ut)}}else if((He.tag!==22&&He.tag!==23||He.memoizedState===null||He===i)&&He.child!==null){He.child.return=He,He=He.child;continue}if(He===i)break e;for(;He.sibling===null;){if(He.return===null||He.return===i)break e;qe===He&&(qe=null),He=He.return}qe===He&&(qe=null),He.sibling.return=He.return,He=He.sibling}}break;case 19:es(d,i),Ss(i),w&4&&HS(i);break;case 21:break;default:es(d,i),Ss(i)}}function Ss(i){var d=i.flags;if(d&2){try{e:{for(var g=i.return;g!==null;){if(VS(g)){var w=g;break e}g=g.return}throw Error(n(160))}switch(w.tag){case 5:var S=w.stateNode;w.flags&32&&(ne(S,""),w.flags&=-33);var I=qS(i);n0(i,I,S);break;case 3:case 4:var R=w.stateNode.containerInfo,te=qS(i);r0(i,te,R);break;default:throw Error(n(161))}}catch(ce){Ir(i,i.return,ce)}i.flags&=-3}d&4096&&(i.flags&=-4097)}function Q3(i,d,g){rt=i,KS(i)}function KS(i,d,g){for(var w=(i.mode&1)!==0;rt!==null;){var S=rt,I=S.child;if(S.tag===22&&w){var R=S.memoizedState!==null||ih;if(!R){var te=S.alternate,ce=te!==null&&te.memoizedState!==null||On;te=ih;var Ee=On;if(ih=R,(On=ce)&&!Ee)for(rt=S;rt!==null;)R=rt,ce=R.child,R.tag===22&&R.memoizedState!==null?JS(S):ce!==null?(ce.return=R,rt=ce):JS(S);for(;I!==null;)rt=I,KS(I),I=I.sibling;rt=S,ih=te,On=Ee}YS(i)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,rt=I):YS(i)}}function YS(i){for(;rt!==null;){var d=rt;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:On||lh(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!On)if(g===null)w.componentDidMount();else{var S=d.elementType===d.type?g.memoizedProps:Qa(d.type,g.memoizedProps);w.componentDidUpdate(S,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&X1(d,I,w);break;case 3:var R=d.updateQueue;if(R!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}X1(d,R,g)}break;case 5:var te=d.stateNode;if(g===null&&d.flags&4){g=te;var ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&g.focus();break;case"img":ce.src&&(g.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ee=d.alternate;if(Ee!==null){var qe=Ee.memoizedState;if(qe!==null){var He=qe.dehydrated;He!==null&&da(He)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}On||d.flags&512&&t0(d)}catch(Ve){Ir(d,d.return,Ve)}}if(d===i){rt=null;break}if(g=d.sibling,g!==null){g.return=d.return,rt=g;break}rt=d.return}}function XS(i){for(;rt!==null;){var d=rt;if(d===i){rt=null;break}var g=d.sibling;if(g!==null){g.return=d.return,rt=g;break}rt=d.return}}function JS(i){for(;rt!==null;){var d=rt;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{lh(4,d)}catch(ce){Ir(d,g,ce)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var S=d.return;try{w.componentDidMount()}catch(ce){Ir(d,S,ce)}}var I=d.return;try{t0(d)}catch(ce){Ir(d,I,ce)}break;case 5:var R=d.return;try{t0(d)}catch(ce){Ir(d,R,ce)}}}catch(ce){Ir(d,d.return,ce)}if(d===i){rt=null;break}var te=d.sibling;if(te!==null){te.return=d.return,rt=te;break}rt=d.return}}var Z3=Math.ceil,ch=E.ReactCurrentDispatcher,a0=E.ReactCurrentOwner,Ta=E.ReactCurrentBatchConfig,Gt=0,nn=null,Fr=null,vn=0,ma=0,Zl=_o(0),Hr=0,Rd=null,Fi=0,dh=0,s0=0,$d=null,Zn=null,o0=0,ec=1/0,Hs=null,uh=!1,i0=null,Bo=null,fh=!1,Uo=null,hh=0,Fd=0,l0=null,mh=-1,ph=0;function zn(){return(Gt&6)!==0?Nr():mh!==-1?mh:mh=Nr()}function Vo(i){return(i.mode&1)===0?1:(Gt&2)!==0&&vn!==0?vn&-vn:R3.transition!==null?(ph===0&&(ph=dd()),ph):(i=Jt,i!==0||(i=window.event,i=i===void 0?16:Tl(i.type)),i)}function ts(i,d,g,w){if(50<Fd)throw Fd=0,l0=null,Error(n(185));ki(i,g,w),((Gt&2)===0||i!==nn)&&(i===nn&&((Gt&2)===0&&(dh|=g),Hr===4&&qo(i,vn)),ea(i,w),g===1&&Gt===0&&(d.mode&1)===0&&(ec=Nr()+500,Vf&&$o()))}function ea(i,d){var g=i.callbackNode;cd(i,d);var w=Dl(i,i===nn?vn:0);if(w===0)g!==null&&wf(g),i.callbackNode=null,i.callbackPriority=0;else if(d=w&-w,i.callbackPriority!==d){if(g!=null&&wf(g),d===1)i.tag===0?_3(ZS.bind(null,i)):F1(ZS.bind(null,i)),D3(function(){(Gt&6)===0&&$o()}),g=null;else{switch(Cf(w)){case 1:g=od;break;case 4:g=Nf;break;case 16:g=wi;break;case 536870912:g=id;break;default:g=wi}g=iC(g,QS.bind(null,i))}i.callbackPriority=d,i.callbackNode=g}}function QS(i,d){if(mh=-1,ph=0,(Gt&6)!==0)throw Error(n(327));var g=i.callbackNode;if(tc()&&i.callbackNode!==g)return null;var w=Dl(i,i===nn?vn:0);if(w===0)return null;if((w&30)!==0||(w&i.expiredLanes)!==0||d)d=gh(i,w);else{d=w;var S=Gt;Gt|=2;var I=tC();(nn!==i||vn!==d)&&(Hs=null,ec=Nr()+500,zi(i,d));do try{rF();break}catch(te){eC(i,te)}while(!0);kx(),ch.current=I,Gt=S,Fr!==null?d=0:(nn=null,vn=0,d=Hr)}if(d!==0){if(d===2&&(S=xs(i),S!==0&&(w=S,d=c0(i,S))),d===1)throw g=Rd,zi(i,0),qo(i,w),ea(i,Nr()),g;if(d===6)qo(i,w);else{if(S=i.current.alternate,(w&30)===0&&!eF(S)&&(d=gh(i,w),d===2&&(I=xs(i),I!==0&&(w=I,d=c0(i,I))),d===1))throw g=Rd,zi(i,0),qo(i,w),ea(i,Nr()),g;switch(i.finishedWork=S,i.finishedLanes=w,d){case 0:case 1:throw Error(n(345));case 2:Bi(i,Zn,Hs);break;case 3:if(qo(i,w),(w&130023424)===w&&(d=o0+500-Nr(),10<d)){if(Dl(i,0)!==0)break;if(S=i.suspendedLanes,(S&w)!==w){zn(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=px(Bi.bind(null,i,Zn,Hs),d);break}Bi(i,Zn,Hs);break;case 4:if(qo(i,w),(w&4194240)===w)break;for(d=i.eventTimes,S=-1;0<w;){var R=31-Yn(w);I=1<<R,R=d[R],R>S&&(S=R),w&=~I}if(w=S,w=Nr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Z3(w/1960))-w,10<w){i.timeoutHandle=px(Bi.bind(null,i,Zn,Hs),w);break}Bi(i,Zn,Hs);break;case 5:Bi(i,Zn,Hs);break;default:throw Error(n(329))}}}return ea(i,Nr()),i.callbackNode===g?QS.bind(null,i):null}function c0(i,d){var g=$d;return i.current.memoizedState.isDehydrated&&(zi(i,d).flags|=256),i=gh(i,d),i!==2&&(d=Zn,Zn=g,d!==null&&d0(d)),i}function d0(i){Zn===null?Zn=i:Zn.push.apply(Zn,i)}function eF(i){for(var d=i;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var S=g[w],I=S.getSnapshot;S=S.value;try{if(!Xa(I(),S))return!1}catch(R){return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function qo(i,d){for(d&=~s0,d&=~dh,i.suspendedLanes|=d,i.pingedLanes&=~d,i=i.expirationTimes;0<d;){var g=31-Yn(d),w=1<<g;i[g]=-1,d&=~w}}function ZS(i){if((Gt&6)!==0)throw Error(n(327));tc();var d=Dl(i,0);if((d&1)===0)return ea(i,Nr()),null;var g=gh(i,d);if(i.tag!==0&&g===2){var w=xs(i);w!==0&&(d=w,g=c0(i,w))}if(g===1)throw g=Rd,zi(i,0),qo(i,d),ea(i,Nr()),g;if(g===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=d,Bi(i,Zn,Hs),ea(i,Nr()),null}function u0(i,d){var g=Gt;Gt|=1;try{return i(d)}finally{Gt=g,Gt===0&&(ec=Nr()+500,Vf&&$o())}}function Li(i){Uo!==null&&Uo.tag===0&&(Gt&6)===0&&tc();var d=Gt;Gt|=1;var g=Ta.transition,w=Jt;try{if(Ta.transition=null,Jt=1,i)return i()}finally{Jt=w,Ta.transition=g,Gt=d,(Gt&6)===0&&$o()}}function f0(){ma=Zl.current,fr(Zl)}function zi(i,d){i.finishedWork=null,i.finishedLanes=0;var g=i.timeoutHandle;if(g!==-1&&(i.timeoutHandle=-1,I3(g)),Fr!==null)for(g=Fr.return;g!==null;){var w=g;switch(jx(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Bf();break;case 3:Xl(),fr(Xn),fr(An),Tx();break;case 5:Ox(w);break;case 4:Xl();break;case 13:fr(Sr);break;case 19:fr(Sr);break;case 10:Px(w.type._context);break;case 22:case 23:f0()}g=g.return}if(nn=i,Fr=i=Go(i.current,null),vn=ma=d,Hr=0,Rd=null,s0=dh=Fi=0,Zn=$d=null,_i!==null){for(d=0;d<_i.length;d++)if(g=_i[d],w=g.interleaved,w!==null){g.interleaved=null;var S=w.next,I=g.pending;if(I!==null){var R=I.next;I.next=S,w.next=R}g.pending=w}_i=null}return i}function eC(i,d){do{var g=Fr;try{if(kx(),Zf.current=nh,eh){for(var w=Cr.memoizedState;w!==null;){var S=w.queue;S!==null&&(S.pending=null),w=w.next}eh=!1}if($i=0,rn=Gr=Cr=null,Id=!1,Dd=0,a0.current=null,g===null||g.return===null){Hr=1,Rd=d,Fr=null;break}e:{var I=i,R=g.return,te=g,ce=d;if(d=vn,te.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ee=ce,qe=te,He=qe.tag;if((qe.mode&1)===0&&(He===0||He===11||He===15)){var Ve=qe.alternate;Ve?(qe.updateQueue=Ve.updateQueue,qe.memoizedState=Ve.memoizedState,qe.lanes=Ve.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var et=CS(R);if(et!==null){et.flags&=-257,kS(et,R,te,I,d),et.mode&1&&SS(I,Ee,d),d=et,ce=Ee;var at=d.updateQueue;if(at===null){var ut=new Set;ut.add(ce),d.updateQueue=ut}else at.add(ce);break e}else{if((d&1)===0){SS(I,Ee,d),h0();break e}ce=Error(n(426))}}else if(pr&&te.mode&1){var Mr=CS(R);if(Mr!==null){(Mr.flags&65536)===0&&(Mr.flags|=256),kS(Mr,R,te,I,d),Sx(Jl(ce,te));break e}}I=ce=Jl(ce,te),Hr!==4&&(Hr=2),$d===null?$d=[I]:$d.push(I),I=R;do{switch(I.tag){case 3:I.flags|=65536,d&=-d,I.lanes|=d;var we=wS(I,ce,d);Y1(I,we);break e;case 1:te=ce;var de=I.type,Ne=I.stateNode;if((I.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Bo===null||!Bo.has(Ne)))){I.flags|=65536,d&=-d,I.lanes|=d;var Ke=NS(I,te,d);Y1(I,Ke);break e}}I=I.return}while(I!==null)}nC(g)}catch(mt){d=mt,Fr===g&&g!==null&&(Fr=g=g.return);continue}break}while(!0)}function tC(){var i=ch.current;return ch.current=nh,i===null?nh:i}function h0(){(Hr===0||Hr===3||Hr===2)&&(Hr=4),nn===null||(Fi&268435455)===0&&(dh&268435455)===0||qo(nn,vn)}function gh(i,d){var g=Gt;Gt|=2;var w=tC();(nn!==i||vn!==d)&&(Hs=null,zi(i,d));do try{tF();break}catch(S){eC(i,S)}while(!0);if(kx(),Gt=g,ch.current=w,Fr!==null)throw Error(n(261));return nn=null,vn=0,Hr}function tF(){for(;Fr!==null;)rC(Fr)}function rF(){for(;Fr!==null&&!nd();)rC(Fr)}function rC(i){var d=oC(i.alternate,i,ma);i.memoizedProps=i.pendingProps,d===null?nC(i):Fr=d,a0.current=null}function nC(i){var d=i;do{var g=d.alternate;if(i=d.return,(d.flags&32768)===0){if(g=K3(g,d,ma),g!==null){Fr=g;return}}else{if(g=Y3(g,d),g!==null){g.flags&=32767,Fr=g;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Hr=6,Fr=null;return}}if(d=d.sibling,d!==null){Fr=d;return}Fr=d=i}while(d!==null);Hr===0&&(Hr=5)}function Bi(i,d,g){var w=Jt,S=Ta.transition;try{Ta.transition=null,Jt=1,nF(i,d,g,w)}finally{Ta.transition=S,Jt=w}return null}function nF(i,d,g,w){do tc();while(Uo!==null);if((Gt&6)!==0)throw Error(n(327));g=i.finishedWork;var S=i.finishedLanes;if(g===null)return null;if(i.finishedWork=null,i.finishedLanes=0,g===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var I=g.lanes|g.childLanes;if(Kg(i,I),i===nn&&(Fr=nn=null,vn=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||fh||(fh=!0,iC(wi,function(){return tc(),null})),I=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||I){I=Ta.transition,Ta.transition=null;var R=Jt;Jt=1;var te=Gt;Gt|=4,a0.current=null,J3(i,g),WS(g,i),N3(hx),Ya=!!fx,hx=fx=null,i.current=g,Q3(g),ad(),Gt=te,Jt=R,Ta.transition=I}else i.current=g;if(fh&&(fh=!1,Uo=i,hh=S),I=i.pendingLanes,I===0&&(Bo=null),Gg(g.stateNode),ea(i,Nr()),d!==null)for(w=i.onRecoverableError,g=0;g<d.length;g++)S=d[g],w(S.value,{componentStack:S.stack,digest:S.digest});if(uh)throw uh=!1,i=i0,i0=null,i;return(hh&1)!==0&&i.tag!==0&&tc(),I=i.pendingLanes,(I&1)!==0?i===l0?Fd++:(Fd=0,l0=i):Fd=0,$o(),null}function tc(){if(Uo!==null){var i=Cf(hh),d=Ta.transition,g=Jt;try{if(Ta.transition=null,Jt=16>i?16:i,Uo===null)var w=!1;else{if(i=Uo,Uo=null,hh=0,(Gt&6)!==0)throw Error(n(331));var S=Gt;for(Gt|=4,rt=i.current;rt!==null;){var I=rt,R=I.child;if((rt.flags&16)!==0){var te=I.deletions;if(te!==null){for(var ce=0;ce<te.length;ce++){var Ee=te[ce];for(rt=Ee;rt!==null;){var qe=rt;switch(qe.tag){case 0:case 11:case 15:_d(8,qe,I)}var He=qe.child;if(He!==null)He.return=qe,rt=He;else for(;rt!==null;){qe=rt;var Ve=qe.sibling,et=qe.return;if(US(qe),qe===Ee){rt=null;break}if(Ve!==null){Ve.return=et,rt=Ve;break}rt=et}}}var at=I.alternate;if(at!==null){var ut=at.child;if(ut!==null){at.child=null;do{var Mr=ut.sibling;ut.sibling=null,ut=Mr}while(ut!==null)}}rt=I}}if((I.subtreeFlags&2064)!==0&&R!==null)R.return=I,rt=R;else e:for(;rt!==null;){if(I=rt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:_d(9,I,I.return)}var we=I.sibling;if(we!==null){we.return=I.return,rt=we;break e}rt=I.return}}var de=i.current;for(rt=de;rt!==null;){R=rt;var Ne=R.child;if((R.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=R,rt=Ne;else e:for(R=de;rt!==null;){if(te=rt,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:lh(9,te)}}catch(mt){Ir(te,te.return,mt)}if(te===R){rt=null;break e}var Ke=te.sibling;if(Ke!==null){Ke.return=te.return,rt=Ke;break e}rt=te.return}}if(Gt=S,$o(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Ni,i)}catch(mt){}w=!0}return w}finally{Jt=g,Ta.transition=d}}return!1}function aC(i,d,g){d=Jl(g,d),d=wS(i,d,1),i=Lo(i,d,1),d=zn(),i!==null&&(ki(i,1,d),ea(i,d))}function Ir(i,d,g){if(i.tag===3)aC(i,i,g);else for(;d!==null;){if(d.tag===3){aC(d,i,g);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Bo===null||!Bo.has(w))){i=Jl(g,i),i=NS(d,i,1),d=Lo(d,i,1),i=zn(),d!==null&&(ki(d,1,i),ea(d,i));break}}d=d.return}}function aF(i,d,g){var w=i.pingCache;w!==null&&w.delete(d),d=zn(),i.pingedLanes|=i.suspendedLanes&g,nn===i&&(vn&g)===g&&(Hr===4||Hr===3&&(vn&130023424)===vn&&500>Nr()-o0?zi(i,0):s0|=g),ea(i,d)}function sC(i,d){d===0&&((i.mode&1)===0?d=1:(d=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var g=zn();i=Vs(i,d),i!==null&&(ki(i,d,g),ea(i,g))}function sF(i){var d=i.memoizedState,g=0;d!==null&&(g=d.retryLane),sC(i,g)}function oF(i,d){var g=0;switch(i.tag){case 13:var w=i.stateNode,S=i.memoizedState;S!==null&&(g=S.retryLane);break;case 19:w=i.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(d),sC(i,g)}var oC;oC=function(i,d,g){if(i!==null)if(i.memoizedProps!==d.pendingProps||Xn.current)Qn=!0;else{if((i.lanes&g)===0&&(d.flags&128)===0)return Qn=!1,W3(i,d,g);Qn=(i.flags&131072)!==0}else Qn=!1,pr&&(d.flags&1048576)!==0&&L1(d,Gf,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;oh(i,d),i=d.pendingProps;var S=Vl(d,An.current);Yl(d,g),S=$x(null,d,w,i,S,g);var I=Fx();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Jn(w)?(I=!0,Uf(d)):I=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Ix(d),S.updater=ah,d.stateNode=S,S._reactInternals=d,qx(d,w,i,g),d=Kx(null,d,w,!0,I,g)):(d.tag=0,pr&&I&&bx(d),Ln(null,d,S,g),d=d.child),d;case 16:w=d.elementType;e:{switch(oh(i,d),i=d.pendingProps,S=w._init,w=S(w._payload),d.type=w,S=d.tag=lF(w),i=Qa(w,i),S){case 0:d=Wx(null,d,w,i,g);break e;case 1:d=OS(null,d,w,i,g);break e;case 11:d=PS(null,d,w,i,g);break e;case 14:d=ES(null,d,w,Qa(w.type,i),g);break e}throw Error(n(306,w,""))}return d;case 0:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Qa(w,S),Wx(i,d,w,S,g);case 1:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Qa(w,S),OS(i,d,w,S,g);case 3:e:{if(MS(d),i===null)throw Error(n(387));w=d.pendingProps,I=d.memoizedState,S=I.element,K1(i,d),Jf(d,w,null,g);var R=d.memoizedState;if(w=R.element,I.isDehydrated)if(I={element:w,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){S=Jl(Error(n(423)),d),d=TS(i,d,w,g,S);break e}else if(w!==S){S=Jl(Error(n(424)),d),d=TS(i,d,w,g,S);break e}else for(ha=To(d.stateNode.containerInfo.firstChild),fa=d,pr=!0,Ja=null,g=H1(d,null,w,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Hl(),w===S){d=Gs(i,d,g);break e}Ln(i,d,w,g)}d=d.child}return d;case 5:return J1(d),i===null&&Nx(d),w=d.type,S=d.pendingProps,I=i!==null?i.memoizedProps:null,R=S.children,mx(w,S)?R=null:I!==null&&mx(w,I)&&(d.flags|=32),DS(i,d),Ln(i,d,R,g),d.child;case 6:return i===null&&Nx(d),null;case 13:return _S(i,d,g);case 4:return Dx(d,d.stateNode.containerInfo),w=d.pendingProps,i===null?d.child=Wl(d,null,w,g):Ln(i,d,w,g),d.child;case 11:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Qa(w,S),PS(i,d,w,S,g);case 7:return Ln(i,d,d.pendingProps,g),d.child;case 8:return Ln(i,d,d.pendingProps.children,g),d.child;case 12:return Ln(i,d,d.pendingProps.children,g),d.child;case 10:e:{if(w=d.type._context,S=d.pendingProps,I=d.memoizedProps,R=S.value,cr(Kf,w._currentValue),w._currentValue=R,I!==null)if(Xa(I.value,R)){if(I.children===S.children&&!Xn.current){d=Gs(i,d,g);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var te=I.dependencies;if(te!==null){R=I.child;for(var ce=te.firstContext;ce!==null;){if(ce.context===w){if(I.tag===1){ce=qs(-1,g&-g),ce.tag=2;var Ee=I.updateQueue;if(Ee!==null){Ee=Ee.shared;var qe=Ee.pending;qe===null?ce.next=ce:(ce.next=qe.next,qe.next=ce),Ee.pending=ce}}I.lanes|=g,ce=I.alternate,ce!==null&&(ce.lanes|=g),Ex(I.return,g,d),te.lanes|=g;break}ce=ce.next}}else if(I.tag===10)R=I.type===d.type?null:I.child;else if(I.tag===18){if(R=I.return,R===null)throw Error(n(341));R.lanes|=g,te=R.alternate,te!==null&&(te.lanes|=g),Ex(R,g,d),R=I.sibling}else R=I.child;if(R!==null)R.return=I;else for(R=I;R!==null;){if(R===d){R=null;break}if(I=R.sibling,I!==null){I.return=R.return,R=I;break}R=R.return}I=R}Ln(i,d,S.children,g),d=d.child}return d;case 9:return S=d.type,w=d.pendingProps.children,Yl(d,g),S=Oa(S),w=w(S),d.flags|=1,Ln(i,d,w,g),d.child;case 14:return w=d.type,S=Qa(w,d.pendingProps),S=Qa(w.type,S),ES(i,d,w,S,g);case 15:return AS(i,d,d.type,d.pendingProps,g);case 17:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Qa(w,S),oh(i,d),d.tag=1,Jn(w)?(i=!0,Uf(d)):i=!1,Yl(d,g),bS(d,w,S),qx(d,w,S,g),Kx(null,d,w,!0,i,g);case 19:return $S(i,d,g);case 22:return IS(i,d,g)}throw Error(n(156,d.tag))};function iC(i,d){return Il(i,d)}function iF(i,d,g,w){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(i,d,g,w){return new iF(i,d,g,w)}function m0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function lF(i){if(typeof i=="function")return m0(i)?1:0;if(i!=null){if(i=i.$$typeof,i===T)return 11;if(i===Z)return 14}return 2}function Go(i,d){var g=i.alternate;return g===null?(g=_a(i.tag,d,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=d,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&14680064,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,d=i.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g}function xh(i,d,g,w,S,I){var R=2;if(w=i,typeof i=="function")m0(i)&&(R=1);else if(typeof i=="string")R=5;else e:switch(i){case O:return Ui(g.children,S,I,d);case A:R=8,S|=8;break;case _:return i=_a(12,g,d,S|2),i.elementType=_,i.lanes=I,i;case M:return i=_a(13,g,d,S),i.elementType=M,i.lanes=I,i;case W:return i=_a(19,g,d,S),i.elementType=W,i.lanes=I,i;case U:return vh(g,S,I,d);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:R=10;break e;case G:R=9;break e;case T:R=11;break e;case Z:R=14;break e;case B:R=16,w=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return d=_a(R,g,d,S),d.elementType=i,d.type=w,d.lanes=I,d}function Ui(i,d,g,w){return i=_a(7,i,w,d),i.lanes=g,i}function vh(i,d,g,w){return i=_a(22,i,w,d),i.elementType=U,i.lanes=g,i.stateNode={isHidden:!1},i}function p0(i,d,g){return i=_a(6,i,null,d),i.lanes=g,i}function g0(i,d,g){return d=_a(4,i.children!==null?i.children:[],i.key,d),d.lanes=g,d.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},d}function cF(i,d,g,w,S){this.tag=d,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eo(0),this.expirationTimes=Eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.identifierPrefix=w,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function x0(i,d,g,w,S,I,R,te,ce){return i=new cF(i,d,g,te,ce),d===1?(d=1,I===!0&&(d|=8)):d=0,I=_a(3,null,null,d),i.current=I,I.stateNode=i,I.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ix(I),i}function dF(i,d,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:w==null?null:""+w,children:i,containerInfo:d,implementation:g}}function lC(i){if(!i)return Ro;i=i._reactInternals;e:{if($r(i)!==i||i.tag!==1)throw Error(n(170));var d=i;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Jn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(i.tag===1){var g=i.type;if(Jn(g))return R1(i,g,d)}return d}function cC(i,d,g,w,S,I,R,te,ce){return i=x0(g,w,!0,i,S,I,R,te,ce),i.context=lC(null),g=i.current,w=zn(),S=Vo(g),I=qs(w,S),I.callback=d!=null?d:null,Lo(g,I,S),i.current.lanes=S,ki(i,S,w),ea(i,w),i}function yh(i,d,g,w){var S=d.current,I=zn(),R=Vo(S);return g=lC(g),d.context===null?d.context=g:d.pendingContext=g,d=qs(I,R),d.payload={element:i},w=w===void 0?null:w,w!==null&&(d.callback=w),i=Lo(S,d,R),i!==null&&(ts(i,S,R,I),Xf(i,S,R)),R}function bh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function dC(i,d){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<d?g:d}}function v0(i,d){dC(i,d),(i=i.alternate)&&dC(i,d)}function uF(){return null}var uC=typeof reportError=="function"?reportError:function(i){console.error(i)};function y0(i){this._internalRoot=i}jh.prototype.render=y0.prototype.render=function(i){var d=this._internalRoot;if(d===null)throw Error(n(409));yh(i,d,null,null)},jh.prototype.unmount=y0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var d=i.containerInfo;Li(function(){yh(null,i,null,null)}),d[Ls]=null}};function jh(i){this._internalRoot=i}jh.prototype.unstable_scheduleHydration=function(i){if(i){var d=Pf();i={blockedOn:null,target:i,priority:d};for(var g=0;g<ue.length&&d!==0&&d<ue[g].priority;g++);ue.splice(g,0,i),g===0&&Ai(i)}};function b0(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function fC(){}function fF(i,d,g,w,S){if(S){if(typeof w=="function"){var I=w;w=function(){var Ee=bh(R);I.call(Ee)}}var R=cC(d,w,i,0,null,!1,!1,"",fC);return i._reactRootContainer=R,i[Ls]=R.current,wd(i.nodeType===8?i.parentNode:i),Li(),R}for(;S=i.lastChild;)i.removeChild(S);if(typeof w=="function"){var te=w;w=function(){var Ee=bh(ce);te.call(Ee)}}var ce=x0(i,0,!1,null,null,!1,!1,"",fC);return i._reactRootContainer=ce,i[Ls]=ce.current,wd(i.nodeType===8?i.parentNode:i),Li(function(){yh(d,ce,g,w)}),ce}function Nh(i,d,g,w,S){var I=g._reactRootContainer;if(I){var R=I;if(typeof S=="function"){var te=S;S=function(){var ce=bh(R);te.call(ce)}}yh(d,R,i,S)}else R=fF(g,d,i,S,w);return bh(R)}ud=function(i){switch(i.tag){case 3:var d=i.stateNode;if(d.current.memoizedState.isDehydrated){var g=$s(d.pendingLanes);g!==0&&(Ol(d,g|1),ea(d,Nr()),(Gt&6)===0&&(ec=Nr()+500,$o()))}break;case 13:Li(function(){var w=Vs(i,1);if(w!==null){var S=zn();ts(w,i,1,S)}}),v0(i,1)}},fd=function(i){if(i.tag===13){var d=Vs(i,134217728);if(d!==null){var g=zn();ts(d,i,134217728,g)}v0(i,134217728)}},kf=function(i){if(i.tag===13){var d=Vo(i),g=Vs(i,d);if(g!==null){var w=zn();ts(g,i,d,w)}v0(i,d)}},Pf=function(){return Jt},Ef=function(i,d){var g=Jt;try{return Jt=i,d()}finally{Jt=g}},Dt=function(i,d,g){switch(d){case"input":if(Ue(i,g),d=g.name,g.type==="radio"&&d!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var w=g[d];if(w!==i&&w.form===i.form){var S=zf(w);if(!S)throw Error(n(90));se(w),Ue(w,S)}}}break;case"textarea":Oe(i,g);break;case"select":d=g.value,d!=null&&fe(i,!!g.multiple,d,!1)}},la=u0,kn=Li;var hF={usingClientEntryPoint:!1,Events:[Cd,Bl,zf,wr,er,u0]},Ld={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mF={bundleType:Ld.bundleType,version:Ld.version,rendererPackageName:Ld.rendererPackageName,rendererConfig:Ld.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Al(i),i===null?null:i.stateNode},findFiberByHostInstance:Ld.findFiberByHostInstance||uF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{Ni=Sh.inject(mF),Kn=Sh}catch(i){}}return ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hF,ta.createPortal=function(i,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b0(d))throw Error(n(200));return dF(i,d,null,g)},ta.createRoot=function(i,d){if(!b0(i))throw Error(n(299));var g=!1,w="",S=uC;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=x0(i,1,!1,null,null,g,!1,w,S),i[Ls]=d.current,wd(i.nodeType===8?i.parentNode:i),new y0(d)},ta.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var d=i._reactInternals;if(d===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Al(d),i=i===null?null:i.stateNode,i},ta.flushSync=function(i){return Li(i)},ta.hydrate=function(i,d,g){if(!wh(d))throw Error(n(200));return Nh(null,i,d,!0,g)},ta.hydrateRoot=function(i,d,g){if(!b0(i))throw Error(n(405));var w=g!=null&&g.hydratedSources||null,S=!1,I="",R=uC;if(g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onRecoverableError!==void 0&&(R=g.onRecoverableError)),d=cC(d,null,i,1,g!=null?g:null,S,!1,I,R),i[Ls]=d.current,wd(i),w)for(i=0;i<w.length;i++)g=w[i],S=g._getVersion,S=S(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,S]:d.mutableSourceEagerHydrationData.push(g,S);return new jh(d)},ta.render=function(i,d,g){if(!wh(d))throw Error(n(200));return Nh(null,i,d,!1,g)},ta.unmountComponentAtNode=function(i){if(!wh(i))throw Error(n(40));return i._reactRootContainer?(Li(function(){Nh(null,null,i,!1,function(){i._reactRootContainer=null,i[Ls]=null})}),!0):!1},ta.unstable_batchedUpdates=u0,ta.unstable_renderSubtreeIntoContainer=function(i,d,g,w){if(!wh(g))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Nh(i,d,g,!1,w)},ta.version="18.3.1-next-f1338f8080-20240426",ta}var wC;function AD(){if(wC)return S0.exports;wC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),S0.exports=NF(),S0.exports}var NC;function SF(){if(NC)return Ch;NC=1;var e=AD();return Ch.createRoot=e.createRoot,Ch.hydrateRoot=e.hydrateRoot,Ch}var ID=SF(),oo=AD();const CF=Ts(oo);function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mu.apply(this,arguments)}var ei;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ei||(ei={}));const SC="popstate";function kF(e){e===void 0&&(e={});function t(a,s){let{pathname:o,search:l,hash:c}=a.location;return Fy("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:fm(s)}return EF(t,n,null,e)}function Er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch(n){}}}function PF(){return Math.random().toString(36).substr(2,8)}function CC(e,t){return{usr:e.state,key:e.key,idx:t}}function Fy(e,t,n,a){return n===void 0&&(n=null),mu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$c(t):t,{state:n,key:t&&t.key||a||PF()})}function fm(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function $c(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function EF(e,t,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,l=s.history,c=ei.Pop,f=null,h=u();h==null&&(h=0,l.replaceState(mu({},l.state,{idx:h}),""));function u(){return(l.state||{idx:null}).idx}function m(){c=ei.Pop;let b=u(),N=b==null?null:b-h;h=b,f&&f({action:c,location:y.location,delta:N})}function p(b,N){c=ei.Push;let k=Fy(y.location,b,N);h=u()+1;let D=CC(k,h),E=y.createHref(k);try{l.pushState(D,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(E)}o&&f&&f({action:c,location:y.location,delta:1})}function v(b,N){c=ei.Replace;let k=Fy(y.location,b,N);h=u();let D=CC(k,h),E=y.createHref(k);l.replaceState(D,"",E),o&&f&&f({action:c,location:y.location,delta:0})}function j(b){let N=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof b=="string"?b:fm(b);return k=k.replace(/ $/,"%20"),Er(N,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,N)}let y={get action(){return c},get location(){return e(s,l)},listen(b){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(SC,m),f=b,()=>{s.removeEventListener(SC,m),f=null}},createHref(b){return t(s,b)},createURL:j,encodeLocation(b){let N=j(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:v,go(b){return l.go(b)}};return y}var kC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kC||(kC={}));function AF(e,t,n){return n===void 0&&(n="/"),IF(e,t,n)}function IF(e,t,n,a){let s=typeof t=="string"?$c(t):t,o=Nc(s.pathname||"/",n);if(o==null)return null;let l=DD(e);DF(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let h=UF(o);c=zF(l[f],h)}return c}function DD(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(o,l,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(Er(f.relativePath.startsWith(a),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(a.length));let h=ai([a,f.relativePath]),u=n.concat(f);o.children&&o.children.length>0&&(Er(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),DD(o.children,t,u,h)),!(o.path==null&&!o.index)&&t.push({path:h,score:FF(h,o.index),routesMeta:u})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let f of OD(o.path))s(o,l,f)}),t}function OD(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let l=OD(a.join("/")),c=[];return c.push(...l.map(f=>f===""?o:[o,f].join("/"))),s&&c.push(...l),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function DF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:LF(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const OF=/^:[\w-]+$/,MF=3,TF=2,_F=1,RF=10,$F=-2,PC=e=>e==="*";function FF(e,t){let n=e.split("/"),a=n.length;return n.some(PC)&&(a+=$F),t&&(a+=TF),n.filter(s=>!PC(s)).reduce((s,o)=>s+(OF.test(o)?MF:o===""?_F:RF),a)}function LF(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function zF(e,t,n){let{routesMeta:a}=e,s={},o="/",l=[];for(let c=0;c<a.length;++c){let f=a[c],h=c===a.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=Ly({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},u),p=f.route;if(!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:ai([o,m.pathname]),pathnameBase:WF(ai([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=ai([o,m.pathnameBase]))}return l}function Ly(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=BF(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:a.reduce((h,u,m)=>{let{paramName:p,isOptional:v}=u;if(p==="*"){let y=c[m]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const j=c[m];return v&&!j?h[p]=void 0:h[p]=(j||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:e}}function BF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(a.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function UF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}const VF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qF=e=>VF.test(e);function GF(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?$c(e):e,o;if(n)if(qF(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),xj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=EC(n.substring(1),"/"):o=EC(n,t)}else o=t;return{pathname:o,search:KF(a),hash:YF(s)}}function EC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function P0(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function vj(e,t){let n=HF(e);return t?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function yj(e,t,n,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=$c(e):(s=mu({},e),Er(!s.pathname||!s.pathname.includes("?"),P0("?","pathname","search",s)),Er(!s.pathname||!s.pathname.includes("#"),P0("#","pathname","hash",s)),Er(!s.search||!s.search.includes("#"),P0("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=n;else{let m=t.length-1;if(!a&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}c=m>=0?t[m]:"/"}let f=GF(s,c),h=l&&l!=="/"&&l.endsWith("/"),u=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||u)&&(f.pathname+="/"),f}const ai=e=>e.join("/").replace(/\/\/+/g,"/"),WF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const MD=["post","put","patch","delete"];new Set(MD);const JF=["get",...MD];new Set(JF);function pu(){return pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pu.apply(this,arguments)}const Ip=x.createContext(null),TD=x.createContext(null),go=x.createContext(null),Dp=x.createContext(null),_s=x.createContext({outlet:null,matches:[],isDataRoute:!1}),_D=x.createContext(null);function QF(e,t){let{relative:n}=t===void 0?{}:t;Fc()||Er(!1);let{basename:a,navigator:s}=x.useContext(go),{hash:o,pathname:l,search:c}=Op(e,{relative:n}),f=l;return a!=="/"&&(f=l==="/"?a:ai([a,l])),s.createHref({pathname:f,search:c,hash:o})}function Fc(){return x.useContext(Dp)!=null}function hs(){return Fc()||Er(!1),x.useContext(Dp).location}function RD(e){x.useContext(go).static||x.useLayoutEffect(e)}function $t(){let{isDataRoute:e}=x.useContext(_s);return e?h6():ZF()}function ZF(){Fc()||Er(!1);let e=x.useContext(Ip),{basename:t,future:n,navigator:a}=x.useContext(go),{matches:s}=x.useContext(_s),{pathname:o}=hs(),l=JSON.stringify(vj(s,n.v7_relativeSplatPath)),c=x.useRef(!1);return RD(()=>{c.current=!0}),x.useCallback(function(h,u){if(u===void 0&&(u={}),!c.current)return;if(typeof h=="number"){a.go(h);return}let m=yj(h,JSON.parse(l),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ai([t,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[t,a,l,o,e])}const e6=x.createContext(null);function t6(e){let t=x.useContext(_s).outlet;return t&&x.createElement(e6.Provider,{value:e},t)}function xo(){let{matches:e}=x.useContext(_s),t=e[e.length-1];return t?t.params:{}}function Op(e,t){let{relative:n}=t===void 0?{}:t,{future:a}=x.useContext(go),{matches:s}=x.useContext(_s),{pathname:o}=hs(),l=JSON.stringify(vj(s,a.v7_relativeSplatPath));return x.useMemo(()=>yj(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function r6(e,t){return n6(e,t)}function n6(e,t,n,a){Fc()||Er(!1);let{navigator:s}=x.useContext(go),{matches:o}=x.useContext(_s),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let h=hs(),u;if(t){var m;let b=typeof t=="string"?$c(t):t;f==="/"||(m=b.pathname)!=null&&m.startsWith(f)||Er(!1),u=b}else u=h;let p=u.pathname||"/",v=p;if(f!=="/"){let b=f.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let j=AF(e,{pathname:v}),y=l6(j&&j.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:ai([f,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:ai([f,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,a);return t&&y?x.createElement(Dp.Provider,{value:{location:pu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ei.Pop}},y):y}function a6(){let e=f6(),t=XF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,null)}const s6=x.createElement(a6,null);class o6 extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(_s.Provider,{value:this.props.routeContext},x.createElement(_D.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i6(e){let{routeContext:t,match:n,children:a}=e,s=x.useContext(Ip);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(_s.Provider,{value:t},a)}function l6(e,t,n,a){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=a)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let u=l.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);u>=0||Er(!1),l=l.slice(0,Math.min(l.length,u+1))}let f=!1,h=-1;if(n&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=u),m.route.id){let{loaderData:p,errors:v}=n,j=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||j){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((u,m,p)=>{let v,j=!1,y=null,b=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||s6,f&&(h<0&&p===0?(m6("route-fallback"),j=!0,b=null):h===p&&(j=!0,b=m.route.hydrateFallbackElement||null)));let N=t.concat(l.slice(0,p+1)),k=()=>{let D;return v?D=y:j?D=b:m.route.Component?D=x.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=u,x.createElement(i6,{match:m,routeContext:{outlet:u,matches:N,isDataRoute:n!=null},children:D})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?x.createElement(o6,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}var $D=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})($D||{}),FD=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(FD||{});function c6(e){let t=x.useContext(Ip);return t||Er(!1),t}function d6(e){let t=x.useContext(TD);return t||Er(!1),t}function u6(e){let t=x.useContext(_s);return t||Er(!1),t}function LD(e){let t=u6(),n=t.matches[t.matches.length-1];return n.route.id||Er(!1),n.route.id}function f6(){var e;let t=x.useContext(_D),n=d6(),a=LD();return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}function h6(){let{router:e}=c6($D.UseNavigateStable),t=LD(FD.UseNavigateStable),n=x.useRef(!1);return RD(()=>{n.current=!0}),x.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,pu({fromRouteId:t},o)))},[e,t])}const AC={};function m6(e,t,n){AC[e]||(AC[e]=!0)}function p6(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function IC(e){let{to:t,replace:n,state:a,relative:s}=e;Fc()||Er(!1);let{future:o,static:l}=x.useContext(go),{matches:c}=x.useContext(_s),{pathname:f}=hs(),h=$t(),u=yj(t,vj(c,o.v7_relativeSplatPath),f,s==="path"),m=JSON.stringify(u);return x.useEffect(()=>h(JSON.parse(m),{replace:n,state:a,relative:s}),[h,m,s,n,a]),null}function zD(e){return t6(e.context)}function Ye(e){Er(!1)}function g6(e){let{basename:t="/",children:n=null,location:a,navigationType:s=ei.Pop,navigator:o,static:l=!1,future:c}=e;Fc()&&Er(!1);let f=t.replace(/^\/*/,"/"),h=x.useMemo(()=>({basename:f,navigator:o,static:l,future:pu({v7_relativeSplatPath:!1},c)}),[f,c,o,l]);typeof a=="string"&&(a=$c(a));let{pathname:u="/",search:m="",hash:p="",state:v=null,key:j="default"}=a,y=x.useMemo(()=>{let b=Nc(u,f);return b==null?null:{location:{pathname:b,search:m,hash:p,state:v,key:j},navigationType:s}},[f,u,m,p,v,j,s]);return y==null?null:x.createElement(go.Provider,{value:h},x.createElement(Dp.Provider,{children:n,value:y}))}function x6(e){let{children:t,location:n}=e;return r6(zy(t),n)}new Promise(()=>{});function zy(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(a,s)=>{if(!x.isValidElement(a))return;let o=[...t,s];if(a.type===x.Fragment){n.push.apply(n,zy(a.props.children,o));return}a.type!==Ye&&Er(!1),!a.props.index||!a.props.children||Er(!1);let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=zy(a.props.children,o)),n.push(l)}),n}function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hm.apply(this,arguments)}function BD(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function v6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function y6(e,t){return e.button===0&&(!t||t==="_self")&&!v6(e)}function By(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let a=e[n];return t.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function b6(e,t){let n=By(e);return t&&t.forEach((a,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const j6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],w6=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],N6="6";try{window.__reactRouterVersion=N6}catch(e){}const S6=x.createContext({isTransitioning:!1}),C6="startTransition",DC=ED[C6];function k6(e){let{basename:t,children:n,future:a,window:s}=e,o=x.useRef();o.current==null&&(o.current=kF({window:s,v5Compat:!0}));let l=o.current,[c,f]=x.useState({action:l.action,location:l.location}),{v7_startTransition:h}=a||{},u=x.useCallback(m=>{h&&DC?DC(()=>f(m)):f(m)},[f,h]);return x.useLayoutEffect(()=>l.listen(u),[l,u]),x.useEffect(()=>p6(a),[a]),x.createElement(g6,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:a})}const P6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A6=x.forwardRef(function(t,n){let{onClick:a,relative:s,reloadDocument:o,replace:l,state:c,target:f,to:h,preventScrollReset:u,viewTransition:m}=t,p=BD(t,j6),{basename:v}=x.useContext(go),j,y=!1;if(typeof h=="string"&&E6.test(h)&&(j=h,P6))try{let D=new URL(window.location.href),E=h.startsWith("//")?new URL(D.protocol+h):new URL(h),P=Nc(E.pathname,v);E.origin===D.origin&&P!=null?h=P+E.search+E.hash:y=!0}catch(D){}let b=QF(h,{relative:s}),N=D6(h,{replace:l,state:c,target:f,preventScrollReset:u,relative:s,viewTransition:m});function k(D){a&&a(D),D.defaultPrevented||N(D)}return x.createElement("a",hm({},p,{href:j||b,onClick:y||o?a:k,ref:n,target:f}))}),st=x.forwardRef(function(t,n){let{"aria-current":a="page",caseSensitive:s=!1,className:o="",end:l=!1,style:c,to:f,viewTransition:h,children:u}=t,m=BD(t,w6),p=Op(f,{relative:m.relative}),v=hs(),j=x.useContext(TD),{navigator:y,basename:b}=x.useContext(go),N=j!=null&&M6(p)&&h===!0,k=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,D=v.pathname,E=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(D=D.toLowerCase(),E=E?E.toLowerCase():null,k=k.toLowerCase()),E&&b&&(E=Nc(E,b)||E);const P=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let C=D===k||!l&&D.startsWith(k)&&D.charAt(P)==="/",O=E!=null&&(E===k||!l&&E.startsWith(k)&&E.charAt(k.length)==="/"),A={isActive:C,isPending:O,isTransitioning:N},_=C?a:void 0,z;typeof o=="function"?z=o(A):z=[o,C?"active":null,O?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let G=typeof c=="function"?c(A):c;return x.createElement(A6,hm({},m,{"aria-current":_,className:z,ref:n,style:G,to:f,viewTransition:h}),typeof u=="function"?u(A):u)});var Uy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Uy||(Uy={}));var OC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(OC||(OC={}));function I6(e){let t=x.useContext(Ip);return t||Er(!1),t}function D6(e,t){let{target:n,replace:a,state:s,preventScrollReset:o,relative:l,viewTransition:c}=t===void 0?{}:t,f=$t(),h=hs(),u=Op(e,{relative:l});return x.useCallback(m=>{if(y6(m,n)){m.preventDefault();let p=a!==void 0?a:fm(h)===fm(u);f(e,{replace:p,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[h,f,u,a,s,n,e,o,l,c])}function O6(e){let t=x.useRef(By(e)),n=x.useRef(!1),a=hs(),s=x.useMemo(()=>b6(a.search,n.current?null:t.current),[a.search]),o=$t(),l=x.useCallback((c,f)=>{const h=By(typeof c=="function"?c(s):c);n.current=!0,o("?"+h,f)},[o,s]);return[s,l]}function M6(e,t){t===void 0&&(t={});let n=x.useContext(S6);n==null&&Er(!1);let{basename:a}=I6(Uy.useViewTransitionState),s=Op(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Nc(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=Nc(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Ly(s.pathname,l)!=null||Ly(s.pathname,o)!=null}const UD=x.createContext(),T6=({children:e})=>{const[t,n]=x.useState(null),[a,s]=x.useState(!0),o=$t();x.useEffect(()=>{const h=localStorage.getItem("auth_user");if(h)try{n(JSON.parse(h))}catch(u){localStorage.removeItem("auth_user")}s(!1)},[]);const l=async h=>{localStorage.setItem("auth_user",JSON.stringify(h)),n(h),o("/")},c=()=>{localStorage.removeItem("auth_user"),n(null),o("/login")},f=h=>!t||!t.permissions?!1:t.role==="ADMINISTRADORES"?!0:t.permissions.includes(h);return r.jsx(UD.Provider,{value:{user:t,loading:a,login:l,logout:c,hasPermission:f},children:e})},jl=()=>x.useContext(UD),_6=({permission:e})=>{const{user:t,loading:n,hasPermission:a}=jl();return n?r.jsx("div",{className:"min-h-screen bg-hd-black flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-hd-orange"})}):t?e&&!a(e)?r.jsx(IC,{to:"/",replace:!0}):r.jsx(zD,{}):r.jsx(IC,{to:"/login",replace:!0})};var R6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Be=(e,t)=>{const n=x.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:f,...h},u)=>x.createElement("svg",{ref:u,...R6,width:s,height:s,stroke:a,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide","lucide-".concat($6(e)),c].join(" "),...h},[...t.map(([m,p])=>x.createElement(m,p)),...Array.isArray(f)?f:[f]]));return n.displayName="".concat(e),n};const ll=Be("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const Lc=Be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const gu=Be("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const MC=Be("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);const TC=Be("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);const _C=Be("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);const VD=Be("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);const Jr=Be("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const un=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const nl=Be("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);const Mp=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Uu=Be("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const xu=Be("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const Gn=Be("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const RC=Be("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const vu=Be("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const is=Be("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const F6=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const L6=Be("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const Ji=Be("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const xc=Be("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);const $C=Be("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const sa=Be("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Tp=Be("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Sc=Be("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const qD=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const kr=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const z6=Be("ChevronFirst",[["path",{d:"m17 18-6-6 6-6",key:"1yerx2"}],["path",{d:"M7 6v12",key:"1p53r6"}]]);const B6=Be("ChevronLast",[["path",{d:"m7 18 6-6-6-6",key:"lwmzdw"}],["path",{d:"M17 6v12",key:"1o0aio"}]]);const U6=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ir=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const GD=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const V6=Be("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const za=Be("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const mm=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const li=Be("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Bd=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Xr=Be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const bj=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const jj=Be("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const ci=Be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Pr=Be("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const Vu=Be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const q6=Be("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const HD=Be("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const G6=Be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const H6=Be("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Vy=Be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const pm=Be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const WD=Be("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);const W6=Be("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const KD=Be("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const K6=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const wj=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Y6=Be("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const ja=Be("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const cl=Be("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const Yr=Be("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Fn=Be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const gm=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const X6=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const YD=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const J6=Be("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const XD=Be("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);const JD=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Q6=Be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const xm=Be("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const Z6=Be("MoveHorizontal",[["polyline",{points:"18 8 22 12 18 16",key:"1hqrds"}],["polyline",{points:"6 8 2 12 6 16",key:"f0ernq"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}]]);const Rn=Be("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const eL=Be("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const zc=Be("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);const wl=Be("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const tL=Be("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const rL=Be("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const nL=Be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Lt=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Is=Be("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const na=Be("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const no=Be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const E0=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Kt=Be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Yt=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const qy=Be("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const di=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const aL=Be("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const _p=Be("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const Gy=Be("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const io=Be("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const sL=Be("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);const Nl=Be("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);const vm=Be("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]);const Nj=Be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const QD=Be("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const rr=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const oL=Be("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const ti=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const vc=Be("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);const ZD=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const eO=Be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Hy=Be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Sj=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const zr=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const FC=Be("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const iL=Be("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const A0=Be("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Tt=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Wy=Be("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ky=[{id:"inicio",label:"Inicio",path:"/",icon:KD,isLink:!0},{id:"acceso-rapido",label:"Acceso Rpido",icon:Wy,subItems:[{label:"POS (Caja)",path:"/ventas/pos",icon:Gy,highlight:!0},{label:"Maestro Stock",path:"/productos",icon:xc,highlight:!0},{label:"Nuevo Cliente",path:"/clientes/nuevo",icon:zr},{label:"Nueva Compra",path:"/compras/nuevo",icon:za}]},{id:"crm",label:"CRM",icon:WD,subItems:[{label:"Dashboard",path:"/crm/dashboard",icon:is},{label:"Prospectos",path:"/crm/prospectos",icon:zr},{label:"Oportunidades",path:"/crm/oportunidades",icon:Nj},{label:"Actividades",path:"/crm/actividades",icon:sa},{label:"Interacciones",path:"/crm/interacciones",icon:JD}]},{id:"ventas",label:"Ventas",icon:io,subItems:[{label:"Clientes",path:"/clientes",icon:zr},{label:"Vendedores",path:"/vendedores",icon:eO},{label:"POS (Caja)",path:"/ventas/pos",icon:Gy},{label:"Ventas Distribucin",path:"/ventas/distribucion",icon:vc},{label:"Historial de Ventas",path:"/ventas/historial",icon:Pr},{label:"Control de Devoluciones",path:"/ventas/historial-devoluciones",icon:na},{label:"Corte de Caja",path:"/ventas/corte",icon:Xr}]},{id:"compras",label:"Compras",icon:za,subItems:[{label:"rdenes y Facturas",path:"/compras",icon:za},{label:"Proveedores",path:"/proveedores",icon:vc},{label:"Cuentas por Pagar",path:"/cuentas-por-pagar/pagos",icon:nl}]},{id:"inventario",label:"Inventario",icon:Rn,subItems:[{label:"Maestro de Artculos",path:"/productos",icon:xc},{label:"Ajustes",path:"/ajustes",icon:na},{label:"Transferencias",path:"/transferencias",icon:nl},{label:"Control (Kardex)",path:"/kardex",icon:Pr},{label:"Lista de Precios",path:"/inventario/lista-precios",icon:Xr},{label:"Niveles de Precio",path:"/inventario/niveles-precios",icon:ja},{label:"Atributos de Artculos",path:"/inventario/categorias-articulos",icon:vm},{label:"Unidades de Medida",path:"/inventario/unidades-medida",icon:pm},{label:"Almacenes",path:"/inventario/almacenes",icon:xc},{label:"Grupos de Impuestos",path:"/inventario/grupos-impuestos",icon:na},{label:"Grupos de Producto",path:"/inventario/grupos-producto",icon:Rn}]},{id:"marketing",label:"Marketing",icon:XD,subItems:[{label:"Promociones",path:"/marketing/promociones",icon:vm},{label:"Cupones",path:"/marketing/cupones",icon:QD}]},{id:"configuracion",label:"Configuracin",icon:di,subItems:[{label:"Compaa",path:"/configuracion/compania",icon:di},{label:"Cuentas por Pagar",path:"/configuracion/cxp",icon:Pr},{label:"Comprobantes (NCF)",path:"/configuracion/ncf",icon:pm},{label:"Configuracin Clientes",path:"/configuracion/clientes",icon:zr},{label:"Configuracin Artculos",path:"/configuracion/articulos",icon:Rn},{label:"Monedas y Tasas",path:"/configuracion/monedas",icon:Xr},{label:"Configuracin Proveedores",path:"/configuracion/proveedores",icon:zr},{label:"Configuracin POS",path:"/configuracion/pos",icon:xm},{label:"Configuracin Compras",path:"/configuracion/compras",icon:za},{label:"Configuracin Transferencias",path:"/configuracion/transferencias",icon:nl},{label:"Configuracin Ajustes",path:"/configuracion/ajustes",icon:na},{label:"Gestin de Usuarios",path:"/configuracion/usuarios",icon:zr},{label:"Editor de Seguridad",path:"/configuracion/security-editor",icon:_p}]},{id:"manager",label:"Manager Report",icon:is,subItems:[{label:"Ver Reporte",path:"/reportes/manager",icon:is},{label:"Diseador de Recibos",path:"/configuracion/receipt-designer",icon:Pr}]},{id:"reportes",label:"Reportes",icon:is,subItems:[{label:"General de Ventas",path:"/reportes/ventas",icon:io},{label:"Cobros y Mtodos",path:"/reportes/ventas-cobros",icon:Xr},{label:"Por Vendedor",path:"/reportes/ventas-vendedor",icon:zr},{label:"Por Cliente",path:"/reportes/ventas-cliente",icon:zr},{label:"Reportes de Compras",path:"/compras/reportes",icon:za},{label:"Multi-Moneda (Excel)",path:"/reportes/compras-multi-moneda",icon:Xr},{label:"S.L. Facturas",path:"/reportes/smartlist/facturas",icon:Yr,highlight:!0},{label:"S.L. Artculos",path:"/reportes/smartlist/articulos",icon:Yr,highlight:!0},{label:"S.L. Proveedores",path:"/reportes/smartlist/proveedores",icon:Yr,highlight:!0},{label:"S.L. Pagos",path:"/reportes/smartlist/pagos",icon:Yr,highlight:!0},{label:"S.L. Existencias",path:"/reportes/smartlist/inventario",icon:Yr,highlight:!0},{label:"Existencias Actuales",path:"/reportes/inventario",icon:Rn},{label:"Valoracin de Inventario",path:"/reportes/valoracion-inventario",icon:Xr},{label:"Movimientos de Artculos",path:"/reportes/kardex",icon:Pr},{label:"Listado de Clientes",path:"/reportes/clientes",icon:zr},{label:"Listado de Proveedores",path:"/reportes/proveedores",icon:vc}]},{id:"utilidades",label:"Utilidades",icon:cl,subItems:[{label:"Calculadora",path:"/utilidades/calculadora",icon:ll},{label:"Bloc de Notas",path:"/utilidades/notas",icon:Pr},{label:"Calendario",path:"/utilidades/calendario",icon:sa}]}],LC=({permission:e,behavior:t="disable",children:n,fallback:a=null})=>{const{hasPermission:s}=jl();return s(e)?r.jsx(r.Fragment,{children:n}):t==="hide"?a||null:t==="disable"?Nt.isValidElement(n)?Nt.cloneElement(n,{disabled:!0,title:"No tiene permiso para realizar esta accin",className:"".concat(n.props.className||""," opacity-50 cursor-not-allowed grayscale pointer-events-none"),onClick:l=>{l.preventDefault(),l.stopPropagation()}}):r.jsx("div",{className:"opacity-50 cursor-not-allowed grayscale pointer-events-none",title:"Acceso Denegado",children:n}):null},lL=()=>{const[e,t]=x.useState([]),[n,a]=x.useState({crm:!1,operaciones:!0,inventario:!1,ventas:!1,configuracion:!1,reportes:!0,repVentas:!1,repCompras:!1,repInventario:!1,repEntidades:!1,repSmartList:!0,compras:!0,marketing:!0,manager:!1}),[s,o]=x.useState(!1),l=h=>{a(u=>({...u,[h]:!u[h]}))};Nt.useEffect(()=>{var m;const h=localStorage.getItem("launchpad_structure"),u=((m=Ky.find(p=>p.id==="acceso-rapido"))==null?void 0:m.subItems)||[];if(h)try{const v=JSON.parse(h).find(j=>j.id==="acceso-rapido");v&&v.subItems?t(v.subItems):t(u)}catch(p){t(u)}else t(u)},[]);const c=({isActive:h})=>"flex items-center space-x-3 px-4 py-3 rounded-md transition-colors ".concat(h?"bg-hd-orange text-white":"text-zinc-400 hover:bg-white/5 hover:text-white"),f=({isActive:h})=>"block flex items-center space-x-3 px-8 py-2 text-sm transition-colors ".concat(h?"text-hd-orange font-black":"text-zinc-500 hover:text-white");return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-[60]",children:r.jsx("button",{onClick:()=>o(!s),className:"p-2 bg-hd-black text-white rounded-md shadow-lg border border-gray-700",children:r.jsx(cl,{size:24})})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>o(!1)}),r.jsxs("div",{className:"\n                w-64 bg-hd-black border-r border-white/5 min-h-screen text-gray-100 flex flex-col font-sans transition-all duration-300\n                fixed inset-y-0 left-0 z-50 \n                lg:relative lg:translate-x-0\n                ".concat(s?"translate-x-0":"-translate-x-full","\n            "),children:[r.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center space-x-2 bg-black/10",children:[r.jsx("div",{className:"w-8 h-8 bg-hd-orange rounded flex items-center justify-center font-bold text-xl text-white shadow-lg shadow-hd-orange/20",children:"C"}),r.jsx("span",{className:"text-xl font-black italic tracking-tighter uppercase",children:"CRONO POS"}),r.jsx("button",{className:"ml-auto lg:hidden text-gray-400",onClick:()=>o(!1),children:r.jsx(kr,{className:"rotate-90",size:20})})]}),r.jsxs("nav",{className:"flex-1 py-4 space-y-1 overflow-y-auto",children:[r.jsxs(st,{to:"/",className:c,end:!0,children:[r.jsx(KD,{size:20}),r.jsx("span",{children:"Inicio"})]}),r.jsxs(st,{to:"/launchpad",className:c,children:[r.jsx(cl,{size:20}),r.jsx("span",{children:"Launchpad"})]}),r.jsxs("div",{className:"px-4 py-2 border-y border-white/5 my-2 bg-black/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Wy,{size:12,className:"text-hd-orange animate-pulse"}),r.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest italic opacity-50",children:"Acceso Rpido"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.slice(0,6).map((h,u)=>{let m=null;Ky.forEach(j=>{var b;const y=(b=j.subItems)==null?void 0:b.find(N=>N.path===h.path);y&&(m=y)});const p=m||h,v=p.icon||Wy;return r.jsxs(st,{to:p.path,className:"flex flex-col items-center justify-center p-2 rounded bg-gray-800/40 hover:bg-hd-orange transition-all group border border-white/5",children:[r.jsx(v,{size:16,className:"text-hd-orange group-hover:text-white mb-1"}),r.jsx("span",{className:"text-[9px] font-black text-gray-400 group-hover:text-white uppercase tracking-tighter text-center leading-none",children:p.label.split(" ")[0]})]},u)})})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("crm"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(WD,{size:20}),r.jsx("span",{children:"CRM"})]}),n.crm?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.crm&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/crm/dashboard",className:f,children:[r.jsx(is,{size:18}),r.jsx("span",{children:"Dashboard"})]}),r.jsxs(st,{to:"/crm/prospectos",className:f,children:[r.jsx(zr,{size:18}),r.jsx("span",{children:"Prospectos"})]}),r.jsxs(st,{to:"/crm/oportunidades",className:f,children:[r.jsx(Nj,{size:18}),r.jsx("span",{children:"Oportunidades"})]}),r.jsxs(st,{to:"/crm/actividades",className:f,children:[r.jsx(sa,{size:18}),r.jsx("span",{children:"Actividades"})]}),r.jsxs(st,{to:"/crm/interacciones",className:f,children:[r.jsx(JD,{size:18}),r.jsx("span",{children:"Interacciones"})]})]})]}),r.jsxs(st,{to:"/clientes",className:c,children:[r.jsx(zr,{size:20}),r.jsx("span",{children:"Clientes"})]}),r.jsxs(st,{to:"/vendedores",className:f,children:[r.jsx(eO,{size:18}),r.jsx("span",{children:"Vendedores"})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("marketing"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(XD,{size:20,className:"text-hd-orange"}),r.jsx("span",{children:"Marketing"})]}),n.marketing?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.marketing&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/marketing/promociones",className:f,children:[r.jsx(vm,{size:18}),r.jsx("span",{children:"Promociones"})]}),r.jsxs(st,{to:"/marketing/cupones",className:f,children:[r.jsx(QD,{size:18}),r.jsx("span",{children:"Cupones"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("ventas"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(io,{size:20}),r.jsx("span",{children:"Ventas"})]}),n.ventas?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.ventas&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/ventas/pos",className:f,children:[r.jsx(Gy,{size:18}),r.jsx("span",{children:"POS (Caja)"})]}),r.jsxs(st,{to:"/ventas/distribucion",className:f,children:[r.jsx(vc,{size:18}),r.jsx("span",{children:"Ventas Distribucin"})]}),r.jsxs(st,{to:"/ventas/devoluciones",className:f,children:[r.jsx(na,{size:18}),r.jsx("span",{children:"Devoluciones y NC"})]}),r.jsxs(st,{to:"/ventas/historial",className:f,children:[r.jsx(Pr,{size:18}),r.jsx("span",{children:"Historial de Ventas"})]}),r.jsxs(st,{to:"/ventas/corte",className:f,children:[r.jsx(Xr,{size:18}),r.jsx("span",{children:"Corte de Caja"})]}),r.jsxs(st,{to:"/cuentas-por-cobrar/cobros",className:f,children:[r.jsx(Xr,{size:18}),r.jsx("span",{children:"Cuentas por Cobrar"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("compras"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(za,{size:20}),r.jsx("span",{children:"Compras"})]}),n.compras?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.compras&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/compras",className:f,end:!0,children:[r.jsx(za,{size:18}),r.jsx("span",{children:"rdenes y Facturas"})]}),r.jsxs(st,{to:"/proveedores",className:f,children:[r.jsx(vc,{size:18}),r.jsx("span",{children:"Proveedores"})]}),r.jsxs(st,{to:"/cuentas-por-pagar/pagos",className:f,children:[r.jsx(nl,{size:18}),r.jsx("span",{children:"Cuentas por Pagar"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("inventario"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Rn,{size:20}),r.jsx("span",{children:"Inventario"})]}),n.inventario?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.inventario&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/productos",className:f,children:[r.jsx(xc,{size:18}),r.jsx("span",{children:"Maestro de Artculos"})]}),r.jsxs("div",{className:"ml-4 border-l-2 border-gray-700 pl-4 mt-1 mb-2 space-y-1",children:[r.jsxs(st,{to:"/inventario/lista-precios",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(Xr,{size:14}),r.jsx("span",{children:"Lista de Precios"})]}),r.jsxs(st,{to:"/inventario/niveles-precios",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(ja,{size:14}),r.jsx("span",{children:"Niveles de Precio"})]}),r.jsxs(st,{to:"/inventario/categorias-articulos",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(vm,{size:14}),r.jsx("span",{children:"Atributos de Artculos"})]}),r.jsxs(st,{to:"/inventario/unidades-medida",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(pm,{size:14}),r.jsx("span",{children:"Unidades de Medida"})]}),r.jsxs(st,{to:"/inventario/almacenes",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(xc,{size:14}),r.jsx("span",{children:"Almacenes"})]}),r.jsxs(st,{to:"/inventario/grupos-impuestos",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(na,{size:14}),r.jsx("span",{children:"Grupos de Impuestos"})]}),r.jsxs(st,{to:"/inventario/grupos-producto",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(Rn,{size:14}),r.jsx("span",{children:"Grupos de Producto"})]})]}),r.jsxs(st,{to:"/ajustes",className:f,children:[r.jsx(na,{size:18}),r.jsx("span",{children:"Ajustes"})]}),r.jsxs(st,{to:"/transferencias",className:f,children:[r.jsx(nl,{size:18}),r.jsx("span",{children:"Transferencias"})]}),r.jsxs(st,{to:"/inventario/historial",className:f,children:[r.jsx(Pr,{size:18}),r.jsx("span",{children:"Historial (Kardex)"})]}),r.jsxs(st,{to:"/kardex",className:f,children:[r.jsx(xc,{size:18}),r.jsx("span",{children:"Control (Kardex)"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("configuracion"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(di,{size:20}),r.jsx("span",{children:"Configuracin"})]}),n.configuracion?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.configuracion&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/configuracion/compania",className:f,children:[r.jsx(di,{size:18}),r.jsx("span",{children:"Compaa"})]}),r.jsxs(st,{to:"/configuracion/cxp",className:f,children:[r.jsx(Pr,{size:18}),r.jsx("span",{children:"Cuentas por Pagar"})]}),r.jsxs(st,{to:"/configuracion/ncf",className:f,children:[r.jsx(pm,{size:18}),r.jsx("span",{children:"Comprobantes (NCF)"})]}),r.jsxs(st,{to:"/configuracion/clientes",className:f,children:[r.jsx(zr,{size:18}),r.jsx("span",{children:"Configuracin Clientes"})]}),r.jsxs(st,{to:"/configuracion/articulos",className:f,children:[r.jsx(Rn,{size:18}),r.jsx("span",{className:n.configuracion?"":"hidden",children:"Configuracin Artculos"})]}),r.jsxs(st,{to:"/configuracion/monedas",className:f,children:[r.jsx(Xr,{size:18}),r.jsx("span",{className:n.configuracion?"":"hidden",children:"Monedas y Tasas"})]}),r.jsxs(st,{to:"/configuracion/proveedores",className:f,children:[r.jsx(zr,{size:18}),r.jsx("span",{children:"Configuracin Proveedores"})]}),r.jsxs(st,{to:"/configuracion/pos",className:f,children:[r.jsx(xm,{size:18}),r.jsx("span",{children:"Configuracin POS"})]}),r.jsxs(st,{to:"/configuracion/compras",className:f,children:[r.jsx(za,{size:18}),r.jsx("span",{children:"Configuracin Compras"})]}),r.jsxs(st,{to:"/configuracion/transferencias",className:f,children:[r.jsx(nl,{size:18}),r.jsx("span",{children:"Configuracin Transferencias"})]}),r.jsxs(st,{to:"/configuracion/usuarios",className:f,children:[r.jsx(zr,{size:18}),r.jsx("span",{children:"Gestin de Usuarios"})]}),r.jsxs(st,{to:"/configuracion/security-editor",className:f,children:[r.jsx(_p,{size:18}),r.jsx("span",{children:"Editor de Seguridad"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("manager"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(is,{size:20}),r.jsx("span",{children:"Manager Report"})]}),n.manager?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.manager&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/reportes/manager",className:f,end:!0,children:[r.jsx(is,{size:18}),r.jsx("span",{children:"Ver Reporte"})]}),r.jsxs(st,{to:"/configuracion/receipt-designer",className:f,children:[r.jsx(Pr,{size:18}),r.jsx("span",{children:"Diseador de Recibos"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("reportes"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(is,{size:20}),r.jsx("span",{children:"Reportes"})]}),n.reportes?r.jsx(kr,{size:16}):r.jsx(ir,{size:16})]}),n.reportes&&r.jsxs("div",{className:"bg-black/20 pb-2 ml-4 border-l border-gray-800",children:[r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repVentas"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(io,{size:16}),r.jsx("span",{children:"Ventas"})]}),n.repVentas?r.jsx(kr,{size:14}):r.jsx(ir,{size:14})]}),n.repVentas&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/reportes/ventas",className:f,children:r.jsx("span",{children:"General de Ventas"})}),r.jsx(st,{to:"/reportes/ventas-cobros",className:f,children:r.jsx("span",{children:"Cobros y Mtodos de Pago"})}),r.jsx(st,{to:"/reportes/ventas-vendedor",className:f,children:r.jsx("span",{children:"Por Vendedor"})}),r.jsx(st,{to:"/reportes/ventas-cliente",className:f,children:r.jsx("span",{children:"Por Cliente"})}),r.jsx(st,{to:"/ventas/corte",className:f,children:r.jsx("span",{children:"Corte de Caja"})})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repCompras"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(za,{size:16}),r.jsx("span",{children:"Compras"})]}),n.repCompras?r.jsx(kr,{size:14}):r.jsx(ir,{size:14})]}),n.repCompras&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/compras/reportes",className:f,children:r.jsx("span",{children:"Reportes de Compras"})}),r.jsx(st,{to:"/reportes/compras-multi-moneda",className:f,children:r.jsx("span",{children:"Multi-Moneda (Excel)"})}),r.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-800",children:[r.jsx("div",{className:"px-8 py-1 text-[10px] font-bold text-hd-orange uppercase tracking-widest opacity-70",children:"SmartLists Dinmicos"}),r.jsxs(st,{to:"/reportes/smartlist/facturas",className:f,children:[r.jsx(Yr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Facturas"})]}),r.jsxs(st,{to:"/reportes/smartlist/articulos",className:f,children:[r.jsx(Yr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Artculos"})]}),r.jsxs(st,{to:"/reportes/smartlist/proveedores",className:f,children:[r.jsx(Yr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Proveedores"})]}),r.jsxs(st,{to:"/reportes/smartlist/pagos",className:f,children:[r.jsx(Yr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Pagos"})]}),r.jsxs(st,{to:"/reportes/smartlist/inventario",className:f,children:[r.jsx(Yr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Existencias"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repInventario"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Rn,{size:16}),r.jsx("span",{children:"Inventario"})]}),n.repInventario?r.jsx(kr,{size:14}):r.jsx(ir,{size:14})]}),n.repInventario&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/reportes/inventario",className:f,children:r.jsx("span",{children:"Existencias Actuales"})}),r.jsx(st,{to:"/reportes/valoracion-inventario",className:f,children:r.jsx("span",{children:"Valoracin de Inventario"})}),r.jsx(st,{to:"/reportes/kardex",className:f,children:r.jsx("span",{children:"Movimientos de Artculos"})})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repEntidades"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(zr,{size:16}),r.jsx("span",{children:"Entidades"})]}),n.repEntidades?r.jsx(kr,{size:14}):r.jsx(ir,{size:14})]}),n.repEntidades&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/reportes/clientes",className:f,children:r.jsx("span",{children:"Listado de Clientes"})}),r.jsx(st,{to:"/reportes/proveedores",className:f,children:r.jsx("span",{children:"Listado de Proveedores"})})]})]})]})]})]}),r.jsx("div",{className:"p-4 border-t border-gray-800 text-xs text-gray-500 text-center",children:"Versin 1.0.0"})]})]})},cL=()=>{var o;const e=hs(),t=$t(),{user:n,logout:a}=jl(),s=()=>{const l=e.pathname;return l==="/"?"Dashboard":l.startsWith("/clientes")?"Gestin de Clientes":l.startsWith("/proveedores")?"Gestin de Proveedores":l.startsWith("/ventas/devoluciones")?"Devoluciones y Notas de Crdito":l.startsWith("/ventas")?"Punto de Venta":l.startsWith("/compras")?"Compras e Ingresos":l.includes("/productos/nuevo")?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:"Catlogo de Productos"}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsx("span",{children:"Nuevo Artculo"})]}),r.jsx("div",{className:"text-sm text-gray-500 font-normal",children:"Ficha de Artculo"})]}):l.includes("/productos/editar")?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:"Catlogo de Productos"}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsx("span",{children:"Editar Artculo"})]}),r.jsx("div",{className:"text-sm text-gray-500 font-normal",children:"Ficha de Artculo"})]}):l.startsWith("/productos")?"Catlogo de Productos":l.startsWith("/inventario/lista-precios")?"Mantenimiento Lista de Precios":l.startsWith("/inventario/categorias-articulos")?"Segmentacin de Artculos":l.startsWith("/inventario/unidades-medida")?"Unidades de Medida":l.startsWith("/inventario/almacenes")?"Almacenes":l.startsWith("/inventario/grupos-impuestos")?"Grupos de Impuestos":l.startsWith("/kardex")?"Control de Inventario":l.startsWith("/configuracion/articulos")?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/configuracion"),className:"flex items-center justify-center p-2 rounded-full hover:bg-gray-100 transition-colors",children:r.jsx(un,{size:20,className:"text-gray-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Configuracin de Artculos"}),r.jsx("div",{className:"text-xs text-gray-500 font-normal",children:"Configuracin de secuencia numrica para artculos"})]})]}),r.jsx("div",{id:"header-message",className:"ml-14"})]}):l.startsWith("/reportes/valoracion-inventario")?"Valoracin de Inventario":l.startsWith("/reportes")?"Reportes":"Sistema POS"};return r.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden font-sans",children:[r.jsx(lL,{}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 z-10",children:[r.jsx("div",{className:"text-xl font-bold text-gray-800",children:s()}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{id:"header-actions"}),r.jsxs("button",{className:"p-2 text-gray-400 hover:text-hd-orange transition-colors relative",children:[r.jsx(F6,{size:20}),r.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),r.jsxs("div",{className:"flex items-center space-x-2 border-l border-gray-200 pl-4 ml-2",children:[r.jsxs("div",{className:"text-right hidden md:block mr-2",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700",children:(n==null?void 0:n.fullName)||"Usuario"}),r.jsx("div",{className:"text-[10px] font-black uppercase text-hd-orange tracking-tighter italic leading-none",children:(n==null?void 0:n.role)||"Vendedor"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 bg-hd-orange rounded-full flex items-center justify-center text-white shadow-lg shadow-hd-orange/10 font-black italic",children:((o=n==null?void 0:n.userName)==null?void 0:o.substring(0,2).toUpperCase())||"U"}),r.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50/50 rounded-xl transition-all",title:"Cerrar Sesin",children:r.jsx(X6,{size:20})})]})]})]})]}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:r.jsx(zD,{})})]})]})},pa=({title:e})=>r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mb-6",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-700 mb-2",children:e}),r.jsx("p",{className:"max-w-md text-center",children:"Estamos trabajando en el diseo de este mdulo. Pronto ver aqu los formularios y tablas correspondientes."})]}),re=({children:e,variant:t="primary",size:n="md",isLoading:a=!1,className:s="",...o})=>{const l="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",c={primary:"bg-hd-orange text-white hover:bg-orange-600 focus:ring-orange-500",secondary:"bg-gray-800 text-white hover:bg-gray-900 focus:ring-gray-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700",ghost:"bg-transparent hover:bg-gray-100 text-gray-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},f={xs:"h-6 px-2 text-[10px]",sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2 text-sm",lg:"h-12 px-8 text-base"};return r.jsxs("button",{className:"".concat(l," ").concat(c[t]," ").concat(f[n]," ").concat(s),disabled:a||o.disabled,...o,children:[a&&r.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),e]})},ge=Nt.forwardRef(({label:e,error:t,className:n="",id:a,...s},o)=>r.jsxs("div",{className:"flex flex-col space-y-1.5 ".concat(n),children:[e&&r.jsx("label",{htmlFor:a,className:"text-sm font-medium text-gray-700",children:e}),r.jsx("input",{ref:o,id:a,className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-hd-orange focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 ".concat(t?"border-red-500 focus:ring-red-500":""),...s,value:s.value!==void 0?s.value:""}),t&&r.jsx("span",{className:"text-xs text-red-500",children:t})]}));ge.displayName="Input";const Bt=({children:e,className:t="",style:n={}})=>r.jsx("div",{className:"w-full overflow-auto border border-gray-300 rounded-sm",children:r.jsx("table",{className:"w-full caption-bottom text-sm ".concat(t),style:n,children:e})}),Ut=({children:e,className:t=""})=>r.jsx("thead",{className:"bg-gray-100 ".concat(t),children:e}),Vt=({children:e,className:t=""})=>r.jsx("tbody",{className:"bg-white ".concat(t),children:e}),Te=({children:e,className:t="",...n})=>r.jsx("tr",{className:"transition-colors hover:bg-blue-50/50 data-[state=selected]:bg-purple-100 data-[state=selected]:text-purple-900 ".concat(t),...n,children:e}),le=({children:e,className:t="",...n})=>r.jsx("th",{className:"h-10 px-4 text-left align-middle font-medium text-gray-600 border-b border-r border-gray-300 last:border-r-0 bg-gray-50 whitespace-nowrap ".concat(t),...n,children:e}),H=({children:e,className:t="",...n})=>r.jsx("td",{className:"p-1.5 align-middle border-b border-r border-gray-200 last:border-r-0 text-gray-700 [&:has([role=checkbox])]:pr-0 ".concat(t),...n,children:e}),We=Nt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("div",{ref:a,className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(t),...n,children:e})),vt=Nt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("div",{ref:a,className:"px-6 py-4 border-b border-gray-100 ".concat(t),...n,children:e})),bt=Nt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("h3",{ref:a,className:"text-lg font-semibold text-gray-800 ".concat(t),...n,children:e})),Mt=Nt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("div",{ref:a,className:"px-6 py-4 ".concat(t),...n,children:e}));We.displayName="Card";vt.displayName="CardHeader";bt.displayName="CardTitle";Mt.displayName="CardContent";const dL=()=>{const e=$t(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{const j=await fetch("http://localhost:5006/api/Clients");if(j.ok){const y=await j.json(),b=Array.isArray(y)?y:y.value||[];s(b)}else{const y=await j.text();console.error("Failed to fetch clients:",j.status,y),alert("Error al cargar clientes: "+y)}}catch(j){console.error("Error fetching clients:",j)}finally{l(!1)}},f=async j=>{if(window.confirm("Est seguro de eliminar este cliente?"))try{(await fetch("http://localhost:5006/api/Clients/".concat(j),{method:"DELETE"})).ok?c():alert("Error al eliminar")}catch(y){console.error("Error deleting client:",y)}},[h,u]=x.useState({key:null,direction:"asc"}),m=j=>{let y="asc";h.key===j&&h.direction==="asc"&&(y="desc"),u({key:j,direction:y})},p=Nt.useMemo(()=>{let j=[...a];return t&&(j=j.filter(y=>{const b=y.name||y.Name||"",N=y.company||y.Company||"",k=y.code||y.Code||"";return b.toLowerCase().includes(t.toLowerCase())||N.toLowerCase().includes(t.toLowerCase())||k.toLowerCase().includes(t.toLowerCase())})),h.key&&j.sort((y,b)=>{const N=y[h.key]?y[h.key].toString().toLowerCase():"",k=b[h.key]?b[h.key].toString().toLowerCase():"";return N<k?h.direction==="asc"?-1:1:N>k?h.direction==="asc"?1:-1:0}),j},[a,t,h]),v=j=>h.key!==j?r.jsx(Yr,{size:14,className:"opacity-30"}):h.direction==="asc"?r.jsx(Gn,{size:14,className:"text-hd-orange"}):r.jsx(Jr,{size:14,className:"text-hd-orange"});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Clientes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de cartera de clientes"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{variant:"outline",className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:[r.jsx(Vu,{className:"mr-2 h-4 w-4"})," Filtros"]}),r.jsxs(re,{onClick:()=>e("/clientes/nuevo"),className:"bg-hd-orange hover:bg-orange-600 text-white shadow-md",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Cliente"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(We,{className:"border-l-4 border-l-blue-500",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Clientes"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:a.length})]})}),r.jsx(We,{className:"border-l-4 border-l-green-500",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Activos"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:a.filter(j=>j.status==="Active").length})]})}),r.jsx(We,{className:"border-l-4 border-l-orange-500",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Crdito Disponible"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"$1.2M"})]})}),r.jsx(We,{className:"border-l-4 border-l-red-500",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Saldo Vencido"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"$45.2k"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex gap-4",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ge,{placeholder:"Buscar por nombre, empresa o cdigo...",className:"pl-9 bg-white",value:t,onChange:j=>n(j.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-100/90 border-b-2 border-gray-200",children:r.jsxs(Te,{children:[r.jsx(le,{onClick:()=>m("code"),className:"w-[100px] font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Cdigo"}),v("code")]})}),r.jsx(le,{onClick:()=>m("name"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Nombre"}),v("name")]})}),r.jsx(le,{onClick:()=>m("company"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Empresa"}),v("company")]})}),r.jsx(le,{onClick:()=>m("phone"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Telfono"}),v("phone")]})}),r.jsx(le,{onClick:()=>m("email"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Email"}),v("email")]})}),r.jsx(le,{onClick:()=>m("status"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Estado"}),v("status")]})}),r.jsx(le,{className:"text-right font-bold text-gray-700",children:"Acciones"})]})}),r.jsx(Vt,{children:o?r.jsx(Te,{children:r.jsx(H,{colSpan:7,className:"text-center py-8 text-gray-500",children:"Cargando clientes..."})}):p.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No se encontraron clientes"})}):p.map(j=>r.jsxs(Te,{className:"hover:bg-gray-50 transition-colors",children:[r.jsx(H,{className:"font-medium text-gray-900",children:j.code||j.Code}),r.jsx(H,{className:"font-medium text-gray-800",children:j.name||j.Name}),r.jsx(H,{className:"text-gray-600",children:j.company||j.Company||"-"}),r.jsx(H,{className:"text-gray-600 text-sm",children:j.phone||j.Phone}),r.jsx(H,{className:"text-gray-600 text-sm",children:j.email||j.Email}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((j.status||j.Status)==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:(j.status||j.Status)==="Active"?"Activo":"Inactivo"})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/clientes/editar/".concat(j.id)),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(zc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(j.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(rr,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},j.id||j.Id))})]})})]})]})},Rp="http://localhost:5006/api",Cc=async()=>{const e=await fetch("".concat(Rp,"/NivelesPrecio"));if(!e.ok)throw new Error("Error getting price levels");return e.json()},Cj=async e=>{const t=await fetch("".concat(Rp,"/NivelesPrecio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error saving price level");return t.json()},uL=async(e,t)=>{if(!(await fetch("".concat(Rp,"/NivelesPrecio/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Error updating price level");return!0},fL=async e=>{if(!(await fetch("".concat(Rp,"/NivelesPrecio/").concat(e),{method:"DELETE"})).ok)throw new Error("Error deleting price level");return!0},hL=({clientId:e})=>{const[t,n]=x.useState([]),[a,s]=x.useState(!1);if(x.useEffect(()=>{e&&(s(!0),fetch("http://localhost:5006/api/Clients/".concat(e,"/Statement")).then(l=>l.json()).then(l=>n(Array.isArray(l)?l:[])).catch(l=>console.error("Error loading ledger:",l)).finally(()=>s(!1)))},[e]),!e)return r.jsx("div",{className:"text-gray-400 p-4",children:"Guarde el cliente para ver su estado de cuenta."});const o=l=>l?"RD$ ".concat(l.toLocaleString("en-US",{minimumFractionDigits:2})):"-";return r.jsx("div",{className:"overflow-x-auto border rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dbito"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crdito"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Saldo"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"Cargando movimientos..."})}):t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay movimientos registrados."})}):t.map((l,c)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(l.fecha).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[l.documento,l.referencia&&r.jsx("div",{className:"text-xs text-gray-400 font-normal",children:l.referencia})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(l.tipo==="Factura"?"bg-blue-100 text-blue-800":l.tipo==="Cobro"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:l.tipo})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:o(l.debito)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:o(l.credito)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-gray-900",children:o(l.balance)})]},"".concat(l.refId,"-").concat(c)))})]})})},kh=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(kr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ir,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},Tr=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),zC=()=>{const e=$t(),{id:t}=xo(),[n,a]=x.useState(""),[s,o]=x.useState({code:"",name:"",company:"",taxId:"",phone:"",email:"",address:"",status:"Active",balance:0,tipoNCF:"",nivelPrecio:"",moneda:""}),[l,c]=x.useState(null),[f,h]=x.useState([]),[u,m]=x.useState([]),[p,v]=x.useState([]);x.useEffect(()=>{(async()=>{try{const D=await fetch("http://localhost:5006/api/ClientConfiguration");if(D.ok){const C=await D.json();if(c(C),!t&&C.useAutoSequence){const O=String(C.currentValue).padStart(C.sequenceLength,"0"),A=C.useInitials?"".concat(C.initials).concat(C.separator).concat(O):O;o(_=>({..._,code:A}))}}const E=await fetch("http://localhost:5006/api/Sellers");if(E.ok){const C=await E.json();h(C)}const P=await fetch("http://localhost:5006/api/Ventas/NCF/Sequences");if(P.ok){const C=await P.json();m(C)}try{const C=await Cc();v(C)}catch(C){console.error("Error fetching price levels",C)}}catch(D){console.error("Error loading initial data:",D)}})()},[t]),x.useEffect(()=>{t&&j(t)},[t]);const j=async k=>{try{const D=await fetch("http://localhost:5006/api/Clients/".concat(k));if(D.ok){const E=await D.json();o(E)}else console.error("Failed to fetch client"),alert("No se pudo cargar el cliente")}catch(D){console.error("Error:",D)}},y=k=>{if(!l||!l.nameCase)return k;switch(l.nameCase){case"words":return k.split(" ").map(D=>D.charAt(0).toUpperCase()+D.slice(1).toLowerCase()).join(" ");case"first":return k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();case"normal":default:return k}},b=k=>{const{name:D,value:E}=k.target;let P=E;D==="name"&&(P=y(E)),o(C=>({...C,[D]:P}))},N=async()=>{try{if(!s.name){alert("El nombre es obligatorio");return}const k=t?"PUT":"POST",D=t?"http://localhost:5006/api/Clients/".concat(t):"http://localhost:5006/api/Clients",E={...s,code:s.code||"C".concat(Math.floor(Math.random()*1e4))};if((await fetch(D,{method:k,headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).ok){if(a(t?"Cliente actualizado correctamente.":"El cliente se ha registrado correctamente."),!t){const C=await fetch("http://localhost:5006/api/ClientConfiguration");if(C.ok){const O=await C.json(),A=String(O.currentValue).padStart(O.sequenceLength,"0"),_=O.useInitials?"".concat(O.initials).concat(O.separator).concat(A):A;o({code:_,name:"",company:"",taxId:"",phone:"",email:"",address:"",status:"Active",balance:0,tipoNCF:"",nivelPrecio:""})}}}else console.error("Error saving client"),alert("Error al guardar")}catch(k){console.error("Error:",k),alert("Error de conexin")}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/clientes"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Clientes"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:"Nuevo Cliente"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Tarjeta de Cliente"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[n&&r.jsx("span",{className:"text-lg font-bold text-blue-400 animate-pulse",children:n}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"ghost",className:"text-gray-600 hover:bg-gray-100",children:r.jsx("span",{className:"text-xs font-medium",children:"Reportes"})}),r.jsx(re,{variant:"ghost",className:"text-gray-600 hover:bg-gray-100",children:r.jsx("span",{className:"text-xs font-medium",children:"Movimientos"})}),r.jsx("div",{className:"h-4 w-px bg-gray-300 mx-2"}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/clientes"),className:"border-gray-300 text-gray-700",children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:N,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(kh,{title:"Informacin General",children:[r.jsx(Tr,{label:"No.",children:r.jsx(ge,{name:"code",value:s.code,onChange:b,placeholder:"(Auto)",className:"bg-gray-50 border-gray-300 text-gray-900 font-bold",readOnly:(l==null?void 0:l.useAutoSequence)||!!t})}),r.jsx(Tr,{label:"Nombre",required:!0,children:r.jsx(ge,{name:"name",value:s.name,onChange:b,placeholder:"Nombre del cliente",className:"font-medium"})}),r.jsx(Tr,{label:"Saldo Consolidado (RD$)",children:r.jsx(ge,{value:s.balance,onChange:()=>{},placeholder:"0.00",className:"text-right text-hd-orange font-black border-gray-300 text-lg",readOnly:!0})}),r.jsx(Tr,{label:"Lmite Crdito (RD$)",children:r.jsx(ge,{type:"number",placeholder:"0.00",className:"text-right",readOnly:!0})}),r.jsx(Tr,{label:"Vendedor",children:r.jsxs("select",{name:"sellerName",value:s.sellerName||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),f.map(k=>r.jsxs("option",{value:k.name,className:"text-gray-900",children:[k.code," - ",k.name]},k.id))]})}),r.jsx(Tr,{label:"Bloqueado",children:r.jsxs("select",{name:"status",value:s.status,onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"Active",children:"No"}),r.jsx("option",{value:"Blocked",children:"Todo"})]})})]}),r.jsxs(kh,{title:"Direccin y Contacto",defaultExpanded:!0,children:[r.jsx(Tr,{label:"Direccin",required:!0,children:r.jsx(ge,{name:"address",value:s.address,onChange:b,placeholder:"Calle, nmero..."})}),r.jsx(Tr,{label:"Direccin 2",children:r.jsx(ge,{placeholder:"Apartamento, local...",readOnly:!0})}),r.jsx(Tr,{label:"Ciudad",children:r.jsx(ge,{placeholder:"Santo Domingo",readOnly:!0})}),r.jsx(Tr,{label:"Cdigo Postal",children:r.jsx(ge,{placeholder:"10101",readOnly:!0})}),r.jsx(Tr,{label:"Telfono",children:r.jsx(ge,{name:"phone",value:s.phone,onChange:b,placeholder:"(809) 000-0000"})}),r.jsx(Tr,{label:"Correo Electrnico",children:r.jsx(ge,{name:"email",type:"email",value:s.email,onChange:b,placeholder:"cliente@ejemplo.com",className:"text-blue-600 underline"})}),r.jsx(Tr,{label:"Pgina Web",children:r.jsx(ge,{placeholder:"www.ejemplo.com",readOnly:!0})}),r.jsx(Tr,{label:"Contacto Principal",children:r.jsx(ge,{placeholder:"Nombre del contacto",readOnly:!0})})]}),r.jsxs(kh,{title:"Facturacin",defaultExpanded:!1,children:[r.jsx(Tr,{label:"RNC / Cdula",required:!0,children:r.jsx(ge,{name:"taxId",value:s.taxId,onChange:b,placeholder:"001-0000000-0"})}),r.jsx(Tr,{label:"Condicin Pago",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{children:"Contado"}),r.jsx("option",{children:"15 Das"}),r.jsx("option",{children:"30 Das"}),r.jsx("option",{children:"60 Das"})]})}),r.jsx(Tr,{label:"Nivel de Precio",children:r.jsxs("select",{name:"nivelPrecio",value:s.nivelPrecio||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"-- Predeterminado --"}),p.map(k=>r.jsx("option",{value:k.nombre,children:k.nombre},k.id))]})}),r.jsx(Tr,{label:"Tipo NCF",children:r.jsxs("select",{name:"tipoNCF",value:s.tipoNCF||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),u.map(k=>r.jsxs("option",{value:k.tipoNCF,children:[k.nombre," (",k.tipoNCF,")"]},k.id))]})}),r.jsx(Tr,{label:"Moneda",children:r.jsxs("select",{name:"moneda",value:s.moneda||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),r.jsx("option",{value:"DOP",children:"DOP"}),r.jsx("option",{value:"USD",children:"USD"})]})}),r.jsx(Tr,{label:"Grupo Impuesto",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",disabled:!0,children:[r.jsx("option",{children:"ITBIS 18%"}),r.jsx("option",{children:"Exento"})]})}),r.jsx(Tr,{label:"Compaa",children:r.jsx(ge,{name:"company",value:s.company,onChange:b,placeholder:"Nombre de empresa..."})})]}),r.jsx(kh,{title:"Estado de Cuenta",defaultExpanded:!0,children:r.jsx("div",{className:"col-span-full",children:r.jsx(hL,{clientId:t})})})]})]})},qu="http://localhost:5006/api",kj=async()=>{const e=await fetch("".concat(qu,"/Proveedores"));if(!e.ok)throw new Error("Failed to get providers: ".concat(e.status));return e.json()},mL=async e=>{const t=await fetch("".concat(qu,"/Proveedores/").concat(e));if(!t.ok)throw new Error("Failed to get provider: ".concat(t.status));return t.json()},pL=async e=>{const t=await fetch("".concat(qu,"/Proveedores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error("Failed to save provider: ".concat(t.status," ").concat(n))}return t.json()},gL=async(e,t)=>{const n=await fetch("".concat(qu,"/Proveedores/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const a=await n.text();throw new Error("Failed to update provider: ".concat(n.status," ").concat(a))}return n.status===204?null:n.json()},xL=async e=>{const t=await fetch("".concat(qu,"/Proveedores/").concat(e),{method:"DELETE"});if(!t.ok){const n=await t.text();throw new Error("Failed to delete provider: ".concat(t.status," ").concat(n))}return!0},vL=()=>{const e=$t(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{l(!0);const u=await kj();s(u)}catch(u){console.error("Error loading suppliers:",u)}finally{l(!1)}},f=async u=>{if(window.confirm("Est seguro de eliminar este proveedor?"))try{await xL(u),c()}catch(m){console.error("Error deleting supplier:",m),alert("Error al eliminar proveedor")}},h=a.filter(u=>u.razonSocial.toLowerCase().includes(t.toLowerCase())||u.contacto&&u.contacto.toLowerCase().includes(t.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Proveedores"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione la informacin de sus proveedores y rdenes de compra."})]}),r.jsxs(re,{onClick:()=>e("/proveedores/nuevo"),className:"bg-gray-800 hover:bg-gray-900 shadow-lg",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Proveedor"]})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(bt,{children:"Listado General"}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar proveedor...",className:"pl-9",value:t,onChange:u=>n(u.target.value)})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[100px]",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Cdigo ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Empresa ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{className:"hidden md:table-cell",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Contacto ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{className:"hidden md:table-cell",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Telfono ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{className:"hidden lg:table-cell",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Email ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Estado ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2 cursor-pointer hover:text-gray-900 group",children:["Deuda Total ",r.jsx(Yr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(le,{className:"text-right",children:"Acciones"})]})}),r.jsx(Vt,{children:h.map(u=>r.jsxs(Te,{className:"cursor-pointer",children:[r.jsx(H,{className:"font-medium",children:u.codigoProveedor}),r.jsxs(H,{children:[r.jsx("div",{className:"font-medium text-gray-900",children:u.razonSocial}),r.jsx("div",{className:"text-xs text-gray-500",children:u.numeroDocumento})]}),r.jsx(H,{className:"hidden md:table-cell text-gray-600",children:u.contacto}),r.jsx(H,{className:"hidden md:table-cell text-gray-600",children:u.telefono}),r.jsx(H,{className:"hidden lg:table-cell text-gray-600",children:u.correo}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(u.activo?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:u.activo?"Activo":"Inactivo"})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{className:"font-bold ".concat(u.deudaTotal>0?"text-red-600":"text-green-600"),children:["RD$ ",u.deudaTotal.toLocaleString(void 0,{minimumFractionDigits:2})]}),u.deudaTotal>0&&r.jsx("span",{className:"text-[10px] text-gray-400 italic",children:"Balance Consolidado"})]})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/cuentas-por-pagar/pagos"),className:"h-10 w-10 p-2 rounded-full text-green-600 hover:text-green-800 hover:bg-green-100 transition-all border border-transparent hover:border-green-200 shadow-sm",title:"Registrar Pago",children:r.jsx(Xr,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/proveedores/editar/".concat(u.id)),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(zc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(u.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(rr,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},u.id))})]})})]})]})},I0=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(kr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ir,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},Bn=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),BC=()=>{const e=$t(),{id:t}=xo(),n=!!t,[a,s]=x.useState(null),[o,l]=x.useState("N/A"),[c,f]=x.useState(""),[h,u]=x.useState(""),[m,p]=x.useState(""),[v,j]=x.useState(""),[y,b]=x.useState(""),[N,k]=x.useState(""),[D,E]=x.useState(""),[P,C]=x.useState(""),[O,A]=x.useState(""),[_,z]=x.useState(!0);x.useEffect(()=>{M(),T(),n?W():G()},[n,t]);const G=async()=>{try{const U=await fetch("".concat("http://localhost:5006/api","/ProveedorConfiguration/NextCode"));if(U.ok){const $=await U.text();u($||"PROV-".concat(Math.floor(1e3+Math.random()*9e3)))}}catch(B){console.error("Error fetching next code:",B)}},T=async()=>{try{const U=await fetch("".concat("http://localhost:5006/api","/ProveedorConfiguration"));if(U.ok){const $=await U.json();s($)}}catch(B){console.error(B)}},M=async()=>{},W=async()=>{try{const B=await mL(t);u(B.codigoProveedor),p(B.razonSocial),j(B.numeroDocumento||""),b(B.tipoComprobante||""),k(B.direccion||""),E(B.telefono||""),C(B.correo||""),A(B.contacto||""),z(B.activo)}catch(B){console.error("Error loading provider:",B),alert("Error al cargar proveedor")}},Z=async()=>{if(!m||!h){alert("Por favor complete los campos obligatorios (*).");return}const B={CodigoProveedor:h,RazonSocial:m,NumeroDocumento:v,TipoComprobante:y,Direccion:N,Telefono:D,Correo:P,Contacto:O,Activo:_};try{n?(await gL(parseInt(t),{...B,Id:parseInt(t)}),e("/proveedores")):(await pL(B),await fetch("".concat("http://localhost:5006/api","/ProveedorConfiguration/Increment"),{method:"POST"}),e("/proveedores"))}catch(U){console.error("Error saving provider:",U),alert("Error al guardar proveedor: "+U.message)}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/proveedores"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Proveedores"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:n?"Editar Proveedor":"Nuevo Proveedor"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Tarjeta de Proveedor"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"ghost",className:"text-gray-600 hover:bg-gray-100",children:r.jsx("span",{className:"text-xs font-medium",children:"Historial"})}),r.jsx("div",{className:"h-4 w-px bg-gray-300 mx-2"}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/proveedores"),className:"border-gray-300 text-gray-700",children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:Z,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(I0,{title:"General",children:[r.jsx(Bn,{label:"No. Proveedor",required:!0,children:r.jsx(ge,{value:h,onChange:B=>u(B.target.value),placeholder:"(Auto)",className:"bg-gray-50 border-gray-200"})}),r.jsx(Bn,{label:"Nombre / Razn Social",required:!0,children:r.jsx(ge,{value:m,onChange:B=>p(B.target.value),placeholder:"Nombre o Razn Social",className:"font-medium"})}),r.jsx(Bn,{label:"RNC / Tax ID",children:r.jsx(ge,{value:v,onChange:B=>j(B.target.value),placeholder:"001-0000000-0"})}),r.jsx(Bn,{label:"Tipo de Comprobante",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:y,onChange:B=>b(B.target.value),children:[r.jsx("option",{value:"",children:"-- Seleccione --"}),r.jsx("option",{value:"B01",children:"Crdito Fiscal (B01)"}),r.jsx("option",{value:"B02",children:"Consumidor Final (B02)"}),r.jsx("option",{value:"B11",children:"Proveedor Informal (B11)"}),r.jsx("option",{value:"B13",children:"Gastos Menores (B13)"}),r.jsx("option",{value:"B14",children:"Rgimen Especial (B14)"}),r.jsx("option",{value:"B15",children:"Gubernamental (B15)"})]})}),r.jsx(Bn,{label:"Balance Consolidado (RD$)",children:r.jsx(ge,{placeholder:"0.00",className:"text-right text-red-600 font-bold border-gray-200",readOnly:!0})}),r.jsx(Bn,{label:"Activo",children:r.jsx("div",{className:"flex items-center pt-2",children:r.jsx("input",{type:"checkbox",checked:_,onChange:B=>z(B.target.checked),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"})})})]}),r.jsxs(I0,{title:"Direccin y Contacto",defaultExpanded:!0,children:[r.jsx(Bn,{label:"Direccin",children:r.jsx(ge,{value:N,onChange:B=>k(B.target.value),placeholder:"Calle, Nave, Local..."})}),r.jsx(Bn,{label:"Ciudad",children:r.jsx(ge,{placeholder:"Santo Domingo"})}),r.jsx(Bn,{label:"Pas/Regin",children:r.jsx("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:r.jsx("option",{children:"Repblica Dominicana"})})}),r.jsx("div",{className:"col-span-1 md:col-span-2 lg:col-span-3 h-px bg-gray-100 my-2"}),r.jsx(Bn,{label:"Telfono",children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:r.jsx(nL,{size:14})}),r.jsx(ge,{value:D,onChange:B=>E(B.target.value),placeholder:"(809) 000-0000",className:"rounded-l-none"})]})}),r.jsx(Bn,{label:"Correo Electrnico",children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:r.jsx(YD,{size:14})}),r.jsx(ge,{type:"email",value:P,onChange:B=>C(B.target.value),placeholder:"proveedor@empresa.com",className:"rounded-l-none text-blue-600 underline"})]})}),r.jsx(Bn,{label:"Sitio Web",children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:r.jsx(G6,{size:14})}),r.jsx(ge,{placeholder:"www.proveedor.com",className:"rounded-l-none text-blue-600"})]})}),r.jsx(Bn,{label:"Contacto Principal",children:r.jsx(ge,{value:O,onChange:B=>A(B.target.value),placeholder:"Nombre del contacto"})})]}),a&&a.habilitarPagoRecurrente&&r.jsxs(I0,{title:"Pagos y Facturacin",children:[r.jsx("div",{className:"col-span-1 md:col-span-3 mb-2",children:r.jsx("div",{className:"bg-orange-50 border-l-4 border-hd-orange p-3",children:r.jsxs("p",{className:"text-sm text-orange-700",children:[r.jsx("strong",{children:"Nota:"})," Este proveedor est habilitado para pagos configurables."]})})}),r.jsx(Bn,{label:"Frecuencia de Pago",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange",value:o,onChange:B=>l(B.target.value),children:[r.jsx("option",{value:"N/A",children:"Sin Automatizacin"}),a.habilitarFrecuenciaSemanal&&r.jsx("option",{value:"Semanal",children:"Semanal"}),a.habilitarFrecuenciaQuincenal&&r.jsx("option",{value:"Quincenal",children:"Quincenal"}),a.habilitarFrecuenciaMensual&&r.jsx("option",{value:"Mensual",children:"Mensual"}),a.habilitarFechasEspecificas&&r.jsx("option",{value:"FechasEspecificas",children:"Fechas Especficas"})]})}),o!=="N/A"&&r.jsx(Bn,{label:o==="FechasEspecificas"?"Das de Pago (ej: 5, 20)":"Da Preferido",children:r.jsx(ge,{value:c,onChange:B=>f(B.target.value),placeholder:o==="Semanal"?"Ej: Viernes":"Ej: 15 y 30"})})]})]})]})},Rs="http://localhost:5006/api",yL=async e=>{const t=await fetch("".concat(Rs,"/Articulos"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error("Failed to save article: ".concat(t.status," ").concat(n))}return t.json()},bL=async(e,t)=>{const n=await fetch("".concat(Rs,"/Articulos/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const a=await n.text();throw new Error("Failed to update article: ".concat(n.status," ").concat(a))}return n.status===204?null:n.json()},jL=async e=>{const t=await fetch("".concat(Rs,"/Articulos/").concat(e),{method:"DELETE"});if(!t.ok){const n=await t.text();throw new Error("Failed to delete article: ".concat(t.status," ").concat(n))}return!0},tO=async e=>{const t=await fetch("".concat(Rs,"/Articulos/").concat(e));if(!t.ok)throw new Error("Failed to get article: ".concat(t.status));return t.json()},dl=async()=>{const e=await fetch("".concat(Rs,"/Articulos"));if(!e.ok)throw new Error("Failed to get articles: ".concat(e.status));return e.json()},rO=async e=>{const t=await fetch("".concat(Rs,"/Articulos/").concat(e,"/Precios"));if(!t.ok)throw new Error("Failed to load prices");return t.json()},wL=async()=>{const e=await fetch("".concat(Rs,"/Articulos/NavigationList"));if(!e.ok)throw new Error("Failed to load navigation list");return e.json()},NL=async(e,t)=>{const n=t?"?almacenId=".concat(t):"",a=await fetch("".concat(Rs,"/Articulos/").concat(e,"/Stock").concat(n));if(!a.ok)throw new Error("Failed to load stock");return a.json()},SL=async e=>{const t=await fetch("".concat(Rs,"/Articulos/").concat(e,"/StockBreakdown"));if(!t.ok)throw new Error("Failed to load stock breakdown");return t.json()},CL=async e=>{const t=new FormData;t.append("file",e);const n=await fetch("".concat(Rs,"/Upload/ProductImage"),{method:"POST",body:t});if(!n.ok){const a=await n.text();throw new Error("Failed to upload image: ".concat(n.status," ").concat(a))}return n.json()},ym="http://localhost:5006/api",qa=async()=>{const e=await fetch("".concat(ym,"/Almacenes"));if(!e.ok)throw new Error("Error al cargar almacenes");return e.json()},nO=async e=>{const t=!!e.id,n=t?"".concat(ym,"/Almacenes/").concat(e.id):"".concat(ym,"/Almacenes"),s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar almacn");return s.json()},kL=async e=>{const t=await fetch("".concat(ym,"/Almacenes/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar almacn");return t.ok},Gu="http://localhost:5006/api",aO=async()=>{const e=await fetch("".concat(Gu,"/ArticuloConfiguration"));if(!e.ok)throw new Error("Failed to load configuration");return e.json()},PL=async e=>{const t=await fetch("".concat(Gu,"/ArticuloConfiguration"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to save configuration");return t.json()},Pj=async()=>{const e=await fetch("".concat(Gu,"/ArticuloConfiguration/SecuenciasPorGrupo"));if(!e.ok)throw new Error("Failed to load sequences");return e.json()},EL=async e=>{console.log("Saving sequences payload:",e);const t=await fetch("".concat(Gu,"/ArticuloConfiguration/SecuenciasPorGrupo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw console.error("Failed to save sequences:",n),new Error("Failed to save sequences: ".concat(t.status," ").concat(n))}return t.json()},UC=async e=>{const t=await fetch("".concat(Gu,"/ArticuloConfiguration/GenerarNumeroArticulo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grupoProducto:e})});if(!t.ok){const n=await t.text();throw console.error("Failed to generate article number:",n),new Error("Failed to generate article number: ".concat(t.status," ").concat(n))}return t.json()},ui=({open:e,onOpenChange:t,children:n,className:a="max-w-3xl"})=>e?r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>t(!1)}),r.jsx("div",{className:"relative z-[101] w-full bg-white rounded-lg shadow-2xl animate-in fade-in zoom-in duration-200 overflow-hidden ".concat(a),children:n})]}):null,fi=({children:e,className:t=""})=>r.jsx("div",{className:"p-6 ".concat(t),children:e}),VC=({children:e,className:t=""})=>r.jsx("div",{className:"flex flex-col space-y-1.5 text-center sm:text-left ".concat(t),children:e}),Yy=({children:e,className:t=""})=>r.jsx("h2",{className:"text-lg font-semibold leading-none tracking-tight text-gray-900 ".concat(t),children:e}),AL=({children:e,className:t=""})=>r.jsx("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6 ".concat(t),children:e}),IL=()=>{const e=$t(),[t,n]=x.useState(""),[a,s]=x.useState({key:null,direction:"asc"}),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(""),[m,p]=x.useState(!0),[v,j]=x.useState([]),[y,b]=x.useState(null),[N,k]=x.useState(0),[D,E]=x.useState(1),[P,C]=x.useState(!1),[O,A]=x.useState(!1);x.useEffect(()=>{(async()=>{try{p(!0);const B=(await Pj()).filter(L=>L.activo),U=B.map(L=>L.grupo);f(U);const $=B.find(L=>L.esDefecto);$&&u($.grupo);const V=(await dl()).map(L=>({id:L.id,codigo:L.numeroArticulo,descripcion:L.descripcion,categoria:L.categoria||L.grupoProducto||"Sin Categora",grupo:L.grupoProducto,precio:L.precioUnitario,stock:L.stockActual||0,estado:L.bloqueado?"Inactivo":"Activo"}));l(V);const F=await qa();j(F),F.length>0&&E(F[0].id)}catch(Z){console.error("Error loading products:",Z)}finally{p(!1)}})()},[]);const _=async()=>{try{if(A(!0),(await fetch("http://localhost:5006/api/Articulos/".concat(y.id,"/QuickStock"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cantidad:parseFloat(N),almacenId:D})})).ok){const Z=await dl();l(Z.map(B=>({id:B.id,codigo:B.numeroArticulo,descripcion:B.descripcion,categoria:B.categoria||B.grupoProducto||"Sin Categora",grupo:B.grupoProducto,precio:B.precioUnitario,stock:B.stockActual||0,estado:B.bloqueado?"Inactivo":"Activo"}))),C(!1)}else alert("Error al actualizar inventario")}catch(W){console.error(W)}finally{A(!1)}},z=async W=>{if(window.confirm("Est seguro que desea eliminar este artculo?"))try{await jL(W),l(Z=>Z.filter(B=>B.id!==W))}catch(Z){console.error("Error deleting article:",Z),alert("Error al eliminar el artculo")}},G=W=>{let Z="asc";a.key===W&&a.direction==="asc"&&(Z="desc"),s({key:W,direction:Z})},T=x.useMemo(()=>{let W=[...o];return h&&(W=W.filter(Z=>Z.grupo===h)),t&&(W=W.filter(Z=>Z.descripcion.toLowerCase().includes(t.toLowerCase())||Z.codigo.toLowerCase().includes(t.toLowerCase()))),a.key&&W.sort((Z,B)=>{const U=Z[a.key]?Z[a.key].toString().toLowerCase():"",$=B[a.key]?B[a.key].toString().toLowerCase():"";return U<$?a.direction==="asc"?-1:1:U>$?a.direction==="asc"?1:-1:0}),W},[o,t,a,h]),M=W=>a.key!==W?r.jsx(Yr,{size:14,className:"opacity-30"}):a.direction==="asc"?r.jsx(Gn,{size:14,className:"text-hd-orange"}):r.jsx(Jr,{size:14,className:"text-hd-orange"});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Catlogo de Productos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin maestra de inventario y servicios."})]}),r.jsxs(re,{onClick:()=>e("/productos/nuevo"),className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Producto"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-2",children:r.jsxs(We,{className:"p-4 flex items-center space-x-4 bg-orange-50 border-orange-100",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full text-orange-600",children:r.jsx(Rn,{size:24})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Items"}),r.jsx("div",{className:"text-2xl font-bold text-gray-800",children:o.length})]})]})}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 pb-4",children:[r.jsx(bt,{children:"Lista de Artculos"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[r.jsxs("select",{className:"h-10 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange w-full sm:w-48",value:h,onChange:W=>u(W.target.value),children:[r.jsx("option",{value:"",children:"Todos los Grupos"}),c.map(W=>r.jsx("option",{value:W,children:W},W))]}),r.jsxs("div",{className:"relative w-full sm:w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar por cdigo o nombre...",className:"pl-9",value:t,onChange:W=>n(W.target.value)})]})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-100/90 border-b-2 border-gray-200",children:r.jsxs(Te,{children:[r.jsx(le,{onClick:()=>G("codigo"),className:"w-[120px] font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"No. Artculo"}),M("codigo")]})}),r.jsx(le,{onClick:()=>G("descripcion"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Descripcin"}),M("descripcion")]})}),r.jsx(le,{onClick:()=>G("categoria"),className:"hidden md:table-cell font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Categora/Grupo"}),M("categoria")]})}),r.jsx(le,{onClick:()=>G("precio"),className:"text-right font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("span",{children:"Precio Unitario"}),M("precio")]})}),r.jsx(le,{onClick:()=>G("stock"),className:"text-right font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("span",{children:"Stock"}),M("stock")]})}),r.jsx(le,{className:"font-bold text-gray-700 select-none",children:r.jsx("span",{children:"Estado"})}),r.jsx(le,{className:"text-right font-bold text-gray-700",children:"Acciones"})]})}),r.jsx(Vt,{children:m?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Cargando..."})}):T.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No se encontraron artculos"})}):T.map(W=>r.jsxs(Te,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[r.jsx(H,{className:"font-medium text-gray-900",children:W.codigo}),r.jsx(H,{children:r.jsx("div",{className:"font-medium text-gray-800",children:W.descripcion})}),r.jsx(H,{className:"hidden md:table-cell text-gray-600",children:W.categoria}),r.jsxs(H,{className:"text-right font-medium text-gray-900",children:["$",W.precio.toFixed(2)]}),r.jsx(H,{className:"text-right font-bold text-hd-orange",children:W.stock}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(W.estado==="Activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:W.estado})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",title:"Ajuste Manual (Correccin)",children:r.jsx(Lt,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/inventario/historial/".concat(W.id)),className:"h-10 w-10 p-2 rounded-full text-indigo-600 hover:text-indigo-800 hover:bg-indigo-100 transition-all border border-transparent hover:border-indigo-200 shadow-sm",title:"Historial de Movimientos",children:r.jsx(W6,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/productos/editar/".concat(W.id)),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(zc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>z(W.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(rr,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},W.id))})]})})]}),r.jsx(ui,{open:P,onOpenChange:C,children:r.jsxs(fi,{className:"max-w-md bg-white p-0 overflow-hidden border-none shadow-2xl",children:[r.jsxs("div",{className:"bg-hd-black p-6 text-white flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-hd-orange rounded-lg",children:r.jsx(iL,{className:"text-white",size:20})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black italic tracking-tighter",children:"AJUSTE MANUAL"}),r.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Correccin de Stock"})]})]}),r.jsx(re,{variant:"ghost",onClick:()=>C(!1),className:"text-white hover:bg-white/10",children:r.jsx(Tt,{})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:r.jsx("div",{className:"flex",children:r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm text-yellow-700",children:[r.jsx("span",{className:"font-bold",children:"Nota:"})," Este botn debe usarse solo para correcciones rpidas (ej. conteo fsico, mermas encontradas al momento)."]}),r.jsxs("p",{className:"text-sm text-yellow-700 mt-2",children:["Para ingresar mercanca de proveedores, por favor sigue usando el mdulo de ",r.jsx("span",{className:"font-bold",children:"Compras -> Recepcin"}),', el cual s genera las "Entradas de Inventario" formales.']})]})})}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Artculo Seleccionado"}),r.jsx("p",{className:"font-bold text-gray-800",children:y==null?void 0:y.descripcion}),r.jsx("p",{className:"text-xs text-hd-orange font-bold uppercase",children:y==null?void 0:y.codigo})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1",children:"Almacn de Destino"}),r.jsx("select",{className:"w-full h-12 px-4 rounded-xl border-2 border-gray-100 bg-gray-50 font-bold text-gray-700 focus:border-hd-orange transition-all outline-none appearance-none",value:D,onChange:W=>E(parseInt(W.target.value)),children:v.map(W=>r.jsx("option",{value:W.id,children:W.nombre},W.id))})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1",children:"Cantidad a Ajustar"}),r.jsxs("div",{className:"relative",children:[r.jsx(ge,{type:"number",autoFocus:!0,className:"h-14 text-2xl font-black text-right pr-4 focus:ring-hd-orange border-2 rounded-xl",value:N,onChange:W=>k(W.target.value)}),r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300 font-black italic text-xl",children:"QTY"})]})]})]}),r.jsx(re,{className:"w-full h-14 bg-hd-orange hover:bg-orange-600 text-white font-black uppercase tracking-widest shadow-xl shadow-orange-500/20 rounded-xl transition-all active:scale-[0.98]",onClick:_,disabled:O||!N||N==0,children:O?r.jsx(Fn,{className:"animate-spin"}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Tp,{})," REGISTRAR AJUSTE"]})})]})]})})]})},Ej=x.createContext({}),sO=({defaultValue:e,children:t,className:n=""})=>{const[a,s]=x.useState(e);return r.jsx(Ej.Provider,{value:{activeTab:a,setActiveTab:s},children:r.jsx("div",{className:"w-full ".concat(n),children:t})})},oO=({children:e,className:t=""})=>r.jsx("div",{className:"inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ".concat(t),children:e}),bm=({value:e,children:t,className:n=""})=>{const{activeTab:a,setActiveTab:s}=x.useContext(Ej),o=a===e;return r.jsx("button",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 \n            ".concat(o?"bg-white text-gray-950 shadow-sm":"hover:bg-gray-200/50 hover:text-gray-900"," ").concat(n),onClick:()=>s(e),children:t})},jm=({value:e,children:t,className:n=""})=>{const{activeTab:a}=x.useContext(Ej);return a!==e?null:r.jsx("div",{className:"mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 ".concat(n),children:t})},Xy=({isOpen:e,onClose:t,onSave:n,title:a,fields:s})=>{const[o,l]=x.useState({});if(!e)return null;const c=()=>{n(o),l({}),t()},f=(h,u)=>{l(m=>({...m,[h]:u}))};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:a}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Tt,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6 space-y-4",children:s.map(h=>{var u;return r.jsx("div",{children:h.type==="select"?r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:h.label}),r.jsxs("select",{value:o[h.name]||"",onChange:m=>f(h.name,m.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),(u=h.options)==null?void 0:u.map(m=>r.jsx("option",{value:m.value,children:m.label},m.value))]})]}):r.jsx(ge,{label:h.label,placeholder:h.placeholder,value:o[h.name]||"",onChange:m=>f(h.name,m.target.value),type:h.type||"text"})},h.name)})}),r.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[r.jsx(re,{variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{onClick:c,className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})})},Ko=({onClick:e})=>r.jsx("button",{type:"button",onClick:e,className:"ml-2 inline-flex items-center justify-center h-10 w-10 rounded-md border border-gray-300 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-hd-orange transition-colors",title:"Agregar nuevo",children:r.jsx(Lt,{className:"h-4 w-4 text-gray-600"})}),$p="http://localhost:5006/api",vo=async()=>{const e=await fetch("".concat($p,"/UnidadMedida/Planes"));if(!e.ok)throw new Error("Error getting plans");return e.json()},DL=async e=>{const t=await fetch("".concat($p,"/UnidadMedida/Planes/").concat(e));if(!t.ok)throw new Error("Error getting plan");return t.json()},OL=async e=>{const t=await fetch("".concat($p,"/UnidadMedida/Planes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error saving plan");return t.json()},ML=async e=>{const t=await fetch("".concat($p,"/UnidadMedida/Planes/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error deleting plan");return t.json()},Ga="http://localhost:5006/api",wm=async()=>{const e=await fetch("".concat(Ga,"/Categorias"));if(!e.ok)throw new Error("Error al cargar categoras");return e.json()},iO=async e=>{const t=!!e.id,n=t?"".concat(Ga,"/Categorias/").concat(e.id):"".concat(Ga,"/Categorias"),s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar categora");return s.json()},TL=async e=>{const t=await fetch("".concat(Ga,"/Categorias/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar categora");return t.ok},Jy=async()=>{const e=await fetch("".concat(Ga,"/Marcas"));if(!e.ok)throw new Error("Error al cargar marcas");return e.json()},lO=async e=>{const t=!!e.id,n=t?"".concat(Ga,"/Marcas/").concat(e.id):"".concat(Ga,"/Marcas"),s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar marca");return s.json()},_L=async e=>{const t=await fetch("".concat(Ga,"/Marcas/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar marca");return t.ok},Qy=async()=>{const e=await fetch("".concat(Ga,"/Tipos"));if(!e.ok)throw new Error("Error al cargar tipos");return e.json()},cO=async e=>{const t=!!e.id,n=t?"".concat(Ga,"/Tipos/").concat(e.id):"".concat(Ga,"/Tipos"),s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar tipo");return s.json()},RL=async e=>{const t=await fetch("".concat(Ga,"/Tipos/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar tipo");return t.ok},Nm="http://localhost:5006/api",Zy=async()=>{const e=await fetch("".concat(Nm,"/GruposImpuestos"));if(!e.ok)throw new Error("Error al cargar grupos de impuestos");return e.json()},dO=async e=>{const t=!!e.id,n=t?"".concat(Nm,"/GruposImpuestos/").concat(e.id):"".concat(Nm,"/GruposImpuestos"),s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar grupo de impuestos");return s.json()},$L=async e=>{const t=await fetch("".concat(Nm,"/GruposImpuestos/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar grupo de impuestos");return t.ok},Sm="http://localhost:5006/api",Cm=async()=>{try{const e=await fetch("".concat(Sm,"/GruposProducto"));if(!e.ok)throw new Error("Error fetching product groups");return await e.json()}catch(e){throw console.error("Error fetching product groups:",e),e}},uO=async e=>{try{const t=e.id?"PUT":"POST",n=e.id?"".concat(Sm,"/GruposProducto/").concat(e.id):"".concat(Sm,"/GruposProducto"),a=await fetch(n,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("Error saving product group");return await a.json()}catch(t){throw console.error("Error saving product group:",t),t}},FL=async e=>{try{const t=await fetch("".concat(Sm,"/GruposProducto/").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Error deleting product group");return await t.json()}catch(t){throw console.error("Error deleting product group:",t),t}},am=({isOpen:e,onClose:t,onSave:n,title:a,type:s,initialData:o,error:l})=>{const[c,f]=x.useState({codigo:"",nombre:"",descripcion:"",activo:!0}),[h,u]=x.useState("");x.useEffect(()=>{e&&(f(o||{codigo:"",nombre:"",descripcion:"",activo:!0}),u(""))},[e,o]);const m=async p=>{p.preventDefault();try{await n(c)}catch(v){console.error(v),u("Error al guardar ".concat(a))}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[c.id?"Editar":"Nueva"," ",a]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tt,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[(h||l)&&r.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm",children:h||l}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsx(ge,{value:c.codigo,onChange:p=>f({...c,codigo:p.target.value}),placeholder:"EJ: COD-01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ge,{value:c.nombre,onChange:p=>f({...c,nombre:p.target.value}),placeholder:"Nombre de ".concat(a),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),r.jsx(ge,{value:c.descripcion||"",onChange:p=>f({...c,descripcion:p.target.value}),placeholder:"Breve descripcin"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:c.activo,onChange:p=>f({...c,activo:p.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})]})}):null},fO=({isOpen:e,onClose:t,onSave:n,initialData:a,error:s})=>{const[o,l]=x.useState({codigo:"",nombre:"",direccion:"",ciudad:"",activo:!0}),[c,f]=x.useState("");x.useEffect(()=>{e&&(l(a||{codigo:"",nombre:"",direccion:"",ciudad:"",activo:!0}),f(""))},[e,a]);const h=async u=>{u.preventDefault();try{await n(o)}catch(m){console.error(m),f("Error al guardar Almacn")}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[o.id?"Editar":"Nuevo"," Almacn"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tt,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[(c||s)&&r.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm",children:c||s}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsx(ge,{value:o.codigo,onChange:u=>l({...o,codigo:u.target.value}),placeholder:"EJ: ALM-01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ge,{value:o.nombre,onChange:u=>l({...o,nombre:u.target.value}),placeholder:"Nombre del Almacn",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin"}),r.jsx(ge,{value:o.direccion||"",onChange:u=>l({...o,direccion:u.target.value}),placeholder:"Direccin fsica"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),r.jsx(ge,{value:o.ciudad||"",onChange:u=>l({...o,ciudad:u.target.value}),placeholder:"Ciudad"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:o.activo,onChange:u=>l({...o,activo:u.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})]})}):null},hO=({isOpen:e,onClose:t,onSave:n,initialData:a,error:s})=>{const[o,l]=x.useState({codigo:"",nombre:"",descripcion:"",tasa:0,activo:!0}),[c,f]=x.useState("");x.useEffect(()=>{e&&(l(a||{codigo:"",nombre:"",descripcion:"",tasa:0,activo:!0}),f(""))},[e,a]);const h=async u=>{u.preventDefault();try{await n(o)}catch(m){console.error(m),f("Error al guardar")}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[o.id?"Editar":"Nuevo"," Grupo de Impuestos"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tt,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[(c||s)&&r.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm",children:c||s}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsx(ge,{value:o.codigo,onChange:u=>l({...o,codigo:u.target.value}),placeholder:"EJ: ITBIS18",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ge,{value:o.nombre,onChange:u=>l({...o,nombre:u.target.value}),placeholder:"ITBIS 18%",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa (%)"}),r.jsx(ge,{type:"number",step:"0.01",value:o.tasa,onChange:u=>l({...o,tasa:parseFloat(u.target.value)||0}),placeholder:"18.00",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),r.jsx(ge,{value:o.descripcion||"",onChange:u=>l({...o,descripcion:u.target.value}),placeholder:"Descripcin opcional"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:o.activo,onChange:u=>l({...o,activo:u.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})]})}):null},mO=({isOpen:e,onClose:t,onSave:n,grupo:a})=>{const[s,o]=x.useState({codigo:"",nombre:"",descripcion:"",activo:!0});x.useEffect(()=>{o(a||{codigo:"",nombre:"",descripcion:"",activo:!0})},[a,e]);const l=c=>{c.preventDefault(),n(s)};return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-hd-orange p-4 flex justify-between items-center text-white",children:[r.jsx("h2",{className:"text-lg font-bold",children:a?"Editar Grupo":"Nuevo Grupo"}),r.jsx("button",{onClick:t,className:"hover:bg-orange-700 p-1 rounded transition-colors",children:r.jsx(Tt,{size:20})})]}),r.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Cdigo"}),r.jsx(ge,{placeholder:"Ej: PROF",value:s.codigo,onChange:c=>o({...s,codigo:c.target.value.toUpperCase()}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Nombre"}),r.jsx(ge,{placeholder:"Ej: Profesional",value:s.nombre,onChange:c=>o({...s,nombre:c.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Descripcin"}),r.jsx(ge,{placeholder:"Opcional...",value:s.descripcion||"",onChange:c=>o({...s,descripcion:c.target.value})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Activo"}),r.jsx("input",{type:"checkbox",checked:s.activo,onChange:c=>o({...s,activo:c.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"})]}),r.jsxs("div",{className:"pt-4 flex justify-end space-x-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsx(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-700 text-white shadow-lg",children:a?"Actualizar":"Guardar"})]})]})]})}):null},qC=()=>{const e=$t(),{id:t}=xo(),n=!!t,[a,s]=x.useState(""),[o,l]=x.useState(""),[c,f]=x.useState(""),[h,u]=x.useState("UND"),[m,p]=x.useState(""),[v,j]=x.useState(""),[y,b]=x.useState(""),[N,k]=x.useState(""),[D,E]=x.useState(""),[P,C]=x.useState(""),[O,A]=x.useState(""),[_,z]=x.useState(""),[G,T]=x.useState(""),[M,W]=x.useState(""),[Z,B]=x.useState("Promedio"),[U,$]=x.useState(""),[K,V]=x.useState(""),[F,L]=x.useState([]),[X,Y]=x.useState(""),[me,xe]=x.useState(""),[Pe,Ge]=x.useState([]),[he,ie]=x.useState(""),[Ce,se]=x.useState(!1),[oe,Fe]=x.useState([{id:1,codigo:"MAT-001",descripcion:"Cemento Portland Tipo I, 42.5 kg",cantidad:8.5,unidad:"SACO",desperdicio:3,precio:285},{id:2,codigo:"MAT-002",descripcion:"Arena gruesa lavada, puesto en obra",cantidad:.52,unidad:"M3",desperdicio:5,precio:450},{id:3,codigo:"MAT-003",descripcion:'Grava triturada 3/4", puesto en obra',cantidad:.73,unidad:"M3",desperdicio:5,precio:520}]),ze=async()=>{if(!cd||!a){alert("Por favor complete los campos obligatorios (Nmero de Artculo, Descripcin)");return}const ue={NumeroArticulo:cd,CodigoBarras:o,Descripcion:a,GrupoProducto:dd,Categoria:c,Marca:m,Tipo:v,UnidadMedida:h,AlmacenPrincipal:Ci,UbicacionAlmacen:y,GrupoImpuesto:Ni,MargenPorcentaje:parseFloat(N)||0,CostoUnitario:parseFloat(D)||0,PrecioUnitario:parseFloat(P)||0,NivelPrecio:O,StockSeguridad:parseFloat(_)||0,PuntoPedido:parseFloat(G)||0,ProveedorPrincipal:M,Bloqueado:!1,MetodoCosteo:Z,CostoEstandar:parseFloat(U)||0,PlanMedida:X,ImagenUrl:he};try{if(n){await bL(parseInt(t),{...ue,Id:parseInt(t)});const je=document.getElementById("header-message");je&&(je.innerHTML='<div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-2 rounded flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Artculo actualizado correctamente</div>',setTimeout(()=>je.innerHTML="",3e3))}else{await yL(ue);const je=document.getElementById("header-message");je&&(je.innerHTML='<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Artculo guardado correctamente</div>',setTimeout(()=>je.innerHTML="",3e3))}}catch(je){console.error("Error saving Article:",je),alert("Error al guardar el artculo: "+je.message)}},[De,Ue]=x.useState([{id:1,codigo:"EQ-101",descripcion:"Mezcladora de concreto 9 p3 (7HP)",cantidad:1,unidad:"HM",rendimiento:.25,costoHora:185},{id:2,codigo:"EQ-102",descripcion:"Vibrador de concreto 4HP gasolina",cantidad:1,unidad:"HM",rendimiento:.2,costoHora:95}]),[Xe,Ze]=x.useState([{id:1,codigo:"MO-201",descripcion:"Oficial albail especializado",cantidad:1,unidad:"HH",salario:225},{id:2,codigo:"MO-202",descripcion:"Operario (fierrero)",cantidad:.5,unidad:"HH",salario:195},{id:3,codigo:"MO-203",descripcion:"Pen / Ayudante general",cantidad:2,unidad:"HH",salario:165}]),[J,fe]=x.useState({cargasSociales:85,seguros:12,herramientas:8,financiamiento:3,imprevistos:5,utilidad:15}),[pe,Ie]=x.useState([{concepto:"Supervisin tcnica",monto:285},{concepto:"Personal administrativo obra",monto:165},{concepto:"Instalaciones temporales",monto:125},{concepto:"Servicios (agua, luz temporal)",monto:95},{concepto:"Seguridad y vigilancia",monto:85}]),[Oe,_e]=x.useState([{concepto:"Direccin y gerencia",monto:425},{concepto:"Contabilidad y finanzas",monto:195},{concepto:"Alquiler oficina central",monto:285},{concepto:"Servicios bsicos oficina",monto:125},{concepto:"Depreciacin equipos",monto:95}]),Re=ue=>ue.cantidad*ue.precio*(1+ue.desperdicio/100),ee=oe.reduce((ue,je)=>ue+Re(je),0),ye=ue=>ue.cantidad*ue.rendimiento*ue.costoHora,Me=De.reduce((ue,je)=>ue+ye(je),0),ne=Xe.reduce((ue,je)=>ue+je.cantidad*je.salario,0),q=ne*(J.cargasSociales/100),Q=ne*(J.seguros/100),ve=ne*(J.herramientas/100),be=ne+q+Q+ve,Le=ee+Me+be,Qe=pe.reduce((ue,je)=>ue+je.monto,0),tt=Oe.reduce((ue,je)=>ue+je.monto,0),ct=Qe+tt,Ft=Le+ct,Dt=Ft*(J.financiamiento/100),Et=Ft*(J.imprevistos/100),qt=Ft+Dt+Et,dt=qt*(J.utilidad/100),wr=qt+dt,er=()=>{const ue=Math.max(...oe.map(je=>je.id),0)+1;Fe([...oe,{id:ue,codigo:"MAT-".concat(String(ue).padStart(3,"0")),descripcion:"",cantidad:0,unidad:"UND",desperdicio:0,precio:0}])},la=ue=>{Fe(oe.filter(je=>je.id!==ue))},kn=(ue,je,xt)=>{Fe(oe.map(Ct=>Ct.id===ue?{...Ct,[je]:xt}:Ct))},bi=()=>{const ue=Math.max(...De.map(je=>je.id),0)+1;Ue([...De,{id:ue,codigo:"EQ-".concat(String(ue).padStart(3,"0")),descripcion:"",cantidad:0,unidad:"HM",rendimiento:0,costoHora:0}])},kl=ue=>{Ue(De.filter(je=>je.id!==ue))},Pn=(ue,je,xt)=>{Ue(De.map(Ct=>Ct.id===ue?{...Ct,[je]:xt}:Ct))},Po=()=>{const ue=Math.max(...Xe.map(je=>je.id),0)+1;Ze([...Xe,{id:ue,codigo:"MO-".concat(String(ue).padStart(3,"0")),descripcion:"",cantidad:0,unidad:"HH",salario:0}])},gs=ue=>{Ze(Xe.filter(je=>je.id!==ue))},ae=(ue,je,xt)=>{Ze(Xe.map(Ct=>Ct.id===ue?{...Ct,[je]:xt}:Ct))},[Ae,Se]=x.useState(!1),[$e,jt]=x.useState(!1),[St,yt]=x.useState(!1),[ft,$r]=x.useState(!1),[Pl,ji]=x.useState(!1),[El,Al]=x.useState(!1),[jf,Il]=x.useState(!1),[wf,nd]=x.useState(!1),[ad,Nr]=x.useState(!0),[sd,od]=x.useState(!0),[Nf,wi]=x.useState([]),[qg,id]=x.useState([]),[Ni,Kn]=x.useState(""),[Gg,Yn]=x.useState([]),[Hg,Sf]=x.useState([]),[Wg,Si]=x.useState([]),[Ci,$s]=x.useState(""),[Dl,ld]=x.useState(["Sin Grupo"]),[cd,xs]=x.useState(""),[dd,Eo]=x.useState("Sin Grupo"),[ki,Kg]=x.useState([]);x.useEffect(()=>{(async()=>{try{const je=await vo();L(je);const[xt,Ct,Aa,Ai,Fs,wt,Ii]=await Promise.all([wm(),Jy(),Qy(),qa(),Zy(),Cc(),Cm()]);wi(xt),Yn(Ct),Sf(Aa),Si(Ai),id(Fs),ud(wt.map(nr=>nr.nombre));const da=(Ii||[]).map(nr=>nr.nombre);da.includes("Sin Grupo")||da.unshift("Sin Grupo"),ld(da);let En={};try{En=await aO()}catch(nr){console.error("Error loading config",nr)}if(En.planDefecto){Y(En.planDefecto);const nr=je.find(tn=>tn.planId===En.planDefecto);nr&&(xe(nr.unidadBase),u(En.unidadMedidaDefecto||nr.unidadBase))}const Ya=await Pj();Kg(Ya);const Ao=Ya.filter(nr=>nr.activo),Io=Ao.map(nr=>nr.grupo);if(Io.includes("Sin Grupo")||Io.unshift("Sin Grupo"),ld(Io),!n){const nr=Ao.find(tn=>tn.esDefecto);if(nr){if(Eo(nr.grupo),nr.planDefecto){Y(nr.planDefecto);const tn=je.find(Do=>Do.planId===nr.planDefecto);tn&&(xe(tn.unidadBase),u(nr.unidadMedidaDefecto||tn.unidadBase))}if(nr.grupo&&nr.grupo!=="Sin Grupo")try{const tn=await UC(nr.grupo);xs(tn.numeroArticulo)}catch(tn){console.error(tn)}else xs("(Auto)")}}}catch(je){console.error("Error loading initial data:",je)}})()},[]),x.useEffect(()=>{if(!n)return;(async()=>{var je,xt,Ct,Aa,Ai,Fs;try{const wt=await tO(t);xs(wt.numeroArticulo||wt.NumeroArticulo),l(wt.codigoBarras||wt.CodigoBarras||""),s(wt.descripcion||wt.Descripcion),Eo(wt.grupoProducto||wt.GrupoProducto||"Sin Grupo"),f(wt.categoria||wt.Categoria||""),p(wt.marca||wt.Marca||""),j(wt.tipo||wt.Tipo||""),u(wt.unidadMedida||wt.UnidadMedida||"UND"),$s(wt.almacenPrincipal||wt.AlmacenPrincipal||""),b(wt.ubicacionAlmacen||wt.UbicacionAlmacen||""),Kn(wt.grupoImpuesto||wt.GrupoImpuesto||"");const Ii=(je=wt.margenPorcentaje)!=null?je:wt.MargenPorcentaje;k((Ii==null?void 0:Ii.toString())||"");const ca=(xt=wt.costoUnitario)!=null?xt:wt.CostoUnitario;E((ca==null?void 0:ca.toString())||"");const da=(Ct=wt.precioUnitario)!=null?Ct:wt.PrecioUnitario;C((da==null?void 0:da.toString())||""),A(wt.nivelPrecio||wt.NivelPrecio||"");const En=(Aa=wt.stockSeguridad)!=null?Aa:wt.StockSeguridad;z((En==null?void 0:En.toString())||"");const Ya=(Ai=wt.puntoPedido)!=null?Ai:wt.PuntoPedido;T((Ya==null?void 0:Ya.toString())||""),W(wt.proveedorPrincipal||wt.ProveedorPrincipal||""),B(wt.metodoCosteo||wt.MetodoCosteo||"Promedio");const Ao=(Fs=wt.costoEstandar)!=null?Fs:wt.CostoEstandar,Io=(Ao==null?void 0:Ao.toString())||"",nr=(ca==null?void 0:ca.toString())||"";$(Io);const tn=wt.metodoCosteo||wt.MetodoCosteo||"Promedio";V(tn==="Estndar"?Io:nr);const Do=wt.planMedida||wt.PlanMedida;Do&&Y(Do);try{const Tl=await rO(t);Ge(Tl),ie(wt.imagenUrl||wt.ImagenUrl||"")}catch(Tl){console.error("Could not load prices:",Tl)}}catch(wt){console.error("Error loading article for edit:",wt),alert("Error al cargar el artculo para editar")}})()},[t,n]);const Ol=async ue=>{if(!ue||ue==="Sin Grupo"){xs("(Auto)");return}try{const je=await UC(ue);xs(je.numeroArticulo)}catch(je){console.error("Error generating article number:",je),xs("(Error al generar)")}},Jt=ue=>{const je=ue.target.value;Eo(je),n||Ol(je);const xt=ki.find(Ct=>Ct.grupo===je);if(xt&&xt.planDefecto){Y(xt.planDefecto);const Ct=F.find(Aa=>Aa.planId===xt.planDefecto);Ct&&(xe(Ct.unidadBase),u(xt.unidadMedidaDefecto||Ct.unidadBase))}},[Cf,ud]=x.useState([]),fd=async ue=>{try{await iO(ue);const je=await wm();wi(je),f(ue.nombre),Se(!1)}catch(je){console.error(je),alert("Error al guardar categora")}},kf=ue=>{console.log("Saving new unit:",ue)},Pf=async ue=>{try{await nO(ue);const je=await qa();Si(je),$s(ue.nombre),yt(!1)}catch(je){console.error(je),alert("Error al guardar almacn")}},Ef=async ue=>{try{await dO(ue);const je=await Zy();id(je),Kn(ue.codigo),$r(!1)}catch(je){console.error(je),alert("Error al guardar impuesto")}},hd=async ue=>{try{await lO(ue);const je=await Jy();Yn(je),p(ue.nombre),ji(!1)}catch(je){console.error(je),alert("Error al guardar marca")}},Ml=async ue=>{try{await cO(ue);const je=await Qy();Sf(je),j(ue.nombre),Al(!1)}catch(je){console.error(je),alert("Error al guardar tipo")}},vs=async ue=>{try{await uO(ue);const xt=(await Cm()).map(Ct=>Ct.nombre);xt.includes("Sin Grupo")||xt.unshift("Sin Grupo"),ld(xt),Eo(ue.nombre),Il(!1),n||Ol(ue.nombre)}catch(je){console.error(je),alert("Error al guardar grupo de producto")}},ys=async ue=>{try{await Cj(ue);const je=await Cc();ud(je.map(xt=>xt.nombre)),A(ue.nombre),nd(!1)}catch(je){console.error(je),alert("Error al guardar nivel de precio")}},bs=async ue=>{const je=ue.target.files[0];if(je){se(!0);try{const xt=await CL(je);ie(xt.url)}catch(xt){console.error("Error uploading image:",xt),alert("Error al subir la imagen: "+xt.message)}finally{se(!1)}}},Pi=()=>{ie("")},Ei="http://localhost:5006/api".replace("/api","")||"http://localhost:5006";return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/productos"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Artculo":"Maestro de Artculos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Creacin y configuracin de productos"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"outline",children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:ze,children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar Producto"]})]})]}),r.jsx("div",{id:"header-message"}),r.jsxs(sO,{defaultValue:"general",className:"w-full",children:[r.jsxs(oO,{className:"mb-4",children:[r.jsx(bm,{value:"general",children:"Informacin General"}),r.jsx(bm,{value:"costos",children:"Estructura de Costos"})]}),r.jsx(jm,{value:"general",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"md:col-span-3 space-y-6",children:[r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Generales"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(ge,{label:r.jsxs("span",{children:["No. Artculo ",r.jsx("span",{className:"text-red-500",children:"*"})]}),value:cd||"(Auto)",disabled:!0,title:"Nmero nico de identificacin del artculo. Generado automticamente segn el grupo de producto."}),r.jsx(ge,{label:"Cdigo de Barras",placeholder:"",title:"Cdigo EAN/UPC para escaneo en caja."}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Grupo de producto segn clasificacin comercial.",children:"Grupo de Producto"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("select",{value:dd,onChange:Jt,className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Grupo de producto segn clasificacin comercial. El nmero de artculo se generar automticamente segn la configuracin del grupo.",children:Dl.map((ue,je)=>r.jsx("option",{value:ue,children:ue},je))}),r.jsx(Ko,{onClick:()=>Il(!0)})]})]})]}),r.jsx(ge,{label:r.jsxs("span",{children:["Descripcin ",r.jsx("span",{className:"text-red-500",children:"*"})]}),value:a,onChange:ue=>s(ue.target.value),placeholder:"Descripcin del artculo...",title:"Nombre comercial o descripcin detallada del producto tal como aparecer en la factura."}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Agrupacin lgica para reportes y bsquedas.",children:"Categora Artculo"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:c,onChange:ue=>f(ue.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Agrupacin lgica para reportes y bsquedas.",children:[r.jsx("option",{value:"",children:"Seleccione Categora"}),Nf.map((ue,je)=>r.jsx("option",{value:ue.nombre,children:ue.nombre},je))]}),r.jsx(Ko,{onClick:()=>Se(!0)})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Marca del fabricante del producto.",children:"Marca"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:m,onChange:ue=>p(ue.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Marca del fabricante del producto.",children:[r.jsx("option",{value:"",children:"Seleccione Marca"}),Gg.map((ue,je)=>r.jsx("option",{value:ue.nombre,children:ue.nombre},je))]}),r.jsx(Ko,{onClick:()=>ji(!0)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Tipo de producto segn su funcionamiento.",children:"Tipo"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:v,onChange:ue=>j(ue.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Tipo de producto segn su funcionamiento.",children:[r.jsx("option",{value:"",children:"Seleccione Tipo"}),Hg.map((ue,je)=>r.jsx("option",{value:ue.nombre,children:ue.nombre},je))]}),r.jsx(Ko,{onClick:()=>Al(!0)})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Ubicacin fsica donde se almacena el artculo.",children:"Almacn"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:Ci,onChange:ue=>$s(ue.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Ubicacin fsica donde se almacena el artculo.",children:[r.jsx("option",{value:"",children:"Seleccione Almacn"}),Wg.map((ue,je)=>r.jsx("option",{value:ue.nombre,children:ue.nombre},je))]}),r.jsx(Ko,{onClick:()=>yt(!0)})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Ubicacin especfica dentro del almacn (pasillo, estante, nivel).",children:"Ubicacin en Almacn"}),r.jsx(ge,{value:y,onChange:ue=>b(ue.target.value),placeholder:"Ej: A-12-3",title:"Cdigo de ubicacin fsica: Pasillo-Estante-Nivel"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Grupo de impuestos aplicable al producto.",children:"Grupo Impto. Prod."}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:Ni,onChange:ue=>Kn(ue.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Grupo de impuestos aplicable al producto.",children:[r.jsx("option",{value:"",children:"Seleccione Impuesto"}),qg.map((ue,je)=>r.jsx("option",{value:ue.codigo,children:ue.nombre},je))]}),r.jsx(Ko,{onClick:()=>$r(!0)})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsx("div",{children:r.jsx(ge,{label:"Margen %",type:"number",placeholder:"0.00",step:"0.01",title:"Porcentaje de margen de ganancia sobre el costo (estilo SalePad)"})})})]})]}),r.jsxs(We,{children:[r.jsx(vt,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>Nr(!ad),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(bt,{children:"Facturacin"}),ad?r.jsx(kr,{className:"h-5 w-5 text-gray-500"}):r.jsx(ir,{className:"h-5 w-5 text-gray-500"})]})}),ad&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Plan de Unidad de Medida que define la unidad base y conversiones.",children:"Plan de U. de M."}),r.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",value:X,onChange:ue=>{const je=ue.target.value;Y(je);const xt=F.find(Ct=>Ct.planId===je);xt?(xe(xt.unidadBase),u(xt.unidadBase)):xe("")},children:[r.jsx("option",{value:"",children:"Seleccione Plan"}),F.map((ue,je)=>r.jsxs("option",{value:ue.planId,children:[ue.planId," - ",ue.descripcion]},je))]})}),me&&r.jsxs("div",{className:"flex items-center space-x-4 mt-2 px-1",children:[r.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:["Unidad Base: ",me]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"U.M. Def:"}),r.jsx("select",{className:"h-6 text-xs rounded border-gray-300 bg-white px-1 py-0 focus:ring-hd-orange",value:h,onChange:ue=>{const je=ue.target.value;if(u(je),O){const xt=Pe.find(Ct=>Ct.nivelPrecio===O&&Ct.unidadMedida===je);xt&&C(xt.precio.toFixed(2))}},children:(()=>{const ue=F.find(xt=>xt.planId===X);let je=ue?[ue.unidadBase,...ue.detalles?ue.detalles.map(xt=>xt.unidadMedida):[]]:[me];if(je=[...new Set(je)],O&&Pe&&Pe.length>0){const xt=Pe.filter(Ct=>(Ct.nivelPrecio||Ct.NivelPrecio)===O).map(Ct=>Ct.unidadMedida||Ct.UnidadMedida);xt.length>0&&(je=je.filter(Ct=>xt.includes(Ct)))}return je.map((xt,Ct)=>r.jsx("option",{value:xt,children:xt},Ct))})()})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Determina cmo se valora el inventario al salir.",children:"Mtodo de Costeo"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Determina cmo se valora el inventario al salir.",value:Z,onChange:ue=>{const je=ue.target.value;B(je),V(je==="Estndar"?U:D)},children:[r.jsx("option",{value:"Promedio",children:"Promedio"}),r.jsx("option",{value:"Estndar",children:"Estndar"}),r.jsx("option",{value:"FIFO",children:"FIFO"}),r.jsx("option",{value:"LIFO",children:"LIFO"})]})]}),r.jsx(ge,{label:"Costo Unitario",type:"number",placeholder:"0.00",title:"Costo directo de adquisicin o produccin por unidad.",value:K,onChange:ue=>{const je=ue.target.value;if(V(je),Z==="Estndar"?$(je):E(je),N&&je){const xt=parseFloat(je),Ct=parseFloat(N),Aa=xt*(1+Ct/100);C(Aa.toFixed(2))}}}),r.jsx(ge,{label:"Margen %",type:"number",placeholder:"0.00",title:"Porcentaje de ganancia sobre el costo.",value:N,onChange:ue=>{const je=ue.target.value;if(k(je),K&&je){const xt=parseFloat(K),Ct=parseFloat(je),Aa=xt*(1+Ct/100);C(Aa.toFixed(2))}}})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Nivel de precio asignado para venta rpida.",children:"Nivel de Precio"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:O,onChange:ue=>{const je=ue.target.value;A(je);const xt=Pe.find(Ct=>Ct.nivelPrecio===je&&Ct.unidadMedida===h);xt&&C(xt.precio.toFixed(2))},className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Nivel de precio asignado para venta rpida.",children:[r.jsx("option",{value:"",children:"Seleccione Nivel"}),Cf.map((ue,je)=>r.jsx("option",{value:ue,children:ue},je))]}),r.jsx(Ko,{onClick:()=>nd(!0)})]})]}),r.jsx(ge,{label:"Precio Unitario",type:"number",placeholder:"0.00",className:"font-bold text-green-700",title:"Precio de venta al pblico antes de descuentos.",value:P,onChange:ue=>C(ue.target.value)}),r.jsx("div",{})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Configuracin de impuestos aplicables al vender este artculo.",children:"Grupo Impto. Prod."}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Configuracin de impuestos aplicables al vender este artculo.",children:[r.jsx("option",{children:"ITBIS 18%"}),r.jsx("option",{children:"EXENTO"})]})]}),r.jsx("div",{className:"text-xs text-gray-500 pt-8 italic",children:"* El precio unitario incluye impuestos segn grupo."})]})]})]}),r.jsxs(We,{children:[r.jsx(vt,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>od(!sd),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(bt,{children:"Reposicin"}),sd?r.jsx(kr,{className:"h-5 w-5 text-gray-500"}):r.jsx(ir,{className:"h-5 w-5 text-gray-500"})]})}),sd&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Cmo se reabastece este artculo habitualmente.",children:"Sistema Reposicin"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Cmo se reabastece este artculo habitualmente.",children:[r.jsx("option",{children:"Compra"}),r.jsx("option",{children:"Prod. Orden"})]})]}),r.jsx(ge,{label:"Stock Seguridad",type:"number",placeholder:"0",title:"Cantidad mnima a mantener para evitar quiebres de stock."}),r.jsx(ge,{label:"Punto de Pedido",type:"number",placeholder:"0",title:"Nivel de inventario que dispara una alerta de reorden."})]}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.jsx(ge,{label:"Proveedor Principal",placeholder:"Seleccionar...",title:"Proveedor predeterminado para generar rdenes de compra."})})]})]})]}),r.jsx("div",{className:"md:col-span-1 space-y-6",children:r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Imagen del Producto"})}),r.jsxs("div",{className:"p-6 flex flex-col items-center justify-center space-y-4",children:[r.jsxs("div",{className:"relative w-full aspect-square bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden transition-colors ".concat(!he&&"hover:bg-gray-50 cursor-pointer"),onClick:()=>!he&&document.getElementById("imageInput").click(),children:[he?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:"".concat(Ei).concat(he),alt:"Producto",className:"w-full h-full object-cover"}),r.jsx("button",{onClick:ue=>{ue.stopPropagation(),Pi()},className:"absolute top-2 right-2 p-1 bg-white rounded-full shadow-md text-red-500 hover:bg-red-50 transition-colors",children:r.jsx(Tt,{className:"h-4 w-4"})})]}):r.jsx("div",{className:"text-center p-4",children:Ce?r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-hd-orange mx-auto"}):r.jsxs(r.Fragment,{children:[r.jsx(ZD,{className:"mx-auto h-8 w-8 text-gray-400"}),r.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-600",children:"Subir foto"})]})}),r.jsx("input",{type:"file",id:"imageInput",className:"hidden",accept:"image/*",onChange:bs})]}),r.jsx("div",{className:"w-full text-xs text-center text-gray-500 italic",children:"Formatos soportados: JPG, PNG. Mx 5MB."})]})]})})]})}),r.jsx(jm,{value:"costos",children:r.jsxs(We,{children:[r.jsxs(vt,{children:[r.jsx(bt,{children:"Anlisis de Precios Unitarios (APU)"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Sistema de costeo basado en estndares de construccin y manufactura. Incluye costos directos, indirectos, y clculo de precio final."})]}),r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"border-2 border-orange-300 rounded-lg p-4 bg-orange-50/30",children:[r.jsxs("h2",{className:"text-xl font-bold text-orange-800 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"bg-orange-600 text-white px-3 py-1 rounded",children:"A"}),"COSTOS DIRECTOS"]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b-2 border-orange-200 inline-block",children:"1. MATERIALES"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Insumos que se incorporan fsicamente al producto final"})]}),r.jsxs(re,{onClick:er,size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Agregar Material"]})]}),r.jsx("div",{className:"border rounded-sm overflow-hidden bg-white",children:r.jsxs(Bt,{className:"border-0",children:[r.jsx(Ut,{children:r.jsxs(Te,{className:"bg-orange-100/70",children:[r.jsx(le,{className:"w-24",children:"Cdigo"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{className:"w-24 text-right",children:"Cantidad"}),r.jsx(le,{className:"w-20 text-center",children:"Unidad"}),r.jsx(le,{className:"w-20 text-right",children:"Desp %"}),r.jsx(le,{className:"w-28 text-right",children:"Precio Unit."}),r.jsx(le,{className:"w-28 text-right",children:"Total"}),r.jsx(le,{className:"w-16"})]})}),r.jsxs(Vt,{children:[oe.map(ue=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:r.jsx("input",{type:"text",value:ue.codigo,onChange:je=>kn(ue.id,"codigo",je.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(H,{children:r.jsx("input",{type:"text",value:ue.descripcion,onChange:je=>kn(ue.id,"descripcion",je.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",placeholder:"Descripcin del material..."})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.cantidad,onChange:je=>kn(ue.id,"cantidad",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(H,{className:"text-center",children:r.jsx("input",{type:"text",value:ue.unidad,onChange:je=>kn(ue.id,"unidad",je.target.value),className:"w-full px-2 py-1 text-sm text-center border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.desperdicio,onChange:je=>kn(ue.id,"desperdicio",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.1"})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.precio,onChange:je=>kn(ue.id,"precio",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsxs(H,{className:"text-right font-medium",children:["$",Re(ue).toFixed(2)]}),r.jsx(H,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>la(ue.id),className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600",children:r.jsx(rr,{className:"h-4 w-4"})})})]},ue.id)),r.jsxs(Te,{className:"bg-orange-50 font-bold border-t-2 border-orange-300",children:[r.jsx(H,{colSpan:6,className:"text-right pr-4",children:"Subtotal Materiales (A1)"}),r.jsxs(H,{className:"text-right text-orange-700 text-lg",children:["$",ee.toFixed(2)]}),r.jsx(H,{})]})]})]})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b-2 border-blue-200 inline-block",children:"2. EQUIPOS Y HERRAMIENTAS"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maquinaria y equipos necesarios para la ejecucin"})]}),r.jsxs(re,{onClick:bi,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Agregar Equipo"]})]}),r.jsx("div",{className:"border rounded-sm overflow-hidden bg-white",children:r.jsxs(Bt,{className:"border-0",children:[r.jsx(Ut,{children:r.jsxs(Te,{className:"bg-blue-100/70",children:[r.jsx(le,{className:"w-24",children:"Cdigo"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{className:"w-24 text-right",children:"Cantidad"}),r.jsx(le,{className:"w-20 text-center",children:"Unidad"}),r.jsx(le,{className:"w-24 text-right",children:"Rendimiento"}),r.jsx(le,{className:"w-28 text-right",children:"Costo/Hora"}),r.jsx(le,{className:"w-28 text-right",children:"Total"}),r.jsx(le,{className:"w-16"})]})}),r.jsxs(Vt,{children:[De.map(ue=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:r.jsx("input",{type:"text",value:ue.codigo,onChange:je=>Pn(ue.id,"codigo",je.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(H,{children:r.jsx("input",{type:"text",value:ue.descripcion,onChange:je=>Pn(ue.id,"descripcion",je.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",placeholder:"Descripcin del equipo..."})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.cantidad,onChange:je=>Pn(ue.id,"cantidad",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(H,{className:"text-center",children:r.jsx("input",{type:"text",value:ue.unidad,onChange:je=>Pn(ue.id,"unidad",je.target.value),className:"w-full px-2 py-1 text-sm text-center border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.rendimiento,onChange:je=>Pn(ue.id,"rendimiento",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.costoHora,onChange:je=>Pn(ue.id,"costoHora",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsxs(H,{className:"text-right font-medium",children:["$",ye(ue).toFixed(2)]}),r.jsx(H,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>kl(ue.id),className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600",children:r.jsx(rr,{className:"h-4 w-4"})})})]},ue.id)),r.jsxs(Te,{className:"bg-blue-50 font-bold border-t-2 border-blue-300",children:[r.jsx(H,{colSpan:6,className:"text-right pr-4",children:"Subtotal Equipos (A2)"}),r.jsxs(H,{className:"text-right text-blue-700 text-lg",children:["$",Me.toFixed(2)]}),r.jsx(H,{})]})]})]})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b-2 border-green-200 inline-block",children:"3. MANO DE OBRA DIRECTA"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Personal que ejecuta directamente la actividad productiva"})]}),r.jsxs(re,{onClick:Po,size:"sm",className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Agregar Trabajador"]})]}),r.jsx("div",{className:"border rounded-sm overflow-hidden bg-white",children:r.jsxs(Bt,{className:"border-0",children:[r.jsx(Ut,{children:r.jsxs(Te,{className:"bg-green-100/70",children:[r.jsx(le,{className:"w-24",children:"Cdigo"}),r.jsx(le,{children:"Descripcin / Categora"}),r.jsx(le,{className:"w-24 text-right",children:"Cantidad"}),r.jsx(le,{className:"w-20 text-center",children:"Unidad"}),r.jsx(le,{className:"w-28 text-right",children:"Salario Base"}),r.jsx(le,{className:"w-28 text-right",children:"Subtotal"}),r.jsx(le,{className:"w-16"})]})}),r.jsxs(Vt,{children:[Xe.map(ue=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:r.jsx("input",{type:"text",value:ue.codigo,onChange:je=>ae(ue.id,"codigo",je.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(H,{children:r.jsx("input",{type:"text",value:ue.descripcion,onChange:je=>ae(ue.id,"descripcion",je.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",placeholder:"Categora del trabajador..."})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.cantidad,onChange:je=>ae(ue.id,"cantidad",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(H,{className:"text-center",children:r.jsx("input",{type:"text",value:ue.unidad,onChange:je=>ae(ue.id,"unidad",je.target.value),className:"w-full px-2 py-1 text-sm text-center border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(H,{className:"text-right",children:r.jsx("input",{type:"number",value:ue.salario,onChange:je=>ae(ue.id,"salario",parseFloat(je.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsxs(H,{className:"text-right font-medium",children:["$",(ue.cantidad*ue.salario).toFixed(2)]}),r.jsx(H,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>gs(ue.id),className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600",children:r.jsx(rr,{className:"h-4 w-4"})})})]},ue.id)),r.jsxs(Te,{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[r.jsx(H,{colSpan:5,className:"text-right pr-4 text-sm",children:"Subtotal Salarios Base"}),r.jsxs(H,{className:"text-right",children:["$",ne.toFixed(2)]}),r.jsx(H,{})]}),r.jsxs(Te,{className:"bg-green-50/50",children:[r.jsxs(H,{colSpan:5,className:"text-right pr-4 text-sm",children:["+ Cargas Sociales y Prestaciones (",J.cargasSociales,"%)*"]}),r.jsxs(H,{className:"text-right text-gray-700",children:["$",q.toFixed(2)]}),r.jsx(H,{})]}),r.jsxs(Te,{className:"bg-green-50/50",children:[r.jsxs(H,{colSpan:5,className:"text-right pr-4 text-sm",children:["+ Seguros y Riesgos Laborales (",J.seguros,"%)"]}),r.jsxs(H,{className:"text-right text-gray-700",children:["$",Q.toFixed(2)]}),r.jsx(H,{})]}),r.jsxs(Te,{className:"bg-green-50/50 border-b-2 border-green-300",children:[r.jsxs(H,{colSpan:5,className:"text-right pr-4 text-sm",children:["+ Herramientas y EPP (",J.herramientas,"%)"]}),r.jsxs(H,{className:"text-right text-gray-700",children:["$",ve.toFixed(2)]}),r.jsx(H,{})]}),r.jsxs(Te,{className:"bg-green-100 font-bold",children:[r.jsxs(H,{colSpan:5,className:"text-right pr-4",children:["Subtotal Mano de Obra (A3)",r.jsx("span",{className:"block text-xs font-normal text-gray-500",children:"*Incluye: vacaciones, aguinaldo, cesanta, seguro social"})]}),r.jsxs(H,{className:"text-right text-green-700 text-lg",children:["$",be.toFixed(2)]}),r.jsx(H,{})]})]})]})})]}),r.jsxs("div",{className:"bg-orange-100 border-2 border-orange-400 rounded p-3 flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL COSTOS DIRECTOS (A = A1 + A2 + A3)"}),r.jsxs("span",{className:"text-2xl font-bold text-orange-700",children:["$",Le.toFixed(2)]})]})]}),r.jsxs("div",{className:"border-2 border-purple-300 rounded-lg p-4 bg-purple-50/30",children:[r.jsxs("h2",{className:"text-xl font-bold text-purple-800 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded",children:"B"}),"COSTOS INDIRECTOS"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[r.jsx("h3",{className:"font-bold text-purple-700 mb-3 border-b pb-2",children:"B1. Indirectos de Campo"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Supervisin tcnica"}),r.jsx("span",{className:"font-medium",children:"$285.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Personal administrativo obra"}),r.jsx("span",{className:"font-medium",children:"$165.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Instalaciones temporales"}),r.jsx("span",{className:"font-medium",children:"$125.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Servicios (agua, luz temporal)"}),r.jsx("span",{className:"font-medium",children:"$95.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Seguridad y vigilancia"}),r.jsx("span",{className:"font-medium",children:"$85.00"})]}),r.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold text-purple-700",children:[r.jsx("span",{children:"Subtotal Campo (B1)"}),r.jsx("span",{children:"$755.00"})]})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[r.jsx("h3",{className:"font-bold text-purple-700 mb-3 border-b pb-2",children:"B2. Indirectos de Oficina Central"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Direccin y gerencia"}),r.jsx("span",{className:"font-medium",children:"$425.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Contabilidad y finanzas"}),r.jsx("span",{className:"font-medium",children:"$195.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Alquiler oficina central"}),r.jsx("span",{className:"font-medium",children:"$285.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Servicios bsicos oficina"}),r.jsx("span",{className:"font-medium",children:"$125.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Depreciacin equipos"}),r.jsx("span",{className:"font-medium",children:"$95.00"})]}),r.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold text-purple-700",children:[r.jsx("span",{children:"Subtotal Oficina (B2)"}),r.jsx("span",{children:"$1,125.00"})]})]})]})]}),r.jsxs("div",{className:"bg-purple-100 border-2 border-purple-400 rounded p-3 flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL COSTOS INDIRECTOS (B = B1 + B2)"}),r.jsx("span",{className:"text-2xl font-bold text-purple-700",children:"$1,880.00"})]})]}),r.jsxs("div",{className:"border-2 border-gray-400 rounded-lg p-6 bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6 text-center border-b-2 pb-3",children:"CLCULO DE PRECIO UNITARIO FINAL"}),r.jsxs("div",{className:"space-y-3 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Costos Directos (A)"}),r.jsxs("span",{className:"font-bold text-lg",children:["$",Le.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Costos Indirectos (B)"}),r.jsxs("span",{className:"font-bold text-lg",children:["$",ct.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b-2 border-gray-400 bg-blue-50 px-3 rounded",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"Costo Total (C = A + B)"}),r.jsxs("span",{className:"font-bold text-xl text-blue-700",children:["$",Ft.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["+ Financiamiento (",J.financiamiento,"% sobre C)",r.jsx("span",{className:"block text-xs text-gray-500",children:"Costo de oportunidad del capital"})]}),r.jsxs("span",{className:"font-bold",children:["$",Dt.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["+ Imprevistos (",J.imprevistos,"% sobre C)",r.jsx("span",{className:"block text-xs text-gray-500",children:"Contingencias y variaciones"})]}),r.jsxs("span",{className:"font-bold",children:["$",Et.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b-2 border-gray-400",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"Subtotal con Cargos (D)"}),r.jsxs("span",{className:"font-bold text-lg",children:["$",qt.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b-2 border-orange-400 bg-orange-50 px-3 rounded",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["+ Utilidad (",J.utilidad,"% sobre D)",r.jsx("span",{className:"block text-xs text-gray-500",children:"Margen de ganancia del contratista"})]}),r.jsxs("span",{className:"font-bold text-orange-600",children:["$",dt.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-3 bg-gradient-to-r from-green-100 to-green-50 border-2 border-green-500 rounded-lg px-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-gray-800 text-lg",children:"PRECIO UNITARIO FINAL"}),r.jsx("span",{className:"block text-xs text-gray-600",children:"Por unidad de medida (M3, KG, etc.)"})]}),r.jsxs("span",{className:"text-3xl font-bold text-green-700",children:["$",wr.toFixed(2)]})]}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:r.jsxs("p",{className:"text-xs text-gray-600",children:[r.jsx("strong",{children:"Nota:"})," Los porcentajes de indirectos, financiamiento, imprevistos y utilidad pueden variar segn el tipo de proyecto, ubicacin geogrfica, condiciones del mercado y polticas de la empresa. Los valores mostrados son referenciales basados en estndares de la industria."]})})]})]})]})]})})]}),r.jsx(am,{isOpen:Ae,onClose:()=>Se(!1),onSave:fd,title:"Nueva Categora",type:"categoria"}),r.jsx(Xy,{isOpen:$e,onClose:()=>jt(!1),onSave:kf,title:"Nueva Unidad de Medida",fields:[{name:"codigo",label:"Cdigo",placeholder:"UND"},{name:"nombre",label:"Nombre",placeholder:"Unidad"},{name:"tipo",label:"Tipo",type:"select",options:[{value:"Cantidad",label:"Cantidad"},{value:"Longitud",label:"Longitud"},{value:"rea",label:"rea"},{value:"Volumen",label:"Volumen"},{value:"Peso",label:"Peso"}]},{name:"decimales",label:"Decimales",type:"number",placeholder:"0"}]}),r.jsx(fO,{isOpen:St,onClose:()=>yt(!1),onSave:Pf}),r.jsx(hO,{isOpen:ft,onClose:()=>$r(!1),onSave:Ef}),r.jsx(am,{isOpen:Pl,onClose:()=>ji(!1),onSave:hd,title:"Nueva Marca",type:"marca"}),r.jsx(am,{isOpen:El,onClose:()=>Al(!1),onSave:Ml,title:"Nuevo Tipo",type:"tipo"}),r.jsx(mO,{isOpen:jf,onClose:()=>Il(!1),onSave:vs}),r.jsx(Xy,{isOpen:wf,onClose:()=>nd(!1),onSave:ys,title:"Nuevo Nivel de Precio",fields:[{name:"nombre",label:"Nombre del Nivel",placeholder:"Ej. Mayorista"},{name:"descripcion",label:"Descripcin",placeholder:"Descripcin opcional"}]})]})},GC="http://localhost:5006/api",HC=async e=>{const t=e?"".concat(GC,"/Kardex?almacenId=").concat(e):"".concat(GC,"/Kardex"),n=await fetch(t);if(!n.ok)throw new Error("Failed to get kardex: ".concat(n.status));return n.json()},LL=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(""),[l,c]=x.useState([]),[f,h]=x.useState("");x.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const v=await qa();c(v);const j=await HC(f);t(j)}catch(v){console.error("Error loading kardex:",v)}finally{a(!1)}};x.useEffect(()=>{m()},[f]);const m=async()=>{try{a(!0);const v=await HC(f);t(v)}catch(v){console.error("Error loading kardex data:",v)}finally{a(!1)}},p=e.filter(v=>(v.producto||"").toLowerCase().includes(s.toLowerCase())||(v.documento||"").toLowerCase().includes(s.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Kardex de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Historial detallado de movimientos por producto."})]})}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Filtros"})}),r.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ge,{label:"Buscar Producto",placeholder:"Cdigo o Nombre",value:s,onChange:v=>o(v.target.value)}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtrar por Almacn"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",value:f,onChange:v=>h(v.target.value),children:[r.jsx("option",{value:"",children:"Todos los Almacenes"}),l.map(v=>r.jsx("option",{value:v.id,children:v.nombre},v.id))]})]})]})]}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Movimientos Recientes"})}),r.jsx("div",{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{children:"Fecha"}),r.jsx(le,{children:"Tipo"}),r.jsx(le,{children:"Documento"}),r.jsx(le,{children:"Producto"}),r.jsx(le,{children:"Cant Adq"}),r.jsx(le,{children:"U.M."}),r.jsx(le,{className:"text-right text-green-700 bg-green-50",children:"Entrada"}),r.jsx(le,{className:"text-right text-red-700 bg-red-50",children:"Salida"}),r.jsx(le,{className:"text-right",children:"Costo"}),r.jsx(le,{className:"text-right",children:"Total"}),r.jsx(le,{className:"text-right text-xs text-gray-500",children:"Stock"})]})}),r.jsx(Vt,{children:n?r.jsx(Te,{children:r.jsx(H,{colSpan:12,className:"text-center py-8",children:"Cargando..."})}):p.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:12,className:"text-center py-8 text-gray-500",children:"No hay movimientos registrados."})}):p.map(v=>{var j,y,b;return r.jsxs(Te,{children:[r.jsx(H,{className:"text-gray-600",children:new Date(v.fechaMovimiento).toLocaleDateString()}),r.jsx(H,{children:r.jsxs("span",{className:"inline-flex items-center space-x-1 font-medium ".concat(v.tipoMovimiento==="Entrada"?"text-green-600":"text-red-600"),children:[v.tipoMovimiento==="Entrada"||v.cantidad>0?r.jsx(Gn,{size:14}):r.jsx(Jr,{size:14}),r.jsx("span",{children:v.tipoMovimiento})]})}),r.jsx(H,{className:"font-mono text-xs text-blue-600 font-medium",children:v.documento}),r.jsx(H,{className:"font-medium text-gray-800",children:v.producto}),r.jsx(H,{className:"font-medium text-orange-700",children:Math.abs(parseFloat((j=v.cantidadOriginal)!=null?j:v.cantidad)).toLocaleString()}),r.jsx(H,{className:"text-gray-500",children:v.unidadOriginal||v.unidadMedida}),r.jsx(H,{className:"text-right font-medium text-green-600 bg-green-50/30",children:v.cantidad>0?parseFloat(v.cantidad).toLocaleString():"-"}),r.jsx(H,{className:"text-right font-medium text-red-600 bg-red-50/30",children:v.cantidad<0?Math.abs(parseFloat(v.cantidad)).toLocaleString():"-"}),r.jsxs(H,{className:"text-right text-gray-600",children:["$",parseFloat(v.costoUnitario).toFixed(2)]}),r.jsxs(H,{className:"text-right font-medium",children:["$",parseFloat(v.total).toFixed(2)]}),r.jsxs(H,{className:"text-right text-xs text-gray-500",children:[(y=v.stockAnterior)==null?void 0:y.toFixed(0)," ",r.jsx("span",{className:"mx-1",children:""})," ",r.jsx("strong",{children:(b=v.stockNuevo)==null?void 0:b.toFixed(0)})]})]},v.id)})})]})})]})]})},Aj="http://localhost:5006/api/Ajustes",pO=async e=>{const t=await fetch(Aj,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error("Error al guardar ajuste: ".concat(t.status," ").concat(n))}return t.json()},gO=async()=>{const e=await fetch(Aj,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.text();throw new Error("Error al obtener ajustes: ".concat(e.status," ").concat(t))}return e.json()},xO=async e=>{const t=await fetch("".concat(Aj,"/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Error fetching details: ".concat(t.statusText));return t.json()},zL=Object.freeze(Object.defineProperty({__proto__:null,createAjuste:pO,getAjusteById:xO,getAjustes:gO},Symbol.toStringTag,{value:"Module"})),BL=({ajusteId:e,onClose:t})=>{var l,c;const[n,a]=x.useState(null),[s,o]=x.useState(!0);return x.useEffect(()=>{e&&(o(!0),xO(e).then(f=>a(f)).catch(f=>console.error(f)).finally(()=>o(!1)))},[e]),e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Pr,{className:"text-hd-orange",size:24}),"Detalle de Ajuste ",n?console.log(n)||n.documento:""]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:t,children:r.jsx(Tt,{size:20})})]}),r.jsx("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:s?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"Cargando detalles..."}):n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Fecha"}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[r.jsx(sa,{size:16,className:"text-gray-400"}),new Date(n.fecha).toLocaleDateString()]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Tipo / Motivo"}),r.jsxs("div",{className:"text-gray-800 font-medium",children:[r.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold mr-2 ".concat(n.tipoAjuste==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:n.tipoAjuste==="in"?"ENTRADA":"SALIDA"}),n.motivoDescripcion]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Almacn"}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[r.jsx(Rn,{size:16,className:"text-gray-400"}),n.almacenNombre||"General"]})]}),n.observaciones&&r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Observaciones"}),r.jsx("div",{className:"text-gray-700 text-sm italic border-l-2 border-gray-300 pl-2 mt-1",children:n.observaciones})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-3 text-sm uppercase tracking-wide",children:"Artculos Ajustados"}),r.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Te,{children:[r.jsx(le,{children:"Cdigo"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{children:"Plan"}),r.jsx(le,{children:"Unidad"}),r.jsx(le,{className:"text-right",children:"Cant."}),r.jsx(le,{className:"text-right",children:"Costo"}),r.jsx(le,{className:"text-right",children:"Total"})]})}),r.jsxs(Vt,{children:[(l=n.detalles)==null?void 0:l.map((f,h)=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-mono text-xs text-gray-600",children:f.codigo}),r.jsx(H,{className:"font-medium text-gray-800",children:f.descripcion}),r.jsx(H,{className:"text-xs text-gray-500",children:f.planUoM||"-"}),r.jsx(H,{className:"text-xs",children:f.unidad}),r.jsx(H,{className:"text-right font-bold text-gray-800",children:parseFloat(f.cantidad).toLocaleString()}),r.jsx(H,{className:"text-right text-xs text-gray-600",children:parseFloat(f.costo).toLocaleString(void 0,{minimumFractionDigits:2})}),r.jsx(H,{className:"text-right text-sm font-semibold text-gray-900 bg-gray-50/50",children:(f.cantidad*f.costo).toLocaleString(void 0,{minimumFractionDigits:2})})]},h)),r.jsxs(Te,{className:"bg-gray-100 font-bold",children:[r.jsx(H,{colSpan:6,className:"text-right",children:"Total Ajuste:"}),r.jsx(H,{className:"text-right text-hd-orange",children:(c=n.detalles)==null?void 0:c.reduce((f,h)=>f+h.cantidad*h.costo,0).toLocaleString(void 0,{minimumFractionDigits:2})})]})]})]})})]})]}):r.jsx("div",{className:"text-center text-red-500",children:"No se encontr el ajuste."})}),r.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:r.jsx(re,{variant:"outline",onClick:t,children:"Cerrar"})})]})}):null},UL=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(""),[o,l]=x.useState(!0),[c,f]=x.useState(null);x.useEffect(()=>{gO().then(u=>n(u)).catch(u=>console.error("Error loading ajustes",u)).finally(()=>l(!1))},[]);const h=a?t.filter(u=>u.documento&&u.documento.toLowerCase().includes(a.toLowerCase())||u.motivo&&u.motivo.toLowerCase().includes(a.toLowerCase())||u.tipo&&u.tipo.toLowerCase().includes(a.toLowerCase())):t;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Ajustes de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Registre entradas y salidas manuales de mercanca."})]}),r.jsxs(re,{onClick:()=>e("/ajustes/nuevo"),className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Ajuste"]})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(bt,{children:"Historial de Ajustes"}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar ajuste...",className:"pl-9",value:a,onChange:u=>s(u.target.value)})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[120px]",children:"Documento"}),r.jsx(le,{children:"Fecha"}),r.jsx(le,{children:"Tipo"}),r.jsx(le,{children:"Motivo"}),r.jsx(le,{className:"text-right",children:"Acciones"})]})}),r.jsx(Vt,{children:o?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Cargando ajustes..."})}):h.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No hay ajustes registrados."})}):h.map(u=>r.jsxs(Te,{className:"group hover:bg-gray-50/50",children:[r.jsx(H,{className:"font-mono text-gray-700",children:u.documento}),r.jsx(H,{children:new Date(u.fecha).toLocaleDateString()}),r.jsx(H,{children:r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(u.tipo==="Entrada"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:u.tipo})}),r.jsx(H,{children:u.motivo}),r.jsx(H,{className:"text-right",children:r.jsx(re,{variant:"ghost",size:"sm",className:"text-hd-orange hover:text-orange-700 hover:bg-orange-50",onClick:()=>f(u.id),children:"Ver Detalle"})})]},u.id||u.documento))})]})})]}),c&&r.jsx(BL,{ajusteId:c,onClose:()=>f(null)})]})},VL="modulepreload",qL=function(e){return"/"+e},WC={},D0=function(t,n,a){let s=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=f(n.map(h=>{if(h=qL(h),h in WC)return;WC[h]=!0;const u=h.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(h,'"]').concat(m)))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":VL,u||(p.as="script"),p.crossOrigin="",p.href=h,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((v,j)=>{p.addEventListener("load",v),p.addEventListener("error",()=>j(new Error("Unable to preload CSS for ".concat(h))))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})},km="http://localhost:5006/api/MotivosAjuste",Ij=async()=>{const e=await fetch(km);if(!e.ok)throw new Error("Error al obtener motivos");return await e.json()},GL=async e=>{const t=!!e.id,n=t?"".concat(km,"/").concat(e.id):km,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const o=await s.json();throw new Error(o.message||"Error al guardar motivo")}return s.status===204?!0:await s.json()},HL=async e=>{if(!(await fetch("".concat(km,"/").concat(e),{method:"DELETE"})).ok)throw new Error("Error al eliminar motivo");return!0};let WL=class extends Nt.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error",t,n),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?r.jsxs("div",{className:"p-6 bg-red-100 text-red-800 rounded-md",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Algo sali mal"}),r.jsx("p",{children:"Por favor, recargue la pgina o contacte al soporte."}),!1]}):this.props.children}};const KL=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(kr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ir,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},Ud=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),YL=()=>{const e=$t(),{hasPermission:t,loading:n}=jl();x.useEffect(()=>{!n&&!t("INVENTORY_ADJUSTMENT_CREATE")&&e("/ajustes")},[n,t,e]);const[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState(!0);if(n)return r.jsx("div",{className:"p-6",children:"Verificando permisos..."});const[h,u]=x.useState([]),[m,p]=x.useState(""),[v,j]=x.useState(!1),y=x.useRef(null),[b,N]=x.useState({fecha:new Date().toISOString().split("T")[0],tipoAjuste:"out",motivoId:"",almacenId:"",observaciones:""}),[k,D]=x.useState([]);x.useEffect(()=>{(async()=>{try{const[Z,B,U]=await Promise.all([Ij(),dl(),qa()]);Array.isArray(Z)?s(Z.filter($=>$.activo)):Z&&Array.isArray(Z.data)?s(Z.data.filter($=>$.activo)):(console.error("Structure of motivosData unexpected",Z),s([])),Array.isArray(U)?l(U):l([]),Array.isArray(B)?u(B):B&&Array.isArray(B.data)?u(B.data):(console.error("Structure of productosData unexpected",B),u([]))}catch(Z){console.error("Error loading data",Z),s([]),u([])}finally{f(!1)}})();const W=Z=>{y.current&&!y.current.contains(Z.target)&&j(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const E=a.reduce((M,W)=>(M[W.grupo]||(M[W.grupo]=[]),M[W.grupo].push(W),M),{}),P=x.useMemo(()=>{if(!m)return[];const M=m.toLowerCase();return h.filter(W=>W.descripcion&&W.descripcion.toLowerCase().includes(M)||W.codigo&&W.codigo.toLowerCase().includes(M)||W.referencia&&W.referencia.toLowerCase().includes(M)).slice(0,10)},[m,h]),[C,O]=x.useState(null);x.useEffect(()=>{(async()=>{try{const{getAjusteConfig:W}=await D0(async()=>{const{getAjusteConfig:B}=await Promise.resolve().then(()=>lU);return{getAjusteConfig:B}},[]),Z=await W();O(Z)}catch(W){console.error(W)}})()},[]);const A=async M=>{if(k.find(Y=>Y.id===M.id)){alert("El artculo ya est en la lista. Ajuste la cantidad en la lnea existente.");return}let Z=[],B=M.unidadMedida||"UND",U=1,$=(C==null?void 0:C.defaultPlanId)||M.planMedida||M.PlanMedida,K="N/A";if($)try{const{getPlan:Y}=await D0(async()=>{const{getPlan:Pe}=await import("./unidades-fHpBaphY.js");return{getPlan:Pe}},[]),me=await Y($);K=me.descripcion||me.Descripcion||"Plan "+$;const xe=me.detalles||me.Detalles;if(me&&xe)if(Z=xe.map(Pe=>({unidad:Pe.unidadMedida||Pe.UnidadMedida,equivalente:parseFloat(Pe.cantidad||Pe.Cantidad||1)})),C!=null&&C.defaultUnit){const Pe=Z.find(Ge=>Ge.unidad===C.defaultUnit);Pe?(B=Pe.unidad,U=Pe.equivalente):Z.length>0&&(B=Z[0].unidad,U=Z[0].equivalente)}else Z.length>0&&(B=Z[0].unidad,U=Z[0].equivalente)}catch(Y){console.error("Error fetching plan",Y)}else Z.push({unidad:B,equivalente:1});const V=parseFloat(M.costoUnitario||M.costo||0)||0,F=parseFloat(U)||1,L=V*F,X={id:M.id,codigo:M.numeroArticulo||M.codigoBarras||M.codigo,descripcion:M.descripcion,unidad:B,unidadesPosibles:Z,equivalente:F,cantidad:1,costoBase:V,costo:L,stockActual:M.stockActual||0,planUoM:$,planName:K};D([...k,X]),p(""),j(!1)},_=(M,W,Z)=>{D(k.map(B=>{if(B.id===M){if(W==="unidad"){const U=B.unidadesPosibles.find(V=>V.unidad===Z),$=U&&parseFloat(U.equivalente)||1,K=(parseFloat(B.costoBase)||0)*$;return{...B,unidad:Z,equivalente:$,costo:K}}return{...B,[W]:Z}}return B}))},z=M=>{D(k.filter(W=>W.id!==M))},G=k.reduce((M,W)=>M+W.cantidad*W.costo,0),T=async()=>{var Z;if(!b.motivoId){alert("Debe seleccionar un motivo.");return}if(k.length===0){alert("Debe agregar al menos un artculo.");return}const M=((Z=a.find(B=>B.id==b.motivoId))==null?void 0:Z.motivo)||"N/A",W={...b,motivoDescripcion:M,motivoId:parseInt(b.motivoId),almacenId:parseInt(b.almacenId)||1,detalles:k.map(B=>({articuloId:B.id,codigo:B.codigo,descripcion:B.descripcion,unidad:B.unidad,cantidad:B.cantidad,equivalente:B.equivalente,costo:B.costo,planUoM:B.planUoM}))};try{const{createAjuste:B}=await D0(async()=>{const{createAjuste:$}=await Promise.resolve().then(()=>zL);return{createAjuste:$}},void 0),U=await B(W);alert("Ajuste registrado con xito. Documento: ".concat(U.documento)),e("/ajustes")}catch(B){console.error(B),alert("Error al guardar el ajuste: "+B.message)}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/ajustes"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Inventario"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:"Nuevo Ajuste"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Hoja de Ajuste"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/ajustes"),className:"border-gray-300 text-gray-700",children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:T,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Registrar Ajuste"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(KL,{title:"General",children:[r.jsx(Ud,{label:"No. Documento",children:r.jsx(ge,{placeholder:"(Auto)",disabled:!0,className:"bg-gray-50 border-gray-200"})}),r.jsx(Ud,{label:"Fecha Registro",required:!0,children:r.jsx(ge,{type:"date",className:"font-medium",value:b.fecha,onChange:M=>N({...b,fecha:M.target.value})})}),r.jsx("div",{className:"col-span-1",children:r.jsx(Ud,{label:"Tipo Ajuste",required:!0,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange cursor-help",value:b.tipoAjuste,title:"Seleccione si el ajuste aumenta o disminuye el inventario",onChange:M=>N({...b,tipoAjuste:M.target.value}),children:[r.jsx("option",{value:"in",title:"Aumenta la cantidad de artculos en el almacn",children:"Entrada (+) "}),r.jsx("option",{value:"out",title:"Disminuye la cantidad de artculos en el almacn",children:"Salida (-)"})]}),r.jsx("span",{className:"text-xs mt-1 font-medium ".concat(b.tipoAjuste==="in"?"text-green-600":"text-red-500"),children:b.tipoAjuste==="in"?"Aumenta el Stock: Para sobrantes, devoluciones o ingresos manuales.":"Disminuye el Stock: Para mermas, daos, robos o consumo interno."})]})})}),r.jsx(Ud,{label:"Almacn",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:b.almacenId,onChange:M=>N({...b,almacenId:M.target.value}),children:[r.jsx("option",{value:"",children:"Seleccione Almacn"}),c?r.jsx("option",{disabled:!0,children:"Cargando almacenes..."}):o.map(M=>r.jsx("option",{value:M.id,children:M.nombre},M.id))]})}),r.jsx("div",{className:"col-span-1 md:col-span-2",children:r.jsx(Ud,{label:"Motivo del Ajuste",required:!0,children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:b.motivoId,onChange:M=>N({...b,motivoId:M.target.value}),children:[r.jsx("option",{value:"",children:"-- Seleccione un Motivo --"}),c?r.jsx("option",{disabled:!0,children:"Cargando motivos..."}):Object.entries(E).map(([M,W])=>r.jsx("optgroup",{label:M,children:W.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.codigo," - ",Z.motivo]},Z.id))},M))]})})})]}),r.jsxs("div",{className:"mb-4 relative",ref:y,children:[r.jsxs("div",{className:"relative",children:[r.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(ge,{placeholder:"Buscar artculo por cdigo o descripcin para agregar...",className:"pl-10 py-6 text-lg border-hd-orange/30 focus:border-hd-orange shadow-sm",value:m,onChange:M=>{p(M.target.value),j(!0)},onFocus:()=>j(!0)})]}),v&&m&&r.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 mt-1 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:P.length>0?P.map(M=>r.jsxs("div",{className:"px-4 py-3 hover:bg-orange-50 cursor-pointer border-b border-gray-50 last:border-0 flex justify-between items-center group",onClick:()=>A(M),children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800",children:M.descripcion}),r.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:[M.codigo,M.referencia&&" | Ref: ".concat(M.referencia)]})]}),r.jsxs("div",{className:"text-xs font-medium text-gray-500 group-hover:text-hd-orange",children:["Stock: ",M.stockActual||0]})]},M.id)):r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No se encontraron productos"})})]}),r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden flex flex-col",children:[r.jsx("div",{className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-100",children:r.jsxs("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:["Lneas de Ajuste - ",k.length," Items"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[120px]",children:"Cdigo"}),r.jsx(le,{className:"w-[250px]",children:"Descripcin"}),r.jsx(le,{className:"w-[100px]",children:"Plan"}),r.jsx(le,{className:"w-[100px]",children:"Unidad"}),r.jsx(le,{className:"w-[80px] text-right",children:"Cant. Unid."}),r.jsx(le,{className:"w-[100px] text-right",children:"Cantidad"}),r.jsx(le,{className:"w-[100px] text-right text-xs text-gray-500",children:"Total Unidades"}),r.jsx(le,{className:"w-[100px] text-right",children:"Costo Unit."}),r.jsx(le,{className:"w-[100px] text-right",children:"Total"}),r.jsx(le,{className:"w-[50px]"})]})}),r.jsx(Vt,{children:k.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:8,className:"h-24 text-center text-gray-400 italic",children:"Busque y agregue productos arriba para comenzar"})}):k.map(M=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-mono text-xs",children:M.codigo}),r.jsx(H,{className:"text-sm",children:M.descripcion}),r.jsx(H,{className:"text-xs text-gray-500",children:M.planName||"N/A"}),r.jsx(H,{children:M.unidadesPosibles&&M.unidadesPosibles.length>1?r.jsx("select",{className:"h-8 text-xs border border-gray-300 rounded p-1 w-full",value:M.unidad,onChange:W=>_(M.id,"unidad",W.target.value),children:M.unidadesPosibles.map(W=>r.jsx("option",{value:W.unidad,children:W.unidad},W.unidad))}):r.jsx("span",{className:"text-xs",children:M.unidad})}),r.jsx(H,{className:"text-right text-xs text-gray-500",children:M.equivalente}),r.jsx(H,{children:r.jsx(ge,{type:"number",className:"h-8 text-right text-xs",value:isNaN(M.cantidad)?"":M.cantidad,onChange:W=>{const Z=parseFloat(W.target.value);_(M.id,"cantidad",isNaN(Z)?0:Z)}})}),r.jsx(H,{className:"text-right text-xs font-semibold text-gray-600 bg-gray-50/50",children:((isNaN(M.cantidad)?0:M.cantidad)*(M.equivalente||1)).toLocaleString(void 0,{maximumFractionDigits:4})}),r.jsx(H,{children:r.jsx(ge,{type:"number",className:"h-8 text-right text-xs bg-gray-50",value:isNaN(M.costo)?"":M.costo,onChange:W=>{const Z=parseFloat(W.target.value);_(M.id,"costo",isNaN(Z)?0:Z)}})}),r.jsx(H,{className:"text-right text-xs font-medium",children:(M.cantidad*M.costo).toLocaleString(void 0,{minimumFractionDigits:2})}),r.jsx(H,{children:r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:bg-red-50",onClick:()=>z(M.id),children:r.jsx(rr,{size:14})})})]},M.id))})]})}),r.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex justify-end",children:r.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:["Total Valor Ajuste: ",r.jsxs("span",{className:"text-lg ml-2 text-hd-orange",children:["DOP ",G.toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})]})]})},XL=e=>r.jsx(WL,{children:r.jsx(YL,{...e})}),KC="http://localhost:5006/api",JL=()=>{const e=$t(),[t,n]=x.useState(!0),[a,s]=x.useState([]),[o,l]=x.useState(""),c=async h=>{if(window.confirm("Est seguro que desea eliminar esta transferencia? Esta accin no se puede deshacer."))try{(await fetch("".concat(KC,"/Transferencias/").concat(h),{method:"DELETE"})).ok?s(m=>m.filter(p=>(p.id||p.Id)!==h)):alert("Error al eliminar la transferencia")}catch(u){console.error(u),alert("Error de conexin al eliminar")}};x.useEffect(()=>{(async()=>{try{n(!0);const u=await fetch("".concat(KC,"/Transferencias"));if(!u.ok)throw new Error("Error loading transfers");const m=await u.json();s(m)}catch(u){console.error(u)}finally{n(!1)}})()},[]);const f=a.filter(h=>{const u=h.numeroTransferencia||h.NumeroTransferencia||"",m=h.almacenOrigen||h.AlmacenOrigen||"",p=h.almacenDestino||h.AlmacenDestino||"",v=o.toLowerCase();return u.toLowerCase().includes(v)||m.toLowerCase().includes(v)||p.toLowerCase().includes(v)});return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Transferencias de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione y rastree el movimiento de artculos entre ubicaciones."})]}),r.jsxs(re,{onClick:()=>e("/transferencias/nuevo"),className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nueva Transferencia"]})]}),r.jsxs(We,{className:"border-none shadow-lg overflow-hidden",children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-4 bg-gray-50/50",children:[r.jsx(bt,{className:"text-lg font-bold",children:"Historial de Movimientos"}),r.jsxs("div",{className:"relative w-72",children:[r.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ge,{placeholder:"Buscar por No. u Almacn...",className:"pl-10 h-10 border-gray-200 focus:border-hd-orange",value:o,onChange:h=>l(h.target.value)})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-100/50",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[140px] font-bold",children:"No. Documento"}),r.jsx(le,{className:"w-[120px] font-bold",children:"Fecha"}),r.jsx(le,{className:"font-bold",children:"Origen"}),r.jsx(le,{className:"font-bold",children:"Destino"}),r.jsx(le,{className:"w-[120px] text-center font-bold",children:"Estado"}),r.jsx(le,{className:"w-[100px] text-right font-bold",children:"Acciones"})]})}),r.jsx(Vt,{children:t?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-20 text-gray-400",children:"Cargando transferencias..."})}):f.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-20 text-gray-500",children:"No se encontraron transferencias que coincidan con la bsqueda."})}):f.map(h=>r.jsxs(Te,{className:"hover:bg-gray-50 transition-colors",children:[r.jsx(H,{className:"font-mono text-xs font-bold text-hd-orange",children:h.numeroTransferencia||h.NumeroTransferencia}),r.jsx(H,{className:"text-xs",children:new Date(h.fecha||h.Fecha).toLocaleDateString("es-DO")}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center text-xs",children:[r.jsx("div",{className:"h-2 w-2 rounded-full bg-red-400 mr-2"}),h.almacenOrigen||h.AlmacenOrigen]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center text-xs",children:[r.jsx("div",{className:"h-2 w-2 rounded-full bg-green-400 mr-2"}),h.almacenDestino||h.AlmacenDestino]})}),r.jsx(H,{className:"text-center",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-[10px] font-bold bg-blue-100 text-blue-800 uppercase tracking-tighter",children:h.estado||h.Estado})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 hover:bg-orange-50 hover:text-hd-orange transition-colors",title:"Ver detalles",onClick:()=>e("/transferencias/editar/".concat(h.id||h.Id)),children:r.jsx(ci,{size:20})}),r.jsx(re,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 hover:bg-red-50 hover:text-red-500 transition-colors",title:"Eliminar",onClick:u=>{u.stopPropagation(),c(h.id||h.Id)},children:r.jsx(rr,{size:20})})]})})]},h.id||h.Id))})]})})]})]})},ul=({isOpen:e,onClose:t,onSelect:n,clientContext:a})=>{const[s,o]=x.useState(""),[l,c]=x.useState([]),[f,h]=x.useState(!1),[u,m]=x.useState(0),p=x.useRef(null),v=x.useRef(null);x.useEffect(()=>{e&&(j(),o(""),m(0),setTimeout(()=>{var N;return(N=p.current)==null?void 0:N.focus()},100))},[e]);const j=async()=>{try{h(!0);const N=await dl(),k=[],D=(a==null?void 0:a.moneda)||"DOP";N.forEach(E=>{let P=!1;E.preciosList&&E.preciosList.length>0&&E.preciosList.forEach(C=>{const O=(C.moneda||"DOP").trim().toUpperCase(),A=(D||"DOP").trim().toUpperCase();C.activo&&O===A&&(k.push({...E,uniqueKey:"".concat(E.id||E.Id,"-lvl-").concat(C.id||C.nivelPrecio),isVariant:!0,displayLevel:C.nivelPrecio,displayUnit:C.unidadMedida,displayPrice:C.precio,variantInfo:C}),P=!0)}),P||k.push({...E,uniqueKey:"".concat(E.id||E.Id,"-base"),isVariant:!1,displayLevel:"General",displayUnit:E.unidadMedida||"UND",displayPrice:E.precioVenta||E.precioUnitario||0,variantInfo:null})}),c(k)}catch(N){console.error("Error loading articles:",N)}finally{h(!1)}},y=x.useMemo(()=>{const N=s.toLowerCase();let k=[];return N?k=l.filter(D=>{const E=D.descripcion||D.Descripcion||"",P=D.numeroArticulo||D.NumeroArticulo||"",C=D.displayLevel||"",O=D.displayUnit||"";return E.toLowerCase().includes(N)||P.toLowerCase().includes(N)||C.toLowerCase().includes(N)||O.toLowerCase().includes(N)}).slice(0,100):k=l.slice(0,50),a!=null&&a.nivelPrecio&&k.sort((D,E)=>{const P=D.displayLevel===a.nivelPrecio,C=E.displayLevel===a.nivelPrecio;return P&&!C?-1:!P&&C?1:0}),k},[l,s,a]);x.useEffect(()=>{m(0)},[y]),x.useEffect(()=>{const N=k=>{if(e)if(k.key==="ArrowDown")k.preventDefault(),m(D=>Math.min(D+1,y.length-1));else if(k.key==="ArrowUp")k.preventDefault(),m(D=>Math.max(D-1,0));else if(k.key==="Enter"){if(k.preventDefault(),y[u]){const D=y[u];n({...D,precio:D.displayPrice,precioVenta:D.displayPrice,unidad:D.displayUnit,unidadMedida:D.displayUnit,nivelPrecioApplied:D.displayLevel}),t()}}else k.key==="Escape"&&t()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[e,y,u,n,t]),x.useEffect(()=>{if(v.current){const N=v.current.children[u];N&&N.scrollIntoView({block:"nearest"})}},[u]);const b=N=>N>10?"text-green-600 bg-green-50 border-green-100":N>0?"text-orange-600 bg-orange-50 border-orange-100":"text-red-600 bg-red-50 border-red-100";return r.jsx(ui,{open:e,onOpenChange:t,children:r.jsxs(fi,{className:"max-w-5xl p-0 overflow-hidden border-0 shadow-2xl bg-white rounded-xl h-[85vh] flex flex-col",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex flex-col gap-4 shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 tracking-tight",children:"Buscar Productos"}),r.jsx("p",{className:"text-xs text-gray-500",children:a!=null&&a.moneda?"Lista de Precios: ".concat(a.moneda):"Lista de Precios: DOP"})]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full h-8 w-8",children:r.jsx(Tt,{size:20})})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Yt,{className:"h-4 w-4 text-gray-400 group-focus-within:text-blue-700"})}),r.jsx(ge,{ref:p,className:"w-full pl-9 pr-4 h-9 bg-white text-sm rounded-sm border border-gray-300 focus:border-blue-700 focus:ring-0 focus:outline-none placeholder:text-gray-400 transition-colors",placeholder:"Buscar por cdigo, descripcin, unidad o nivel...",value:s,onChange:N=>o(N.target.value)})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 pt-2 pb-2",style:{scrollBehavior:"smooth"},children:[r.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200 bg-gray-50/95 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsx("div",{className:"col-span-2",children:"Cdigo"}),r.jsx("div",{className:"col-span-4",children:"Descripcin"}),r.jsx("div",{className:"col-span-2",children:"Nivel Precio"}),r.jsx("div",{className:"col-span-1",children:"Unidad"}),r.jsx("div",{className:"col-span-2 text-right",children:"Existencia"}),r.jsx("div",{className:"col-span-1 text-right",children:"Precio"})]}),r.jsxs("div",{ref:v,className:"px-2",children:[f&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400 animate-pulse",children:[r.jsx("div",{className:"p-4 bg-gray-200 rounded-full mb-4"}),r.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded"})]}),!f&&y.length===0&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[r.jsx(Rn,{size:64,className:"mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No se encontraron productos"}),r.jsx("p",{className:"text-sm",children:"Verifique los filtros o el trmino de bsqueda"})]}),y.map((N,k)=>{const D=k===u,E=N.stockActual!==void 0?N.stockActual:N.StockActual!==void 0?N.StockActual:0,P=N.displayPrice||0,C=N.displayLevel||"General",O=N.displayUnit||"UND",A=(a==null?void 0:a.nivelPrecio)&&C===a.nivelPrecio;return r.jsxs("div",{onClick:()=>{n({...N,precio:P,precioVenta:P,unidad:O,unidadMedida:O,nivelPrecioApplied:C}),t()},className:"\n                                        group grid grid-cols-12 gap-4 px-4 py-3 mb-1 rounded-lg cursor-pointer transition-all duration-150 border items-center\n                                        ".concat(D?"bg-blue-50 border-blue-200 border-l-4 border-l-blue-600 shadow-sm z-10":"bg-white border-transparent border-l-4 border-l-transparent hover:border-gray-300 hover:shadow-sm","\n                                        ").concat(A&&!D?"bg-blue-50 border-blue-200":"","\n                                    "),children:[r.jsx("div",{className:"col-span-2 font-mono text-xs font-bold ".concat(D?"text-blue-800":"text-gray-900"),children:N.numeroArticulo||N.NumeroArticulo}),r.jsxs("div",{className:"col-span-4 flex flex-col justify-center",children:[r.jsx("div",{className:"text-sm font-bold truncate ".concat(D?"text-gray-900":"text-gray-800"),children:N.descripcion||N.Descripcion}),r.jsx("div",{className:"text-xs truncate flex items-center gap-2 ".concat(D?"text-blue-600":"text-gray-400"),children:(N.marca||N.Marca)&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Nl,{size:10})," ",N.marca||N.Marca]})})]}),r.jsx("div",{className:"col-span-2",children:r.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase border\n                                            ".concat(D?"bg-blue-100 text-blue-800 border-blue-200":A?"bg-blue-100 text-blue-700 border-blue-200":"bg-gray-100 text-gray-600 border-gray-200","\n                                        "),children:C})}),r.jsx("div",{className:"col-span-1",children:r.jsx("span",{className:"text-xs font-bold ".concat(D?"text-gray-800":"text-gray-700"),children:O})}),r.jsx("div",{className:"col-span-2 text-right",children:r.jsx("span",{className:"\n                                            inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold border\n                                            ".concat(D?"bg-white text-gray-800 border-transparent shadow-sm":b(E),"\n                                        "),children:E})}),r.jsxs("div",{className:"col-span-1 text-right font-black text-sm text-gray-900",children:["$",Number(P).toFixed(2)]})]},N.uniqueKey||k)})]})]}),r.jsxs("div",{className:"bg-gray-100 p-2 text-center text-xs text-gray-400 border-t border-gray-200",children:["Mostrando ",y.length," opciones"]})]})})},vO="http://localhost:5006/api/TransferenciaConfiguration",yO=async()=>{try{const e=await fetch(vO);if(!e.ok)throw new Error("Error fetching config");return await e.json()}catch(e){throw console.error("Error fetching transfer config:",e),e}},QL=async e=>{try{const t=await fetch(vO,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error updating config");return await t.json()}catch(t){throw console.error("Error updating transfer config:",t),t}},YC="http://localhost:5006/api",ZL=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(kr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ir,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},rc=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),XC=()=>{const e=$t(),{id:t}=xo(),n=!!t,[a,s]=x.useState(!1),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState([]),[m,p]=x.useState(""),[v,j]=x.useState(""),[y,b]=x.useState(!1),[N,k]=x.useState({numeroTransferencia:"(Auto)",fecha:new Date().toISOString().split("T")[0],almacenOrigenId:"",almacenDestinoId:"",observaciones:""}),D=(A,_)=>{k(z=>({...z,[A]:_}))},E=(A,_,z)=>{f(G=>G.map((T,M)=>{var Z;if(M!==A)return T;const W={...T,[_]:z};if(_==="planUoM"){const B=h.find(U=>U.planId===z);B&&B.detalles&&B.detalles.length>0?(W.unidadMedida=B.detalles[0].unidadMedida,W.cantidadUnidad=B.detalles[0].cantidad||1):(W.unidadMedida=T.unidadOriginal,W.cantidadUnidad=1)}if(_==="unidadMedida"){const B=h.find(U=>U.planId===T.planUoM);if(B){const U=(Z=B.detalles)==null?void 0:Z.find($=>$.unidadMedida===z);W.cantidadUnidad=U&&U.cantidad||1}else W.cantidadUnidad=1}return W}))},P=A=>{f(_=>_.filter((z,G)=>G!==A))},C=async()=>{s(!0);try{const A={...N,almacenOrigenId:Number(N.almacenOrigenId),almacenDestinoId:Number(N.almacenDestinoId),items:c},_=t?"PUT":"POST";if(!(await fetch("".concat(YC,"/Transferencias").concat(t?"/"+t:""),{method:_,headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).ok)throw new Error("Failed to save transferencia");e("/transferencias")}catch(A){console.error(A),alert("Error al guardar la transferencia")}finally{s(!1)}},O=async A=>{if(!N.almacenOrigenId){alert("Debe seleccionar el Almacn Origen antes de agregar artculos.");return}try{const _=await NL(A.id,Number(N.almacenOrigenId)),z=_.stock!==void 0?_.stock:_.Stock!==void 0?_.Stock:0;if(z<=0){alert('El artculo "'.concat(A.descripcion,'" no tiene existencia en el almacn de origen.'));return}const G={articuloId:A.id,numeroArticulo:A.numeroArticulo||A.NumeroArticulo||"",descripcion:A.descripcion||A.Descripcion||"",unidadMedida:A.unidadMedida||A.UnidadMedida||"UND",cantidad:0,existencia:z,unidadOriginal:A.unidadMedida||A.UnidadMedida||"UND",costoUnitario:A.costoUnitario||A.CostoUnitario||0,planUoM:"",cantidadUnidad:1},T=m||A.planUoM||A.PlanUoM||"";G.planUoM=T;let M=!1;if(T){const W=h.find(Z=>Z.planId===T);if(W&&W.detalles){if(v){const Z=v.trim().toUpperCase(),B=W.detalles.find(U=>(U.unidadMedida||"").trim().toUpperCase()===Z);B&&(G.unidadMedida=B.unidadMedida,G.cantidadUnidad=B.cantidad||1,M=!0)}!M&&W.detalles.length>0&&(G.unidadMedida=W.detalles[0].unidadMedida,G.cantidadUnidad=W.detalles[0].cantidad||1,M=!0)}}if(!M&&v){const W=v.trim().toUpperCase(),Z=(G.unidadOriginal||"").trim().toUpperCase();(Z===W||Z==="")&&(G.unidadMedida=G.unidadOriginal,G.cantidadUnidad=1,M=!0)}f(W=>[...W,G]),b(!1)}catch(_){console.error("Error al validar stock:",_),alert("Error al verificar la existencia del artculo. Intente nuevamente.")}};return x.useEffect(()=>{(async()=>{try{const _=await qa();l(_);try{const z=await vo();u(z||[])}catch(z){console.error("Error loading UoM plans:",z)}try{const z=await yO();z&&(z.defaultPlanId&&p(z.defaultPlanId),z.defaultUnit&&j(z.defaultUnit))}catch(z){console.error("Error loading config:",z)}_.length>0&&!t&&k(z=>({...z,almacenOrigenId:_[0].id,almacenDestinoId:_[1]?_[1].id:_[0].id}))}catch(_){console.error("Error loading warehouses:",_)}})()},[t]),x.useEffect(()=>{t&&(async()=>{try{s(!0);const _=await fetch("".concat(YC,"/Transferencias/").concat(t));if(_.ok){const z=await _.json();console.log("API Response:",z);const G=z.Header||z.header||z.master||z,T=z.Items||z.items||z.detalles||[];T.length===0&&console.warn("No items found in response",z),k({numeroTransferencia:G.NumeroTransferencia||G.numeroTransferencia,fecha:(G.Fecha||G.fecha||"").split("T")[0],almacenOrigenId:G.AlmacenOrigenId||G.almacenOrigenId,almacenDestinoId:G.AlmacenDestinoId||G.almacenDestinoId,observaciones:G.Observaciones||G.observaciones||""}),f(T.map(M=>({articuloId:M.ArticuloId||M.articuloId,numeroArticulo:M.NumeroArticulo||M.numeroArticulo,descripcion:M.Descripcion||M.descripcion||M.ArticuloNombre,cantidad:M.Cantidad||M.cantidad,existencia:0,unidadMedida:M.UnidadMedida||M.unidadMedida||"UND",cantidadUnidad:M.CantidadUnidad||M.cantidadUnidad||1,planUoM:M.PlanUoM||M.planUoM||"",costoUnitario:M.CostoUnitario||M.costoUnitario})))}}catch(_){console.error(_),alert("Error cargando transferencia")}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/transferencias"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(un,{className:"h-5 w-5"})}),r.jsx("div",{className:"flex flex-col",children:r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:n?"Transferencia ".concat(N.numeroTransferencia):"Orden de Transferencia"})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/transferencias"),className:"border-gray-300 text-gray-700",children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),!n&&r.jsxs(re,{size:"sm",onClick:C,disabled:a,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[a?r.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Registrar Envo"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(ZL,{title:"General",children:[r.jsx(rc,{label:"No. Transferencia",children:r.jsx(ge,{value:N.numeroTransferencia,disabled:!0,className:"bg-gray-50 border-gray-200"})}),r.jsx(rc,{label:"Fecha Envo",required:!0,children:r.jsx(ge,{type:"date",className:"font-medium",value:N.fecha,onChange:A=>D("fecha",A.target.value)})}),r.jsx(rc,{label:"Estado",children:r.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-bold uppercase",children:"Borrador"})}),r.jsx("div",{className:"col-span-1 md:col-span-3 h-px bg-gray-100 my-2"}),r.jsxs("div",{className:"flex items-end space-x-4 col-span-1 md:col-span-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(rc,{label:"Almacn Origen",required:!0,children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:N.almacenOrigenId,onChange:A=>D("almacenOrigenId",A.target.value),children:[r.jsx("option",{value:"",children:"Seleccione Origen"}),o.map(A=>r.jsx("option",{value:A.id,children:A.nombre},A.id))]})})}),r.jsx("div",{className:"pb-2 text-gray-400",children:r.jsx(Mp,{size:20})}),r.jsx("div",{className:"flex-1",children:r.jsx(rc,{label:"Almacn Destino",required:!0,children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:N.almacenDestinoId,onChange:A=>D("almacenDestinoId",A.target.value),children:[r.jsx("option",{value:"",children:"Seleccione Destino"}),o.map(A=>r.jsx("option",{value:A.id,children:A.nombre},A.id))]})})})]}),r.jsx(rc,{label:"Referencia / Chofer",children:r.jsx(ge,{placeholder:"Ej. Envo camin placa...",value:N.observaciones,onChange:A=>D("observaciones",A.target.value)})})]}),r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-100",children:[r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:"Artculos a Transferir"}),r.jsxs(re,{size:"sm",variant:"ghost",onClick:()=>b(!0),className:"text-hd-orange hover:text-orange-700 hover:bg-orange-50",children:[r.jsx(Lt,{size:16,className:"mr-1"})," Agregar Lnea (F2)"]})]}),r.jsx("div",{className:"overflow-x-auto min-h-[300px]",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[150px]",children:"Cdigo"}),r.jsx(le,{className:"",children:"Descripcin"}),r.jsx(le,{className:"w-[120px]",children:"Plan"}),r.jsx(le,{className:"w-[100px]",children:"Unidad"}),r.jsx(le,{className:"w-[100px] text-right",children:"Cant. Unid."}),r.jsx(le,{className:"w-[120px] text-right",children:"Existencia"}),r.jsx(le,{className:"w-[120px] text-right",children:"Cantidad"}),r.jsx(le,{className:"w-[120px] text-right",children:"Total"}),r.jsx(le,{className:"w-[50px]"})]})}),r.jsx(Vt,{children:c.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:8,className:"text-center py-20 text-gray-500 italic",children:'No hay artculos en esta transferencia. Haga clic en "Agregar Lnea" para comenzar.'})}):c.map((A,_)=>{var z,G,T;return r.jsxs(Te,{children:[r.jsx(H,{className:"font-mono text-xs",children:A.numeroArticulo}),r.jsx(H,{className:"text-xs",children:A.descripcion}),r.jsx(H,{className:"text-xs",children:r.jsxs("select",{className:"w-full text-xs border rounded p-1",value:A.planUoM||"",onChange:M=>E(_,"planUoM",M.target.value),children:[r.jsx("option",{value:"",children:"(Sin Plan)"}),h.map(M=>r.jsx("option",{value:M.planId,children:M.descripcion||M.planId},M.planId))]})}),r.jsx(H,{className:"text-xs",children:r.jsxs("select",{className:"w-full text-xs border rounded p-1",value:A.unidadMedida,onChange:M=>E(_,"unidadMedida",M.target.value),children:[r.jsx("option",{value:A.unidadOriginal,children:A.unidadOriginal}),(T=(G=(z=h.find(M=>M.planId===A.planUoM))==null?void 0:z.detalles)==null?void 0:G.filter(M=>M.unidadMedida!==A.unidadOriginal))==null?void 0:T.map(M=>r.jsx("option",{value:M.unidadMedida,children:M.unidadMedida},M.unidadMedida))]})}),r.jsx(H,{className:"text-xs text-right",children:r.jsx(ge,{type:"number",className:"h-8 text-right text-xs bg-gray-100 text-gray-500",value:A.cantidadUnidad||1,disabled:!0})}),r.jsx(H,{className:"text-xs text-right font-medium ".concat(A.existencia<=0?"text-red-500":"text-blue-600"),children:A.existencia!==void 0?A.existencia.toLocaleString():"-"}),r.jsx(H,{children:r.jsx(ge,{type:"number",className:"h-8 text-right text-xs",value:A.cantidad||"",min:"0.0001",onChange:M=>{const W=parseFloat(M.target.value);E(_,"cantidad",isNaN(W)?0:W)}})}),r.jsx(H,{className:"text-xs text-right font-bold text-gray-800",children:((A.cantidad||0)*(A.cantidadUnidad||1)).toLocaleString()}),r.jsx(H,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>P(_),className:"h-9 w-9 p-0 text-red-500 hover:bg-red-50",children:r.jsx(rr,{size:20})})})]},_)})})]})})]})]}),r.jsx(ul,{isOpen:y,onClose:()=>b(!1),onSelect:O})]})},ez=()=>{const e=$t(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{const u=await fetch("http://localhost:5006/api/Sellers");if(u.ok){const m=await u.json();s(m)}else console.error("Failed to fetch sellers")}catch(u){console.error("Error fetching sellers:",u)}finally{l(!1)}},f=async u=>{if(window.confirm("Est seguro de eliminar este vendedor?"))try{(await fetch("http://localhost:5006/api/Sellers/".concat(u),{method:"DELETE"})).ok?c():alert("Error al eliminar")}catch(m){console.error("Error deleting seller:",m)}},h=a.filter(u=>u.name.toLowerCase().includes(t.toLowerCase())||u.code.toLowerCase().includes(t.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Vendedores"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin del equipo de ventas"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(re,{onClick:()=>e("/vendedores/nuevo"),className:"bg-hd-orange hover:bg-orange-600 text-white shadow-md",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Vendedor"]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex gap-4",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ge,{placeholder:"Buscar por nombre o cdigo...",className:"pl-9 bg-white",value:t,onChange:u=>n(u.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-100/80",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[100px] font-semibold text-gray-700",children:"Cdigo"}),r.jsx(le,{className:"font-semibold text-gray-700",children:"Nombre"}),r.jsx(le,{className:"font-semibold text-gray-700",children:"Telfono"}),r.jsx(le,{className:"font-semibold text-gray-700",children:"Email"}),r.jsx(le,{className:"font-semibold text-gray-700",children:"Estado"}),r.jsx(le,{className:"text-right font-semibold text-gray-700",children:"Acciones"})]})}),r.jsx(Vt,{children:o?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Cargando vendedores..."})}):h.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No se encontraron vendedores"})}):h.map(u=>r.jsxs(Te,{className:"hover:bg-gray-50 transition-colors",children:[r.jsx(H,{className:"font-medium text-gray-900",children:u.code}),r.jsx(H,{className:"font-medium text-gray-800",children:u.name}),r.jsx(H,{className:"text-gray-600 text-sm",children:u.phone}),r.jsx(H,{className:"text-gray-600 text-sm",children:u.email}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(u.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:u.status==="Active"?"Activo":"Inactivo"})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/vendedores/editar/".concat(u.id)),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(zc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(u.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(rr,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},u.id))})]})})]})]})},JC=()=>{const e=$t(),{id:t}=xo(),[n,a]=x.useState(""),[s,o]=x.useState({code:"",name:"",phone:"",email:"",status:"Active"}),l=async h=>{try{const u=await fetch("http://localhost:5006/api/Sellers/".concat(h));if(u.ok){const m=await u.json();o(m)}else alert("No se pudo cargar el vendedor")}catch(u){console.error("Error:",u)}};x.useEffect(()=>{t&&l(t)},[t]);const c=h=>{const{name:u,value:m}=h.target;o(p=>({...p,[u]:m}))},f=async()=>{try{if(!s.name){alert("El nombre es obligatorio");return}const h=t?"PUT":"POST",u=t?"http://localhost:5006/api/Sellers/".concat(t):"http://localhost:5006/api/Sellers",m={...s,code:s.code||"V".concat(Math.floor(Math.random()*1e3))};(await fetch(u,{method:h,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok?a(t?"Vendedor actualizado correctamente.":"Vendedor registrado correctamente."):alert("Error al guardar")}catch(h){console.error("Error:",h),alert("Error de conexin")}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/vendedores"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Vendedores"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:t?"Editar Vendedor":"Nuevo Vendedor"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Tarjeta de Vendedor"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[n&&r.jsx("span",{className:"text-lg font-bold text-blue-400 animate-pulse",children:n}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/vendedores"),children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:f,className:"bg-hd-orange hover:bg-orange-600 text-white",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6 max-w-4xl mx-auto w-full",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Cdigo"}),r.jsx(ge,{name:"code",value:s.code,onChange:c,placeholder:"(Auto)",className:"bg-gray-50"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Nombre *"}),r.jsx(ge,{name:"name",value:s.name,onChange:c,placeholder:"Nombre completo"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Telfono"}),r.jsx(ge,{name:"phone",value:s.phone,onChange:c,placeholder:"(809) 000-0000"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Email"}),r.jsx(ge,{name:"email",value:s.email,onChange:c,placeholder:"vendedor@empresa.com"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Estado"}),r.jsxs("select",{name:"status",value:s.status,onChange:c,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange",children:[r.jsx("option",{value:"Active",children:"Activo"}),r.jsx("option",{value:"Inactive",children:"Inactivo"})]})]})]})})]})},Hu="http://localhost:5006/api",Wu="/Promotions",tz=async()=>{const e=await fetch("".concat(Hu).concat(Wu));if(!e.ok)throw new Error("Failed to fetch promotions");return e.json()},rz=async e=>{const t=await fetch("".concat(Hu).concat(Wu,"/").concat(e));if(!t.ok)throw new Error("Failed to fetch promotion");return t.json()},nz=async e=>{const t=await fetch("".concat(Hu).concat(Wu),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>null);console.error("Backend Error:",n);let a=(n==null?void 0:n.title)||(n==null?void 0:n.message)||"Failed to create promotion";if(n!=null&&n.errors){const s=Object.entries(n.errors).map(([o,l])=>"".concat(o,": ").concat(l.join(", "))).join("\n");a+="\n".concat(s)}throw new Error(a)}return t.json()},az=async(e,t)=>{const n=await fetch("".concat(Hu).concat(Wu,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update promotion");return n.status===204?!0:n.json()},bO=async e=>{const t=await fetch("".concat(Hu).concat(Wu,"/Calculate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to calculate promotions");return t.json()},Ku="http://localhost:5006/api",sz=async()=>{const e=await fetch("".concat(Ku,"/ReceiptTemplates"));if(!e.ok)throw new Error("Error al obtener plantillas");return e.json()},oz=async e=>{const t=await fetch("".concat(Ku,"/ReceiptTemplates/").concat(e));if(!t.ok)throw new Error("Error al obtener plantilla");return t.json()},iz=async(e="Venta")=>{const t=await fetch("".concat(Ku,"/ReceiptTemplates/default/").concat(e));if(!t.ok)throw new Error("Error al obtener plantilla por defecto");return t.json()},lz=async e=>{const t=await fetch("".concat(Ku,"/ReceiptTemplates"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error al crear plantilla");return t.json()},cz=async(e,t)=>{const n=await fetch("".concat(Ku,"/ReceiptTemplates/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al actualizar plantilla");return n.status===204?null:n.json()},O0=e=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(e),dz=e=>e?new Date(e).toLocaleDateString():"",uz=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",fz=({template:e,data:t},n)=>{if(!e||!t)return null;const a=e.config&&typeof e.config=="object"?e.config:typeof e.configuracionJSON=="string"?JSON.parse(e.configuracionJSON):null;if(!a)return null;const o=(a.width||80)===80?"302px":"219px",l=h=>h?h.split(".").reduce((u,m)=>u&&u[m]!==void 0?u[m]:void 0,t):"",c=h=>h?h.replace(/\{([\w\.]+)\}/g,(u,m)=>{const p=l(m);return p!=null?p:""}):"",f=(h,u)=>{const m={textAlign:h.alignment||"left",fontSize:"".concat(h.fontSize||10,"px"),fontWeight:h.bold?"bold":"normal",marginTop:"".concat(h.marginTop||0,"px"),marginBottom:"".concat(h.marginBottom||0,"px"),fontFamily:"monospace",whiteSpace:"pre-wrap",lineHeight:"1.2"};if(h.type==="line"){const v=h.style==="double"?"double":h.style==="dashed"?"dashed":"solid",j=h.style==="double"?"3px":"1px";return r.jsx("div",{style:{borderTop:"".concat(j," ").concat(v," black"),margin:"5px 0"}},u)}if(h.type==="space")return r.jsx("div",{style:{height:"".concat(h.height||10,"px")}},u);if(h.type==="image"&&h.source){const v=l(h.source);return v?r.jsx("div",{style:{textAlign:h.alignment||"center",marginBottom:m.marginBottom},children:r.jsx("img",{src:v,alt:"logo",style:{maxHeight:"".concat(h.height||60,"px"),maxWidth:"100%"}})},u):null}if(h.type==="table"){const v=t.items||t.receipt&&t.receipt.items||[],y=(h.columns||[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Precio",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}]).filter(E=>E.active!==!1),b=h.rowLayout||[{type:"columns"}],N=h.headerBorder||"dashed",k=N==="none"?"none":"1px ".concat(N," black"),D=(E,P)=>E?E.replace(/{(\w+)}/g,(C,O)=>{let A=P[O];return A===void 0?"":typeof A=="number"&&(O==="price"||O==="total"||O==="tax"||O==="discount")?O0(A):A}):"";return r.jsxs("div",{style:{width:"100%",fontSize:m.fontSize,fontFamily:"monospace",marginBottom:m.marginBottom},children:[r.jsx("div",{style:{display:"flex",borderBottom:k,paddingBottom:"2px",marginBottom:"2px",fontWeight:"bold"},children:y.map((E,P)=>r.jsx("div",{style:{width:"".concat(E.width,"%"),textAlign:E.alignment||"left",fontSize:E.fontSize?"".concat(E.fontSize,"px"):"inherit",fontWeight:E.bold?"bold":"inherit"},children:E.label},P))}),v.map((E,P)=>r.jsx("div",{style:{marginBottom:"4px",borderBottom:"1px dotted #eee"},children:b.map((C,O)=>C.type==="columns"?r.jsx("div",{style:{display:"flex"},children:y.map((A,_)=>{let z=E[A.field];return z===void 0&&A.field==="qty"&&(z=E.quantity),z===void 0&&A.field==="quantity"&&(z=E.qty),z===void 0&&(z=""),A.format==="currency"&&(z=O0(z)),r.jsx("div",{style:{width:"".concat(A.width,"%"),textAlign:A.alignment||"left",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:A.fontSize?"".concat(A.fontSize,"px"):"inherit",fontWeight:A.bold?"bold":"normal"},children:z},_)})},O):C.type==="text"?r.jsx("div",{style:{textAlign:C.alignment||"left",fontWeight:C.bold?"bold":"normal",fontSize:C.fontSize?"".concat(C.fontSize,"px"):"inherit",whiteSpace:"pre-wrap",marginTop:"1px",marginBottom:"1px"},children:D(C.text,E)},O):C.type==="separator"?r.jsx("div",{style:{borderBottom:C.style==="solid"?"1px solid black":"1px dashed black",margin:"2px 0",width:"100%"}},O):null)},P))]},u)}let p="";return h.type==="composite"||h.text&&h.text.includes("{")?p=c(h.text):h.source?p=l(h.source):p=h.text||"",h.format==="currency"&&(p=O0(p)),h.format==="date"&&(p=dz(p)),h.format==="time"&&(p=uz(p)),h.label&&h.type!=="composite"&&(p="".concat(h.label," ").concat(p)),r.jsx("div",{style:m,children:p},u)};return r.jsx("div",{ref:n,className:"receipt-container",style:{width:o,backgroundColor:"white",padding:"".concat(a.padding!==void 0?a.padding:10,"px"),margin:"0 auto",color:"black"},children:a.sections.filter(h=>h.visible).sort((h,u)=>h.order-u.order).map(h=>r.jsx("div",{className:"receipt-section",children:h.type==="table"?f({type:"table",...h},0):h.fields&&h.fields.map((u,m)=>f(u,m))},h.id))})},jO=Nt.forwardRef(fz),hz="http://localhost:5006/api",wO=async e=>{try{let t;try{const f=e.tipoRecibo||"Venta";t=await iz(f)}catch(f){console.warn("No se encontr plantilla por defecto, usando respaldo",f),t={config:{width:80,sections:[{id:"h",visible:!0,order:1,fields:[{type:"text",text:"RECIBO DE VENTA (RESPALDO)",alignment:"center",bold:!0}]},{id:"i",visible:!0,order:2,fields:[{type:"text",source:"receipt.total",label:"Total:",format:"currency",alignment:"right",fontSize:14}]}]}}}let n={};const a=typeof t.configuracionJSON=="string"?JSON.parse(t.configuracionJSON):t.configuracionJSON||t.config;if(a&&a.sections){const f=a.sections.filter(h=>h.viewBinding&&h.viewBinding.viewName);for(const h of f){const{viewName:u,mappingField:m}=h.viewBinding,p=m.split(".").reduce((v,j)=>v&&v[j]!==void 0?v[j]:null,e);if(p)try{const j=await fetch("".concat(hz,"/SqlMetadata/Execute/").concat(u,"?filterField=").concat("Numero","&filterValue=").concat(p));if(j.ok){const y=await j.json();if(y){const b={};Object.keys(y).forEach(N=>b[N]=y[N]),Object.keys(y).forEach(N=>b[N.toLowerCase()]=y[N]),n={...n,...b}}}}catch(v){console.error("Error cargando datos externos para vista ".concat(u,":"),v)}}}const s={...e,ext:n,company:e.company||{name:"POS CRONO",address:"Calle Principal #1",rnc:"123456789",phone:"809-555-5555"}},o=document.createElement("iframe");o.style.position="absolute",o.style.width="350px",o.style.height="800px",o.style.border="none",o.style.visibility="hidden",document.body.appendChild(o);const l=o.contentWindow.document;l.open(),l.write('\n            <html>\n            <head>\n                <style>\n                    body { margin: 0; padding: 0; font-family: monospace; }\n                    @media print {\n                        @page { margin: 0; size: auto; }\n                        body { margin: 0; }\n                    }\n                    .receipt-container { margin: 0 !important; border: none !important; box-shadow: none !important; }\n                </style>\n            </head>\n            <body>\n                <div id="root"></div>\n            </body>\n            </html>\n        '),l.close(),ID.createRoot(l.getElementById("root")).render(r.jsx(jO,{template:{...t,config:a},data:s})),setTimeout(()=>{o.contentWindow.focus(),o.contentWindow.print(),setTimeout(()=>{document.body.removeChild(o)},1e3)},500)}catch(t){console.error("Error al imprimir recibo:",t),alert("Error al imprimir recibo: Verifique la consola para ms detalles.")}},nc="http://localhost:5006/api",mz=({isOpen:e,onClose:t,cartData:n,onComplete:a,selectedWarehouseId:s=1,creditNote:o=null})=>{var F;const l=o?Math.min(o.amount,n.grandTotal):0,c=Math.max(0,n.grandTotal-l),[f,h]=x.useState(!1),[u,m]=x.useState([]),[p,v]=x.useState(""),[j,y]=x.useState("Efectivo"),[b,N]=x.useState(n.grandTotal.toString()),[k,D]=x.useState(0),[E,P]=x.useState([]),[C,O]=x.useState({id:1,nombre:"CONSUMIDOR FINAL (GENRICO)"}),[A,_]=x.useState(null),[z,G]=x.useState([]),[T,M]=x.useState(null),[W,Z]=x.useState(1);x.useEffect(()=>{if(e){B();const L=o?Math.min(o.amount,n.grandTotal):0,X=Math.max(0,n.grandTotal-L);N(X.toFixed(2))}},[e,o,n.grandTotal]);const B=async()=>{try{U();let L=null;try{const Y=await fetch("".concat(nc,"/CompanyConfiguration"));Y.ok&&(L=await Y.json(),_(L))}catch(Y){console.error("Error fetching config:",Y)}const X=await fetch("".concat(nc,"/Clients"));if(X.ok){const Y=await X.json(),me=Array.isArray(Y)?Y:Y.value||[];P(me);let xe=null;L&&L.defaultClientId&&(xe=me.find(Ge=>(Ge.id||Ge.Id)===L.defaultClientId)),xe||(xe=me.find(Ge=>(Ge.name||Ge.Name||"").toUpperCase().includes("CONSUMIDOR FINAL"))),xe&&O({id:xe.id||xe.Id,nombre:xe.name||xe.Name,tipoNCF:xe.tipoNCF||xe.TipoNCF,moneda:xe.moneda||xe.Moneda||"DOP"});const Pe=await fetch("".concat(nc,"/Monedas"));if(Pe.ok){const Ge=await Pe.json();G(Ge);const he=(xe==null?void 0:xe.moneda)||(xe==null?void 0:xe.Moneda)||"DOP",ie=Ge.find(Ce=>Ce.codigo===he);if(ie)M(ie.id),$(ie.id);else{const Ce=Ge.find(se=>se.esFuncional);Ce&&(M(Ce.id),Z(1))}}}}catch(L){console.error("Error loading checkout data:",L)}};x.useEffect(()=>{const L=parseFloat(b)||0,X=o?Math.min(o.amount,n.grandTotal):0,Y=Math.max(0,n.grandTotal-X);D(Math.max(0,L-Y))},[b,n.grandTotal,o]),x.useEffect(()=>{C&&C.tipoNCF&&u.some(X=>X.tipoNCF===C.tipoNCF)&&v(C.tipoNCF)},[C,u]);const U=async()=>{try{const L=await fetch("".concat(nc,"/Ventas/NCF/Sequences"));if(L.ok){const X=await L.json();m(X),X.length>0&&v(X[0].tipoNCF)}}catch(L){console.error("Error loading NCF sequences:",L)}},$=async L=>{if(!L)return;const X=z.find(Y=>Y.id===parseInt(L));if(X&&X.esFuncional){Z(1);return}try{const Y=await fetch("".concat(nc,"/Monedas/tasas?monedaId=").concat(L));if(Y.ok){const me=await Y.json();Z(me.tasa||1)}else Z(1)}catch(Y){console.error("Error fetching rate:",Y),Z(1)}},K=async()=>{try{h(!0);const L={ClienteId:parseInt(C.id),TipoNCF:p,Fecha:new Date,Subtotal:parseFloat(n.total),ITBIS:parseFloat(n.tax),Total:parseFloat(n.grandTotal),AlmacenId:parseInt(s),Usuario:"Gabriel",MetodoPago:j,MontoRecibido:parseFloat(j==="Efectivo"?b:n.grandTotal),Cambio:j==="Efectivo"?k:0,MonedaId:T,TasaCambio:W,Detalles:n.items.map(me=>{const xe=parseFloat(me.precioUnitario||me.PrecioUnitario||me.precio||0);return{ArticuloId:parseInt(me.id||me.Id),Cantidad:parseFloat(me.qty),PrecioUnitario:xe,ITBIS:parseFloat(xe*me.qty*.18),TotalLinea:parseFloat(xe*me.qty*1.18),AlmacenId:parseInt(s)}})};if(o){const me=Math.min(o.amount,n.grandTotal);L.CreditNoteId=parseInt(o.id),L.MontoPagoCredito=me,me>=n.grandTotal&&(L.MetodoPago="NotaCredito",L.MontoRecibido=0,L.Cambio=0)}const X=await fetch("".concat(nc,"/Ventas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!X.ok){const me=await X.json();throw new Error(me.message||"Error al procesar venta")}const Y=await X.json();try{const me={receipt:{number:Y.factura||Y.numeroFactura||Y.NumeroFactura,NumeroRecibo:Y.numeroRecibo||Y.NumeroRecibo||Y.factura||Y.numeroFactura,NumeroFactura:Y.factura||Y.numeroFactura||Y.NumeroFactura,ncf:Y.ncf,tipoNCF:Y.tipoNCF,date:Y.fecha,time:Y.fecha,cashier:L.Usuario,client:C.name||C.nombre||Y.nombreCliente||"CONSUMIDOR FINAL",subtotal:Y.subTotal||Y.subtotal||L.Subtotal,tax:Y.itbis||Y.tax||L.ITBIS,total:Y.total||L.Total,paymentMethod:j,receivedAmount:L.MontoRecibido,change:L.Cambio},company:A||{name:"POS CRONO",address:"Calle Principal #1",rnc:"123456789",phone:"809-555-5555"},items:n.items.map(xe=>({description:xe.name||xe.descripcion||xe.Descripcion,qty:xe.qty,price:parseFloat(xe.precioUnitario||xe.PrecioUnitario||xe.precio||0),total:parseFloat(xe.qty)*parseFloat(xe.precioUnitario||xe.PrecioUnitario||xe.precio||0)}))};await wO(me)}catch(me){console.error("Error al imprimir recibo:",me)}a(Y)}catch(L){alert(L.message)}finally{h(!1)}},V=L=>{const X=z.find(xe=>xe.id===parseInt(T)),Y=(X==null?void 0:X.simbolo)||"$",me=(X==null?void 0:X.codigo)||"DOP";return"".concat(me," ").concat(Y).concat(L.toLocaleString("en-US",{minimumFractionDigits:2}))};return r.jsx(ui,{open:e,onOpenChange:t,children:r.jsxs(fi,{className:"max-w-3xl bg-white p-0 overflow-hidden border-none shadow-2xl max-h-[92vh] flex flex-col",children:[r.jsxs("div",{className:"bg-hd-black px-4 py-3 text-white flex justify-between items-center shrink-0",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-black italic tracking-tighter",children:"FINALIZAR VENTA"}),r.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest hidden sm:block",children:"Resumen de transaccin"})]}),r.jsx(re,{variant:"ghost",onClick:t,size:"sm",className:"text-white hover:bg-white/10 h-8 w-8 p-0",children:r.jsx(Tt,{size:18})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 overflow-y-auto",children:[r.jsx("div",{className:"p-5 bg-gray-50 space-y-3 border-b md:border-b-0 md:border-r border-gray-200",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Subtotal"}),r.jsx("span",{className:"text-xs font-bold text-gray-800",children:V(n.total)})]}),n.autoDiscountTotal>0&&r.jsxs("div",{className:"flex justify-between items-center text-hd-orange animate-in fade-in",children:[r.jsx("span",{className:"text-[10px] font-bold uppercase italic",children:"Ahorro Promos"}),r.jsxs("span",{className:"text-xs font-black italic",children:["-",V(n.autoDiscountTotal)]})]}),o&&r.jsxs("div",{className:"flex justify-between items-center text-green-600 animate-in fade-in",children:[r.jsx("span",{className:"text-[10px] font-bold uppercase italic",children:"Nota Crdito"}),r.jsxs("span",{className:"text-xs font-black italic",children:["-",V(Math.min(o.amount,n.grandTotal))]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 mb-2",children:[r.jsx("span",{className:"text-xs font-bold text-gray-500",children:"ITBIS (18%)"}),r.jsx("span",{className:"text-xs font-bold text-gray-800",children:V(n.tax)})]}),r.jsxs("div",{className:"flex justify-between items-end bg-white p-3 rounded-lg border border-gray-100 shadow-sm",children:[r.jsx("span",{className:"text-sm font-black text-gray-900 uppercase italic",children:"TOTAL A PAGAR"}),r.jsx("span",{className:"text-2xl font-black text-hd-orange leading-none",children:V(Math.max(0,n.grandTotal-(o?o.amount:0)))})]}),((F=n.appliedPromotions)==null?void 0:F.length)>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:n.appliedPromotions.map((L,X)=>r.jsxs("span",{className:"text-[8px] bg-hd-orange/10 text-hd-orange px-1.5 py-0.5 rounded-full font-bold border border-hd-orange/20",children:[" ",L]},X))}),W>1&&r.jsx("div",{className:"text-right pt-2",children:r.jsxs("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:["Eq. DOP: ",(n.grandTotal*W).toLocaleString("en-US",{style:"currency",currency:"DOP"})]})})]})}),r.jsxs("div",{className:"p-5 space-y-4 flex flex-col h-full bg-white",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Mtodo de Pago"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>y("Efectivo"),className:"flex flex-row items-center justify-center gap-2 p-3 rounded-lg border transition-all ".concat(j==="Efectivo"?"border-green-500 bg-green-50 text-green-700":"border-gray-100 bg-gray-50 text-gray-400 hover:border-gray-200"),children:[r.jsx(vu,{size:18}),r.jsx("span",{className:"text-[10px] font-black uppercase",children:"Efectivo"})]}),r.jsxs("button",{onClick:()=>y("Tarjeta"),className:"flex flex-row items-center justify-center gap-2 p-3 rounded-lg border transition-all ".concat(j==="Tarjeta"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-100 bg-gray-50 text-gray-400 hover:border-gray-200"),children:[r.jsx(li,{size:18}),r.jsx("span",{className:"text-[10px] font-black uppercase",children:"Tarjeta"})]})]})]}),j==="Efectivo"&&r.jsxs("div",{className:"space-y-2 animate-in fade-in zoom-in-95 duration-200",children:[r.jsx("div",{className:"grid grid-cols-5 gap-1",children:[100,200,500,1e3,2e3].map(L=>r.jsxs("button",{onClick:()=>N(L.toFixed(2)),className:"bg-gray-100 h-7 rounded text-[10px] font-bold hover:bg-hd-orange hover:text-white transition-all border border-gray-200",children:["$",L]},L))}),r.jsx("button",{onClick:()=>N(n.grandTotal.toFixed(2)),className:"w-full bg-orange-50 h-7 rounded text-[9px] font-black text-hd-orange hover:bg-hd-orange hover:text-white transition-all border border-orange-200 uppercase tracking-widest",children:"Pagar Exacto"}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold text-xs",children:"Recibido:"}),r.jsx(ge,{type:"number",className:"text-xl font-black h-10 text-right pr-3 focus:ring-green-500 border-2 pl-20",value:b,onChange:L=>N(L.target.value),autoFocus:!0})]})}),r.jsxs("div",{className:"flex justify-between items-center bg-green-50 px-3 py-2 rounded-lg border border-green-100",children:[r.jsx("span",{className:"text-[10px] font-bold text-green-800 uppercase tracking-widest",children:"Cambio:"}),r.jsx("span",{className:"text-xl font-black text-green-600",children:V(k)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-100",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Cliente"}),r.jsx("select",{className:"w-full h-8 bg-gray-50 border rounded px-2 text-xs font-bold truncate options:text-xs",value:C.id,onChange:L=>{const X=E.find(Y=>Y.id===parseInt(L.target.value));X&&O(X)},children:E.map((L,X)=>r.jsx("option",{value:L.id,children:L.name||L.Name||L.nombre||L.Nombre},L.id||X))})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Moneda"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("select",{className:"flex-1 h-8 bg-gray-50 border rounded px-2 text-xs font-bold",value:T||"",onChange:L=>{const X=parseInt(L.target.value);M(X),$(X)},children:z.map(L=>r.jsx("option",{value:L.id,children:L.codigo},L.id))}),r.jsx("div",{className:"w-14 h-8 bg-gray-100 border rounded flex items-center justify-center font-mono text-[9px] font-bold text-gray-600",children:W.toFixed(2)})]})]})]})]}),r.jsx(re,{className:"w-full h-12 text-sm font-black uppercase tracking-widest shadow-lg transition-all active:scale-[0.98] ".concat(f?"bg-gray-400":"bg-hd-orange hover:bg-orange-600 shadow-orange-500/20"),disabled:f||j==="Efectivo"&&parseFloat(b)<c,onClick:K,children:f?r.jsx(Fn,{className:"animate-spin w-4 h-4"}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Tp,{size:16})," ",c===0?"CONFIRMAR":"COBRAR"]})})]})]})]})})},Ph="http://localhost:5006/api",pz="http://localhost:5006",gz=()=>{const e=hs(),[t,n]=x.useState(null),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState("Todas"),[h,u]=x.useState(!0),[m,p]=x.useState([]),[v,j]=x.useState(""),[y,b]=x.useState(!1),[N,k]=x.useState([]),[D,E]=x.useState(1),P=x.useRef(null),[C,O]=x.useState({}),[A,_]=x.useState({showStockBreakdown:!0,enableBeep:!0}),[z,G]=x.useState([]),[T,M]=x.useState([]),[W,Z]=x.useState(0);x.useEffect(()=>{var oe;(oe=e.state)!=null&&oe.creditNoteId&&(n({id:e.state.creditNoteId,amount:e.state.creditAmount}),window.history.replaceState({},document.title))},[e]),x.useEffect(()=>{const oe=()=>{const De=localStorage.getItem("pos_config");if(De)try{_(JSON.parse(De))}catch(Ue){}};oe();const Fe=()=>oe();window.addEventListener("pos_config_changed",Fe),L(),F(),K(),B(),V();const ze=De=>{var Ue;De.key==="F2"&&(De.preventDefault(),(Ue=P.current)==null||Ue.focus()),De.key===" "&&m.length>0&&!y&&(De.preventDefault(),b(!0))};return window.addEventListener("keydown",ze),()=>{window.removeEventListener("keydown",ze),window.removeEventListener("pos_config_changed",Fe)}},[m.length,y]);const B=async()=>{try{const oe=await fetch("".concat(Ph,"/Articulos/StockGlobal"));if(oe.ok){const Fe=await oe.json(),ze={};Fe.forEach(De=>{const Ue=(fe,pe)=>fe[pe]||fe[pe.toLowerCase()]||fe[pe.charAt(0).toUpperCase()+pe.slice(1)],Xe=Ue(De,"ArticuloId"),Ze=Ue(De,"AlmacenId"),J=Ue(De,"Cantidad");if(Xe){const fe={articuloId:Xe,almacenId:Ze,cantidad:J};ze[Xe]||(ze[Xe]=[]),ze[Xe].push(fe)}}),O(ze)}}catch(oe){console.error("Error loading stock breakdown",oe)}},[U,$]=x.useState(null),K=async()=>{try{const oe=await qa();k(oe);let Fe=null;try{const ze=localStorage.getItem("pos_config");ze&&(Fe=JSON.parse(ze).defaultWarehouseId)}catch(ze){}Fe&&oe.some(ze=>(ze.id||ze.Id)==Fe)?E(parseInt(Fe)):oe.length>0&&E(oe[0].id||oe[0].Id)}catch(oe){console.error("Error fetching warehouses:",oe)}};x.useEffect(()=>{(async()=>{try{const Fe=await fetch("".concat(Ph,"/CompanyConfiguration"));if(Fe.ok){const De=(await Fe.json()).defaultClientId||1,Ue=await fetch("".concat(Ph,"/Clients/").concat(De));if(Ue.ok){const Xe=await Ue.json();$(Xe)}}}catch(Fe){console.error("Error loading default client:",Fe)}})()},[]);const V=async()=>{try{const oe=await vo();G(oe)}catch(oe){console.error("Error fetching UoM planes",oe)}},F=async()=>{try{const oe=await fetch("".concat(Ph,"/Categorias"));if(oe.ok){const Fe=await oe.json();l([{id:0,nombre:"Todas"},...Fe])}}catch(oe){console.error("Error fetching categories:",oe)}},L=async()=>{try{u(!0);const oe=await dl();s(oe)}catch(oe){console.error("Error fetching products:",oe)}finally{u(!1)}};x.useEffect(()=>{const Fe=setTimeout(async()=>{if(m.length===0){Z(0),M([]);return}try{const De={Total:m.reduce((Xe,Ze)=>{const J=Ze.precioUnitario||Ze.PrecioUnitario||0;return Xe+J*Ze.qty},0),ClientId:U?U.id||U.Id:null,ApplyTo:"POS",Items:m.map(Xe=>({ProductId:Xe.id||Xe.Id,Quantity:Xe.qty||0,Price:Xe.precioUnitario||Xe.PrecioUnitario||0,Category:Xe.categoria||Xe.Categoria||null}))},Ue=await bO(De);Z(Ue.discountTotal),M(Ue.appliedPromotions||[])}catch(ze){console.error("Promotion calculation failed:",ze)}},500);return()=>clearTimeout(Fe)},[m,U]);const X=a.filter(oe=>{const Fe=(oe.descripcion||oe.Descripcion||"").toLowerCase().includes(v.toLowerCase())||(oe.numeroArticulo||oe.NumeroArticulo||"").toLowerCase().includes(v.toLowerCase())||(oe.codigoBarras||oe.CodigoBarras||"").toLowerCase().includes(v.toLowerCase()),ze=c==="Todas"||(oe.categoria||oe.Categoria)===c,De=A.filterByCurrency,Ue=Ze=>{if(!Ze)return"DOP";const J=Ze.toString().trim().toUpperCase();return J==="RD$"||J==="PESO"||J==="DOP"?"DOP":J==="US$"||J==="USD"?"USD":J==="EU"||J==="EUR"?"EUR":J};let Xe=!0;if(De){const Ze=(U==null?void 0:U.moneda)||(U==null?void 0:U.Moneda)||"DOP",J=Ue(Ze);let pe=(oe.preciosList||oe.PreciosList||[]).map(Ie=>Ue(Ie.moneda||Ie.Moneda));pe.length===0&&(pe=(oe.monedasDisponibles||oe.MonedasDisponibles||[]).map(Oe=>Ue(Oe))),pe.length===0&&(pe=["DOP"]),pe.includes(J)||(Xe=!1)}return Fe&&ze&&Xe}),Y=()=>{if(A.enableBeep!==!1)try{const oe=new(window.AudioContext||window.webkitAudioContext),Fe=oe.createOscillator(),ze=oe.createGain();Fe.connect(ze),ze.connect(oe.destination),Fe.type="sine",Fe.frequency.setValueAtTime(880,oe.currentTime),ze.gain.setValueAtTime(.1,oe.currentTime),ze.gain.exponentialRampToValueAtTime(.01,oe.currentTime+.1),Fe.start(),Fe.stop(oe.currentTime+.1)}catch(oe){console.error("Audio error:",oe)}},me=async oe=>{Y();const Fe=oe.id||oe.Id;p(ze=>{if(ze.find(Ze=>(Ze.id||Ze.Id)===Fe))return ze.map(Ze=>(Ze.id||Ze.Id)===Fe?{...Ze,qty:Ze.qty+1}:Ze);const Ue=oe.UnidadVenta||oe.unidadMedida||"UND";let Xe=oe.NivelPrecio||oe.nivelPrecio||"Precio al Detalle";return A.filterByPriceLevel&&A.selectedPriceLevel&&(Xe=A.selectedPriceLevel),[...ze,{...oe,qty:1,selectedUnit:Ue,selectedLevel:Xe}]});try{const ze=await rO(Fe).catch(()=>[]);p(De=>De.map(Ue=>{if((Ue.id||Ue.Id)===Fe){const Xe=oe.PlanMedida||oe.planMedida,Ze=z.find(Re=>Re.planId===Xe),J=Ue.selectedLevel||"Precio al Detalle",fe=Ue.selectedUnit,pe=U==null?void 0:U.moneda;let Ie=null;pe&&(Ie=ze.find(Re=>{const ee=Re.nivelPrecio||Re.NivelPrecio||"",ye=Re.unidadMedida||Re.UnidadMedida||"",Me=Re.moneda||Re.Moneda||"";return ee.toUpperCase()===J.toUpperCase()&&ye.toUpperCase()===fe.toUpperCase()&&Me===pe}),Ie||(Ie=ze.find(Re=>{const ee=Re.unidadMedida||Re.UnidadMedida||"",ye=Re.moneda||Re.Moneda||"";return ee.toUpperCase()===fe.toUpperCase()&&ye===pe}))),Ie||(Ie=ze.find(Re=>{const ee=Re.nivelPrecio||Re.NivelPrecio||"",ye=Re.unidadMedida||Re.UnidadMedida||"";return ee.toUpperCase()===J.toUpperCase()&&ye.toUpperCase()===fe.toUpperCase()}));let Oe=Ue.precioUnitario||Ue.PrecioUnitario,_e=Ue.Moneda||Ue.moneda||"DOP";return Ie&&(Oe=Ie.precio,_e=Ie.Moneda||Ie.moneda||"DOP"),{...Ue,precios:ze,planObj:Ze,precioUnitario:Oe,PrecioUnitario:Oe,moneda:_e}}return Ue}))}catch(ze){console.error("Error fetching prices for cart item",ze)}},xe=(oe,Fe)=>{Y(),p(ze=>ze.map(De=>{if((De.id||De.Id)===oe){const Xe=De.selectedLevel||"Precio al Detalle",Ze=U==null?void 0:U.moneda;let J=null;Ze&&(J=(De.precios||[]).find(Ie=>{const Oe=Ie.nivelPrecio||Ie.NivelPrecio||"",_e=Ie.unidadMedida||Ie.UnidadMedida||"",Re=Ie.moneda||Ie.Moneda||"";return Oe.toUpperCase()===Xe.toUpperCase()&&_e.toUpperCase()===Fe.toUpperCase()&&Re===Ze}),J||(J=(De.precios||[]).find(Ie=>{const Oe=Ie.unidadMedida||Ie.UnidadMedida||"",_e=Ie.moneda||Ie.Moneda||"";return Oe.toUpperCase()===Fe.toUpperCase()&&_e===Ze}))),J||(J=(De.precios||[]).find(Ie=>{const Oe=Ie.nivelPrecio||Ie.NivelPrecio||"",_e=Ie.unidadMedida||Ie.UnidadMedida||"";return Oe.toUpperCase()===Xe.toUpperCase()&&_e.toUpperCase()===Fe.toUpperCase()}));let fe=De.precioUnitario||De.PrecioUnitario,pe=De.moneda||"DOP";return J&&(fe=J.precio,pe=J.Moneda||J.moneda||"DOP"),{...De,selectedUnit:Fe,precioUnitario:fe,PrecioUnitario:fe,moneda:pe}}return De}))},Pe=(oe,Fe)=>{Fe>0&&Y(),p(ze=>ze.map(De=>{if((De.id||De.Id)===oe){const Xe=Math.max(1,De.qty+Fe);return{...De,qty:Xe}}return De}))},Ge=oe=>{p(Fe=>Fe.filter(ze=>(ze.id||ze.Id)!==oe))},he=m.reduce((oe,Fe)=>oe+(Fe.precioUnitario||Fe.PrecioUnitario||0)*Fe.qty,0),ie=(he-W)*.18,Ce=he-W+ie,se=oe=>{alert("Venta registrada: ".concat(oe.factura,"\nNCF: ").concat(oe.ncf)),p([]),b(!1),L(),B()};return r.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-64px)] overflow-hidden bg-gray-100 -m-6 animate-in fade-in duration-500 relative",children:[r.jsx(mz,{isOpen:y,onClose:()=>b(!1),cartData:{items:m,total:he,tax:ie,grandTotal:Ce,autoDiscountTotal:W,appliedPromotions:T},onComplete:se,selectedWarehouseId:D,creditNote:t}),t&&r.jsxs("div",{className:"absolute top-0 left-0 right-0 h-10 bg-green-600 text-white z-50 flex items-center justify-between px-6 font-bold text-sm shadow-md animate-in slide-in-from-top",children:[r.jsxs("span",{children:[" NOTA DE CRDITO APLICADA: $",t.amount.toLocaleString()]}),r.jsx("button",{onClick:()=>n(null),className:"hover:bg-green-700 px-2 rounded",children:r.jsx(Tt,{size:16})})]}),r.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 h-full overflow-hidden",children:[r.jsxs("div",{className:"bg-white shadow-sm z-10",children:[r.jsx("div",{className:"p-4 lg:p-6 pb-2",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative group flex-1",children:[r.jsx(Yt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-hd-orange transition-colors",size:20}),r.jsx("input",{ref:P,type:"text",placeholder:"Escanee o busque [F2]",className:"w-full pl-12 pr-4 py-3 bg-gray-100 rounded-xl border-2 border-transparent focus:border-hd-orange focus:bg-white transition-all text-base lg:text-lg font-bold placeholder:text-gray-400",value:v,onChange:oe=>j(oe.target.value),autoFocus:!0})]}),r.jsxs("div",{className:"flex flex-row lg:flex-col gap-2 lg:gap-1 w-full lg:w-48 items-center lg:items-stretch",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1 whitespace-nowrap lg:whitespace-normal",children:"Almacn Origen"}),r.jsx("select",{className:"flex-1 lg:flex-none h-[52px] px-4 rounded-xl border-2 border-gray-100 bg-gray-50 font-bold text-gray-700 focus:border-hd-orange transition-all outline-none appearance-none",value:D,onChange:oe=>E(parseInt(oe.target.value)),children:N.map(oe=>r.jsx("option",{value:oe.id,children:oe.nombre},oe.id))})]})]})}),r.jsx("div",{className:"flex gap-2 overflow-x-auto p-4 pt-0 no-scrollbar",children:o.map(oe=>r.jsx("button",{onClick:()=>f(oe.nombre),className:"px-4 py-2 rounded-full text-xs font-black uppercase whitespace-nowrap transition-all ".concat(c===oe.nombre?"bg-hd-orange text-white shadow-lg":"bg-gray-100 text-gray-500 hover:bg-gray-200"),children:oe.nombre},oe.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 content-start custom-scrollbar pb-24 lg:pb-6",children:h?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4",children:[r.jsx(Fn,{className:"animate-spin",size:48}),r.jsx("p",{className:"font-bold uppercase tracking-widest text-xs",children:"Cargando Inventario..."})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3 lg:gap-4",children:X.map(oe=>{const Fe=oe.id||oe.Id,ze=oe.descripcion||oe.Descripcion,De=oe.numeroArticulo||oe.NumeroArticulo;let Ue=oe.precioUnitario||oe.PrecioUnitario||0,Xe="DOP";const Ze=oe.preciosList||oe.PreciosList||[];if(U&&U.moneda){const Ie=U.moneda,Oe=U.nivelPrecio||"General";let _e=Ze.find(Re=>(Re.moneda===Ie||Re.Moneda===Ie)&&(Re.nivelPrecio===Oe||Re.NivelPrecio===Oe));_e||(_e=Ze.find(Re=>Re.moneda===Ie||Re.Moneda===Ie)),_e&&(Ue=_e.precio||_e.Precio,Xe=_e.moneda||_e.Moneda)}const J=C[Fe]||[],pe=J.filter(Ie=>(Ie.almacenId||Ie.AlmacenId)==D).reduce((Ie,Oe)=>Ie+(Oe.cantidad||Oe.Cantidad||0),0);return r.jsxs("div",{onClick:()=>pe>0&&me(oe),className:"bg-white rounded-2xl shadow-sm hover:shadow-2xl cursor-pointer transition-all hover:-translate-y-1 border-2 overflow-hidden select-none group flex flex-col h-auto ".concat(pe<=0?"opacity-60 grayscale cursor-not-allowed":"hover:border-hd-orange border-transparent"),children:[r.jsxs("div",{className:"h-40 bg-gray-100 relative overflow-hidden flex items-center justify-center",children:[oe.imagenUrl||oe.ImagenUrl?r.jsx("img",{src:(oe.imagenUrl||oe.ImagenUrl).startsWith("http")?oe.imagenUrl||oe.ImagenUrl:"".concat(pz).concat(oe.imagenUrl||oe.imagenUrl),alt:ze,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-300",children:[r.jsx(H6,{size:40,strokeWidth:1}),r.jsx("span",{className:"text-[10px] font-bold mt-2",children:"SIN IMAGEN"})]}),r.jsx("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:r.jsx("span",{className:"text-[10px] font-black px-2 py-1 rounded-lg shadow-sm ".concat(pe>0?"bg-white text-green-600":"bg-red-500 text-white"),children:pe>0?"".concat(pe," UD"):"AGOTADO"})}),A.showStockBreakdown&&J.length>0&&r.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-black/80 backdrop-blur-sm p-2 text-[10px] text-white flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-20 pointer-events-none",children:[r.jsx("div",{className:"text-[8px] uppercase tracking-widest text-gray-400 border-b border-gray-600 mb-1 pb-0.5",children:"Stock x Almacn"}),J.map((Ie,Oe)=>{const _e=Ie.almacenId,Re=N.find(ne=>(ne.id||ne.Id)==_e),ee=Re?Re.nombre||Re.Nombre:"Alm ".concat(_e),ye=Ie.cantidad,Me=_e==D;return r.jsxs("div",{className:"flex justify-between items-center px-1 ".concat(Me?"text-hd-orange font-bold":"text-gray-300"),children:[r.jsx("span",{className:"truncate max-w-[70%] text-[9px]",children:ee}),r.jsx("span",{className:"font-mono font-bold",children:ye})]},Oe)})]})]}),r.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] font-black text-gray-300 uppercase truncate tracking-widest mb-1",children:De}),r.jsx("h3",{className:"font-bold text-gray-800 text-xs leading-tight line-clamp-2 group-hover:text-hd-orange transition-colors",children:ze})]}),r.jsxs("div",{className:"flex items-end justify-between mt-2",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase",children:"Neto"}),r.jsxs("span",{className:"text-lg font-black text-gray-900 leading-none",children:[Xe," $",Ue.toLocaleString("en-US",{minimumFractionDigits:1})]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-hd-orange group-hover:bg-hd-orange group-hover:text-white transition-all transform group-hover:rotate-90",children:r.jsx(Lt,{size:20,strokeWidth:3})})]})]})]},Fe)})})})]}),r.jsxs("div",{className:"\n                w-full lg:w-[450px] flex flex-col bg-white shadow-2xl z-20 border-l border-gray-100\n                fixed lg:relative bottom-0 left-0 right-0 lg:bottom-auto lg:left-auto lg:right-auto\n                h-[50vh] lg:h-auto rounded-t-3xl lg:rounded-none transition-all duration-300\n                ".concat(m.length>0?"translate-y-0":"translate-y-[90%] lg:translate-y-0","\n            "),children:[r.jsx("div",{className:"lg:hidden w-full flex justify-center py-2 bg-hd-black rounded-t-3xl border-b border-gray-700/50 cursor-pointer",onClick:()=>{},children:r.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full"})}),r.jsx("div",{className:"p-4 lg:p-6 border-b bg-hd-black text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-hd-orange rounded-lg",children:r.jsx(io,{size:24,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-black text-lg lg:text-xl italic tracking-tighter",children:" BILLING TICKET"}),r.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest truncate max-w-[150px]",children:U?U.name||U.Name:"Cliente General"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"lg:hidden font-mono font-bold text-green-400 text-lg",children:["$",he.toLocaleString()]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>p([]),className:"text-gray-500 hover:text-red-500 hover:bg-white/10",disabled:m.length===0,children:r.jsx(rr,{size:20})})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-4 custom-scrollbar bg-gray-50/30",children:m.length===0?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-300 space-y-6 opacity-30 select-none py-10",children:[r.jsx(io,{size:80,strokeWidth:1}),r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-xl font-black italic",children:"VACO"})})]}):m.map((oe,Fe)=>{const ze=oe.id||oe.Id,De=oe.descripcion||oe.Descripcion,Ue=oe.precioUnitario||oe.PrecioUnitario||0;return r.jsxs("div",{className:"bg-white p-3 lg:p-4 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4 group animate-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs lg:text-sm font-black text-gray-800 line-clamp-2 leading-tight mb-1",children:De}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:"text-xs font-bold text-hd-orange",children:[oe.moneda||"DOP"," $",Ue.toLocaleString()]}),oe.planObj&&r.jsx("select",{className:"text-[10px] h-5 border rounded bg-gray-50 max-w-[80px]",value:oe.selectedUnit||oe.unidadMedida||"UND",onChange:Xe=>xe(ze,Xe.target.value),onClick:Xe=>Xe.stopPropagation(),children:(()=>{const Xe=oe.planObj;let Ze=[Xe.unidadBase,...Xe.detalles?Xe.detalles.map(Ie=>Ie.unidadMedida):[]];Ze=[...new Set(Ze)];const J=oe.selectedLevel||"Precio al Detalle",pe=(oe.precios||[]).filter(Ie=>(Ie.nivelPrecio||Ie.NivelPrecio||"").toUpperCase()===J.toUpperCase()).map(Ie=>(Ie.unidadMedida||Ie.UnidadMedida||"").toUpperCase());return pe.length>0&&(Ze=Ze.filter(Ie=>pe.includes(Ie.toUpperCase()))),Ze.map((Ie,Oe)=>r.jsx("option",{value:Ie,children:Ie},Oe))})()})]})]}),r.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1 border",children:[r.jsx("button",{onClick:()=>Pe(ze,-1),className:"w-8 h-8 flex items-center justify-center hover:bg-white hover:shadow-sm rounded-md transition-all text-gray-500",children:r.jsx(Q6,{size:14})}),r.jsx("span",{className:"w-8 lg:w-10 text-center text-xs lg:text-sm font-black text-gray-800",children:oe.qty}),r.jsx("button",{onClick:()=>Pe(ze,1),className:"w-8 h-8 flex items-center justify-center hover:bg-white hover:shadow-sm rounded-md transition-all text-gray-500",children:r.jsx(Lt,{size:14})})]}),r.jsx("div",{className:"text-right min-w-[60px] lg:min-w-[80px]",children:r.jsxs("p",{className:"text-xs lg:text-sm font-black text-gray-900",children:["$",(Ue*oe.qty).toLocaleString()]})}),r.jsx(LC,{permission:"POS_DELETE_LINE",behavior:"disable",children:r.jsx(re,{onClick:()=>Ge(ze),className:"text-gray-200 hover:text-red-500 transition-colors",variant:"ghost",size:"icon",children:r.jsx(Tt,{size:18})})})]},ze+"_"+Fe)})}),r.jsxs("div",{className:"p-4 lg:p-8 bg-white border-t space-y-3 lg:space-y-4 shadow-[0_-10px_20px_rgba(0,0,0,0.02)] pb-safe",children:[r.jsx("div",{className:"flex gap-2 mb-2 lg:mb-4 overflow-x-auto pb-2",children:r.jsx(LC,{permission:"POS_APPLY_DISCOUNT",behavior:"disable",children:r.jsxs(re,{variant:"outline",size:"sm",className:"text-xs font-bold uppercase tracking-widest text-hd-orange border-hd-orange/30 hover:bg-hd-orange hover:text-white transition-colors flex items-center gap-2 whitespace-nowrap",children:[r.jsx(Nl,{size:14})," Aplicar Descuento"]})})}),r.jsxs("div",{className:"space-y-1 lg:space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center text-gray-500 font-bold text-[10px] lg:text-xs uppercase tracking-widest",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["$",he.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),W>0&&r.jsxs("div",{className:"flex justify-between items-center text-hd-orange font-bold text-[10px] lg:text-xs uppercase tracking-widest",children:[r.jsx("span",{children:"Ahorro Promociones"}),r.jsxs("span",{children:["-$",W.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center text-gray-500 font-bold text-[10px] lg:text-xs uppercase tracking-widest",children:[r.jsx("span",{children:"ITBIS (18%)"}),r.jsxs("span",{children:["$",ie.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-end pt-2 border-t-2 border-dashed border-gray-100",children:[r.jsx("span",{className:"text-lg lg:text-xl font-black italic tracking-tighter text-gray-900",children:"NETO A PAGAR"}),r.jsxs("span",{className:"text-3xl lg:text-4xl font-black text-hd-orange tracking-tight",children:["$",Ce.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),T.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:T.map((oe,Fe)=>r.jsxs("span",{className:"text-[9px] bg-hd-orange/10 text-hd-orange px-2 py-0.5 rounded-full font-bold",children:[" ",oe]},Fe))})]}),r.jsxs(re,{onClick:()=>b(!0),disabled:m.length===0,className:"w-full h-14 lg:h-20 bg-hd-black hover:bg-gray-900 text-white rounded-xl lg:rounded-2xl flex flex-col items-center justify-center shadow-2xl shadow-gray-400/20 active:scale-[0.98] transition-all group",children:[r.jsxs("span",{className:"text-xl lg:text-2xl font-black flex items-center gap-3",children:["COBRAR ",r.jsx(li,{className:"group-hover:rotate-12 transition-transform"})]}),r.jsx("span",{className:"text-[9px] lg:text-[10px] font-bold text-gray-400 tracking-[0.3em] uppercase mt-0 lg:mt-1 hidden lg:block",children:"Presione SPACE"})]})]})]})]})},NO="http://localhost:5006/api/Clients",SO=async()=>{const e=await fetch(NO);if(!e.ok)throw new Error("Error al obtener clientes");return await e.json()},xz=async(e,t)=>{const n=await fetch("".concat(NO,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al actualizar cliente");return n.status===204?!0:await n.json()},Fp="http://localhost:5006/api",vz=async()=>{const e=await fetch("".concat(Fp,"/Ventas/UnifiedHistory"));if(!e.ok)throw new Error("Error al obtener historial");return e.json()},yz=async e=>{const t=await fetch("".concat(Fp,"/Ventas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.message||"Error al crear venta")}return t.json()},CO=async e=>{const t=await fetch("".concat(Fp,"/Ventas/").concat(e));if(!t.ok)throw new Error("Error al obtener detalle de venta");return t.json()},bz=async()=>{const e=await fetch("".concat(Fp,"/Ventas/NCF/Sequences"));if(!e.ok)throw new Error("Error al obtener secuencias NCF");return e.json()},jz=bz,Lp="http://localhost:5006/api",wz=async()=>{const e=await fetch("".concat(Lp,"/Cotizaciones"));if(!e.ok)throw new Error("Error al cargar cotizaciones");return await e.json()},QC=async e=>{const t=await fetch("".concat(Lp,"/Cotizaciones/").concat(e));if(!t.ok)throw new Error("Error al cargar detalle de cotizacin");return await t.json()},Nz=async e=>{const t=await fetch("".concat(Lp,"/Cotizaciones"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.message||"Error al guardar cotizacin")}return await t.json()},Sz=async(e,t)=>{const n=await fetch("".concat(Lp,"/Cotizaciones/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Error al actualizar cotizacin")}return await n.json()},ZC="http://localhost:5006/api",kO=({onSelect:e,onCancel:t})=>{const[n,a]=x.useState([]),[s,o]=x.useState(null),[l,c]=x.useState([]),[f,h]=x.useState(!1),[u,m]=x.useState(!1),[p,v]=x.useState("");x.useEffect(()=>{(async()=>{h(!0);try{const b=await fetch("".concat(ZC,"/Clients"));if(b.ok){const N=await b.json();a(N)}}catch(b){console.error("Error fetching clients",b)}finally{h(!1)}})()},[]),x.useEffect(()=>{if(!s){c([]);return}(async()=>{m(!0);try{console.log("Fetching invoices for client:",s);const b=await fetch("".concat(ZC,"/Ventas/ByClient/").concat(s.id));if(b.ok){const N=await b.json();console.log("Invoices loaded:",N),c(N)}else console.error("Failed to fetch invoices:",b.status)}catch(b){console.error("Error fetching invoices",b)}finally{m(!1)}})()},[s]);const j=n.filter(y=>(y.name||"").toLowerCase().includes(p.toLowerCase())||(y.code||"").toLowerCase().includes(p.toLowerCase()));return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-[#F96302] text-white rounded-t-lg",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Seleccionar Factura"}),r.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl",children:""})]}),r.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[r.jsxs("div",{className:"w-1/3 border-r flex flex-col bg-gray-50",children:[r.jsx("div",{className:"p-3 border-b",children:r.jsx("input",{type:"text",placeholder:"Buscar Cliente...",className:"w-full p-2 border rounded",value:p,onChange:y=>v(y.target.value)})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:f?r.jsx("p",{className:"p-4 text-center text-gray-500",children:"Cargando..."}):r.jsx("ul",{children:j.map(y=>r.jsxs("li",{onClick:()=>o(y),className:"p-3 border-b cursor-pointer hover:bg-orange-50 transition ".concat((s==null?void 0:s.id)===y.id?"bg-orange-100 border-l-4 border-l-[#F96302]":""),children:[r.jsx("div",{className:"font-semibold text-gray-700 text-sm",children:y.name}),r.jsx("div",{className:"text-xs text-gray-500",children:y.code})]},y.id))})})]}),r.jsxs("div",{className:"w-2/3 flex flex-col bg-white",children:[r.jsx("div",{className:"p-4 border-b bg-gray-50 h-16 flex items-center",children:s?r.jsxs("h3",{className:"font-bold text-lg",children:["Facturas de: ",r.jsx("span",{className:"text-[#F96302]",children:s.name})]}):r.jsx("p",{className:"text-gray-400 italic",children:"Seleccione un cliente para ver sus facturas"})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?r.jsx("p",{className:"text-center text-gray-500 mt-10",children:"Cargando facturas..."}):l.length>0?r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 text-left text-sm text-gray-600",children:[r.jsx("th",{className:"p-2 border-b",children:"Factura"}),r.jsx("th",{className:"p-2 border-b",children:"Fecha"}),r.jsx("th",{className:"p-2 border-b",children:"NCF"}),r.jsx("th",{className:"p-2 border-b text-right",children:"Total"}),r.jsx("th",{className:"p-2 border-b text-right",children:"Saldo"}),r.jsx("th",{className:"p-2 border-b"})]})}),r.jsx("tbody",{children:l.map(y=>{var b,N;return r.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[r.jsx("td",{className:"p-2 font-semibold text-gray-700 text-sm",children:y.numeroFactura||y.NumeroFactura}),r.jsx("td",{className:"p-2 text-sm",children:new Date(y.fecha||y.Fecha).toLocaleDateString()}),r.jsx("td",{className:"p-2 text-xs text-gray-500",children:y.ncf||y.NCF}),r.jsxs("td",{className:"p-2 text-right font-mono",children:["$",(b=y.total||y.Total)==null?void 0:b.toFixed(2)]}),r.jsxs("td",{className:"p-2 text-right font-mono text-red-600",children:["$",(N=y.saldo||y.Saldo)==null?void 0:N.toFixed(2)]}),r.jsx("td",{className:"p-2 text-right",children:r.jsx("button",{onClick:()=>e(y),className:"bg-[#F96302] text-white px-3 py-1 rounded text-sm hover:bg-[#d85502] transition",children:"Seleccionar"})})]},y.id||y.Id)})})]}):s?r.jsx("p",{className:"text-center text-gray-500 mt-10",children:"No hay facturas registradas para este cliente."}):null})]})]})]})})},Cz=({onSelect:e,onCancel:t,clientContextId:n})=>{const[a,s]=x.useState([]),[o,l]=x.useState(!1),[c,f]=x.useState("");x.useEffect(()=>{(async()=>{l(!0);try{const m=await wz();s(m)}catch(m){console.error("Error fetching quotations",m)}finally{l(!1)}})()},[]);const h=a.filter(u=>{var j,y,b;const m=n?u.clienteId===n||u.ClienteId===n:!0,p=c.toLowerCase(),v=((j=u.id)==null?void 0:j.toString().includes(p))||((y=u.clienteNombre)==null?void 0:y.toLowerCase().includes(p))||((b=u.observaciones)==null?void 0:b.toLowerCase().includes(p));return m&&v});return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[80vh] flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-blue-600 text-white rounded-t-lg",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Importar Cotizacin"}),r.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl",children:""})]}),r.jsx("div",{className:"p-4 bg-gray-50 border-b",children:r.jsx("input",{type:"text",placeholder:"Buscar por ID o Cliente...",className:"w-full p-2 border rounded",value:c,onChange:u=>f(u.target.value),autoFocus:!0})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o?r.jsx("p",{className:"text-center text-gray-500",children:"Cargando cotizaciones..."}):h.length===0?r.jsxs("p",{className:"text-center text-gray-500",children:["No se encontraron cotizaciones ",n?"para este cliente":"","."]}):r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 text-left text-sm text-gray-600",children:[r.jsx("th",{className:"p-2 border-b",children:"ID"}),r.jsx("th",{className:"p-2 border-b",children:"Fecha"}),r.jsx("th",{className:"p-2 border-b",children:"Cliente"}),r.jsx("th",{className:"p-2 border-b text-right",children:"Total"}),r.jsx("th",{className:"p-2 border-b"})]})}),r.jsx("tbody",{children:h.map(u=>{var m;return r.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[r.jsx("td",{className:"p-2 font-bold text-blue-600",children:u.id||u.Id}),r.jsx("td",{className:"p-2 text-sm",children:new Date(u.fecha||u.Fecha).toLocaleDateString()}),r.jsx("td",{className:"p-2 text-sm",children:u.clienteNombre||"Sin Nombre"}),r.jsxs("td",{className:"p-2 text-right font-mono font-bold",children:["$",(m=u.total||u.Total)==null?void 0:m.toFixed(2)]}),r.jsx("td",{className:"p-2 text-right",children:r.jsx("button",{onClick:()=>e(u),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition",children:"Importar"})})]},u.id||u.Id)})})]})})]})})},kz=({articuloId:e,warehouses:t=[]})=>{const[n,a]=x.useState([]),[s,o]=x.useState(!0),[l,c]=x.useState(t);x.useEffect(()=>{let u=!0;return e&&(async()=>{o(!0);try{const p=await SL(e);if(l.length===0){const v=await qa();u&&c(v)}u&&a(p)}catch(p){console.error("Error fetching stock tooltip:",p)}finally{u&&o(!1)}})(),()=>{u=!1}},[e]);const f=l.map(u=>{const m=u.id||u.Id,p=n.find(v=>{const j=v.almacenId||v.AlmacenId;return String(j)===String(m)});return{name:u.nombre||u.Nombre,qty:p?p.cantidad||p.Cantidad:0,id:m}}).filter(u=>u.qty!==0),h=n.reduce((u,m)=>u+(m.cantidad||m.Cantidad||0),0);return r.jsxs("div",{className:"absolute left-0 bottom-full mb-1 z-[9999] bg-black/90 backdrop-blur-md border border-gray-700 shadow-2xl rounded-md p-2 min-w-[200px] text-xs text-white animate-in fade-in zoom-in duration-200 pointer-events-none",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-600 pb-1 mb-1",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] uppercase tracking-widest text-gray-400",children:"Existencias"}),r.jsxs("span",{className:"text-[8px] text-gray-500 font-mono",children:["ID: ",e]})]}),r.jsx("span",{className:"font-bold text-sm ".concat(h>0?"text-green-400":"text-red-400"),children:h})]}),s?r.jsx("div",{className:"text-gray-500 text-[10px] italic py-1",children:"Cargando datos..."}):f.length===0?r.jsx("div",{className:"text-gray-500 text-[10px] text-center py-1",children:"Sin existencia registrada"}):r.jsx("div",{className:"space-y-1",children:f.map((u,m)=>r.jsxs("div",{className:"flex justify-between items-center px-1 hover:bg-white/5 rounded",children:[r.jsx("span",{className:"truncate max-w-[70%] text-gray-300 text-[10px]",children:u.name}),r.jsx("span",{className:"font-mono font-bold text-hd-orange",children:u.qty})]},m))}),r.jsx("div",{className:"absolute -bottom-1 left-4 w-2 h-2 bg-black/90 border-r border-b border-gray-700 transform rotate-45"})]})},zp="http://localhost:5006/api",PO=async e=>{try{const t=await fetch("".concat(zp,"/Returns/Create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||"Error creating return")}return await t.json()}catch(t){throw t}},Pz=async e=>{try{const t=await fetch("".concat(zp,"/Returns/Report/").concat(e));if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||"Error fetching return report")}return await t.json()}catch(t){throw t}},Ez=async(e,t)=>{try{const n=new URLSearchParams;e&&n.append("start",e),t&&n.append("end",t);const a=await fetch("".concat(zp,"/Returns?").concat(n.toString()));if(!a.ok)throw new Error("Error fetching returns history");return await a.json()}catch(n){throw n}},Az=async(e,t)=>{try{const n=new URLSearchParams;e&&n.append("start",e),t&&n.append("end",t);const a=await fetch("".concat(zp,"/CreditNotes?").concat(n.toString()));if(!a.ok)throw new Error("Error fetching credit notes history");return await a.json()}catch(n){throw n}},Iz=()=>{var Po,gs;const e=$t(),t=hs();x.useEffect(()=>{var ae,Ae;((ae=t.state)==null?void 0:ae.mode)==="edit_quotation"&&((Ae=t.state)!=null&&Ae.id)&&(n(t.state.id),window.history.replaceState({},document.title))},[t]);const n=async ae=>{try{j(!0);const Ae=await QC(ae),Se=Ae.header||Ae.Header||Ae,$e=Ae.details||Ae.Details||[];F(ae);let jt=Se.almacenId||Se.AlmacenId;!jt&&c.length>0&&(jt=c[0].id),C(ft=>({...ft,clienteId:Se.clienteId||Se.ClienteId,fecha:new Date().toISOString().split("T")[0],almacenId:jt,monedaId:Se.monedaId||Se.MonedaId,tasaCambio:Se.tasaCambio||Se.TasaCambio||1,condicionPago:Se.terminosPago||Se.TerminosPago||"Contado",referencia:"Editando Cotizacin #".concat(Se.numeroCotizacion||Se.NumeroCotizacion)}));const St=$e.map(ft=>({id:Date.now()+Math.random(),articuloId:ft.articuloId||ft.ArticuloId,codigo:ft.articuloCodigo||ft.ArticuloCodigo||"N/A",descripcion:ft.articuloDescripcion||ft.ArticuloDescripcion||"Producto",unidad:ft.unidadMedidaId||ft.UnidadMedidaId||"UND",cantidad:ft.cantidad||ft.Cantidad,precio:ft.precioUnitario||ft.PrecioUnitario,descuento:ft.descuentoMonto||ft.DescuentoMonto||0,taxRate:.18,total:ft.totalLinea||ft.TotalLinea,availablePrices:[]}));K(St),z(!0),A(!1),ee(ae);const yt={clienteId:Se.clienteId||Se.ClienteId,fecha:new Date().toISOString().split("T")[0],almacenId:jt,monedaId:Se.monedaId||Se.MonedaId,tasaCambio:Number(Se.tasaCambio||Se.TasaCambio||1),condicionPago:Se.terminosPago||Se.TerminosPago||"Contado",referencia:"Editando Cotizacin #".concat(Se.numeroCotizacion||Se.NumeroCotizacion)};Me(ft=>({...ft,quotation:{header:yt,items:St,appliedPromotions:[],lastTransactionId:ae,successMsg:""}})),E("Cotizacin #".concat(Se.numeroCotizacion||Se.NumeroCotizacion," cargada para edicin"))}catch(Ae){console.error(Ae),k("Error al cargar la cotizacin.")}finally{j(!1)}},[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState([]),[m,p]=x.useState([]),[v,j]=x.useState(!0),[y,b]=x.useState(!1),[N,k]=x.useState(""),[D,E]=x.useState(""),[P,C]=x.useState({clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1}),[O,A]=x.useState(!1),[_,z]=x.useState(!1),[G,T]=x.useState(!1),[M,W]=x.useState(!1),[Z,B]=x.useState(""),U=x.useMemo(()=>{if(!Z)return[];const ae=Z.toLowerCase();return o.filter(Ae=>{var Se,$e,jt;return((Se=Ae.descripcion)==null?void 0:Se.toLowerCase().includes(ae))||(($e=Ae.numeroArticulo)==null?void 0:$e.toLowerCase().includes(ae))||((jt=Ae.codigoBarras)==null?void 0:jt.toLowerCase().includes(ae))}).slice(0,8)},[o,Z]),[$,K]=x.useState([]),[V,F]=x.useState(null),[L,X]=x.useState(!1),[Y,me]=x.useState({taxId:"",address:"",phone:""}),[xe,Pe]=x.useState("UND"),[Ge,he]=x.useState(null),[ie,Ce]=x.useState([]),[se,oe]=x.useState(0),[Fe,ze]=x.useState(!1),[De,Ue]=x.useState(!1),[Xe,Ze]=x.useState(null),[J,fe]=x.useState(!1),[pe,Ie]=x.useState(null),[Oe,_e]=x.useState(!1),[Re,ee]=x.useState(null);x.useEffect(()=>{const ae=localStorage.getItem("pos_config");if(ae)try{const Ae=JSON.parse(ae);Ae.distributionDefaultUnit&&Pe(Ae.distributionDefaultUnit),_e(!!Ae.enableStockTooltip)}catch(Ae){console.error("Error loading config",Ae)}},[]),x.useEffect(()=>{Ge&&(setTimeout(()=>{const ae=document.getElementById("qty-".concat(Ge));ae&&(ae.focus(),ae.select())},100),he(null))},[Ge,$]);const[ye,Me]=x.useState({sale:{header:{clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1},items:[],appliedPromotions:[],lastTransactionId:null,successMsg:""},quotation:{header:{clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1},items:[],appliedPromotions:[],lastTransactionId:null,successMsg:""},return:{header:{clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1},items:[],appliedPromotions:[],lastTransactionId:null,successMsg:""}}),ne=ae=>{let Ae="sale";if(_?Ae="quotation":O&&(Ae="return"),Ae===ae)return;Me($e=>({...$e,[Ae]:{header:{...P},items:[...$],appliedPromotions:[...ie],lastTransactionId:Re,successMsg:D}}));const Se=ye[ae];C({...Se.header}),K([...Se.items]),Ce([...Se.appliedPromotions]),ee(Se.lastTransactionId),E(Se.successMsg),ae==="quotation"?(z(!0),A(!1)):ae==="return"?(z(!1),A(!0)):(z(!1),A(!1))};x.useEffect(()=>{(async()=>{try{const[Ae,Se,$e,jt,St]=await Promise.all([SO(),dl(),qa(),jz(),fetch("http://localhost:5006/api/Monedas").then(yt=>yt.json())]);if(s(Ae),l(Se),f($e),u(jt),p(St),$e.length>0){const yt=$e[0].id;C(ft=>({...ft,almacenId:yt})),Me(ft=>({sale:{...ft.sale,header:{...ft.sale.header,almacenId:yt}},quotation:{...ft.quotation,header:{...ft.quotation.header,almacenId:yt}},return:{...ft.return,header:{...ft.return.header,almacenId:yt}}}))}if(jt.length>0,St.length>0){const yt=St.find(ft=>ft.esFuncional);yt&&C(ft=>({...ft,monedaId:yt.id,tasaCambio:1}))}}catch(Ae){console.error(Ae),k("Error cargando datos iniciales.")}finally{j(!1)}})()},[]),x.useEffect(()=>{const Ae=setTimeout(async()=>{if($.length===0){oe(0),Ce([]);return}try{const $e={Total:$.reduce((St,yt)=>{const ft=parseFloat(yt.precio)||0,$r=parseFloat(yt.cantidad)||0;return St+ft*$r},0),ClientId:P.clienteId?parseInt(P.clienteId):null,ApplyTo:"Distribution",Items:$.map(St=>{const yt=o.find(ft=>ft.id===St.articuloId);return{ProductId:St.articuloId,Quantity:parseFloat(St.cantidad)||0,Price:parseFloat(St.precio)||0,Category:(yt==null?void 0:yt.categoria)||null}})},jt=await bO($e);oe(jt.discountTotal),Ce(jt.appliedPromotions||[])}catch(Se){console.error("Promotion calculation failed:",Se)}},500);return()=>clearTimeout(Ae)},[$,P.clienteId,o]);const q=async ae=>{if(!ae)return;const Ae=m.find(Se=>Se.id===parseInt(ae));if(Ae&&Ae.esFuncional){C(Se=>({...Se,tasaCambio:1}));return}try{const $e=await fetch("".concat("http://localhost:5006/api","/Monedas/tasas?monedaId=").concat(ae));if($e.ok){const jt=await $e.json();C(St=>({...St,tasaCambio:jt.tasa||1}))}}catch(Se){console.error("Error fetching rate:",Se)}},Q=x.useMemo(()=>{let ae=0,Ae=0;$.forEach(yt=>{const ft=parseFloat(yt.cantidad)||0,$r=parseFloat(yt.precio)||0,Pl=parseFloat(yt.descuento)||0,El=ft*$r-Pl;ae+=El,Ae+=El*(yt.taxRate||0)});const Se=ae,$e=(parseFloat(P.descuentoGlobalMonto)||0)+se;let jt=Se-$e;jt<0&&(jt=0);let St=Ae;if(Se>0){const yt=jt/Se;St=Ae*yt}else St=0,jt=0;return{rawSubtotal:Se,globalDiscount:$e,subtotal:jt,impuestos:St,total:jt+St}},[$,P.descuentoGlobalMonto]),[ve,be]=x.useState(null),Le=(ae,Ae)=>{K(Se=>Se.map($e=>$e.id!==ae?$e:{...$e,articuloId:Ae.id,codigo:Ae.numeroArticulo||Ae.codigo,descripcion:Ae.descripcion||Ae.nombre,unidad:Ae.unidad||Ae.unidadMedidaId||xe,precio:Ae.precio||Ae.precioVenta||0,availablePrices:Ae.preciosList||[],total:0})),be(null),T(!1)},Qe=ae=>{if(!P.clienteId){alert(" Seleccione un cliente para continuar.");return}const Ae=$.find($e=>$e.articuloId===ae.id);if(Ae){ct(Ae.id,{cantidad:Ae.cantidad+1});return}const Se={id:"temp-".concat(Date.now(),"-").concat(Math.floor(Math.random()*1e3)),articuloId:ae.id||ae.Id,codigo:ae.numeroArticulo||ae.NumeroArticulo||ae.codigo||ae.Codigo,descripcion:ae.descripcion||ae.Descripcion||ae.nombre||ae.Nombre,unidad:ae.unidad||ae.unidadMedida||ae.UnidadMedida||ae.unidadMedidaId||xe,cantidad:1,precio:ae.precio||ae.precioVenta||ae.PrecioVenta||0,descuento:0,taxRate:.18,total:0,availablePrices:ae.preciosList||[]};K([...$,Se]),he(Se.id),W(!1),B("")},tt=(ae,Ae)=>{var yt;const Se=$.find(ft=>ft.id===ae);if(!Se)return;let $e=Se.precio;const jt=((yt=m.find(ft=>ft.id==P.monedaId))==null?void 0:yt.codigo)||"DOP",St=Se.availablePrices.filter(ft=>ft.unidadMedida===Ae&&ft.activo&&ft.moneda===jt);if(St.length>0&&($e=St[0].precio,dt!=null&&dt.nivelPrecioId)){const ft=St.find($r=>$r.nivelPrecioId===dt.nivelPrecioId);ft&&($e=ft.precio)}ct(ae,{unidad:Ae,precio:$e})},ct=(ae,Ae)=>{K(Se=>Se.map($e=>$e.id!==ae?$e:{...$e,...Ae}))},Ft=ae=>{K(Ae=>Ae.filter(Se=>Se.id!==ae))},Dt=async()=>{if(!P.clienteId){k("Seleccione un cliente");return}let ae=P.almacenId;if(!ae&&c.length>0&&(ae=c[0].id,C(Ae=>({...Ae,almacenId:ae}))),!ae){k("Seleccione un almacn");return}if($.length===0){k("Agregue al menos un producto");return}b(!0),k(""),E("");try{if(_){const Ae={Fecha:P.fecha,ClienteId:Number(P.clienteId),AlmacenId:Number(P.almacenId),Usuario:"Admin",Subtotal:Q.subtotal,ITBIS:Q.impuestos,Total:Q.total,DescuentoMonto:Q.globalDiscount,MonedaId:P.monedaId?Number(P.monedaId):null,TasaCambio:Number(P.tasaCambio),Referencia:P.referencia,TerminosPago:P.condicionPago,Detalles:$.map(Se=>({ArticuloId:Number(Se.articuloId),Cantidad:Number(Se.cantidad),PrecioUnitario:Number(Se.precio),ITBIS:(Number(Se.cantidad)*Number(Se.precio)-(Se.descuento||0))*(Se.taxRate||0),TotalLinea:Number(Se.cantidad)*Number(Se.precio)-(Se.descuento||0),AlmacenId:Number(P.almacenId),DescuentoMonto:Number(Se.descuento||0),UnidadMedidaId:Se.unidad}))};if(V)await Sz(V,Ae),E("Cotizacin modificada con xito!");else{const Se=await Nz(Ae);ee(Se.id||Se.Id),E("Cotizacin creada con xito! #".concat(Se.numero))}}else if(O){const Ae=P.referencia.match(/#(\d+)/),Se=Ae?parseInt(Ae[1]):0;if(!Se)throw new Error("No se pudo identificar la factura de origen. Asegrese de que la referencia diga 'Factura #...'");const $e={VentaId:Se,Razon:P.referencia,TipoAccion:P.condicionPago,TotalReembolsado:Q.total,Usuario:"Admin",Detalles:$.map(St=>({ArticuloId:Number(St.articuloId),Cantidad:Math.abs(Number(St.cantidad)),PrecioUnitario:Number(St.precio),RetornarAlStock:!0}))},jt=await PO($e);ee(jt),E("Devolucin creada con xito! #".concat(jt))}else{const Ae={Fecha:P.fecha,ClienteId:Number(P.clienteId),TipoNCF:P.tipoNCF,AlmacenId:Number(P.almacenId),Usuario:"Admin",Subtotal:Q.subtotal,ITBIS:Q.impuestos,Total:Q.total,MonedaId:P.monedaId?Number(P.monedaId):null,TasaCambio:Number(P.tasaCambio),Referencia:P.referencia,TerminosPago:P.condicionPago,Detalles:$.map($e=>({ArticuloId:Number($e.articuloId),Cantidad:Number($e.cantidad),PrecioUnitario:Number($e.precio),ITBIS:(Number($e.cantidad)*Number($e.precio)-($e.descuento||0))*($e.taxRate||0),TotalLinea:Number($e.cantidad)*Number($e.precio)-($e.descuento||0),AlmacenId:Number(P.almacenId),DescuentoMonto:Number($e.descuento||0),UnidadMedidaId:$e.unidad}))},Se=await yz(Ae);ee(Se.id||Se.Id),E("Venta creada con xito! Factura: ".concat(Se.factura))}}catch(Ae){console.error(Ae),k(Ae.message)}finally{b(!1)}},Et=async()=>{if(P.clienteId)try{b(!0);const ae=a.find(Se=>Se.id==P.clienteId);if(!ae)return;const Ae={...ae,taxId:Y.taxId,address:Y.address,phone:Y.phone};await xz(ae.id,Ae),s(Se=>Se.map($e=>$e.id===ae.id?Ae:$e)),X(!1),E("Datos del cliente actualizados"),setTimeout(()=>E(""),3e3)}catch(ae){console.error(ae),k("Error al actualizar cliente")}finally{b(!1)}},qt=()=>{dt&&(me({taxId:dt.taxId||"",address:dt.address||"",phone:dt.phone||""}),X(!0))};x.useEffect(()=>{if(!P.clienteId)return;const ae=a.find(Ae=>Ae.id==P.clienteId);if(ae&&(ae.terminosPago&&C(Ae=>({...Ae,condicionPago:ae.terminosPago})),ae.tipoNCF&&C(Ae=>({...Ae,tipoNCF:ae.tipoNCF})),ae.moneda&&m.length>0)){const Ae=m.find(Se=>Se.codigo===ae.moneda);Ae&&C(Se=>({...Se,monedaId:Ae.id,tasaCambio:1}))}},[P.clienteId,a,m]);const dt=a.find(ae=>ae.id==P.clienteId),wr=(dt==null?void 0:dt.tipoNCF)&&dt.tipoNCF.trim()!=="";x.useEffect(()=>{if(h.length)if(O){const ae=h.find(Ae=>Ae.tipoNCF==="04");ae&&C(Ae=>({...Ae,tipoNCF:ae.tipoNCF}))}else if(wr)dt!=null&&dt.tipoNCF&&C(ae=>({...ae,tipoNCF:dt.tipoNCF}));else{const ae=h.find(Ae=>Ae.tipoNCF==="02")||h[0];ae&&C(Ae=>({...Ae,tipoNCF:ae.tipoNCF}))}},[O,h,wr,dt]);const er=async ae=>{if(ze(!1),!!ae){j(!0);try{const Ae=await CO(ae.id||ae.Id);C($e=>({...$e,clienteId:Ae.clienteId||Ae.ClienteId,referencia:"Devolucin Factura #".concat(Ae.numeroFactura||Ae.NumeroFactura),monedaId:Ae.monedaId,tipoNCF:"04"}));const Se=(Ae.detalles||Ae.Detalles||[]).map($e=>({id:Date.now()+Math.random(),articuloId:$e.articuloId||$e.ArticuloId,codigo:$e.articuloCodigo||"N/A",descripcion:$e.descripcion||$e.Descripcion,unidad:$e.unidadMedida||"UND",cantidad:$e.cantidad||$e.Cantidad,precio:$e.precioUnitario||$e.PrecioUnitario,taxRate:.18,descuento:0,stockActual:0}));K(Se),O||A(!0)}catch(Ae){console.error(Ae),alert("Error al importar la factura")}finally{j(!1)}}},la=async ae=>{if(fe(!1),!!ae){j(!0);try{const Ae=await QC(ae.id||ae.Id);C($e=>({...$e,clienteId:Ae.clienteId||Ae.ClienteId,referencia:"Desde Cotizacin #".concat(Ae.id||Ae.Id)}));const Se=(Ae.detalles||Ae.Detalles||[]).map($e=>({id:Date.now()+Math.random(),articuloId:$e.articuloId||$e.ArticuloId,codigo:$e.codigo||"N/A",descripcion:$e.descripcion||$e.Descripcion,unidad:$e.unidadMedida||"UND",cantidad:$e.cantidad||$e.Cantidad,precio:$e.precioUnitario||$e.PrecioUnitario,taxRate:$e.itbisPorcentaje?$e.itbisPorcentaje/100:.18,descuento:$e.descuento||$e.Descuento||0,stockActual:0}));K(Se),_&&z(!1)}catch(Ae){console.error(Ae),alert("Error al importar la cotizacin")}finally{j(!1)}}};if(v)return r.jsx("div",{className:"p-10 text-center",children:"Cargando datos..."});const kn=()=>{if(!Re)return;const Ae="http://localhost:5006/api".replace("/api","");let Se="";_?Se="".concat(Ae,"/Reports/Cotizacion?id=").concat(Re):O?Se="".concat(Ae,"/Reports/Devolucion?id=").concat(Re):Se="".concat(Ae,"/Reports/Factura?id=").concat(Re),window.open(Se,"_blank")},bi=()=>{if(!_||!Re)return;const ae="Desde Cotizacin #".concat(Re);ee(null),E(""),C(Ae=>({...Ae,referencia:ae})),z(!1),A(!1)},kl=()=>{_||O||!Re||Ue(!0)},Pn=ae=>{Ue(!1);const Ae="Devolucin Factura #".concat(Re);ee(null),E(""),A(!0),z(!1);const Se=h.find($e=>$e.tipoNCF==="04");C($e=>({...$e,referencia:Ae,tipoNCF:(Se==null?void 0:Se.tipoNCF)||"04",condicionPago:ae}))};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto pb-20 p-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-center justify-between sticky top-0 bg-gray-50/95 backdrop-blur z-20 py-4 lg:py-4 border-b border-gray-200 -mx-6 px-6 gap-4",children:[r.jsxs("div",{className:"w-full lg:w-auto text-center lg:text-left",children:[r.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 flex items-center justify-center lg:justify-start gap-2 whitespace-nowrap",children:_?r.jsx("span",{className:"text-blue-600",children:"Cotizacin"}):O?r.jsx("span",{className:"text-red-500",children:"Devolucin / Nota Crdito"}):"Orden de Venta"}),r.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:_?"Crear nueva cotizacin para cliente":O?"Procesar reembolso o cambio":"Nueva transaccin de venta"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full lg:w-auto",children:[r.jsxs("div",{className:"flex items-center gap-1 lg:gap-2 px-2 lg:px-3 py-1 lg:py-1.5 rounded-full border border-gray-300 shadow-sm bg-gray-50 scale-90 lg:scale-100",children:[r.jsx("button",{onClick:()=>ne("quotation"),className:"px-2 lg:px-3 py-1 rounded-full text-[10px] lg:text-xs font-bold transition-all ".concat(_?"bg-blue-600 text-white shadow":"text-gray-500 hover:bg-gray-200"),children:"COTIZACIN"}),r.jsx("button",{onClick:()=>ne("sale"),className:"px-2 lg:px-3 py-1 rounded-full text-[10px] lg:text-xs font-bold transition-all ".concat(!_&&!O?"bg-hd-orange text-white shadow":"text-gray-500 hover:bg-gray-200"),children:"VENTA"}),r.jsx("button",{onClick:()=>ne("return"),className:"px-2 lg:px-3 py-1 rounded-full text-[10px] lg:text-xs font-bold transition-all ".concat(O?"bg-red-600 text-white shadow":"text-gray-500 hover:bg-gray-200"),children:"DEVOLUCIN"})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-end gap-2 lg:space-x-3 w-full lg:w-auto",children:[!O&&!_&&r.jsxs(re,{variant:"outline",size:"sm",onClick:kl,disabled:!Re,className:"border-red-600 text-red-600 hover:bg-red-50 ".concat(Re?"":"opacity-50 cursor-not-allowed"," text-xs"),title:Re?"Convertir esta venta en una devolucin":"Guarde la venta primero para convertirla",children:[r.jsx(nl,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," ",r.jsx("span",{className:"hidden sm:inline",children:"Convertir a"})," Devolucin"]}),_&&r.jsxs(re,{variant:"outline",size:"sm",onClick:bi,disabled:!Re,className:"border-green-600 text-green-600 hover:bg-green-50 ".concat(Re?"":"opacity-50 cursor-not-allowed"," text-xs"),title:Re?"Convertir esta cotizacin a factura":"Guarde la cotizacin primero para facturarla",children:[r.jsx(xu,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," Facturar ",r.jsx("span",{className:"hidden sm:inline",children:"Cotizacin"})]}),O&&$.length===0&&r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>ze(!0),className:"border-red-600 text-red-600 hover:bg-red-50 text-xs",title:"Importar una factura para devolucin",children:[r.jsx(za,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," Importar Factura"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:kn,disabled:!Re,className:"border-blue-600 text-blue-600 hover:bg-blue-50 ".concat(Re?"":"opacity-50 cursor-not-allowed"," text-xs"),title:Re?"Imprimir Documento":"Guarde la transaccin primero para imprimir",children:[r.jsx(Is,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," ",r.jsx("span",{className:"hidden sm:inline",children:"Imprimir"})]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/ventas/historial"),className:"text-xs",children:[r.jsx(Tt,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," ",r.jsx("span",{className:"hidden sm:inline",children:"Cancelar"})]}),r.jsx(re,{disabled:y,size:"sm",onClick:Dt,className:"bg-hd-orange hover:bg-orange-600 text-xs px-2 lg:px-4",children:y?"...":r.jsxs(r.Fragment,{children:[r.jsx(Kt,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," Guardar"]})})]})]})]}),N&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded flex items-center",children:[r.jsx(Lc,{className:"mr-2 h-5 w-5"})," ",N]}),D&&r.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded flex items-center",children:[r.jsx(Kt,{className:"mr-2 h-5 w-5"})," ",D]}),r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs(We,{className:"mb-4 shadow-sm border-t-4 border-t-hd-orange bg-white",children:[r.jsxs("div",{className:"p-3 grid grid-cols-1 lg:grid-cols-12 gap-4 items-start",children:[r.jsxs("div",{className:"lg:col-span-4 space-y-1",children:[r.jsxs("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide flex justify-between",children:[r.jsx("span",{children:"Cliente"}),dt&&r.jsxs("span",{onClick:qt,className:"text-blue-600 cursor-pointer hover:underline flex items-center gap-1",children:[r.jsx(tL,{size:10})," Editar"]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("select",{className:"flex-1 h-9 rounded-md border border-gray-300 bg-white px-3 text-sm focus:outline-none focus:ring-1 focus:ring-blue-600 font-medium",value:P.clienteId,onChange:ae=>{const Ae=ae.target.value,Se=a.find(St=>St.id==Ae),$e=(Se==null?void 0:Se.tipoNCF)||(Se==null?void 0:Se.TipoNCF)||"";let jt=P.monedaId;if(Se!=null&&Se.moneda){const St=m.find(yt=>yt.codigo===Se.moneda);St&&(jt=St.id)}C(St=>({...St,clienteId:Ae,tipoNCF:$e||St.tipoNCF,monedaId:jt})),jt!=P.monedaId&&q(jt)},children:[r.jsx("option",{value:"",children:"-- Buscar Cliente --"}),a.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]})}),dt&&r.jsxs("div",{className:"flex gap-3 text-[11px] text-gray-600 pt-1",children:[r.jsx("span",{title:"RNC/Cdula",className:"font-mono bg-gray-100 px-1 rounded",children:dt.taxId||"N/A"}),r.jsxs("span",{title:"Balance Actual",className:"font-semibold ".concat(dt.balance>0?"text-red-600":"text-green-600"),children:["Bal: $",(Po=dt.balance)==null?void 0:Po.toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsx("span",{title:"Nivel Precio",children:dt.nivelPrecio})]})]}),r.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Tipo NCF"}),r.jsxs("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600 ".concat(wr?"bg-gray-50 text-gray-500":""),value:P.tipoNCF,onChange:ae=>C({...P,tipoNCF:ae.target.value}),disabled:wr||_,children:[r.jsx("option",{value:"",children:_?"-- No Aplica --":"-- Seleccionar --"}),h.map(ae=>r.jsx("option",{value:ae.tipoNCF,children:ae.nombre},ae.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Condicin"}),r.jsx("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600",value:P.condicionPago,onChange:ae=>C({...P,condicionPago:ae.target.value}),children:O?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"Efectivo",children:"Devolucin Efectivo"}),r.jsx("option",{value:"NotaCredito",children:"Nota de Crdito"}),r.jsx("option",{value:"Cambio",children:"Cambio de Mercanca"})]}):r.jsxs(r.Fragment,{children:[r.jsx("option",{children:"Contado"}),r.jsx("option",{children:"Crdito 15 das"}),r.jsx("option",{children:"Crdito 30 das"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Fecha"}),r.jsx(ge,{type:"date",className:"h-8 text-xs px-2",value:P.fecha,onChange:ae=>C({...P,fecha:ae.target.value})})]})]}),r.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Almacn"}),r.jsx("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600",value:P.almacenId,onChange:ae=>C({...P,almacenId:ae.target.value}),children:c.map(ae=>r.jsx("option",{value:ae.id,children:ae.nombre},ae.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Moneda"}),r.jsxs("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600",value:P.monedaId,onChange:ae=>{const Ae=ae.target.value;C(Se=>({...Se,monedaId:Ae})),q(Ae)},children:[r.jsx("option",{value:"",children:"--"}),m.map(ae=>r.jsx("option",{value:ae.id,children:ae.codigo},ae.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Tasa"}),r.jsx(ge,{className:"h-8 text-xs text-right bg-gray-50",value:P.tasaCambio,readOnly:!0})]})]}),r.jsx("div",{className:"lg:col-span-2 space-y-2",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Referencia"}),r.jsx(ge,{className:"h-8 text-xs",placeholder:"Opcional...",value:P.referencia,onChange:ae=>C({...P,referencia:ae.target.value})})]})})]}),dt&&r.jsxs("div",{className:"bg-gray-50/80 px-4 py-2 border-t border-gray-100 grid grid-cols-2 md:grid-cols-5 gap-4 text-xs",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Direccin:"}),r.jsx("span",{className:"font-medium text-gray-700",children:dt.address||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Telfono:"}),r.jsx("span",{className:"font-medium text-gray-700",children:dt.phone||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Vendedor:"}),r.jsx("span",{className:"font-medium text-gray-700",children:dt.vendedorId||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Lmite:"}),r.jsxs("span",{className:"font-medium text-gray-700",children:["$",(dt.creditLimit||0).toLocaleString()]})]})]})]}),r.jsx("div",{className:"flex flex-col lg:flex-row gap-6",children:r.jsxs(We,{className:"flex-1 shadow-md flex flex-col min-h-[500px]",children:[r.jsxs("div",{className:"bg-[#f0f0f0] border-b border-[#e1e1e1] flex items-center gap-2 px-2 py-1 h-10",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-600 px-2 border-r border-gray-300 mr-2",children:"LNEAS DE VENTA"}),r.jsxs("div",{className:"relative w-64 md:w-80 group",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2 h-4 w-4 text-gray-500 group-focus-within:text-blue-700"}),r.jsx("input",{type:"text",placeholder:"Escriba para buscar...",className:"w-full h-8 pl-9 pr-2 text-sm bg-white border border-gray-300 focus:border-blue-700 hover:border-gray-500 focus:ring-0 focus:outline-none transition-colors placeholder:text-gray-500",value:Z,onChange:ae=>{B(ae.target.value),W(!0)},onFocus:()=>W(!0),onKeyDown:ae=>{if(ae.key==="Enter"){if(!P.clienteId){alert(" Seleccione un cliente para buscar productos.");return}U.length>0?(Qe(U[0]),B("")):T(!0)}}}),M&&Z&&r.jsx("div",{className:"absolute top-8 left-0 w-[500px] bg-white border border-gray-400 shadow-[0_4px_12px_rgba(0,0,0,0.15)] max-h-80 overflow-y-auto z-50 rounded-sm",children:U.length===0?r.jsxs("div",{className:"p-3 text-center text-gray-500 text-xs cursor-pointer hover:bg-gray-100",onClick:()=>T(!0),children:["Sin resultados. ",r.jsx("span",{className:"text-blue-700 font-semibold hover:underline",children:"Abrir Catlogo Avanzado (F4)"})]}):U.map(ae=>r.jsxs("div",{className:"px-3 py-2 hover:bg-[#EDEBE9] cursor-pointer border-b border-gray-100 grid grid-cols-[1fr,auto] gap-4 items-center group/item transition-colors",onClick:()=>Qe(ae),children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800 text-sm group-hover/item:text-black",children:ae.descripcion}),r.jsxs("div",{className:"text-[11px] text-gray-500 font-mono flex gap-2",children:[r.jsx("span",{className:"text-gray-600",children:ae.numeroArticulo}),ae.codigoBarras&&r.jsxs("span",{className:"text-gray-400",children:["| ",ae.codigoBarras]}),r.jsxs("span",{className:"bg-gray-100 text-gray-600 px-1 rounded border border-gray-200",children:["Disp: ",ae.stockActual||0]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold text-gray-800 text-sm",children:["$",(ae.precioVenta||ae.precioUnitario||0).toFixed(2)]}),r.jsx("div",{className:"text-[10px] text-gray-400",children:ae.unidadMedidaId||"UND"})]})]},ae.id))})]}),r.jsxs("button",{onClick:()=>{if(!P.clienteId){alert(" Seleccione un cliente para abrir el catlogo.");return}T(!0)},className:"flex items-center gap-2 px-3 py-2 text-sm font-bold text-white bg-hd-orange hover:bg-orange-600 transition-colors rounded-md shadow-sm",title:"Abrir catlogo avanzado de productos",children:[r.jsx(Lt,{className:"h-4 w-4 text-white"}),r.jsx("span",{children:"Agregar Productos"})]}),r.jsx("div",{className:"flex-grow"})]}),r.jsx("div",{className:"hidden"}),r.jsx(ul,{isOpen:G,onClose:()=>{T(!1),be(null)},onSelect:ae=>{ve?Le(ve,ae):Qe(ae)},clientContext:{nivelPrecio:dt==null?void 0:dt.nivelPrecio,moneda:((gs=m.find(ae=>ae.id==P.monedaId))==null?void 0:gs.codigo)||"DOP"}}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500 ml-auto hidden md:flex px-4 py-2 border-b border-gray-100",children:[r.jsxs("span",{className:"mr-2",children:["Items: ",r.jsx("strong",{children:$.length})]}),r.jsxs("span",{children:["Total Qty: ",r.jsx("strong",{children:$.reduce((ae,Ae)=>ae+Ae.cantidad,0)})]})]}),r.jsx("div",{className:"flex-1 overflow-auto bg-white min-h-[300px]",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-100 sticky top-0 z-10 shadow-sm",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[50px] text-center",children:"#"}),r.jsx(le,{className:"w-[120px]",children:"Cdigo"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{className:"w-[80px]",children:"Unidad"}),r.jsx(le,{className:"w-[80px] text-right",children:"Cant."}),r.jsx(le,{className:"w-[100px] text-right",children:"Precio"}),r.jsx(le,{className:"w-[80px] text-right",children:"Desc. (%)"}),r.jsx(le,{className:"w-[90px] text-right",children:"Desc. ($)"}),r.jsx(le,{className:"w-[90px] text-right",children:"Impuesto"}),r.jsx(le,{className:"w-[100px] text-right",children:"Total"}),r.jsx(le,{className:"w-[50px]"})]})}),r.jsxs(Vt,{children:[$.map((ae,Ae)=>r.jsxs(Te,{className:"hover:bg-gray-50 group border-b border-gray-100 last:border-0 transition-colors",children:[r.jsx(H,{className:"text-center text-xs text-gray-400 font-normal",children:Ae+1}),r.jsxs(H,{className:"font-mono text-xs font-semibold text-gray-700 relative",children:[ae.codigo,r.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-hd-orange",onClick:()=>{be(ae.id),T(!0)},title:"Editar Artculo",children:r.jsx(Yt,{size:14})})]}),r.jsxs(H,{className:"font-medium text-gray-700 relative",onMouseEnter:()=>Oe&&Ie(ae.articuloId),onMouseLeave:()=>Oe&&Ie(null),children:[ae.descripcion,Oe&&pe===ae.articuloId&&r.jsx(kz,{articuloId:ae.articuloId,warehouses:c})]}),r.jsx(H,{children:(()=>{var St;const Se=((St=m.find(yt=>yt.id==P.monedaId))==null?void 0:St.codigo)||"DOP",$e=(ae.availablePrices||[]).filter(yt=>yt.activo&&(!yt.moneda||yt.moneda===Se)),jt=[...new Set($e.map(yt=>yt.unidadMedida))];return ae.unidad&&!jt.includes(ae.unidad)&&jt.unshift(ae.unidad),jt.length>0?r.jsx("div",{className:"relative group",children:r.jsx("select",{className:"w-full bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-xs font-medium text-gray-700",value:ae.unidad,onChange:yt=>tt(ae.id,yt.target.value),children:jt.map(yt=>r.jsx("option",{value:yt,children:yt},yt))})}):r.jsx("input",{type:"text",className:"w-full bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-xs font-medium text-gray-600 uppercase",value:ae.unidad||xe,readOnly:!0})})()}),r.jsx(H,{children:r.jsx("input",{id:"qty-".concat(ae.id),type:"number",className:"w-full text-right bg-gray-50 border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 focus:bg-white p-1 h-8 rounded text-sm font-bold",value:ae.cantidad,onChange:Se=>{const $e=parseInt(Se.target.value);ct(ae.id,{cantidad:isNaN($e)?0:$e})},min:"1",onKeyDown:Se=>{Se.key==="Enter"&&(Se.preventDefault(),Se.target.blur())}})}),r.jsx(H,{children:r.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-sm text-gray-600",value:ae.precio,onChange:Se=>ct(ae.id,{precio:Se.target.value}),onBlur:Se=>ct(ae.id,{precio:parseFloat(Se.target.value)||0})})}),r.jsx(H,{children:r.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-sm text-gray-600",value:ae.descuentoPorcentaje||"",placeholder:"0%",onChange:Se=>{const $e=Se.target.value,jt=parseFloat(ae.cantidad)||0,St=parseFloat(ae.precio)||0,ft=jt*St*((parseFloat($e)||0)/100);ct(ae.id,{descuentoPorcentaje:$e,descuento:ft.toFixed(2)})},onBlur:Se=>{let $e=parseFloat(Se.target.value)||0;$e>100&&($e=100),$e<0&&($e=0);const jt=parseFloat(ae.cantidad)||0,St=parseFloat(ae.precio)||0,ft=jt*St*($e/100);ct(ae.id,{descuentoPorcentaje:$e,descuento:ft})}})}),r.jsx(H,{children:r.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-sm text-gray-600",value:ae.descuento||"",placeholder:"0.00",onChange:Se=>{const $e=Se.target.value,jt=parseFloat($e)||0,St=parseFloat(ae.cantidad)||0,yt=parseFloat(ae.precio)||0,ft=St*yt;let $r=0;ft>0&&($r=jt/ft*100),ct(ae.id,{descuento:$e,descuentoPorcentaje:$r.toFixed(2)})},onBlur:Se=>{let $e=parseFloat(Se.target.value)||0;const jt=ae.cantidad*ae.precio;$e>jt&&(alert("El descuento no puede ser mayor al monto de la lnea."),$e=0);let St=0;jt>0&&(St=$e/jt*100),ct(ae.id,{descuento:$e,descuentoPorcentaje:St})}})}),r.jsxs(H,{className:"text-right text-xs text-gray-500",children:["$",((ae.cantidad*ae.precio-(ae.descuento||0))*(ae.taxRate||0)).toFixed(2)]}),r.jsxs(H,{className:"text-right font-bold text-gray-900 bg-gray-50/50",children:["$",((ae.cantidad*ae.precio-(ae.descuento||0))*(1+(ae.taxRate||0))).toFixed(2)]}),r.jsx(H,{children:r.jsx("button",{onClick:()=>Ft(ae.id),className:"text-gray-300 hover:text-red-500 transition-colors p-2",children:r.jsx(rr,{size:16})})})]},ae.id)),$.length===0&&r.jsx(Te,{children:r.jsx(H,{colSpan:8,className:"text-center py-20",children:r.jsxs("div",{className:"flex flex-col items-center opacity-30",children:[r.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:r.jsx(Lt,{className:"h-8 w-8 text-gray-400"})}),r.jsx("div",{className:"text-lg font-medium text-gray-600",children:"Lista Vacia"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Use la barra de bsqueda para agregar productos"})]})})})]})]})}),r.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-b-lg",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[r.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[r.jsx("p",{children:"Usuario: Admin"}),r.jsx("p",{children:"Terminal: POS-01"})]}),r.jsxs("div",{className:"flex gap-8 items-end",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-gray-400 text-xs uppercase mb-1",children:"Subtotal"}),r.jsxs("div",{className:"text-xl font-medium",children:["$",Q.rawSubtotal.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"text-right flex flex-col items-end",children:[r.jsx("div",{className:"text-gray-400 text-xs uppercase mb-1",children:"Desc. General"}),r.jsxs("div",{className:"flex gap-2 w-48",children:[r.jsxs("div",{className:"relative w-1/2",children:[r.jsx("input",{type:"number",className:"w-full bg-gray-800 border border-gray-700 rounded text-right p-1 text-sm text-white focus:border-hd-orange focus:outline-none",placeholder:"%",value:P.descuentoGlobalPorcentaje||"",onChange:ae=>{const Ae=parseFloat(ae.target.value)||0,Se=Q.rawSubtotal*(Ae/100);C($e=>({...$e,descuentoGlobalPorcentaje:ae.target.value,descuentoGlobalMonto:Se.toFixed(2)}))}}),r.jsx("span",{className:"absolute left-1 top-1 text-xs text-gray-500",children:"%"})]}),r.jsx("div",{className:"relative w-1/2",children:r.jsx("input",{type:"number",className:"w-full bg-gray-800 border border-gray-700 rounded text-right p-1 text-sm text-white focus:border-hd-orange focus:outline-none",placeholder:"$",value:P.descuentoGlobalMonto||"",onChange:ae=>{const Ae=parseFloat(ae.target.value)||0;let Se=0;Q.rawSubtotal>0&&(Se=Ae/Q.rawSubtotal*100),C($e=>({...$e,descuentoGlobalMonto:ae.target.value,descuentoGlobalPorcentaje:Se.toFixed(2)}))}})})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-gray-400 text-xs uppercase mb-1",children:"Impuestos"}),r.jsxs("div",{className:"text-xl font-medium",children:["$",Q.impuestos.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"text-right pl-8 border-l border-gray-700",children:[r.jsx("div",{className:"text-sm uppercase font-bold mb-1 ".concat(O?"text-red-500":"text-hd-orange"),children:O?"Total a Devolver":"Total General"}),r.jsxs("div",{className:"text-4xl font-bold tracking-tight",children:["$",Q.total.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),ie.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex flex-wrap gap-2",children:[r.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-500 flex items-center gap-1 w-full mb-1",children:[r.jsx(HD,{size:12,className:"text-hd-orange"})," Promociones Aplicadas:"]}),ie.map((ae,Ae)=>r.jsx("div",{className:"bg-hd-orange/10 border border-hd-orange/30 text-hd-orange px-2 py-0.5 rounded text-[11px] font-bold flex items-center gap-1 animate-in fade-in zoom-in duration-300",children:ae},Ae)),r.jsxs("div",{className:"ml-auto text-hd-orange text-xs font-bold",children:["Ahorro total: -$",se.toFixed(2)]})]})]})]})})]}),r.jsx(ui,{open:L,onOpenChange:X,children:r.jsxs(fi,{className:"sm:max-w-fit",children:[r.jsx(VC,{children:r.jsx(Yy,{children:"Editar Datos del Cliente"})}),r.jsxs("div",{className:"grid gap-4 py-4 px-2",children:[r.jsxs("div",{className:"grid grid-cols-[100px_auto] items-center gap-4",children:[r.jsx("label",{htmlFor:"taxId",className:"text-right text-sm font-bold text-gray-700",children:"RNC/Cdula"}),r.jsx(ge,{id:"taxId",value:Y.taxId,onChange:ae=>me({...Y,taxId:ae.target.value}),className:"h-9 w-[300px]"})]}),r.jsxs("div",{className:"grid grid-cols-[100px_auto] items-center gap-4",children:[r.jsx("label",{htmlFor:"address",className:"text-right text-sm font-bold text-gray-700",children:"Direccin"}),r.jsx(ge,{id:"address",value:Y.address,onChange:ae=>me({...Y,address:ae.target.value}),className:"h-9 w-[300px]"})]}),r.jsxs("div",{className:"grid grid-cols-[100px_auto] items-center gap-4",children:[r.jsx("label",{htmlFor:"phone",className:"text-right text-sm font-bold text-gray-700",children:"Telfono"}),r.jsx(ge,{id:"phone",value:Y.phone,onChange:ae=>me({...Y,phone:ae.target.value}),className:"h-9 w-[300px]"})]})]}),r.jsxs(AL,{children:[r.jsx(re,{variant:"outline",onClick:()=>X(!1),children:"Cancelar"}),r.jsx(re,{onClick:Et,className:"bg-hd-orange hover:bg-orange-600 font-bold",children:"Guardar Cambios"})]})]})}),G&&r.jsx(ul,{isOpen:G,onClose:()=>T(!1),onSelect:ae=>{ve?Le(ve,ae):Qe(ae),T(!1)}}),Fe&&r.jsx(kO,{isOpen:Fe,onClose:()=>ze(!1),onSelect:ae=>{er(ae),ze(!1)}}),J&&r.jsx(Cz,{isOpen:J,onClose:()=>fe(!1),onSelect:ae=>{la(ae),fe(!1)}}),r.jsx(ui,{open:De,onOpenChange:Ue,children:r.jsxs(fi,{className:"sm:max-w-3xl",children:[r.jsx(VC,{children:r.jsx(Yy,{className:"text-center text-xl font-bold",children:"Seleccione Mtodo de Devolucin"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-6 py-4",children:[r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(re,{onClick:()=>Pn("Inventario"),onMouseEnter:()=>Ze("Inventario"),onMouseLeave:()=>Ze(null),className:"bg-slate-800 hover:bg-slate-700 text-white h-16 text-lg font-semibold shadow-md justify-start px-6",children:[r.jsx(Ji,{className:"mr-3 h-6 w-6"})," Solo Devolucin (Inv)"]}),r.jsxs(re,{onClick:()=>Pn("Efectivo"),onMouseEnter:()=>Ze("Efectivo"),onMouseLeave:()=>Ze(null),className:"bg-red-600 hover:bg-red-700 text-white h-16 text-lg font-semibold shadow-md justify-start px-6",children:[r.jsx(vu,{className:"mr-3 h-6 w-6"})," Reembolso (Efectivo)"]}),r.jsxs(re,{onClick:()=>Pn("NotaCredito"),onMouseEnter:()=>Ze("NotaCredito"),onMouseLeave:()=>Ze(null),className:"bg-green-600 hover:bg-green-700 text-white h-16 text-lg font-semibold shadow-md justify-start px-6",children:[r.jsx(Pr,{className:"mr-3 h-6 w-6"})," Cambio (Nota Crdito)"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 flex flex-col justify-center items-center text-center",children:[!Xe&&r.jsx("p",{className:"text-gray-400 italic",children:"Pase el mouse sobre una opcin para ver detalles."}),Xe==="Inventario"&&r.jsxs("div",{className:"space-y-3 animate-in fade-in zoom-in duration-200",children:[r.jsx(Ji,{className:"h-12 w-12 text-slate-800 mx-auto"}),r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Solo Devolucin"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 text-left bg-white p-4 rounded shadow-sm",children:[r.jsxs("li",{children:[" ",r.jsx("b",{children:"Inventario:"})," Aumenta (regresa el producto)."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Cliente:"})," No afecta su saldo (movimiento interno)."]}),r.jsx("li",{children:" ideal para correcciones de inventario."})]})]}),Xe==="Efectivo"&&r.jsxs("div",{className:"space-y-3 animate-in fade-in zoom-in duration-200",children:[r.jsx(vu,{className:"h-12 w-12 text-red-600 mx-auto"}),r.jsx("h3",{className:"font-bold text-lg text-red-600",children:"Reembolso Efectivo"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 text-left bg-white p-4 rounded shadow-sm",children:[r.jsxs("li",{children:[" ",r.jsx("b",{children:"Inventario:"})," Aumenta."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Caja:"})," Sale dinero inmediatamente."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Cliente:"})," No afecta su saldo (se liquid la deuda)."]})]})]}),Xe==="NotaCredito"&&r.jsxs("div",{className:"space-y-3 animate-in fade-in zoom-in duration-200",children:[r.jsx(Pr,{className:"h-12 w-12 text-green-600 mx-auto"}),r.jsx("h3",{className:"font-bold text-lg text-green-600",children:"Nota de Crdito"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 text-left bg-white p-4 rounded shadow-sm",children:[r.jsxs("li",{children:[" ",r.jsx("b",{children:"Inventario:"})," Aumenta."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Cliente:"})," ",r.jsx("span",{className:"text-green-600 font-bold",children:"Disminuye su deuda"})," o crea saldo a favor."]}),r.jsx("li",{children:" selo para cambios futuros."})]})]})]})]})]})})]})},Dz=({isOpen:e,onClose:t,sale:n})=>{var o;if(!n)return null;const a=l=>new Intl.NumberFormat("es-DO",{style:"currency",currency:n.monedaCodigo||"DOP"}).format(l||0),s=async()=>{const l={receipt:{number:n.numeroFactura,NumeroRecibo:n.numeroFactura,NumeroFactura:n.numeroFactura,ncf:n.ncf,tipoNCF:n.tipoNCF,date:n.fecha,time:n.fecha,cashier:n.usuario||"Sistema",client:n.clienteNombre,subtotal:n.subtotal,tax:n.itbis,total:n.total,paymentMethod:n.metodoPago,receivedAmount:n.montoRecibido,change:n.cambio},company:{name:"POS CRONO",address:"Calle Principal #1",rnc:"123456789",phone:"809-555-5555"},items:(n.detalles||[]).map(c=>({description:c.descripcion||"Artculo",qty:c.cantidad,price:c.precioUnitario,total:c.totalLinea}))};await wO(l)};return r.jsx(ui,{open:e,onOpenChange:t,children:r.jsxs(fi,{className:"max-w-4xl bg-white p-0 overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center text-white",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:"Detalle de Venta"}),r.jsx("p",{className:"text-sm text-gray-400 font-mono",children:n.numeroFactura})]}),r.jsx(re,{variant:"ghost",className:"text-white hover:bg-white/10",onClick:t,children:r.jsx(Tt,{})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Fecha"}),r.jsx("span",{className:"font-semibold text-gray-800",children:new Date(n.fecha).toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Cliente"}),r.jsx("span",{className:"font-semibold text-gray-800",children:n.clienteNombre})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"NCF"}),r.jsx("span",{className:"font-mono font-semibold text-blue-700",children:n.ncf||"N/A"})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Mtodo Pago"}),r.jsx("span",{className:"font-semibold text-gray-800",children:n.metodoPago})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-100 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-gray-600",children:"Cdigo"}),r.jsx("th",{className:"px-4 py-2 text-left text-gray-600",children:"Descripcin"}),r.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Cant"}),r.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Precio"}),r.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y",children:(o=n.detalles)==null?void 0:o.map((l,c)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2 font-mono text-xs text-gray-500",children:l.codigo}),r.jsx("td",{className:"px-4 py-2 font-medium text-gray-800",children:l.descripcion}),r.jsx("td",{className:"px-4 py-2 text-right",children:l.cantidad}),r.jsx("td",{className:"px-4 py-2 text-right",children:a(l.precioUnitario)}),r.jsx("td",{className:"px-4 py-2 text-right font-bold",children:a(l.totalLinea)})]},c))})]})}),r.jsxs("div",{className:"flex justify-between items-end border-t pt-4",children:[r.jsx("div",{children:r.jsxs(re,{variant:"outline",onClick:s,className:"flex gap-2 items-center",children:[r.jsx(Is,{size:16})," Imprimir Recibo"]})}),r.jsxs("div",{className:"w-64 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:a(n.subtotal)})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"ITBIS:"}),r.jsx("span",{children:a(n.itbis)})]}),r.jsxs("div",{className:"flex justify-between text-xl font-black text-hd-orange border-t pt-2 border-gray-200",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:a(n.total)})]})]})]})]})]})})};function ri(e,t){return typeof e=="function"?e(t):e}function ka(e,t){return n=>{t.setState(a=>({...a,[e]:ri(n,a[e])}))}}function Bp(e){return e instanceof Function}function Oz(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Mz(e,t){const n=[],a=s=>{s.forEach(o=>{n.push(o);const l=t(o);l!=null&&l.length&&a(l)})};return a(e),n}function At(e,t,n){let a=[],s;return o=>{let l;n.key&&n.debug&&(l=Date.now());const c=e(o);if(!(c.length!==a.length||c.some((u,m)=>a[m]!==u)))return s;a=c;let h;if(n.key&&n.debug&&(h=Date.now()),s=t(...c),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-l)*100)/100,m=Math.round((Date.now()-h)*100)/100,p=m/16,v=(j,y)=>{for(j=String(j);j.length<y;)j=" "+j;return j};console.info("%c ".concat(v(m,5)," /").concat(v(u,5)," ms"),"\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(".concat(Math.max(0,Math.min(120-120*p,120)),"deg 100% 31%);"),n==null?void 0:n.key)}return s}}function It(e,t,n,a){return{debug:()=>{var s;return(s=e==null?void 0:e.debugAll)!=null?s:e[t]},key:!1,onChange:a}}function Tz(e,t,n,a){const s=()=>{var l;return(l=o.getValue())!=null?l:e.options.renderFallbackValue},o={id:"".concat(t.id,"_").concat(n.id),row:t,column:n,getValue:()=>t.getValue(a),renderValue:s,getContext:At(()=>[e,n,t,o],(l,c,f,h)=>({table:l,column:c,row:f,cell:h,getValue:h.getValue,renderValue:h.renderValue}),It(e.options,"debugCells"))};return e._features.forEach(l=>{l.createCell==null||l.createCell(o,n,t,e)},{}),o}function _z(e,t,n,a){var s,o;const c={...e._getDefaultColumnDef(),...t},f=c.accessorKey;let h=(s=(o=c.id)!=null?o:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?s:typeof c.header=="string"?c.header:void 0,u;if(c.accessorFn?u=c.accessorFn:f&&(f.includes(".")?u=p=>{let v=p;for(const y of f.split(".")){var j;v=(j=v)==null?void 0:j[y]}return v}:u=p=>p[c.accessorKey]),!h)throw new Error;let m={id:"".concat(String(h)),accessorFn:u,parent:a,depth:n,columnDef:c,columns:[],getFlatColumns:At(()=>[!0],()=>{var p;return[m,...(p=m.columns)==null?void 0:p.flatMap(v=>v.getFlatColumns())]},It(e.options,"debugColumns")),getLeafColumns:At(()=>[e._getOrderColumnsFn()],p=>{var v;if((v=m.columns)!=null&&v.length){let j=m.columns.flatMap(y=>y.getLeafColumns());return p(j)}return[m]},It(e.options,"debugColumns"))};for(const p of e._features)p.createColumn==null||p.createColumn(m,e);return m}const Mn="debugHeaders";function e2(e,t,n){var a;let o={id:(a=n.id)!=null?a:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(o),l},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(l=>{l.createHeader==null||l.createHeader(o,e)}),o}const Rz={createTable:e=>{e.getHeaderGroups=At(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a,s)=>{var o,l;const c=(o=a==null?void 0:a.map(m=>n.find(p=>p.id===m)).filter(Boolean))!=null?o:[],f=(l=s==null?void 0:s.map(m=>n.find(p=>p.id===m)).filter(Boolean))!=null?l:[],h=n.filter(m=>!(a!=null&&a.includes(m.id))&&!(s!=null&&s.includes(m.id)));return Eh(t,[...c,...h,...f],e)},It(e.options,Mn)),e.getCenterHeaderGroups=At(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a,s)=>(n=n.filter(o=>!(a!=null&&a.includes(o.id))&&!(s!=null&&s.includes(o.id))),Eh(t,n,e,"center")),It(e.options,Mn)),e.getLeftHeaderGroups=At(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,a)=>{var s;const o=(s=a==null?void 0:a.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return Eh(t,o,e,"left")},It(e.options,Mn)),e.getRightHeaderGroups=At(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,a)=>{var s;const o=(s=a==null?void 0:a.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return Eh(t,o,e,"right")},It(e.options,Mn)),e.getFooterGroups=At(()=>[e.getHeaderGroups()],t=>[...t].reverse(),It(e.options,Mn)),e.getLeftFooterGroups=At(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),It(e.options,Mn)),e.getCenterFooterGroups=At(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),It(e.options,Mn)),e.getRightFooterGroups=At(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),It(e.options,Mn)),e.getFlatHeaders=At(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),It(e.options,Mn)),e.getLeftFlatHeaders=At(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),It(e.options,Mn)),e.getCenterFlatHeaders=At(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),It(e.options,Mn)),e.getRightFlatHeaders=At(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),It(e.options,Mn)),e.getCenterLeafHeaders=At(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),It(e.options,Mn)),e.getLeftLeafHeaders=At(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),It(e.options,Mn)),e.getRightLeafHeaders=At(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),It(e.options,Mn)),e.getLeafHeaders=At(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,a)=>{var s,o,l,c,f,h;return[...(s=(o=t[0])==null?void 0:o.headers)!=null?s:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(h=a[0])==null?void 0:h.headers)!=null?f:[]].map(u=>u.getLeafHeaders()).flat()},It(e.options,Mn))}};function Eh(e,t,n,a){var s,o;let l=0;const c=function(p,v){v===void 0&&(v=1),l=Math.max(l,v),p.filter(j=>j.getIsVisible()).forEach(j=>{var y;(y=j.columns)!=null&&y.length&&c(j.columns,v+1)},0)};c(e);let f=[];const h=(p,v)=>{const j={depth:v,id:[a,"".concat(v)].filter(Boolean).join("_"),headers:[]},y=[];p.forEach(b=>{const N=[...y].reverse()[0],k=b.column.depth===j.depth;let D,E=!1;if(k&&b.column.parent?D=b.column.parent:(D=b.column,E=!0),N&&(N==null?void 0:N.column)===D)N.subHeaders.push(b);else{const P=e2(n,D,{id:[a,v,D.id,b==null?void 0:b.id].filter(Boolean).join("_"),isPlaceholder:E,placeholderId:E?"".concat(y.filter(C=>C.column===D).length):void 0,depth:v,index:y.length});P.subHeaders.push(b),y.push(P)}j.headers.push(b),b.headerGroup=j}),f.push(j),v>0&&h(y,v-1)},u=t.map((p,v)=>e2(n,p,{depth:l,index:v}));h(u,l-1),f.reverse();const m=p=>p.filter(j=>j.column.getIsVisible()).map(j=>{let y=0,b=0,N=[0];j.subHeaders&&j.subHeaders.length?(N=[],m(j.subHeaders).forEach(D=>{let{colSpan:E,rowSpan:P}=D;y+=E,N.push(P)})):y=1;const k=Math.min(...N);return b=b+k,j.colSpan=y,j.rowSpan=b,{colSpan:y,rowSpan:b}});return m((s=(o=f[0])==null?void 0:o.headers)!=null?s:[]),f}const Dj=(e,t,n,a,s,o,l)=>{let c={id:t,index:a,original:n,depth:s,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const h=e.getColumn(f);if(h!=null&&h.accessorFn)return c._valuesCache[f]=h.accessorFn(c.original,a),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const h=e.getColumn(f);if(h!=null&&h.accessorFn)return h.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=h.columnDef.getUniqueValues(c.original,a),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var h;return(h=c.getValue(f))!=null?h:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Mz(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?e.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],h=c;for(;;){const u=h.getParentRow();if(!u)break;f.push(u),h=u}return f.reverse()},getAllCells:At(()=>[e.getAllLeafColumns()],f=>f.map(h=>Tz(e,c,h,h.id)),It(e.options,"debugRows")),_getAllCellsByColumnId:At(()=>[c.getAllCells()],f=>f.reduce((h,u)=>(h[u.column.id]=u,h),{}),It(e.options,"debugRows"))};for(let f=0;f<e._features.length;f++){const h=e._features[f];h==null||h.createRow==null||h.createRow(c,e)}return c},$z={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},EO=(e,t,n)=>{var a,s;const o=n==null||(a=n.toString())==null?void 0:a.toLowerCase();return!!(!((s=e.getValue(t))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(o))};EO.autoRemove=e=>cs(e);const AO=(e,t,n)=>{var a;return!!(!((a=e.getValue(t))==null||(a=a.toString())==null)&&a.includes(n))};AO.autoRemove=e=>cs(e);const IO=(e,t,n)=>{var a;return((a=e.getValue(t))==null||(a=a.toString())==null?void 0:a.toLowerCase())===(n==null?void 0:n.toLowerCase())};IO.autoRemove=e=>cs(e);const DO=(e,t,n)=>{var a;return(a=e.getValue(t))==null?void 0:a.includes(n)};DO.autoRemove=e=>cs(e);const OO=(e,t,n)=>!n.some(a=>{var s;return!((s=e.getValue(t))!=null&&s.includes(a))});OO.autoRemove=e=>cs(e)||!(e!=null&&e.length);const MO=(e,t,n)=>n.some(a=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(a)});MO.autoRemove=e=>cs(e)||!(e!=null&&e.length);const TO=(e,t,n)=>e.getValue(t)===n;TO.autoRemove=e=>cs(e);const _O=(e,t,n)=>e.getValue(t)==n;_O.autoRemove=e=>cs(e);const Oj=(e,t,n)=>{let[a,s]=n;const o=e.getValue(t);return o>=a&&o<=s};Oj.resolveFilterValue=e=>{let[t,n]=e,a=typeof t!="number"?parseFloat(t):t,s=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(a)?-1/0:a,l=n===null||Number.isNaN(s)?1/0:s;if(o>l){const c=o;o=l,l=c}return[o,l]};Oj.autoRemove=e=>cs(e)||cs(e[0])&&cs(e[1]);const Js={includesString:EO,includesStringSensitive:AO,equalsString:IO,arrIncludes:DO,arrIncludesAll:OO,arrIncludesSome:MO,equals:TO,weakEquals:_O,inNumberRange:Oj};function cs(e){return e==null||e===""}const Fz={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ka("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],a=n==null?void 0:n.getValue(e.id);return typeof a=="string"?Js.includesString:typeof a=="number"?Js.inNumberRange:typeof a=="boolean"||a!==null&&typeof a=="object"?Js.equals:Array.isArray(a)?Js.arrIncludes:Js.weakEquals},e.getFilterFn=()=>{var n,a;return Bp(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(a=t.options.filterFns)==null?void 0:a[e.columnDef.filterFn])!=null?n:Js[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,a,s;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((a=t.options.enableColumnFilters)!=null?a:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(a=>a.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,a;return(n=(a=t.getState().columnFilters)==null?void 0:a.findIndex(s=>s.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(a=>{const s=e.getFilterFn(),o=a==null?void 0:a.find(u=>u.id===e.id),l=ri(n,o?o.value:void 0);if(t2(s,l,e)){var c;return(c=a==null?void 0:a.filter(u=>u.id!==e.id))!=null?c:[]}const f={id:e.id,value:l};if(o){var h;return(h=a==null?void 0:a.map(u=>u.id===e.id?f:u))!=null?h:[]}return a!=null&&a.length?[...a,f]:[f]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),a=s=>{var o;return(o=ri(t,s))==null?void 0:o.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(t2(f,l.value,c))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(a)},e.resetColumnFilters=t=>{var n,a;e.setColumnFilters(t?[]:(n=(a=e.initialState)==null?void 0:a.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function t2(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Lz=(e,t,n)=>n.reduce((a,s)=>{const o=s.getValue(e);return a+(typeof o=="number"?o:0)},0),zz=(e,t,n)=>{let a;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(a>o||a===void 0&&o>=o)&&(a=o)}),a},Bz=(e,t,n)=>{let a;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(a<o||a===void 0&&o>=o)&&(a=o)}),a},Uz=(e,t,n)=>{let a,s;return n.forEach(o=>{const l=o.getValue(e);l!=null&&(a===void 0?l>=l&&(a=s=l):(a>l&&(a=l),s<l&&(s=l)))}),[a,s]},Vz=(e,t)=>{let n=0,a=0;if(t.forEach(s=>{let o=s.getValue(e);o!=null&&(o=+o)>=o&&(++n,a+=o)}),n)return a/n},qz=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!Oz(n))return;if(n.length===1)return n[0];const a=Math.floor(n.length/2),s=n.sort((o,l)=>o-l);return n.length%2!==0?s[a]:(s[a-1]+s[a])/2},Gz=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Hz=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Wz=(e,t)=>t.length,M0={sum:Lz,min:zz,max:Bz,extent:Uz,mean:Vz,median:qz,unique:Gz,uniqueCount:Hz,count:Wz},Kz={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ka("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(a=>a!==e.id):[...n!=null?n:[],e.id])},e.getCanGroup=()=>{var n,a;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((a=t.options.enableGrouping)!=null?a:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],a=n==null?void 0:n.getValue(e.id);if(typeof a=="number")return M0.sum;if(Object.prototype.toString.call(a)==="[object Date]")return M0.extent},e.getAggregationFn=()=>{var n,a;if(!e)throw new Error;return Bp(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(a=t.options.aggregationFns)==null?void 0:a[e.columnDef.aggregationFn])!=null?n:M0[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,a;e.setGrouping(t?[]:(n=(a=e.initialState)==null?void 0:a.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const a=t.getColumn(n);return a!=null&&a.columnDef.getGroupingValue?(e._groupingValuesCache[n]=a.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,a)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function Yz(e,t,n){if(!(t!=null&&t.length)||!n)return e;const a=e.filter(o=>!t.includes(o.id));return n==="remove"?a:[...t.map(o=>e.find(l=>l.id===o)).filter(Boolean),...a]}const Xz={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ka("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=At(n=>[lu(t,n)],n=>n.findIndex(a=>a.id===e.id),It(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var a;return((a=lu(t,n)[0])==null?void 0:a.id)===e.id},e.getIsLastColumn=n=>{var a;const s=lu(t,n);return((a=s[s.length-1])==null?void 0:a.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=At(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,a)=>s=>{let o=[];if(!(t!=null&&t.length))o=s;else{const l=[...t],c=[...s];for(;c.length&&l.length;){const f=l.shift(),h=c.findIndex(u=>u.id===f);h>-1&&o.push(c.splice(h,1)[0])}o=[...o,...c]}return Yz(o,n,a)},It(e.options,"debugTable"))}},T0=()=>({left:[],right:[]}),Jz={getInitialState:e=>({columnPinning:T0(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ka("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const a=e.getLeafColumns().map(s=>s.id).filter(Boolean);t.setColumnPinning(s=>{var o,l;if(n==="right"){var c,f;return{left:((c=s==null?void 0:s.left)!=null?c:[]).filter(m=>!(a!=null&&a.includes(m))),right:[...((f=s==null?void 0:s.right)!=null?f:[]).filter(m=>!(a!=null&&a.includes(m))),...a]}}if(n==="left"){var h,u;return{left:[...((h=s==null?void 0:s.left)!=null?h:[]).filter(m=>!(a!=null&&a.includes(m))),...a],right:((u=s==null?void 0:s.right)!=null?u:[]).filter(m=>!(a!=null&&a.includes(m)))}}return{left:((o=s==null?void 0:s.left)!=null?o:[]).filter(m=>!(a!=null&&a.includes(m))),right:((l=s==null?void 0:s.right)!=null?l:[]).filter(m=>!(a!=null&&a.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(a=>{var s,o,l;return((s=a.columnDef.enablePinning)!=null?s:!0)&&((o=(l=t.options.enableColumnPinning)!=null?l:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(c=>c.id),{left:a,right:s}=t.getState().columnPinning,o=n.some(c=>a==null?void 0:a.includes(c)),l=n.some(c=>s==null?void 0:s.includes(c));return o?"left":l?"right":!1},e.getPinnedIndex=()=>{var n,a;const s=e.getIsPinned();return s?(n=(a=t.getState().columnPinning)==null||(a=a[s])==null?void 0:a.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=At(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,a,s)=>{const o=[...a!=null?a:[],...s!=null?s:[]];return n.filter(l=>!o.includes(l.column.id))},It(t.options,"debugRows")),e.getLeftVisibleCells=At(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,a)=>(a!=null?a:[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),It(t.options,"debugRows")),e.getRightVisibleCells=At(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,a)=>(a!=null?a:[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),It(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,a;return e.setColumnPinning(t?T0():(n=(a=e.initialState)==null?void 0:a.columnPinning)!=null?n:T0())},e.getIsSomeColumnsPinned=t=>{var n;const a=e.getState().columnPinning;if(!t){var s,o;return!!((s=a.left)!=null&&s.length||(o=a.right)!=null&&o.length)}return!!((n=a[t])!=null&&n.length)},e.getLeftLeafColumns=At(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n!=null?n:[]).map(a=>t.find(s=>s.id===a)).filter(Boolean),It(e.options,"debugColumns")),e.getRightLeafColumns=At(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n!=null?n:[]).map(a=>t.find(s=>s.id===a)).filter(Boolean),It(e.options,"debugColumns")),e.getCenterLeafColumns=At(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a)=>{const s=[...n!=null?n:[],...a!=null?a:[]];return t.filter(o=>!s.includes(o.id))},It(e.options,"debugColumns"))}};function Qz(e){return e||(typeof document<"u"?document:null)}const Ah={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},_0=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Zz={getDefaultColumnDef:()=>Ah,getInitialState:e=>({columnSizing:{},columnSizingInfo:_0(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ka("columnSizing",e),onColumnSizingInfoChange:ka("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,a,s;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Ah.minSize,(a=o!=null?o:e.columnDef.size)!=null?a:Ah.size),(s=e.columnDef.maxSize)!=null?s:Ah.maxSize)},e.getStart=At(n=>[n,lu(t,n),t.getState().columnSizing],(n,a)=>a.slice(0,e.getIndex(n)).reduce((s,o)=>s+o.getSize(),0),It(t.options,"debugColumns")),e.getAfter=At(n=>[n,lu(t,n),t.getState().columnSizing],(n,a)=>a.slice(e.getIndex(n)+1).reduce((s,o)=>s+o.getSize(),0),It(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:a,...s}=n;return s})},e.getCanResize=()=>{var n,a;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((a=t.options.enableColumnResizing)!=null?a:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const a=s=>{if(s.subHeaders.length)s.subHeaders.forEach(a);else{var o;n+=(o=s.column.getSize())!=null?o:0}};return a(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const a=t.getColumn(e.column.id),s=a==null?void 0:a.getCanResize();return o=>{if(!a||!s||(o.persist==null||o.persist(),R0(o)&&o.touches&&o.touches.length>1))return;const l=e.getSize(),c=e?e.getLeafHeaders().map(N=>[N.column.id,N.column.getSize()]):[[a.id,a.getSize()]],f=R0(o)?Math.round(o.touches[0].clientX):o.clientX,h={},u=(N,k)=>{typeof k=="number"&&(t.setColumnSizingInfo(D=>{var E,P;const C=t.options.columnResizeDirection==="rtl"?-1:1,O=(k-((E=D==null?void 0:D.startOffset)!=null?E:0))*C,A=Math.max(O/((P=D==null?void 0:D.startSize)!=null?P:0),-.999999);return D.columnSizingStart.forEach(_=>{let[z,G]=_;h[z]=Math.round(Math.max(G+G*A,0)*100)/100}),{...D,deltaOffset:O,deltaPercentage:A}}),(t.options.columnResizeMode==="onChange"||N==="end")&&t.setColumnSizing(D=>({...D,...h})))},m=N=>u("move",N),p=N=>{u("end",N),t.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},v=Qz(n),j={moveHandler:N=>m(N.clientX),upHandler:N=>{v==null||v.removeEventListener("mousemove",j.moveHandler),v==null||v.removeEventListener("mouseup",j.upHandler),p(N.clientX)}},y={moveHandler:N=>(N.cancelable&&(N.preventDefault(),N.stopPropagation()),m(N.touches[0].clientX),!1),upHandler:N=>{var k;v==null||v.removeEventListener("touchmove",y.moveHandler),v==null||v.removeEventListener("touchend",y.upHandler),N.cancelable&&(N.preventDefault(),N.stopPropagation()),p((k=N.touches[0])==null?void 0:k.clientX)}},b=e8()?{passive:!1}:!1;R0(o)?(v==null||v.addEventListener("touchmove",y.moveHandler,b),v==null||v.addEventListener("touchend",y.upHandler,b)):(v==null||v.addEventListener("mousemove",j.moveHandler,b),v==null||v.addEventListener("mouseup",j.upHandler,b)),t.setColumnSizingInfo(N=>({...N,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:a.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?_0():(n=e.initialState.columnSizingInfo)!=null?n:_0())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0}}};let Ih=null;function e8(){if(typeof Ih=="boolean")return Ih;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(t){e=!1}return Ih=e,Ih}function R0(e){return e.type==="touchstart"}const t8={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ka("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(a=>({...a,[e.id]:n!=null?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,a;const s=e.columns;return(n=s.length?s.some(o=>o.getIsVisible()):(a=t.getState().columnVisibility)==null?void 0:a[e.id])!=null?n:!0},e.getCanHide=()=>{var n,a;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((a=t.options.enableHiding)!=null?a:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=At(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(a=>a.column.getIsVisible()),It(t.options,"debugRows")),e.getVisibleCells=At(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,a,s)=>[...n,...a,...s],It(t.options,"debugRows"))},createTable:e=>{const t=(n,a)=>At(()=>[a(),a().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),It(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var a;e.setColumnVisibility(n?{}:(a=e.initialState.columnVisibility)!=null?a:{})},e.toggleAllColumnsVisible=n=>{var a;n=(a=n)!=null?a:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,o)=>({...s,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var a;e.toggleAllColumnsVisible((a=n.target)==null?void 0:a.checked)}}};function lu(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const r8={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},n8={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ka("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const a=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof a=="string"||typeof a=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,a,s,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((a=t.options.enableGlobalFilter)!=null?a:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Js.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:a}=e.options;return Bp(a)?a:a==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[a])!=null?t:Js[a]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},a8={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ka("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var a,s;if(!t){e._queue(()=>{t=!0});return}if((a=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?a:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=a=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(a),e.toggleAllRowsExpanded=a=>{(a!=null?a:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=a=>{var s,o;e.setExpanded(a?{}:(s=(o=e.initialState)==null?void 0:o.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>a=>{a.persist==null||a.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const a=e.getState().expanded;return a===!0||Object.values(a).some(Boolean)},e.getIsAllRowsExpanded=()=>{const a=e.getState().expanded;return typeof a=="boolean"?a===!0:!(!Object.keys(a).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let a=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const l=o.split(".");a=Math.max(a,l.length)}),a},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(a=>{var s;const o=a===!0?!0:!!(a!=null&&a[e.id]);let l={};if(a===!0?Object.keys(t.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=a,n=(s=n)!=null?s:!o,!o&&n)return{...l,[e.id]:!0};if(o&&!n){const{[e.id]:c,...f}=l;return f}return a})},e.getIsExpanded=()=>{var n;const a=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:a===!0||a!=null&&a[e.id])},e.getCanExpand=()=>{var n,a,s;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((a=t.options.enableExpanding)!=null?a:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,a=e;for(;n&&a.parentId;)a=t.getRow(a.parentId,!0),n=a.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},eb=0,tb=10,$0=()=>({pageIndex:eb,pageSize:tb}),s8={getInitialState:e=>({...e,pagination:{...$0(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ka("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var a,s;if(!t){e._queue(()=>{t=!0});return}if((a=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?a:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=a=>{const s=o=>ri(a,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=a=>{var s;e.setPagination(a?$0():(s=e.initialState.pagination)!=null?s:$0())},e.setPageIndex=a=>{e.setPagination(s=>{let o=ri(a,s.pageIndex);const l=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...s,pageIndex:o}})},e.resetPageIndex=a=>{var s,o;e.setPageIndex(a?eb:(s=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?s:eb)},e.resetPageSize=a=>{var s,o;e.setPageSize(a?tb:(s=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?s:tb)},e.setPageSize=a=>{e.setPagination(s=>{const o=Math.max(1,ri(a,s.pageSize)),l=s.pageSize*s.pageIndex,c=Math.floor(l/o);return{...s,pageIndex:c,pageSize:o}})},e.setPageCount=a=>e.setPagination(s=>{var o;let l=ri(a,(o=e.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...s,pageCount:l}}),e.getPageOptions=At(()=>[e.getPageCount()],a=>{let s=[];return a&&a>0&&(s=[...new Array(a)].fill(null).map((o,l)=>l)),s},It(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:a}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:a<s-1},e.previousPage=()=>e.setPageIndex(a=>a-1),e.nextPage=()=>e.setPageIndex(a=>a+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var a;return(a=e.options.pageCount)!=null?a:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var a;return(a=e.options.rowCount)!=null?a:e.getPrePaginationRowModel().rows.length}}},F0=()=>({top:[],bottom:[]}),o8={getInitialState:e=>({rowPinning:F0(),...e}),getDefaultOptions:e=>({onRowPinningChange:ka("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,a,s)=>{const o=a?e.getLeafRows().map(f=>{let{id:h}=f;return h}):[],l=s?e.getParentRows().map(f=>{let{id:h}=f;return h}):[],c=new Set([...l,e.id,...o]);t.setRowPinning(f=>{var h,u;if(n==="bottom"){var m,p;return{top:((m=f==null?void 0:f.top)!=null?m:[]).filter(y=>!(c!=null&&c.has(y))),bottom:[...((p=f==null?void 0:f.bottom)!=null?p:[]).filter(y=>!(c!=null&&c.has(y))),...Array.from(c)]}}if(n==="top"){var v,j;return{top:[...((v=f==null?void 0:f.top)!=null?v:[]).filter(y=>!(c!=null&&c.has(y))),...Array.from(c)],bottom:((j=f==null?void 0:f.bottom)!=null?j:[]).filter(y=>!(c!=null&&c.has(y)))}}return{top:((h=f==null?void 0:f.top)!=null?h:[]).filter(y=>!(c!=null&&c.has(y))),bottom:((u=f==null?void 0:f.bottom)!=null?u:[]).filter(y=>!(c!=null&&c.has(y)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:a,enablePinning:s}=t.options;return typeof a=="function"?a(e):(n=a!=null?a:s)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:a,bottom:s}=t.getState().rowPinning,o=n.some(c=>a==null?void 0:a.includes(c)),l=n.some(c=>s==null?void 0:s.includes(c));return o?"top":l?"bottom":!1},e.getPinnedIndex=()=>{var n,a;const s=e.getIsPinned();if(!s)return-1;const o=(n=s==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(a=o==null?void 0:o.indexOf(e.id))!=null?a:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,a;return e.setRowPinning(t?F0():(n=(a=e.initialState)==null?void 0:a.rowPinning)!=null?n:F0())},e.getIsSomeRowsPinned=t=>{var n;const a=e.getState().rowPinning;if(!t){var s,o;return!!((s=a.top)!=null&&s.length||(o=a.bottom)!=null&&o.length)}return!!((n=a[t])!=null&&n.length)},e._getPinnedRows=(t,n,a)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(n!=null?n:[]).map(l=>{const c=e.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n!=null?n:[]).map(l=>t.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:a}))},e.getTopRows=At(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),It(e.options,"debugRows")),e.getBottomRows=At(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),It(e.options,"debugRows")),e.getCenterRows=At(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,a)=>{const s=new Set([...n!=null?n:[],...a!=null?a:[]]);return t.filter(o=>!s.has(o.id))},It(e.options,"debugRows"))}},i8={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ka("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const a={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(o=>{o.getCanSelect()&&(a[o.id]=!0)}):s.forEach(o=>{delete a[o.id]}),a})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const a=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(o=>{rb(s,o.id,a,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=At(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?L0(e,n):{rows:[],flatRows:[],rowsById:{}},It(e.options,"debugTable")),e.getFilteredSelectedRowModel=At(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?L0(e,n):{rows:[],flatRows:[],rowsById:{}},It(e.options,"debugTable")),e.getGroupedSelectedRowModel=At(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?L0(e,n):{rows:[],flatRows:[],rowsById:{}},It(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let a=!!(t.length&&Object.keys(n).length);return a&&t.some(s=>s.getCanSelect()&&!n[s.id])&&(a=!1),a},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=e.getState();let a=!!t.length;return a&&t.some(s=>!n[s.id])&&(a=!1),a},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,a)=>{const s=e.getIsSelected();t.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!s,e.getCanSelect()&&s===n)return o;const c={...o};return rb(c,e.id,n,(l=a==null?void 0:a.selectChildren)!=null?l:!0,t),c})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Mj(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return nb(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return nb(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return a=>{var s;n&&e.toggleSelected((s=a.target)==null?void 0:s.checked)}}}},rb=(e,t,n,a,s)=>{var o;const l=s.getRow(t,!0);n?(l.getCanMultiSelect()||Object.keys(e).forEach(c=>delete e[c]),l.getCanSelect()&&(e[t]=!0)):delete e[t],a&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>rb(e,c.id,n,a,s))};function L0(e,t){const n=e.getState().rowSelection,a=[],s={},o=function(l,c){return l.map(f=>{var h;const u=Mj(f,n);if(u&&(a.push(f),s[f.id]=f),(h=f.subRows)!=null&&h.length&&(f={...f,subRows:o(f.subRows)}),u)return f}).filter(Boolean)};return{rows:o(t.rows),flatRows:a,rowsById:s}}function Mj(e,t){var n;return(n=t[e.id])!=null?n:!1}function nb(e,t,n){var a;if(!((a=e.subRows)!=null&&a.length))return!1;let s=!0,o=!1;return e.subRows.forEach(l=>{if(!(o&&!s)&&(l.getCanSelect()&&(Mj(l,t)?o=!0:s=!1),l.subRows&&l.subRows.length)){const c=nb(l,t);c==="all"?o=!0:(c==="some"&&(o=!0),s=!1)}}),s?"all":o?"some":!1}const ab=/([0-9]+)/gm,l8=(e,t,n)=>RO(hi(e.getValue(n)).toLowerCase(),hi(t.getValue(n)).toLowerCase()),c8=(e,t,n)=>RO(hi(e.getValue(n)),hi(t.getValue(n))),d8=(e,t,n)=>Tj(hi(e.getValue(n)).toLowerCase(),hi(t.getValue(n)).toLowerCase()),u8=(e,t,n)=>Tj(hi(e.getValue(n)),hi(t.getValue(n))),f8=(e,t,n)=>{const a=e.getValue(n),s=t.getValue(n);return a>s?1:a<s?-1:0},h8=(e,t,n)=>Tj(e.getValue(n),t.getValue(n));function Tj(e,t){return e===t?0:e>t?1:-1}function hi(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function RO(e,t){const n=e.split(ab).filter(Boolean),a=t.split(ab).filter(Boolean);for(;n.length&&a.length;){const s=n.shift(),o=a.shift(),l=parseInt(s,10),c=parseInt(o,10),f=[l,c].sort();if(isNaN(f[0])){if(s>o)return 1;if(o>s)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-a.length}const Vd={alphanumeric:l8,alphanumericCaseSensitive:c8,text:d8,textCaseSensitive:u8,datetime:f8,basic:h8},m8={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ka("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let a=!1;for(const s of n){const o=s==null?void 0:s.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return Vd.datetime;if(typeof o=="string"&&(a=!0,o.split(ab).length>1))return Vd.alphanumeric}return a?Vd.text:Vd.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,a;if(!e)throw new Error;return Bp(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(a=t.options.sortingFns)==null?void 0:a[e.columnDef.sortingFn])!=null?n:Vd[e.columnDef.sortingFn]},e.toggleSorting=(n,a)=>{const s=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(l=>{const c=l==null?void 0:l.find(v=>v.id===e.id),f=l==null?void 0:l.findIndex(v=>v.id===e.id);let h=[],u,m=o?n:s==="desc";if(l!=null&&l.length&&e.getCanMultiSort()&&a?c?u="toggle":u="add":l!=null&&l.length&&f!==l.length-1?u="replace":c?u="toggle":u="replace",u==="toggle"&&(o||s||(u="remove")),u==="add"){var p;h=[...l,{id:e.id,desc:m}],h.splice(0,h.length-((p=t.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else u==="toggle"?h=l.map(v=>v.id===e.id?{...v,desc:m}:v):u==="remove"?h=l.filter(v=>v.id!==e.id):h=[{id:e.id,desc:m}];return h})},e.getFirstSortDir=()=>{var n,a;return((n=(a=e.columnDef.sortDescFirst)!=null?a:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var a,s;const o=e.getFirstSortDir(),l=e.getIsSorted();return l?l!==o&&((a=t.options.enableSortingRemoval)==null||a)&&(!(n&&(s=t.options.enableMultiRemove)!=null)||s)?!1:l==="desc"?"asc":"desc":o},e.getCanSort=()=>{var n,a;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((a=t.options.enableSorting)!=null?a:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,a;return(n=(a=e.columnDef.enableMultiSort)!=null?a:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const a=(n=t.getState().sorting)==null?void 0:n.find(s=>s.id===e.id);return a?a.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,a;return(n=(a=t.getState().sorting)==null?void 0:a.findIndex(s=>s.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(a=>a.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return a=>{n&&(a.persist==null||a.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(a):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,a;e.setSorting(t?[]:(n=(a=e.initialState)==null?void 0:a.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},p8=[Rz,t8,Xz,Jz,$z,Fz,r8,n8,m8,Kz,a8,s8,o8,i8,Zz];function g8(e){var t,n;const a=[...p8,...(t=e._features)!=null?t:[]];let s={_features:a};const o=s._features.reduce((p,v)=>Object.assign(p,v.getDefaultOptions==null?void 0:v.getDefaultOptions(s)),{}),l=p=>s.options.mergeOptions?s.options.mergeOptions(o,p):{...o,...p};let f={...{},...(n=e.initialState)!=null?n:{}};s._features.forEach(p=>{var v;f=(v=p.getInitialState==null?void 0:p.getInitialState(f))!=null?v:f});const h=[];let u=!1;const m={_features:a,options:{...o,...e},initialState:f,_queue:p=>{h.push(p),u||(u=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();u=!1}).catch(v=>setTimeout(()=>{throw v})))},reset:()=>{s.setState(s.initialState)},setOptions:p=>{const v=ri(p,s.options);s.options=l(v)},getState:()=>s.options.state,setState:p=>{s.options.onStateChange==null||s.options.onStateChange(p)},_getRowId:(p,v,j)=>{var y;return(y=s.options.getRowId==null?void 0:s.options.getRowId(p,v,j))!=null?y:"".concat(j?[j.id,v].join("."):v)},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(p,v)=>{let j=(v?s.getPrePaginationRowModel():s.getRowModel()).rowsById[p];if(!j&&(j=s.getCoreRowModel().rowsById[p],!j))throw new Error;return j},_getDefaultColumnDef:At(()=>[s.options.defaultColumn],p=>{var v;return p=(v=p)!=null?v:{},{header:j=>{const y=j.header.column.columnDef;return y.accessorKey?y.accessorKey:y.accessorFn?y.id:null},cell:j=>{var y,b;return(y=(b=j.renderValue())==null||b.toString==null?void 0:b.toString())!=null?y:null},...s._features.reduce((j,y)=>Object.assign(j,y.getDefaultColumnDef==null?void 0:y.getDefaultColumnDef()),{}),...p}},It(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:At(()=>[s._getColumnDefs()],p=>{const v=function(j,y,b){return b===void 0&&(b=0),j.map(N=>{const k=_z(s,N,b,y),D=N;return k.columns=D.columns?v(D.columns,k,b+1):[],k})};return v(p)},It(e,"debugColumns")),getAllFlatColumns:At(()=>[s.getAllColumns()],p=>p.flatMap(v=>v.getFlatColumns()),It(e,"debugColumns")),_getAllFlatColumnsById:At(()=>[s.getAllFlatColumns()],p=>p.reduce((v,j)=>(v[j.id]=j,v),{}),It(e,"debugColumns")),getAllLeafColumns:At(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(p,v)=>{let j=p.flatMap(y=>y.getLeafColumns());return v(j)},It(e,"debugColumns")),getColumn:p=>s._getAllFlatColumnsById()[p]};Object.assign(s,m);for(let p=0;p<s._features.length;p++){const v=s._features[p];v==null||v.createTable==null||v.createTable(s)}return s}function x8(){return e=>At(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},a=function(s,o,l){o===void 0&&(o=0);const c=[];for(let h=0;h<s.length;h++){const u=Dj(e,e._getRowId(s[h],h,l),s[h],h,o,void 0,l==null?void 0:l.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,c.push(u),e.options.getSubRows){var f;u.originalSubRows=e.options.getSubRows(s[h],h),(f=u.originalSubRows)!=null&&f.length&&(u.subRows=a(u.originalSubRows,o+1,u))}}return c};return n.rows=a(t),n},It(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function v8(e,t,n){return n.options.filterFromLeafRows?y8(e,t,n):b8(e,t,n)}function y8(e,t,n){var a;const s=[],o={},l=(a=n.options.maxLeafRowFilterDepth)!=null?a:100,c=function(f,h){h===void 0&&(h=0);const u=[];for(let p=0;p<f.length;p++){var m;let v=f[p];const j=Dj(n,v.id,v.original,v.index,v.depth,void 0,v.parentId);if(j.columnFilters=v.columnFilters,(m=v.subRows)!=null&&m.length&&h<l){if(j.subRows=c(v.subRows,h+1),v=j,t(v)&&!j.subRows.length){u.push(v),o[v.id]=v,s.push(v);continue}if(t(v)||j.subRows.length){u.push(v),o[v.id]=v,s.push(v);continue}}else v=j,t(v)&&(u.push(v),o[v.id]=v,s.push(v))}return u};return{rows:c(e),flatRows:s,rowsById:o}}function b8(e,t,n){var a;const s=[],o={},l=(a=n.options.maxLeafRowFilterDepth)!=null?a:100,c=function(f,h){h===void 0&&(h=0);const u=[];for(let p=0;p<f.length;p++){let v=f[p];if(t(v)){var m;if((m=v.subRows)!=null&&m.length&&h<l){const y=Dj(n,v.id,v.original,v.index,v.depth,void 0,v.parentId);y.subRows=c(v.subRows,h+1),v=y}u.push(v),s.push(v),o[v.id]=v}}return u};return{rows:c(e),flatRows:s,rowsById:o}}function j8(){return e=>At(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,a)=>{if(!t.rows.length||!(n!=null&&n.length)&&!a){for(let p=0;p<t.flatRows.length;p++)t.flatRows[p].columnFilters={},t.flatRows[p].columnFiltersMeta={};return t}const s=[],o=[];(n!=null?n:[]).forEach(p=>{var v;const j=e.getColumn(p.id);if(!j)return;const y=j.getFilterFn();y&&s.push({id:p.id,filterFn:y,resolvedValue:(v=y.resolveFilterValue==null?void 0:y.resolveFilterValue(p.value))!=null?v:p.value})});const l=(n!=null?n:[]).map(p=>p.id),c=e.getGlobalFilterFn(),f=e.getAllLeafColumns().filter(p=>p.getCanGlobalFilter());a&&c&&f.length&&(l.push("__global__"),f.forEach(p=>{var v;o.push({id:p.id,filterFn:c,resolvedValue:(v=c.resolveFilterValue==null?void 0:c.resolveFilterValue(a))!=null?v:a})}));let h,u;for(let p=0;p<t.flatRows.length;p++){const v=t.flatRows[p];if(v.columnFilters={},s.length)for(let j=0;j<s.length;j++){h=s[j];const y=h.id;v.columnFilters[y]=h.filterFn(v,y,h.resolvedValue,b=>{v.columnFiltersMeta[y]=b})}if(o.length){for(let j=0;j<o.length;j++){u=o[j];const y=u.id;if(u.filterFn(v,y,u.resolvedValue,b=>{v.columnFiltersMeta[y]=b})){v.columnFilters.__global__=!0;break}}v.columnFilters.__global__!==!0&&(v.columnFilters.__global__=!1)}}const m=p=>{for(let v=0;v<l.length;v++)if(p.columnFilters[l[v]]===!1)return!1;return!0};return v8(t.rows,m,e)},It(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function w8(){return e=>At(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const a=e.getState().sorting,s=[],o=a.filter(f=>{var h;return(h=e.getColumn(f.id))==null?void 0:h.getCanSort()}),l={};o.forEach(f=>{const h=e.getColumn(f.id);h&&(l[f.id]={sortUndefined:h.columnDef.sortUndefined,invertSorting:h.columnDef.invertSorting,sortingFn:h.getSortingFn()})});const c=f=>{const h=f.map(u=>({...u}));return h.sort((u,m)=>{for(let v=0;v<o.length;v+=1){var p;const j=o[v],y=l[j.id],b=y.sortUndefined,N=(p=j==null?void 0:j.desc)!=null?p:!1;let k=0;if(b){const D=u.getValue(j.id),E=m.getValue(j.id),P=D===void 0,C=E===void 0;if(P||C){if(b==="first")return P?-1:1;if(b==="last")return P?1:-1;k=P&&C?0:P?b:-b}}if(k===0&&(k=y.sortingFn(u,m,j.id)),k!==0)return N&&(k*=-1),y.invertSorting&&(k*=-1),k}return u.index-m.index}),h.forEach(u=>{var m;s.push(u),(m=u.subRows)!=null&&m.length&&(u.subRows=c(u.subRows))}),h};return{rows:c(n.rows),flatRows:s,rowsById:n.rowsById}},It(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}function r2(e,t){return e?N8(e)?x.createElement(e,t):e:null}function N8(e){return S8(e)||typeof e=="function"||C8(e)}function S8(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function C8(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function k8(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=x.useState(()=>({current:g8(t)})),[a,s]=x.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...e,state:{...a,...e.state},onStateChange:l=>{s(l),e.onStateChange==null||e.onStateChange(l)}})),n.current}function $O(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=$O(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Zt(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=$O(e))&&(a&&(a+=" "),a+=t);return a}const P8=(e,t)=>{const n=new Array(e.length+t.length);for(let a=0;a<e.length;a++)n[a]=e[a];for(let a=0;a<t.length;a++)n[e.length+a]=t[a];return n},E8=(e,t)=>({classGroupId:e,validator:t}),FO=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Pm="-",n2=[],A8="arbitrary..",I8=e=>{const t=O8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return D8(l);const c=l.split(Pm),f=c[0]===""&&c.length>1?1:0;return LO(c,f,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const f=a[l],h=n[l];return f?h?P8(h,f):f:h||n2}return n[l]||n2}}},LO=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],o=n.nextPart.get(s);if(o){const h=LO(e,t+1,o);if(h)return h}const l=n.validators;if(l===null)return;const c=t===0?e.join(Pm):e.slice(t).join(Pm),f=l.length;for(let h=0;h<f;h++){const u=l[h];if(u.validator(c))return u.classGroupId}},D8=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),a=t.slice(0,n);return a?A8+a:void 0})(),O8=e=>{const{theme:t,classGroups:n}=e;return M8(n,t)},M8=(e,t)=>{const n=FO();for(const a in e){const s=e[a];_j(s,n,a,t)}return n},_j=(e,t,n,a)=>{const s=e.length;for(let o=0;o<s;o++){const l=e[o];T8(l,t,n,a)}},T8=(e,t,n,a)=>{if(typeof e=="string"){_8(e,t,n);return}if(typeof e=="function"){R8(e,t,n,a);return}$8(e,t,n,a)},_8=(e,t,n)=>{const a=e===""?t:zO(t,e);a.classGroupId=n},R8=(e,t,n,a)=>{if(F8(e)){_j(e(a),t,n,a);return}t.validators===null&&(t.validators=[]),t.validators.push(E8(n,e))},$8=(e,t,n,a)=>{const s=Object.entries(e),o=s.length;for(let l=0;l<o;l++){const[c,f]=s[l];_j(f,zO(t,c),n,a)}},zO=(e,t)=>{let n=e;const a=t.split(Pm),s=a.length;for(let o=0;o<s;o++){const l=a[o];let c=n.nextPart.get(l);c||(c=FO(),n.nextPart.set(l,c)),n=c}return n},F8=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,L8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),a=Object.create(null);const s=(o,l)=>{n[o]=l,t++,t>e&&(t=0,a=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=a[o])!==void 0)return s(o,l),l},set(o,l){o in n?n[o]=l:s(o,l)}}},sb="!",a2=":",z8=[],s2=(e,t,n,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:a,isExternal:s}),B8=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=s=>{const o=[];let l=0,c=0,f=0,h;const u=s.length;for(let y=0;y<u;y++){const b=s[y];if(l===0&&c===0){if(b===a2){o.push(s.slice(f,y)),f=y+1;continue}if(b==="/"){h=y;continue}}b==="["?l++:b==="]"?l--:b==="("?c++:b===")"&&c--}const m=o.length===0?s:s.slice(f);let p=m,v=!1;m.endsWith(sb)?(p=m.slice(0,-1),v=!0):m.startsWith(sb)&&(p=m.slice(1),v=!0);const j=h&&h>f?h-f:void 0;return s2(o,v,p,j)};if(t){const s=t+a2,o=a;a=l=>l.startsWith(s)?o(l.slice(s.length)):s2(z8,!1,l,void 0,!0)}if(n){const s=a;a=o=>n({className:o,parseClassName:s})}return a},U8=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,a)=>{t.set(n,1e6+a)}),n=>{const a=[];let s=[];for(let o=0;o<n.length;o++){const l=n[o],c=l[0]==="[",f=t.has(l);c||f?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(l)):s.push(l)}return s.length>0&&(s.sort(),a.push(...s)),a}},V8=e=>({cache:L8(e.cacheSize),parseClassName:B8(e),sortModifiers:U8(e),...I8(e)}),q8=/\s+/,G8=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:o}=t,l=[],c=e.trim().split(q8);let f="";for(let h=c.length-1;h>=0;h-=1){const u=c[h],{isExternal:m,modifiers:p,hasImportantModifier:v,baseClassName:j,maybePostfixModifierPosition:y}=n(u);if(m){f=u+(f.length>0?" "+f:f);continue}let b=!!y,N=a(b?j.substring(0,y):j);if(!N){if(!b){f=u+(f.length>0?" "+f:f);continue}if(N=a(j),!N){f=u+(f.length>0?" "+f:f);continue}b=!1}const k=p.length===0?"":p.length===1?p[0]:o(p).join(":"),D=v?k+sb:k,E=D+N;if(l.indexOf(E)>-1)continue;l.push(E);const P=s(N,b);for(let C=0;C<P.length;++C){const O=P[C];l.push(D+O)}f=u+(f.length>0?" "+f:f)}return f},H8=(...e)=>{let t=0,n,a,s="";for(;t<e.length;)(n=e[t++])&&(a=BO(n))&&(s&&(s+=" "),s+=a);return s},BO=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=BO(e[a]))&&(n&&(n+=" "),n+=t);return n},W8=(e,...t)=>{let n,a,s,o;const l=f=>{const h=t.reduce((u,m)=>m(u),e());return n=V8(h),a=n.cache.get,s=n.cache.set,o=c,c(f)},c=f=>{const h=a(f);if(h)return h;const u=G8(f,n);return s(f,u),u};return o=l,(...f)=>o(H8(...f))},K8=[],Wr=e=>{const t=n=>n[e]||K8;return t.isThemeGetter=!0,t},UO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,VO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Y8=/^\d+\/\d+$/,X8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Z8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ac=e=>Y8.test(e),_t=e=>!!e&&!Number.isNaN(Number(e)),Wo=e=>!!e&&Number.isInteger(Number(e)),z0=e=>e.endsWith("%")&&_t(e.slice(0,-1)),Ws=e=>X8.test(e),tB=()=>!0,rB=e=>J8.test(e)&&!Q8.test(e),qO=()=>!1,nB=e=>Z8.test(e),aB=e=>eB.test(e),sB=e=>!ot(e)&&!it(e),oB=e=>Bc(e,WO,qO),ot=e=>UO.test(e),Vi=e=>Bc(e,KO,rB),B0=e=>Bc(e,uB,_t),o2=e=>Bc(e,GO,qO),iB=e=>Bc(e,HO,aB),Dh=e=>Bc(e,YO,nB),it=e=>VO.test(e),qd=e=>Uc(e,KO),lB=e=>Uc(e,fB),i2=e=>Uc(e,GO),cB=e=>Uc(e,WO),dB=e=>Uc(e,HO),Oh=e=>Uc(e,YO,!0),Bc=(e,t,n)=>{const a=UO.exec(e);return a?a[1]?t(a[1]):n(a[2]):!1},Uc=(e,t,n=!1)=>{const a=VO.exec(e);return a?a[1]?t(a[1]):n:!1},GO=e=>e==="position"||e==="percentage",HO=e=>e==="image"||e==="url",WO=e=>e==="length"||e==="size"||e==="bg-size",KO=e=>e==="length",uB=e=>e==="number",fB=e=>e==="family-name",YO=e=>e==="shadow",hB=()=>{const e=Wr("color"),t=Wr("font"),n=Wr("text"),a=Wr("font-weight"),s=Wr("tracking"),o=Wr("leading"),l=Wr("breakpoint"),c=Wr("container"),f=Wr("spacing"),h=Wr("radius"),u=Wr("shadow"),m=Wr("inset-shadow"),p=Wr("text-shadow"),v=Wr("drop-shadow"),j=Wr("blur"),y=Wr("perspective"),b=Wr("aspect"),N=Wr("ease"),k=Wr("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...E(),it,ot],C=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],A=()=>[it,ot,f],_=()=>[ac,"full","auto",...A()],z=()=>[Wo,"none","subgrid",it,ot],G=()=>["auto",{span:["full",Wo,it,ot]},Wo,it,ot],T=()=>[Wo,"auto",it,ot],M=()=>["auto","min","max","fr",it,ot],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...A()],U=()=>[ac,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],$=()=>[e,it,ot],K=()=>[...E(),i2,o2,{position:[it,ot]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",cB,oB,{size:[it,ot]}],L=()=>[z0,qd,Vi],X=()=>["","none","full",h,it,ot],Y=()=>["",_t,qd,Vi],me=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[_t,z0,i2,o2],Ge=()=>["","none",j,it,ot],he=()=>["none",_t,it,ot],ie=()=>["none",_t,it,ot],Ce=()=>[_t,it,ot],se=()=>[ac,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ws],breakpoint:[Ws],color:[tB],container:[Ws],"drop-shadow":[Ws],ease:["in","out","in-out"],font:[sB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ws],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ws],shadow:[Ws],spacing:["px",_t],text:[Ws],"text-shadow":[Ws],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ac,ot,it,b]}],container:["container"],columns:[{columns:[_t,ot,it,c]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:_()}],"inset-x":[{"inset-x":_()}],"inset-y":[{"inset-y":_()}],start:[{start:_()}],end:[{end:_()}],top:[{top:_()}],right:[{right:_()}],bottom:[{bottom:_()}],left:[{left:_()}],visibility:["visible","invisible","collapse"],z:[{z:[Wo,"auto",it,ot]}],basis:[{basis:[ac,"full","auto",c,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_t,ac,"auto","initial","none",ot]}],grow:[{grow:["",_t,it,ot]}],shrink:[{shrink:["",_t,it,ot]}],order:[{order:[Wo,"first","last","none",it,ot]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[c,"screen",...U()]}],"min-w":[{"min-w":[c,"screen","none",...U()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",n,qd,Vi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,it,B0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",z0,ot]}],"font-family":[{font:[lB,ot,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,it,ot]}],"line-clamp":[{"line-clamp":[_t,"none",it,B0]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",it,ot]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",it,ot]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[_t,"from-font","auto",it,Vi]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[_t,"auto",it,ot]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it,ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it,ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wo,it,ot],radial:["",it,ot],conic:[Wo,it,ot]},dB,iB]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:X()}],"rounded-s":[{"rounded-s":X()}],"rounded-e":[{"rounded-e":X()}],"rounded-t":[{"rounded-t":X()}],"rounded-r":[{"rounded-r":X()}],"rounded-b":[{"rounded-b":X()}],"rounded-l":[{"rounded-l":X()}],"rounded-ss":[{"rounded-ss":X()}],"rounded-se":[{"rounded-se":X()}],"rounded-ee":[{"rounded-ee":X()}],"rounded-es":[{"rounded-es":X()}],"rounded-tl":[{"rounded-tl":X()}],"rounded-tr":[{"rounded-tr":X()}],"rounded-br":[{"rounded-br":X()}],"rounded-bl":[{"rounded-bl":X()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_t,it,ot]}],"outline-w":[{outline:["",_t,qd,Vi]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",u,Oh,Dh]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",m,Oh,Dh]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[_t,Vi]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",p,Oh,Dh]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[_t,it,ot]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_t]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[it,ot]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[_t]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",it,ot]}],filter:[{filter:["","none",it,ot]}],blur:[{blur:Ge()}],brightness:[{brightness:[_t,it,ot]}],contrast:[{contrast:[_t,it,ot]}],"drop-shadow":[{"drop-shadow":["","none",v,Oh,Dh]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",_t,it,ot]}],"hue-rotate":[{"hue-rotate":[_t,it,ot]}],invert:[{invert:["",_t,it,ot]}],saturate:[{saturate:[_t,it,ot]}],sepia:[{sepia:["",_t,it,ot]}],"backdrop-filter":[{"backdrop-filter":["","none",it,ot]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[_t,it,ot]}],"backdrop-contrast":[{"backdrop-contrast":[_t,it,ot]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_t,it,ot]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_t,it,ot]}],"backdrop-invert":[{"backdrop-invert":["",_t,it,ot]}],"backdrop-opacity":[{"backdrop-opacity":[_t,it,ot]}],"backdrop-saturate":[{"backdrop-saturate":[_t,it,ot]}],"backdrop-sepia":[{"backdrop-sepia":["",_t,it,ot]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",it,ot]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_t,"initial",it,ot]}],ease:[{ease:["linear","initial",N,it,ot]}],delay:[{delay:[_t,it,ot]}],animate:[{animate:["none",k,it,ot]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,it,ot]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[it,ot,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it,ot]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it,ot]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[_t,qd,Vi,B0]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mB=W8(hB);function l2(...e){return mB(Zt(e))}const XO=({columns:e,data:t,storageKey:n,showGlobalFilter:a=!0})=>{const s=(j,y)=>{if(!n)return y;try{const b=localStorage.getItem("pos_datatable_".concat(n,"_").concat(j));return b?JSON.parse(b):y}catch(b){return console.warn("Failed to load table state",b),y}},[o,l]=x.useState(()=>s("sorting",[])),[c,f]=x.useState(()=>s("visibility",{})),[h,u]=x.useState(()=>s("sizing",{})),[m,p]=x.useState("");x.useEffect(()=>{n&&(localStorage.setItem("pos_datatable_".concat(n,"_sorting"),JSON.stringify(o)),localStorage.setItem("pos_datatable_".concat(n,"_visibility"),JSON.stringify(c)),localStorage.setItem("pos_datatable_".concat(n,"_sizing"),JSON.stringify(h)))},[o,c,h,n]);const v=k8({data:t,columns:e,state:{sorting:o,columnVisibility:c,columnSizing:h,globalFilter:m},onSortingChange:l,onColumnVisibilityChange:f,onColumnSizingChange:u,onGlobalFilterChange:p,getCoreRowModel:x8(),getSortedRowModel:w8(),getFilteredRowModel:j8(),columnResizeMode:"onChange",enableColumnResizing:!0});return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a&&r.jsxs("div",{className:"relative max-w-sm w-full",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx("input",{placeholder:"Buscar en todas las columnas...",value:m!=null?m:"",onChange:j=>p(j.target.value),className:"h-9 w-full rounded-md border border-gray-300 bg-white pl-9 pr-3 text-sm outline-none focus:border-hd-orange focus:ring-1 focus:ring-hd-orange"})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:"flex items-center gap-2 h-9 px-3 rounded-md border border-gray-300 bg-white text-sm font-medium hover:bg-gray-50",children:[r.jsx(qy,{size:16}),"Columnas"]}),r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border border-gray-200 rounded-md shadow-lg p-2 hidden group-hover:block z-20",children:[r.jsx("div",{className:"text-xs font-bold text-gray-500 mb-2 px-2",children:"Mostrar/Ocultar"}),v.getAllLeafColumns().map(j=>r.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:j.getIsVisible(),onChange:j.getToggleVisibilityHandler(),className:"rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"text-sm text-gray-700",children:j.id})]},j.id))]})]})]}),r.jsx("div",{className:"rounded-md border border-gray-200 overflow-hidden bg-white shadow-sm overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",style:{minWidth:v.getTotalSize()},children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200 text-gray-600 font-bold uppercase text-xs",children:v.getHeaderGroups().map(j=>r.jsx("tr",{children:j.headers.map(y=>{var b;return r.jsxs("th",{colSpan:y.colSpan,style:{width:y.getSize()},className:"relative px-4 py-3 group select-none border-r border-transparent hover:border-gray-300 transition-colors",children:[r.jsx("div",{className:"flex items-center justify-between gap-2",children:r.jsxs("div",{className:l2("flex items-center gap-1 cursor-pointer hover:text-gray-900",y.column.getCanSort()?"cursor-pointer":""),onClick:y.column.getToggleSortingHandler(),children:[r2(y.column.columnDef.header,y.getContext()),(b={asc:r.jsx(GD,{size:14}),desc:r.jsx(kr,{size:14})}[y.column.getIsSorted()])!=null?b:y.column.getCanSort()?r.jsx(V6,{size:14,className:"text-gray-300 group-hover:text-gray-500"}):null]})}),r.jsx("div",{onMouseDown:y.getResizeHandler(),onTouchStart:y.getResizeHandler(),className:l2("absolute right-0 top-0 h-full w-1 cursor-col-resize touch-none select-none bg-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",y.column.getIsResizing()?"bg-hd-orange opacity-100 w-1.5":"")})]},y.id)})},j.id))}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:v.getRowModel().rows.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:e.length,className:"h-24 text-center text-gray-500",children:"No hay resultados."})}):v.getRowModel().rows.map(j=>r.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:j.getVisibleCells().map(y=>r.jsx("td",{style:{width:y.column.getSize()},className:"px-4 py-3",children:r2(y.column.columnDef.cell,y.getContext())},y.id))},j.id))})]})}),r.jsx("div",{className:"flex items-center justify-between px-2 text-xs text-gray-500",children:r.jsxs("div",{children:["Total: ",v.getFilteredRowModel().rows.length," registros"]})})]})},pB=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(""),[l,c]=x.useState(null),[f,h]=x.useState(!1),u=$t();x.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const N=await vz();t(N)}catch(N){o("Error al cargar el historial"),console.error(N)}finally{a(!1)}},p=async N=>{if(N.Tipo==="Factura")try{a(!0);const k=await CO(N.Id);c(k),h(!0)}catch(k){console.error(k),o("Error al cargar detalle de venta")}finally{a(!1)}else N.Tipo==="Cotizacin"?u("/ventas/distribucion",{state:{mode:"edit_quotation",id:N.Id}}):v(N)},v=N=>{const D="http://localhost:5006/api".replace("/api","");let E="Factura";N.Tipo==="Cotizacin"&&(E="Cotizacion"),N.Tipo==="Devolucin"&&(E="Devolucion");const P="".concat(D,"/Reports/").concat(E,"?id=").concat(N.Id);window.open(P,"_blank")},j=(N,k="DOP",D="RD$")=>"".concat(k," ").concat(D).concat((N||0).toLocaleString("en-US",{minimumFractionDigits:2})),y=N=>new Date(N).toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=x.useMemo(()=>[{header:"Tipo",accessorKey:"Tipo",cell:N=>{const k=N.getValue();let D=r.jsx(Pr,{size:16,className:"text-blue-500"}),E="text-blue-700 bg-blue-50";return k==="Cotizacin"?(D=r.jsx(za,{size:16,className:"text-amber-500"}),E="text-amber-700 bg-amber-50"):k==="Devolucin"&&(D=r.jsx(E0,{size:16,className:"text-red-500"}),E="text-red-700 bg-red-50"),r.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-md font-bold text-xs ".concat(E),children:[D,k]})},size:120},{header:"Nmero",accessorKey:"Numero",accessorFn:N=>N.Numero||N.numero||N.NumeroFactura||N.numeroFactura,cell:N=>r.jsx("div",{className:"flex items-center gap-2 font-black text-gray-900 mono",children:N.getValue()}),size:140},{header:"Fecha",accessorKey:"Fecha",accessorFn:N=>N.Fecha||N.fecha,cell:N=>r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[r.jsx(sa,{size:14,className:"text-gray-400"}),y(N.getValue())]}),size:150},{header:"Cliente",accessorKey:"ClienteNombre",accessorFn:N=>N.ClienteNombre||N.clienteNombre||"N/A",cell:N=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sj,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"font-semibold text-gray-900 text-sm truncate max-w-[150px]",children:N.getValue()})]}),size:200},{header:"NCF",accessorFn:N=>N.NCF||N.ncf||"N/A",cell:N=>r.jsx("span",{className:"text-[10px] font-mono bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded border border-gray-200",children:N.getValue()||"N/A"}),size:130},{header:"Total",accessorFn:N=>N.Total||N.total,cell:N=>{const k=N.getValue(),E=N.row.original.Tipo==="Devolucin"?"text-red-600":"text-green-600";return r.jsx("div",{className:"text-right font-black ".concat(E),children:j(k,N.row.original.MonedaCodigo,N.row.original.MonedaSimbolo)})},size:120},{header:"Estado",accessorFn:N=>N.Estado||N.estado,cell:N=>{if(N.row.original.Tipo==="Cotizacin")return r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-800 uppercase",children:"Cotizacin"});if(N.row.original.Tipo==="Devolucin")return r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-gray-100 text-gray-800 uppercase",children:"Procesada"});const D=parseFloat(N.row.original.Saldo||N.row.original.saldo||0)<=.01,E=D?"Pagada":"Pendiente";let P="bg-yellow-100 text-yellow-800";return D&&(P="bg-green-100 text-green-800"),N.getValue()==="Anulado"?r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-red-100 text-red-800 uppercase",children:"Anulado"}):r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold ".concat(P," uppercase"),children:E})},size:100},{id:"actions",header:"Acciones",cell:N=>r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("button",{onClick:()=>p(N.row.original),className:"text-gray-600 hover:text-blue-600 hover:bg-blue-50 p-1.5 rounded-lg transition-all",title:"Ver Detalle",children:r.jsx(ci,{size:18})}),r.jsx("button",{onClick:()=>v(N.row.original),className:"text-gray-600 hover:text-hd-orange hover:bg-orange-50 p-1.5 rounded-lg transition-all",title:"Imprimir (Pro)",children:r.jsx(Is,{size:18})}),N.row.original.Tipo==="Factura"&&r.jsx("button",{onClick:()=>u("/ventas/devoluciones?invoice=".concat(N.row.original.Numero||N.row.original.NumeroFactura)),className:"text-gray-600 hover:text-red-600 hover:bg-red-50 p-1.5 rounded-lg transition-all",title:"Devolver",children:r.jsx(E0,{size:18})})]}),size:120,enableSorting:!1,enableResizing:!1}],[y,j]);return n&&e.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Fn,{className:"animate-spin text-hd-orange",size:48})}):r.jsxs("div",{className:"p-6 space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Historial Unificado"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Consulta Ventas, Devoluciones y Cotizaciones"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>u("/ventas/pos"),className:"px-4 py-2 bg-hd-orange text-white rounded-lg font-bold hover:bg-orange-600 transition-shadow shadow-sm active:scale-95",children:"Punto de Venta"}),r.jsx("button",{onClick:()=>u("/ventas/distribucion"),className:"px-4 py-2 bg-gray-800 text-white rounded-lg font-bold hover:bg-black transition-shadow shadow-sm active:scale-95",children:"Distribucin"})]})]}),s&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600 animate-pulse"}),s]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-hd-orange transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Total Registros"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-gray-900",children:e.length}),r.jsx(Pr,{className:"text-hd-orange opacity-20",size:32})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-green-500 transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Monto Total Estimado"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-green-600",children:j(e.filter(N=>N.Tipo!=="Devolucin").reduce((N,k)=>N+(k.Total||0)*(k.TasaCambio||1),0),"DOP","RD$")}),r.jsx(Xr,{className:"text-green-600 opacity-20",size:32})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-amber-500 transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Cotizaciones"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-amber-600",children:e.filter(N=>N.Tipo==="Cotizacin").length}),r.jsx(za,{className:"text-amber-600 opacity-20",size:32})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-red-500 transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Devoluciones"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-red-600",children:e.filter(N=>N.Tipo==="Devolucin").length}),r.jsx(E0,{className:"text-red-600 opacity-20",size:32})]})]})]}),r.jsx(XO,{columns:b,data:e,storageKey:"ventas_historial_unified"}),r.jsx(Dz,{isOpen:f,onClose:()=>h(!1),sale:l})]})},gB=({isOpen:e,onClose:t})=>e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 animate-in fade-in zoom-in duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:" Gua de Procesos de Devolucin"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx("span",{className:"text-2xl",children:""})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"bg-gray-100 p-3 rounded-lg flex items-center justify-center h-12 w-12 min-w-[3rem]",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 border-l-4 border-gray-600 pl-2",children:"Solo Devolucin (Inventario)"}),r.jsxs("p",{className:"text-gray-600 mt-1 text-sm leading-relaxed",children:["Este proceso reingresa los artculos seleccionados al inventario fsico ",r.jsx("strong",{children:"sin generar ningn reembolso monetario inmediato"}),". til para correcciones de inventario o cuando el cliente deja el producto pendiente de otra accin futura."]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"bg-red-100 p-3 rounded-lg flex items-center justify-center h-12 w-12 min-w-[3rem]",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 border-l-4 border-red-600 pl-2",children:"Reembolso (Efectivo)"}),r.jsxs("p",{className:"text-gray-600 mt-1 text-sm leading-relaxed",children:["Use esta opcin cuando se le devuelve el dinero en efectivo al cliente. El sistema reingresa los artculos al inventario y ",r.jsx("strong",{children:"registra una salida de caja"})," por el monto total devuelto, emitiendo una Nota de Crdito interna para fines fiscales."]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"bg-green-100 p-3 rounded-lg flex items-center justify-center h-12 w-12 min-w-[3rem]",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 border-l-4 border-green-600 pl-2",children:"Cambio (Nota de Crdito)"}),r.jsxs("p",{className:"text-gray-600 mt-1 text-sm leading-relaxed",children:["Ideal para cambios de mercanca. El sistema genera una ",r.jsx("strong",{children:"Nota de Crdito"})," con un saldo a favor que se puede aplicar inmediatamente en una nueva factura (POS). No implica salida de efectivo de la caja."]})]})]})]}),r.jsx("div",{className:"mt-8 text-right",children:r.jsx("button",{onClick:t,className:"bg-[#F96302] text-white px-6 py-2 rounded font-bold hover:bg-[#d85502] transition",children:"Entendido"})})]})}):null,xB=()=>{var z,G,T;const e=$t(),[t]=O6(),[n,a]=x.useState(""),[s,o]=x.useState(null),[l,c]=x.useState([]),[f,h]=x.useState({}),[u,m]=x.useState(!1),[p,v]=x.useState(""),[j,y]=x.useState(!1),[b,N]=x.useState(!1),[k,D]=x.useState(null),[E,P]=x.useState("Damaged");x.useEffect(()=>{const M=t.get("invoice");M&&(a(M),C(M))},[t]);const C=async(M=n)=>{if(!M||!M.trim()){v("Ingrese un nmero de factura"),m(!1);return}m(!0),v(""),o(null),c([]),h({});try{const Z=await fetch("".concat("http://localhost:5006/api","/Returns/Search/").concat(M.trim()));if(Z.ok){const B=await Z.json();o(B.venta||B.Venta),c(B.detalles||B.Detalles||[])}else v("Factura no encontrada o no elegible para devolucin."),o(null)}catch(W){console.error(W),v("Error de conexin con el servidor."),o(null)}finally{m(!1)}},O=M=>{console.log("Invoice Selected:",M),y(!1);const W=M.numeroFactura||M.NumeroFactura;console.log("Extracted Invoice Number:",W),M&&W?(a(W),C(W)):console.error("Could not extract invoice number from selection")},A=(M,W)=>{h(Z=>{const B=Z[M]||{returnToStock:!0};if(W<=0){const{[M]:U,...$}=Z;return $}return{...Z,[M]:{...B,quantity:W}}})},_=async M=>{if(!Object.keys(f).length){alert(" Por favor, ingrese la cantidad a devolver en al menos un artculo.");return}m(!0);try{const W=Object.keys(f).map(K=>{const V=l.find(L=>L.articuloId===parseInt(K)||L.id===parseInt(K)),F=l.find(L=>L.articuloId==K);return{articuloId:parseInt(K),cantidad:f[K].quantity,precioUnitario:F.precioUnitario,retornarAlStock:!0}}),Z=W.reduce((K,V)=>K+V.cantidad*V.precioUnitario,0),B={VentaId:s.id||s.Id,TipoAccion:M,Razon:"Solicitado por cliente",TotalReembolsado:Z,Usuario:"Admin",Detalles:W};console.log("Sending Return Payload:",B);const U=await PO(B);console.log("Create return result:",U);const $=U.returnId||U.ReturnId;if($)try{const K=await Pz($);console.log("Report fetched:",K),D(K)}catch(K){console.error("Error fetching return report:",K)}M==="Cambio"?e("/ventas/pos",{state:{creditNoteId:U.creditNoteId,creditAmount:Z}}):(alert("Proceso Completado. ".concat(U.message)),o(null),a(""),c([]))}catch(W){console.error(W),v("Error procesando la devolucin.")}finally{m(!1)}};return r.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen font-sans animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-[#F96302]",children:"Devoluciones y Notas de Crdito"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>e("/ventas/historial-devoluciones"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded font-bold hover:bg-gray-300 transition flex items-center gap-2",children:[r.jsx(na,{size:18}),"Historial"]}),r.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 text-gray-500 hover:text-[#F96302] transition font-bold",title:"Ver Gua de Ayuda",children:[r.jsx("span",{className:"bg-white h-8 w-8 rounded-full shadow flex items-center justify-center text-lg",children:"?"}),r.jsx("span",{className:"hidden md:inline",children:"Ayuda"})]})]})]}),r.jsx(gB,{isOpen:b,onClose:()=>N(!1)}),j&&r.jsx(kO,{onSelect:O,onCancel:()=>y(!1)}),r.jsxs("div",{className:"bg-white p-6 rounded shadow-md mb-6",children:[r.jsxs("div",{className:"flex gap-4 items-end",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Nmero de Factura"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:n,onChange:M=>a(M.target.value),className:"w-full border p-2 rounded text-lg uppercase",placeholder:"FACT-000000"}),r.jsx("button",{onClick:()=>y(!0),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded font-bold hover:bg-gray-300 transition flex items-center gap-2",title:"Buscar Factura",children:""})]})]}),r.jsx("button",{onClick:()=>C(),disabled:u,className:"bg-[#F96302] text-white px-6 py-2 rounded font-bold hover:bg-[#d85502] transition h-[46px]",children:u?"Buscando...":"Buscar"})]}),p&&r.jsx("p",{className:"text-red-600 mt-2 font-bold",children:p})]}),s&&r.jsxs("div",{className:"bg-white p-6 rounded shadow-md animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-end mb-4 border-b pb-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Cliente"}),r.jsx("p",{className:"font-bold text-xl text-gray-900",children:s.clienteId||s.ClienteId})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Factura"}),r.jsx("p",{className:"font-bold text-xl text-gray-900",children:s.numeroFactura||s.NumeroFactura||n})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Fecha"}),r.jsx("p",{className:"font-bold text-xl text-gray-900",children:new Date(s.fecha||s.Fecha).toLocaleDateString()})]}),(s.ncf||s.NCF)&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"NCF"}),r.jsx("p",{className:"font-bold text-xl text-blue-600",children:s.ncf||s.NCF})]}),r.jsxs("div",{className:"text-right space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Total Factura"}),r.jsxs("p",{className:"font-black text-3xl text-green-600",children:["$",(z=s.total||s.Total)==null?void 0:z.toFixed(2)]})]})]}),r.jsxs("table",{className:"w-full mb-6 border border-gray-300",children:[r.jsx("thead",{className:"bg-gray-800 text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left",children:"Artculo"}),r.jsx("th",{className:"p-3 text-center",children:"Cant. Comprada"}),r.jsx("th",{className:"p-3 text-center",children:"Precio"}),r.jsx("th",{className:"p-3 text-center bg-[#F96302]",children:"Cant. a Devolver"})]})}),r.jsx("tbody",{children:l.map(M=>{var W;return r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-3 font-medium text-black",children:M.articuloDescripcion||M.ArticuloDescripcion||M.Descripcion||M.descripcion}),r.jsx("td",{className:"p-3 text-center text-black",children:M.cantidad||M.Cantidad}),r.jsxs("td",{className:"p-3 text-center text-black",children:["$",(W=M.precioUnitario||M.PrecioUnitario)==null?void 0:W.toFixed(2)]}),r.jsx("td",{className:"p-3 text-center bg-orange-50",children:r.jsx("input",{type:"number",min:"0",max:M.cantidad||M.Cantidad,className:"border-2 border-gray-400 p-2 w-24 text-center text-lg font-bold rounded focus:border-[#F96302] focus:outline-none",placeholder:"0",onChange:Z=>A(M.articuloId||M.ArticuloId,parseFloat(Z.target.value))})})]},M.articuloId||M.ArticuloId)})})]}),r.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[r.jsx("button",{onClick:()=>_("SoloDevolucion"),className:"bg-gray-700 text-white px-6 py-3 rounded font-bold hover:bg-gray-800 shadow-lg text-lg",title:"Regresa los artculos al inventario sin generar reembolso. selo para correcciones.",children:"Solo Devolucin (Inv)"}),r.jsx("button",{onClick:()=>_("Reembolso"),className:"bg-red-600 text-white px-6 py-3 rounded font-bold hover:bg-red-700 shadow-lg text-lg",title:"Devuelve dinero en efectivo y regresa artculos al inventario.",children:"Reembolso (Efectivo)"}),r.jsx("button",{onClick:()=>_("Cambio"),className:"bg-green-600 text-white px-6 py-3 rounded font-bold hover:bg-green-700 shadow-lg text-lg",title:"Genera una Nota de Crdito para usar en una nueva compra futura.",children:"Cambio (Nota Crdito)"})]})]}),k&&r.jsxs("div",{className:"mt-8 p-4 bg-white rounded shadow",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Reporte de Devolucin (ID: ",(G=k.Master||k.master)==null?void 0:G.Id,")"]}),r.jsxs("table",{className:"w-full border",children:[r.jsx("thead",{className:"bg-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-left",children:"Artculo"}),r.jsx("th",{className:"p-2 text-center",children:"Cantidad"}),r.jsx("th",{className:"p-2 text-center",children:"Precio Unitario"}),r.jsx("th",{className:"p-2 text-center",children:"Subtotal"})]})}),r.jsx("tbody",{children:(k.Detalles||k.detalles||[]).map((M,W)=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"p-2",children:M.ArticuloDescripcion||M.Descripcion||M.ArticuloId}),r.jsx("td",{className:"p-2 text-center",children:M.Cantidad||M.cantidad}),r.jsxs("td",{className:"p-2 text-center",children:["$",(M.PrecioUnitario||M.precioUnitario).toFixed(2)]}),r.jsxs("td",{className:"p-2 text-center",children:["$",((M.Cantidad||M.cantidad)*(M.PrecioUnitario||M.precioUnitario)).toFixed(2)]})]},W))})]}),r.jsxs("div",{className:"mt-4 text-right font-bold",children:["Total Calculado: $",(T=k.TotalCalculado||k.totalCalculado)==null?void 0:T.toFixed(2),(k.TotalesCoinciden!==void 0?k.TotalesCoinciden:k.totalesCoinciden)?r.jsx("span",{className:"text-green-600 ml-2",children:"(Coinciden)"}):r.jsx("span",{className:"text-red-600 ml-2",children:"(Discrepancia)"})]})]})]})},vB=()=>{const e=$t(),[t,n]=x.useState("returns"),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState(!1),[h,u]=x.useState({start:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});x.useEffect(()=>{m()},[t,h]);const m=async()=>{f(!0);try{if(t==="returns"){const b=await Ez(h.start,h.end);s(b)}else{const b=await Az(h.start,h.end);l(b)}}catch(b){console.error("Error fetching history:",b)}finally{f(!1)}},p=b=>new Date(b).toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=b=>"RD$ ".concat((b||0).toLocaleString("en-US",{minimumFractionDigits:2})),j=x.useMemo(()=>[{header:"Retorno #",accessorKey:"id",accessorFn:b=>b.id||b.Id,size:80},{header:"Fecha",accessorFn:b=>p(b.fecha||b.Fecha),size:140},{header:"Factura Orig.",accessorFn:b=>b.numeroFactura||b.NumeroFactura,cell:b=>r.jsx("span",{className:"font-bold text-gray-700",children:b.getValue()}),size:120},{header:"Cliente",accessorFn:b=>b.clienteNombre||b.ClienteNombre||"Cliente General",size:200},{header:"Tipo Accin",accessorFn:b=>b.tipoAccion||b.TipoAccion,cell:b=>r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat(b.getValue()==="Reembolso"?"bg-red-100 text-red-800":b.getValue()==="Cambio"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:b.getValue()}),size:120},{header:"Total",accessorFn:b=>b.totalReembolsado||b.TotalReembolsado,cell:b=>r.jsx("div",{className:"text-right font-bold text-green-700",children:v(b.getValue())}),size:120},{header:"Usuario",accessorFn:b=>b.usuario||b.Usuario,size:100}],[]),y=x.useMemo(()=>[{header:"NCF",accessorFn:b=>b.ncf||b.NCF,cell:b=>r.jsx("span",{className:"font-mono text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:b.getValue()}),size:140},{header:"Fecha",accessorFn:b=>p(b.fecha||b.Fecha),size:140},{header:"Cliente",accessorFn:b=>b.clienteNombre||b.ClienteNombre,size:200},{header:"Factura Orig.",accessorFn:b=>b.numeroFactura||b.NumeroFactura,size:120},{header:"Monto Original",accessorFn:b=>b.monto||b.Monto,cell:b=>r.jsx("div",{className:"text-right",children:v(b.getValue())}),size:120},{header:"Saldo",accessorFn:b=>b.saldo||b.Saldo,cell:b=>{const N=b.getValue();return r.jsx("div",{className:"text-right font-bold ".concat(N>0?"text-green-600":"text-gray-400"),children:v(N)})},size:120},{header:"Estado",accessorFn:b=>b.estado||b.Estado,cell:b=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:b.getValue()}),size:100}],[]);return r.jsxs("div",{className:"p-6 space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Historial de Devoluciones"}),r.jsx("p",{className:"text-gray-500",children:"Consulta de devoluciones y notas de crdito generadas."})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>e("/ventas/devoluciones"),className:"bg-hd-orange text-white px-4 py-2 rounded-lg font-bold hover:bg-orange-600 transition",children:"Nueva Devolucin"})})]}),r.jsx(We,{className:"bg-gray-50 border-none shadow-none",children:r.jsxs("div",{className:"p-4 flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Desde"}),r.jsx("input",{type:"date",value:h.start,onChange:b=>u(N=>({...N,start:b.target.value})),className:"border p-2 rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Hasta"}),r.jsx("input",{type:"date",value:h.end,onChange:b=>u(N=>({...N,end:b.target.value})),className:"border p-2 rounded"})]})]})}),r.jsxs("div",{className:"flex space-x-1 bg-gray-200 p-1 rounded-lg w-fit",children:[r.jsx("button",{onClick:()=>n("returns"),className:"px-4 py-2 rounded-md text-sm font-bold transition-all ".concat(t==="returns"?"bg-white shadow text-hd-orange":"text-gray-600 hover:text-gray-900"),children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(na,{size:16})," Devoluciones"]})}),r.jsx("button",{onClick:()=>n("creditNotes"),className:"px-4 py-2 rounded-md text-sm font-bold transition-all ".concat(t==="creditNotes"?"bg-white shadow text-hd-orange":"text-gray-600 hover:text-gray-900"),children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(li,{size:16})," Notas de Crdito"]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 min-h-[400px]",children:c?r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:"Cargando..."}):r.jsx(XO,{columns:t==="returns"?j:y,data:t==="returns"?a:o,storageKey:"history_".concat(t)})})]})},yB="http://localhost:5006/api",bB=()=>{var m;const[e,t]=x.useState(new Date().toISOString().split("T")[0]),[n,a]=x.useState(!1),[s,o]=x.useState({detalles:[],resumen:{}});x.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);const p=await fetch("".concat(yB,"/Ventas/CorteCaja?fecha=").concat(e));if(p.ok){const v=await p.json();o(v)}}catch(p){console.error("Error loading corte:",p)}finally{a(!1)}},c=(p,v="DOP",j="RD$")=>"".concat(v," ").concat(j).concat((p||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),f=()=>{window.print()},h=s.resumen||{totalDOP:0,totalTransacciones:0},u=s.detalles||[];return u.filter(p=>p.metodoPago==="Efectivo").reduce((p,v)=>p+v.total*(v.moneda==="USD"?60.5:1),0),r.jsxs("div",{className:"p-6 space-y-6 max-w-6xl mx-auto print:p-0",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 border-b pb-6 print:hidden",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tighter uppercase italic",children:"Corte de Caja"}),r.jsxs("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-widest flex items-center gap-2",children:[r.jsx(ti,{size:14,className:"text-hd-orange"})," Resumen Diario de Operaciones"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(sa,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ge,{type:"date",className:"pl-9 font-bold",value:e,onChange:p=>t(p.target.value)})]}),r.jsx(re,{variant:"outline",onClick:l,disabled:n,children:r.jsx(na,{className:"h-4 w-4 ".concat(n?"animate-spin":"")})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600 font-bold",onClick:f,children:[r.jsx(Is,{className:"mr-2 h-4 w-4"})," Imprimir Reporte"]})]})]}),r.jsxs("div",{className:"hidden print:block text-center space-y-2 mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold uppercase text-black",children:"POS CRONO - REPORTE DE CIERRE"}),r.jsxs("p",{className:"text-sm font-mono",children:["FECHA DE CORTE: ",e]}),r.jsx("div",{className:"border-b-2 border-black w-full"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(We,{className:"border-l-4 border-l-hd-orange shadow-sm",children:r.jsx(Mt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Ventas Totales (Consolidado)"}),r.jsx("h3",{className:"text-3xl font-black text-gray-900 tracking-tight",children:c(h.totalDOP,"DOP","RD$")})]}),r.jsx("div",{className:"h-12 w-12 bg-orange-50 rounded-xl flex items-center justify-center text-hd-orange",children:r.jsx(Xr,{size:24})})]})})}),r.jsx(We,{className:"border-l-4 border-l-blue-500 shadow-sm",children:r.jsx(Mt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Transacciones"}),r.jsxs("h3",{className:"text-3xl font-black text-gray-900 tracking-tight",children:[h.totalTransacciones," ",r.jsx("span",{className:"text-sm font-bold text-gray-400 italic",children:"Ventas"})]})]}),r.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-xl flex items-center justify-center text-blue-500",children:r.jsx(Pr,{size:24})})]})})}),r.jsx(We,{className:"border-l-4 border-l-green-500 shadow-sm",children:r.jsx(Mt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Fecha del Reporte"}),r.jsx("h3",{className:"text-2xl font-black text-gray-900 tracking-tight",children:new Date(e+"T12:00:00").toLocaleDateString("es-DO",{weekday:"long",day:"numeric",month:"long"})})]}),r.jsx("div",{className:"h-12 w-12 bg-green-50 rounded-xl flex items-center justify-center text-green-500",children:r.jsx(sa,{size:24})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(We,{className:"shadow-sm border-none bg-white",children:[r.jsx(vt,{className:"bg-gray-50/50 border-b",children:r.jsx(bt,{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Desglose por Moneda y Mtodo"})}),r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"font-black uppercase text-[10px]",children:"Moneda"}),r.jsx(le,{className:"font-black uppercase text-[10px]",children:"Mtodo"}),r.jsx(le,{className:"font-black uppercase text-[10px] text-center",children:"Trans."}),r.jsx(le,{className:"font-black uppercase text-[10px] text-right",children:"Total Bruto"})]})}),r.jsx(Vt,{children:u.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:4,className:"text-center py-8 text-gray-400 italic",children:"No hay operaciones registradas este da"})}):u.map((p,v)=>r.jsxs(Te,{className:"hover:bg-gray-50",children:[r.jsx(H,{className:"font-black text-gray-700",children:p.moneda}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[p.metodoPago==="Efectivo"?r.jsx(vu,{size:14,className:"text-green-500"}):r.jsx(li,{size:14,className:"text-blue-500"}),r.jsx("span",{className:"font-bold text-gray-600",children:p.metodoPago})]})}),r.jsx(H,{className:"text-center font-bold text-gray-500",children:p.transacciones}),r.jsx(H,{className:"text-right font-black text-gray-900",children:c(p.total,p.moneda,p.simbolo)})]},v))})]})]}),r.jsxs(We,{className:"shadow-sm border-none bg-gray-900 text-white",children:[r.jsx(vt,{className:"border-b border-white/10",children:r.jsx(bt,{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Consolidado en DOP (Pesos)"})}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 bg-white/10 rounded-lg flex items-center justify-center",children:r.jsx(vu,{className:"text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Total Efectivo"}),r.jsxs("p",{className:"text-xl font-bold",children:["RD$ ",u.filter(p=>p.metodoPago==="Efectivo").reduce((p,v)=>p+v.total*(v.moneda==="USD"?60.5:1),0).toLocaleString()]})]})]})}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 bg-white/10 rounded-lg flex items-center justify-center",children:r.jsx(li,{className:"text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Total Tarjeta"}),r.jsxs("p",{className:"text-xl font-bold",children:["RD$ ",u.filter(p=>p.metodoPago==="Tarjeta").reduce((p,v)=>p+v.total*(v.moneda==="USD"?60.5:1),0).toLocaleString()]})]})]})}),r.jsx("div",{className:"pt-6 border-t border-white/10",children:r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-hd-orange uppercase tracking-widest italic",children:"Gran Total Neto"}),r.jsxs("p",{className:"text-4xl font-black text-hd-orange tracking-tighter italic",children:["RD$ ",((m=h.totalDOP)==null?void 0:m.toLocaleString())||0]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Firma del Cajero"}),r.jsx("div",{className:"w-32 h-px bg-gray-700 mt-6"})]})]})})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-start gap-3 print:hidden",children:[r.jsx(Pr,{className:"text-blue-500 mt-0.5",size:18}),r.jsx("p",{className:"text-xs text-blue-700 font-medium leading-relaxed",children:"Este reporte consolida todas las ventas facturadas hasta el momento para la fecha seleccionada. Los montos en USD son convertidos a DOP utilizando la tasa histrica grabada en cada transaccin para asegurar la precisin contable."})]})]})},Up="http://localhost:5006/api",jB=async()=>{const e=await fetch("".concat(Up,"/Compras"));if(!e.ok)throw new Error("Failed to get purchases: ".concat(e.status));return e.json()},ob=async e=>{const t=await fetch("".concat(Up,"/Compras/").concat(e));if(!t.ok)throw new Error("Failed to get purchase: ".concat(t.status));return t.json()},wB=async e=>{const t=await fetch("".concat(Up,"/Compras"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error("Failed to save purchase: ".concat(t.status," ").concat(n))}return t.json()},JO=async e=>{const t=await fetch("".concat(Up,"/Compras/").concat(e,"/anular"),{method:"PUT",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.text();throw new Error("Failed to annul purchase: ".concat(t.status," ").concat(n))}return t.json()},QO=({isOpen:e,onClose:t,onConfirm:n,title:a,message:s,confirmLabel:o="Confirmar",cancelLabel:l="Cancelar",variant:c="danger"})=>{const[f,h]=Nt.useState(!1);Nt.useEffect(()=>{e&&h(!1)},[e]);const u=async()=>{h(!0);try{await n()}finally{h(!1)}};return r.jsx(ui,{open:e,onOpenChange:t,className:"max-w-sm",children:r.jsxs(fi,{className:"p-0",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 text-left",children:[r.jsx("div",{className:"p-2 rounded-full flex-shrink-0 ".concat(c==="danger"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"),children:r.jsx(Lc,{size:24})}),r.jsx(Yy,{children:a})]}),r.jsx("div",{className:"mt-4 text-sm text-gray-600 leading-relaxed",children:s})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 gap-2 sm:gap-0 border-t border-gray-100",children:[r.jsx("button",{type:"button",disabled:f,onClick:t,className:"inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 disabled:opacity-50 transition-colors",children:l}),r.jsxs("button",{type:"button",disabled:f,onClick:u,className:"inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 transition-colors ".concat(c==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-hd-orange hover:bg-orange-600 focus:ring-orange-500"),children:[f&&r.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),o]})]})]})})},NB=()=>{const e=$t(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0),[c,f]=x.useState({isOpen:!1,id:null,numero:""}),h=async()=>{const{id:X,numero:Y}=c;try{l(!0),await JO(X),f(me=>({...me,isOpen:!1})),await C()}catch(me){console.error("Error anular compra:",me)}finally{l(!1),f(me=>({...me,isOpen:!1}))}},[u,m]=x.useState({key:"fechaCompra",direction:"desc"}),[p,v]=x.useState({}),[j,y]=x.useState({}),[b,N]=x.useState({}),[k,D]=x.useState(null),[E,P]=x.useState(!1);x.useEffect(()=>{C()},[]);const C=async()=>{try{l(!0);const X=await jB();s(Array.isArray(X)?X:[])}catch(X){console.error("Error loading purchases:",X),s([])}finally{l(!1)}},O=X=>{let Y="asc";u.key===X&&u.direction==="asc"&&(Y="desc"),m({key:X,direction:Y})},A=(X,Y)=>{Y.stopPropagation(),D(k===X?null:X)},_=(X,Y)=>{v(me=>({...me,[X]:Y}))},z=(X,Y,me)=>{N(xe=>({...xe,[X]:{...xe[X]||{min:"",max:""},[Y]:me}}))},G=(X,Y)=>{y(me=>{const xe=me[X]||[];return xe.includes(Y)?{...me,[X]:xe.filter(Pe=>Pe!==Y)}:{...me,[X]:[...xe,Y]}})},T=(X,Y,me)=>{y(xe=>{var Fe;let Ge=[...xe[X]||[]];const he=F(),ie=[],Ce=(ze,De)=>{if(!ze.children){ie.push(De);return}Object.keys(ze.children).forEach(Ue=>{Ce(ze.children[Ue],De?"".concat(De,"/").concat(Ue):Ue)})};if(Y==="")return me?{...xe,[X]:[]}:(Ce(he,""),{...xe,[X]:ie});const se=Y.split("/").filter(Boolean);let oe=he;for(const ze of se)if(oe=(Fe=oe.children)==null?void 0:Fe[ze],!oe)break;if(oe){const ze=[],De=(Ue,Xe)=>{if(!Ue.children){ze.push(Xe);return}Object.keys(Ue.children).forEach(Ze=>{De(Ue.children[Ze],"".concat(Xe,"/").concat(Ze))})};De(oe,Y),me?Ge=Ge.filter(Ue=>!ze.includes(Ue)):ze.forEach(Ue=>{Ge.includes(Ue)||Ge.push(Ue)})}return{...xe,[X]:Ge}})},M=()=>{v({}),y({}),N({}),n("")},W=X=>X?new Date(X).toLocaleString("es-DO",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):"",Z=X=>X?new Date(X).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",U=(()=>{let X=Array.isArray(a)?[...a]:[];return t&&(X=X.filter(Y=>Object.keys(Y).some(me=>(me==="fechaCompra"?Z(Y[me]):String(Y[me])).toLowerCase().includes(t.toLowerCase())))),Object.keys(p).forEach(Y=>{p[Y]&&(X=X.filter(me=>{if(Y==="fechaCompra"){const Pe=new Date(me[Y]);return"".concat(Pe.getFullYear()," ").concat(Pe.toLocaleDateString("es-DO",{month:"long"})," ").concat(Pe.getDate()).toLowerCase().includes(p[Y].toLowerCase())}return String(me[Y]||"").toLowerCase().includes(p[Y].toLowerCase())}))}),Object.keys(j).forEach(Y=>{j[Y]&&j[Y].length>0&&(X=X.filter(me=>{if(Y==="fechaCompra"){const xe=new Date(me[Y]),Pe="".concat(xe.getFullYear(),"/").concat(xe.toLocaleDateString("es-DO",{month:"long"}),"/").concat(xe.getDate());return j[Y].includes(Pe)}return j[Y].includes(String(me[Y]))}))}),Object.keys(b).forEach(Y=>{const{min:me,max:xe}=b[Y];me!==""&&(X=X.filter(Pe=>(Pe[Y]||0)>=parseFloat(me))),xe!==""&&(X=X.filter(Pe=>(Pe[Y]||0)<=parseFloat(xe)))}),u.key&&X.sort((Y,me)=>{const xe=Y[u.key],Pe=me[u.key];return xe<Pe?u.direction==="asc"?-1:1:xe>Pe?u.direction==="asc"?1:-1:0}),X})(),K=(()=>{if(!E)return null;const X={},Y=me=>{let xe=a.find(Ge=>Ge.id===me);if(!xe)return null;let Pe=0;for(;xe.documentoReferenciaId&&Pe<20;){const Ge=a.find(he=>he.id===xe.documentoReferenciaId);if(Ge)xe=Ge;else break;Pe++}return xe};return U.forEach(me=>{if(!me)return;const xe=Y(me.id);if(xe){const Pe=xe.id;X[Pe]||(X[Pe]={root:xe,items:[]}),X[Pe].items.push(me)}else X[me.id]?X[me.id].items.push(me):X[me.id]={root:me,items:[me]}}),Object.values(X).forEach(me=>{me.items.sort((xe,Pe)=>new Date(xe.fechaCompra)-new Date(Pe.fechaCompra))}),Object.values(X).sort((me,xe)=>new Date(xe.root.fechaCompra)-new Date(me.root.fechaCompra))})(),V=X=>{const Y=a.map(me=>String(me[X]||""));return[...new Set(Y)].sort()},F=()=>{const X={children:{}};return a.forEach(Y=>{const me=new Date(Y.fechaCompra),xe=String(me.getFullYear()),Pe=me.toLocaleDateString("es-DO",{month:"long"}),Ge=String(me.getDate());X.children[xe]||(X.children[xe]={children:{}}),X.children[xe].children[Pe]||(X.children[xe].children[Pe]={children:{}}),X.children[xe].children[Pe].children[Ge]||(X.children[xe].children[Pe].children[Ge]={count:0}),X.children[xe].children[Pe].children[Ge].count++}),X},L=X=>X.map(Y=>{var me;return r.jsxs(Te,{className:"cursor-pointer hover:bg-gray-50 ".concat(E&&Y.id!==Y.documentoReferenciaId?"bg-gray-50/50":""),onClick:()=>e("/compras/editar/".concat(Y.id)),children:[r.jsx(H,{className:"font-mono text-sm font-medium text-blue-600 pl-4",children:Y.numeroCompra}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center",children:[E&&Y.documentoReferenciaId&&r.jsx("div",{className:"w-4 h-4 mr-2 border-l-2 border-b-2 border-gray-300 rounded-bl-none",style:{marginLeft:"10px"}}),r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ".concat(Y.tipoDocumento==="Recepcion"?"bg-purple-50 text-purple-700 border-purple-200":Y.tipoDocumento==="OrdenCompra"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200"),children:Y.tipoDocumento==="OrdenCompra"?"Orden":Y.tipoDocumento||"Factura"})]})}),r.jsx(H,{children:Y.documentoReferenciaNumero?r.jsxs("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded",children:["ref: ",Y.documentoReferenciaNumero]}):r.jsx("span",{className:"text-xs text-gray-300",children:"-"})}),r.jsxs(H,{children:[r.jsx("div",{className:"font-medium text-gray-900",children:Y.proveedorNombre}),r.jsx("div",{className:"text-xs text-gray-500",children:Y.codigoProveedor})]}),r.jsx(H,{className:"text-gray-600",children:W(Y.fechaCompra)}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(Y.estado==="Completado"?"bg-green-100 text-green-800":Y.estado==="Pendiente"?"bg-yellow-100 text-yellow-800":Y.estado==="Anulado"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:Y.estado})}),r.jsx(H,{className:"text-right font-medium",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{children:[Y.monedaSimbolo||"RD$"," ",(me=Y.total)==null?void 0:me.toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2})]}),Y.monedaCodigo&&Y.monedaCodigo!=="DOP"&&r.jsxs("span",{className:"text-[10px] text-gray-500 font-normal italic",children:["(Equiv. DOP ",(Y.total*(Y.tasaCambio||1)).toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2}),")"]})]})}),r.jsx(H,{className:"text-right",onClick:xe=>xe.stopPropagation(),children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[Y.estado!=="Anulado"&&Y.tipoDocumento==="OrdenCompra"&&!Y.yaTransferido&&r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-purple-600 hover:text-purple-800 hover:bg-purple-50 transition-all border border-transparent hover:border-purple-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Convertir a Recepcin",onClick:xe=>{xe.stopPropagation(),e("/compras/nuevo",{state:{transferFrom:Y,targetType:"Recepcion"}})},children:r.jsx(Mp,{className:"h-6 w-6 stroke-[1.5]"})}),Y.estado!=="Anulado"&&Y.tipoDocumento==="Recepcion"&&!Y.yaTransferido&&r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-green-600 hover:text-green-800 hover:bg-green-50 transition-all border border-transparent hover:border-green-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Crear Factura",onClick:xe=>{xe.stopPropagation(),e("/compras/nuevo",{state:{transferFrom:Y,targetType:"Factura"}})},children:r.jsx(Pr,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-all border border-transparent hover:border-gray-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Ver Detalle",onClick:()=>e("/compras/editar/".concat(Y.id)),children:r.jsx(ci,{className:"h-6 w-6 stroke-[1.5]"})}),Y.estado!=="Anulado"&&r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-red-500 hover:text-red-700 hover:bg-red-50 transition-all border border-transparent hover:border-red-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Anular Compra",onClick:()=>f({isOpen:!0,id:Y.id,numero:Y.numeroCompra}),children:r.jsx(Tt,{className:"h-6 w-6 stroke-[2]"})})]})})]},Y.id)});return r.jsxs("div",{className:"space-y-6",children:[r.jsx(QO,{isOpen:c.isOpen,onClose:()=>f(X=>({...X,isOpen:!1})),onConfirm:h,title:"Anular Compra",message:"Est seguro que desea anular la compra ".concat(c.numero,"? Esta accin no se puede deshacer y reversar el inventario."),confirmLabel:"Confirmar Anulacin"}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Compras e Ingresos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione sus rdenes de compra y recepcin de mercanca."})]}),r.jsxs(re,{onClick:()=>e("/compras/nuevo"),className:"bg-gray-800 hover:bg-gray-900 shadow-lg",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nueva Compra"]})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(bt,{children:"Historial de Compras"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center mr-4",children:[r.jsx("span",{className:"text-sm text-gray-600 mr-2 font-medium",children:"Agrupar por Flujo"}),r.jsx("button",{onClick:()=>P(!E),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ".concat(E?"bg-hd-orange":"bg-gray-200"),children:r.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(E?"translate-x-6":"translate-x-1")})})]}),(Object.keys(p).length>0||Object.keys(j).some(X=>Array.isArray(j[X])&&j[X].length>0)||Object.keys(b).some(X=>b[X].min!==""||b[X].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:M,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(Tt,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar compra...",className:"pl-9",value:t,onChange:X=>n(X.target.value)})]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(sc,{label:"Nmero",field:"numeroCompra",sortConfig:u,onSort:O,onFilter:A,showFilter:k==="numeroCompra",filterValue:p.numeroCompra,onFilterChange:_,uniqueValues:V("numeroCompra"),selectedValues:j.numeroCompra,onValueToggle:G,className:"w-[140px]"}),r.jsx(sc,{label:"Tipo",field:"tipoDocumento",sortConfig:u,onSort:O,onFilter:A,showFilter:k==="tipoDocumento",filterValue:p.tipoDocumento,onFilterChange:_,uniqueValues:V("tipoDocumento"),selectedValues:j.tipoDocumento,onValueToggle:G,className:"w-[120px]"}),r.jsx(le,{className:"w-[100px] text-gray-700 font-bold",children:"Ref."}),r.jsx(sc,{label:"Proveedor",field:"proveedorNombre",sortConfig:u,onSort:O,onFilter:A,showFilter:k==="proveedorNombre",filterValue:p.proveedorNombre,onFilterChange:_,uniqueValues:V("proveedorNombre"),selectedValues:j.proveedorNombre,onValueToggle:G}),r.jsx(sc,{label:"Fecha",field:"fechaCompra",sortConfig:u,onSort:O,onFilter:A,showFilter:k==="fechaCompra",filterValue:p.fechaCompra,onFilterChange:_,dateTree:F(),selectedValues:j.fechaCompra,onTreeToggle:T}),r.jsx(sc,{label:"Estado",field:"estado",sortConfig:u,onSort:O,onFilter:A,showFilter:k==="estado",filterValue:p.estado,onFilterChange:_,uniqueValues:V("estado"),selectedValues:j.estado,onValueToggle:G}),r.jsx(sc,{label:"Total",field:"total",sortConfig:u,onSort:O,onFilter:A,showFilter:k==="total",numericValue:b.total,onNumericFilterChange:z,className:"text-right"}),r.jsx(le,{className:"text-right",children:"Acciones"})]})}),r.jsx(Vt,{children:o?r.jsx(Te,{children:r.jsx(H,{colSpan:8,className:"text-center py-8",children:"Cargando compras..."})}):U.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:8,className:"text-center py-8 text-gray-500",children:"No se encontraron compras."})}):E?K.map(X=>r.jsxs(Nt.Fragment,{children:[X.items.length>1&&r.jsx(Te,{children:r.jsxs(H,{colSpan:8,className:"bg-gray-100 py-1 px-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:["Flujo: ",X.root.numeroCompra," (",X.items.length," documentos)"]})},X.root.id+"_sep"),L(X.items)]},X.root.id+"_group")):L(U)})]})})]})]})},sc=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y=""})=>{const b=n.key===t,N=h!==void 0,k=v!==void 0,D=l||m&&m.length>0||N&&(f.min!==""||f.max!==""),E=t==="fechaCompra"?"Ms antiguo a ms reciente":"De A a Z",P=t==="fechaCompra"?"Ms reciente a ms antiguo":"De Z a A";return r.jsxs(le,{className:"relative group p-0 ".concat(y),children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>a(t),children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"font-bold text-gray-700",children:e}),b?n.direction==="asc"?r.jsx(Gn,{size:14,className:"text-hd-orange"}):r.jsx(Jr,{size:14,className:"text-hd-orange"}):r.jsx(Uu,{size:14,className:"text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s&&r.jsx("button",{onClick:C=>s(t,C),className:"p-1 rounded-sm hover:bg-gray-300 transition-colors ".concat(D?"text-hd-orange":"text-gray-400"),children:r.jsx(Vu,{size:14,fill:D?"currentColor":"none"})})]}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Gn,{size:14,className:"mr-2 text-gray-400"})," ",E]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Jr,{size:14,className:"mr-2 text-gray-400"})," ",P]})]}),r.jsxs("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:[r.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:["Filtrar ",e]}),N?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:["Mayor que ",">"]}),r.jsx(ge,{type:"number",placeholder:"0.00",value:f.min,onChange:C=>h(t,"min",C.target.value),className:"h-8 text-xs font-mono",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:["Menor que ","<"]}),r.jsx(ge,{type:"number",placeholder:"0.00",value:f.max,onChange:C=>h(t,"max",C.target.value),className:"h-8 text-xs font-mono"})]})]}):r.jsx(ge,{placeholder:"Buscar...",value:l,onChange:C=>c(t,C.target.value),className:"h-8 text-xs",autoFocus:!0})]}),r.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:k?r.jsx(ZO,{tree:v,selectedPaths:m,onToggle:(C,O)=>j(t,C,O),allLeafPaths:(()=>{const C=[],O=(A,_)=>{if(!A.children){C.push(_);return}Object.keys(A.children).forEach(z=>O(A.children[z],_?"".concat(_,"/").concat(z):z))};return O(v,""),C})()}):u.length>0?r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group sticky top-0 bg-white z-10 border-b border-gray-100 mb-1",onClick:()=>{const C=u.every(O=>m.includes(O));u.forEach(O=>{C?m.includes(O)&&p(t,O):m.includes(O)||p(t,O)})},children:[r.jsx("input",{type:"checkbox",checked:u.length>0&&u.every(C=>m.includes(C)),ref:C=>{if(C){const O=u.some(_=>m.includes(_)),A=u.every(_=>m.includes(_));C.indeterminate=O&&!A}},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs font-bold text-gray-700",children:"(Seleccionar todo)"})]}),u.map(C=>r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group",onClick:()=>p(t,C),children:[r.jsx("input",{type:"checkbox",checked:m.includes(C),readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs text-gray-600 truncate",children:C})]},C))]}):null}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border-t border-gray-100",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px]",onClick:()=>s(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] text-hd-orange",onClick:()=>{N?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(k?m.forEach(C=>j(t,C,!0)):m.forEach(C=>p(t,C))))},children:"Limpiar"})]})]})]})},ZO=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s="",allLeafPaths:o=[]})=>{const[l,c]=x.useState(!0),f=Object.keys(e.children||{}).sort((u,m)=>m.localeCompare(u)),h=(u,m)=>{const p=[],v=(j,y)=>{if(!j.children){p.push(y);return}Object.keys(j.children).forEach(b=>v(j.children[b],"".concat(y,"/").concat(b)))};return v(u,m),p};return r.jsxs("div",{className:a>0?"ml-4 pt-1":"",children:[a===0&&r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-100 rounded cursor-pointer group sticky top-0 bg-white z-10 border-b border-gray-100 mb-1",onClick:u=>{u.stopPropagation();const m=o.length>0&&o.every(p=>t.includes(p));n("",m)},children:[r.jsx("div",{className:"w-4 h-4 mr-1"}),r.jsx("input",{type:"checkbox",checked:o.length>0&&o.every(u=>t.includes(u)),ref:u=>{if(u){const m=o.some(v=>t.includes(v)),p=o.every(v=>t.includes(v));u.indeterminate=m&&!p}},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-[11px] font-bold text-gray-700",children:"(Seleccionar todo)"})]}),f.map(u=>{const m=s?"".concat(s,"/").concat(u):u,p=e.children[u],v=!p.children,j=v?[m]:h(p,m),y=j.every(N=>t.includes(N)),b=j.some(N=>t.includes(N));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-50 rounded cursor-pointer group",onClick:()=>n(m,y),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",onClick:N=>{N.stopPropagation(),c(!l)},children:!v&&(l?r.jsx(Jr,{size:10}):r.jsx(Mp,{size:10}))}),r.jsx("input",{type:"checkbox",checked:y,ref:N=>{N&&(N.indeterminate=b&&!y)},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",onClick:N=>N.stopPropagation()}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-700 select-none",children:u})]}),l&&!v&&r.jsx(ZO,{tree:p,selectedPaths:t,onToggle:n,depth:a+1,path:m})]},u)})]})},c2=()=>{var ye,Me;const e=$t(),t=hs(),{id:n}=xo(),a=!!n,s=(ye=t.state)==null?void 0:ye.transferFrom,o=(Me=t.state)==null?void 0:Me.targetType,[l,c]=x.useState(!1),[f,h]=x.useState([]),[u,m]=x.useState(""),[p,v]=x.useState(new Date().toISOString().split("T")[0]),[j,y]=x.useState(""),[b,N]=x.useState("Contado"),[k,D]=x.useState("Borrador"),[E,P]=x.useState("(Auto)"),[C,O]=x.useState("OrdenCompra"),[A,_]=x.useState(null),[z,G]=x.useState([]),[T,M]=x.useState(""),[W,Z]=x.useState(1),[B,U]=x.useState(!0),[$,K]=x.useState([]),[V,F]=x.useState(""),[L,X]=x.useState([]),[Y,me]=x.useState([]),[xe,Pe]=x.useState(!1),[Ge,he]=x.useState(!1),[ie,Ce]=x.useState({habilitarFacturas:!0});x.useEffect(()=>{ze(),se()},[]);const se=async()=>{try{const q=await fetch("".concat("http://localhost:5006/api","/ProveedorConfiguration"));if(q.ok){const Q=await q.json();Ce(Q)}}catch(ne){console.error("Error loading config:",ne)}};x.useEffect(()=>{a?Xe():s&&oe()},[n,s]);const oe=()=>{s&&(o&&O(o),_(s.id),m(s.proveedorId),y(s.referenciaProveedor||""),N(s.terminosPago||"Contado"),M(s.monedaId),Z(s.tasaCambio),F(s.almacenId),Fe(s.id))},Fe=async ne=>{try{c(!0);const q=await ob(ne),Q=q.detalles.map(ve=>({id:ve.articuloId,articuloId:ve.articuloId,codigo:ve.numeroArticulo,descripcion:ve.descripcion,cantidad:ve.cantidad,costo:ve.costoUnitario,unidad:ve.unidadMedida,total:ve.totalLinea,impuesto:ve.montoImpuesto,planMedida:ve.planMedida||""}));X(Q),m(q.proveedorId),M(q.monedaId),Z(q.tasaCambio)}catch(q){console.error("Error fetching source details:",q)}finally{c(!1)}},ze=async()=>{try{const ne="http://localhost:5006/api",[q,Q,ve,be]=await Promise.all([kj(),qa(),fetch("".concat(ne,"/Monedas")).then(Le=>Le.json()),vo()]);if(h(Array.isArray(q)?q:[]),K(Array.isArray(Q)?Q:[]),G(Array.isArray(ve)?ve:[]),me(Array.isArray(be)?be:[]),Q.length>0&&!V&&F(Q[0].id),!a&&!s){const Le=ve.find(Qe=>Qe.esFuncional);Le&&(M(Le.id),Z(1),U(!0))}}catch(ne){console.error("Error loading catalogs:",ne)}},De=async ne=>{if(m(ne),ie.habilitarFacturas&&ne){const q=f.find(Q=>Q.id===parseInt(ne));q&&q.tipoComprobante&&(j||y(q.tipoComprobante))}},Ue=async(ne,q)=>{if(!ne)return;const Q=z.find(ve=>ve.id===parseInt(ne));if(Q&&Q.esFuncional){Z(1),U(!0);return}try{const be=await fetch("".concat("http://localhost:5006/api","/Monedas/tasas?monedaId=").concat(ne,"&fecha=").concat(q));if(be.ok){const Le=await be.json();Z(Le.tasa||1),U(!1)}else Z(1),U(!1)}catch(ve){console.error("Error fetching rate:",ve)}},Xe=async()=>{try{c(!0);const ne=await ob(n);P(ne.numeroCompra),m(ne.proveedorId),v(ne.fechaCompra.split("T")[0]),y(ne.referenciaProveedor||""),N(ne.terminosPago||"Contado"),D(ne.estado),M(ne.monedaId||""),Z(ne.tasaCambio||1),O(ne.tipoDocumento||"Factura"),_(ne.documentoReferenciaId);const q=ne.detalles.map(Q=>({id:Q.articuloId,articuloId:Q.articuloId,codigo:Q.numeroArticulo,descripcion:Q.descripcion,cantidad:Q.cantidad,costo:Q.costoUnitario,unidad:Q.unidadMedida,total:Q.totalLinea,impuesto:Q.montoImpuesto,planMedida:Q.planMedida||"",cantTotal:Q.cantTotal}));X(q)}catch(ne){console.error("Error loading purchase:",ne)}finally{c(!1)}},Ze=L.reduce((ne,q)=>ne+q.cantidad*q.costo,0),J=L.reduce((ne,q)=>ne+(parseFloat(q.cantidad)||0),0),fe=ie.habilitarFacturas?Ze*.18:0,pe=Ze+fe,Ie=async ne=>{let q=[];try{const ve=await fetch("".concat("http://localhost:5006/api","/Articulos/").concat(ne.id,"/Precios"));ve.ok&&(q=await ve.json())}catch(Q){console.error("Error fetching product prices",Q)}X(Q=>{const ve=ne.unidadMedida||"UND";if(Q.find(Dt=>Dt.articuloId===ne.id&&Dt.unidad===ve))return Q.map(Dt=>Dt.articuloId===ne.id&&Dt.unidad===ve?{...Dt,cantidad:Dt.cantidad+1,total:(Dt.cantidad+1)*Dt.costo}:Dt);const Le=z.find(Dt=>Dt.id===parseInt(T)),Qe=Le?Le.codigo:"DOP",tt=q.find(Dt=>Dt.moneda===Qe&&Dt.unidadMedida===ve),ct=ne.costoUnitario||0;let Ft=ct;return tt?Ft=tt.precio:Qe!=="DOP"&&W>0&&(Ft=ct/W),[...Q,{articuloId:ne.id,codigo:ne.numeroArticulo,descripcion:ne.descripcion,cantidad:1,costo:Ft,unidad:ve,total:Ft*1,planMedida:ne.planMedida||"",costoOriginalDOP:ct,prices:q}]}),Pe(!1)},Oe=(ne,q,Q)=>{const ve=[...L],be=ve[ne];if(q==="cantidad"){const Le=parseFloat(Q)||0;be.cantidad=Le,be.total=Le*be.costo,be.cantTotal=void 0}else if(q==="costo"){const Le=parseFloat(Q)||0;be.costo=Le,be.total=be.cantidad*Le}else if(q==="planMedida"){be.planMedida=Q;const Le=Y.find(Qe=>Qe.planId===Q);Le&&([Le.unidadBase,...(Le.detalles||[]).map(tt=>tt.unidadMedida)].includes(be.unidad)||(be.unidad=Le.unidadBase)),be.cantTotal=void 0}else if(q==="unidad"){be.unidad=Q;const Le=z.find(ct=>ct.id===parseInt(T)),Qe=Le?Le.codigo:"DOP",tt=(be.prices||[]).find(ct=>ct.moneda===Qe&&ct.unidadMedida===Q);tt&&(be.costo=tt.precio,be.total=be.cantidad*be.costo),be.cantTotal=void 0}X(ve)},_e=ne=>{X(q=>q.filter((Q,ve)=>ve!==ne))};x.useEffect(()=>{if(!T||L.length===0)return;const ne=z.find(Q=>Q.id===parseInt(T)),q=ne?ne.codigo:"DOP";X(Q=>Q.map(ve=>{const be=(ve.prices||[]).find(Qe=>Qe.moneda===q&&Qe.unidadMedida===ve.unidad);let Le=ve.costo;if(be)Le=be.precio;else{const Qe=ve.costoOriginalDOP||ve.costo;q==="DOP"?Le=Qe:W>0&&(Le=Qe/W)}return{...ve,costo:Le,total:ve.cantidad*Le}}))},[T,W]);const Re=async()=>{if(!u){alert("Debe seleccionar un proveedor");return}if(L.length===0){alert("Debe agregar al menos un artculo");return}const[ne,q,Q]=p.split("-").map(Number),ve=new Date(ne,q-1,Q),be=new Date;ve.setHours(be.getHours(),be.getMinutes(),be.getSeconds());const Le="".concat(p,"T").concat(String(be.getHours()).padStart(2,"0"),":").concat(String(be.getMinutes()).padStart(2,"0"),":").concat(String(be.getSeconds()).padStart(2,"0")),Qe={ProveedorId:parseInt(u),FechaCompra:Le,TerminosPago:b,ReferenciaProveedor:j,Estado:k,Subtotal:Ze,Impuestos:fe,Total:pe,AlmacenId:V?parseInt(V):null,MonedaId:T?parseInt(T):null,TasaCambio:parseFloat(W),TipoDocumento:C,DocumentoReferenciaId:A,Detalles:L.map(tt=>{let ct=1;if(tt.planMedida&&tt.unidad){const Dt=Y.find(Et=>Et.planId===tt.planMedida);if(Dt)if(Dt.unidadBase===tt.unidad)ct=1;else{const Et=(Dt.detalles||[]).find(qt=>qt.unidadMedida===tt.unidad);Et&&(ct=Et.cantidad!==void 0?Et.cantidad:Et.Cantidad!==void 0?Et.Cantidad:1)}}const Ft=tt.cantTotal!==void 0?tt.cantTotal:(parseFloat(tt.cantidad)||0)*ct;return{ArticuloId:tt.articuloId,NumeroArticulo:tt.codigo,Descripcion:tt.descripcion,Cantidad:tt.cantidad,UnidadMedida:tt.unidad,CostoUnitario:tt.costo,TotalLinea:tt.total,PlanMedida:tt.planMedida,CantTotal:Ft,CantAdq:parseFloat(tt.cantidad)||0,PorcentajeImpuesto:18,MontoImpuesto:tt.total*.18}})};try{await wB(Qe),alert("Compra guardada exitosamente"),e("/compras")}catch(tt){console.error("Error saving purchase:",tt),alert("Error al guardar la compra")}},ee=async()=>{try{c(!0),await JO(n),he(!1),e("/compras")}catch(ne){console.error("Error anular compra:",ne)}finally{c(!1),he(!1)}};return r.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto pb-10",children:[r.jsx(ul,{isOpen:xe,onClose:()=>Pe(!1),onSelect:Ie}),r.jsx(QO,{isOpen:Ge,onClose:()=>he(!1),onConfirm:ee,title:"Anular Compra",message:"Est seguro que desea anular la compra ".concat(E,"? Esta accin no se puede deshacer y reversar el inventario."),confirmLabel:"Confirmar Anulacin"}),r.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-gray-50/95 backdrop-blur z-10 py-4 border-b border-gray-200 -mx-6 px-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Orden de Compra"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Documento #",E,"  ",r.jsx("span",{className:"text-orange-600 font-medium",children:k})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(re,{variant:"outline",onClick:()=>e("/compras"),children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Cancelar"]}),a&&r.jsxs(re,{variant:"outline",onClick:()=>window.open("/compras/imprimir/".concat(n),"_blank"),children:[r.jsx(Is,{className:"mr-2 h-4 w-4"})," Imprimir"]}),!a&&r.jsxs(re,{className:"bg-gray-800 hover:bg-gray-900",onClick:Re,children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar Compra"]}),a&&k!=="Anulado"&&r.jsxs("button",{type:"button",className:"flex items-center px-4 py-2 rounded-md transition-colors text-red-500 hover:text-red-700 hover:bg-red-50 border border-red-200 cursor-pointer text-sm font-medium shadow-sm bg-white",onClick:()=>he(!0),children:[r.jsx(Tt,{className:"mr-2 h-4 w-4"})," Anular Compra"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{className:"text-sm uppercase tracking-wider text-gray-500",children:"Datos Generales"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Tipo de Documento"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:C,onChange:ne=>O(ne.target.value),disabled:a||s||A,children:[r.jsx("option",{value:"Factura",children:"Factura Directa"}),r.jsx("option",{value:"OrdenCompra",children:"Orden de Compra"}),r.jsx("option",{value:"Recepcion",disabled:!0,children:"Recepcin (Requiere OC)"})]}),A&&r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Vinculado al documento anterior ID: ",A]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Proveedor"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white pl-3 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:u,onChange:ne=>De(ne.target.value),disabled:a,children:[r.jsx("option",{value:"",children:"Seleccionar..."}),f.map(ne=>r.jsx("option",{value:ne.id,children:ne.razonSocial},ne.id))]}),r.jsx(vc,{className:"absolute right-2.5 top-2.5 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Moneda"}),r.jsx("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:T,onChange:ne=>{M(ne.target.value),Ue(ne.target.value,p)},disabled:a,children:z.map(ne=>r.jsxs("option",{value:ne.id,children:[ne.codigo," - ",ne.nombre]},ne.id))})]}),!B&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Tasa de Cambio"}),r.jsx(ge,{type:"number",value:W,onChange:ne=>Z(parseFloat(ne.target.value)||1),disabled:a})]})]})]}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{className:"text-sm uppercase tracking-wider text-gray-500",children:"Detalles Factura"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Tipo de Documento"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:C,onChange:ne=>O(ne.target.value),disabled:a||s,children:[r.jsx("option",{value:"OrdenCompra",children:"Orden de Compra"}),r.jsx("option",{value:"Recepcion",children:"Recepcin de Mercanca"}),ie.habilitarFacturas&&r.jsx("option",{value:"Factura",children:"Factura de Compra"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Fecha Documento"}),r.jsx(ge,{type:"date",value:p,onChange:ne=>{v(ne.target.value),Ue(T,ne.target.value)},disabled:a})]}),ie.habilitarFacturas&&r.jsx("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-100 mb-4",children:r.jsx(ge,{label:"NCF / No. Factura",placeholder:"ej: B0100000001",title:"Nmero de Comprobante Fiscal (NCF) del proveedor",value:j,onChange:ne=>y(ne.target.value),disabled:a,className:"border-blue-300 focus:border-blue-500 focus:ring-blue-500 font-mono"})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Condicin de Pago"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:b,onChange:ne=>N(ne.target.value),disabled:a,children:[r.jsx("option",{children:"Contado"}),r.jsx("option",{children:"Crdito 15 das"}),r.jsx("option",{children:"Crdito 30 das"}),r.jsx("option",{children:"Crdito 60 das"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Almacn de Recepcin"}),r.jsxs("select",{value:V,onChange:ne=>F(ne.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:cursor-not-allowed disabled:bg-gray-100",disabled:a,children:[r.jsx("option",{value:"",children:"Seleccione Almacn"}),$.map(ne=>r.jsx("option",{value:ne.id,children:ne.nombre},ne.id))]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-3 space-y-4",children:r.jsxs(We,{className:"min-h-[500px] flex flex-col",children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between py-3",children:[r.jsx(bt,{className:"text-sm uppercase tracking-wider text-gray-500",children:"Artculos a Ingresar"}),!a&&r.jsxs(re,{size:"sm",variant:"ghost",className:"text-hd-orange hover:bg-orange-50 hover:text-orange-700",onClick:()=>Pe(!0),children:[r.jsx(Lt,{className:"mr-1 h-4 w-4"})," Agregar Producto"]})]}),r.jsx("div",{className:"flex-1 p-0 overflow-hidden",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-[120px]",children:"Cdigo"}),r.jsx(le,{children:"Producto"}),r.jsx(le,{className:"w-[120px]",children:"Plan"}),r.jsx(le,{className:"w-[100px]",children:"U.M."}),r.jsx(le,{className:"w-[100px] text-right",children:"Cantidad"}),r.jsx(le,{className:"w-[100px] text-right text-purple-600",children:"Cant. Total"}),r.jsx(le,{className:"w-[120px] text-right",children:"Costo Unit."}),r.jsx(le,{className:"w-[120px] text-right",children:"Total"}),r.jsx(le,{className:"w-[50px]"})]})}),r.jsxs(Vt,{children:[L.map((ne,q)=>{let Q=1;if(ne.planMedida&&ne.unidad){const be=Y.find(Le=>Le.planId===ne.planMedida);if(be)if(be.unidadBase===ne.unidad)Q=1;else{const Le=(be.detalles||[]).find(Qe=>Qe.unidadMedida===ne.unidad);Le&&(Q=Le.cantidad!==void 0?Le.cantidad:Le.Cantidad!==void 0?Le.Cantidad:1)}}const ve=ne.cantTotal!==void 0?ne.cantTotal:(parseFloat(ne.cantidad)||0)*Q;return r.jsxs(Te,{children:[r.jsx(H,{className:"font-mono text-xs text-gray-500",children:ne.codigo}),r.jsx(H,{className:"font-medium text-gray-800",children:ne.descripcion}),r.jsx(H,{children:r.jsxs("select",{className:"w-full text-xs border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ne.planMedida,onChange:be=>Oe(q,"planMedida",be.target.value),disabled:a,children:[r.jsx("option",{value:"",children:"--"}),Y.map(be=>r.jsx("option",{value:be.planId,children:be.planId},be.planId))]})}),r.jsx(H,{children:r.jsx("select",{className:"w-full text-xs border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ne.unidad,onChange:be=>Oe(q,"unidad",be.target.value),disabled:a,children:(()=>{const be=Y.find(ct=>ct.planId===ne.planMedida),Le=be?[be.unidadBase,...(be.detalles||[]).map(ct=>ct.unidadMedida)]:[ne.unidad],Qe=Le.length>0&&Le[0]!==""?Le:(ne.prices||[]).map(ct=>ct.unidadMedida);return[...new Set(Qe)].map(ct=>r.jsx("option",{value:ct,children:ct},ct))})()})}),r.jsx(H,{children:r.jsx("input",{type:"number",className:"w-full text-right border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ne.cantidad,onChange:be=>Oe(q,"cantidad",be.target.value),disabled:a})}),r.jsx(H,{className:"text-right font-mono text-purple-600",children:ve.toFixed(2)}),r.jsx(H,{children:r.jsx("input",{type:"number",className:"w-full text-right border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ne.costo,onChange:be=>Oe(q,"costo",be.target.value),disabled:a})}),r.jsxs(H,{className:"text-right font-semibold text-gray-900",children:["$",ne.total.toFixed(2)]}),r.jsx(H,{children:!a&&r.jsx("button",{onClick:()=>_e(q),className:"text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(rr,{size:16})})})]},q)}),L.length>0&&r.jsxs(Te,{className:"bg-gray-50 font-bold border-t-2 border-gray-200",children:[r.jsx(H,{colSpan:5,className:"text-right",children:"Total Cantidad ENTRADA:"}),r.jsx(H,{className:"text-right",children:J.toFixed(2)}),r.jsx(H,{colSpan:3})]}),L.length===0&&r.jsx(Te,{className:"bg-gray-50/30 border-dashed border-b-2",children:r.jsx(H,{colSpan:6,className:"text-center py-4 text-gray-400 italic text-xs",children:r.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[r.jsx("p",{children:"No hay artculos agregados an."}),r.jsxs(re,{variant:"outline",className:"text-hd-orange border-hd-orange hover:bg-orange-50",onClick:()=>Pe(!0),children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Agregar Producto"]})]})})})]})]})}),r.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6",children:r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"w-64 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["$",Ze.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["$",Ze.toFixed(2)]})]}),ie.habilitarFacturas&&r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",title:"Impuestos calculados (Modo Fiscal Activo)",children:[r.jsx("span",{children:"Impuestos (Est. 18%):"}),r.jsxs("span",{children:["$",fe.toFixed(2)]})]}),r.jsx("div",{className:"h-px bg-gray-300 my-2"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[r.jsx("span",{children:"Total Compra:"}),r.jsxs("span",{children:["$",pe.toFixed(2)]})]})]})})})]})})]})]})},e5="http://localhost:5006/api",SB=async()=>{const e=await fetch("".concat(e5,"/Ncf"));if(!e.ok)throw new Error("Error al obtener NCFs");return e.json()},CB=async(e,t)=>{if(!(await fetch("".concat(e5,"/Ncf/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Error al actualizar NCF");return!0},kB=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(!1),[l,c]=x.useState(null);x.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const m=await SB();t(m),c(null)}catch(m){console.error(m),c("Error al cargar la configuracin de NCF. Verifique la conexin con el servidor.")}finally{a(!1)}},h=(m,p,v)=>{t(j=>j.map(y=>y.id===m?{...y,[p]:v}:y))},u=async()=>{try{o(!0);const m=e.map(p=>CB(p.id,p));await Promise.all(m),alert("Configuracin de NCF guardada correctamente.")}catch(m){console.error(m),alert("Error al guardar cambios. Revise la consola.")}finally{o(!1)}};return n?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(Fn,{className:"animate-spin text-hd-orange",size:48})}):l?r.jsxs("div",{className:"p-8 text-center bg-red-50 rounded-lg",children:[r.jsx(Lc,{className:"mx-auto text-red-500 mb-4",size:48}),r.jsx("h3",{className:"text-xl font-bold text-red-700 mb-2",children:"Error de Carga"}),r.jsx("p",{className:"text-red-600 mb-4",children:l}),r.jsx(re,{onClick:f,variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:"Reintentar"})]}):r.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg text-gray-600",children:r.jsx(di,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Comprobantes Fiscales (NCF)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configuracin de secuencias para Repblica Dominicana (DGII)"})]})]}),r.jsxs(re,{onClick:u,disabled:s,className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[s?r.jsx(Fn,{className:"animate-spin mr-2 h-4 w-4"}):r.jsx(Kt,{className:"mr-2 h-4 w-4"}),s?"Guardando...":"Guardar Cambios"]})]}),r.jsx("div",{className:"grid gap-6",children:e.sort((m,p)=>m.tipoNCF.localeCompare(p.tipoNCF)).map(m=>r.jsxs(We,{className:"overflow-hidden border-l-4 ".concat(m.activo?"border-l-hd-orange":"border-l-gray-300 opacity-75"),children:[r.jsx(vt,{className:"bg-gray-50/50 pb-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(bt,{className:"text-lg font-medium text-gray-800 flex items-center",children:[r.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-mono px-2 py-1 rounded mr-3",children:m.prefijo||m.tipoNCF}),m.nombre]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.activo,onChange:p=>h(m.id,"activo",p.target.checked),className:"mr-2 rounded text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"text-xs font-bold text-gray-500",children:"ACTIVO"})]}),r.jsx(wj,{size:16,className:"text-gray-400 cursor-help",title:"Configuracin de secuencia DGII"})]})]})}),r.jsx(Mt,{className:"pt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Prefijo Serie"}),r.jsx(ge,{value:m.prefijo||"",onChange:p=>h(m.id,"prefijo",p.target.value),className:"font-mono uppercase",placeholder:"Ej: B01"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Secuencia Inicial"}),r.jsx(ge,{type:"number",value:m.desde,onChange:p=>h(m.id,"desde",parseInt(p.target.value)),className:"font-mono text-right"}),r.jsx("p",{className:"text-[10px] text-gray-400",children:"Inicio del rango"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Secuencia Actual / Siguiente"}),r.jsxs("div",{className:"relative",children:[r.jsx(ge,{type:"number",value:m.actual+1,onChange:p=>h(m.id,"actual",parseInt(p.target.value)-1),className:"font-mono text-right font-bold text-gray-900 border-hd-orange/50 focus:border-hd-orange ring-hd-orange/20"}),r.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Sig:"})]}),r.jsxs("p",{className:"text-[10px] text-blue-600 font-medium",children:["NCF a generar: ",m.prefijo||m.tipoNCF,String((m.actual||0)+1).padStart(8,"0")]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Lmite / Vencimiento"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{type:"number",value:m.hasta,onChange:p=>h(m.id,"hasta",parseInt(p.target.value)),className:"font-mono text-right flex-1",placeholder:"Lmite"}),r.jsx(ge,{type:"date",value:m.fechaVencimiento?m.fechaVencimiento.split("T")[0]:"",onChange:p=>h(m.id,"fechaVencimiento",p.target.value),className:"font-mono flex-1"})]}),r.jsx("p",{className:"text-[10px] text-gray-400",children:"Lmite Secuencia / Fecha Vencimiento"})]})]})})]},m.id))})]})},d2=({title:e,children:t})=>r.jsxs("div",{className:"border border-gray-200 bg-white rounded-lg mb-6 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e})}),r.jsx("div",{className:"p-6",children:t})]}),Mh=({label:e,children:t,description:n})=>r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),n&&r.jsx("span",{className:"text-xs text-gray-500",children:n})]}),t]}),PB=()=>{const[e,t]=x.useState({useAutoSequence:!0,useInitials:!1,initials:"CL",sequenceLength:4,currentValue:1,separator:"-",nameCase:"words"}),[n,a]=x.useState(!0),[s,o]=x.useState("");x.useEffect(()=>{l()},[]);const l=async()=>{try{const u=await fetch("http://localhost:5006/api/ClientConfiguration");if(u.ok){const m=await u.json();t(m)}}catch(u){console.error("Error fetching config:",u)}finally{a(!1)}},c=u=>{const{name:m,value:p,type:v,checked:j}=u.target;t(y=>({...y,[m]:v==="checkbox"?j:p}))},f=async()=>{try{(await fetch("http://localhost:5006/api/ClientConfiguration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(o("Configuracin guardada correctamente"),setTimeout(()=>o(""),3e3)):alert("Error al guardar configuracin")}catch(u){console.error("Error saving config:",u),alert("Error de conexin")}},h=()=>{const u=String(e.currentValue).padStart(e.sequenceLength,"0");return e.useInitials?"".concat(e.initials).concat(e.separator).concat(u):u};return n?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando configuracin..."}):r.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuracin de Cliente"}),r.jsx("p",{className:"text-gray-500",children:"Defina cmo se generan los cdigos de cliente automticamente."})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[s&&r.jsx("span",{className:"text-green-600 font-medium animate-pulse",children:s}),r.jsxs(re,{onClick:f,className:"bg-hd-orange hover:bg-orange-600 text-white",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar Cambios"]})]})]}),r.jsx(d2,{title:"Secuencia Numrica",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-100",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-blue-900",children:"Usar Secuencia Automtica"}),r.jsx("p",{className:"text-xs text-blue-700",children:"El sistema generar el cdigo al guardar."})]}),r.jsx("input",{type:"checkbox",name:"useAutoSequence",checked:e.useAutoSequence,onChange:c,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Usar Iniciales"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Prefijo antes del nmero (ej. CL)."})]}),r.jsx("input",{type:"checkbox",name:"useInitials",checked:e.useInitials,onChange:c,disabled:!e.useAutoSequence,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),r.jsx(Mh,{label:"Separador",children:r.jsx(ge,{name:"separator",value:e.separator,onChange:c,disabled:!e.useAutoSequence||!e.useInitials,maxLength:1,className:"w-20 text-center font-bold"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Mh,{label:"Iniciales",description:"Texto al inicio del cdigo.",children:r.jsx(ge,{name:"initials",value:e.initials,onChange:c,disabled:!e.useAutoSequence||!e.useInitials,className:"uppercase font-mono"})}),r.jsx(Mh,{label:"Valor Inicial / Prximo",description:"El prximo nmero a utilizar.",children:r.jsx(ge,{type:"number",name:"currentValue",value:e.currentValue,onChange:c,disabled:!e.useAutoSequence,className:"font-mono"})}),r.jsx(Mh,{label:"Longitud de Secuencia",description:"Cantidad de ceros a la izquierda.",children:r.jsx(ge,{type:"number",name:"sequenceLength",value:e.sequenceLength,onChange:c,disabled:!e.useAutoSequence,min:1,max:10,className:"font-mono"})}),r.jsxs("div",{className:"mt-6 p-4 border border-dashed border-gray-300 rounded-lg text-center",children:[r.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:"Vista Previa"}),r.jsx("span",{className:"text-2xl font-bold text-gray-800 font-mono tracking-wider",children:h()})]})]})]})}),r.jsx(d2,{title:"Formato del Nombre",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Formato del Nombre"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Define cmo se capitaliza el nombre del cliente."})]}),r.jsxs("select",{name:"nameCase",value:e.nameCase,onChange:c,className:"h-8 w-40 p-1 border rounded bg-white",children:[r.jsx("option",{value:"words",children:"Cada palabra (Palabras)"}),r.jsx("option",{value:"first",children:"Primera letra"}),r.jsx("option",{value:"normal",children:"Sin cambios"})]})]})})})})]})},EB="http://localhost:5006/api",AB=()=>{const e=$t(),[t,n]=x.useState(null),[a,s]=x.useState(null),[o,l]=x.useState("");x.useEffect(()=>{n(document.getElementById("header-actions")),s(document.getElementById("header-message"))},[]);const[c,f]=x.useState({usarSecuenciaPorGrupo:!0,prefijo:"",siguienteNumero:"00001",longitudMinima:5,permitirEdicion:!1,requiereCodBarras:!1,activarPorDefecto:!0,categoriaDefecto:"",rutaImagenesDefecto:""}),[h,u]=x.useState([]),[m,p]=x.useState([]),[v,j]=x.useState(!1),[y,b]=x.useState([{id:1,grupo:"Profesional",prefijo:"PROF-",siguienteNumero:"00001",longitudMinima:5,activo:!0},{id:2,grupo:"Industrial",prefijo:"IND-",siguienteNumero:"00001",longitudMinima:5,activo:!0},{id:3,grupo:"Hogar",prefijo:"HOG-",siguienteNumero:"00001",longitudMinima:5,activo:!0},{id:4,grupo:"Comercial",prefijo:"COM-",siguienteNumero:"00001",longitudMinima:5,activo:!1}]),[N,k]=x.useState(!1),D=(T,M)=>{f(W=>{const Z={...W,[T]:M};if(T==="prefijo"||T==="longitudMinima"){const B="1".padStart(Z.longitudMinima,"0");Z.formatoEjemplo="".concat(Z.prefijo).concat(B)}return Z})},E=(T,M,W)=>{b(Z=>Z.map(B=>{if(B.id!==T)return B;const U={...B,[M]:W};if(M==="planDefecto")if(W){const $=h.find(K=>K.planId===W);$&&(U.unidadMedidaDefecto=$.unidadBase)}else U.unidadMedidaDefecto="";return U}))},P=()=>{const T={id:null,grupo:"",prefijo:"",siguienteNumero:"00001",longitudMinima:5,activo:!0,esDefecto:!1,planDefecto:"",unidadMedidaDefecto:""};b([...y,T])},C=T=>{b(y.map(M=>({...M,esDefecto:M.id===T})))},O=T=>{b(y.filter(M=>M.id!==T))},A=async()=>{j(!0);try{const T=await aO();f(T)}catch(T){console.error("Error loading config:",T),alert("No se pudo cargar la configuracin")}finally{j(!1)}},_=async()=>{try{const M=(await Pj()).map(W=>({id:W.id,grupo:W.grupo,prefijo:W.prefijo||"",siguienteNumero:W.siguienteNumero||"",longitudMinima:W.longitudMinima,activo:W.activo,esDefecto:W.esDefecto||!1,planDefecto:W.planDefecto||"",unidadMedidaDefecto:W.unidadMedidaDefecto||""}));b(M)}catch(T){console.error("Error loading sequences:",T),alert("No se pudieron cargar las secuencias")}};x.useEffect(()=>{(async()=>{try{const M=await vo();u(M)}catch(M){console.error(M)}try{const M=await Cm();p(M)}catch(M){console.error("Error loading groups in config",M)}await A(),_()})()},[]);const z=async()=>{if(!N){k(!0);try{const T=await fetch("".concat(EB,"/FileSystem/NativeBrowse"));if(T.status===200){const M=await T.json();M.path&&D("rutaImagenesDefecto",M.path)}else if(T.status===204)console.log("User cancelled the dialog");else if(T.status===408)alert("Tiempo de espera agotado. Por favor, intente de nuevo.");else{const M=await T.json();alert("Error: "+M.message)}}catch(T){console.error("Error opening native explorer:",T),alert("No se pudo abrir el explorador del sistema")}finally{k(!1)}}},G=async()=>{if(y.filter(Z=>!Z.grupo||Z.grupo.trim()==="").length>0){alert("No se pueden guardar grupos sin nombre. Por favor, asigne un nombre a todos los grupos o elimnelos.");return}const M=y.map(Z=>Z.grupo.trim().toLowerCase());if(M.filter((Z,B)=>M.indexOf(Z)!==B).length>0){alert("Existen grupos con nombres duplicados. Cada grupo debe ser nico.");return}try{await PL(c),await EL(y),l("Cambios guardados correctamente"),setTimeout(()=>l(""),3e3),await _()}catch(Z){console.error("Error al guardar:",Z),alert("Error al guardar la configuracin")}};return r.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[t&&oo.createPortal(r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),className:"mr-2",children:r.jsx("span",{className:"text-gray-600",children:"Cancelar"})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:G,children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Guardar Cambios"]})]}),t),a&&o&&oo.createPortal(r.jsx("div",{className:"text-green-600 text-sm font-medium",children:o}),a),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Secuencia Numrica General"})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("input",{type:"checkbox",id:"usarSecuenciaPorGrupo",checked:c.usarSecuenciaPorGrupo,onChange:T=>D("usarSecuenciaPorGrupo",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"usarSecuenciaPorGrupo",className:"text-sm font-semibold text-blue-900",children:"Usar Secuencia por Grupo de Producto"}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Cada grupo de producto tendr su propia secuencia numrica independiente"})]})]}),!c.usarSecuenciaPorGrupo&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Prefijo"}),r.jsx(ge,{value:c.prefijo,onChange:T=>D("prefijo",T.target.value),placeholder:"Ej: ART-, PROD-, ITM-"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Prefijo que se agregar antes del nmero de artculo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Siguiente Nmero"}),r.jsx(ge,{value:c.siguienteNumero,onChange:T=>D("siguienteNumero",T.target.value),placeholder:"00001"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Prximo nmero que se asignar a un nuevo artculo"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Longitud Mnima"}),r.jsx(ge,{type:"number",min:"1",max:"10",value:c.longitudMinima,onChange:T=>D("longitudMinima",parseInt(T.target.value))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cantidad de dgitos mnimos (se rellenar con ceros a la izquierda)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Formato de Ejemplo"}),r.jsx("div",{className:"h-10 px-3 py-2 bg-gray-100 border border-gray-300 rounded-md flex items-center",children:r.jsx("span",{className:"font-mono text-sm font-semibold text-gray-700",children:c.formatoEjemplo})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vista previa del formato del nmero de artculo"})]})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"permitirEdicion",checked:c.permitirEdicion,onChange:T=>D("permitirEdicion",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"permitirEdicion",className:"text-sm font-medium text-gray-700",children:"Permitir edicin manual del nmero de artculo"})]})})]})]}),c.usarSecuenciaPorGrupo&&r.jsxs(We,{children:[r.jsx(vt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(bt,{children:"Secuencias por Grupo de Producto"}),r.jsxs(re,{variant:"outline",size:"sm",onClick:P,children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Agregar Grupo"]})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-12 text-center text-xs text-gray-500",children:"Activo"}),r.jsx(le,{className:"w-20 text-center text-xs font-bold text-blue-600",children:"Por Defecto"}),r.jsx(le,{children:"Grupo de Producto"}),r.jsx(le,{className:"w-24",children:"Plan Def."}),r.jsx(le,{className:"w-20",children:"U.M. Def."}),r.jsx(le,{className:"w-32",children:"Prefijo"}),r.jsx(le,{className:"w-32",children:"Siguiente #"}),r.jsx(le,{className:"w-24",children:"Longitud"}),r.jsx(le,{className:"w-48",children:"Ejemplo"}),r.jsx(le,{className:"w-16"})]})}),r.jsx(Vt,{children:y.map(T=>r.jsxs(Te,{children:[r.jsx(H,{className:"text-center",children:r.jsx("input",{type:"checkbox",checked:T.activo,onChange:M=>E(T.id,"activo",M.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",title:"Activar/Desactivar grupo"})}),r.jsx(H,{className:"text-center bg-blue-50/50",children:r.jsx("input",{type:"radio",name:"defaultGroup",checked:T.esDefecto,onChange:()=>C(T.id),className:"h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500",title:"Marcar como grupo por defecto"})}),r.jsx(H,{children:r.jsxs("select",{value:T.grupo,onChange:M=>E(T.id,"grupo",M.target.value),className:"w-full h-8 px-2 text-sm border border-gray-300 rounded focus:ring-hd-orange focus:border-hd-orange bg-white",children:[r.jsx("option",{value:"",children:"Seleccione Grupo"}),m.map(M=>r.jsx("option",{value:M.nombre,children:M.nombre},M.id)),T.grupo&&!m.some(M=>M.nombre===T.grupo)&&r.jsxs("option",{value:T.grupo,children:[T.grupo," (Legacy)"]})]})}),r.jsx(H,{children:r.jsxs("select",{value:T.planDefecto||"",onChange:M=>E(T.id,"planDefecto",M.target.value),className:"w-full text-xs border-0 bg-transparent p-1 h-8 focus:ring-0",children:[r.jsx("option",{value:"",children:"--"}),h.map((M,W)=>r.jsx("option",{value:M.planId,children:M.planId},W))]})}),r.jsx(H,{children:(()=>{const M=h.find(B=>B.planId===T.planDefecto);T.planDefecto&&!M&&console.warn("Plan not found:",T.planDefecto),M&&console.log("Plan UoMs:",M);const W=M?[M.unidadBase,...M.detalles?M.detalles.map(B=>B.unidadMedida):[]]:[],Z=[...new Set(W)];return r.jsxs("select",{value:T.unidadMedidaDefecto||"",onChange:B=>E(T.id,"unidadMedidaDefecto",B.target.value),className:"w-full text-xs border-0 bg-transparent p-1 h-8 focus:ring-0",disabled:!T.planDefecto,title:T.planDefecto?"Unidad por defecto":"Seleccione un plan primero",children:[Z.length===0&&r.jsx("option",{value:"",children:"--"}),Z.map((B,U)=>r.jsx("option",{value:B,children:B},U))]})})()}),r.jsx(H,{children:r.jsx(ge,{value:T.prefijo,onChange:M=>E(T.id,"prefijo",M.target.value),placeholder:"PROF-",className:"border-0 bg-transparent p-1 h-8"})}),r.jsx(H,{children:r.jsx(ge,{value:T.siguienteNumero,onChange:M=>E(T.id,"siguienteNumero",M.target.value),placeholder:"00001",className:"border-0 bg-transparent p-1 h-8"})}),r.jsx(H,{children:r.jsx(ge,{type:"number",min:"1",max:"10",value:T.longitudMinima,onChange:M=>E(T.id,"longitudMinima",parseInt(M.target.value)),className:"border-0 bg-transparent p-1 h-8"})}),r.jsx(H,{children:r.jsxs("span",{className:"font-mono text-sm font-semibold text-gray-700",children:[T.prefijo,String(1).padStart(T.longitudMinima,"0")]})}),r.jsx(H,{className:"text-center",children:r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600",onClick:()=>O(T.id),children:r.jsx(rr,{className:"h-3 w-3"})})})]},T.id))})]}),r.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:" Importante"}),r.jsx("p",{className:"text-xs text-yellow-800",children:"Al crear un artculo, el sistema usar la secuencia del grupo de producto seleccionado. Asegrese de que cada grupo tenga una secuencia configurada."})]})]})]}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Configuracin Adicional"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"grid grid-cols-2 gap-6",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Categora por Defecto"}),r.jsxs("select",{value:c.categoriaDefecto||"",onChange:T=>D("categoriaDefecto",T.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",children:[r.jsx("option",{value:"",children:"Sin categora"}),r.jsx("option",{children:"Herramientas Manuales"}),r.jsx("option",{children:"Herramientas Elctricas"}),r.jsx("option",{children:"Plomera"}),r.jsx("option",{children:"Electricidad"}),r.jsx("option",{children:"Pintura"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Categora que se asignar por defecto a nuevos artculos"})]})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"requiereCodBarras",checked:c.requiereCodBarras,onChange:T=>D("requiereCodBarras",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"requiereCodBarras",className:"text-sm font-medium text-gray-700",children:"Requerir cdigo de barras al crear artculo"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"activarPorDefecto",checked:c.activarPorDefecto,onChange:T=>D("activarPorDefecto",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"activarPorDefecto",className:"text-sm font-medium text-gray-700",children:"Activar artculos por defecto al crearlos"})]}),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Ruta por Defecto para Imgenes de Productos"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ge,{value:c.rutaImagenesDefecto||"",onChange:T=>D("rutaImagenesDefecto",T.target.value),placeholder:"Ej: C:\\POS\\Imagenes\\Productos",className:"flex-1"}),r.jsxs(re,{variant:"outline",onClick:z,title:"Explorar carpetas",disabled:N,children:[r.jsx(Yt,{className:"h-4 w-4 mr-2 ".concat(N?"animate-spin":"")}),N?"Abriendo...":"Explorar"]})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Directorio en el servidor donde se almacenarn las fotos de los artculos."})]})]})]})]})};var Yu=e=>e.type==="checkbox",Qi=e=>e instanceof Date,ra=e=>e==null;const t5=e=>typeof e=="object";var Vr=e=>!ra(e)&&!Array.isArray(e)&&t5(e)&&!Qi(e),IB=e=>Vr(e)&&e.target?Yu(e.target)?e.target.checked:e.target.value:e,DB=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,OB=(e,t)=>e.has(DB(t)),MB=e=>{const t=e.constructor&&e.constructor.prototype;return Vr(t)&&t.hasOwnProperty("isPrototypeOf")},Rj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function sn(e){let t;const n=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Rj&&(e instanceof Blob||a))&&(n||Vr(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!MB(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=sn(e[s]));else return e;return t}var Vp=e=>/^\w*$/.test(e),Rr=e=>e===void 0,$j=e=>Array.isArray(e)?e.filter(Boolean):[],Fj=e=>$j(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ht=(e,t,n)=>{if(!t||!Vr(e))return n;const a=(Vp(t)?[t]:Fj(t)).reduce((s,o)=>ra(s)?s:s[o],e);return Rr(a)||a===e?Rr(e[t])?n:e[t]:a},Ps=e=>typeof e=="boolean",gr=(e,t,n)=>{let a=-1;const s=Vp(t)?[t]:Fj(t),o=s.length,l=o-1;for(;++a<o;){const c=s[a];let f=n;if(a!==l){const h=e[c];f=Vr(h)||Array.isArray(h)?h:isNaN(+s[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=f,e=e[c]}};const u2={BLUR:"blur",FOCUS_OUT:"focusout"},rs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ks={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},TB=Nt.createContext(null);TB.displayName="HookFormContext";var _B=(e,t,n,a=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const l=o;return t._proxyFormState[l]!==rs.all&&(t._proxyFormState[l]=!a||rs.all),e[l]}});return s};const RB=typeof window<"u"?Nt.useLayoutEffect:Nt.useEffect;var xa=e=>typeof e=="string",$B=(e,t,n,a,s)=>xa(e)?(a&&t.watch.add(e),ht(n,e,s)):Array.isArray(e)?e.map(o=>(a&&t.watch.add(o),ht(n,o))):(a&&(t.watchAll=!0),n),ib=e=>ra(e)||!t5(e);function Jo(e,t,n=new WeakSet){if(ib(e)||ib(t))return Object.is(e,t);if(Qi(e)&&Qi(t))return e.getTime()===t.getTime();const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of a){const l=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const c=t[o];if(Qi(l)&&Qi(c)||Vr(l)&&Vr(c)||Array.isArray(l)&&Array.isArray(c)?!Jo(l,c,n):!Object.is(l,c))return!1}}return!0}var FB=(e,t,n,a,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[a]:s||!0}}:{},cu=e=>Array.isArray(e)?e:[e],f2=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}};function r5(e,t){const n={};for(const a in e)if(e.hasOwnProperty(a)){const s=e[a],o=t[a];if(s&&Vr(s)&&o){const l=r5(s,o);Vr(l)&&(n[a]=l)}else e[a]&&(n[a]=o)}return n}var Vn=e=>Vr(e)&&!Object.keys(e).length,Lj=e=>e.type==="file",ns=e=>typeof e=="function",Em=e=>{if(!Rj)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},n5=e=>e.type==="select-multiple",zj=e=>e.type==="radio",LB=e=>zj(e)||Yu(e),U0=e=>Em(e)&&e.isConnected;function zB(e,t){const n=t.slice(0,-1).length;let a=0;for(;a<n;)e=Rr(e)?a++:e[t[a++]];return e}function BB(e){for(const t in e)if(e.hasOwnProperty(t)&&!Rr(e[t]))return!1;return!0}function Lr(e,t){const n=Array.isArray(t)?t:Vp(t)?[t]:Fj(t),a=n.length===1?e:zB(e,n),s=n.length-1,o=n[s];return a&&delete a[o],s!==0&&(Vr(a)&&Vn(a)||Array.isArray(a)&&BB(a))&&Lr(e,n.slice(0,-1)),e}var UB=e=>{for(const t in e)if(ns(e[t]))return!0;return!1};function a5(e){return Array.isArray(e)||Vr(e)&&!UB(e)}function lb(e,t={}){for(const n in e){const a=e[n];a5(a)?(t[n]=Array.isArray(a)?[]:{},lb(a,t[n])):Rr(a)||(t[n]=!0)}return t}function fc(e,t,n){n||(n=lb(t));for(const a in e){const s=e[a];if(a5(s))Rr(t)||ib(n[a])?n[a]=lb(s,Array.isArray(s)?[]:{}):fc(s,ra(t)?{}:t[a],n[a]);else{const o=t[a];n[a]=!Jo(s,o)}}return n}const h2={value:!1,isValid:!1},m2={value:!0,isValid:!0};var s5=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Rr(e[0].attributes.value)?Rr(e[0].value)||e[0].value===""?m2:{value:e[0].value,isValid:!0}:m2:h2}return h2},o5=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:a})=>Rr(e)?e:t?e===""?NaN:e&&+e:n&&xa(e)?new Date(e):a?a(e):e;const p2={isValid:!1,value:null};var i5=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,p2):p2;function g2(e){const t=e.ref;return Lj(t)?t.files:zj(t)?i5(e.refs).value:n5(t)?[...t.selectedOptions].map(({value:n})=>n):Yu(t)?s5(e.refs).value:o5(Rr(t.value)?e.ref.value:t.value,e)}var VB=(e,t,n,a)=>{const s={};for(const o of e){const l=ht(t,o);l&&gr(s,o,l._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:a}},Am=e=>e instanceof RegExp,Gd=e=>Rr(e)?e:Am(e)?e.source:Vr(e)?Am(e.value)?e.value.source:e.value:e,x2=e=>({isOnSubmit:!e||e===rs.onSubmit,isOnBlur:e===rs.onBlur,isOnChange:e===rs.onChange,isOnAll:e===rs.all,isOnTouch:e===rs.onTouched});const v2="AsyncFunction";var qB=e=>!!e&&!!e.validate&&!!(ns(e.validate)&&e.validate.constructor.name===v2||Vr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===v2)),GB=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),y2=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const du=(e,t,n,a)=>{for(const s of n||Object.keys(e)){const o=ht(e,s);if(o){const{_f:l,...c}=o;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!a)return!0;if(l.ref&&t(l.ref,l.name)&&!a)return!0;if(du(c,t))break}else if(Vr(c)&&du(c,t))break}}};function b2(e,t,n){const a=ht(e,n);if(a||Vp(n))return{error:a,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),l=ht(t,o),c=ht(e,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:"".concat(o,".root"),error:c.root};s.pop()}return{name:n}}var HB=(e,t,n,a)=>{n(e);const{name:s,...o}=e;return Vn(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(l=>t[l]===(!a||rs.all))},WB=(e,t,n)=>!e||!t||e===t||cu(e).some(a=>a&&(n?a===t:a.startsWith(t)||t.startsWith(a))),KB=(e,t,n,a,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?a.isOnBlur:s.isOnBlur)?!e:(n?a.isOnChange:s.isOnChange)?e:!0,YB=(e,t)=>!$j(ht(e,t)).length&&Lr(e,t),XB=(e,t,n)=>{const a=cu(ht(e,n));return gr(a,"root",t[n]),gr(e,n,a),e};function j2(e,t,n="validate"){if(xa(e)||Array.isArray(e)&&e.every(xa)||Ps(e)&&!e)return{type:n,message:xa(e)?e:"",ref:t}}var oc=e=>Vr(e)&&!Am(e)?e:{value:e,message:""},w2=async(e,t,n,a,s,o)=>{const{ref:l,refs:c,required:f,maxLength:h,minLength:u,min:m,max:p,pattern:v,validate:j,name:y,valueAsNumber:b,mount:N}=e._f,k=ht(n,y);if(!N||t.has(y))return{};const D=c?c[0]:l,E=T=>{s&&D.reportValidity&&(D.setCustomValidity(Ps(T)?"":T||""),D.reportValidity())},P={},C=zj(l),O=Yu(l),A=C||O,_=(b||Lj(l))&&Rr(l.value)&&Rr(k)||Em(l)&&l.value===""||k===""||Array.isArray(k)&&!k.length,z=FB.bind(null,y,a,P),G=(T,M,W,Z=Ks.maxLength,B=Ks.minLength)=>{const U=T?M:W;P[y]={type:T?Z:B,message:U,ref:l,...z(T?Z:B,U)}};if(o?!Array.isArray(k)||!k.length:f&&(!A&&(_||ra(k))||Ps(k)&&!k||O&&!s5(c).isValid||C&&!i5(c).isValid)){const{value:T,message:M}=xa(f)?{value:!!f,message:f}:oc(f);if(T&&(P[y]={type:Ks.required,message:M,ref:D,...z(Ks.required,M)},!a))return E(M),P}if(!_&&(!ra(m)||!ra(p))){let T,M;const W=oc(p),Z=oc(m);if(!ra(k)&&!isNaN(k)){const B=l.valueAsNumber||k&&+k;ra(W.value)||(T=B>W.value),ra(Z.value)||(M=B<Z.value)}else{const B=l.valueAsDate||new Date(k),U=V=>new Date(new Date().toDateString()+" "+V),$=l.type=="time",K=l.type=="week";xa(W.value)&&k&&(T=$?U(k)>U(W.value):K?k>W.value:B>new Date(W.value)),xa(Z.value)&&k&&(M=$?U(k)<U(Z.value):K?k<Z.value:B<new Date(Z.value))}if((T||M)&&(G(!!T,W.message,Z.message,Ks.max,Ks.min),!a))return E(P[y].message),P}if((h||u)&&!_&&(xa(k)||o&&Array.isArray(k))){const T=oc(h),M=oc(u),W=!ra(T.value)&&k.length>+T.value,Z=!ra(M.value)&&k.length<+M.value;if((W||Z)&&(G(W,T.message,M.message),!a))return E(P[y].message),P}if(v&&!_&&xa(k)){const{value:T,message:M}=oc(v);if(Am(T)&&!k.match(T)&&(P[y]={type:Ks.pattern,message:M,ref:l,...z(Ks.pattern,M)},!a))return E(M),P}if(j){if(ns(j)){const T=await j(k,n),M=j2(T,D);if(M&&(P[y]={...M,...z(Ks.validate,M.message)},!a))return E(M.message),P}else if(Vr(j)){let T={};for(const M in j){if(!Vn(T)&&!a)break;const W=j2(await j[M](k,n),D,M);W&&(T={...W,...z(M,W.message)},E(W.message),a&&(P[y]=T))}if(!Vn(T)&&(P[y]={ref:D,...T},!a))return P}}return E(!0),P};const JB={mode:rs.onSubmit,reValidateMode:rs.onChange,shouldFocusError:!0};function QB(e={}){let t={...JB,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:ns(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},s=Vr(t.defaultValues)||Vr(t.values)?sn(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:sn(s),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,h=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const p={array:f2(),state:f2()},v=t.criteriaMode===rs.all,j=J=>fe=>{clearTimeout(h),h=setTimeout(J,fe)},y=async J=>{if(!t.disabled&&(u.isValid||m.isValid||J)){const fe=t.resolver?Vn((await O()).errors):await _(a,!0);fe!==n.isValid&&p.state.next({isValid:fe})}},b=(J,fe)=>{!t.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((J||Array.from(c.mount)).forEach(pe=>{pe&&(fe?gr(n.validatingFields,pe,fe):Lr(n.validatingFields,pe))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Vn(n.validatingFields)}))},N=(J,fe=[],pe,Ie,Oe=!0,_e=!0)=>{if(Ie&&pe&&!t.disabled){if(l.action=!0,_e&&Array.isArray(ht(a,J))){const Re=pe(ht(a,J),Ie.argA,Ie.argB);Oe&&gr(a,J,Re)}if(_e&&Array.isArray(ht(n.errors,J))){const Re=pe(ht(n.errors,J),Ie.argA,Ie.argB);Oe&&gr(n.errors,J,Re),YB(n.errors,J)}if((u.touchedFields||m.touchedFields)&&_e&&Array.isArray(ht(n.touchedFields,J))){const Re=pe(ht(n.touchedFields,J),Ie.argA,Ie.argB);Oe&&gr(n.touchedFields,J,Re)}(u.dirtyFields||m.dirtyFields)&&(n.dirtyFields=fc(s,o)),p.state.next({name:J,isDirty:G(J,fe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else gr(o,J,fe)},k=(J,fe)=>{gr(n.errors,J,fe),p.state.next({errors:n.errors})},D=J=>{n.errors=J,p.state.next({errors:n.errors,isValid:!1})},E=(J,fe,pe,Ie)=>{const Oe=ht(a,J);if(Oe){const _e=ht(o,J,Rr(pe)?ht(s,J):pe);Rr(_e)||Ie&&Ie.defaultChecked||fe?gr(o,J,fe?_e:g2(Oe._f)):W(J,_e),l.mount&&!l.action&&y()}},P=(J,fe,pe,Ie,Oe)=>{let _e=!1,Re=!1;const ee={name:J};if(!t.disabled){if(!pe||Ie){(u.isDirty||m.isDirty)&&(Re=n.isDirty,n.isDirty=ee.isDirty=G(),_e=Re!==ee.isDirty);const ye=Jo(ht(s,J),fe);Re=!!ht(n.dirtyFields,J),ye?Lr(n.dirtyFields,J):gr(n.dirtyFields,J,!0),ee.dirtyFields=n.dirtyFields,_e=_e||(u.dirtyFields||m.dirtyFields)&&Re!==!ye}if(pe){const ye=ht(n.touchedFields,J);ye||(gr(n.touchedFields,J,pe),ee.touchedFields=n.touchedFields,_e=_e||(u.touchedFields||m.touchedFields)&&ye!==pe)}_e&&Oe&&p.state.next(ee)}return _e?ee:{}},C=(J,fe,pe,Ie)=>{const Oe=ht(n.errors,J),_e=(u.isValid||m.isValid)&&Ps(fe)&&n.isValid!==fe;if(t.delayError&&pe?(f=j(()=>k(J,pe)),f(t.delayError)):(clearTimeout(h),f=null,pe?gr(n.errors,J,pe):Lr(n.errors,J)),(pe?!Jo(Oe,pe):Oe)||!Vn(Ie)||_e){const Re={...Ie,..._e&&Ps(fe)?{isValid:fe}:{},errors:n.errors,name:J};n={...n,...Re},p.state.next(Re)}},O=async J=>{b(J,!0);const fe=await t.resolver(o,t.context,VB(J||c.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return b(J),fe},A=async J=>{const{errors:fe}=await O(J);if(J)for(const pe of J){const Ie=ht(fe,pe);Ie?gr(n.errors,pe,Ie):Lr(n.errors,pe)}else n.errors=fe;return fe},_=async(J,fe,pe={valid:!0})=>{for(const Ie in J){const Oe=J[Ie];if(Oe){const{_f:_e,...Re}=Oe;if(_e){const ee=c.array.has(_e.name),ye=Oe._f&&qB(Oe._f);ye&&u.validatingFields&&b([_e.name],!0);const Me=await w2(Oe,c.disabled,o,v,t.shouldUseNativeValidation&&!fe,ee);if(ye&&u.validatingFields&&b([_e.name]),Me[_e.name]&&(pe.valid=!1,fe))break;!fe&&(ht(Me,_e.name)?ee?XB(n.errors,Me,_e.name):gr(n.errors,_e.name,Me[_e.name]):Lr(n.errors,_e.name))}!Vn(Re)&&await _(Re,fe,pe)}}return pe.valid},z=()=>{for(const J of c.unMount){const fe=ht(a,J);fe&&(fe._f.refs?fe._f.refs.every(pe=>!U0(pe)):!U0(fe._f.ref))&&Pe(J)}c.unMount=new Set},G=(J,fe)=>!t.disabled&&(J&&fe&&gr(o,J,fe),!Jo(V(),s)),T=(J,fe,pe)=>$B(J,c,{...l.mount?o:Rr(fe)?s:xa(J)?{[J]:fe}:fe},pe,fe),M=J=>$j(ht(l.mount?o:s,J,t.shouldUnregister?ht(s,J,[]):[])),W=(J,fe,pe={})=>{const Ie=ht(a,J);let Oe=fe;if(Ie){const _e=Ie._f;_e&&(!_e.disabled&&gr(o,J,o5(fe,_e)),Oe=Em(_e.ref)&&ra(fe)?"":fe,n5(_e.ref)?[..._e.ref.options].forEach(Re=>Re.selected=Oe.includes(Re.value)):_e.refs?Yu(_e.ref)?_e.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(Oe)?Re.checked=!!Oe.find(ee=>ee===Re.value):Re.checked=Oe===Re.value||!!Oe)}):_e.refs.forEach(Re=>Re.checked=Re.value===Oe):Lj(_e.ref)?_e.ref.value="":(_e.ref.value=Oe,_e.ref.type||p.state.next({name:J,values:sn(o)})))}(pe.shouldDirty||pe.shouldTouch)&&P(J,Oe,pe.shouldTouch,pe.shouldDirty,!0),pe.shouldValidate&&K(J)},Z=(J,fe,pe)=>{for(const Ie in fe){if(!fe.hasOwnProperty(Ie))return;const Oe=fe[Ie],_e=J+"."+Ie,Re=ht(a,_e);(c.array.has(J)||Vr(Oe)||Re&&!Re._f)&&!Qi(Oe)?Z(_e,Oe,pe):W(_e,Oe,pe)}},B=(J,fe,pe={})=>{const Ie=ht(a,J),Oe=c.array.has(J),_e=sn(fe);gr(o,J,_e),Oe?(p.array.next({name:J,values:sn(o)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&pe.shouldDirty&&p.state.next({name:J,dirtyFields:fc(s,o),isDirty:G(J,_e)})):Ie&&!Ie._f&&!ra(_e)?Z(J,_e,pe):W(J,_e,pe),y2(J,c)&&p.state.next({...n,name:J}),p.state.next({name:l.mount?J:void 0,values:sn(o)})},U=async J=>{l.mount=!0;const fe=J.target;let pe=fe.name,Ie=!0;const Oe=ht(a,pe),_e=ye=>{Ie=Number.isNaN(ye)||Qi(ye)&&isNaN(ye.getTime())||Jo(ye,ht(o,pe,ye))},Re=x2(t.mode),ee=x2(t.reValidateMode);if(Oe){let ye,Me;const ne=fe.type?g2(Oe._f):IB(J),q=J.type===u2.BLUR||J.type===u2.FOCUS_OUT,Q=!GB(Oe._f)&&!t.resolver&&!ht(n.errors,pe)&&!Oe._f.deps||KB(q,ht(n.touchedFields,pe),n.isSubmitted,ee,Re),ve=y2(pe,c,q);gr(o,pe,ne),q?(!fe||!fe.readOnly)&&(Oe._f.onBlur&&Oe._f.onBlur(J),f&&f(0)):Oe._f.onChange&&Oe._f.onChange(J);const be=P(pe,ne,q),Le=!Vn(be)||ve;if(!q&&p.state.next({name:pe,type:J.type,values:sn(o)}),Q)return(u.isValid||m.isValid)&&(t.mode==="onBlur"?q&&y():q||y()),Le&&p.state.next({name:pe,...ve?{}:be});if(!q&&ve&&p.state.next({...n}),t.resolver){const{errors:Qe}=await O([pe]);if(_e(ne),Ie){const tt=b2(n.errors,a,pe),ct=b2(Qe,a,tt.name||pe);ye=ct.error,pe=ct.name,Me=Vn(Qe)}}else b([pe],!0),ye=(await w2(Oe,c.disabled,o,v,t.shouldUseNativeValidation))[pe],b([pe]),_e(ne),Ie&&(ye?Me=!1:(u.isValid||m.isValid)&&(Me=await _(a,!0)));Ie&&(Oe._f.deps&&(!Array.isArray(Oe._f.deps)||Oe._f.deps.length>0)&&K(Oe._f.deps),C(pe,Me,ye,be))}},$=(J,fe)=>{if(ht(n.errors,fe)&&J.focus)return J.focus(),1},K=async(J,fe={})=>{let pe,Ie;const Oe=cu(J);if(t.resolver){const _e=await A(Rr(J)?J:Oe);pe=Vn(_e),Ie=J?!Oe.some(Re=>ht(_e,Re)):pe}else J?(Ie=(await Promise.all(Oe.map(async _e=>{const Re=ht(a,_e);return await _(Re&&Re._f?{[_e]:Re}:Re)}))).every(Boolean),!(!Ie&&!n.isValid)&&y()):Ie=pe=await _(a);return p.state.next({...!xa(J)||(u.isValid||m.isValid)&&pe!==n.isValid?{}:{name:J},...t.resolver||!J?{isValid:pe}:{},errors:n.errors}),fe.shouldFocus&&!Ie&&du(a,$,J?Oe:c.mount),Ie},V=(J,fe)=>{let pe={...l.mount?o:s};return fe&&(pe=r5(fe.dirtyFields?n.dirtyFields:n.touchedFields,pe)),Rr(J)?pe:xa(J)?ht(pe,J):J.map(Ie=>ht(pe,Ie))},F=(J,fe)=>({invalid:!!ht((fe||n).errors,J),isDirty:!!ht((fe||n).dirtyFields,J),error:ht((fe||n).errors,J),isValidating:!!ht(n.validatingFields,J),isTouched:!!ht((fe||n).touchedFields,J)}),L=J=>{J&&cu(J).forEach(fe=>Lr(n.errors,fe)),p.state.next({errors:J?n.errors:{}})},X=(J,fe,pe)=>{const Ie=(ht(a,J,{_f:{}})._f||{}).ref,Oe=ht(n.errors,J)||{},{ref:_e,message:Re,type:ee,...ye}=Oe;gr(n.errors,J,{...ye,...fe,ref:Ie}),p.state.next({name:J,errors:n.errors,isValid:!1}),pe&&pe.shouldFocus&&Ie&&Ie.focus&&Ie.focus()},Y=(J,fe)=>ns(J)?p.state.subscribe({next:pe=>"values"in pe&&J(T(void 0,fe),pe)}):T(J,fe,!0),me=J=>p.state.subscribe({next:fe=>{WB(J.name,fe.name,J.exact)&&HB(fe,J.formState||u,Ue,J.reRenderRoot)&&J.callback({values:{...o},...n,...fe,defaultValues:s})}}).unsubscribe,xe=J=>(l.mount=!0,m={...m,...J.formState},me({...J,formState:m})),Pe=(J,fe={})=>{for(const pe of J?cu(J):c.mount)c.mount.delete(pe),c.array.delete(pe),fe.keepValue||(Lr(a,pe),Lr(o,pe)),!fe.keepError&&Lr(n.errors,pe),!fe.keepDirty&&Lr(n.dirtyFields,pe),!fe.keepTouched&&Lr(n.touchedFields,pe),!fe.keepIsValidating&&Lr(n.validatingFields,pe),!t.shouldUnregister&&!fe.keepDefaultValue&&Lr(s,pe);p.state.next({values:sn(o)}),p.state.next({...n,...fe.keepDirty?{isDirty:G()}:{}}),!fe.keepIsValid&&y()},Ge=({disabled:J,name:fe})=>{(Ps(J)&&l.mount||J||c.disabled.has(fe))&&(J?c.disabled.add(fe):c.disabled.delete(fe))},he=(J,fe={})=>{let pe=ht(a,J);const Ie=Ps(fe.disabled)||Ps(t.disabled);return gr(a,J,{...pe||{},_f:{...pe&&pe._f?pe._f:{ref:{name:J}},name:J,mount:!0,...fe}}),c.mount.add(J),pe?Ge({disabled:Ps(fe.disabled)?fe.disabled:t.disabled,name:J}):E(J,!0,fe.value),{...Ie?{disabled:fe.disabled||t.disabled}:{},...t.progressive?{required:!!fe.required,min:Gd(fe.min),max:Gd(fe.max),minLength:Gd(fe.minLength),maxLength:Gd(fe.maxLength),pattern:Gd(fe.pattern)}:{},name:J,onChange:U,onBlur:U,ref:Oe=>{if(Oe){he(J,fe),pe=ht(a,J);const _e=Rr(Oe.value)&&Oe.querySelectorAll&&Oe.querySelectorAll("input,select,textarea")[0]||Oe,Re=LB(_e),ee=pe._f.refs||[];if(Re?ee.find(ye=>ye===_e):_e===pe._f.ref)return;gr(a,J,{_f:{...pe._f,...Re?{refs:[...ee.filter(U0),_e,...Array.isArray(ht(s,J))?[{}]:[]],ref:{type:_e.type,name:J}}:{ref:_e}}}),E(J,!1,void 0,_e)}else pe=ht(a,J,{}),pe._f&&(pe._f.mount=!1),(t.shouldUnregister||fe.shouldUnregister)&&!(OB(c.array,J)&&l.action)&&c.unMount.add(J)}}},ie=()=>t.shouldFocusError&&du(a,$,c.mount),Ce=J=>{Ps(J)&&(p.state.next({disabled:J}),du(a,(fe,pe)=>{const Ie=ht(a,pe);Ie&&(fe.disabled=Ie._f.disabled||J,Array.isArray(Ie._f.refs)&&Ie._f.refs.forEach(Oe=>{Oe.disabled=Ie._f.disabled||J}))},0,!1))},se=(J,fe)=>async pe=>{let Ie;pe&&(pe.preventDefault&&pe.preventDefault(),pe.persist&&pe.persist());let Oe=sn(o);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:_e,values:Re}=await O();n.errors=_e,Oe=sn(Re)}else await _(a);if(c.disabled.size)for(const _e of c.disabled)Lr(Oe,_e);if(Lr(n.errors,"root"),Vn(n.errors)){p.state.next({errors:{}});try{await J(Oe,pe)}catch(_e){Ie=_e}}else fe&&await fe({...n.errors},pe),ie(),setTimeout(ie);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vn(n.errors)&&!Ie,submitCount:n.submitCount+1,errors:n.errors}),Ie)throw Ie},oe=(J,fe={})=>{ht(a,J)&&(Rr(fe.defaultValue)?B(J,sn(ht(s,J))):(B(J,fe.defaultValue),gr(s,J,sn(fe.defaultValue))),fe.keepTouched||Lr(n.touchedFields,J),fe.keepDirty||(Lr(n.dirtyFields,J),n.isDirty=fe.defaultValue?G(J,sn(ht(s,J))):G()),fe.keepError||(Lr(n.errors,J),u.isValid&&y()),p.state.next({...n}))},Fe=(J,fe={})=>{const pe=J?sn(J):s,Ie=sn(pe),Oe=Vn(J),_e=Oe?s:Ie;if(fe.keepDefaultValues||(s=pe),!fe.keepValues){if(fe.keepDirtyValues){const Re=new Set([...c.mount,...Object.keys(fc(s,o))]);for(const ee of Array.from(Re))ht(n.dirtyFields,ee)?gr(_e,ee,ht(o,ee)):B(ee,ht(_e,ee))}else{if(Rj&&Rr(J))for(const Re of c.mount){const ee=ht(a,Re);if(ee&&ee._f){const ye=Array.isArray(ee._f.refs)?ee._f.refs[0]:ee._f.ref;if(Em(ye)){const Me=ye.closest("form");if(Me){Me.reset();break}}}}if(fe.keepFieldsRef)for(const Re of c.mount)B(Re,ht(_e,Re));else a={}}o=t.shouldUnregister?fe.keepDefaultValues?sn(s):{}:sn(_e),p.array.next({values:{..._e}}),p.state.next({values:{..._e}})}c={mount:fe.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!fe.keepIsValid||!!fe.keepDirtyValues||!t.shouldUnregister&&!Vn(_e),l.watch=!!t.shouldUnregister,l.action=!1,fe.keepErrors||(n.errors={}),p.state.next({submitCount:fe.keepSubmitCount?n.submitCount:0,isDirty:Oe?!1:fe.keepDirty?n.isDirty:!!(fe.keepDefaultValues&&!Jo(J,s)),isSubmitted:fe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Oe?{}:fe.keepDirtyValues?fe.keepDefaultValues&&o?fc(s,o):n.dirtyFields:fe.keepDefaultValues&&J?fc(s,J):fe.keepDirty?n.dirtyFields:{},touchedFields:fe.keepTouched?n.touchedFields:{},errors:fe.keepErrors?n.errors:{},isSubmitSuccessful:fe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},ze=(J,fe)=>Fe(ns(J)?J(o):J,fe),De=(J,fe={})=>{const pe=ht(a,J),Ie=pe&&pe._f;if(Ie){const Oe=Ie.refs?Ie.refs[0]:Ie.ref;Oe.focus&&(Oe.focus(),fe.shouldSelect&&ns(Oe.select)&&Oe.select())}},Ue=J=>{n={...n,...J}},Ze={control:{register:he,unregister:Pe,getFieldState:F,handleSubmit:se,setError:X,_subscribe:me,_runSchema:O,_focusError:ie,_getWatch:T,_getDirty:G,_setValid:y,_setFieldArray:N,_setDisabledField:Ge,_setErrors:D,_getFieldArray:M,_reset:Fe,_resetDefaultValues:()=>ns(t.defaultValues)&&t.defaultValues().then(J=>{ze(J,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Ce,_subjects:p,_proxyFormState:u,get _fields(){return a},get _formValues(){return o},get _state(){return l},set _state(J){l=J},get _defaultValues(){return s},get _names(){return c},set _names(J){c=J},get _formState(){return n},get _options(){return t},set _options(J){t={...t,...J}}},subscribe:xe,trigger:K,register:he,handleSubmit:se,watch:Y,setValue:B,getValues:V,reset:ze,resetField:oe,clearErrors:L,unregister:Pe,setError:X,setFocus:De,getFieldState:F};return{...Ze,formControl:Ze}}function ZB(e={}){const t=Nt.useRef(void 0),n=Nt.useRef(void 0),[a,s]=Nt.useState({isDirty:!1,isValidating:!1,isLoading:ns(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ns(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!ns(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...c}=QB(e);t.current={...c,formState:a}}const o=t.current.control;return o._options=e,RB(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(c=>({...c,isReady:!0})),o._formState.isReady=!0,l},[o]),Nt.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),Nt.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),Nt.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),Nt.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),Nt.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==a.isDirty&&o._subjects.state.next({isDirty:l})}},[o,a.isDirty]),Nt.useEffect(()=>{var l;e.values&&!Jo(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((l=o._options.resetOptions)===null||l===void 0)&&l.keepIsValid||o._setValid(),n.current=e.values,s(c=>({...c}))):o._resetDefaultValues()},[o,e.values]),Nt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=_B(a,o),t.current}const Hd="http://localhost:5006/api",eU=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState([]),[f,h]=x.useState(null);x.useEffect(()=>{u()},[]),x.useEffect(()=>{s&&!s.esFuncional&&(m(s.id),h(null))},[s]);const u=async()=>{try{a(!0);const y=await fetch("".concat(Hd,"/Monedas"));if(y.ok){const b=await y.json();t(b),b.length>0&&!s&&o(b.find(N=>!N.esFuncional)||b[0])}}catch(y){console.error("Error loading monedas:",y)}finally{a(!1)}},m=async y=>{try{const b=await fetch("".concat(Hd,"/Monedas/").concat(y,"/historial"));b.ok&&c(await b.json())}catch(b){console.error(b)}},p=async y=>{const b={Id:(f==null?void 0:f.id)||0,MonedaId:s.id,Tasa:parseFloat(y.tasa),FechaInicio:y.fechaInicio,FechaFin:y.fechaFin||null};try{const N=f?"".concat(Hd,"/Monedas/tasas/").concat(f.id):"".concat(Hd,"/Monedas/tasas"),k=await fetch(N,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(k.ok)return alert(f?"Tasa actualizada":"Tasa guardada"),m(s.id),u(),h(null),!0;{const D=await k.text();return alert("Error al guardar tasa: "+D),!1}}catch(N){return console.error(N),alert("Error de red al guardar tasa"),!1}},v=async y=>{if(window.confirm("Est seguro de eliminar esta tasa?"))try{(await fetch("".concat(Hd,"/Monedas/tasas/").concat(y),{method:"DELETE"})).ok&&(alert("Tasa eliminada"),m(s.id),u())}catch(b){console.error(b)}},j=y=>{const b=new Date;b.setHours(0,0,0,0);const N=y.fechaFin?new Date(y.fechaFin):null;return N&&N<b?{label:"Histrico",color:"bg-gray-100 text-gray-600"}:{label:"Abierto",color:"bg-green-100 text-green-700"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Configuracin de Monedas y Tasas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Monedas Disponibles"})}),r.jsx("div",{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{children:"Cdigo"}),r.jsx(le,{children:"Nombre"}),r.jsx(le,{children:"Tasa Actual"}),r.jsx(le,{children:"Funcional"})]})}),r.jsx(Vt,{children:e.map(y=>r.jsxs(Te,{className:(s==null?void 0:s.id)===y.id?"bg-orange-50 cursor-pointer":"cursor-pointer",onClick:()=>o(y),children:[r.jsx(H,{className:"font-bold",children:y.codigo}),r.jsx(H,{children:y.nombre}),r.jsx(H,{children:y.esFuncional?"1.00":"Ver Historial"}),r.jsx(H,{children:y.esFuncional?"S":"No"})]},y.id))})]})})]}),r.jsxs(We,{children:[r.jsx(vt,{className:"flex flex-row justify-between items-center",children:r.jsxs(bt,{children:["Historial de Tasas: ",s==null?void 0:s.nombre," (",s==null?void 0:s.codigo,")"]})}),r.jsx("div",{className:"p-6",children:s!=null&&s.esFuncional?r.jsx("p",{className:"text-gray-500 italic",children:"La moneda funcional tiene una tasa fija de 1.00"}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded-md p-4 bg-gray-50",children:[r.jsx("h3",{className:"font-medium mb-2",children:f?"Modificar Tasa":"Registrar Nueva Tasa"}),r.jsx(tU,{onSubmit:p,initialData:f,onCancel:f?()=>h(null):null})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"font-bold mb-2",children:"Historial de Tasas"}),r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{children:"Tasa"}),r.jsx(le,{children:"Desde"}),r.jsx(le,{children:"Hasta"}),r.jsx(le,{children:"Estado"}),r.jsx(le,{className:"text-right",children:"Acciones"})]})}),r.jsxs(Vt,{children:[l.map(y=>{const b=j(y);return r.jsxs(Te,{children:[r.jsx(H,{className:"font-bold",children:y.tasa.toFixed(4)}),r.jsx(H,{children:new Date(y.fechaInicio).toLocaleDateString()}),r.jsx(H,{children:y.fechaFin?new Date(y.fechaFin).toLocaleDateString():"Vigente"}),r.jsx(H,{children:r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ".concat(b.color),children:b.label})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>h(y),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:r.jsx(sa,{size:14})}),r.jsx("button",{onClick:()=>v(y.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:r.jsx(rr,{size:14})})]})})]},y.id)}),l.length===0&&r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center text-gray-400",children:"No hay tasas registradas"})})]})]})]})]})})]})]})]})},tU=({onSubmit:e,initialData:t,onCancel:n})=>{const{register:a,handleSubmit:s,reset:o,setValue:l}=ZB();x.useEffect(()=>{t?(l("tasa",t.tasa),l("fechaInicio",new Date(t.fechaInicio).toISOString().split("T")[0]),l("fechaFin",t.fechaFin?new Date(t.fechaFin).toISOString().split("T")[0]:"")):o({tasa:"",fechaInicio:new Date().toISOString().split("T")[0],fechaFin:""})},[t,o,l]);const c=async f=>{await e(f)&&o()};return r.jsxs("form",{onSubmit:s(c),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ge,{label:"Tasa de Cambio",...a("tasa",{required:!0}),placeholder:"Ej: 58.50"}),r.jsx(ge,{label:"Fecha Inicio",type:"date",...a("fechaInicio",{required:!0})}),r.jsx(ge,{label:"Fecha Fin (Opcional)",type:"date",...a("fechaFin")})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(re,{type:"submit",size:"sm",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{size:16,className:"mr-2"})," ",t?"Actualizar":"Guardar"," Tasa"]}),n&&r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:n,children:"Cancelar"})]})]})},V0=({title:e,children:t,description:n})=>r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden mb-6",children:[r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),n&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n})]}),r.jsx("div",{className:"p-6",children:t})]}),rU=({label:e,description:t,checked:n,onChange:a,disabled:s,tooltip:o})=>r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border ".concat(n?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"," ").concat(s?"opacity-50":""),title:o||t,children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium ".concat(n?"text-blue-900":"text-gray-900"),children:e}),t&&r.jsx("p",{className:"text-xs ".concat(n?"text-blue-700":"text-gray-500"),children:t})]}),r.jsxs("div",{className:"relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in",children:[r.jsx("input",{type:"checkbox",checked:n,onChange:a,disabled:s,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer peer checked:right-0 right-6",style:{top:0,transition:"right 0.2s"}}),r.jsx("div",{className:"toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ".concat(n?"bg-hd-orange":"bg-gray-300")})]}),r.jsx("input",{type:"checkbox",checked:n,onChange:a,disabled:s,className:"h-6 w-6 text-hd-orange rounded border-gray-300 focus:ring-hd-orange ml-4"})]}),nU=()=>{const[e,t]=x.useState({useAutoSequence:!0,useInitials:!0,initials:"PROV",currentValue:1,sequenceLength:4,separator:"-",habilitarFacturas:!0,habilitarPagoRecurrente:!1,habilitarFrecuenciaSemanal:!1,habilitarFrecuenciaQuincenal:!1,habilitarFrecuenciaMensual:!0,habilitarFechasEspecificas:!1}),[n,a]=x.useState(!0),[s,o]=x.useState(null);x.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const u=await fetch("http://localhost:5006/api/ProveedorConfiguration");if(u.ok){const m=await u.json();t(m)}}catch(u){console.error(u)}finally{a(!1)}},c=(u,m)=>{t(p=>({...p,[u]:m}))},f=async()=>{try{(await fetch("http://localhost:5006/api/ProveedorConfiguration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(o({type:"success",text:"Configuracin guardada correctamente"}),setTimeout(()=>o(null),3e3)):o({type:"error",text:"Error al guardar la configuracin"})}catch(u){o({type:"error",text:"Error de conexin"})}},h=()=>{const u=String(e.currentValue).padStart(e.sequenceLength||0,"0");return e.useInitials&&e.initials?"".concat(e.initials).concat(e.separator).concat(u):u};return n?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando configuracin..."}):r.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuracin de Proveedores"}),r.jsx("p",{className:"text-gray-500",children:"Gestione reglas de negocio, secuencias y opciones de pago."})]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600 text-white",onClick:f,children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar Cambios"]})]}),s&&r.jsx("div",{className:"p-4 rounded-lg mb-4 ".concat(s.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s.text}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(V0,{title:"Opciones Generales",description:"Funcionalidades habilitadas para el mdulo.",children:r.jsx("div",{className:"space-y-4",children:r.jsx(rU,{label:"Gestin de Facturas",description:"Habilitar registro y seguimiento detallado de facturas de compra.",tooltip:"Active para Modo Fiscal: Exige NCF, Impuestos y RNC. Desactive para Modo Simple.",checked:e.habilitarFacturas,onChange:u=>c("habilitarFacturas",u.target.checked)})})}),r.jsx(V0,{title:"Secuencia de Cdigo",description:"Formato automtico para nuevos proveedores.",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("input",{type:"checkbox",checked:e.useAutoSequence,onChange:u=>c("useAutoSequence",u.target.checked),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Activar Secuencia Automtica"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 ".concat(e.useAutoSequence?"":"opacity-50 pointer-events-none"),children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Iniciales"}),r.jsx(ge,{value:e.initials,onChange:u=>c("initials",u.target.value),className:"uppercase"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Separador"}),r.jsx(ge,{value:e.separator,onChange:u=>c("separator",u.target.value),className:"text-center",maxLength:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud (# ceros)"}),r.jsx(ge,{type:"number",value:e.sequenceLength,onChange:u=>c("sequenceLength",parseInt(u.target.value)),min:1,max:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Siguiente Valor"}),r.jsx(ge,{type:"number",value:e.currentValue,onChange:u=>c("currentValue",parseInt(u.target.value))})]})]}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg text-center border border-gray-200",children:[r.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-widest block mb-1",children:"Vista Previa"}),r.jsx("span",{className:"text-xl font-mono font-bold text-gray-800 tracking-wider",children:h()})]})]})})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs(V0,{title:"Pagos Recurrentes",description:"Configuracin de automatizacin de pagos regulares.",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200 mb-6",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-orange-900",children:"Habilitar Pagos Recurrentes"}),r.jsx("p",{className:"text-xs text-orange-800",children:"Permitir configurar ciclos de pago automticos en la ficha del proveedor."})]}),r.jsxs("div",{className:"relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarPagoRecurrente,onChange:u=>c("habilitarPagoRecurrente",u.target.checked),className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer peer checked:right-0 right-6"}),r.jsx("div",{className:"block overflow-hidden h-6 rounded-full cursor-pointer ".concat(e.habilitarPagoRecurrente?"bg-hd-orange":"bg-gray-300")})]}),r.jsx("input",{type:"checkbox",checked:e.habilitarPagoRecurrente,onChange:u=>c("habilitarPagoRecurrente",u.target.checked),className:"h-6 w-6 text-hd-orange rounded border-gray-300 focus:ring-hd-orange ml-4"})]}),r.jsxs("div",{className:"space-y-4 transition-all duration-300 ".concat(e.habilitarPagoRecurrente?"":"opacity-40 pointer-events-none grayscale"),children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2 border-b pb-2",children:"Frecuencias Permitidas"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFrecuenciaSemanal,onChange:u=>c("habilitarFrecuenciaSemanal",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Semanal"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Pagos cada 7 das (ej. Todos los viernes)."})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFrecuenciaQuincenal,onChange:u=>c("habilitarFrecuenciaQuincenal",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Quincenal"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Pagos cada 15 das."})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFrecuenciaMensual,onChange:u=>c("habilitarFrecuenciaMensual",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Mensual"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Pagos una vez al mes (ej. da 15 o fin de mes)."})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFechasEspecificas,onChange:u=>c("habilitarFechasEspecificas",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Fechas Especficas"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Permitir seleccionar das puntuales (ej. das 5 y 20)."})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-md flex items-start mt-4",children:[r.jsx(wj,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Al habilitar estas opciones, aparecern los selectores correspondientes en la ficha de creacin y edicin de proveedores."})]})]})]})})]})]})},Th="http://localhost:5006/api",aU=()=>{const[e,t]=x.useState({nombreEmpresa:"",rnc:"",direccion:"",telefono:"",correo:"",sitioWeb:"",logoPath:"",impuestoDefault:18,monedaPrincipal:"DOP"}),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState(null),[f,h]=x.useState(null),u=y=>y==null?"":y;x.useEffect(()=>{m()},[]);const m=async()=>{a(!0);try{const y=await fetch("".concat(Th,"/CompanyConfiguration"));if(y.ok){const b=await y.json();t(b),b.logoPath&&h("".concat(Th.replace("/api","")).concat(b.logoPath))}}catch(y){console.error("Error loading Company config:",y)}finally{a(!1)}},p=y=>{const b=y.target.files[0];b&&(c(b),h(URL.createObjectURL(b)))},v=async y=>{y.preventDefault(),o(null);try{let b=e.logoPath;if(l){const k=new FormData;k.append("file",l);const D=await fetch("".concat(Th,"/CompanyConfiguration/upload-logo"),{method:"POST",body:k});D.ok&&(b=(await D.json()).path,t(P=>({...P,logoPath:b})))}(await fetch("".concat(Th,"/CompanyConfiguration"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,logoPath:b})})).ok?o({type:"success",text:"Informacin de empresa guardada."}):o({type:"error",text:"Error al guardar informacin."})}catch(b){console.error(b),o({type:"error",text:"Error de conexin."})}setTimeout(()=>o(null),3e3)},j=y=>{const{name:b,value:N}=y.target;t(k=>({...k,[b]:N}))};return n?r.jsx("div",{className:"p-8 text-center",children:"Cargando datos de empresa..."}):r.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Configuracin de Compaa"}),s&&r.jsxs("div",{className:"p-4 rounded-md flex items-center gap-2 ".concat(s.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:[s.type==="success"?r.jsx(Sc,{size:20}):r.jsx(Lc,{size:20}),s.text]}),r.jsxs("form",{onSubmit:v,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-1 flex flex-col items-center space-y-4",children:[r.jsxs("div",{className:"w-48 h-48 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300 relative group hover:border-hd-orange transition-colors",children:[f?r.jsx("img",{src:f,alt:"Logo Preview",className:"w-full h-full object-contain"}):r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx(K6,{size:48,className:"mx-auto mb-2"}),r.jsx("span",{className:"text-sm",children:"Sin Logo"})]}),r.jsxs("label",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[r.jsx(ZD,{size:24,className:"mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:"Cambiar Logo"}),r.jsx("input",{type:"file",onChange:p,accept:"image/*",className:"hidden"})]})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Formato: PNG, JPG (Max 2MB)"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre de la Empresa"}),r.jsx("input",{type:"text",name:"nombreEmpresa",value:u(e.nombreEmpresa),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"RNC / ID Fiscal"}),r.jsx("input",{type:"text",name:"rnc",value:u(e.rnc),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telfono"}),r.jsx("input",{type:"text",name:"telefono",value:u(e.telefono),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Direccin"}),r.jsx("textarea",{name:"direccion",value:u(e.direccion),onChange:j,rows:2,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correo Electrnico"}),r.jsx("input",{type:"email",name:"correo",value:u(e.correo),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sitio Web"}),r.jsx("input",{type:"text",name:"sitioWeb",value:u(e.sitioWeb),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t pt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Moneda Principal"}),r.jsxs("select",{name:"monedaPrincipal",value:u(e.monedaPrincipal),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange",children:[r.jsx("option",{value:"DOP",children:"Peso Dominicano (DOP)"}),r.jsx("option",{value:"USD",children:"Dlar Estadounidense (USD)"}),r.jsx("option",{value:"EUR",children:"Euro (EUR)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Impuesto Default (%)"}),r.jsx("input",{type:"number",step:"0.01",name:"impuestoDefault",value:u(e.impuestoDefault),onChange:j,className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange"})]})]})]})]}),r.jsx("div",{className:"pt-4 border-t flex justify-end",children:r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600 text-white flex items-center gap-2",children:[r.jsx(Kt,{size:18}),"Guardar Informacin"]})})]})]})},N2="http://localhost:5006/api",sU=()=>{const[e,t]=x.useState({useAutoSequence:!0,prefix:"PAGO-",sequenceLength:6,currentValue:0,separator:"-"}),[n,a]=x.useState(!0),[s,o]=x.useState(null),l=m=>m==null?"":m;x.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const m=await fetch("".concat(N2,"/PaymentConfiguration"));if(m.ok){const p=await m.json();t(p)}}catch(m){console.error("Error loading CXP config:",m)}finally{a(!1)}},f=async m=>{m.preventDefault();try{(await fetch("".concat(N2,"/PaymentConfiguration"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?o({type:"success",text:"Configuracin guardada exitosamente."}):o({type:"error",text:"Error al guardar configuracin."})}catch(p){o({type:"error",text:"Error de conexin."})}setTimeout(()=>o(null),3e3)},h=m=>{const{name:p,value:v,type:j,checked:y}=m.target;t(b=>({...b,[p]:j==="checkbox"?y:j==="number"?parseInt(v)||0:v}))},u=()=>{const m=(e.currentValue+1).toString().padStart(e.sequenceLength||6,"0");return"".concat(e.prefix).concat(m)};return n?r.jsx("div",{className:"p-8 text-center",children:"Cargando configuracin..."}):r.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Cuentas por Pagar / Secuencia de Pagos"}),s&&r.jsxs("div",{className:"p-4 rounded-md flex items-center gap-2 ".concat(s.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:[s.type==="success"?r.jsx(Sc,{size:20}):r.jsx(Lc,{size:20}),s.text]}),r.jsxs("form",{onSubmit:f,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4 border-b pb-2",children:"Secuencia de Pagos"}),r.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx("input",{type:"checkbox",id:"useAutoSequence",name:"useAutoSequence",checked:e.useAutoSequence,onChange:h,className:"rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"useAutoSequence",className:"text-sm font-medium text-gray-700 select-none cursor-pointer",children:"Generar cdigos de pago automticamente"})]}),e.useAutoSequence&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",name:"prefix",value:l(e.prefix),onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange sm:text-sm",placeholder:"Ej: PAGO-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud de Secuencia"}),r.jsx("input",{type:"number",name:"sequenceLength",value:e.sequenceLength,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange sm:text-sm",min:"3",max:"20"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Actual (ltimo usado)"}),r.jsx("input",{type:"number",name:"currentValue",value:e.currentValue,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange sm:text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Modificar solo si es necesario reiniciar la secuencia."})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 flex flex-col justify-center items-center",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium mb-2",children:"Vista Previa Prximo Cdigo"}),r.jsx("span",{className:"text-2xl font-mono font-bold text-gray-800 tracking-wider",children:u()})]})]})]}),r.jsx("div",{className:"pt-4 border-t flex justify-end",children:r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600 text-white flex items-center gap-2",children:[r.jsx(Kt,{size:18}),"Guardar Cambios"]})})]})]})},q0="http://localhost:5006/api",oU=()=>{const[e,t]=x.useState("resumen"),[n,a]=x.useState({desde:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],hasta:new Date().toISOString().split("T")[0],numero:"",proveedor:"",estado:""}),[s,o]=x.useState([]),[l,c]=x.useState(!1),[f,h]=x.useState(null),[u,m]=x.useState(null),[p,v]=x.useState(!1),[j,y]=x.useState(!1),b=[{id:"resumen",title:"Resumen",icon:r.jsx(is,{size:18})},{id:"proveedor",title:"Por Proveedor",icon:r.jsx(zr,{size:18})},{id:"articulo",title:"Por Artculo",icon:r.jsx(Rn,{size:18})},{id:"antiguedad",title:"Antigedad (Aging)",icon:r.jsx(mm,{size:18})},{id:"almacen",title:"Por Almacn",icon:r.jsx(Rn,{size:18})},{id:"pendientes",title:"Facturas Pendientes",icon:r.jsx(Pr,{size:18})},{id:"historico",title:"Histrico Facturas",icon:r.jsx(Yt,{size:18})}];x.useEffect(()=>{N()},[e]);const N=async()=>{c(!0);let A="";const _="?desde=".concat(n.desde,"&hasta=").concat(n.hasta),z=new URLSearchParams;switch(Object.entries(n).forEach(([G,T])=>{T!=null&&T!==""&&z.append(G,T)}),e){case"resumen":A="/ReportesCompras/Resumen"+_;break;case"proveedor":A="/ReportesCompras/PorProveedor"+_;break;case"articulo":A="/ReportesCompras/PorArticulo"+_;break;case"antiguedad":A="/ReportesCompras/AntiguedadSaldos";break;case"almacen":A="/ReportesCompras/PorAlmacen"+_;break;case"pendientes":A="/ReportesCompras/FacturasPendientes";break;case"historico":A="/ReportesCompras/BuscarFacturas?"+z.toString();break;default:A="/ReportesCompras/Resumen"+_}try{const G=await fetch("".concat(q0).concat(A));if(G.ok){const T=await G.json();o(T)}}catch(G){console.error("Error fetching report data:",G)}finally{c(!1)}},k=async A=>{v(!0),h(A),y(!0);try{const _=await fetch("".concat(q0,"/ReportesCompras/Factura/").concat(A));if(!_.ok){const M=await _.text();throw new Error("Failed to fetch invoice details: ".concat(_.status," ").concat(M))}const z=await _.json(),G=await fetch("".concat(q0,"/ReportesCompras/PagosPorFactura/").concat(A));if(!G.ok){const M=await G.text();throw new Error("Failed to fetch payments: ".concat(G.status," ").concat(M))}const T=await G.json();m({...z,pagos:T})}catch(_){console.error("Error fetching invoice detail:",_),m(null)}finally{v(!1)}},D=A=>{const{name:_,value:z}=A.target;a(G=>({...G,[_]:z}))},E=()=>{if(!s||s.length===0)return;const A=Object.keys(s[0]),_=[A.join(","),...s.map(M=>A.map(W=>{let Z=M[W];return typeof Z=="string"?'"'.concat(Z.replace(/"/g,'""'),'"'):Z}).join(","))].join("\n"),z=new Blob(["\uFEFF"+_],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),T=URL.createObjectURL(z);G.setAttribute("href",T),G.setAttribute("download","Reporte_".concat(e,"_").concat(new Date().toISOString().split("T")[0],".csv")),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G)},P=(A,_="RD$")=>{if(_==="USD"||_==="DOP")return new Intl.NumberFormat("es-DO",{style:"currency",currency:_}).format(A||0);const z=_||"RD$";return"".concat(z," ").concat(new Intl.NumberFormat("es-DO",{minimumFractionDigits:2}).format(A||0))},C=A=>A?new Date(A).toLocaleDateString("es-DO"):"-",O=()=>{if(l)return r.jsx("div",{className:"py-20 text-center text-gray-400",children:"Generando reporte..."});if(s.length===0)return r.jsx("div",{className:"py-20 text-center text-gray-400",children:"No hay datos para este periodo."});switch(e){case"resumen":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Moneda"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Compras"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"SubTotal"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Impuesto"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total DOP"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase text-blue-600",children:"Total USD"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((A,_)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:A.moneda||A.Moneda}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:A.cantidadCompras||A.CantidadCompras}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A.subTotal||A.SubTotal,A.monedaSimbolo||A.moneda||A.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-hd-orange",children:P(A.impuesto||A.Impuesto||A.Impuestos,A.monedaSimbolo||A.moneda||A.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold",children:P(A.total||A.Total,A.monedaSimbolo||A.moneda||A.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-hd-orange",children:P(A.totalDOP||A.TotalDOP,"RD$")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-blue-600",children:P(A.totalUSD||A.TotalUSD,"USD")})]},_))})]});case"proveedor":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Facturas"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total DOP"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total USD"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((A,_)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:A.proveedor||A.Proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:A.facturas||A.Facturas}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-hd-orange font-bold",children:P(A.totalDOP||A.TotalDOP,"DOP")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-blue-600 font-bold",children:P(A.totalUSD||A.TotalUSD,"USD")})]},_))})]});case"historico":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nmero"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Moneda"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Saldo"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((A,_)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900 font-medium",children:A.numeroCompra||A.NumeroCompra}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(A.fechaCompra||A.FechaCompra)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.proveedor||A.Proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.moneda||A.Moneda}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:P(A.total||A.Total,A.monedaSimbolo||A.moneda||A.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-red-600 font-bold",children:P(A.saldo||A.Saldo,A.monedaSimbolo||A.moneda||A.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-left",children:r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold ".concat(A.estado==="Pagado"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:(A.estado||"Pendiente").toUpperCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("button",{onClick:()=>k(A.numeroCompra||A.NumeroCompra),className:"text-hd-orange hover:text-orange-700 transition-colors",title:"Ver Detalle",children:r.jsx(ir,{size:20})})})]},_))})]});case"articulo":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Artculo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Cant."}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Costo Prom."}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((A,_)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500 text-sm font-mono",children:A.numeroArticulo||A.NumeroArticulo}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:A.articulo||A.Articulo||A.descripcion||A.Descripcion}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-medium",children:A.cantidadComprada||A.CantidadComprada}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A.costoPromedio||A.CostoPromedio)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A.totalSinImpuestos||A.TotalSinImpuestos)})]},_))})]});case"antiguedad":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"0-30 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"31-60 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"61-90 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"+90 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase font-bold",children:"Total"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((A,_)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:A.proveedor||A.Proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A["0_30_Dias"]||A["0_30_dias"])}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A["31_60_Dias"]||A["31_60_dias"])}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A["61_90_Dias"]||A["61_90_dias"])}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-red-600",children:P(A.Mas_90_Dias||A.mas_90_dias)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-hd-orange",children:P(A.saldoTotal||A.SaldoTotal)})]},_))})]});case"pendientes":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Referencia"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Moneda"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Saldo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Das"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((A,_)=>r.jsxs("tr",{className:A.diasVencimiento>30?"bg-red-50":"",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:A.numeroCompra}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(A.fechaCompra)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:A.proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-xs text-gray-400",children:A.moneda}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:P(A.total,A.monedaSimbolo)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-red-600",children:P(A.saldo,A.monedaSimbolo)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsxs("span",{className:"px-2 py-1 rounded-full text-[10px] font-bold ".concat(A.diasVencimiento>30?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:[A.diasVencimiento," das"]})})]},_))})]});case"almacen":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Almacn"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Operaciones"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total Valor (RD$)"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200 uppercase text-[11px]",children:s.map((A,_)=>r.jsxs("tr",{className:"hover:bg-orange-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-bold text-gray-800 border-l-2 border-hd-orange",children:A.almacen}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-medium",children:A.cantidadCompras}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-black text-hd-orange",children:P(A.totalDOP,"RD$")})]},_))})]})}};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(is,{className:"text-hd-orange"}),"Reportes de Compras"]}),r.jsxs(re,{onClick:E,disabled:s.length===0||l,className:"bg-green-600 hover:bg-green-700 text-white flex items-center gap-2",children:[r.jsx(bj,{size:18}),"Exportar a Excel (CSV)"]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"flex border-b overflow-x-auto",children:b.map(A=>r.jsxs("button",{onClick:()=>t(A.id),className:"px-6 py-3 flex items-center gap-2 text-sm font-medium transition-colors whitespace-nowrap ".concat(e===A.id?"border-b-2 border-hd-orange text-hd-orange bg-orange-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[A.icon,A.title]},A.id))}),(e==="resumen"||e==="proveedor"||e==="articulo"||e==="historico")&&r.jsxs("div",{className:"p-4 bg-gray-50 border-b flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Desde"}),r.jsx("input",{type:"date",name:"desde",value:n.desde,onChange:D,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Hasta"}),r.jsx("input",{type:"date",name:"hasta",value:n.hasta,onChange:D,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange"})]}),e==="historico"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Nmero"}),r.jsx("input",{type:"text",name:"numero",placeholder:"Buscar nmero...",onChange:D,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Estado"}),r.jsxs("select",{name:"estado",onChange:D,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"Pendiente",children:"Pendiente"}),r.jsx("option",{value:"Pagado",children:"Pagado"})]})]})]}),r.jsxs(re,{onClick:N,className:"bg-hd-orange hover:bg-orange-600 text-white flex items-center gap-2",children:[r.jsx(Yt,{size:16}),"Actualizar"]})]}),r.jsx("div",{className:"overflow-x-auto",children:O()})]}),j&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Detalle de Factura: ",f]}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx("span",{className:"text-2xl",children:""})})]}),r.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:p?r.jsx("div",{className:"py-10 text-center text-gray-400 font-medium",children:"Buscando detalles..."}):u?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 bg-orange-50 p-4 rounded-lg border border-orange-100 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Proveedor:"})," ",r.jsx("span",{className:"font-bold",children:u.header.proveedor})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Fecha:"})," ",r.jsx("span",{className:"font-bold",children:C(u.header.fechaCompra)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Almacn:"})," ",r.jsx("span",{className:"font-bold text-blue-600",children:u.header.almacenNombre||"No definido"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Total:"})," ",r.jsx("span",{className:"font-bold",children:P(u.header.total,u.header.monedaSimbolo)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Saldo Actual:"})," ",r.jsx("span",{className:"font-black text-red-600",children:P(u.header.saldo,u.header.monedaSimbolo)})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-bold text-gray-700 mb-2 border-l-4 border-hd-orange pl-2 uppercase tracking-wide",children:"Artculos"}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Articulo"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Cant."}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Almacn"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Costo"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Subtotal"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.items.map((A,_)=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2",children:[r.jsx("span",{className:"text-gray-400 font-mono text-xs mr-2",children:A.numeroArticulo}),A.descripcion]}),r.jsx("td",{className:"px-4 py-2 text-right font-medium",children:A.cantidad}),r.jsx("td",{className:"px-4 py-2 text-left text-[10px] text-gray-500 font-medium italic",children:A.almacenLinea||u.header.almacenNombre}),r.jsx("td",{className:"px-4 py-2 text-right",children:P(A.costoUnitario,u.header.monedaSimbolo)}),r.jsx("td",{className:"px-4 py-2 text-right font-bold",children:P(A.totalLinea,u.header.monedaSimbolo)})]},_))})]})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-bold text-gray-700 mb-2 border-l-4 border-yellow-500 pl-2 uppercase tracking-wide",children:"Notas de Crdito / Dbito"}),u.notas&&u.notas.length>0?r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[r.jsx("thead",{className:"bg-yellow-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Fecha"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Tipo"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Ref."}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Monto Aplicado"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.notas.map((A,_)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2",children:C(A.fecha)}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold ".concat(A.tipo==="Credito"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"),children:A.tipo.toUpperCase()})}),r.jsx("td",{className:"px-4 py-2 text-xs text-gray-500",children:A.referencia}),r.jsxs("td",{className:"px-4 py-2 text-right font-bold ".concat(A.tipo==="Credito"?"text-blue-600":"text-red-600"),children:[A.tipo==="Credito"?"-":"+",P(A.monto,u.header.monedaSimbolo)]})]},_))})]})}):r.jsx("p",{className:"text-sm text-gray-500 italic p-4 bg-gray-50 rounded-lg",children:"No hay notas aplicadas a esta factura."})]})]}):r.jsx("div",{className:"py-10 text-center text-red-500 font-medium",children:"No se pudo cargar la informacin."})}),r.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:r.jsx(re,{onClick:()=>y(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800",children:"Cerrar"})})]})})]})},l5="http://localhost:5006/api/Sequences",c5=async()=>{try{const e=await fetch(l5);if(!e.ok)throw new Error("Error fetching sequences: ".concat(e.statusText));return await e.json()}catch(e){throw console.error("Error fetching sequences:",e),e}},d5=async(e,t)=>{try{const n=await fetch("".concat(l5,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){if(n.status===204)return null;throw new Error("Error updating sequence: ".concat(n.statusText))}const a=await n.text();return a?JSON.parse(a):null}catch(n){throw console.error("Error updating sequence ".concat(e,":"),n),n}},iU=()=>{const[e,t]=x.useState(null),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(!0),[f,h]=x.useState(!1),[u,m]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const N=(await c5()).find(E=>E.code==="TRANSFER")||{id:0,code:"TRANSFER",name:"Transferencia de Inventario",prefix:"TR-",currentValue:0,length:6};t(N);const[k,D]=await Promise.all([vo(),yO()]);o(k||[]),a(D||{defaultPlanId:"",defaultUnit:""}),m(null)}catch(b){console.error(b),m("Error al cargar la secuencia. Verifique la conexin.")}finally{c(!1)}},v=(b,N)=>{t(k=>({...k,[b]:N}))},j=(b,N)=>{a(k=>({...k,[b]:N}))},y=async()=>{if(!e||!e.id){alert("No hay una secuencia vlida para guardar (ID 0). Asegrese de que el backend la haya inicializado.");return}try{h(!0),h(!0),await Promise.all([d5(e.id,e),QL(n)]),alert("Configuracin guardada correctamente.")}catch(b){console.error(b),alert("Error al guardar cambios.")}finally{h(!1)}};return l?r.jsx("div",{className:"p-8 text-center",children:r.jsx(Fn,{className:"animate-spin mx-auto text-hd-orange"})}):u?r.jsx("div",{className:"p-8 text-red-600 font-bold text-center",children:u}):r.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg text-gray-600",children:r.jsx(di,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Confg. Transferencias"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Secuencia de documentos"})]})]}),r.jsxs(re,{onClick:y,disabled:f,className:"bg-hd-orange hover:bg-orange-600",children:[f?r.jsx(Fn,{className:"animate-spin mr-2 h-4 w-4"}):r.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Guardar"]})]}),r.jsxs(We,{className:"border-l-4 border-l-hd-orange",children:[r.jsx(vt,{className:"bg-gray-50/50",children:r.jsxs(bt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(na,{size:18}),"Secuencia de Transferencias"]})}),r.jsx(Mt,{className:"pt-6 space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Prefijo"}),r.jsx(ge,{value:e.prefix||"",onChange:b=>v("prefix",b.target.value),className:"font-mono uppercase",placeholder:"TR-"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Longitud Numrica"}),r.jsx(ge,{type:"number",value:e.length,onChange:b=>v("length",parseInt(b.target.value)),className:"font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"ltimo Nmero Usado"}),r.jsx(ge,{type:"number",value:e.currentValue,onChange:b=>v("currentValue",parseInt(b.target.value)),className:"font-mono text-right font-bold"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Siguiente Nmero"}),r.jsxs("div",{className:"p-2 bg-gray-100 rounded border border-gray-200 text-right font-mono text-gray-700",children:[e.prefix,String(e.currentValue+1).padStart(e.length,"0")]})]})]})})]}),r.jsxs(We,{className:"border-l-4 border-l-blue-500",children:[r.jsx(vt,{className:"bg-gray-50/50",children:r.jsxs(bt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(ja,{size:18}),"Plan de Medida por Defecto"]})}),r.jsxs(Mt,{className:"pt-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Plan de Medida"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:(n==null?void 0:n.defaultPlanId)||"",onChange:b=>j("defaultPlanId",b.target.value),children:[r.jsx("option",{value:"",children:"(Ninguno / Usar del Artculo)"}),s.map(b=>r.jsx("option",{value:b.planId,children:b.descripcion||b.planId},b.planId))]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Este plan se asignar automticamente a las nuevas lneas en la Transferencia si es compatible."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Unidad por Defecto"}),r.jsx(ge,{className:"bg-white",placeholder:"Ej. CAJA, UND...",value:(n==null?void 0:n.defaultUnit)||"",onChange:b=>j("defaultUnit",b.target.value)}),r.jsx("p",{className:"text-sm text-gray-500",children:"Si el artculo o su plan tienen esta unidad, se seleccionar automticamente."})]})]})]})]})},u5="http://localhost:5006/api/AjusteConfiguration",f5=async()=>{try{const e=await fetch(u5);if(!e.ok)throw new Error("Error fetching ajuste config: ".concat(e.statusText));return await e.json()}catch(e){throw console.error("Error fetching ajuste config:",e),e}},h5=async e=>{try{const t=await fetch(u5,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error updating ajuste config: ".concat(t.statusText));return await t.json()}catch(t){throw console.error("Error updating ajuste config:",t),t}},lU=Object.freeze(Object.defineProperty({__proto__:null,getAjusteConfig:f5,updateAjusteConfig:h5},Symbol.toStringTag,{value:"Module"})),cU=()=>{const[e,t]=x.useState(null),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(!0),[f,h]=x.useState(!1),[u,m]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const N=(await c5()).find(E=>(E.code||E.Code||"").toUpperCase()==="AJUSTE")||{id:0,code:"AJUSTE",name:"Ajuste de Inventario",prefix:"AJ-",currentValue:0,length:6};t(N);const[k,D]=await Promise.all([vo(),f5()]);o(k||[]),a(D||{defaultPlanId:"",defaultUnit:""}),m(null)}catch(b){console.error(b),m("Error al cargar la secuencia o configuracin. Verifique la conexin.")}finally{c(!1)}},v=(b,N)=>{t(k=>({...k,[b]:N}))},j=(b,N)=>{a(k=>({...k,[b]:N}))},y=async()=>{if(e)try{if(h(!0),e.id>0)await Promise.all([d5(e.id,e),h5(n)]);else{alert("Secuencia no inicializada en base de datos. Guarde un ajuste primero o contacte soporte.");return}alert("Configuracin guardada correctamente.")}catch(b){console.error(b),alert("Error al guardar cambios.")}finally{h(!1)}};return l?r.jsx("div",{className:"p-8 text-center",children:r.jsx(Fn,{className:"animate-spin mx-auto text-hd-orange"})}):u?r.jsx("div",{className:"p-8 text-red-600 font-bold text-center",children:u}):r.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg text-gray-600",children:r.jsx(di,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Conf. Ajustes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Secuencia y preferencias"})]})]}),r.jsxs(re,{onClick:y,disabled:f,className:"bg-hd-orange hover:bg-orange-600",children:[f?r.jsx(Fn,{className:"animate-spin mr-2 h-4 w-4"}):r.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Guardar"]})]}),r.jsxs(We,{className:"border-l-4 border-l-hd-orange",children:[r.jsx(vt,{className:"bg-gray-50/50",children:r.jsxs(bt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(na,{size:18}),"Secuencia de Ajustes"]})}),r.jsx(Mt,{className:"pt-6 space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Prefijo"}),r.jsx(ge,{value:e.prefix||"",onChange:b=>v("prefix",b.target.value),className:"font-mono uppercase",placeholder:"AJ-"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Longitud Numrica"}),r.jsx(ge,{type:"number",value:e.length,onChange:b=>v("length",parseInt(b.target.value)),className:"font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"ltimo Nmero Usado"}),r.jsx(ge,{type:"number",value:e.currentValue,onChange:b=>v("currentValue",parseInt(b.target.value)),className:"font-mono text-right font-bold"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Siguiente Nmero"}),r.jsxs("div",{className:"p-2 bg-gray-100 rounded border border-gray-200 text-right font-mono text-gray-700",children:[e.prefix,String(e.currentValue+1).padStart(e.length,"0")]})]})]})})]}),r.jsxs(We,{className:"border-l-4 border-l-blue-500",children:[r.jsx(vt,{className:"bg-gray-50/50",children:r.jsxs(bt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(ja,{size:18}),"Plan de Medida por Defecto"]})}),r.jsxs(Mt,{className:"pt-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Plan de Medida"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:(n==null?void 0:n.defaultPlanId)||"",onChange:b=>j("defaultPlanId",b.target.value),children:[r.jsx("option",{value:"",children:"(Ninguno / Usar del Artculo)"}),s.map(b=>r.jsx("option",{value:b.planId,children:b.descripcion||b.planId},b.planId))]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Este plan se asignar a las nuevas lneas en el Ajuste si es compatible con la unidad base del artculo o si se fuerza su uso."})]}),r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Unidad por Defecto"}),r.jsx(ge,{className:"bg-white",placeholder:"Ej. CAJA, UND...",value:(n==null?void 0:n.defaultUnit)||"",onChange:b=>j("defaultUnit",b.target.value)}),r.jsx("p",{className:"text-sm text-gray-500",children:"Si el artculo o su plan tienen esta unidad, se seleccionar automticamente."})]})]})]})]})},dU=()=>{const e=$t(),[t,n]=x.useState(null),[a,s]=x.useState(null),[o,l]=x.useState(""),[c,f]=x.useState([]),[h,u]=x.useState(!1),[m,p]=x.useState({id:0,planId:"",descripcion:"",unidadBase:"UND",decimales:0,detalles:[]}),[v,j]=x.useState(!0);x.useEffect(()=>{n(document.getElementById("header-actions")),s(document.getElementById("header-message")),y()},[]);const y=async()=>{u(!0);try{const A=await vo();f(A)}catch(A){console.error(A)}finally{u(!1)}},b=async A=>{u(!0);try{const _=await DL(A);p({..._,detalles:_.detalles||[]}),j(!1)}catch(_){console.error(_)}finally{u(!1)}},N=()=>{p({id:0,planId:"",descripcion:"",unidadBase:"UND",decimales:0,detalles:[]}),j(!0)},k=(A,_)=>{p(z=>({...z,[A]:_}))},D=(A,_,z)=>{p(G=>{const T=[...G.detalles];return T[A]={...T[A],[_]:z},{...G,detalles:T}})},E=()=>{p(A=>({...A,detalles:[...A.detalles,{id:0,unidadMedida:"",cantidad:1,equivalente:A.unidadBase,orden:A.detalles.length+1}]}))},P=A=>{p(_=>{const z=_.detalles.filter((G,T)=>T!==A);return{..._,detalles:z}})},C=async()=>{if(!m.planId){alert("El ID del plan es obligatorio");return}try{const A={...m,detalles:m.detalles.map((_,z)=>({..._,planId:m.planId,equivalente:m.unidadBase,orden:z+1}))};await OL(A),l("Plan guardado correctamente"),setTimeout(()=>l(""),3e3),y(),v&&j(!1)}catch(A){console.error(A),alert("Error al guardar el plan")}},O=async()=>{if(confirm("Est seguro de eliminar este plan de unidades de medida?"))try{await ML(m.planId),l("Plan eliminado"),setTimeout(()=>l(""),3e3),y(),N()}catch(A){console.error(A),alert("Error al eliminar el plan")}};return x.useEffect(()=>{p(A=>({...A,detalles:A.detalles.map(_=>({..._,equivalente:A.unidadBase}))}))},[m.unidadBase]),r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t&&oo.createPortal(r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),className:"mr-2",children:r.jsx("span",{className:"text-gray-600",children:"Cancelar"})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:C,children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Guardar"]}),!v&&r.jsxs(re,{variant:"ghost",onClick:O,className:"text-red-600 hover:bg-red-50",children:[r.jsx(rr,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]}),t),a&&o&&oo.createPortal(r.jsx("div",{className:"text-green-600 text-sm font-medium",children:o}),a),r.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[r.jsx("div",{className:"col-span-12 md:col-span-4 h-full",children:r.jsxs(We,{className:"h-full flex flex-col",children:[r.jsx(vt,{className:"py-4 px-4 border-b",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(bt,{className:"text-md",children:"Planes Existentes"}),r.jsxs(re,{size:"sm",variant:"outline",onClick:N,children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Nuevo"]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 max-h-[600px]",children:h?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Cargando..."}):c.map(A=>r.jsxs("div",{onClick:()=>b(A.planId),className:"p-3 rounded-md cursor-pointer border transition-colors ".concat(m.planId===A.planId?"bg-orange-50 border-orange-200 text-hd-orange":"bg-white border-transparent hover:bg-gray-50 hover:border-gray-200"),children:[r.jsx("div",{className:"font-semibold",children:A.planId}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:A.descripcion})]},A.planId))})]})}),r.jsx("div",{className:"col-span-12 md:col-span-8",children:r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:v?"Nuevo Plan de U de M":"Editando: ".concat(m.planId)})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg border",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Id. de plan de U de M"}),r.jsx(ge,{value:m.planId,onChange:A=>k("planId",A.target.value),disabled:!v,placeholder:"EJ: CAJAS",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Descripcin"}),r.jsx(ge,{value:m.descripcion,onChange:A=>k("descripcion",A.target.value),placeholder:"Descripcin del plan",className:"mt-1"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"U de M Base"}),r.jsx(ge,{value:m.unidadBase,onChange:A=>k("unidadBase",A.target.value),placeholder:"UND",className:"mt-1 bg-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Posiciones decimales"}),r.jsx("select",{value:m.decimales,onChange:A=>k("decimales",parseInt(A.target.value)),className:"mt-1 flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:[0,1,2,3,4,5].map(A=>r.jsx("option",{value:A,children:A},A))})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-semibold",children:"Conversiones"}),r.jsxs(re,{size:"sm",variant:"outline",onClick:E,children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Agregar Unidad"]})]}),r.jsx("div",{className:"border rounded-md overflow-hidden",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-100",children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-1/3",children:"U de M"}),r.jsx(le,{className:"w-1/3",children:"Cantidad"}),r.jsx(le,{className:"w-1/4",children:"Equivalente"}),r.jsx(le,{className:"w-10"})]})}),r.jsxs(Vt,{children:[r.jsxs(Te,{className:"bg-gray-50/50",children:[r.jsx(H,{className:"font-bold",children:m.unidadBase}),r.jsx(H,{className:"font-mono",children:"1.00000"}),r.jsx(H,{className:"text-gray-500",children:m.unidadBase}),r.jsx(H,{})]}),m.detalles.map((A,_)=>r.jsxs(Te,{children:[r.jsx(H,{children:r.jsx(ge,{value:A.unidadMedida,onChange:z=>D(_,"unidadMedida",z.target.value),placeholder:"Ej: CAJA",className:"h-8"})}),r.jsx(H,{children:r.jsx(ge,{type:"number",value:A.cantidad,onChange:z=>D(_,"cantidad",parseFloat(z.target.value)),className:"h-8 font-mono",step:"0.00001"})}),r.jsx(H,{className:"text-gray-500 text-sm",children:A.equivalente}),r.jsx(H,{children:r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-red-500",onClick:()=>P(_),children:r.jsx(rr,{className:"h-3 w-3"})})})]},_)),m.detalles.length===0&&r.jsx(Te,{children:r.jsx(H,{colSpan:4,className:"text-center text-gray-400 py-8",children:"No hay conversiones adicionales definidas"})})]})]})})]})]})]})})]})]})},uU=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState(""),v=async()=>{s(!0);try{const k=await qa();n(k)}catch(k){console.error(k)}finally{s(!1)}};x.useEffect(()=>{v()},[]);const j=t.filter(k=>(k.nombre||k.Nombre||"").toLowerCase().includes(o.toLowerCase())||(k.codigo||k.Codigo||"").toLowerCase().includes(o.toLowerCase())),y=(k=null)=>{u(k),f(!0),p("")},b=async k=>{await nO(k),await v(),f(!1)},N=async k=>{if(window.confirm("Est seguro de eliminar este almacn?"))try{await kL(k),v()}catch(D){console.error(D),alert("Error al eliminar")}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Almacenes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de ubicaciones de inventario"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{variant:"outline",onClick:v,title:"Recargar",children:r.jsx(no,{className:"h-4 w-4 ".concat(a?"animate-spin":"")})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:()=>y(),children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Almacn"]})]})]}),r.jsx(We,{children:r.jsx("div",{className:"p-4",children:r.jsx(ge,{placeholder:"Buscar por cdigo o nombre...",value:o,onChange:k=>l(k.target.value)})})}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsxs(bt,{children:["Almacenes Registrados (",j.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-32",children:"Cdigo"}),r.jsx(le,{children:"Nombre"}),r.jsx(le,{children:"Direccin"}),r.jsx(le,{className:"w-40",children:"Ciudad"}),r.jsx(le,{className:"w-24 text-center",children:"Estado"}),r.jsx(le,{className:"w-32 text-center",children:"Acciones"})]})}),r.jsx(Vt,{children:a?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:"Cargando..."})}):j.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No hay registros"})}):j.map(k=>{const D=k.id||k.Id,E=k.codigo||k.Codigo,P=k.nombre||k.Nombre,C=k.direccion||k.Direccion,O=k.ciudad||k.Ciudad,A=k.activo!==void 0?k.activo:k.Activo;return r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:E}),r.jsx(H,{className:"font-semibold",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(J6,{className:"h-4 w-4 text-gray-400"}),P]})}),r.jsx(H,{className:"text-gray-600",children:C}),r.jsx(H,{children:O}),r.jsx(H,{className:"text-center",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(A?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:A?"Activo":"Inactivo"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>y(k),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>N(D),className:"hover:bg-red-100 hover:text-red-600",children:r.jsx(rr,{className:"h-4 w-4"})})]})})]},D)})})]})})]}),r.jsx(fO,{isOpen:c,onClose:()=>f(!1),onSave:b,initialData:h,error:m})]})},fU=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState(""),v=async()=>{s(!0);try{const k=await Zy();n(k)}catch(k){console.error(k)}finally{s(!1)}};x.useEffect(()=>{v()},[]);const j=t.filter(k=>k.nombre.toLowerCase().includes(o.toLowerCase())||k.codigo.toLowerCase().includes(o.toLowerCase())),y=(k=null)=>{u(k),f(!0),p("")},b=async k=>{await dO(k),await v(),f(!1)},N=async k=>{if(window.confirm("Est seguro de eliminar este grupo?"))try{await $L(k),v()}catch(D){console.error(D),alert("Error al eliminar")}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grupos de Impuestos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de tasas impositivas para productos"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{variant:"outline",onClick:v,title:"Recargar",children:r.jsx(no,{className:"h-4 w-4 ".concat(a?"animate-spin":"")})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:()=>y(),children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Grupo"]})]})]}),r.jsx(We,{children:r.jsx("div",{className:"p-4",children:r.jsx(ge,{placeholder:"Buscar por cdigo o nombre...",value:o,onChange:k=>l(k.target.value)})})}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsxs(bt,{children:["Grupos Registrados (",j.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-32",children:"Cdigo"}),r.jsx(le,{children:"Nombre"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{className:"w-32 text-right",children:"Tasa (%)"}),r.jsx(le,{className:"w-24 text-center",children:"Estado"}),r.jsx(le,{className:"w-32 text-center",children:"Acciones"})]})}),r.jsx(Vt,{children:a?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:"Cargando..."})}):j.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No hay registros"})}):j.map(k=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:k.codigo}),r.jsx(H,{className:"font-semibold",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rL,{className:"h-4 w-4 text-gray-400"}),k.nombre]})}),r.jsx(H,{className:"text-gray-600",children:k.descripcion}),r.jsx(H,{className:"text-right",children:r.jsxs("span",{className:"inline-flex px-2 py-1 text-sm font-semibold rounded bg-purple-100 text-purple-800",children:[k.tasa.toFixed(2),"%"]})}),r.jsx(H,{className:"text-center",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(k.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:k.activo?"Activo":"Inactivo"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>y(k),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>N(k.id),className:"hover:bg-red-100 hover:text-red-600",children:r.jsx(rr,{className:"h-4 w-4"})})]})})]},k.id))})]})})]}),r.jsx(hO,{isOpen:c,onClose:()=>f(!1),onSave:b,initialData:h,error:m})]})},hU=()=>{$t();const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(""),[l,c]=x.useState(!1),[f,h]=x.useState(null);x.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const b=await Cm();t(b)}catch(b){console.error("Error loading product groups:",b)}finally{a(!1)}},m=async b=>{try{await uO(b),c(!1),u()}catch(N){console.error("Error saving group:",N),alert("Error al guardar el grupo")}},p=async b=>{if(window.confirm("Est seguro de que desea eliminar este grupo?"))try{await FL(b),u()}catch(N){console.error("Error deleting group:",N),alert("Error al eliminar el grupo")}},v=b=>{h(b),c(!0)},j=()=>{h(null),c(!0)},y=e.filter(b=>b.nombre.toLowerCase().includes(s.toLowerCase())||b.codigo.toLowerCase().includes(s.toLowerCase()));return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-hd-orange/10 rounded-lg",children:r.jsx(Rn,{className:"h-6 w-6 text-hd-orange"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grupos de Producto"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Categorizacin y agrupacin tcnica de artculos."})]})]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-700 text-white shadow-lg",onClick:j,children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Grupo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(We,{className:"bg-orange-50 border-orange-100",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-xs font-semibold text-hd-orange uppercase",children:"Total Grupos"}),r.jsx("p",{className:"text-3xl font-bold text-hd-black",children:e.length})]})}),r.jsx(We,{className:"bg-green-50 border-green-100",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase",children:"Activos"}),r.jsx("p",{className:"text-3xl font-bold text-green-700",children:e.filter(b=>b.activo).length})]})})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between pb-4",children:[r.jsx(bt,{children:"Catlogo de Grupos"}),r.jsxs("div",{className:"relative w-64 text-sm",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar grupo...",className:"pl-9 h-9",value:s,onChange:b=>o(b.target.value)})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{className:"bg-gray-50/50",children:[r.jsx(le,{className:"w-32 font-bold",children:"Cdigo"}),r.jsx(le,{className:"font-bold",children:"Nombre"}),r.jsx(le,{className:"font-bold",children:"Descripcin"}),r.jsx(le,{className:"w-24 text-center font-bold",children:"Estado"}),r.jsx(le,{className:"w-32 text-center font-bold",children:"Acciones"})]})}),r.jsx(Vt,{children:n?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8",children:"Cargando grupos..."})}):y.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8 text-gray-500 font-medium",children:"No se encontraron grupos registrados."})}):y.map(b=>r.jsxs(Te,{className:"hover:bg-gray-50 transition-colors group",children:[r.jsx(H,{className:"font-mono text-hd-orange font-bold text-sm tracking-widest",children:b.codigo}),r.jsx(H,{className:"font-bold text-hd-black",children:b.nombre}),r.jsx(H,{className:"text-gray-500 text-sm italic",children:b.descripcion||"Sin descripcin"}),r.jsx(H,{className:"text-center",children:r.jsx("span",{className:"inline-flex px-2.5 py-0.5 text-[10px] font-bold uppercase rounded-full tracking-wider ".concat(b.activo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:b.activo?"Activo":"Inactivo"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-50",onClick:()=>v(b),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:bg-red-50",onClick:()=>p(b.id),children:r.jsx(rr,{className:"h-4 w-4"})})]})})]},b.id))})]})})]}),r.jsx(mO,{isOpen:l,onClose:()=>c(!1),onSave:m,grupo:f})]})},mU=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState({grupo:"",codigo:"",motivo:"",activo:!0}),[v,j]=x.useState(""),y=async()=>{s(!0);try{const C=await Ij();n(C)}catch(C){console.error(C)}finally{s(!1)}};x.useEffect(()=>{y()},[]);const b=t.reduce((C,O)=>{const A=O.grupo||"Sin Grupo";return C[A]||(C[A]=[]),C[A].push(O),C},{}),N=Object.entries(b).reduce((C,[O,A])=>{const _=A.filter(z=>z.motivo.toLowerCase().includes(o.toLowerCase())||z.codigo.toLowerCase().includes(o.toLowerCase()));return _.length>0&&(C[O]=_),C},{}),k=(C=null)=>{j(""),C?(u(C),p({...C})):(u(null),p({grupo:"Conteo Fsico",codigo:"",motivo:"",activo:!0})),f(!0)},D=async C=>{C.preventDefault(),j("");try{await GL(m),await y(),f(!1)}catch(O){j(O.message)}},E=async C=>{if(window.confirm("Est seguro de eliminar este motivo? Esta accin no se puede deshacer si ya ha sido utilizado."))try{await HL(C),y()}catch(O){console.error(O),alert("Error al eliminar")}},P=["Conteo Fsico","Dao / Merma","Prdida / Robo","Errores Operativos","Produccin / Proceso","Conversin de Unidades","Reclasificacin Interna","Obsolescencia","Ajuste Inicial / Migracin"];return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Motivos de Ajuste"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Catlogo de razones para movimientos de inventario"})]})]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:()=>k(),children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Motivo"]})]}),r.jsx(We,{className:"mb-6",children:r.jsx("div",{className:"p-4",children:r.jsx(ge,{placeholder:"Buscar por cdigo o descripcin...",value:o,onChange:C=>l(C.target.value)})})}),r.jsxs("div",{className:"space-y-6",children:[Object.keys(N).length===0&&!a&&r.jsx("div",{className:"text-center py-10 text-gray-500",children:"No se encontraron resultados"}),Object.entries(N).map(([C,O])=>r.jsxs(We,{className:"overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center gap-2",children:[r.jsx(q6,{className:"h-4 w-4 text-gray-500"}),r.jsx("h3",{className:"font-semibold text-gray-700",children:C}),r.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:O.length})]}),r.jsx("div",{className:"divide-y divide-gray-100",children:O.map(A=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-orange-50 text-orange-700 font-mono text-sm px-3 py-1 rounded border border-orange-100 min-w-[80px] text-center",children:A.codigo}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:A.motivo}),!A.activo&&r.jsx("span",{className:"text-xs text-red-500 font-medium",children:"Inactivo"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>k(A),children:r.jsx(wl,{className:"h-4 w-4 text-gray-500 hover:text-blue-600"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>E(A.id),children:r.jsx(rr,{className:"h-4 w-4 text-gray-500 hover:text-red-600"})})]})]},A.id))})]},C))]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-800",children:h?"Editar Motivo":"Nuevo Motivo"}),r.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tt,{size:20})})]}),r.jsxs("form",{onSubmit:D,className:"p-6 space-y-4",children:[v&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm flex items-center gap-2",children:[r.jsx(gu,{size:16}),v]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grupo"}),r.jsx("select",{className:"w-full h-10 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",value:m.grupo,onChange:C=>p({...m,grupo:C.target.value}),children:P.map(C=>r.jsx("option",{value:C,children:C},C))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsxs("div",{className:"relative",children:[r.jsx(ge,{value:m.codigo,onChange:C=>p({...m,codigo:C.target.value}),disabled:!!h,placeholder:"Ej. CF-01",maxLength:10,className:h?"bg-gray-100 pr-8":""}),h&&r.jsx(gm,{className:"absolute right-2.5 top-2.5 h-4 w-4 text-gray-400"})]}),h&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El cdigo no se puede modificar."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo / Descripcin"}),r.jsx(ge,{value:m.motivo,onChange:C=>p({...m,motivo:C.target.value}),placeholder:"Descripcin del motivo",required:!0})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:m.activo,onChange:C=>p({...m,activo:C.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[r.jsx(re,{type:"button",variant:"ghost",onClick:()=>f(!1),children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]})]})})]})},G0=({title:e,icon:t,data:n,loading:a,onAdd:s,onEdit:o,onDelete:l})=>{const[c,f]=x.useState(""),h=n.filter(u=>u.nombre.toLowerCase().includes(c.toLowerCase())||u.codigo.toLowerCase().includes(c.toLowerCase()));return r.jsxs(We,{className:"mb-8",children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-hd-orange/10 rounded-lg",children:r.jsx(t,{className:"h-5 w-5 text-hd-orange"})}),r.jsxs("div",{children:[r.jsx(bt,{children:e}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Gestin de ",e.toLowerCase()]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Yt,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ge,{value:c,onChange:u=>f(u.target.value),placeholder:"Buscar...",className:"pl-8 w-64 h-9"})]}),r.jsxs(re,{size:"sm",className:"bg-hd-orange hover:bg-orange-600",onClick:s,children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"}),"Nuevo"]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{className:"w-32",children:"Cdigo"}),r.jsx(le,{children:"Nombre"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{className:"w-24 text-center",children:"Estado"}),r.jsx(le,{className:"w-24 text-center",children:"Acciones"})]})}),r.jsx(Vt,{children:a?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8",children:"Cargando..."})}):h.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No hay registros"})}):h.map(u=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:u.codigo}),r.jsx(H,{className:"font-semibold",children:u.nombre}),r.jsx(H,{className:"text-gray-600",children:u.descripcion}),r.jsx(H,{className:"text-center",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(u.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:u.activo?"Activo":"Inactivo"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>o(u),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>l(u.id),className:"hover:bg-red-100 hover:text-red-600",children:r.jsx(rr,{className:"h-4 w-4"})})]})})]},u.id))})]})})]})},pU=()=>{const e=$t(),[t,n]=x.useState(!1),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(!1),[m,p]=x.useState({title:"",type:""}),[v,j]=x.useState(null),[y,b]=x.useState(""),N={categoria:iO,marca:lO,tipo:cO},k={categoria:TL,marca:_L,tipo:RL},D=async()=>{n(!0);try{const[O,A,_]=await Promise.all([wm(),Jy(),Qy()]);s(O),l(A),f(_)}catch(O){console.error(O)}finally{n(!1)}};x.useEffect(()=>{D()},[]);const E=(O,A=null)=>{p({title:{categoria:"Categora",marca:"Marca",tipo:"Tipo"}[O],type:O}),j(A),u(!0),b("")},P=async O=>{await N[m.type](O),await D(),u(!1)},C=async(O,A)=>{if(window.confirm("Est seguro de eliminar este registro?"))try{await k[O](A),D()}catch(_){console.error(_),alert("Error al eliminar")}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Atributos de Artculos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin centralizada de Categoras, Marcas y Tipos"})]})]}),r.jsx(re,{variant:"outline",onClick:D,title:"Recargar Todo",children:r.jsx(no,{className:"h-4 w-4 ".concat(t?"animate-spin":"")})})]}),r.jsx(G0,{title:"Categoras",icon:ja,data:a,loading:t,onAdd:()=>E("categoria"),onEdit:O=>E("categoria",O),onDelete:O=>C("categoria",O)}),r.jsx(G0,{title:"Marcas",icon:Nl,data:o,loading:t,onAdd:()=>E("marca"),onEdit:O=>E("marca",O),onDelete:O=>C("marca",O)}),r.jsx(G0,{title:"Tipos",icon:L6,data:c,loading:t,onAdd:()=>E("tipo"),onEdit:O=>E("tipo",O),onDelete:O=>C("tipo",O)}),r.jsx(am,{isOpen:h,onClose:()=>u(!1),onSave:P,title:m.title,type:m.type,initialData:v,error:y})]})},qp="http://localhost:5006/api",gU=async e=>{const t=await fetch("".concat(qp,"/Articulos/").concat(e,"/Precios"));if(!t.ok)throw new Error("Error al obtener precios");return t.json()},xU=async(e,t)=>{const n=await fetch("".concat(qp,"/Articulos/").concat(e,"/Precios"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al guardar precios");return n.json()},vU=async(e,t)=>{const n=await fetch("".concat(qp,"/Articulos/CopyPrecios"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceArticuloId:e,targetArticuloId:t})});if(!n.ok){const a=await n.text();throw new Error("Error al copiar precios: ".concat(a))}return n.json()},yU=async()=>{const e=await fetch("".concat(qp,"/Articulos/ReportePrecios"));if(!e.ok)throw new Error("Error al obtener reporte de precios");return e.json()},bU=()=>{const e=$t(),[t,n]=x.useState(null),[a,s]=x.useState(!1),[o,l]=x.useState(!1),[c,f]=x.useState(!1),[h,u]=x.useState(""),[m,p]=x.useState("all"),[v,j]=x.useState([]),[y,b]=x.useState(!1),[N,k]=x.useState(2),[D,E]=x.useState(["UND"]),[P,C]=x.useState([]),[O,A]=x.useState([]),[_,z]=x.useState(-1),[G,T]=x.useState(!1);x.useEffect(()=>{W(),Z(),M()},[]);const M=async()=>{try{const ie=await wL();A(ie||[])}catch(ie){console.error(ie)}},W=async()=>{try{const ie=await vo(),Ce=new Set(["UND"]);ie.forEach(se=>{Ce.add(se.unidadBase),se.detalles&&se.detalles.forEach(oe=>Ce.add(oe.unidadMedida))}),E(Array.from(Ce))}catch(ie){console.error(ie)}},Z=async()=>{try{const ie=await Cc();C(ie)}catch(ie){console.error(ie)}},B=async ie=>{try{const Ce=await Cj({nombre:ie.nombre,descripcion:ie.descripcion});await Z(),alert("Nivel de precio creado exitosamente.")}catch(Ce){console.error(Ce),alert("Error al crear nivel de precio")}};x.useEffect(()=>{t!=null&&t.id&&U(t.id)},[t]);const U=async ie=>{b(!0);try{const Ce=await gU(ie);Ce&&Ce.length>0?j(Ce):j([])}catch(Ce){console.error("Error loading prices:",Ce),alert("Error al cargar lista de precios")}finally{b(!1)}},$=ie=>[{id:1,nivelPrecio:"Precio al Detalle",unidadMedida:(ie==null?void 0:ie.unidadMedida)||"UND",cantidadInicial:0,porcentaje:0,precio:(ie==null?void 0:ie.precioUnitario)||0,moneda:"USD",activo:!0},{id:2,nivelPrecio:"Precio al Mayoreo",unidadMedida:(ie==null?void 0:ie.unidadMedida)||"UND",cantidadInicial:10,porcentaje:0,precio:0,moneda:"USD",activo:!0},{id:3,nivelPrecio:"Precio Distribuidor",unidadMedida:(ie==null?void 0:ie.unidadMedida)||"UND",cantidadInicial:50,porcentaje:0,precio:0,moneda:"USD",activo:!0}],K=async()=>{if(t)try{const ie=v.map(se=>({...se,id:0}));await xU(t.id,ie);const Ce=document.getElementById("header-message");Ce&&(Ce.innerHTML='<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded flex items-center gap-2">Precios guardados correctamente</div>',setTimeout(()=>Ce.innerHTML="",3e3))}catch(ie){console.error(ie),alert("Error al guardar precios")}},V=async ie=>{if(!(!t||!ie))try{await vU(t.id,ie.id),l(!1);const Ce=document.getElementById("header-message");Ce&&(Ce.innerHTML='<div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-2 rounded flex items-center gap-2">Precios copiados exitosamente a '.concat(ie.descripcion,"</div>"),setTimeout(()=>Ce.innerHTML="",4e3))}catch(Ce){console.error(Ce),alert("Error al copiar precios")}};x.useEffect(()=>{if(t&&O.length>0){const ie=O.findIndex(Ce=>Ce.id===t.id||Ce.Id===t.id);z(ie)}},[t,O]);const F=ie=>{if(ie<0||ie>=O.length)return;const Ce=O[ie];L(Ce.id||Ce.Id)},L=async ie=>{try{const Ce=await tO(ie);Ce&&n(Ce)}catch(Ce){console.error("Nav Error",Ce)}},X=()=>{const ie={id:Date.now(),nivelPrecio:"",unidadMedida:(t==null?void 0:t.unidadMedida)||"UND",cantidadInicial:0,porcentaje:0,precio:0,moneda:"USD",activo:!0};j([...v,ie])},Y=ie=>{const Ce=[...v];Ce.splice(ie,1),j(Ce)},me=(ie,Ce,se)=>{const oe=[...v];oe[ie]={...oe[ie],[Ce]:se};const Fe=oe[ie],ze=parseFloat(t.costoUnitario)||parseFloat(t.costoEstandar)||0,De=parseFloat(Fe.cantidadInicial)||1;if((Ce==="porcentaje"||Ce==="cantidadInicial")&&t){const Ue=parseFloat(Fe.porcentaje)||0,Xe=ze*De*(1+Ue/100);oe[ie].precio=parseFloat(Xe.toFixed(2))}if(Ce==="precio"&&t){const Ue=parseFloat(se)||0,Xe=ze*De;if(Xe>0){const Ze=(Ue/Xe-1)*100;oe[ie].porcentaje=parseFloat(Ze.toFixed(2))}else Ue>0&&(oe[ie].porcentaje=100)}j(oe)},xe=()=>{if(!h||isNaN(parseFloat(h))){alert("Por favor ingrese un margen vlido.");return}if(!t)return;const ie=parseFloat(t.costoUnitario)||parseFloat(t.costoEstandar)||0,Ce=parseFloat(h),se=v.map(oe=>{if(m!=="all"&&oe.nivelPrecio!==m)return oe;const Fe=parseFloat(oe.cantidadInicial)||1,ze=ie*Fe*(1+Ce/100);return{...oe,porcentaje:Ce,precio:parseFloat(ze.toFixed(2))}});j(se),f(!1),u("")},Pe=(ie,Ce)=>{const se=[...v];Ce==="up"&&ie>0?[se[ie],se[ie-1]]=[se[ie-1],se[ie]]:Ce==="down"&&ie<se.length-1&&([se[ie],se[ie+1]]=[se[ie+1],se[ie]]),j(se)},Ge=async()=>{var ie,Ce;try{const se=await yU(),oe={};se.forEach(De=>{const Ue=De.numeroArticulo;oe[Ue]||(oe[Ue]={info:De,precios:[]}),De.nivelPrecio&&oe[Ue].precios.push(De)});let Fe="\n    < html >\n                <head>\n                    <title>Reporte de Listas de Precios</title>\n                    <style>\n                        body { font-family: sans-serif; padding: 20px; font-size: 12px; }\n                        h1 { text-align: center; color: #333; margin-bottom: 20px; }\n                        .article-card { border: 1px solid #ccc; margin-bottom: 15px; page-break-inside: avoid; border-radius: 4px; overflow: hidden; }\n                        .article-header { background: #f0f0f0; padding: 8px; font-weight: bold; display: flex; justify-content: space-between; border-bottom: 1px solid #ccc; }\n                        .article-details { padding: 8px; font-size: 11px; color: #555; background: #fafafa; border-bottom: 1px solid #eee; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }\n                        table { width: 100%; border-collapse: collapse; font-size: 11px; }\n                        th, td { padding: 6px; text-align: left; border-bottom: 1px solid #eee; }\n                        th { background: #fff; border-bottom: 2px solid #ddd; font-weight: 600; }\n                        .price-row:nth-child(even) { background-color: #f9f9f9; }\n                        @media print {\n                            body { -webkit-print-color-adjust: exact; }\n                            .article-header { background: #e0e0e0 !important; }\n                        }\n                    </style>\n                </head>\n                <body>\n                    <h1>Listado General de Precios</h1>\n            ";for(const De in oe){const Ue=oe[De];Fe+='\n                    <div class="article-card">\n                        <div class="article-header">\n                            <span>'.concat(Ue.info.numeroArticulo," - ").concat(Ue.info.descripcion,"</span>\n                            <span>UND: ").concat(Ue.info.unidadMedida,'</span>\n                        </div>\n                        <div class="article-details">\n                            <div><strong>Costo Estndar:</strong> ').concat((ie=Ue.info.costoEstandar)==null?void 0:ie.toFixed(2),"</div>\n                            <div><strong>Costo ltimo:</strong> ").concat((Ce=Ue.info.costoUnitario)==null?void 0:Ce.toFixed(2),"</div>\n                        </div>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>Nivel de Precio</th>\n                                    <th>Unidad</th>\n                                    <th>Precio</th>\n                                    <th>Moneda</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                "),Ue.precios.length>0?Ue.precios.forEach(Xe=>{var Ze;Fe+='\n                            <tr class="price-row">\n                                <td>'.concat(Xe.nivelPrecio,"</td>\n                                <td>").concat(Xe.unidadPrecio,"</td>\n                                <td><strong>").concat((Ze=Xe.precio)==null?void 0:Ze.toFixed(2),"</strong></td>\n                                <td>").concat(Xe.moneda,"</td>\n                            </tr>\n                        ")}):Fe+='<tr><td colspan="4" style="text-align:center; color: #999; font-style: italic;">Sin precios configurados</td></tr>',Fe+="</tbody></table></div>"}Fe+="</body></html > ";const ze=window.open("","_blank");ze.document.write(Fe),ze.document.close(),ze.print()}catch(se){console.error(se),alert("Error al generar el reporte")}},he=()=>{if(t)try{let ie="\n                <html>\n                <head>\n                    <title>Reporte de Artculo - ".concat(t.descripcion,"</title>\n                    <style>\n                        body { font-family: sans-serif; padding: 20px; font-size: 14px; }\n                        h1 { text-align: center; color: #333; margin-bottom: 5px; }\n                        h3 { text-align: center; color: #666; margin-top: 0; margin-bottom: 25px; }\n                        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; border-radius: 8px; background: #f9f9f9; }\n                        .info-item { margin-bottom: 5px; }\n                        .label { font-weight: bold; color: #555; }\n                        table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n                        th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #eee; }\n                        th { background: #f0f0f0; border-bottom: 2px solid #ccc; font-weight: bold; }\n                        .price-val { font-weight: bold; font-family: monospace; font-size: 1.1em; }\n                    </style>\n                </head>\n                <body>\n                    <h1>").concat(t.descripcion,"</h1>\n                    <h3>").concat(t.numeroArticulo,'</h3>\n\n                    <div class="info-grid">\n                        <div class="col">\n                            <div class="info-item"><span class="label">Unidad Base:</span> ').concat(t.unidadMedida,'</div>\n                            <div class="info-item"><span class="label">Categora:</span> ').concat(t.categoria||"-",'</div>\n                            <div class="info-item"><span class="label">Marca:</span> ').concat(t.marca||"-",'</div>\n                        </div>\n                        <div class="col">\n                            <div class="info-item"><span class="label">Costo Estndar:</span> $').concat(Number(t.costoEstandar||0).toFixed(2),'</div>\n                            <div class="info-item"><span class="label">Costo Actual:</span> $').concat(Number(t.costoUnitario||0).toFixed(2),"</div>\n                        </div>\n                    </div>\n\n                    <h2>Niveles de Precio</h2>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>Nivel</th>\n                                <th>Unidad</th>\n                                <th>Cant. Inicial</th>\n                                <th>Margen %</th>\n                                <th>Precio Final</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n            ");v.length>0?v.forEach(se=>{var oe;se.activo&&(ie+="\n                        <tr>\n                            <td>".concat(se.nivelPrecio,"</td>\n                            <td>").concat(se.unidadMedida,"</td>\n                            <td>").concat(se.cantidadInicial,"</td>\n                            <td>").concat(se.porcentaje,'%</td>\n                            <td class="price-val">').concat((oe=se.precio)==null?void 0:oe.toFixed(2)," <small>").concat(se.moneda,"</small></td>\n                        </tr>\n                    "))}):ie+='<tr><td colspan="5" style="text-align:center; padding: 20px; color: #999;">Sin precios configurados</td></tr>',ie+="</tbody></table></body></html>";const Ce=window.open("","_blank");Ce.document.write(ie),Ce.document.close(),Ce.print()}catch(ie){console.error(ie),alert("Error al imprimir artculo")}};return r.jsxs("div",{className:"min-h-screen bg-gray-50/50 p-6 space-y-6",children:[r.jsx("div",{id:"header-message"}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/productos"),className:"hover:bg-gray-100 rounded-full h-10 w-10",children:r.jsx(un,{className:"h-6 w-6 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Lista de Precios"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione y configure los niveles de precios por artculo"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(re,{variant:"outline",onClick:Ge,className:"bg-white hover:bg-gray-50 text-gray-700 border-gray-200 shadow-sm",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"h-4 w-4"}),r.jsx("span",{children:"Reporte Global"})]})}),r.jsx(re,{variant:"outline",onClick:he,disabled:!t,className:"bg-white hover:bg-blue-50 text-blue-700 border-blue-200 shadow-sm",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"h-4 w-4"}),r.jsx("span",{children:"Imprimir Artculo"})]})}),r.jsx(re,{variant:"outline",onClick:()=>l(!0),disabled:!t,className:"bg-white hover:bg-orange-50 text-gray-700 border-gray-200 hover:border-orange-200 hover:text-orange-600 transition-all duration-200 shadow-sm",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"h-4 w-4"}),r.jsx("span",{children:"Copiar a..."})]})}),r.jsx(re,{onClick:K,disabled:!t,className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white border-0 shadow-md hover:shadow-lg transition-all duration-200 px-6",children:r.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[r.jsx(Kt,{className:"h-5 w-5"}),r.jsx("span",{children:"Guardar Cambios"})]})})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50/80 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Informacin del Artculo"}),r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-md border border-gray-200 p-1 shadow-sm",children:[r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>F(0),disabled:_<=0,title:"Primero",children:r.jsx(z6,{size:16})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>F(_-1),disabled:_<=0,title:"Anterior",children:r.jsx(U6,{size:16})}),r.jsx("div",{className:"px-3 py-0.5 bg-gray-50 rounded border border-gray-100 text-xs font-bold min-w-[80px] text-center text-gray-600",children:O.length>0&&_>=0?"".concat(_+1," / ").concat(O.length):"0 / 0"}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>F(_+1),disabled:_>=O.length-1,title:"Siguiente",children:r.jsx(ir,{size:16})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>F(O.length-1),disabled:_>=O.length-1,title:"ltimo",children:r.jsx(B6,{size:16})})]})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx("div",{className:"space-y-5",children:r.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-lg border border-blue-100 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-blue-900 uppercase tracking-wide mb-1.5",children:"Artculo Seleccionado"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ge,{value:(t==null?void 0:t.numeroArticulo)||"",className:"bg-white border-blue-200 text-black placeholder:text-gray-500 font-bold h-11",readOnly:!0,placeholder:"Busque un artculo..."}),!t&&r.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-xs text-blue-400 italic",children:"Requerido"})})]}),r.jsx(re,{onClick:()=>s(!0),className:"h-11 w-11 bg-white border border-blue-200 text-blue-600 hover:bg-blue-50 hover:border-blue-300 shadow-sm",children:r.jsx(Yt,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Descripcin"}),r.jsx(ge,{value:(t==null?void 0:t.descripcion)||"",className:"bg-transparent border-0 border-b border-blue-200 rounded-none px-0 h-8 font-medium text-gray-900 focus:ring-0",readOnly:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Mtodo de Precio"}),r.jsx("div",{className:"h-8 flex items-center text-sm font-medium text-gray-700 border-b border-blue-200",children:"Monto Monetario"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-2",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100 text-center",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Unidad Base"}),r.jsx("div",{className:"text-lg font-bold text-gray-900",children:(t==null?void 0:t.unidadMedida)||"-"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100 text-center",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Costo Estndar"}),r.jsx("div",{className:"text-lg font-mono text-gray-600",children:Number((t==null?void 0:t.costoEstandar)||0).toFixed(2)})]}),r.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-100 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-orange-100 rounded-bl-full"}),r.jsx("label",{className:"block text-xs font-bold text-orange-800 mb-2",children:"Costo Actual"}),r.jsx("div",{className:"text-xl font-mono font-bold text-orange-600",children:Number((t==null?void 0:t.costoUnitario)||0).toFixed(2)})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden min-h-[400px] flex flex-col",children:[r.jsxs("div",{className:"bg-gray-50/80 px-6 py-4 border-b border-gray-200 flex justify-between items-center sticky top-0 z-10",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Niveles de Precio"]}),r.jsxs("div",{className:"flex items-center gap-4 bg-white p-1.5 rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center px-3 border-r border-gray-200",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500 mr-3",children:"Decimales"}),r.jsx("input",{type:"number",value:N,onChange:ie=>k(parseInt(ie.target.value)),className:"w-12 text-center text-sm font-bold text-gray-900 border-0 focus:ring-0 p-0"})]}),r.jsxs("div",{className:"flex gap-2 p-1",children:[r.jsxs(re,{size:"sm",variant:"outline",onClick:()=>f(!0),disabled:!t||v.length===0,className:"h-8 px-3 text-purple-600 border-purple-200 hover:bg-purple-50",title:"Aplicar Margen Masivo",children:[r.jsx($C,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs",children:"Aplicar Margen"})]}),v.length===0&&r.jsxs(re,{size:"sm",variant:"ghost",onClick:()=>j($(t)),disabled:!t,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 font-medium h-8",children:[r.jsx(Lt,{className:"h-4 w-4 mr-1.5"}),"Cargar Sugerencias"]}),r.jsxs(re,{size:"sm",onClick:X,disabled:!t,className:"bg-gray-900 text-white hover:bg-black h-8 px-4",children:[r.jsx(Lt,{className:"h-4 w-4 mr-1.5"}),"Agregar Nivel"]})]})]})]}),r.jsx("div",{className:"overflow-x-auto flex-1 p-0",children:r.jsxs(Bt,{className:"w-full",children:[r.jsx(Ut,{className:"bg-gray-50/50",children:r.jsxs(Te,{className:"border-b border-gray-200",children:[r.jsx(le,{className:"w-16 text-center py-4 font-semibold text-gray-600",children:"Activo"}),r.jsx(le,{className:"py-4 font-semibold text-gray-600 pl-4",children:"Nivel de Precio"}),r.jsx(le,{className:"w-32 py-4 font-semibold text-gray-600",children:"Unidad"}),r.jsx(le,{className:"w-32 text-center py-4 font-semibold text-gray-600",children:"Cant. Inicial"}),r.jsx(le,{className:"w-32 text-center py-4 font-semibold text-gray-600",children:"Margen %"}),r.jsx(le,{className:"w-40 text-right py-4 font-semibold text-gray-600 pr-6",children:"Precio Final"}),r.jsx(le,{className:"w-24 text-center py-4 font-semibold text-gray-600",children:"Moneda"}),r.jsx(le,{className:"w-16"})]})}),r.jsx(Vt,{children:t?v.map((ie,Ce)=>r.jsxs(Te,{className:"group hover:bg-orange-50/30 transition-colors border-b border-gray-100 last:border-0",children:[r.jsx(H,{className:"text-center py-3",children:r.jsx("div",{className:"flex justify-center",children:r.jsx("input",{type:"checkbox",checked:ie.activo,onChange:se=>me(Ce,"activo",se.target.checked),className:"w-5 h-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500 cursor-pointer"})})}),r.jsx(H,{className:"p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:ie.nivelPrecio,onChange:se=>me(Ce,"nivelPrecio",se.target.value),className:"w-full bg-transparent border-0 font-medium text-gray-900 focus:ring-0 cursor-pointer hover:bg-gray-100/50 rounded px-2 py-1.5 transition-colors",children:[r.jsx("option",{value:"",children:"Seleccionar Nivel..."}),P.map(se=>r.jsx("option",{value:se.nombre,children:se.nombre},se.id))]}),r.jsx(Ko,{onClick:()=>T(!0),className:"opacity-0 group-hover:opacity-100 transition-opacity"})]})}),r.jsx(H,{className:"p-2",children:r.jsx("select",{value:ie.unidadMedida,onChange:se=>me(Ce,"unidadMedida",se.target.value),className:"w-full text-sm bg-gray-50 border-0 rounded-md text-gray-600 focus:ring-0 py-1.5 cursor-pointer",children:D.map(se=>r.jsx("option",{value:se,children:se},se))})}),r.jsx(H,{className:"p-2",children:r.jsx(ge,{type:"number",value:ie.cantidadInicial,onChange:se=>me(Ce,"cantidadInicial",se.target.value===""?0:parseFloat(se.target.value)),className:"text-center border-0 bg-transparent hover:bg-gray-100/50 focus:bg-white focus:ring-1 focus:ring-orange-200 rounded font-mono text-sm"})}),r.jsx(H,{className:"p-2",children:r.jsxs("div",{className:"relative",children:[r.jsx(ge,{type:"number",value:ie.porcentaje,onChange:se=>me(Ce,"porcentaje",se.target.value===""?0:parseFloat(se.target.value)),className:"text-center border-0 bg-transparent hover:bg-gray-100/50 focus:bg-white focus:ring-1 focus:ring-orange-200 rounded font-mono text-sm pr-6"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-bold",children:"%"})]})}),r.jsx(H,{className:"p-2",children:r.jsx(ge,{type:"number",value:ie.precio,onChange:se=>me(Ce,"precio",se.target.value===""?0:parseFloat(se.target.value)),className:"text-right border border-transparent bg-orange-50/50 text-orange-700 font-bold shadow-sm rounded focus:bg-white focus:border-orange-300 focus:ring-2 focus:ring-orange-100 text-base"})}),r.jsx(H,{className:"p-2 text-center",children:r.jsxs("select",{value:ie.moneda,onChange:se=>me(Ce,"moneda",se.target.value),className:"text-xs font-bold text-gray-700 bg-gray-100 border-0 rounded px-1 py-1 cursor-pointer focus:ring-2 focus:ring-orange-200",children:[r.jsx("option",{value:"DOP",children:"DOP"}),r.jsx("option",{value:"USD",children:"USD"})]})}),r.jsx(H,{className:"text-center p-2",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-100 group-hover:opacity-100 transition-opacity",children:[r.jsxs("div",{className:"flex flex-col gap-0.5 mr-2",children:[r.jsx("button",{onClick:()=>Pe(Ce,"up"),disabled:Ce===0,className:"text-gray-400 hover:text-blue-600 disabled:opacity-20 disabled:cursor-not-allowed hover:bg-gray-100 rounded",children:r.jsx(Gn,{className:"h-3 w-3"})}),r.jsx("button",{onClick:()=>Pe(Ce,"down"),disabled:Ce===v.length-1,className:"text-gray-400 hover:text-blue-600 disabled:opacity-20 disabled:cursor-not-allowed hover:bg-gray-100 rounded",children:r.jsx(Jr,{className:"h-3 w-3"})})]}),r.jsx("button",{className:"p-1.5 rounded-md text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors",onClick:()=>Y(Ce),title:"Eliminar fila",children:r.jsx(rr,{className:"h-4 w-4"})})]})})]},Ce)):r.jsx(Te,{children:r.jsx(H,{colSpan:8,className:"h-64 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4",children:r.jsx(Yt,{className:"h-8 w-8 text-gray-300"})}),r.jsx("p",{className:"text-lg font-medium text-gray-600",children:"No hay artculo seleccionado"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Utilice el buscador para cargar un producto y ver sus precios"}),r.jsx(re,{variant:"outline",className:"mt-6 border-orange-200 text-orange-600 hover:bg-orange-50",onClick:()=>s(!0),children:"Buscar Artculo Ahora"})]})})})})]})})]}),r.jsx(ul,{isOpen:a,onClose:()=>s(!1),onSelect:ie=>{n(ie),s(!1)}}),r.jsx(ul,{isOpen:o,onClose:()=>l(!1),onSelect:V}),r.jsx(Xy,{isOpen:G,onClose:()=>T(!1),onSave:B,title:"Nuevo Nivel de Precio",fields:[{name:"nombre",label:"Nombre del Nivel",placeholder:"Ej. Mayorista"},{name:"descripcion",label:"Descripcin",placeholder:"Descripcin opcional"}]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200",children:[r.jsxs("div",{className:"bg-purple-600 text-white p-4 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[r.jsx($C,{size:20}),"Aplicar Margen"]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white/80 hover:text-white",children:r.jsx(Tt,{size:20})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margen de Ganancia (%)"}),r.jsx(ge,{type:"number",autoFocus:!0,placeholder:"Ej: 30",value:h,onChange:ie=>u(ie.target.value),className:"text-lg font-bold text-center"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aplicar a"}),r.jsxs("select",{className:"w-full h-10 rounded-md border-gray-300 bg-gray-50 text-sm focus:ring-purple-500 focus:border-purple-500",value:m,onChange:ie=>p(ie.target.value),children:[r.jsx("option",{value:"all",children:"Todo (Todos los Niveles)"}),[...new Set(v.map(ie=>ie.nivelPrecio))].filter(Boolean).map((ie,Ce)=>r.jsx("option",{value:ie,children:ie},Ce))]})]}),r.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[r.jsx(re,{variant:"ghost",onClick:()=>f(!1),children:"Cancelar"}),r.jsx(re,{onClick:xe,className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Aplicar"})]})]})]})})]})};let jU={data:""},wU=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||jU},NU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,SU=/\/\*[^]*?\*\/|  +/g,S2=/\n+/g,Qo=(e,t)=>{let n="",a="",s="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":a+=o[1]=="f"?Qo(l,o):o+"{"+Qo(l,o[1]=="k"?"":t)+"}":typeof l=="object"?a+=Qo(l,t?t.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,f=>/&/.test(f)?f.replace(/&/g,c):c?c+" "+f:f)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Qo.p?Qo.p(o,l):o+":"+l+";")}return n+(t&&s?t+"{"+s+"}":s)+a},Ys={},m5=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+m5(e[n]);return t}return e},CU=(e,t,n,a,s)=>{let o=m5(e),l=Ys[o]||(Ys[o]=(f=>{let h=0,u=11;for(;h<f.length;)u=101*u+f.charCodeAt(h++)>>>0;return"go"+u})(o));if(!Ys[l]){let f=o!==e?e:(h=>{let u,m,p=[{}];for(;u=NU.exec(h.replace(SU,""));)u[4]?p.shift():u[3]?(m=u[3].replace(S2," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][u[1]]=u[2].replace(S2," ").trim();return p[0]})(e);Ys[l]=Qo(s?{["@keyframes "+l]:f}:f,n?"":"."+l)}let c=n&&Ys.g?Ys.g:null;return n&&(Ys.g=Ys[l]),((f,h,u,m)=>{m?h.data=h.data.replace(m,f):h.data.indexOf(f)===-1&&(h.data=u?f+h.data:h.data+f)})(Ys[l],t,a,c),l},kU=(e,t,n)=>e.reduce((a,s,o)=>{let l=t[o];if(l&&l.call){let c=l(n),f=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=f?"."+f:c&&typeof c=="object"?c.props?"":Qo(c,""):c===!1?"":c}return a+s+(l==null?"":l)},"");function Gp(e){let t=this||{},n=e.call?e(t.p):e;return CU(n.unshift?n.raw?kU(n,[].slice.call(arguments,1),t.p):n.reduce((a,s)=>Object.assign(a,s&&s.call?s(t.p):s),{}):n,wU(t.target),t.g,t.o,t.k)}let p5,cb,db;Gp.bind({g:1});let lo=Gp.bind({k:1});function PU(e,t,n,a){Qo.p=t,p5=e,cb=n,db=a}function xi(e,t){let n=this||{};return function(){let a=arguments;function s(o,l){let c=Object.assign({},o),f=c.className||s.className;n.p=Object.assign({theme:cb&&cb()},c),n.o=/ *go\d+/.test(f),c.className=Gp.apply(n,a)+(f?" "+f:"");let h=e;return e[0]&&(h=c.as||e,delete c.as),db&&h[0]&&db(c),p5(h,c)}return s}}var EU=e=>typeof e=="function",ub=(e,t)=>EU(e)?e(t):e,AU=(()=>{let e=0;return()=>(++e).toString()})(),IU=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),DU=20,g5="default",x5=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:a}=t;return x5(e,{type:e.toasts.find(l=>l.id===a.id)?1:0,toast:a});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},OU=[],MU={toasts:[],pausedAt:void 0,settings:{toastLimit:DU}},yc={},v5=(e,t=g5)=>{yc[t]=x5(yc[t]||MU,e),OU.forEach(([n,a])=>{n===t&&a(yc[t])})},y5=e=>Object.keys(yc).forEach(t=>v5(e,t)),TU=e=>Object.keys(yc).find(t=>yc[t].toasts.some(n=>n.id===e)),Bj=(e=g5)=>t=>{v5(t,e)},_U=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||AU()}),Xu=e=>(t,n)=>{let a=_U(t,e,n);return Bj(a.toasterId||TU(a.id))({type:2,toast:a}),a.id},bn=(e,t)=>Xu("blank")(e,t);bn.error=Xu("error");bn.success=Xu("success");bn.loading=Xu("loading");bn.custom=Xu("custom");bn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Bj(t)(n):y5(n)};bn.dismissAll=e=>bn.dismiss(void 0,e);bn.remove=(e,t)=>{let n={type:4,toastId:e};t?Bj(t)(n):y5(n)};bn.removeAll=e=>bn.remove(void 0,e);bn.promise=(e,t,n)=>{let a=bn.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let o=t.success?ub(t.success,s):void 0;return o?bn.success(o,{id:a,...n,...n==null?void 0:n.success}):bn.dismiss(a),s}).catch(s=>{let o=t.error?ub(t.error,s):void 0;o?bn.error(o,{id:a,...n,...n==null?void 0:n.error}):bn.dismiss(a)}),e};var QI,RU=lo(QI||(QI=Qt(["\nfrom {\n  transform: scale(0) rotate(45deg);\n	opacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),ZI,$U=lo(ZI||(ZI=Qt(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),eD,FU=lo(eD||(eD=Qt(["\nfrom {\n  transform: scale(0) rotate(90deg);\n	opacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n	opacity: 1;\n}"]))),tD,LU=xi("div")(tD||(tD=Qt(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",RU,$U,e=>e.secondary||"#fff",FU),rD,zU=lo(rD||(rD=Qt(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),nD,BU=xi("div")(nD||(nD=Qt(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",zU),aD,UU=lo(aD||(aD=Qt(["\nfrom {\n  transform: scale(0) rotate(45deg);\n	opacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n	opacity: 1;\n}"]))),sD,VU=lo(sD||(sD=Qt(["\n0% {\n	height: 0;\n	width: 0;\n	opacity: 0;\n}\n40% {\n  height: 0;\n	width: 6px;\n	opacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),oD,qU=xi("div")(oD||(oD=Qt(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",UU,VU,e=>e.secondary||"#fff"),iD,GU=xi("div")(iD||(iD=Qt(["\n  position: absolute;\n"]))),lD,HU=xi("div")(lD||(lD=Qt(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),cD,WU=lo(cD||(cD=Qt(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),dD,KU=xi("div")(dD||(dD=Qt(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),WU),YU=({toast:e})=>{let{icon:t,type:n,iconTheme:a}=e;return t!==void 0?typeof t=="string"?x.createElement(KU,null,t):t:n==="blank"?null:x.createElement(HU,null,x.createElement(BU,{...a}),n!=="loading"&&x.createElement(GU,null,n==="error"?x.createElement(LU,{...a}):x.createElement(qU,{...a})))},XU=e=>"\n0% {transform: translate3d(0,".concat(e*-200,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),JU=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(e*-150,"%,-1px) scale(.6); opacity:0;}\n"),QU="0%{opacity:0;} 100%{opacity:1;}",ZU="0%{opacity:1;} 100%{opacity:0;}",uD,e7=xi("div")(uD||(uD=Qt(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),fD,t7=xi("div")(fD||(fD=Qt(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),r7=(e,t)=>{let n=e.includes("top")?1:-1,[a,s]=IU()?[QU,ZU]:[XU(n),JU(n)];return{animation:t?"".concat(lo(a)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(lo(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}};x.memo(({toast:e,position:t,style:n,children:a})=>{let s=e.height?r7(e.position||t||"top-center",e.visible):{opacity:0},o=x.createElement(YU,{toast:e}),l=x.createElement(t7,{...e.ariaProps},ub(e.message,e));return x.createElement(e7,{className:e.className,style:{...s,...n,...e.style}},typeof a=="function"?a({icon:o,message:l}):x.createElement(x.Fragment,null,o,l))});PU(x.createElement);var hD;Gp(hD||(hD=Qt(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"])));var Cs=bn;const C2="http://localhost:5006/api",k2=e=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(e),zt=e=>new Intl.NumberFormat("es-DO").format(e),P2=()=>{const{articuloId:e}=xo(),t=$t(),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState({fechaInicio:"",fechaFin:"",tipoMovimiento:""}),[f,h]=x.useState(""),[u,m]=x.useState([]),[p,v]=x.useState(!e),[j,y]=x.useState(!1),[b,N]=x.useState(!1),[k,D]=x.useState(""),[E,P]=x.useState([]),[C,O]=x.useState(""),[A,_]=x.useState(""),z=Nt.useMemo(()=>{const V=(s==null?void 0:s.movimientos)||[];return j?V.reduce((F,L)=>{const X=L.almacenNombre||"Sin Almacn";return F[X]||(F[X]=[]),F[X].push(L),F},{}):null},[s,j]);x.useEffect(()=>{e?v(!1):(v(!0),a(!1))},[e]);const G=async V=>{if(!V){m([]);return}try{const L=(await dl()).filter(X=>X.descripcion.toLowerCase().includes(V.toLowerCase())||X.numeroArticulo.toLowerCase().includes(V.toLowerCase())).slice(0,10);m(L)}catch(F){Cs.error("Error buscando artculos")}},T=V=>{const F=V.target.value;h(F),G(F)},M=({title:V,value:F,icon:L,colorClass:X,subtext:Y})=>r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:V}),r.jsx("h3",{className:"text-2xl font-bold ".concat(X),children:F}),Y&&r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:Y})]}),r.jsx("div",{className:"p-3 rounded-full ".concat(X.replace("text-","bg-").replace("600","100")),children:r.jsx(L,{className:"w-6 h-6 ".concat(X)})})]}),W=async()=>{try{console.log("[Historial] Fetching data for ID:",e),a(!0);const V=new URLSearchParams;l.fechaInicio&&V.append("fechaInicio",l.fechaInicio),l.fechaFin&&V.append("fechaFin",l.fechaFin),l.tipoMovimiento&&V.append("tipoMovimiento",l.tipoMovimiento);const F=await fetch("".concat(C2,"/ArticuloHistorial/").concat(e,"?").concat(V.toString()));if(console.log("[Historial] Fetch Status:",F.status,F.statusText),!F.ok){const X=await F.text();throw console.error("[Historial] Fetch Error Body:",X),new Error("Error al cargar historial: "+F.status)}const L=await F.json();console.log("[Historial] Data Received:",L),o(L)}catch(V){console.error("[Historial] Catch Error:",V),Cs.error(V.message)}finally{a(!1)}},Z=async()=>{N(!0),D(($==null?void 0:$.existenciaActual)||0);try{const V=await Ij();console.log("Motivos loaded:",V);const L=(Array.isArray(V)?V:V.data||[]).filter(X=>X.activo);P(L),L.length>0&&O(L[0].id)}catch(V){console.error("Error loading motivos:",V),Cs.error("Error cargando motivos")}},B=async()=>{var xe;if(k==="")return;const V=$.existenciaActual,L=parseFloat(k)-V;if(L===0){Cs("El stock es idntico, no se requiere ajuste."),N(!1);return}if(!C){Cs.error("Seleccione un motivo");return}const X=L>0?"in":"out",Y=Math.abs(L),me={fecha:new Date().toISOString().split("T")[0],tipoAjuste:X,motivoId:parseInt(C),motivoDescripcion:(xe=E.find(Pe=>Pe.id==C))==null?void 0:xe.motivo,almacenId:1,observaciones:"Ajuste Rpido desde Historial: ".concat(A),detalles:[{articuloId:U.id,codigo:U.codigo,descripcion:U.descripcion,unidad:U.unidadMedida,cantidad:Y,equivalente:1,costo:U.costoUnitario,planUoM:U.planMedida||"N/A"}]};try{console.log("Sending payload:",me);const Pe=await pO(me);console.log("Response:",Pe),Cs.success("Ajuste ".concat(Pe.documento," creado. Stock actualizado.")),N(!1),W()}catch(Pe){console.error("Error creating adjustment:",Pe),Cs.error("Error al crear ajuste: "+Pe.message)}};if(x.useEffect(()=>{e&&W()},[e,l]),n&&!s)return r.jsx("div",{className:"p-8 text-center",children:"Cargando historial..."});if(!s)return r.jsx("div",{className:"p-8 text-center text-red-500",children:"No se encontraron datos."});const{encabezado:U,kpis:$,movimientos:K}=s||{encabezado:{},kpis:{},movimientos:[]};return p?r.jsx("div",{className:"p-6 bg-slate-50 min-h-screen flex flex-col items-center pt-20",children:r.jsxs("div",{className:"w-full max-w-2xl text-center space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-800 tracking-tight mb-2",children:"Historial de Artculos"}),r.jsx("p",{className:"text-slate-500",children:"Busca un producto para ver su kardex detallado"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Yt,{className:"absolute left-4 top-4 text-slate-400 w-6 h-6"}),r.jsx("input",{type:"text",className:"w-full h-14 pl-14 pr-4 rounded-2xl border-2 border-slate-200 focus:border-indigo-500 focus:ring-0 text-lg shadow-sm transition-all",placeholder:"Buscar por cdigo o descripcin...",value:f,onChange:T,autoFocus:!0})]}),r.jsxs("div",{className:"space-y-3",children:[u.map(V=>r.jsxs("button",{onClick:()=>t("/inventario/historial/".concat(V.id)),className:"w-full bg-white p-4 rounded-xl shadow-sm border border-slate-100 hover:border-indigo-300 hover:shadow-md transition-all flex items-center justify-between group",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"font-bold text-slate-800 group-hover:text-indigo-600",children:V.descripcion}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Code: ",V.numeroArticulo]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-sm font-bold text-slate-700 block",children:["Stock: ",V.stockActual]}),r.jsx("span",{className:"text-xs text-slate-400",children:V.unidadMedida})]})]},V.id)),f&&u.length===0&&r.jsx("div",{className:"text-slate-400 py-4",children:"No se encontraron productos"})]})]})}):r.jsxs("div",{className:"p-6 bg-slate-50 min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-white rounded-full transition-colors",children:r.jsx(un,{className:"w-6 h-6 text-slate-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[(U==null?void 0:U.descripcion)||"Artculo sin nombre",r.jsx("span",{className:"text-xs px-2 py-1 rounded-full ".concat((U==null?void 0:U.estado)==="Activo"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:(U==null?void 0:U.estado)||"N/A"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mt-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Nl,{className:"w-4 h-4"})," ",U.codigo]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ji,{className:"w-4 h-4"})," ",U.categoria]}),r.jsxs("span",{children:["U.M: ",U.unidadMedida]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:async()=>{if(confirm("Ests seguro de conciliar el stock basndose en el historial completo de todos los almacenes?"))try{const V=await fetch("".concat(C2,"/Articulos/").concat(e,"/RecalculateStock"),{method:"POST"}),F=await V.json();if(V.ok){Cs.success("Stock conciliado: ".concat(F.nuevoStock));const L="\n                                    <html>\n                                    <head>\n                                        <title>Reporte de Conciliacin - ".concat(U.descripcion,'</title>\n                                        <style>\n                                            body { font-family: \'Segoe UI\', sans-serif; padding: 20px; font-size: 12px; }\n                                            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }\n                                            .title { font-size: 20px; font-weight: bold; margin-bottom: 5px; }\n                                            .subtitle { color: #555; }\n                                            .section { margin-bottom: 20px; page-break-inside: avoid; }\n                                            .section-title { font-size: 16px; font-weight: bold; color: #4338ca; border-bottom: 1px solid #e5e7eb; padding-bottom: 5px; margin-bottom: 10px; }\n                                            \n                                            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }\n                                            .kpi-card { border: 1px solid #ddd; padding: 10px; border-radius: 6px; background: #f9fafb; text-align: center; }\n                                            .kpi-label { color: #666; font-size: 11px; text-transform: uppercase; }\n                                            .kpi-value { font-size: 18px; font-weight: bold; color: #111; }\n                                            \n                                            .table { width: 100%; border-collapse: collapse; font-size: 11px; }\n                                            .table th, .table td { border: 1px solid #e5e7eb; padding: 6px; text-align: left; }\n                                            .table th { background-color: #f3f4f6; font-weight: bold; color: #374151; }\n                                            .text-right { text-align: right; }\n                                            \n                                            .footer { margin-top: 30px; font-size: 10px; color: #999; text-align: center; border-top: 1px solid #eee; padding-top: 10px; }\n                                        </style>\n                                    </head>\n                                    <body>\n                                        <div class="header">\n                                            <div class="title">Reporte de Conciliacin de Inventario</div>\n                                            <div class="subtitle">').concat(new Date().toLocaleString(),' - Generado tras Reclculo</div>\n                                        </div>\n\n                                        <div class="info" style="display: flex; justify-content: space-between; margin-bottom: 20px; background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0;">\n                                            <div>\n                                                <p><strong>Artculo:</strong> ').concat(U.descripcion,"</p>\n                                                <p><strong>Cdigo:</strong> ").concat(U.codigo,'</p>\n                                            </div>\n                                            <div class="text-right">\n                                                <p><strong>Categora:</strong> ').concat(U.categoria,"</p>\n                                                <p><strong>Unidad:</strong> ").concat(U.unidadMedida,'</p>\n                                            </div>\n                                        </div>\n\n                                        <!-- KPIs Conciliados -->\n                                        <div class="section">\n                                            <div class="section-title">Resultados de la Conciliacin</div>\n                                            <div class="kpi-grid">\n                                                <div class="kpi-card">\n                                                    <div class="kpi-label">Stock Anterior</div>\n                                                    <div class="kpi-value">').concat(zt(F.stockAnterior!==void 0?F.stockAnterior:0),'</div>\n                                                </div>\n                                                <div class="kpi-card">\n                                                    <div class="kpi-label">Stock Nuevo</div>\n                                                    <div class="kpi-value">').concat(zt(F.nuevoStock||0),'</div>\n                                                </div>\n                                                <div class="kpi-card">\n                                                    <div class="kpi-label">Total Entradas</div>\n                                                    <div class="kpi-value text-green-600">+').concat(zt(F.totalEntradas||0),'</div>\n                                                </div>\n                                                <div class="kpi-card">\n                                                    <div class="kpi-label">Total Salidas</div>\n                                                    <div class="kpi-value text-red-600">-').concat(zt(F.totalSalidas||0),'</div>\n                                                </div>\n                                                <div className="kpi-card">\n                                                    <div className="kpi-label">Total Compras</div>\n                                                    <div className="kpi-value text-blue-600">+').concat(zt(F.totalCompras||F.TotalCompras||0),'</div>\n                                                </div>\n                                                <div className="kpi-card">\n                                                    <div className="kpi-label">Entradas por Recepcin</div>\n                                                    <div className="kpi-value text-green-600">+').concat(zt(F.entradasRecepcion||F.EntradasRecepcion||0),'</div>\n                                                </div>\n                                            </div>\n                                            <div style="font-size: 14px; text-align: center; padding: 10px; background: ').concat(F.diferencia===0?"#f0fdf4":"#fef2f2","; color: ").concat(F.diferencia===0?"#15803d":"#b91c1c",'; border-radius: 6px; border: 1px solid currentColor;">\n                                                <strong>Ajuste Realizado: ').concat(F.diferencia>0?"+":"").concat(zt(F.diferencia),"</strong>\n                                                ").concat(F.diferencia===0?"(El inventario ya estaba correcto)":"(Se corrigi el inventario re-sumando historial)",'\n                                            </div>\n                                        </div>\n\n                                        <!-- Movements Table -->\n                                        <div class="section">\n                                            <div class="section-title">Historial Completo Utilizado para Clculo</div>\n                                            <table class="table">\n                                                <thead>\n                                                    <tr>\n                                                        <th>Fecha</th>\n                                                        <th>Tipo</th>\n                                                        <th>Doc</th>\n                                                        <th class="text-right">Ctd</th>\n                                                        <th class="text-right">Costo</th>\n                                                        <th>Almacn</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    ').concat((F.movimientos||(s==null?void 0:s.movimientos)||[]).map(Y=>"\n                                                        <tr>\n                                                            <td>".concat(new Date(Y.fechaMovimiento||Y.FechaMovimiento).toLocaleString(),"</td>\n                                                            <td>").concat(Y.tipoMovimiento||Y.TipoMovimiento,"</td>\n                                                            <td>").concat(Y.referencia||Y.Referencia||Y.documento||"-",'</td>\n                                                            <td class="text-right" style="color: ').concat((Y.cantidad||Y.Cantidad)>0?"#16a34a":"#dc2626",'">\n                                                                ').concat(zt(Y.cantidad||Y.Cantidad),'\n                                                            </td>\n                                                            <td class="text-right">').concat(k2(Y.costo||Y.Costo||0),"</td>\n                                                            <td>").concat(Y.almacenNombre||Y.AlmacenId||"-","</td>\n                                                        </tr>\n                                                    ")).join(""),'\n                                                </tbody>\n                                            </table>\n                                        </div>\n\n                                        <div class="footer">\n                                            Generado por Sistema Crono POS - Auditora de Inventario\n                                        </div>\n                                    </body>\n                                    </html>\n                                '),X=window.open("","","width=800,height=600");X.document.write(L),X.document.close(),X.focus(),setTimeout(()=>{X.print(),X.close(),window.location.reload()},500)}else Cs.error(F.message)}catch(V){console.error(V),Cs.error("Error al conciliar")}},className:"flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-lg shadow-sm text-slate-600 hover:bg-slate-200 font-medium border border-slate-200 text-xs",children:[r.jsx(no,{className:"w-3 h-3"})," Auditar (Reclculo)"]}),r.jsxs("button",{onClick:Z,className:"flex items-center gap-2 bg-hd-orange px-4 py-2 rounded-lg shadow-sm text-white hover:bg-orange-600 font-medium border border-transparent",children:[r.jsx(no,{className:"w-4 h-4"})," Ajustar Stock"]}),r.jsxs("button",{onClick:W,className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm text-indigo-600 hover:bg-indigo-50 font-medium border border-slate-200",children:[r.jsx(no,{className:"w-4 h-4"})," Actualizar"]})]})]}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ajuste Rpido de Inventario"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100 flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Stock Sistema:"}),r.jsx("span",{className:"font-mono font-bold text-lg",children:$.existenciaActual})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Fsico Real"}),r.jsx("input",{type:"number",autoFocus:!0,className:"w-full text-2xl font-bold text-center border-2 border-indigo-100 focus:border-indigo-500 rounded-lg py-2",value:k,onChange:V=>D(V.target.value)})]}),k!==""&&r.jsxs("div",{className:"text-center text-sm font-medium py-2 rounded ".concat(parseFloat(k)-$.existenciaActual>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:["Diferencia: ",parseFloat(k)-$.existenciaActual>0?"+":"",(parseFloat(k)-$.existenciaActual).toFixed(2)]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),r.jsx("select",{className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500",value:C,onChange:V=>O(V.target.value),children:E.map(V=>r.jsx("option",{value:V.id,children:V.motivo},V.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota"}),r.jsx("input",{className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500",placeholder:"Opcional...",value:A,onChange:V=>_(V.target.value)})]})]}),r.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Cancelar"}),r.jsx("button",{onClick:B,className:"px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg font-medium shadow-sm transition-colors",children:"Confirmar Ajuste"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(M,{title:"Existencia Actual",value:zt($.existenciaActual),icon:Ji,colorClass:"text-blue-600",subtext:"Costo uni: ".concat(k2(U.costoUnitario))}),r.jsx(M,{title:"Total Compras",value:zt($.totalCompras),icon:io,colorClass:"text-emerald-600",subtext:"Entradas por Recepcin"}),r.jsx(M,{title:"Total Ventas",value:zt($.totalVentas),icon:ti,colorClass:"text-rose-500",subtext:"Salidas por Facturacin"}),r.jsx(M,{title:"Entradas Totales",value:zt($.entradasTotales),icon:Gn,colorClass:"text-green-600"}),r.jsx(M,{title:"Salidas Totales",value:zt($.salidasTotales),icon:Jr,colorClass:"text-red-600"}),r.jsx(M,{title:"Balance Neto",value:zt($.balanceNeto),icon:wj,colorClass:$.balanceNeto>=0?"text-slate-600":"text-amber-600",subtext:"En periodo seleccionado"})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 mb-6 flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Desde"}),r.jsx("input",{type:"date",className:"input-field-sm",value:l.fechaInicio,onChange:V=>c({...l,fechaInicio:V.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Hasta"}),r.jsx("input",{type:"date",className:"input-field-sm",value:l.fechaFin,onChange:V=>c({...l,fechaFin:V.target.value})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(Ji,{className:"w-5 h-5"})," Distribucin de Stock por Almacn"]}),r.jsxs("button",{onClick:()=>{const V="\n                                <html>\n                                <head>\n                                    <title>Reporte de Articulo - ".concat(U.descripcion,'</title>\n                                    <style>\n                                        body { font-family: \'Segoe UI\', sans-serif; padding: 20px; font-size: 12px; }\n                                        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }\n                                        .title { font-size: 20px; font-weight: bold; margin-bottom: 5px; }\n                                        .subtitle { color: #555; }\n                                        .section { margin-bottom: 20px; page-break-inside: avoid; }\n                                        .section-title { font-size: 16px; font-weight: bold; color: #4338ca; border-bottom: 1px solid #e5e7eb; padding-bottom: 5px; margin-bottom: 10px; }\n                                        \n                                        .kpi-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }\n                                        .kpi-card { border: 1px solid #ddd; padding: 10px; border-radius: 6px; background: #f9fafb; text-align: center; }\n                                        .kpi-label { color: #666; font-size: 11px; text-transform: uppercase; }\n                                        .kpi-value { font-size: 18px; font-weight: bold; color: #111; }\n                                        \n                                        .table { width: 100%; border-collapse: collapse; font-size: 11px; }\n                                        .table th, .table td { border: 1px solid #e5e7eb; padding: 6px; text-align: left; }\n                                        .table th { background-color: #f3f4f6; font-weight: bold; color: #374151; }\n                                        .text-right { text-align: right; }\n                                        .total-row { font-weight: bold; background-color: #f3f4f6; }\n                                        \n                                        .dist-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }\n                                        .dist-item { border: 1px solid #eee; padding: 8px; border-radius: 4px; }\n                                        .dist-bar-bg { height: 8px; background: #eee; border-radius: 4px; margin-top: 4px; overflow: hidden; }\n                                        .dist-bar { height: 100%; background: #4f46e5; }\n                                        \n                                        .footer { margin-top: 30px; font-size: 10px; color: #999; text-align: center; border-top: 1px solid #eee; padding-top: 10px; }\n                                        \n                                        @media print {\n                                            body { padding: 0; }\n                                            .info { display: flex; justify-content: space-between; margin-bottom: 20px; }\n                                            table { page-break-inside: auto; }\n                                            tr { page-break-inside: avoid; page-break-after: auto; }\n                                        }\n                                    </style>\n                                </head>\n                                <body>\n                                    <div class="header">\n                                        <div class="title">Reporte Detallado de Artculo</div>\n                                        <div class="subtitle">').concat(new Date().toLocaleString(),'</div>\n                                    </div>\n\n                                    <div class="info" style="display: flex; justify-content: space-between; margin-bottom: 20px; background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0;">\n                                        <div>\n                                            <p><strong>Artculo:</strong> ').concat(U.descripcion,"</p>\n                                            <p><strong>Cdigo:</strong> ").concat(U.codigo,'</p>\n                                        </div>\n                                        <div class="text-right">\n                                            <p><strong>Categora:</strong> ').concat(U.categoria,"</p>\n                                            <p><strong>Unidad:</strong> ").concat(U.unidadMedida,'</p>\n                                        </div>\n                                    </div>\n\n                                    <!-- KPIs -->\n                                    <div class="section">\n                                        <dvi class="section-title">Resumen de Inventario</div>\n                                        <div class="kpi-grid">\n                                            <div class="kpi-card">\n                                                <div class="kpi-label">Existencia Actual</div>\n                                                <div class="kpi-value">').concat(zt($.existenciaActual),'</div>\n                                            </div>\n                                            <div class="kpi-card">\n                                                <div class="kpi-label">Total Entradas</div>\n                                                <div class="kpi-value text-green-600">+').concat(zt($.entradasTotales),'</div>\n                                            </div>\n                                            <div class="kpi-card">\n                                                <div class="kpi-label">Total Salidas</div>\n                                                <div class="kpi-value text-red-600">-').concat(zt($.salidasTotales),'</div>\n                                            </div>\n                                             <div class="kpi-card">\n                                                <div class="kpi-label">Compras (Periodo)</div>\n                                                <div class="kpi-value" style="color: #4f46e5;">+').concat(zt($.totalCompras),'</div>\n                                            </div>\n                                             <div class="kpi-card">\n                                                <div class="kpi-label">Ventas (Periodo)</div>\n                                                <div class="kpi-value" style="color: #ea580c;">-').concat(zt($.totalVentas),'</div>\n                                            </div>\n                                            <div class="kpi-card">\n                                                <div class="kpi-label">Balance Neto</div>\n                                                <div class="kpi-value">').concat(zt($.balanceNeto),'</div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <!-- Distribution -->\n                                    <div class="section">\n                                        <div class="section-title">Distribucin por Almacn</div>\n                                        <div class="dist-grid">\n                                            ').concat(s.stockDistribucion.map(L=>{const X=$.existenciaActual>0?$.existenciaActual:1,Y=Math.max(0,Math.min(100,L.stock/X*100));return'\n                                                <div class="dist-item">\n                                                    <div style="display:flex; justify-content:space-between; margin-bottom:2px;">\n                                                        <strong>'.concat(L.almacen,"</strong>\n                                                        <span>").concat(zt(L.stock),'</span>\n                                                    </div>\n                                                    <div class="dist-bar-bg">\n                                                        <div class="dist-bar" style="width: ').concat(Y,'%"></div>\n                                                    </div>\n                                                </div>\n                                                ')}).join(""),'\n                                        </div>\n                                    </div>\n\n                                    <!-- Movements Table -->\n                                    <div class="section">\n                                        <div class="section-title">Historial de Movimientos</div>\n                                        <table class="table">\n                                            <thead>\n                                                <tr>\n                                                    <th>Fecha</th>\n                                                    <th>Tipo</th>\n                                                    <th>Doc</th>\n                                                    <th class="text-right">Entrada</th>\n                                                    <th class="text-right">Salida</th>\n                                                    <th class="text-right">Balance</th>\n                                                    <th>Almacn</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                ').concat(((s==null?void 0:s.movimientos)||[]).map(L=>"\n                                                    <tr>\n                                                        <td>".concat(new Date(L.fechaMovimiento).toLocaleString(),"</td>\n                                                        <td>").concat(L.tipoMovimiento,"</td>\n                                                        <td>").concat(L.referencia||L.documento||"-",'</td>\n                                                        <td class="text-right" style="color: ').concat(L.entrada>0?"#16a34a":"inherit",'">\n                                                            ').concat(L.entrada>0?zt(L.entrada):"-",'\n                                                        </td>\n                                                        <td class="text-right" style="color: ').concat(L.salida>0?"#dc2626":"inherit",'">\n                                                            ').concat(L.salida>0?zt(L.salida):"-",'\n                                                        </td>\n                                                        <td class="text-right"><b>').concat(zt(L.balance),"</b></td>\n                                                        <td>").concat(L.almacenNombre,"</td>\n                                                    </tr>\n                                                ")).join(""),'\n                                            </tbody>\n                                        </table>\n                                    </div>\n\n                                    <div class="footer">\n                                        Generado por Sistema Crono POS - Documento Interno\n                                    </div>\n                                </body>\n                                </html>\n                            '),F=window.open("","","width=800,height=600");F.document.write(V),F.document.close(),F.focus(),setTimeout(()=>{F.print(),F.close()},500)},className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 bg-indigo-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[r.jsx(Is,{className:"w-4 h-4"}),"Imprimir Reporte"]})]}),s.stockDistribucion&&s.stockDistribucion.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.stockDistribucion.map((V,F)=>{const L=s.kpis.existenciaActual>0?s.kpis.existenciaActual:1,X=Math.max(0,Math.min(100,V.stock/L*100));return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-600 mb-1",children:[r.jsx("span",{children:V.almacen}),r.jsx("span",{className:"text-slate-900 font-bold",children:zt(V.stock)})]}),r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:r.jsx("div",{className:"h-2.5 rounded-full ".concat(V.stock>0?"bg-indigo-500":"bg-red-400"),style:{width:"".concat(X,"%")}})})]},F)})}):r.jsx("p",{className:"text-slate-500 italic text-sm",children:"No hay informacin de distribucin por almacn."})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(sa,{className:"w-5 h-5 text-indigo-500"}),"Historial de Movimientos"]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("button",{onClick:()=>y(!j),className:"flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat(j?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-white text-slate-600 border border-slate-300 hover:bg-slate-50"),children:[r.jsx(Ji,{className:"w-4 h-4"}),j?"Desagrupar":"Agrupar por Almacn"]})})]}),n?r.jsxs("div",{className:"p-12 text-center text-slate-500 flex flex-col items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500 mb-4"}),r.jsx("p",{children:"Cargando historial..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3",children:"Fecha / Hora"}),r.jsx("th",{className:"px-6 py-3",children:"Tipo"}),r.jsx("th",{className:"px-6 py-3",children:"Documento"}),r.jsx("th",{className:"px-6 py-3 text-right text-green-700 bg-green-50",children:"Entrada"}),r.jsx("th",{className:"px-6 py-3 text-right text-red-700 bg-red-50",children:"Salida"}),r.jsx("th",{className:"px-6 py-3 text-right",children:"Stock"}),r.jsx("th",{className:"px-6 py-3",children:"Almacn"}),r.jsx("th",{className:"px-6 py-3",children:"Usuario"}),r.jsx("th",{className:"px-6 py-3",children:"Info"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:j&&z?Object.entries(z).map(([V,F])=>r.jsxs(Nt.Fragment,{children:[r.jsx("tr",{className:"bg-slate-50/80",children:r.jsx("td",{colSpan:"9",className:"px-6 py-2 font-semibold text-slate-700 border-t border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ji,{className:"w-4 h-4 text-indigo-500"}),V,r.jsxs("span",{className:"text-xs font-normal text-slate-500 ml-2",children:["(",F.length," movimientos)"]})]})})}),F.map(L=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-slate-600",children:new Date(L.fechaMovimiento).toLocaleString()}),r.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(L.entrada>0?"bg-emerald-100 text-emerald-800":L.salida>0?"bg-rose-100 text-rose-800":"bg-slate-100 text-slate-800"),children:L.tipoMovimiento})}),r.jsx("td",{className:"px-6 py-3 text-slate-500 font-mono text-xs",children:L.numeroDocumento||L.referencia||"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-emerald-600 bg-green-50/30",children:L.entrada>0?"+".concat(zt(L.entrada)):"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-rose-600 bg-red-50/30",children:L.salida>0?"-".concat(zt(L.salida)):"-"}),r.jsx("td",{className:"px-6 py-3 text-right text-xs text-slate-500 bg-slate-50/50",children:L.stockAnterior!==void 0&&L.stockAnterior!==null?r.jsxs(r.Fragment,{children:[zt(L.stockAnterior)," ",r.jsx("span",{className:"mx-1",children:""})," ",r.jsx("strong",{className:"text-slate-700 text-sm",children:zt(L.balance||0)})]}):r.jsx("strong",{className:"text-slate-700 text-sm",children:zt(L.balance||0)})}),r.jsx("td",{className:"px-6 py-3 text-slate-600",children:L.almacenNombre}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs",children:L.usuario}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs font-mono",children:L.referencia||"-"})]},L.id))]},V)):K.length>0?K.map(V=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-slate-600",children:new Date(V.fechaMovimiento).toLocaleString()}),r.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(V.entrada>0?"bg-emerald-100 text-emerald-800":V.salida>0?"bg-rose-100 text-rose-800":"bg-slate-100 text-slate-800"),children:V.tipoMovimiento})}),r.jsx("td",{className:"px-6 py-3 text-slate-500 font-mono text-xs",children:V.numeroDocumento||V.referencia||"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-emerald-600 bg-green-50/30",children:V.entrada>0?"+".concat(zt(V.entrada)):"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-rose-600 bg-red-50/30",children:V.salida>0?"-".concat(zt(V.salida)):"-"}),r.jsx("td",{className:"px-6 py-3 text-right text-xs text-slate-500 bg-slate-50/50",children:V.stockAnterior!==void 0&&V.stockAnterior!==null?r.jsxs(r.Fragment,{children:[zt(V.stockAnterior)," ",r.jsx("span",{className:"mx-1",children:""})," ",r.jsx("strong",{className:"text-slate-700 text-sm",children:zt(V.balance||0)})]}):r.jsx("strong",{className:"text-slate-700 text-sm",children:zt(V.balance||0)})}),r.jsx("td",{className:"px-6 py-3 text-slate-600",children:V.almacenNombre}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs",children:V.usuario}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs font-mono",children:V.referencia||"-"})]},V.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center text-slate-500",children:"No se encontraron movimientos para el rango seleccionado"})})})]})})]})]})},n7=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(!1),[c,f]=x.useState({id:0,nombre:"",descripcion:"",activo:!0});x.useEffect(()=>{h()},[]);const h=async()=>{s(!0);try{const j=await Cc();n(j)}catch(j){console.error(j)}finally{s(!1)}},u=j=>{f(j),l(!0)},m=()=>{f({id:0,nombre:"",descripcion:"",activo:!0}),l(!0)},p=async j=>{if(window.confirm("Est seguro de eliminar este nivel de precio?"))try{await fL(j),h()}catch(y){console.error(y),alert("Error al eliminar")}},v=async j=>{j.preventDefault();try{c.id?await uL(c.id,c):await Cj(c),l(!1),h()}catch(y){console.error(y),alert("Error al guardar")}};return r.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",onClick:()=>e("/inventario/lista-precios"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Niveles de Precio"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Administre los niveles de precios disponibles para los artculos."})]})]}),r.jsxs(re,{onClick:m,className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Nuevo Nivel"]})]}),r.jsx(We,{children:r.jsx(Mt,{className:"p-0",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(le,{children:"Nombre"}),r.jsx(le,{children:"Descripcin"}),r.jsx(le,{className:"w-24 text-center",children:"Activo"}),r.jsx(le,{className:"w-32 text-center",children:"Acciones"})]})}),r.jsx(Vt,{children:a?r.jsx(Te,{children:r.jsx(H,{colSpan:4,className:"text-center py-8",children:"Cargando..."})}):t.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:4,className:"text-center py-8 text-gray-500",children:"No hay niveles configurados"})}):t.map(j=>r.jsxs(Te,{children:[r.jsx(H,{className:"font-medium",children:j.nombre}),r.jsx(H,{children:j.descripcion}),r.jsx(H,{className:"text-center",children:r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(j.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:j.activo?"Activo":"Inactivo"})}),r.jsx(H,{className:"text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>u(j),children:r.jsx(wl,{className:"h-4 w-4 text-blue-600"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>p(j.id),children:r.jsx(rr,{className:"h-4 w-4 text-red-600"})})]})})]},j.id))})]})})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold",children:c.id?"Editar Nivel":"Nuevo Nivel"}),r.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tt,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ge,{value:c.nombre,onChange:j=>f({...c,nombre:j.target.value}),placeholder:"Ej: Mayorista",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),r.jsx(ge,{value:c.descripcion||"",onChange:j=>f({...c,descripcion:j.target.value}),placeholder:"Opcional"})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx("input",{type:"checkbox",id:"activeCheck",checked:c.activo,onChange:j=>f({...c,activo:j.target.checked}),className:"h-4 w-4 text-hd-orange border-gray-300 rounded focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"activeCheck",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"pt-4 flex justify-end gap-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),r.jsx(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:"Guardar"})]})]})]})})]})},a7="http://localhost:5006/api",s7=async()=>{const e=await fetch("".concat(a7,"/ReportesInventario/Valoracion"));if(!e.ok)throw new Error("Failed to get valuation: ".concat(e.status));return e.json()},o7=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState("");x.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const u=await s7();t(u)}catch(u){console.error("Error loading valuation:",u)}finally{a(!1)}},c=e.filter(u=>(u.numeroArticulo||"").toLowerCase().includes(s.toLowerCase())||(u.descripcion||"").toLowerCase().includes(s.toLowerCase())),f=c.reduce((u,m)=>({promedio:u.promedio+m.totalPromedio,fifo:u.fifo+m.totalFIFO,lifo:u.lifo+m.totalLIFO,estandar:u.estandar+m.totalEstandar}),{promedio:0,fifo:0,lifo:0,estandar:0}),h=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Valoracin de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Comparativa de mtodos de valuacin (Promedio, FIFO, LIFO, Estndar)."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(We,{className:"bg-blue-50 border-blue-200",children:r.jsx(Mt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Costo Promedio"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h(f.promedio)})]}),r.jsx(is,{className:"text-blue-400",size:24})]})})}),r.jsx(We,{className:"bg-green-50 border-green-200",children:r.jsx(Mt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"FIFO (PEPS)"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:h(f.fifo)})]}),r.jsx(ti,{className:"text-green-400",size:24})]})})}),r.jsx(We,{className:"bg-orange-50 border-orange-200",children:r.jsx(Mt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-600",children:"LIFO (UEPS)"}),r.jsx("p",{className:"text-2xl font-bold text-orange-900",children:h(f.lifo)})]}),r.jsx(oL,{className:"text-orange-400",size:24})]})})}),r.jsx(We,{className:"bg-gray-50 border-gray-200",children:r.jsx(Mt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Costo Estndar"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(f.estandar)})]}),r.jsx(Xr,{className:"text-gray-400",size:24})]})})})]}),r.jsxs(We,{children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx(ge,{placeholder:"Buscar por cdigo o descripcin...",value:s,onChange:u=>o(u.target.value),className:"max-w-md"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsxs(Ut,{children:[r.jsxs(Te,{children:[r.jsx(le,{rowSpan:2,children:"Artculo"}),r.jsx(le,{rowSpan:2,className:"text-right",children:"Stock"}),r.jsx(le,{colSpan:2,className:"text-center bg-blue-50/50",children:"Promedio"}),r.jsx(le,{colSpan:2,className:"text-center bg-green-50/50",children:"FIFO"}),r.jsx(le,{colSpan:2,className:"text-center bg-orange-50/50",children:"LIFO"}),r.jsx(le,{colSpan:2,className:"text-center bg-gray-50/50",children:"Estndar"})]}),r.jsxs(Te,{children:[r.jsx(le,{className:"text-right bg-blue-50/30 text-xs",children:"Costo"}),r.jsx(le,{className:"text-right bg-blue-50/30 text-xs font-bold",children:"Total"}),r.jsx(le,{className:"text-right bg-green-50/30 text-xs",children:"Costo"}),r.jsx(le,{className:"text-right bg-green-50/30 text-xs font-bold",children:"Total"}),r.jsx(le,{className:"text-right bg-orange-50/30 text-xs",children:"Costo"}),r.jsx(le,{className:"text-right bg-orange-50/30 text-xs font-bold",children:"Total"}),r.jsx(le,{className:"text-right bg-gray-50/30 text-xs",children:"Costo"}),r.jsx(le,{className:"text-right bg-gray-50/30 text-xs font-bold",children:"Total"})]})]}),r.jsx(Vt,{children:n?r.jsx(Te,{children:r.jsx(H,{colSpan:10,className:"text-center py-8",children:"Cargando valoracin..."})}):c.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:10,className:"text-center py-8 text-gray-500",children:"No se encontraron artculos con existencia."})}):c.map(u=>r.jsxs(Te,{children:[r.jsxs(H,{children:[r.jsx("div",{className:"font-medium",children:u.numeroArticulo}),r.jsx("div",{className:"text-xs text-gray-500",children:u.descripcion})]}),r.jsx(H,{className:"text-right font-medium",children:u.stockActual.toFixed(2)}),r.jsx(H,{className:"text-right bg-blue-50/10 text-xs",children:h(u.costoPromedio)}),r.jsx(H,{className:"text-right bg-blue-50/10 font-medium text-blue-700",children:h(u.totalPromedio)}),r.jsx(H,{className:"text-right bg-green-50/10 text-xs",children:h(u.costoFIFO)}),r.jsx(H,{className:"text-right bg-green-50/10 font-medium text-green-700",children:h(u.totalFIFO)}),r.jsx(H,{className:"text-right bg-orange-50/10 text-xs",children:h(u.costoLIFO)}),r.jsx(H,{className:"text-right bg-orange-50/10 font-medium text-orange-700",children:h(u.totalLIFO)}),r.jsx(H,{className:"text-right bg-gray-50/10 text-xs",children:h(u.costoEstandar)}),r.jsx(H,{className:"text-right bg-gray-50/10 font-medium text-gray-700",children:h(u.totalEstandar)})]},u.id))})]})})]})]})},i7="http://localhost:5006/api",l7=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const V=await fetch("".concat(i7,"/ReportesInventario/Transacciones"));if(!V.ok)throw new Error("Error fetching report");const F=await V.json();t(F)}catch(V){console.error(V)}finally{a(!1)}})()},[]);const s=e.reduce((K,V)=>K+V.montoDOP,0),o=e.reduce((K,V)=>K+V.montoUSD,0),[l,c]=x.useState({key:"fecha",direction:"desc"}),[f,h]=x.useState({}),[u,m]=x.useState({}),[p,v]=x.useState({}),[j,y]=x.useState(null),[b,N]=x.useState(""),[k,D]=x.useState({fecha:150,documento:120,proveedor:250,monedaOriginal:90,montoOriginal:120,montoDOP:120,montoUSD:120}),E=Object.values(k).reduce((K,V)=>K+V,0),P=(K,V)=>{D(F=>({...F,[K]:V}))},C=K=>{let V="asc";l.key===K&&l.direction==="asc"&&(V="desc"),c({key:K,direction:V})},O=(K,V)=>{V.stopPropagation(),y(j===K?null:K)},A=(K,V)=>{h(F=>({...F,[K]:V}))},_=(K,V,F)=>{v(L=>({...L,[K]:{...L[K]||{min:"",max:""},[V]:F}}))},z=(K,V)=>{m(F=>{const L=F[K]||[];return L.includes(V)?{...F,[K]:L.filter(X=>X!==V)}:{...F,[K]:[...L,V]}})},G=(K,V,F)=>{m(L=>{var ie;let Y=[...L[K]||[]];const me=T(),xe=(Ce,se)=>{if(!Ce.children){Pe.push(se);return}Object.keys(Ce.children).forEach(oe=>{xe(Ce.children[oe],se?"".concat(se,"/").concat(oe):oe)})},Pe=[];if(V==="")return F?{...L,[K]:[]}:(xe(me,""),{...L,[K]:Pe});const Ge=V.split("/").filter(Boolean);let he=me;for(const Ce of Ge)if(he=(ie=he==null?void 0:he.children)==null?void 0:ie[Ce],!he)break;if(he){const Ce=[],se=(oe,Fe)=>{if(!oe.children){Ce.push(Fe);return}Object.keys(oe.children).forEach(ze=>{se(oe.children[ze],"".concat(Fe,"/").concat(ze))})};se(he,V),F?Y=Y.filter(oe=>!Ce.includes(oe)):Ce.forEach(oe=>{Y.includes(oe)||Y.push(oe)})}return{...L,[K]:Y}})},T=()=>{const K={children:{}};return e.forEach(V=>{const F=new Date(V.fecha),L=String(F.getFullYear()),X=F.toLocaleDateString("es-DO",{month:"long"}),Y=String(F.getDate());K.children[L]||(K.children[L]={children:{}}),K.children[L].children[X]||(K.children[L].children[X]={children:{}}),K.children[L].children[X].children[Y]||(K.children[L].children[X].children[Y]={count:0}),K.children[L].children[X].children[Y].count++}),K},M=K=>{const V=e.map(F=>String(F[K]||""));return[...new Set(V)].sort()},W=K=>K?new Date(K).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",B=(()=>{let K=[...e];return b&&(K=K.filter(V=>Object.keys(V).some(F=>(F==="fecha"?W(V[F]):String(V[F])).toLowerCase().includes(b.toLowerCase())))),Object.keys(f).forEach(V=>{f[V]&&(K=K.filter(F=>{if(V==="fecha"){const L=new Date(F[V]);return"".concat(L.getFullYear()," ").concat(L.toLocaleDateString("es-DO",{month:"long"})," ").concat(L.getDate()).toLowerCase().includes(f[V].toLowerCase())}return String(F[V]||"").toLowerCase().includes(f[V].toLowerCase())}))}),Object.keys(u).forEach(V=>{u[V]&&u[V].length>0&&(K=K.filter(F=>{if(V==="fecha"){const L=new Date(F[V]),X="".concat(L.getFullYear(),"/").concat(L.toLocaleDateString("es-DO",{month:"long"}),"/").concat(L.getDate());return u[V].includes(X)}return u[V].includes(String(F[V]))}))}),Object.keys(p).forEach(V=>{const{min:F,max:L}=p[V];F!==""&&(K=K.filter(X=>(X[V]||0)>=parseFloat(F))),L!==""&&(K=K.filter(X=>(X[V]||0)<=parseFloat(L)))}),l.key&&K.sort((V,F)=>{const L=V[l.key],X=F[l.key];return L<X?l.direction==="asc"?-1:1:L>X?l.direction==="asc"?1:-1:0}),K})(),U=T(),$=()=>{h({}),m({}),v({}),N("")};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Reporte de Compras Multi-Moneda"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Visualizacin de compras en Pesos y Dlares con filtros avanzados."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(We,{className:"bg-blue-50 border-blue-100",children:r.jsxs("div",{className:"p-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total en Pesos (DOP)"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["RD$ ",s.toLocaleString("es-DO",{minimumFractionDigits:2})]})]})}),r.jsx(We,{className:"bg-green-50 border-green-100",children:r.jsxs("div",{className:"p-4",children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total en Dlares (USD)"}),r.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["US$ ",o.toLocaleString("en-US",{minimumFractionDigits:2})]})]})})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row justify-between items-center pb-4",children:[r.jsx(bt,{children:"Detalle de Transacciones"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(Object.keys(f).length>0||Object.keys(u).some(K=>Array.isArray(u[K])&&u[K].length>0)||Object.keys(p).some(K=>p[K].min!==""||p[K].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:$,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(Tt,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar...",className:"pl-9",value:b,onChange:K=>N(K.target.value)})]}),r.jsxs(re,{variant:"outline",size:"sm",children:[r.jsx(bj,{className:"mr-2 h-4 w-4"})," Exportar"]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(Bt,{className:"table-fixed",style:{width:E},children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(qi,{label:"Fecha",field:"fecha",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="fecha",filterValue:f.fecha,onFilterChange:A,dateTree:U,selectedValues:u.fecha,onTreeToggle:G,width:k.fecha,onResize:P}),r.jsx(qi,{label:"Documento",field:"documento",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="documento",filterValue:f.documento,onFilterChange:A,width:k.documento,onResize:P}),r.jsx(qi,{label:"Proveedor",field:"proveedor",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="proveedor",filterValue:f.proveedor,onFilterChange:A,uniqueValues:M("proveedor"),selectedValues:u.proveedor,onValueToggle:z,width:k.proveedor,onResize:P}),r.jsx(qi,{label:"Moneda Orig",field:"monedaOriginal",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="monedaOriginal",filterValue:f.monedaOriginal,onFilterChange:A,uniqueValues:M("monedaOriginal"),selectedValues:u.monedaOriginal,onValueToggle:z,width:k.monedaOriginal,onResize:P}),r.jsx(qi,{label:"Monto Orig",field:"montoOriginal",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="montoOriginal",numericValue:p.montoOriginal,onNumericFilterChange:_,width:k.montoOriginal,onResize:P,className:"text-right"}),r.jsx(qi,{label:"Monto DOP",field:"montoDOP",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="montoDOP",numericValue:p.montoDOP,onNumericFilterChange:_,width:k.montoDOP,onResize:P,className:"text-right bg-blue-50/50 text-blue-800"}),r.jsx(qi,{label:"Monto USD",field:"montoUSD",sortConfig:l,onSort:C,onFilter:O,showFilter:j==="montoUSD",numericValue:p.montoUSD,onNumericFilterChange:_,width:k.montoUSD,onResize:P,className:"text-right bg-green-50/50 text-green-800"})]})}),r.jsx(Vt,{children:n?r.jsx(Te,{children:r.jsx(H,{colSpan:7,className:"text-center py-8",children:"Cargando..."})}):B.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No hay transacciones."})}):B.map(K=>{var V,F,L;return r.jsxs(Te,{className:"hover:bg-gray-50",children:[r.jsx(H,{children:new Date(K.fecha).toLocaleDateString()}),r.jsx(H,{className:"font-mono text-xs",children:K.documento}),r.jsx(H,{className:"font-medium text-gray-700",children:K.proveedor}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(K.monedaOriginal==="USD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:K.monedaOriginal})}),r.jsxs(H,{style:{width:k.montoOriginal},className:"text-right font-medium",children:[K.monedaOriginal==="USD"?"$":"RD$"," ",(V=K.montoOriginal)==null?void 0:V.toLocaleString(void 0,{minimumFractionDigits:2})]}),r.jsx(H,{style:{width:k.montoDOP},className:"text-right font-bold text-blue-700 bg-blue-50/30",children:(F=K.montoDOP)==null?void 0:F.toLocaleString("es-DO",{minimumFractionDigits:2})}),r.jsx(H,{style:{width:k.montoUSD},className:"text-right font-bold text-green-700 bg-green-50/30",children:(L=K.montoUSD)==null?void 0:L.toLocaleString("en-US",{minimumFractionDigits:2})})]},K.id)})})]})})]})]})},qi=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y="",width:b,onResize:N})=>{const k=n.key===t,D=h!==void 0,E=v!==void 0;l||m&&m.length>0||D&&(f.min!==""||f.max);const P=C=>{C.preventDefault(),C.stopPropagation();const O=C.pageX,A=b,_=G=>{const T=Math.max(50,A+(G.pageX-O));N(t,T)},z=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",z)};return r.jsxs(le,{className:"relative group p-0 ".concat(y),style:b?{width:"".concat(b,"px"),minWidth:"".concat(b,"px"),maxWidth:"".concat(b,"px")}:{},children:[r.jsx("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors ".concat(N?"pr-2":""),onClick:()=>a(t),children:r.jsxs("div",{className:"flex items-center space-x-1 overflow-hidden",children:[r.jsx("span",{className:"font-bold text-gray-700 truncate",children:e}),k?n.direction==="asc"?r.jsx(Gn,{size:14,className:"text-hd-orange"}):r.jsx(Jr,{size:14,className:"text-hd-orange"}):r.jsx(Uu,{size:14,className:"text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),N&&r.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-hd-orange z-10",onMouseDown:P,onClick:C=>C.stopPropagation()}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Gn,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms antiguo":"Ascendente"]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Jr,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms reciente":"Descendente"]})]}),r.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:D?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ge,{type:"number",placeholder:"Min",value:f.min,onChange:C=>h(t,"min",C.target.value),className:"h-8 text-xs font-mono",autoFocus:!0}),r.jsx(ge,{type:"number",placeholder:"Max",value:f.max,onChange:C=>h(t,"max",C.target.value),className:"h-8 text-xs font-mono"})]}):r.jsx(ge,{placeholder:"Buscar...",value:l,onChange:C=>c(t,C.target.value),className:"h-8 text-xs",autoFocus:!0})}),r.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:E?r.jsx(b5,{tree:v,selectedPaths:m,onToggle:(C,O)=>j(t,C,O),allLeafPaths:(()=>{const C=[],O=(A,_)=>{if(!A.children){C.push(_);return}Object.keys(A.children).forEach(z=>O(A.children[z],_?"".concat(_,"/").concat(z):z))};return O(v,""),C})()}):u.length>0?r.jsx("div",{className:"space-y-1",children:u.map(C=>r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group",onClick:()=>p(t,C),children:[r.jsx("input",{type:"checkbox",checked:m.includes(C),readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs text-gray-600 truncate",children:C})]},C))}):null}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border-t border-gray-100",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px]",onClick:()=>s(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] text-hd-orange",onClick:()=>{D?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(E?m.forEach(C=>j(t,C,!0)):m.forEach(C=>p(t,C))))},children:"Limpiar"})]})]})]})},b5=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s="",allLeafPaths:o=[]})=>{const[l,c]=x.useState(!0),f=Object.keys(e.children||{}).sort((u,m)=>m.localeCompare(u)),h=(u,m)=>{const p=[],v=(j,y)=>{if(!j.children){p.push(y);return}Object.keys(j.children).forEach(b=>v(j.children[b],"".concat(y,"/").concat(b)))};return v(u,m),p};return r.jsx("div",{className:a>0?"ml-4 pt-1":"",children:f.map(u=>{const m=s?"".concat(s,"/").concat(u):u,p=e.children[u],v=!p.children,j=v?[m]:h(p,m),y=j.every(N=>t.includes(N)),b=j.some(N=>t.includes(N));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-50 rounded cursor-pointer group",onClick:()=>n(m,y),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",onClick:N=>{N.stopPropagation(),c(!l)},children:!v&&(l?r.jsx(Jr,{size:10}):r.jsx(ArrowRight,{size:10}))}),r.jsx("input",{type:"checkbox",checked:y,ref:N=>{N&&(N.indeterminate=b&&!y)},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",onClick:N=>N.stopPropagation()}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-700 select-none",children:u})]}),l&&!v&&r.jsx(b5,{tree:p,selectedPaths:t,onToggle:n,depth:a+1,path:m})]},u)})})},c7=()=>{const{id:e}=xo(),[t,n]=x.useState(null),[a,s]=x.useState(!0);if(x.useEffect(()=>{e&&(async()=>{try{const f=await ob(e);n(f)}catch(f){console.error("Error loading purchase for print:",f)}finally{s(!1)}})()},[e]),a)return r.jsx("div",{className:"p-8 text-center",children:"Cargando documento..."});if(!t)return r.jsx("div",{className:"p-8 text-center text-red-600",children:"No se encontr el documento."});const o=(c,f="DOP")=>new Intl.NumberFormat("es-DO",{style:"currency",currency:f}).format(c),l=c=>{switch(c){case"OrdenCompra":return"ORDEN DE COMPRA";case"Recepcion":return"RECEPCIN DE MERCANCA";case"Factura":return"FACTURA DE COMPRA";default:return"DOCUMENTO DE COMPRA"}};return r.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-8 print:p-0 text-gray-900 font-sans",children:[r.jsx("div",{className:"mb-6 flex justify-end print:hidden",children:r.jsx("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 font-medium",children:" Imprimir Documento"})}),r.jsxs("div",{className:"border-b-2 border-gray-800 pb-4 mb-6 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:l(t.tipoDocumento)}),r.jsx("p",{className:"text-lg text-gray-600 font-medium mt-1",children:t.numeroCompra}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[r.jsxs("p",{children:["Estado: ",r.jsx("span",{className:"font-semibold uppercase",children:t.estado})]}),t.documentoReferenciaNumero&&r.jsxs("p",{children:["Ref: ",t.documentoReferenciaNumero]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"CRONO POS"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Av. Principal #123"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Santo Domingo, SD"}),r.jsx("p",{className:"text-sm text-gray-600",children:"RNC: 1-01-00000-0"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Tel: (809) 555-0123"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Proveedor"}),r.jsx("p",{className:"font-bold text-lg",children:t.proveedorNombre}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ID: ",t.proveedorId]})]}),r.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Detalles"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsx("div",{className:"text-gray-600",children:"Fecha Emisin:"}),r.jsx("div",{className:"font-medium text-right",children:new Date(t.fechaCompra).toLocaleDateString()}),r.jsx("div",{className:"text-gray-600",children:"Trminos Pago:"}),r.jsx("div",{className:"font-medium text-right",children:t.terminosPago||"Contado"}),r.jsx("div",{className:"text-gray-600",children:"Referencia Prov:"}),r.jsx("div",{className:"font-medium text-right",children:t.referenciaProveedor||"-"}),r.jsx("div",{className:"text-gray-600",children:"Moneda:"}),r.jsx("div",{className:"font-medium text-right",children:t.monedaCodigo||"DOP"})]})]})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-gray-800",children:[r.jsx("th",{className:"py-2 text-left font-bold text-sm text-gray-700",children:"CDIGO"}),r.jsx("th",{className:"py-2 text-left font-bold text-sm text-gray-700",children:"DESCRIPCIN"}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"CANT."}),r.jsx("th",{className:"py-2 text-center font-bold text-sm text-gray-700",children:"U.M."}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"PRECIO"}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"TOTAL"})]})}),r.jsx("tbody",{children:t.detalles.map((c,f)=>r.jsxs("tr",{className:"border-b border-gray-200 text-sm",children:[r.jsx("td",{className:"py-2 font-mono text-gray-600",children:c.numeroArticulo}),r.jsx("td",{className:"py-2",children:c.descripcion}),r.jsx("td",{className:"py-2 text-right font-medium",children:c.cantidad}),r.jsx("td",{className:"py-2 text-center text-gray-500 text-xs",children:c.unidadMedida}),r.jsx("td",{className:"py-2 text-right",children:o(c.costoUnitario)}),r.jsx("td",{className:"py-2 text-right font-bold",children:o(c.totalLinea)})]},f))})]})}),r.jsx("div",{className:"flex justify-end mb-12",children:r.jsxs("div",{className:"w-64",children:[r.jsxs("div",{className:"flex justify-between py-1 text-gray-600 text-sm",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:o(t.subtotal)})]}),r.jsxs("div",{className:"flex justify-between py-1 text-gray-600 text-sm",children:[r.jsx("span",{children:"Impuestos:"}),r.jsx("span",{children:o(t.impuestos)})]}),r.jsx("div",{className:"border-t border-gray-400 my-2"}),r.jsxs("div",{className:"flex justify-between py-1 text-xl font-bold text-gray-900",children:[r.jsx("span",{children:"TOTAL:"}),r.jsx("span",{children:o(t.total)})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-20 pt-12 mt-12 border-t border-gray-100 print:mt-24",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Autorizado Por"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Recibido Conforme"})]})]})]})},d7=()=>{const[e,t]=x.useState({ventasHoy:12500,ventasMes:458e3,comprasMes:215e3,inventarioValor:125e4,topProductos:[{nombre:"Cemento Gris 42.5kg",cantidad:450,total:225e3},{nombre:"Varilla Corrugada 3/8",cantidad:1200,total:36e4},{nombre:'Block 6"',cantidad:3e3,total:105e3},{nombre:"Pintura Blanca 5gal",cantidad:85,total:34e4},{nombre:"Arena Lavada (m3)",cantidad:120,total:18e4}],ventasPorDia:[{dia:"Lun",valor:45e3},{dia:"Mar",valor:52e3},{dia:"Mie",valor:38e3},{dia:"Jue",valor:65e3},{dia:"Vie",valor:89e3},{dia:"Sab",valor:95e3},{dia:"Dom",valor:25e3}]}),[n,a]=x.useState([]),[s,o]=x.useState(!0);x.useEffect(()=>{setTimeout(()=>{const B=Array.from({length:50},(U,$)=>({id:$+1,fecha:new Date(2025,Math.floor(Math.random()*12),Math.floor(Math.random()*28)+1).toISOString(),tipo:Math.random()>.5?"Venta":"Compra",entidad:Math.random()>.5?"Cliente ".concat($):"Proveedor ".concat($),monto:Math.floor(Math.random()*5e4)+1e3,estado:Math.random()>.8?"Pendiente":"Completado"}));a(B),o(!1)},1e3)},[]);const l=B=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:0}).format(B),[c,f]=x.useState({key:"fecha",direction:"desc"}),[h,u]=x.useState({}),[m,p]=x.useState({}),[v,j]=x.useState({}),[y,b]=x.useState(null),[N,k]=x.useState(""),D=B=>{let U="asc";c.key===B&&c.direction==="asc"&&(U="desc"),f({key:B,direction:U})},E=(B,U)=>{U.stopPropagation(),b(y===B?null:B)},P=(B,U)=>{u($=>({...$,[B]:U}))},C=(B,U,$)=>{j(K=>({...K,[B]:{...K[B]||{min:"",max:""},[U]:$}}))},O=(B,U)=>{p($=>{const K=$[B]||[];return K.includes(U)?{...$,[B]:K.filter(V=>V!==U)}:{...$,[B]:[...K,U]}})},A=(B,U,$)=>{p(K=>{var Pe;let F=[...K[B]||[]];const L=_(),X=(Ge,he)=>{if(!Ge.children){Y.push(he);return}Object.keys(Ge.children).forEach(ie=>{X(Ge.children[ie],he?"".concat(he,"/").concat(ie):ie)})},Y=[];if(U==="")return $?{...K,[B]:[]}:(X(L,""),{...K,[B]:Y});const me=U.split("/").filter(Boolean);let xe=L;for(const Ge of me)if(xe=(Pe=xe==null?void 0:xe.children)==null?void 0:Pe[Ge],!xe)break;if(xe){const Ge=[],he=(ie,Ce)=>{if(!ie.children){Ge.push(Ce);return}Object.keys(ie.children).forEach(se=>{he(ie.children[se],"".concat(Ce,"/").concat(se))})};he(xe,U),$?F=F.filter(ie=>!Ge.includes(ie)):Ge.forEach(ie=>{F.includes(ie)||F.push(ie)})}return{...K,[B]:F}})},_=()=>{const B={children:{}};return n.forEach(U=>{const $=new Date(U.fecha),K=String($.getFullYear()),V=$.toLocaleDateString("es-DO",{month:"long"}),F=String($.getDate());B.children[K]||(B.children[K]={children:{}}),B.children[K].children[V]||(B.children[K].children[V]={children:{}}),B.children[K].children[V].children[F]||(B.children[K].children[V].children[F]={count:0}),B.children[K].children[V].children[F].count++}),B},z=B=>{const U=n.map($=>String($[B]||""));return[...new Set(U)].sort()},G=B=>B?new Date(B).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",M=(()=>{let B=[...n];return N&&(B=B.filter(U=>Object.keys(U).some($=>($==="fecha"?G(U[$]):String(U[$])).toLowerCase().includes(N.toLowerCase())))),Object.keys(h).forEach(U=>{h[U]&&(B=B.filter($=>{if(U==="fecha"){const K=new Date($[U]);return"".concat(K.getFullYear()," ").concat(K.toLocaleDateString("es-DO",{month:"long"})," ").concat(K.getDate()).toLowerCase().includes(h[U].toLowerCase())}return String($[U]||"").toLowerCase().includes(h[U].toLowerCase())}))}),Object.keys(m).forEach(U=>{m[U]&&m[U].length>0&&(B=B.filter($=>{if(U==="fecha"){const K=new Date($[U]),V="".concat(K.getFullYear(),"/").concat(K.toLocaleDateString("es-DO",{month:"long"}),"/").concat(K.getDate());return m[U].includes(V)}return m[U].includes(String($[U]))}))}),Object.keys(v).forEach(U=>{const{min:$,max:K}=v[U];$!==""&&(B=B.filter(V=>(V[U]||0)>=parseFloat($))),K!==""&&(B=B.filter(V=>(V[U]||0)<=parseFloat(K)))}),c.key&&B.sort((U,$)=>{const K=U[c.key],V=$[c.key];return K<V?c.direction==="asc"?-1:1:K>V?c.direction==="asc"?1:-1:0}),B})(),W=_(),Z=()=>{u({}),p({}),j({}),k("")};return r.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Manager Dashboard"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Visin general del rendimiento del negocio."})]}),r.jsxs("div",{className:"flex bg-white rounded-lg border p-1 shadow-sm",children:[r.jsx("button",{className:"px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded",children:"Hoy"}),r.jsx("button",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-900 rounded shadow-sm",children:"Este Mes"}),r.jsx("button",{className:"px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded",children:"Ao"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(_h,{title:"Ventas del Mes",value:l(e.ventasMes),icon:Xr,trend:"+12.5%",trendUp:!0,color:"green"}),r.jsx(_h,{title:"Compras del Mes",value:l(e.comprasMes),icon:io,trend:"+5.2%",trendUp:!0,color:"blue"}),r.jsx(_h,{title:"Valor Inventario",value:l(e.inventarioValor),icon:Rn,trend:"-2.1%",trendUp:!1,color:"orange"}),r.jsx(_h,{title:"Nuevos Clientes",value:"24",icon:zr,trend:"+4",trendUp:!0,color:"purple"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(We,{className:"lg:col-span-2",children:[r.jsx(vt,{children:r.jsx(bt,{children:"Comportamiento de Ventas (Semana Actual)"})}),r.jsx(Mt,{children:r.jsx("div",{className:"h-64 flex items-end justify-between space-x-2 pt-6",children:e.ventasPorDia.map((B,U)=>{const $=B.valor/1e5*100;return r.jsxs("div",{className:"flex flex-col items-center flex-1 group relative",children:[r.jsx("div",{className:"absolute bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-bold bg-gray-800 text-white px-2 py-1 rounded",children:l(B.valor)}),r.jsx("div",{className:"w-full bg-blue-500 rounded-t-md hover:bg-blue-600 transition-all duration-300",style:{height:"".concat($,"%"),opacity:.7+U*.05}}),r.jsx("span",{className:"text-xs font-medium text-gray-500 mt-2",children:B.dia})]},U)})})})]}),r.jsxs(We,{children:[r.jsx(vt,{children:r.jsx(bt,{children:"Top Productos"})}),r.jsx(Mt,{children:r.jsx("div",{className:"space-y-4",children:e.topProductos.map((B,U)=>r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 last:border-0 pb-3 last:pb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-500 text-xs",children:U+1}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate max-w-[150px]",children:B.nombre}),r.jsxs("p",{className:"text-xs text-gray-500",children:[B.cantidad," unidades"]})]})]}),r.jsx("span",{className:"text-sm font-bold text-gray-700",children:l(B.total)})]},U))})})]})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(bt,{children:"Transacciones Recientes"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(Object.keys(h).length>0||Object.keys(m).some(B=>Array.isArray(m[B])&&m[B].length>0)||Object.keys(v).some(B=>v[B].min!==""||v[B].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:Z,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(Tt,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar transaccin...",className:"pl-9",value:N,onChange:B=>k(B.target.value)})]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[r.jsx(Wd,{label:"Fecha",field:"fecha",sortConfig:c,onSort:D,onFilter:E,showFilter:y==="fecha",filterValue:h.fecha,onFilterChange:P,dateTree:W,selectedValues:m.fecha,onTreeToggle:A}),r.jsx(Wd,{label:"Tipo",field:"tipo",sortConfig:c,onSort:D,onFilter:E,showFilter:y==="tipo",filterValue:h.tipo,onFilterChange:P,uniqueValues:z("tipo"),selectedValues:m.tipo,onValueToggle:O}),r.jsx(Wd,{label:"Entidad",field:"entidad",sortConfig:c,onSort:D,onFilter:E,showFilter:y==="entidad",filterValue:h.entidad,onFilterChange:P,uniqueValues:z("entidad"),selectedValues:m.entidad,onValueToggle:O}),r.jsx(Wd,{label:"Monto",field:"monto",sortConfig:c,onSort:D,onFilter:E,showFilter:y==="monto",numericValue:v.monto,onNumericFilterChange:C,className:"text-right"}),r.jsx(Wd,{label:"Estado",field:"estado",sortConfig:c,onSort:D,onFilter:E,showFilter:y==="estado",filterValue:h.estado,onFilterChange:P,uniqueValues:z("estado"),selectedValues:m.estado,onValueToggle:O})]})}),r.jsx(Vt,{children:s?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8",children:"Cargando..."})}):M.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No se encontraron registros."})}):M.map(B=>r.jsxs(Te,{className:"hover:bg-gray-50",children:[r.jsx(H,{className:"text-gray-600",children:new Date(B.fecha).toLocaleDateString("es-DO")}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(B.tipo==="Venta"?"bg-green-50 text-green-700":"bg-blue-50 text-blue-700"),children:B.tipo})}),r.jsx(H,{className:"font-medium text-gray-900",children:B.entidad}),r.jsx(H,{className:"text-right font-medium",children:l(B.monto)}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(B.estado==="Completado"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:B.estado})})]},B.id))})]})})]})]})},_h=({title:e,value:t,icon:n,trend:a,trendUp:s,color:o})=>{const l={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600"};return r.jsx(We,{className:"transform transition-all hover:-translate-y-1 duration-200 shadow-sm hover:shadow-md",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:t})]}),r.jsx("div",{className:"p-2 rounded-lg ".concat(l[o]),children:r.jsx(n,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[s?r.jsx(xu,{className:"h-4 w-4 text-green-500 mr-1"}):r.jsx(VD,{className:"h-4 w-4 text-red-500 mr-1"}),r.jsx("span",{className:s?"text-green-500 font-medium":"text-red-500 font-medium",children:a}),r.jsx("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]})})},Wd=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y=""})=>{const b=n.key===t,N=h!==void 0,k=v!==void 0,D=l||m&&m.length>0||N&&(f.min!==""||f.max!=="");return r.jsxs(le,{className:"relative group p-0 ".concat(y),children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>a(t),children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"font-bold text-gray-700",children:e}),b?n.direction==="asc"?r.jsx(Gn,{size:14,className:"text-hd-orange"}):r.jsx(Jr,{size:14,className:"text-hd-orange"}):r.jsx(Uu,{size:14,className:"text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s&&r.jsx("button",{onClick:E=>s(t,E),className:"p-1 rounded-sm hover:bg-gray-300 transition-colors ".concat(D?"text-hd-orange":"text-gray-400"),children:r.jsx(Vu,{size:14,fill:D?"currentColor":"none"})})]}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Gn,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms antiguo":"Ascendente"]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Jr,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms reciente":"Descendente"]})]}),r.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:N?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ge,{type:"number",placeholder:"Min",value:f.min,onChange:E=>h(t,"min",E.target.value),className:"h-8 text-xs font-mono",autoFocus:!0}),r.jsx(ge,{type:"number",placeholder:"Max",value:f.max,onChange:E=>h(t,"max",E.target.value),className:"h-8 text-xs font-mono"})]}):r.jsx(ge,{placeholder:"Buscar...",value:l,onChange:E=>c(t,E.target.value),className:"h-8 text-xs",autoFocus:!0})}),r.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:k?r.jsx(j5,{tree:v,selectedPaths:m,onToggle:(E,P)=>j(t,E,P),allLeafPaths:(()=>{const E=[],P=(C,O)=>{if(!C.children){E.push(O);return}Object.keys(C.children).forEach(A=>P(C.children[A],O?"".concat(O,"/").concat(A):A))};return P(v,""),E})()}):u.length>0?r.jsx("div",{className:"space-y-1",children:u.map(E=>r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group",onClick:()=>p(t,E),children:[r.jsx("input",{type:"checkbox",checked:m.includes(E),readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs text-gray-600 truncate",children:E})]},E))}):null}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border-t border-gray-100",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px]",onClick:()=>s(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] text-hd-orange",onClick:()=>{N?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(k?m.forEach(E=>j(t,E,!0)):m.forEach(E=>p(t,E))))},children:"Limpiar"})]})]})]})},j5=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s="",allLeafPaths:o=[]})=>{const[l,c]=x.useState(!0),f=Object.keys(e.children||{}).sort((u,m)=>m.localeCompare(u)),h=(u,m)=>{const p=[],v=(j,y)=>{if(!j.children){p.push(y);return}Object.keys(j.children).forEach(b=>v(j.children[b],"".concat(y,"/").concat(b)))};return v(u,m),p};return r.jsx("div",{className:a>0?"ml-4 pt-1":"",children:f.map(u=>{const m=s?"".concat(s,"/").concat(u):u,p=e.children[u],v=!p.children,j=v?[m]:h(p,m),y=j.every(N=>t.includes(N)),b=j.some(N=>t.includes(N));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-50 rounded cursor-pointer group",onClick:()=>n(m,y),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",onClick:N=>{N.stopPropagation(),c(!l)},children:!v&&(l?r.jsx(Jr,{size:10}):r.jsx(ArrowRight,{size:10}))}),r.jsx("input",{type:"checkbox",checked:y,ref:N=>{N&&(N.indeterminate=b&&!y)},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",onClick:N=>N.stopPropagation()}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-700 select-none",children:u})]}),l&&!v&&r.jsx(j5,{tree:p,selectedPaths:t,onToggle:n,depth:a+1,path:m})]},u)})})},Kd="http://localhost:5006/api",u7=({onClose:e,onSuccess:t,initialProveedorId:n})=>{var D,E;const[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(!1),[m,p]=x.useState({proveedorId:n||"",tipo:"Credito",fecha:new Date().toISOString().split("T")[0],monedaId:"",tasaCambio:1,monto:0,referencia:"",comentario:"",allocations:{}});x.useEffect(()=>{v()},[]),x.useEffect(()=>{m.proveedorId&&j(m.proveedorId)},[m.proveedorId]);const v=async()=>{try{const[P,C]=await Promise.all([fetch("".concat(Kd,"/Proveedores")),fetch("".concat(Kd,"/Monedas"))]);if(P.ok&&s(await P.json()),C.ok){const O=await C.json();l(O);const A=O.find(_=>_.esFuncional);A&&!m.monedaId&&p(_=>({..._,monedaId:A.id}))}}catch(P){console.error("Error loading initial data:",P)}},j=async P=>{try{const C=await fetch("".concat(Kd,"/Pagos/FacturasPendientes/").concat(P));C.ok&&f(await C.json())}catch(C){console.error("Error loading invoices:",C)}},y=async(P,C)=>{if(P==="monedaId"){const O=parseInt(C),A=o.find(z=>z.id===O);let _=1;if(A&&!A.esFuncional)try{const z=new Date().toISOString().split("T")[0],G=await fetch("".concat(Kd,"/Monedas/tasas?monedaId=").concat(O,"&fecha=").concat(z));G.ok&&(_=(await G.json()).tasa||1)}catch(z){console.error("Error fetching rate:",z)}p(z=>({...z,monedaId:C,tasaCambio:_,allocations:{},monto:0}))}else p(O=>({...O,[P]:C}))},b=(P,C,O)=>{let A=parseFloat(C)||0;m.tipo==="Credito"&&A>O&&(A=O),A<0&&(A=0);const _={...m.allocations,[P]:A};A===0&&delete _[P];const z=()=>{let G=0;return Object.keys(_).forEach(T=>{G+=_[T]}),G};p(G=>({...G,allocations:_,monto:z()}))},N=c.filter(P=>P.monedaId===parseInt(m.monedaId)),k=async P=>{if(P.preventDefault(),m.monto<=0)return alert("El monto debe ser mayor a 0");if(!m.referencia)return alert("Debe ingresar una referencia");u(!0);try{const C={proveedorId:parseInt(m.proveedorId),tipo:m.tipo,monedaId:parseInt(m.monedaId),tasaCambio:parseFloat(m.tasaCambio),monto:m.monto,referencia:m.referencia,comentario:m.comentario,allocations:Object.keys(m.allocations).map(A=>{const _=parseInt(A),z=m.allocations[A];var G=z;const T=o.find(M=>M.id===parseInt(m.monedaId));return T!=null&&T.esFuncional||(G=z*m.tasaCambio),{invoiceId:_,monto:z,montoFuncional:G}})},O=await fetch("".concat(Kd,"/Notas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(O.ok)t(),e();else{const A=await O.json();alert(A.message||"Error al crear la nota")}}catch(C){console.error("Error creating note:",C),alert("Error de conexin")}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-4 flex justify-between items-center text-white ".concat(m.tipo==="Credito"?"bg-blue-600":"bg-red-600"),children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[r.jsx(Pr,{className:"mr-2",size:20}),"Nueva Nota de ",m.tipo]}),r.jsx("button",{onClick:e,className:"hover:opacity-80 p-1 rounded transition-colors",children:r.jsx(Tt,{size:20})})]}),r.jsxs("form",{onSubmit:k,className:"p-6 space-y-4 max-h-[85vh] overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor"}),r.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:ring-blue-500 focus:border-blue-500",value:m.proveedorId,onChange:P=>y("proveedorId",P.target.value),required:!0,disabled:!!n,children:[r.jsx("option",{value:"",children:"Seleccione un proveedor"}),a.map(P=>r.jsx("option",{value:P.id,children:P.razonSocial},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Nota"}),r.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-md",children:[r.jsx("button",{type:"button",className:"flex-1 py-1 text-sm font-medium rounded ".concat(m.tipo==="Credito"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),onClick:()=>p(P=>({...P,tipo:"Credito"})),children:"Crdito (-)"}),r.jsx("button",{type:"button",className:"flex-1 py-1 text-sm font-medium rounded ".concat(m.tipo==="Debito"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"),onClick:()=>p(P=>({...P,tipo:"Debito"})),children:"Dbito (+)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia / Factura"}),r.jsx(ge,{placeholder:"NC-001",value:m.referencia,onChange:P=>y("referencia",P.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),r.jsx("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:ring-blue-500 focus:border-blue-500",value:m.monedaId,onChange:P=>y("monedaId",P.target.value),children:o.map(P=>r.jsx("option",{value:P.id,children:P.codigo},P.id))})]}),((D=o.find(P=>P.id===parseInt(m.monedaId)))==null?void 0:D.esFuncional)===!1&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa"}),r.jsx(ge,{type:"number",step:"0.01",value:m.tasaCambio,onChange:P=>y("tasaCambio",P.target.value)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentario"}),r.jsx(ge,{placeholder:"Motivo de la nota...",value:m.comentario,onChange:P=>y("comentario",P.target.value)})]}),r.jsxs("div",{className:"border rounded-md overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b flex justify-between items-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:[r.jsx("span",{children:"Facturas Pendientes"}),r.jsx("span",{children:"Monto a Aplicar"})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto divide-y",children:N.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm italic",children:"No hay facturas pendientes en esta moneda para este proveedor."}):N.map(P=>r.jsxs("div",{className:"p-3 flex justify-between items-center hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-gray-800",children:P.numeroCompra}),r.jsxs("span",{className:"text-[10px] text-gray-500",children:["Saldo: ",P.monedaSimbolo," ",P.saldo.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ge,{type:"number",className:"w-32 h-8 text-right text-sm",placeholder:"0.00",value:m.allocations[P.id]||"",onChange:C=>b(P.id,C.target.value,P.saldo)}),r.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"h-8 px-2 text-[10px] text-blue-600 hover:text-blue-700 font-bold",onClick:()=>b(P.id,P.saldo,P.saldo),children:"TODO"})]})]},P.id))})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex justify-between items-center border border-gray-200",children:[r.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total de la Nota:"}),r.jsxs("div",{className:"text-xl font-bold ".concat(m.tipo==="Credito"?"text-blue-600":"text-red-600"),children:[((E=o.find(P=>P.id===parseInt(m.monedaId)))==null?void 0:E.simbolo)||"$"," ",m.monto.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:e,disabled:h,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"".concat(m.tipo==="Credito"?"bg-blue-600 hover:bg-blue-700":"bg-red-600 hover:bg-red-700"," text-white shadow-md"),disabled:h||m.monto<=0,children:[h?r.jsx(na,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Registrar Nota"]})]})]})]})})},H0="http://localhost:5006/api",f7=({proveedor:e,proveedorId:t})=>{const[n,a]=x.useState("pendientes"),[s,o]=x.useState({pendientes:[],historial:[],pagos:[],notas:[]}),[l,c]=x.useState(!0),[f,h]=x.useState(!1);x.useEffect(()=>{t&&u()},[t]);const u=async()=>{c(!0);try{const y=await fetch("".concat(H0,"/EstadoCuenta/").concat(t));if(y.ok){const b=await y.json();o({pendientes:b.pendientes||b.Pendientes||[],historial:b.historial||b.Historial||[],pagos:b.pagos||b.Pagos||[],notas:b.notas||b.Notas||[]})}}catch(y){console.error(y)}finally{c(!1)}};if(l)return r.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"Cargando detalles de cuenta..."});const m=y=>y?new Date(y).toLocaleDateString():"-",p=y=>y==null?"0.00":y.toLocaleString("es-DO",{minimumFractionDigits:2}),v=async y=>{if(confirm("Ests seguro de que deseas ANULAR este pago? Esta accin reversar los saldos de las facturas afectadas."))try{const b=await fetch("".concat(H0,"/Pagos/").concat(y,"/anular"),{method:"PUT",headers:{"Content-Type":"application/json"}});if(b.ok)alert("Pago anulado exitosamente"),u();else{const N=await b.json();alert("Error al anular: "+(N.message||"Error desconocido"))}}catch(b){console.error(b),alert("Error de conexin")}},j=async y=>{if(confirm("Ests seguro de que deseas ANULAR esta nota? Esta accin reversar los ajustes de saldo en las facturas."))try{const b=await fetch("".concat(H0,"/Notas/").concat(y,"/anular"),{method:"PUT",headers:{"Content-Type":"application/json"}});if(b.ok)alert("Nota anulada exitosamente"),u();else{const N=await b.json();alert("Error al anular: "+(N.message||"Error desconocido"))}}catch(b){console.error(b),alert("Error de conexin")}};return r.jsxs("div",{className:"p-4 bg-gray-50/80 animate-in slide-in-from-top-2 duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200",children:[r.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[r.jsxs("button",{onClick:()=>a("pendientes"),className:"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ".concat(n==="pendientes"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Pagar (",s.pendientes.length,")"]}),r.jsx("button",{onClick:()=>a("historial"),className:"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ".concat(n==="historial"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Historial Facturas"}),r.jsx("button",{onClick:()=>a("pagos"),className:"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ".concat(n==="pagos"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Pagos"}),r.jsxs("button",{onClick:()=>a("notas"),className:"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ".concat(n==="notas"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Notas (",s.notas.length,")"]})]}),n==="notas"&&r.jsxs(re,{size:"xs",className:"mb-2 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>h(!0),children:[r.jsx(Lt,{size:14,className:"mr-1"})," Nueva Nota"]})]}),r.jsxs("div",{className:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden",children:[n==="pendientes"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-red-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-red-800",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-red-800",children:"Nmero de Documento"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800",children:"Pagado"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800",children:"Pendiente"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800 text-[10px]",children:"DOP Equiv."})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:s.pendientes.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-400 italic",children:"Todo al da! No hay facturas pendientes."})}):s.pendientes.map(y=>r.jsxs("tr",{className:"hover:bg-red-50/20",children:[r.jsx("td",{className:"px-3 py-2 text-gray-600",children:m(y.FechaCompra)}),r.jsx("td",{className:"px-3 py-2 font-bold text-gray-800",children:y.ReferenciaProveedor||y.NumeroCompra}),r.jsxs("td",{className:"px-3 py-2 text-right font-medium",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Total)]}),r.jsxs("td",{className:"px-3 py-2 text-right text-green-600",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Total-(y.Saldo||0))]}),r.jsxs("td",{className:"px-3 py-2 text-right font-bold text-red-600",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Saldo)]}),r.jsxs("td",{className:"px-3 py-2 text-right text-[10px] text-gray-400 italic",children:["RD$ ",p((y.Saldo||0)*(y.TasaCambio||y.tasaCambio||1))]})]},y.Id))})]}),n==="historial"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Nmero de Documento"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Estado"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.historial.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:m(y.FechaCompra)}),r.jsx("td",{className:"px-3 py-2 font-mono text-gray-600",children:y.ReferenciaProveedor||y.NumeroCompra}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] ".concat(y.Estado==="Completado"?"bg-green-100 text-green-800":y.Estado==="Anulado"?"bg-gray-100 text-gray-500":"bg-yellow-100 text-yellow-800"),children:y.Estado||"Abierta"})}),r.jsxs("td",{className:"px-3 py-2 text-right font-medium",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Total)]})]},y.Id))})]}),n==="pagos"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-blue-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Referencia"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Facturas Pagadas"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Mtodo"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-blue-800",children:"Monto"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-blue-800",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.pagos.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-400 italic",children:"No hay pagos registrados."})}):s.pagos.map(y=>{const b=(y.estado||y.Estado)==="Anulado";return r.jsxs("tr",{className:"hover:bg-blue-50/20 ".concat(b?"opacity-50 line-through bg-gray-50":""),children:[r.jsx("td",{className:"px-3 py-2",children:m(y.fecha||y.Fecha)}),r.jsx("td",{className:"px-3 py-2 font-mono text-blue-600",children:y.referencia||y.Referencia}),r.jsx("td",{className:"px-3 py-2",children:(y.facturasAfectadas||y.FacturasAfectadas)&&(y.facturasAfectadas||y.FacturasAfectadas).length>0?r.jsx("div",{className:"flex flex-col space-y-1",children:(y.facturasAfectadas||y.FacturasAfectadas).map((N,k)=>r.jsxs("span",{className:"bg-blue-100 text-blue-800 text-[10px] px-1.5 py-0.5 rounded w-fit",children:[N.Numero||N.numero," ",r.jsxs("span",{className:"text-blue-500 opacity-75 ml-1",children:["($",p(N.Monto||N.monto),")"]})]},k))}):r.jsx("span",{className:"text-gray-400 italic text-[10px]",children:"Sin detalle"})}),r.jsx("td",{className:"px-3 py-2",children:y.metodo||y.Metodo}),r.jsxs("td",{className:"px-3 py-2 text-right font-bold text-gray-800 text-nowrap",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.monto||y.Monto)]}),r.jsxs("td",{className:"px-3 py-2 text-center",children:[!b&&r.jsx("button",{onClick:()=>v(y.id||y.Id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Anular Pago",children:r.jsx(RC,{size:14})}),b&&r.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"ANULADO"})]})]},y.id||y.Id)})})]}),n==="notas"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-indigo-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Tipo"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Referencia"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Facturas Afectadas"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-indigo-800",children:"Monto"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-indigo-800",children:"Estado"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-indigo-800",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.notas.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-400 italic",children:"No hay notas registradas."})}):s.notas.map(y=>{var N;const b=(y.estado||y.Estado)==="Anulada";return r.jsxs("tr",{className:"hover:bg-indigo-50/20 ".concat(b?"opacity-50 line-through":""),children:[r.jsx("td",{className:"px-3 py-2",children:m(y.fecha||y.Fecha)}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:"font-bold ".concat(y.tipo==="Credito"?"text-blue-600":"text-red-600"),children:y.tipo==="Credito"?"CRDITO":"DBITO"})}),r.jsx("td",{className:"px-3 py-2 font-mono",children:y.referencia||y.Referencia}),r.jsx("td",{className:"px-3 py-2",children:(N=y.facturasAfectadas||y.FacturasAfectadas)==null?void 0:N.map((k,D)=>r.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-[10px] px-1.5 py-0.5 rounded mr-1",children:k.Numero||k.numero},D))}),r.jsxs("td",{className:"px-3 py-2 text-right font-bold",children:[y.monedaSimbolo||y.MonedaSimbolo||"RD$"," ",p(y.monto||y.Monto)]}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] ".concat(b?"bg-gray-100 text-gray-500":"bg-green-100 text-green-800"),children:y.estado||"Completada"})}),r.jsx("td",{className:"px-3 py-2 text-center",children:!b&&r.jsx("button",{onClick:()=>j(y.id||y.Id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Anular Nota",children:r.jsx(RC,{size:14})})})]},y.id||y.Id)})})]})]}),r.jsx("div",{className:"mt-2 text-right",children:r.jsx(re,{size:"xs",variant:"outline",className:"text-gray-500",onClick:()=>a("pendientes"),children:"Ver todo..."})}),f&&r.jsx(u7,{initialProveedorId:t,onClose:()=>h(!1),onSuccess:()=>{u(),h(!1)}})]})},Gi="http://localhost:5006/api",h7=()=>{var ne;const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState([]),[l,c]=x.useState({deudaPendiente:0,pagadoMes:0,vencido:0,deudaTotal:0,cantidadFacturas:0}),[f,h]=x.useState({}),[u,m]=x.useState([]),[p,v]=x.useState([]);x.useEffect(()=>{j()},[]);const j=async()=>{try{a(!0);const q=await kj();o(q),await N(),await b(),await y()}catch(q){console.error("Error loading initial data:",q)}finally{a(!1)}},y=async()=>{try{const q=await fetch("".concat(Gi,"/Monedas"));if(q.ok){const Q=await q.json();m(Q)}}catch(q){console.error("Error loading currencies:",q)}},b=async()=>{try{const q=await fetch("".concat(Gi,"/Pagos/DeudaTotal"));if(q.ok){const Q=await q.json();c(be=>({...be,deudaTotal:Q.totalDeuda||Q.TotalDeuda||0,cantidadFacturas:Q.cantidadFacturas||Q.CantidadFacturas||0}));const ve={};Q.porProveedor.forEach(be=>{const Le=be.proveedorNombre||be.ProveedorNombre,Qe=be.saldoTotal||be.SaldoTotal||0;Le&&(ve[Le]=Qe)}),h(ve)}}catch(q){console.error("Error loading total debt:",q)}},N=async()=>{try{const q=await fetch("".concat(Gi,"/Pagos"));if(q.ok){const Q=await q.json();t(Q);const ve=Q.filter(Le=>Le.estado==="Completado").reduce((Le,Qe)=>Le+Qe.monto,0),be=Q.filter(Le=>Le.estado==="Pendiente").reduce((Le,Qe)=>Le+Qe.monto,0);c(Le=>({...Le,pagadoMes:ve,deudaPendiente:be}))}}catch(q){console.error("Error loading payments:",q)}},k=async q=>{if(!q){v([]);return}try{const Q=await fetch("".concat(Gi,"/Pagos/FacturasPendientes/").concat(q));if(Q.ok){const ve=await Q.json();v(ve)}}catch(Q){console.error("Error loading pending invoices:",Q)}},[D,E]=x.useState({key:"fecha",direction:"desc"}),[P,C]=x.useState({}),[O,A]=x.useState({}),[_,z]=x.useState({}),[G,T]=x.useState(null),[M,W]=x.useState(""),[Z,B]=x.useState(!1),[U,$]=x.useState(new Set),K=q=>{let Q="asc";D.key===q&&D.direction==="asc"&&(Q="desc"),E({key:q,direction:Q})},V=(q,Q)=>{Q&&Q.stopPropagation(),T(G===q?null:q)},F=(q,Q)=>{C(ve=>({...ve,[q]:Q}))},L=(q,Q,ve)=>{z(be=>({...be,[q]:{...be[q]||{min:"",max:""},[Q]:ve}}))},X=(q,Q)=>{A(ve=>{const be=ve[q]||[];return be.includes(Q)?{...ve,[q]:be.filter(Le=>Le!==Q)}:{...ve,[q]:[...be,Q]}})},Y=(q,Q,ve)=>{A(be=>{var qt;let Qe=[...be[q]||[]];const tt=me(),ct=(dt,wr)=>{if(!dt.children){Ft.push(wr);return}Object.keys(dt.children).forEach(er=>{ct(dt.children[er],wr?"".concat(wr,"/").concat(er):er)})},Ft=[];if(Q==="")return ve?{...be,[q]:[]}:(ct(tt,""),{...be,[q]:Ft});const Dt=Q.split("/").filter(Boolean);let Et=tt;for(const dt of Dt)if(Et=(qt=Et==null?void 0:Et.children)==null?void 0:qt[dt],!Et)break;if(Et){const dt=[],wr=(er,la)=>{if(!er.children){dt.push(la);return}Object.keys(er.children).forEach(kn=>{wr(er.children[kn],"".concat(la,"/").concat(kn))})};wr(Et,Q),ve?Qe=Qe.filter(er=>!dt.includes(er)):dt.forEach(er=>{Qe.includes(er)||Qe.push(er)})}return{...be,[q]:Qe}})},me=()=>{const q={children:{}};return e.forEach(Q=>{const ve=new Date(Q.fecha),be=String(ve.getFullYear()),Le=ve.toLocaleDateString("es-DO",{month:"long"}),Qe=String(ve.getDate());q.children[be]||(q.children[be]={children:{}}),q.children[be].children[Le]||(q.children[be].children[Le]={children:{}}),q.children[be].children[Le].children[Qe]||(q.children[be].children[Le].children[Qe]={count:0}),q.children[be].children[Le].children[Qe].count++}),q},xe=q=>{const Q=e.map(ve=>String(ve[q]||""));return[...new Set(Q)].sort()},Pe=q=>q?new Date(q).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",Ge=()=>{C({}),A({}),z({})},ie=(()=>{let q=[...e];return M&&(q=q.filter(Q=>Object.keys(Q).some(ve=>ve==="facturasAfectadas"?!1:(ve==="fecha"?Pe(Q[ve]):String(Q[ve])).toLowerCase().includes(M.toLowerCase())))),Object.keys(P).forEach(Q=>{P[Q]&&(q=q.filter(ve=>{if(Q==="fecha"){const be=new Date(ve[Q]);return"".concat(be.getFullYear()," ").concat(be.toLocaleDateString("es-DO",{month:"long"})," ").concat(be.getDate()).toLowerCase().includes(P[Q].toLowerCase())}return String(ve[Q]||"").toLowerCase().includes(P[Q].toLowerCase())}))}),Object.keys(O).forEach(Q=>{O[Q]&&O[Q].length>0&&(q=q.filter(ve=>{if(Q==="fecha"){const be=new Date(ve[Q]),Le="".concat(be.getFullYear(),"/").concat(be.toLocaleDateString("es-DO",{month:"long"}),"/").concat(be.getDate());return O[Q].includes(Le)}return O[Q].includes(String(ve[Q]))}))}),Object.keys(_).forEach(Q=>{const{min:ve,max:be}=_[Q];ve!==""&&(q=q.filter(Le=>(Le[Q]||0)>=parseFloat(ve))),be!==""&&(q=q.filter(Le=>(Le[Q]||0)<=parseFloat(be)))}),D.key&&q.sort((Q,ve)=>{const be=Q[D.key],Le=ve[D.key];return be<Le?D.direction==="asc"?-1:1:be>Le?D.direction==="asc"?1:-1:0}),q})(),Ce=me(),se=x.useMemo(()=>{if(!Z)return null;const q={};return ie.forEach(Q=>{q[Q.proveedorNombre]||(q[Q.proveedorNombre]={proveedor:Q.proveedorNombre,pagos:[],totalCompletado:0,totalPendiente:0,deudaActual:0}),q[Q.proveedorNombre].pagos.push(Q);const ve=Q.montoFuncional||(Q.monedaCodigo==="DOP"?Q.monto:Q.monto*(Q.tasaCambio||1));Q.estado==="Completado"&&(q[Q.proveedorNombre].totalCompletado+=ve),Q.estado==="Pendiente"&&(q[Q.proveedorNombre].totalPendiente+=ve)}),Object.keys(f).forEach(Q=>{(!M||Q.toLowerCase().includes(M.toLowerCase()))&&(!q[Q]&&f[Q]>0?q[Q]={proveedor:Q,pagos:[],totalCompletado:0,totalPendiente:0,deudaActual:f[Q]}:q[Q]&&(q[Q].deudaActual=f[Q]))}),Object.values(q).sort((Q,ve)=>Q.proveedor.localeCompare(ve.proveedor))},[ie,Z,f]),oe=q=>{const Q=new Set(U);Q.has(q)?Q.delete(q):Q.add(q),$(Q)},[Fe,ze]=x.useState(!1),[De,Ue]=x.useState({proveedorId:"",fecha:new Date().toISOString().split("T")[0],metodo:"Transferencia",monto:0,nota:"",monedaId:"",tasaCambio:1,allocations:{}});x.useEffect(()=>{if(Fe&&u.length>0&&!De.monedaId){const q=u.find(Q=>Q.esFuncional);q&&Ue(Q=>({...Q,monedaId:q.id,tasaCambio:1}))}},[Fe,u]);const Xe=async(q,Q)=>{if(q==="proveedorId")Ue(ve=>({...ve,proveedorId:Q,allocations:{},monto:0})),k(Q);else if(q==="monedaId"){const ve=parseInt(Q),be=u.find(Qe=>Qe.id===ve);let Le=1;if(be&&!be.esFuncional)try{const Qe=new Date().toISOString().split("T")[0],tt=await fetch("".concat(Gi,"/Monedas/tasas?monedaId=").concat(ve,"&fecha=").concat(Qe));tt.ok&&(Le=(await tt.json()).tasa||1)}catch(Qe){console.error("Error fetching rate:",Qe)}Ue(Qe=>({...Qe,monedaId:Q,tasaCambio:Le,allocations:{},monto:0,tasaOficial:Le}))}else Ue(ve=>({...ve,[q]:Q}))},Ze=(q,Q,ve)=>{let be=parseFloat(Q)||0;be>ve&&(be=ve),be<0&&(be=0);const Le={...De.allocations,[q]:be};be===0&&delete Le[q];const Qe=()=>{let tt=0;const ct=parseInt(De.monedaId),Ft=u.find(Dt=>Dt.id===ct);return Object.keys(Le).forEach(Dt=>{const Et=p.find(dt=>dt.id===parseInt(Dt)),qt=Le[Dt];Et&&(Et.monedaId===ct?tt+=qt:Ft!=null&&Ft.esFuncional?tt+=qt*De.tasaCambio:tt+=qt/De.tasaCambio)}),tt};Ue(tt=>({...tt,allocations:Le,monto:Qe()}))},J=(q,Q)=>{Ze(q,Q,Q)},fe=async q=>{if(q.preventDefault(),De.monto<=0)return alert("El monto del pago debe ser mayor a 0");try{const Q={proveedorId:parseInt(De.proveedorId),fecha:De.fecha,metodo:De.metodo,monto:De.monto,nota:De.nota,monedaId:parseInt(De.monedaId),tasaCambio:parseFloat(De.tasaCambio),allocations:Object.keys(De.allocations).map(be=>{const Le=parseInt(be),Qe=p.find(qt=>qt.id===Le),tt=De.allocations[be],ct=u.find(qt=>qt.id===Qe.monedaId),Ft=tt*(Qe.tasaFactura||1);let Dt=tt;ct!=null&&ct.esFuncional||(Dt=tt*De.tasaCambio);const Et=Dt-Ft;return{invoiceId:Le,monto:tt,montoFuncional:Dt,diferenciaCambiaria:Et}})},ve=await fetch("".concat(Gi,"/Pagos"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(ve.ok)ze(!1),Ue({proveedorId:"",fecha:new Date().toISOString().split("T")[0],metodo:"Transferencia",monto:0,nota:"",allocations:{}}),N();else{const be=await ve.json();alert(be.message||"Error al registrar pago")}}catch(Q){console.error("Error creating payment:",Q),alert("Error de conexin")}},[pe,Ie]=x.useState(null),[Oe,_e]=x.useState(null),[Re,ee]=x.useState(""),ye=q=>{Ie(q),ee("")},Me=async q=>{if(q&&q.preventDefault(),!Re&&pe.metodo!=="Efectivo")return alert("Debe ingresar el nmero de referencia");try{const Q=await fetch("".concat(Gi,"/Pagos/").concat(pe.id,"/confirmar"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referencia:Re||"PAGADO"})});if(Q.ok)Ie(null),N();else{const ve=await Q.json();alert(ve.message||"Error al confirmar pago")}}catch(Q){console.error("Error confirming payment:",Q),alert("Error de conexin")}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 relative",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Pagos a Proveedores"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de histrico y nuevos pagos."})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(re,{variant:"outline",className:"".concat(Z?"bg-orange-50 text-hd-orange border-hd-orange":"text-gray-500"),onClick:()=>B(!Z),children:[Z?r.jsx(cl,{size:18,className:"mr-2"}):r.jsx(ja,{size:18,className:"mr-2"}),Z?"Vista Lista":"Agrupar por Proveedor"]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-700 text-white",onClick:()=>ze(!0),children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"})," Nuevo Pago"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(We,{className:"bg-red-50 border-red-100",children:r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-600",children:"Deuda en Pagos Pendientes"}),r.jsxs("p",{className:"text-2xl font-bold text-red-900",children:["RD$ ",l.deudaPendiente.toLocaleString("es-DO",{minimumFractionDigits:2})]})]}),r.jsx("div",{className:"p-2 bg-red-100 rounded-full text-red-600",children:r.jsx(Xr,{size:24})})]})}),r.jsx(We,{className:"bg-blue-50 border-blue-100",children:r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Pagado"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["RD$ ",l.pagadoMes.toLocaleString("es-DO",{minimumFractionDigits:2})]})]}),r.jsx("div",{className:"p-2 bg-blue-100 rounded-full text-blue-600",children:r.jsx(Sc,{size:24})})]})}),r.jsx(We,{className:"bg-hd-black border-hd-orange border-l-4 shadow-md",children:r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-hd-orange uppercase tracking-wider text-[10px]",children:"Deuda Total Consolidada"}),r.jsxs("p",{className:"text-2xl font-bold text-white",children:["RD$ ",l.deudaTotal.toLocaleString("es-DO",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-[10px] text-gray-400",children:[l.cantidadFacturas," Facturas (Valores en Pesos)"]})]}),r.jsx("div",{className:"p-2 bg-hd-orange/20 rounded-full text-hd-orange",children:r.jsx(ja,{size:24})})]})})]}),r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row justify-between items-center pb-4",children:[r.jsx(bt,{children:Z?"Resumen por Proveedor":"Historial de Pagos"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(Object.keys(P).length>0||Object.keys(O).some(q=>Array.isArray(O[q])&&O[q].length>0)||Object.keys(_).some(q=>_[q].min!==""||_[q].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:Ge,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(Tt,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Yt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ge,{placeholder:"Buscar pago...",className:"pl-9",value:M,onChange:q=>W(q.target.value)})]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{children:[Z&&r.jsx(le,{className:"w-10"}),r.jsx(ic,{label:"Fecha",field:"fecha",sortConfig:D,onSort:K,onFilter:V,showFilter:G==="fecha",filterValue:P.fecha,onFilterChange:F,dateTree:Ce,selectedValues:O.fecha,onTreeToggle:Y}),r.jsx(ic,{label:"Referencia",field:"referencia",sortConfig:D,onSort:K,onFilter:V,showFilter:G==="referencia",filterValue:P.referencia,onFilterChange:F,className:"font-mono text-xs"}),r.jsx(ic,{label:"Proveedor",field:"proveedorNombre",sortConfig:D,onSort:K,onFilter:V,showFilter:G==="proveedorNombre",filterValue:P.proveedorNombre,onFilterChange:F,uniqueValues:xe("proveedorNombre"),selectedValues:O.proveedorNombre,onValueToggle:X}),r.jsx(ic,{label:"Mtodo",field:"metodo",sortConfig:D,onSort:K,onFilter:V,showFilter:G==="metodo",filterValue:P.metodo,onFilterChange:F,uniqueValues:xe("metodo"),selectedValues:O.metodo,onValueToggle:X}),r.jsx(ic,{label:"Monto",field:"monto",sortConfig:D,onSort:K,onFilter:V,showFilter:G==="monto",numericValue:_.monto,onNumericFilterChange:L,className:"text-right"}),r.jsx(ic,{label:"Estado",field:"estado",sortConfig:D,onSort:K,onFilter:V,showFilter:G==="estado",filterValue:P.estado,onFilterChange:F,uniqueValues:xe("estado"),selectedValues:O.estado,onValueToggle:X}),r.jsx(le,{children:"Acciones"})]})}),r.jsx(Vt,{children:n?r.jsx(Te,{children:r.jsx(H,{colSpan:Z?8:7,className:"text-center py-8",children:"Cargando..."})}):Z?se.map(q=>{var Q;return r.jsxs(Nt.Fragment,{children:[r.jsxs(Te,{className:"bg-gray-50/50 hover:bg-gray-50 cursor-pointer font-medium",onClick:()=>oe(q.proveedor),children:[r.jsx(H,{children:U.has(q.proveedor)?r.jsx(kr,{size:14,className:"text-hd-orange"}):r.jsx(ir,{size:14})}),r.jsx(H,{className:"text-gray-400 font-sans italic text-[10px]",children:"Mltiples fechas"}),r.jsx(H,{className:"text-blue-600 font-mono text-[10px]",children:"GRUPO"}),r.jsx(H,{className:"font-bold text-gray-800",children:q.proveedor}),r.jsx(H,{className:"text-gray-400 font-sans italic text-[10px]",children:"Mltiples"}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{className:"text-green-600 font-bold",children:["Pagado: RD$ ",q.totalCompletado.toLocaleString(void 0,{minimumFractionDigits:2})]}),q.totalPendiente>0&&r.jsxs("span",{className:"text-yellow-600 text-[10px]",children:["Programado: RD$ ",q.totalPendiente.toLocaleString()]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("span",{className:"text-gray-900 font-bold text-[11px]",children:["Deuda: RD$ ",q.deudaActual.toLocaleString()]}),r.jsxs("span",{className:"text-[10px] text-blue-600",children:[q.pagos.length," Pagos"]})]})}),r.jsx(H,{})]}),U.has(q.proveedor)&&r.jsx(Te,{className:"bg-white border-l-4 border-hd-orange",children:r.jsx(H,{colSpan:8,className:"p-0",children:r.jsx(f7,{proveedor:q.proveedor,proveedorId:(Q=q.pagos[0])==null?void 0:Q.proveedorId})})})]},q.proveedor)}):ie.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No se encontraron pagos."})}):ie.map(q=>{var Q;return r.jsxs(Te,{className:"hover:bg-gray-50 group text-xs font-sans",children:[r.jsx(H,{className:"font-sans",children:new Date(q.fecha).toLocaleDateString()}),r.jsx(H,{children:r.jsxs("div",{className:"flex flex-col text-[11px]",children:[r.jsx("span",{className:"font-mono ".concat(q.referencia==="PENDIENTE"?"text-orange-400 italic":"text-blue-600"),children:q.referencia}),((Q=q.facturasAfectadas)==null?void 0:Q.length)>0&&r.jsx("span",{className:"text-[10px] text-gray-400",children:q.facturasAfectadas.map(ve=>ve.numero).join(", ")})]})}),r.jsx(H,{className:"font-medium text-gray-700",children:q.proveedorNombre}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(li,{size:14,className:"text-gray-400"}),r.jsx("span",{children:q.metodo})]})}),r.jsxs(H,{className:"text-right font-medium",children:[q.monedaSimbolo||"RD$"," ",q.monto.toLocaleString("es-DO",{minimumFractionDigits:2})]}),r.jsx(H,{children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium ".concat(q.estado==="Completado"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:q.estado})}),r.jsx(H,{children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"h-7 w-7 p-0 text-gray-500 hover:text-hd-orange hover:bg-orange-50",onClick:()=>_e(q),title:"Ver detalles",children:r.jsx(ci,{size:16})}),q.estado==="Pendiente"&&r.jsx(re,{size:"xs",className:"h-7 text-[10px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>ye(q),children:"Confirmar"})]})})]},q.id)})})]})})]}),Fe&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-hd-orange p-4 flex justify-between items-center text-white",children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[r.jsx(Xr,{className:"mr-2",size:20})," Programar Pago a Proveedor"]}),r.jsx("button",{onClick:()=>ze(!1),className:"hover:bg-orange-700 p-1 rounded transition-colors",children:r.jsx(Tt,{size:20})})]}),r.jsxs("form",{onSubmit:fe,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor"}),r.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-hd-orange focus:ring-hd-orange",value:De.proveedorId,onChange:q=>Xe("proveedorId",q.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Seleccione un proveedor"}),s.map(q=>r.jsx("option",{value:q.id,children:q.razonSocial},q.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Programada"}),r.jsx(ge,{type:"date",value:De.fecha,onChange:q=>Xe("fecha",q.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mtodo"}),r.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-hd-orange focus:ring-hd-orange",value:De.metodo,onChange:q=>Xe("metodo",q.target.value),children:[r.jsx("option",{value:"Transferencia",children:"Transferencia"}),r.jsx("option",{value:"Cheque",children:"Cheque"}),r.jsx("option",{value:"Efectivo",children:"Efectivo"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-orange-50/50 p-3 rounded-md border border-orange-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-orange-800 uppercase mb-1 tracking-wider",children:"Moneda de Pago"}),r.jsx("select",{className:"w-full rounded-md border border-orange-200 p-2 text-sm focus:ring-hd-orange focus:border-hd-orange bg-white shadow-sm",value:De.monedaId,onChange:q=>Xe("monedaId",q.target.value),children:u.map(q=>r.jsxs("option",{value:q.id,children:[q.codigo," - ",q.nombre]},q.id))})]}),((ne=u.find(q=>q.id===parseInt(De.monedaId)))==null?void 0:ne.esFuncional)===!1&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-xs font-bold text-orange-800 uppercase tracking-wider",children:"Tasa de Cambio"}),De.tasaOficial>0&&Math.abs(De.tasaCambio-De.tasaOficial)/De.tasaOficial>.05&&r.jsx("span",{className:"text-[9px] bg-red-100 text-red-600 px-1 rounded animate-pulse font-bold",children:"Variacin Inusual"})]}),r.jsx(ge,{type:"number",step:"0.01",value:De.tasaCambio,onChange:q=>Xe("tasaCambio",q.target.value),className:"border-orange-200 bg-white ".concat(Math.abs(De.tasaCambio-De.tasaOficial)/De.tasaOficial>.05?"ring-1 ring-red-400 border-red-400":"")})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-md p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center",children:[r.jsx(sa,{className:"mr-2",size:16})," Facturas Pendientes",De.proveedorId&&r.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-hd-orange/10 text-hd-orange rounded-full text-[10px]",children:[p.length," totales"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"showAllCurrencies",className:"rounded border-gray-300 text-hd-orange focus:ring-hd-orange h-3 w-3",checked:De.showAllCurrencies||!1,onChange:q=>Ue(Q=>({...Q,showAllCurrencies:q.target.checked}))}),r.jsx("label",{htmlFor:"showAllCurrencies",className:"text-xs text-gray-600 cursor-pointer select-none",children:"Mostrar todas las monedas"})]})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-sm bg-white",children:r.jsxs("table",{className:"w-full text-xs text-left",children:[r.jsx("thead",{className:"bg-gray-100 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:"Factura #"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Saldo Original"}),r.jsx("th",{className:"px-3 py-2 text-right w-32",children:"Monto a Aplicar"}),r.jsx("th",{className:"px-3 py-2 text-center w-24",children:"Accin"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 font-mono",children:De.proveedorId?(()=>{const q=p.filter(Q=>De.showAllCurrencies||!De.monedaId||Q.monedaId===parseInt(De.monedaId));return q.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-400 font-sans",children:"No hay facturas pendientes en esta moneda."})}):q.map(Q=>r.jsxs("tr",{className:"hover:bg-blue-50/30",children:[r.jsx("td",{className:"px-3 py-1 font-medium text-[10px]",children:Q.numero}),r.jsxs("td",{className:"px-3 py-1 text-right text-gray-500 font-sans",children:[Q.monedaSimbolo||"RD$"," ",Q.saldo.toLocaleString()]}),r.jsx("td",{className:"px-3 py-1 text-right",children:r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx("span",{className:"text-[10px] text-gray-400 mr-1",children:Q.monedaCodigo}),r.jsx(ge,{type:"number",step:"0.01",className:"h-6 w-24 text-right text-[10px]",value:De.allocations[Q.id]||"",onChange:ve=>Ze(Q.id,ve.target.value,Q.saldo)})]})}),r.jsx("td",{className:"px-3 py-1 text-center font-sans",children:r.jsx(re,{type:"button",size:"xs",variant:"ghost",className:"text-[9px] h-6 text-blue-600 font-bold",onClick:()=>J(Q.id,Q.saldo),children:"Saldar"})})]},Q.id))})():r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-400",children:"Seleccione un proveedor."})})})]})})]}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{className:"flex-1 mr-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota / Comentario"}),r.jsx(ge,{placeholder:"Opcional...",value:De.nota,onChange:q=>Xe("nota",q.target.value)})]}),r.jsx("div",{className:"flex flex-col space-y-2",children:(()=>{var ve;let q=0,Q=0;return Object.keys(De.allocations).forEach(be=>{const Le=p.find(Dt=>Dt.id===parseInt(be)),Qe=De.allocations[be],tt=Qe*(Le.tasaFactura||1),ct=u.find(Dt=>Dt.id===parseInt(De.monedaId));let Ft=Qe;ct!=null&&ct.esFuncional?Ft=Le.monedaId!==ct.id?Qe*De.tasaCambio:Qe:Ft=Qe*De.tasaCambio,q+=Ft-tt,Q+=Ft}),r.jsxs(r.Fragment,{children:[Math.abs(q)>.01&&r.jsxs("div",{className:"text-[10px] px-2 py-1 rounded border ".concat(q>0?"bg-red-50 text-red-700 border-red-100":"bg-green-50 text-green-700 border-green-100"),children:[r.jsx("span",{className:"font-bold",children:"Diferencia Cambiaria:"})," RD$ ",q.toLocaleString(void 0,{minimumFractionDigits:2}),r.jsx("p",{className:"opacity-70",children:q>0?" Prdida por tasa":" Ganancia por tasa"})]}),r.jsxs("div",{className:"w-48 bg-gray-900 shadow-inner text-white p-3 rounded-md text-right border-l-4 border-hd-orange",children:[r.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Total a Pagar"}),r.jsxs("p",{className:"text-xl font-bold font-mono",children:[((ve=u.find(be=>be.id===parseInt(De.monedaId)))==null?void 0:ve.simbolo)||"RD$"," ",De.monto.toLocaleString(void 0,{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-[9px] text-gray-500 mt-1 italic",children:["Equivalente: RD$ ",Q.toLocaleString()]})]})]})})()})]}),r.jsxs("div",{className:"pt-4 flex justify-end space-x-2 border-t border-gray-100",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>ze(!1),children:"Cerrar"}),r.jsx(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-700 text-white shadow-lg",children:"Registrar como Pendiente"})]})]})]})}),pe&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 border-t-4 border-blue-600",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-blue-50",children:[r.jsxs("h2",{className:"text-blue-900 font-bold flex items-center",children:[r.jsx(Sc,{className:"mr-2",size:20})," Confirmar Ejecucin de Pago"]}),r.jsx("button",{onClick:()=>Ie(null),children:r.jsx(Tt,{size:20,className:"text-gray-400 hover:text-gray-600"})})]}),r.jsxs("form",{onSubmit:Me,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Proveedor:"}),r.jsx("span",{className:"font-bold",children:pe.proveedorNombre})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Monto:"}),r.jsxs("span",{className:"font-bold text-blue-700",children:[pe.monedaSimbolo||"RD$"," ",pe.monto.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Mtodo:"}),r.jsxs("span",{className:"font-bold flex items-center",children:[r.jsx(li,{size:12,className:"mr-1"})," ",pe.metodo]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:pe.metodo==="Cheque"?"Nmero de Cheque":pe.metodo==="Transferencia"?"Nmero de Transferencia":"Referencia de Pago"}),r.jsx(ge,{className:"border-blue-200 focus:ring-blue-500 focus:border-blue-500",placeholder:pe.metodo==="Efectivo"?"Referencia opcional...":"Ingrese ".concat(pe.metodo==="Cheque"?"No. Cheque":"No. Transferencia","..."),value:Re,onChange:q=>ee(q.target.value),required:pe.metodo!=="Efectivo",autoFocus:!0}),pe.metodo!=="Efectivo"&&r.jsx("p",{className:"text-[10px] text-orange-600 mt-1",children:"* Este dato es obligatorio para cerrar el pago."})]}),r.jsxs("div",{className:"pt-2 flex justify-end space-x-2",children:[r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>Ie(null),children:"Volver"}),r.jsx(re,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-md",children:"Marcar como Pagado"})]})]})]})}),Oe&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-gray-100 p-4 flex justify-between items-center border-b border-gray-200",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center",children:[r.jsx(Pr,{className:"mr-2",size:20})," Detalle de Pago"]}),r.jsx("button",{onClick:()=>_e(null),className:"hover:bg-gray-200 p-1 rounded transition-colors",children:r.jsx(Tt,{size:20})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Proveedor"}),r.jsx("p",{className:"font-bold text-gray-800",children:Oe.proveedorNombre})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Fecha"}),r.jsx("p",{className:"font-bold text-gray-800",children:new Date(Oe.fecha).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Referencia / Mtodo"}),r.jsxs("p",{className:"font-bold text-gray-800",children:[Oe.referencia," ",r.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",Oe.metodo,")"]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Monto Total"}),r.jsxs("p",{className:"font-bold text-blue-600 text-lg",children:[Oe.monedaSimbolo||"RD$"," ",Oe.monto.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),r.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2 border-b pb-1",children:"Facturas Afectadas"}),r.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{children:r.jsxs(Te,{className:"bg-gray-50",children:[r.jsx(le,{className:"py-2 h-8 text-xs",children:"Factura"}),r.jsx(le,{className:"py-2 h-8 text-xs text-right",children:"Monto Aplicado"})]})}),r.jsx(Vt,{children:Oe.facturasAfectadas&&Oe.facturasAfectadas.length>0?Oe.facturasAfectadas.map((q,Q)=>r.jsxs(Te,{className:"hover:bg-gray-50",children:[r.jsx(H,{className:"py-2 text-xs font-mono",children:q.numero}),r.jsxs(H,{className:"py-2 text-xs text-right font-medium",children:[Oe.monedaSimbolo||"RD$"," ",(q.monto||0).toLocaleString(void 0,{minimumFractionDigits:2})]})]},Q)):r.jsx(Te,{children:r.jsx(H,{colSpan:2,className:"text-center py-4 text-gray-400 text-xs",children:"No hay detalles de facturas."})})})]})})]}),r.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-end",children:r.jsx(re,{variant:"outline",onClick:()=>_e(null),children:"Cerrar"})})]})})]})},ic=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y=""})=>{const b=n.key===t,N=h!==void 0,k=v!==void 0,D=l||m&&m.length>0||N&&(f.min!==""||f.max!=="");return r.jsxs(le,{className:"relative group p-0 ".concat(y),children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>a(t),children:[r.jsxs("div",{className:"flex items-center space-x-1 text-[11px]",children:[r.jsx("span",{className:"font-bold text-gray-700",children:e}),b?n.direction==="asc"?r.jsx(Gn,{size:12,className:"text-hd-orange"}):r.jsx(Jr,{size:12,className:"text-hd-orange"}):r.jsx(Uu,{size:12,className:"text-gray-400 opacity-0 group-hover:opacity-100"})]}),s&&r.jsx("button",{onClick:E=>s(t,E),className:"p-1 rounded-sm ".concat(D?"text-hd-orange":"text-gray-400"),children:r.jsx(Vu,{size:12,fill:D?"currentColor":"none"})})]}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] text-[11px]",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer",onClick:()=>{a(t),s(t)},children:[r.jsx(Gn,{size:12,className:"mr-2"})," ",t==="fecha"?"Antiguo":"Ascendente"]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer",onClick:()=>{a(t),s(t)},children:[r.jsx(Jr,{size:12,className:"mr-2"})," ",t==="fecha"?"Reciente":"Descendente"]})]}),r.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:N?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ge,{type:"number",placeholder:"Min",value:f.min,onChange:E=>h(t,"min",E.target.value),className:"h-7 text-[10px]"}),r.jsx(ge,{type:"number",placeholder:"Max",value:f.max,onChange:E=>h(t,"max",E.target.value),className:"h-7 text-[10px]"})]}):r.jsx(ge,{placeholder:"Buscar...",value:l,onChange:E=>c(t,E.target.value),className:"h-7 text-[10px]"})}),r.jsx("div",{className:"max-h-56 overflow-y-auto p-2",children:k?r.jsx(w5,{tree:v,selectedPaths:m,onToggle:(E,P)=>j(t,E,P)}):u.length>0?r.jsx("div",{className:"space-y-0.5",children:u.map(E=>r.jsxs("div",{className:"flex items-center px-2 py-0.5 hover:bg-gray-100 rounded cursor-pointer",onClick:()=>p(t,E),children:[r.jsx("input",{type:"checkbox",checked:m.includes(E),readOnly:!0,className:"h-3 w-3"}),r.jsx("span",{className:"ml-2 truncate",children:E})]},E))}):null}),r.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 border-t",children:[r.jsx(re,{size:"xs",variant:"ghost",onClick:()=>s(t),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-hd-orange",onClick:()=>{N?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(k?m.forEach(E=>j(t,E,!0)):m.forEach(E=>p(t,E))))},children:"Limpiar"})]})]})]})},w5=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s=""})=>{const[o,l]=x.useState(a<1),c=Object.keys(e.children||{}).sort((h,u)=>u.localeCompare(h)),f=(h,u)=>{const m=[],p=(v,j)=>{if(!v.children){m.push(j);return}Object.keys(v.children).forEach(y=>p(v.children[y],"".concat(j,"/").concat(y)))};return p(h,u),m};return r.jsx("div",{className:a>0?"ml-3":"",children:c.map(h=>{const u=s?"".concat(s,"/").concat(h):h,m=e.children[h],p=!m.children,v=p?[u]:f(m,u),j=v.every(b=>t.includes(b)),y=v.some(b=>t.includes(b));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-0.5 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>n(u,j),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-0.5",onClick:b=>{b.stopPropagation(),l(!o)},children:!p&&(o?r.jsx(Jr,{size:8}):r.jsx(Mp,{size:8}))}),r.jsx("input",{type:"checkbox",checked:j,ref:b=>{b&&(b.indeterminate=y&&!j)},readOnly:!0,className:"h-3 w-3"}),r.jsx("span",{className:"ml-1.5",children:h})]}),o&&!p&&r.jsx(w5,{tree:m,selectedPaths:t,onToggle:n,depth:a+1,path:u})]},h)})})},Rh="http://localhost:5006/api",m7=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(!0),[f,h]=x.useState([]),[u,m]=x.useState({amount:0,date:new Date().toISOString().split("T")[0],method:"Efectivo",reference:"",monedaId:"",tasaCambio:1,allocations:{}}),[p,v]=x.useState(!1),[j,y]=x.useState(""),[b,N]=x.useState(!1);x.useEffect(()=>{c(!0),Promise.all([SO(),fetch("".concat(Rh,"/Monedas")).then(E=>{if(!E.ok)throw new Error("Err Monedas: "+E.status);return E.json()})]).then(([E,P])=>{console.log("Data loaded:",E.length,P.length),t(E),h(P);const C=P.find(O=>O.esFuncional);C&&m(O=>({...O,monedaId:C.id,tasaCambio:1}))}).catch(E=>{console.error("Init Error:",E),y("Error carga: "+E.message)}).finally(()=>c(!1))},[]),x.useEffect(()=>{if(!n){o([]);return}o([]),fetch("".concat(Rh,"/Cobros/Pendientes/").concat(n.id)).then(E=>E.json()).then(E=>o(E)).catch(E=>console.error("Error loading invoices",E))},[n]);const k=E=>{const P=parseFloat(E)||0;m(z=>({...z,amount:P}));let C=P;const O={},A=(z,G)=>z[G]===void 0?z[G.charAt(0).toUpperCase()+G.slice(1)]:z[G];s.filter(z=>{const G=A(z,"monedaId");return!u.monedaId||G==u.monedaId}).sort((z,G)=>{const T=new Date(A(z,"fecha")),M=new Date(A(G,"fecha"));return T-M}).forEach(z=>{if(C<=0)return;const G=A(z,"id"),T=parseFloat(A(z,"saldo")||0),M=Math.min(C,T);O[G]=M,C-=M}),m(z=>({...z,amount:P,allocations:O}))},D=async E=>{if(E.preventDefault(),!!n&&!(u.amount<=0)){v(!0);try{const P=parseInt(u.monedaId),C={ClienteId:n.id,Fecha:u.date,Monto:u.amount,MetodoPago:u.method,Referencia:u.reference||"",MonedaId:isNaN(P)?null:P,TasaCambio:parseFloat(u.tasaCambio)||1,Observaciones:"",Detalles:Object.keys(u.allocations).map(_=>({VentaId:parseInt(_)||0,MontoAplicado:parseFloat(u.allocations[_])||0})).filter(_=>_.VentaId>0&&_.MontoAplicado>0)};console.log("Submitting Payload:",C);const O=await fetch("".concat(Rh,"/Cobros"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!O.ok){const _=await O.json().catch(()=>({}));throw console.error("Server Error:",_),new Error(_.message||"Error al guardar (Server 400/500)")}const A=await O.json();y("Cobro Registrado: ".concat(A.numero)),m(_=>({..._,amount:0,reference:"",allocations:{}})),fetch("".concat(Rh,"/Cobros/Pendientes/").concat(n.id)).then(_=>_.json()).then(_=>o(_)),setTimeout(()=>y(""),3e3)}catch(P){console.error(P),alert("Error al guardar cobro")}finally{v(!1)}}};return x.useMemo(()=>s.filter(E=>b||!u.monedaId||E.monedaId==u.monedaId).reduce((E,P)=>E+(parseFloat(P.saldo)||0),0),[s,u.monedaId,b]),r.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[r.jsx(Xr,{className:"mr-2 text-hd-orange"})," Cuentas por Cobrar"]}),r.jsxs("div",{className:"mb-2 text-[10px] text-gray-400",children:["DEBUG: Clients:",e.length," Monedas:",f.length," Loading:",l.toString()," Amount:",u.amount," InvCount:",s.length," Saving:",p.toString()]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs(We,{children:[r.jsx(vt,{className:"bg-gray-50 pb-2",children:r.jsx(bt,{className:"text-sm uppercase text-gray-500",children:"Seleccionar Cliente"})}),r.jsxs("div",{className:"p-4",children:[r.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:(n==null?void 0:n.id)||"",onChange:E=>{const P=e.find(C=>C.id==E.target.value);a(P)},children:[r.jsx("option",{value:"",children:"-- Seleccionar --"}),e.map(E=>r.jsxs("option",{value:E.id,children:[E.name," - ",E.rnc]},E.id))]}),n&&r.jsxs("div",{className:"mt-4 bg-orange-50 p-4 rounded border border-orange-100",children:[r.jsx("p",{className:"font-bold text-gray-800",children:n.name}),r.jsx("p",{className:"text-xs text-gray-500",children:n.address}),r.jsxs("div",{className:"mt-2 pt-2 border-t border-orange-200",children:[r.jsx("span",{className:"text-sm font-semibold",children:"Deuda Total:"}),r.jsx("div",{className:"flex flex-col mt-1 space-y-1",children:(()=>{const E=(C,O)=>C[O]||C[O.charAt(0).toUpperCase()+O.slice(1)],P=s.reduce((C,O)=>{const A=E(O,"monedaCodigo")||"DOP",_=parseFloat(E(O,"saldo"))||0;return C[A]=(C[A]||0)+_,C},{});return Object.keys(P).length===0?r.jsx("span",{className:"text-xs text-gray-500",children:"Sin deudas pendientes"}):Object.entries(P).map(([C,O])=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:C}),r.jsxs("span",{className:"font-bold text-red-600",children:[C==="USD"?"$":"RD$"," ",O.toLocaleString("en-US",{minimumFractionDigits:2})]})]},C))})()})]})]})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:n?r.jsxs(We,{children:[r.jsxs(vt,{className:"flex flex-row justify-between items-center py-3 bg-gray-50",children:[r.jsxs(bt,{className:"text-gray-700 flex items-center gap-2",children:[r.jsx(li,{size:18})," Registrar Cobro"]}),j&&r.jsxs("span",{className:"text-green-600 text-sm flex items-center font-bold",children:[r.jsx(Sc,{size:14,className:"mr-1"})," ",j]})]}),r.jsx("div",{className:"p-6",children:r.jsxs("form",{onSubmit:D,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha"}),r.jsxs("div",{className:"relative",children:[r.jsx(sa,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ge,{type:"date",className:"pl-8",value:u.date,onChange:E=>m({...u,date:E.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mtodo Pago"}),r.jsxs("select",{className:"w-full border rounded p-2 h-10 bg-white",value:u.method,onChange:E=>m({...u,method:E.target.value}),children:[r.jsx("option",{children:"Efectivo"}),r.jsx("option",{children:"Cheque"}),r.jsx("option",{children:"Transferencia"}),r.jsx("option",{children:"Tarjeta"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Moneda Pago"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("select",{className:"w-full border rounded p-2 h-10 bg-white text-sm",value:u.monedaId,onChange:E=>{const P=E.target.value,C=f.find(O=>O.id==P);m(O=>({...O,monedaId:P,tasaCambio:C?C.tasa:1,allocations:{}}))},children:f.map(E=>r.jsxs("option",{value:E.id,children:[E.codigo," - ",E.nombre]},E.id))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"chkShowAll",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:b,onChange:E=>N(E.target.checked)}),r.jsx("label",{htmlFor:"chkShowAll",className:"text-xs text-gray-500 cursor-pointer select-none",children:"Ver facturas de todas las monedas"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Referencia"}),r.jsx(ge,{placeholder:"Ref transaccin/cheque...",value:u.reference,onChange:E=>m({...u,reference:E.target.value})})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-hd-orange font-bold",children:"Monto a Cobrar"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-400",children:"$"}),r.jsx(ge,{type:"number",className:"pl-7 font-bold text-lg",value:u.amount,onChange:E=>k(E.target.value)})]})]})]}),r.jsxs("div",{className:"border rounded-md overflow-hidden bg-gray-50 min-h-[300px] flex flex-col",children:[r.jsxs("div",{className:"bg-gray-100 px-4 py-2 text-xs font-bold text-gray-500 uppercase flex justify-between items-center border-b",children:[r.jsx("span",{children:"Facturas Pendientes"}),r.jsxs("span",{className:"text-gray-400",children:[s.length," FACTURAS"]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:(()=>{const E=(C,O)=>C[O]===void 0?C[O.charAt(0).toUpperCase()+O.slice(1)]:C[O],P=s.filter(C=>{const O=E(C,"monedaId");return b?!0:!u.monedaId||O==u.monedaId});return P.length===0?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 opacity-60 text-center p-8",children:[r.jsx(Sc,{className:"h-10 w-10 mb-2"}),r.jsx("p",{className:"text-sm",children:"No se encontraron facturas pendientes."})]}):P.map(C=>{const O=E(C,"id"),A=parseFloat(E(C,"saldo")||0),_=u.allocations[O]||0,z=_>=A,G=E(C,"monedaId"),T=E(C,"monedaCodigo"),M=E(C,"monedaSimbolo"),W=E(C,"numeroFactura"),Z=E(C,"fecha"),B=E(C,"fechaVencimiento"),U=E(C,"ncf")||E(C,"NCF"),$=!u.monedaId||G==u.monedaId,K=Z?new Date(Z).toLocaleDateString():"N/A",V=B?new Date(B).toLocaleDateString():"N/A";return r.jsxs("div",{className:"bg-white border rounded p-3 flex justify-between items-center shadow-sm hover:border-hd-orange transition-all cursor-pointer ".concat(z?"border-green-200 ring-1 ring-green-100":""," ").concat($?"":"bg-gray-50 opacity-90"),onClick:()=>{const F=u.allocations[O]||0,L=A-F;let X={...u.allocations},Y=u.amount;L>.01?(X[O]=A,Y+=L):(Y-=F,delete X[O]),m(me=>({...me,amount:parseFloat(Y.toFixed(2)),allocations:X}))},children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-bold text-gray-800",children:W}),!$&&r.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-1 rounded border border-yellow-200 font-bold",children:T})]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[K," - Vence: ",V]}),r.jsxs("span",{className:"text-xs text-gray-400",children:["NCF: ",U||"N/A"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Saldo: ",r.jsxs("span",{className:"font-bold text-gray-900",children:[M," ",A.toLocaleString()]})]}),_>0&&r.jsxs("div",{className:"text-xs text-white bg-green-500 px-2 py-0.5 rounded-full inline-block font-bold shadow-sm",children:["Abono: $",_.toLocaleString()]})]})]},O)})})()})]}),r.jsxs("div",{className:"flex justify-end pt-4 border-t",children:[r.jsx(re,{type:"submit",disabled:p||u.amount<=0||s.length===0,className:"bg-hd-orange hover:bg-orange-600 text-white w-full md:w-auto md:px-8",children:p?"Procesando...":"Registrar Cobro"}),(p||u.amount<=0||s.length===0)&&r.jsxs("div",{className:"text-[10px] text-red-400 text-center mt-1",children:["Disabled Reason: ",p?"Saving ":""," ",u.amount<=0?"Amount<=0 ":""," ",s.length===0?"NoInv ":""]})]})]})})]}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-10 bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg text-gray-400",children:[r.jsx(Sj,{className:"h-12 w-12 mb-2 opacity-50"}),r.jsx("span",{className:"font-medium",children:"Seleccione un cliente para ver su estado de cuenta"})]})})]})]})},p7=[{id:1,nombre:"Juan Prez",empresa:"Ferretera Central",interes:"Equipos POS",origen:"Web",estado:"Nuevo",fecha:"2025-12-19"},{id:2,nombre:"Mara Garca",empresa:"Inmobiliaria S.A.",interes:"Software Contable",origen:"Referido",estado:"Contactado",fecha:"2025-12-18"},{id:3,nombre:"Roberto Soto",empresa:"Comercial Robert",interes:"Mantenimiento",origen:"Llamada Fra",estado:"Calificado",fecha:"2025-12-15"},{id:4,nombre:"Laura Luna",empresa:"Tienda El Sol",interes:"Equipos POS",origen:"Expo Feria",estado:"Perdido",fecha:"2025-12-10"}],g7=()=>{const[e,t]=x.useState(p7),[n,a]=x.useState(""),[s,o]=x.useState(!1),[l,c]=x.useState({nombre:"",empresa:"",interes:"Equipos POS",origen:"Web",estado:"Nuevo"}),f=m=>{m.preventDefault();const p=e.length+1,v=new Date().toISOString().split("T")[0];t([{...l,id:p,fecha:v},...e]),o(!1),c({nombre:"",empresa:"",interes:"Equipos POS",origen:"Web",estado:"Nuevo"})},h=e.filter(m=>m.nombre.toLowerCase().includes(n.toLowerCase())||m.empresa.toLowerCase().includes(n.toLowerCase())),u=m=>{switch(m){case"Nuevo":return"bg-blue-100 text-blue-700 border-blue-200";case"Contactado":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Calificado":return"bg-green-100 text-green-700 border-green-200";case"Perdido":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Prospectos (Leads)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Clientes potenciales que an no son compradores"})]}),r.jsxs(re,{onClick:()=>o(!0),className:"bg-hd-orange hover:bg-orange-600 text-white shadow-lg",children:[r.jsx(Hy,{className:"mr-2 h-4 w-4"})," Nuevo Prospecto"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(We,{className:"bg-blue-50/50 border-blue-100",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase tracking-wider",children:"Nuevos"}),r.jsx("h3",{className:"text-2xl font-black text-blue-900",children:e.filter(m=>m.estado==="Nuevo").length})]})}),r.jsx(We,{className:"bg-yellow-50/50 border-yellow-100",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-yellow-600 font-bold uppercase tracking-wider",children:"En Seguimiento"}),r.jsx("h3",{className:"text-2xl font-black text-yellow-900",children:e.filter(m=>m.estado==="Contactado").length})]})}),r.jsx(We,{className:"bg-green-50/50 border-green-100",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-green-600 font-bold uppercase tracking-wider",children:"Calificados"}),r.jsx("h3",{className:"text-2xl font-black text-green-900",children:e.filter(m=>m.estado==="Calificado").length})]})}),r.jsx(We,{className:"bg-orange-50/50 border-orange-100",children:r.jsxs(Mt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-orange-600 font-bold uppercase tracking-wider",children:"Origen: Web"}),r.jsx("h3",{className:"text-2xl font-black text-orange-900",children:e.filter(m=>m.origen==="Web").length})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 flex items-center justify-between",children:r.jsxs("div",{className:"relative w-full max-w-xs",children:[r.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ge,{placeholder:"Buscar prospecto...",className:"pl-9 bg-white border-gray-200 focus:ring-hd-orange",value:n,onChange:m=>a(m.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Bt,{children:[r.jsx(Ut,{className:"bg-gray-50 uppercase text-[10px] font-bold text-gray-500 tracking-widest",children:r.jsxs(Te,{children:[r.jsx(le,{className:"px-6 py-4",children:"Nombre / Empresa"}),r.jsx(le,{className:"px-6 py-4 text-center",children:"Inters"}),r.jsx(le,{className:"px-6 py-4 text-center",children:"Estado"}),r.jsx(le,{className:"px-6 py-4 text-center",children:"Origen"}),r.jsx(le,{className:"px-6 py-4 text-center",children:"Fecha"}),r.jsx(le,{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsx(Vt,{children:h.map(m=>r.jsxs(Te,{className:"hover:bg-orange-50/30 transition-colors group",children:[r.jsx(H,{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-bold text-gray-900",children:m.nombre}),r.jsx("span",{className:"text-xs text-gray-500",children:m.empresa})]})}),r.jsx(H,{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-xs font-medium text-gray-600",children:m.interes})}),r.jsx(H,{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"px-3 py-1 rounded-full text-[10px] font-bold border ".concat(u(m.estado)),children:m.estado.toUpperCase()})}),r.jsx(H,{className:"px-6 py-4 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500",children:[r.jsx(Nl,{size:12,className:"text-orange-400"}),m.origen]})}),r.jsx(H,{className:"px-6 py-4 text-center text-xs text-gray-400",children:new Date(m.fecha).toLocaleDateString()}),r.jsx(H,{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-10 sm:opacity-100 group-hover:opacity-100 transition-opacity",children:[r.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:bg-blue-50",children:r.jsx(zc,{size:16})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:bg-red-50",children:r.jsx(rr,{size:16})})]})})]},m.id))})]})})]}),s&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-gray-100",children:[r.jsxs("div",{className:"p-4 bg-hd-orange text-white flex justify-between items-center bg-gradient-to-r from-hd-orange to-orange-500",children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[r.jsx(Hy,{className:"mr-2",size:20}),"Nuevo Prospecto"]}),r.jsx("button",{onClick:()=>o(!1),className:"hover:bg-white/20 p-1 rounded-full transition-colors",children:r.jsx(Tt,{size:20})})]}),r.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Nombre Completo"}),r.jsx(ge,{required:!0,className:"focus:ring-hd-orange",value:l.nombre,onChange:m=>c({...l,nombre:m.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Empresa / Negocio"}),r.jsx(ge,{required:!0,className:"focus:ring-hd-orange",value:l.empresa,onChange:m=>c({...l,empresa:m.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Inters"}),r.jsxs("select",{className:"w-full text-sm rounded-md border border-gray-300 p-2 focus:ring-hd-orange focus:border-hd-orange",value:l.interes,onChange:m=>c({...l,interes:m.target.value}),children:[r.jsx("option",{children:"Equipos POS"}),r.jsx("option",{children:"Software"}),r.jsx("option",{children:"Mantenimiento"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Origen"}),r.jsxs("select",{className:"w-full text-sm rounded-md border border-gray-300 p-2 focus:ring-hd-orange focus:border-hd-orange",value:l.origen,onChange:m=>c({...l,origen:m.target.value}),children:[r.jsx("option",{children:"Web"}),r.jsx("option",{children:"Referido"}),r.jsx("option",{children:"Llamada"}),r.jsx("option",{children:"Publicidad"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>o(!1),className:"text-gray-500 border-gray-200",children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600 text-white shadow-md",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar Prospecto"]})]})]})]})})]})},x7=()=>r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Dashboard CRM"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Resumen de actividad y rendimiento comercial"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(We,{className:"border-none shadow-sm bg-gradient-to-br from-blue-600 to-blue-700 text-white",children:r.jsxs(Mt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Valor Pipeline"}),r.jsx("h3",{className:"text-2xl font-black",children:"$45,200.00"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-blue-200",children:[r.jsx(xu,{size:12,className:"mr-1"})," +12% vs mes anterior"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(Nj,{size:24})})]})}),r.jsx(We,{className:"border-none shadow-sm bg-gradient-to-br from-hd-orange to-orange-600 text-white",children:r.jsxs(Mt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-orange-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Prospectos Nuevos"}),r.jsx("h3",{className:"text-2xl font-black",children:"24"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-orange-200",children:[r.jsx(xu,{size:12,className:"mr-1"})," +8 esta semana"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(zr,{size:24})})]})}),r.jsx(We,{className:"border-none shadow-sm bg-gradient-to-br from-green-600 to-green-700 text-white",children:r.jsxs(Mt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Tasa Conversin"}),r.jsx("h3",{className:"text-2xl font-black",children:"18.5%"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-green-200",children:[r.jsx(ti,{size:12,className:"mr-1"})," Meta: 20%"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(ll,{size:24})})]})}),r.jsx(We,{className:"border-none shadow-sm bg-gradient-to-br from-purple-600 to-purple-700 text-white",children:r.jsxs(Mt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Citas Pendientes"}),r.jsx("h3",{className:"text-2xl font-black",children:"12"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-purple-200",children:[r.jsx(sa,{size:12,className:"mr-1"})," 4 para hoy"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(sa,{size:24})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(We,{children:[r.jsx(vt,{className:"border-b bg-gray-50/50",children:r.jsx(bt,{className:"text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Estado del Pipeline"})}),r.jsx(Mt,{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:[{label:"Prospeccin",count:15,value:"$12,000",color:"bg-blue-500",width:"75%"},{label:"Calificacin",count:8,value:"$8,500",color:"bg-yellow-500",width:"40%"},{label:"Propuesta",count:5,value:"$15,200",color:"bg-hd-orange",width:"25%"},{label:"Negociacin",count:3,value:"$9,500",color:"bg-green-500",width:"15%"}].map((e,t)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[r.jsxs("span",{className:"text-gray-600",children:[e.label," (",e.count,")"]}),r.jsx("span",{className:"text-gray-900",children:e.value})]}),r.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"".concat(e.color," h-full rounded-full"),style:{width:e.width}})})]},t))})})]}),r.jsxs(We,{children:[r.jsx(vt,{className:"border-b bg-gray-50/50",children:r.jsx(bt,{className:"text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Actividad Reciente"})}),r.jsx(Mt,{className:"p-0",children:r.jsx("div",{className:"divide-y max-h-[300px] overflow-y-auto",children:[{user:"Admin",action:"Nuevo prospecto creado",target:"Ferretera Central",time:"Hace 10 min"},{user:"Vendedor 1",action:"Tarea completada",target:"Llamada a Mara Garca",time:"Hace 1 hora"},{user:"Vendedor 2",action:"Oportunidad ganada",target:"Tienda El Sol",time:"Hace 3 horas"},{user:"Admin",action:"Email enviado",target:"Roberto Soto",time:"Hace 5 horas"},{user:"Vendedor 1",action:"Cita agendada",target:"Inmobiliaria S.A.",time:"Ayer"}].map((e,t)=>r.jsxs("div",{className:"p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-[10px] font-bold text-gray-500",children:e.user[0]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-xs text-gray-900",children:[r.jsx("span",{className:"font-bold",children:e.user})," ",e.action," para ",r.jsx("span",{className:"text-hd-orange font-medium",children:e.target})]}),r.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:e.time})]})]},t))})})]})]})]}),v7="http://localhost:5006/api",Vc=({endpoint:e,title:t,columns:n})=>{const[a,s]=x.useState([]),[o,l]=x.useState(!0),[c,f]=x.useState(""),[h,u]=x.useState({key:"",direction:"asc"}),[m,p]=x.useState({}),[v,j]=x.useState({}),[y,b]=x.useState({}),[N,k]=x.useState(null),[D,E]=x.useState(n.reduce((U,$)=>({...U,[$.field]:$.width||150}),{}));x.useEffect(()=>{(async()=>{try{l(!0);const $=await fetch("".concat(v7).concat(e));if(!$.ok)throw new Error("Error fetching data");const K=await $.json();s(K)}catch($){console.error($)}finally{l(!1)}})()},[e]);const P=(U,$)=>{E(K=>({...K,[U]:$}))},C=U=>{let $="asc";h.key===U&&h.direction==="asc"&&($="desc"),u({key:U,direction:$})},O=(U,$)=>{$.stopPropagation(),k(N===U?null:U)},A=(U,$)=>{p(K=>({...K,[U]:$}))},_=(U,$,K)=>{b(V=>({...V,[U]:{...V[U]||{min:"",max:""},[$]:K}}))},z=(U,$)=>{j(K=>{const V=K[U]||[];return V.includes($)?{...K,[U]:V.filter(F=>F!==$)}:{...K,[U]:[...V,$]}})},G=U=>{const $=a.map(K=>String(K[U]||""));return[...new Set($)].sort()},M=(()=>{let U=[...a];return c&&(U=U.filter($=>Object.keys($).some(K=>String($[K]||"").toLowerCase().includes(c.toLowerCase())))),Object.keys(m).forEach($=>{m[$]&&(U=U.filter(K=>String(K[$]||"").toLowerCase().includes(m[$].toLowerCase())))}),Object.keys(v).forEach($=>{v[$]&&v[$].length>0&&(U=U.filter(K=>v[$].includes(String(K[$]))))}),Object.keys(y).forEach($=>{const{min:K,max:V}=y[$];K!==""&&(U=U.filter(F=>(F[$]||0)>=parseFloat(K))),V!==""&&(U=U.filter(F=>(F[$]||0)<=parseFloat(V)))}),h.key&&U.sort(($,K)=>{const V=$[h.key],F=K[h.key];return V<F?h.direction==="asc"?-1:1:V>F?h.direction==="asc"?1:-1:0}),U})(),W=Object.values(D).reduce((U,$)=>U+$,0),Z=()=>{if(M.length===0)return;const U=n.map(X=>X.label).join(","),$=M.map(X=>n.map(Y=>'"'.concat(String(X[Y.field]||"").replace(/"/g,'""'),'"')).join(",")).join("\n"),K="".concat(U,"\n").concat($),V=new Blob(["\uFEFF"+K],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(V),L=document.createElement("a");L.setAttribute("href",F),L.setAttribute("download","".concat(t.replace(/\s+/g,"_"),"_").concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(L),L.click(),document.body.removeChild(L)},B=()=>{p({}),j({}),b({}),f("")};return r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500 p-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(cl,{className:"text-hd-orange",size:24}),t]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Vista tipo SmartList con filtros avanzados y exportacin."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:Z,className:"border-green-600 text-green-700 hover:bg-green-50",children:[r.jsx(bj,{size:16,className:"mr-2"})," Exportar CSV"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:B,className:"text-gray-500",children:[r.jsx(Tt,{size:16,className:"mr-2"})," Limpiar"]})]})]}),r.jsxs(We,{className:"overflow-hidden border-none shadow-lg",children:[r.jsxs(vt,{className:"bg-gray-50 border-b py-3 flex flex-row justify-between items-center",children:[r.jsx("div",{className:"flex items-center gap-4 text-xs font-medium text-gray-500",children:r.jsxs("span",{children:["Total Filas: ",r.jsx("span",{className:"text-hd-orange font-bold text-sm tracking-tight",children:M.length})]})}),r.jsxs("div",{className:"relative w-72",children:[r.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ge,{placeholder:"Bsqueda rpida...",className:"h-9 pl-10 border-gray-200 focus:border-hd-orange shadow-sm text-sm",value:c,onChange:U=>f(U.target.value)})]})]}),r.jsx("div",{className:"overflow-x-auto overflow-y-visible relative min-h-[600px] bg-white",children:r.jsxs(Bt,{className:"table-fixed border-collapse",style:{width:W},children:[r.jsx(Ut,{children:r.jsx(Te,{className:"bg-white hover:bg-white border-b-2 border-gray-100",children:n.map(U=>r.jsx(y7,{label:U.label,field:U.field,type:U.type,sortConfig:h,onSort:C,onFilter:O,showFilter:N===U.field,filterValue:m[U.field],onFilterChange:A,numericValue:y[U.field],onNumericFilterChange:_,uniqueValues:G(U.field),selectedValues:v[U.field],onValueToggle:z,width:D[U.field],onResize:P},U.field))})}),r.jsx(Vt,{children:o?r.jsx(Te,{children:r.jsx(H,{colSpan:n.length,className:"text-center py-20 text-gray-400",children:"Cargando SmartList..."})}):M.length===0?r.jsx(Te,{children:r.jsx(H,{colSpan:n.length,className:"text-center py-20 text-gray-500 font-medium italic",children:"No se encontraron registros con los filtros aplicados."})}):M.map((U,$)=>r.jsx(Te,{className:"hover:bg-orange-50/50 transition-colors group",children:n.map(K=>r.jsx(H,{className:"text-xs py-2.5 border-r border-gray-50 last:border-r-0 ".concat(K.type==="number"||K.type==="currency"?"text-right font-mono":""),children:b7(U[K.field],K.type,U.Simbolo||U.Symbol)},K.field))},$))})]})})]})]})},y7=({label:e,field:t,type:n,sortConfig:a,onSort:s,onFilter:o,showFilter:l,filterValue:c="",onFilterChange:f,numericValue:h={min:"",max:""},onNumericFilterChange:u,uniqueValues:m=[],selectedValues:p=[],onValueToggle:v,width:j,onResize:y})=>{const b=a.key===t,N=n==="number"||n==="currency",k=D=>{D.preventDefault(),D.stopPropagation();const E=D.pageX,P=j,C=A=>{const _=Math.max(80,P+(A.pageX-E));y(t,_)},O=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",O)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",O)};return r.jsxs(le,{className:"relative p-0 h-10 border-r border-gray-100 last:border-r-0 group/head",style:{width:"".concat(j,"px"),minWidth:"".concat(j,"px"),maxWidth:"".concat(j,"px")},children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-3 py-2 cursor-pointer hover:bg-gray-100 transition-colors ".concat(b?"bg-orange-50":""),onClick:()=>s(t),children:[r.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[r.jsx("span",{className:"text-[11px] font-black uppercase tracking-wider truncate ".concat(b?"text-hd-orange":"text-gray-500"),children:e}),b?a.direction==="asc"?r.jsx(Gn,{size:12,className:"text-hd-orange"}):r.jsx(Jr,{size:12,className:"text-hd-orange"}):r.jsx(Uu,{size:12,className:"text-gray-300 opacity-0 group-hover/head:opacity-100 transition-opacity"})]}),r.jsx("button",{onClick:D=>o(t,D),className:"p-1 rounded hover:bg-gray-200 transition-colors ".concat(c||p&&p.length>0?"text-hd-orange":"text-gray-400"),children:r.jsx(Vu,{size:12})})]}),r.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-hd-orange opacity-0 hover:opacity-100 z-10 transition-opacity",onMouseDown:k,onClick:D=>D.stopPropagation()}),l&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:D=>D.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b bg-gray-50",children:[r.jsxs("div",{className:"flex items-center px-4 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-bold",onClick:()=>{s(t),o(t,{stopPropagation:()=>{}})},children:[r.jsx(Gn,{size:14,className:"mr-2 text-gray-400"})," Orden Ascendente"]}),r.jsxs("div",{className:"flex items-center px-4 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-bold",onClick:()=>{s(t),o(t,{stopPropagation:()=>{}})},children:[r.jsx(Jr,{size:14,className:"mr-2 text-gray-400"})," Orden Descendente"]})]}),r.jsx("div",{className:"p-3 border-b",children:N?r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ge,{type:"number",placeholder:"Min",value:h.min,onChange:D=>u(t,"min",D.target.value),className:"h-8 text-xs font-mono"}),r.jsx(ge,{type:"number",placeholder:"Max",value:h.max,onChange:D=>u(t,"max",D.target.value),className:"h-8 text-xs font-mono"})]}):r.jsxs("div",{className:"relative",children:[r.jsx(Yt,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",size:14}),r.jsx(ge,{placeholder:"Buscar...",value:c,onChange:D=>f(t,D.target.value),className:"h-8 pl-8 text-xs border-gray-200 shadow-inner",autoFocus:!0})]})}),r.jsx("div",{className:"max-h-56 overflow-y-auto p-1 bg-gray-50",children:r.jsxs("div",{className:"space-y-0.5",children:[m.slice(0,100).map(D=>r.jsxs("label",{className:"flex items-center px-3 py-1.5 hover:bg-white rounded cursor-pointer transition-colors group/item",children:[r.jsx("input",{type:"checkbox",checked:p.includes(D),onChange:()=>v(t,D),className:"h-3.5 w-3.5 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-600 truncate group-hover/item:text-black",children:D})]},D)),m.length>100&&r.jsx("div",{className:"p-2 text-[10px] text-gray-400 text-center",children:"Mostrando primeros 100..."})]})}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 border-t",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] h-7",onClick:()=>o(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] h-7 text-hd-orange font-bold uppercase",onClick:()=>{N?(u(t,"min",""),u(t,"max","")):(f(t,""),p.forEach(D=>v(t,D)))},children:"Limpiar"})]})]})]})},b7=(e,t,n="RD$")=>e==null?"-":t==="date"?new Date(e).toLocaleDateString("es-DO",{year:"numeric",month:"2-digit",day:"2-digit"}):t==="currency"?"".concat(n||"RD$"," ").concat(new Intl.NumberFormat("es-DO",{minimumFractionDigits:2}).format(e)):t==="number"?new Intl.NumberFormat("es-DO").format(e):String(e),j7=()=>{const e=[{field:"Numero",label:"No. Factura",type:"text",width:120},{field:"Fecha",label:"Fecha",type:"date",width:100},{field:"Proveedor",label:"Proveedor",type:"text",width:250},{field:"Moneda",label:"Moneda",type:"text",width:80},{field:"Total",label:"Total",type:"currency",width:120},{field:"Saldo",label:"Saldo Pend.",type:"currency",width:120},{field:"Estado",label:"Estado",type:"text",width:100},{field:"Almacen",label:"Almacn Dest.",type:"text",width:150},{field:"Antiguedad",label:"Antigedad (das)",type:"number",width:100}];return r.jsx(Vc,{endpoint:"/SmartList/Facturas",title:"SmartList: Facturas de Compra",columns:e})},w7=()=>{const e=[{field:"Fecha",label:"Fecha",type:"date",width:100},{field:"Factura",label:"No. Factura",type:"text",width:120},{field:"Proveedor",label:"Proveedor",type:"text",width:220},{field:"Cod_Articulo",label:"Cdigo",type:"text",width:100},{field:"Articulo",label:"Descripcin Artculo",type:"text",width:300},{field:"Cantidad",label:"Cant.",type:"number",width:80},{field:"Unidad",label:"UM",type:"text",width:60},{field:"Costo",label:"Costo Unit.",type:"currency",width:110},{field:"Total_Linea",label:"Total Lnea",type:"currency",width:130},{field:"Almacen",label:"Almacn",type:"text",width:140}];return r.jsx(Vc,{endpoint:"/SmartList/Articulos",title:"SmartList: Detalle de Compras por Artculo",columns:e})},N7=()=>{const e=[{field:"Codigo",label:"Cdigo",type:"text",width:100},{field:"Proveedor",label:"Razn Social",type:"text",width:280},{field:"RNC",label:"RNC/Cdula",type:"text",width:120},{field:"Total_Comprado",label:"Total Comprado (RD$)",type:"currency",width:150},{field:"Saldo_Pendiente",label:"Saldo Actual (RD$)",type:"currency",width:150},{field:"Cant_Facturas",label:"Facturas",type:"number",width:100},{field:"Telefono",label:"Telfono",type:"text",width:120},{field:"Email",label:"Correo Electrnico",type:"text",width:200}];return r.jsx(Vc,{endpoint:"/SmartList/Proveedores",title:"SmartList: Maestro de Proveedores y Balances",columns:e})},S7=()=>{const e=[{field:"Fecha",label:"Fecha Pago",type:"date",width:110},{field:"No_Pago",label:"No. Recibo",type:"text",width:120},{field:"Proveedor",label:"Proveedor",type:"text",width:250},{field:"Monto_A_Factura",label:"Monto Aplicado",type:"currency",width:130},{field:"Factura_Afectada",label:"Factura Pagada",type:"text",width:130},{field:"Metodo",label:"Mtodo",type:"text",width:100},{field:"Referencia",label:"Referencia",type:"text",width:180},{field:"Estado_Pago",label:"Estado",type:"text",width:100}];return r.jsx(Vc,{endpoint:"/SmartList/Pagos",title:"SmartList: Histrico de Pagos Aplicados",columns:e})},C7=()=>{const e=[{field:"Almacen",label:"Ubicacin / Almacn",type:"text",width:200},{field:"Codigo",label:"Cdigo Art.",type:"text",width:120},{field:"Articulo",label:"Descripcin del Artculo",type:"text",width:350},{field:"Unidad",label:"Unidad",type:"text",width:80},{field:"Stock_Total",label:"Existencia",type:"number",width:100},{field:"Costo_Ultimo",label:"Costo Unit.",type:"currency",width:120},{field:"Valor_Inventario",label:"Valor Total",type:"currency",width:140}];return r.jsx(Vc,{endpoint:"/SmartList/StockAlmacen",title:"SmartList: Inventario y Valoracin por Almacn",columns:e})},k7=()=>{const e=[{field:"Fecha",label:"Fecha",type:"date",width:110},{field:"No_Factura",label:"No. Factura",type:"text",width:130},{field:"Cliente",label:"Cliente",type:"text",width:200},{field:"NCF",label:"NCF",type:"text",width:140},{field:"Metodo_Pago",label:"Mtodo de Pago",type:"text",width:130},{field:"Monto_Recibido",label:"Monto Recibido",type:"currency",width:130},{field:"Cambio",label:"Cambio",type:"currency",width:100},{field:"Total",label:"Total",type:"currency",width:120},{field:"Estado",label:"Estado",type:"text",width:100}];return r.jsx(Vc,{endpoint:"/SmartList/Cobros",title:"SmartList: Cobros y Mtodos de Pago",columns:e})};var P7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Uj(e){if(typeof e!="string")return!1;var t=P7;return t.includes(e)}var E7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],A7=new Set(E7);function N5(e){return typeof e!="string"?!1:A7.has(e)}function S5(e){return typeof e=="string"&&e.startsWith("data-")}function Pa(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(N5(n)||S5(n))&&(t[n]=e[n]);return t}function kc(e){if(e==null)return null;if(x.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Pa(t)}return typeof e=="object"&&!Array.isArray(e)?Pa(e):null}function Hn(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(N5(n)||S5(n)||Uj(n))&&(t[n]=e[n]);return t}function I7(e){return e==null?null:x.isValidElement(e)?Hn(e.props):typeof e=="object"&&!Array.isArray(e)?Hn(e):null}var D7=["children","width","height","viewBox","className","style","title","desc"];function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fb.apply(null,arguments)}function O7(e,t){if(e==null)return{};var n,a,s=M7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function M7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var C5=x.forwardRef((e,t)=>{var{children:n,width:a,height:s,viewBox:o,className:l,style:c,title:f,desc:h}=e,u=O7(e,D7),m=o||{width:a,height:s,x:0,y:0},p=Zt("recharts-surface",l);return x.createElement("svg",fb({},Hn(u),{className:p,width:a,height:s,style:c,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),x.createElement("title",null,f),x.createElement("desc",null,h),n)}),T7=["children","className"];function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hb.apply(null,arguments)}function _7(e,t){if(e==null)return{};var n,a,s=R7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function R7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Sn=x.forwardRef((e,t)=>{var{children:n,className:a}=e,s=_7(e,T7),o=Zt("recharts-layer",a);return x.createElement("g",hb({className:o},Hn(s),{ref:t}),n)}),$7=x.createContext(null);function dr(e){return function(){return e}}const k5=Math.cos,Im=Math.sin,ms=Math.sqrt,Dm=Math.PI,Hp=2*Dm,mb=Math.PI,pb=2*mb,Wi=1e-6,F7=pb-Wi;function P5(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function L7(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return P5;const n=10**t;return function(a){this._+=a[0];for(let s=1,o=a.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}var mD,pD,gD,xD,vD,yD,bD,jD,wD,ND,SD,CD,kD,PD;class z7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?P5:L7(t)}moveTo(t,n){this._append(mD||(mD=Qt(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+n)}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append(pD||(pD=Qt(["Z"]))))}lineTo(t,n){this._append(gD||(gD=Qt(["L",",",""])),this._x1=+t,this._y1=+n)}quadraticCurveTo(t,n,a,s){this._append(xD||(xD=Qt(["Q",",",",",",",""])),+t,+n,this._x1=+a,this._y1=+s)}bezierCurveTo(t,n,a,s,o,l){this._append(vD||(vD=Qt(["C",",",",",",",",",",",""])),+t,+n,+a,+s,this._x1=+o,this._y1=+l)}arcTo(t,n,a,s,o){if(t=+t,n=+n,a=+a,s=+s,o=+o,o<0)throw new Error("negative radius: ".concat(o));let l=this._x1,c=this._y1,f=a-t,h=s-n,u=l-t,m=c-n,p=u*u+m*m;if(this._x1===null)this._append(yD||(yD=Qt(["M",",",""])),this._x1=t,this._y1=n);else if(p>Wi)if(!(Math.abs(m*f-h*u)>Wi)||!o)this._append(bD||(bD=Qt(["L",",",""])),this._x1=t,this._y1=n);else{let v=a-l,j=s-c,y=f*f+h*h,b=v*v+j*j,N=Math.sqrt(y),k=Math.sqrt(p),D=o*Math.tan((mb-Math.acos((y+p-b)/(2*N*k)))/2),E=D/k,P=D/N;Math.abs(E-1)>Wi&&this._append(jD||(jD=Qt(["L",",",""])),t+E*u,n+E*m),this._append(wD||(wD=Qt(["A",",",",0,0,",",",",",""])),o,o,+(m*v>u*j),this._x1=t+P*f,this._y1=n+P*h)}}arc(t,n,a,s,o,l){if(t=+t,n=+n,a=+a,l=!!l,a<0)throw new Error("negative radius: ".concat(a));let c=a*Math.cos(s),f=a*Math.sin(s),h=t+c,u=n+f,m=1^l,p=l?s-o:o-s;this._x1===null?this._append(ND||(ND=Qt(["M",",",""])),h,u):(Math.abs(this._x1-h)>Wi||Math.abs(this._y1-u)>Wi)&&this._append(SD||(SD=Qt(["L",",",""])),h,u),a&&(p<0&&(p=p%pb+pb),p>F7?this._append(CD||(CD=Qt(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),a,a,m,t-c,n-f,a,a,m,this._x1=h,this._y1=u):p>Wi&&this._append(kD||(kD=Qt(["A",",",",0,",",",",",",",""])),a,a,+(p>=mb),m,this._x1=t+a*Math.cos(o),this._y1=n+a*Math.sin(o)))}rect(t,n,a,s){this._append(PD||(PD=Qt(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+n,a=+a,+s,-a)}toString(){return this._}}function Vj(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError("invalid digits: ".concat(n));t=a}return e},()=>new z7(t)}function qj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function E5(e){this._context=e}E5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wp(e){return new E5(e)}function A5(e){return e[0]}function I5(e){return e[1]}function D5(e,t){var n=dr(!0),a=null,s=Wp,o=null,l=Vj(c);e=typeof e=="function"?e:e===void 0?A5:dr(e),t=typeof t=="function"?t:t===void 0?I5:dr(t);function c(f){var h,u=(f=qj(f)).length,m,p=!1,v;for(a==null&&(o=s(v=l())),h=0;h<=u;++h)!(h<u&&n(m=f[h],h,f))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(m,h,f),+t(m,h,f));if(v)return o=null,v+""||null}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),c):e},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),c):t},c.defined=function(f){return arguments.length?(n=typeof f=="function"?f:dr(!!f),c):n},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}function $h(e,t,n){var a=null,s=dr(!0),o=null,l=Wp,c=null,f=Vj(h);e=typeof e=="function"?e:e===void 0?A5:dr(+e),t=typeof t=="function"?t:dr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?I5:dr(+n);function h(m){var p,v,j,y=(m=qj(m)).length,b,N=!1,k,D=new Array(y),E=new Array(y);for(o==null&&(c=l(k=f())),p=0;p<=y;++p){if(!(p<y&&s(b=m[p],p,m))===N)if(N=!N)v=p,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),j=p-1;j>=v;--j)c.point(D[j],E[j]);c.lineEnd(),c.areaEnd()}N&&(D[p]=+e(b,p,m),E[p]=+t(b,p,m),c.point(a?+a(b,p,m):D[p],n?+n(b,p,m):E[p]))}if(k)return c=null,k+""||null}function u(){return D5().defined(s).curve(l).context(o)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:dr(+m),a=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:dr(+m),h):e},h.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:dr(+m),h):a},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:dr(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:dr(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:dr(+m),h):n},h.lineX0=h.lineY0=function(){return u().x(e).y(t)},h.lineY1=function(){return u().x(e).y(n)},h.lineX1=function(){return u().x(a).y(t)},h.defined=function(m){return arguments.length?(s=typeof m=="function"?m:dr(!!m),h):s},h.curve=function(m){return arguments.length?(l=m,o!=null&&(c=l(o)),h):l},h.context=function(m){return arguments.length?(m==null?o=c=null:c=l(o=m),h):o},h}class O5{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function B7(e){return new O5(e,!0)}function U7(e){return new O5(e,!1)}const Gj={draw(e,t){const n=ms(t/Dm);e.moveTo(n,0),e.arc(0,0,n,0,Hp)}},V7={draw(e,t){const n=ms(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},M5=ms(1/3),q7=M5*2,G7={draw(e,t){const n=ms(t/q7),a=n*M5;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},H7={draw(e,t){const n=ms(t),a=-n/2;e.rect(a,a,n,n)}},W7=.8908130915292852,T5=Im(Dm/10)/Im(7*Dm/10),K7=Im(Hp/10)*T5,Y7=-k5(Hp/10)*T5,X7={draw(e,t){const n=ms(t*W7),a=K7*n,s=Y7*n;e.moveTo(0,-n),e.lineTo(a,s);for(let o=1;o<5;++o){const l=Hp*o/5,c=k5(l),f=Im(l);e.lineTo(f*n,-c*n),e.lineTo(c*a-f*s,f*a+c*s)}e.closePath()}},W0=ms(3),J7={draw(e,t){const n=-ms(t/(W0*3));e.moveTo(0,n*2),e.lineTo(-W0*n,-n),e.lineTo(W0*n,-n),e.closePath()}},Ra=-.5,$a=ms(3)/2,gb=1/ms(12),Q7=(gb/2+1)*3,Z7={draw(e,t){const n=ms(t/Q7),a=n/2,s=n*gb,o=a,l=n*gb+n,c=-o,f=l;e.moveTo(a,s),e.lineTo(o,l),e.lineTo(c,f),e.lineTo(Ra*a-$a*s,$a*a+Ra*s),e.lineTo(Ra*o-$a*l,$a*o+Ra*l),e.lineTo(Ra*c-$a*f,$a*c+Ra*f),e.lineTo(Ra*a+$a*s,Ra*s-$a*a),e.lineTo(Ra*o+$a*l,Ra*l-$a*o),e.lineTo(Ra*c+$a*f,Ra*f-$a*c),e.closePath()}};function eV(e,t){let n=null,a=Vj(s);e=typeof e=="function"?e:dr(e||Gj),t=typeof t=="function"?t:dr(t===void 0?64:+t);function s(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return s.type=function(o){return arguments.length?(e=typeof o=="function"?o:dr(o),s):e},s.size=function(o){return arguments.length?(t=typeof o=="function"?o:dr(+o),s):t},s.context=function(o){return arguments.length?(n=o==null?null:o,s):n},s}function Om(){}function Mm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function _5(e){this._context=e}_5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tV(e){return new _5(e)}function R5(e){this._context=e}R5.prototype={areaStart:Om,areaEnd:Om,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rV(e){return new R5(e)}function $5(e){this._context=e}$5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Mm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nV(e){return new $5(e)}function F5(e){this._context=e}F5.prototype={areaStart:Om,areaEnd:Om,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function aV(e){return new F5(e)}function E2(e){return e<0?-1:1}function A2(e,t,n){var a=e._x1-e._x0,s=t-e._x1,o=(e._y1-e._y0)/(a||s<0&&-0),l=(n-e._y1)/(s||a<0&&-0),c=(o*s+l*a)/(a+s);return(E2(o)+E2(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(c))||0}function I2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function K0(e,t,n){var a=e._x0,s=e._y0,o=e._x1,l=e._y1,c=(o-a)/3;e._context.bezierCurveTo(a+c,s+c*t,o-c,l-c*n,o,l)}function Tm(e){this._context=e}Tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K0(this,this._t0,I2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,K0(this,I2(this,n=A2(this,e,t)),n);break;default:K0(this,this._t0,n=A2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function L5(e){this._context=new z5(e)}(L5.prototype=Object.create(Tm.prototype)).point=function(e,t){Tm.prototype.point.call(this,t,e)};function z5(e){this._context=e}z5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,o){this._context.bezierCurveTo(t,e,a,n,o,s)}};function sV(e){return new Tm(e)}function oV(e){return new L5(e)}function B5(e){this._context=e}B5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=D2(e),s=D2(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(a[0][o],s[0][o],a[1][o],s[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function D2(e){var t,n=e.length-1,a,s=new Array(n),o=new Array(n),l=new Array(n);for(s[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/o[t-1],o[t]-=a,l[t]-=a*l[t-1];for(s[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)s[t]=(l[t]-s[t+1])/o[t];for(o[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function iV(e){return new B5(e)}function Kp(e,t){this._context=e,this._t=t}Kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function lV(e){return new Kp(e,.5)}function cV(e){return new Kp(e,0)}function dV(e){return new Kp(e,1)}function fl(e,t){if((l=e.length)>1)for(var n=1,a,s,o=e[t[0]],l,c=o.length;n<l;++n)for(s=o,o=e[t[n]],a=0;a<c;++a)o[a][1]+=o[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function xb(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function uV(e,t){return e[t]}function fV(e){const t=[];return t.key=e,t}function hV(){var e=dr([]),t=xb,n=fl,a=uV;function s(o){var l=Array.from(e.apply(this,arguments),fV),c,f=l.length,h=-1,u;for(const m of o)for(c=0,++h;c<f;++c)(l[c][h]=[0,+a(m,l[c].key,h,o)]).data=m;for(c=0,u=qj(t(l));c<f;++c)l[u[c]].index=c;return n(l,u),l}return s.keys=function(o){return arguments.length?(e=typeof o=="function"?o:dr(Array.from(o)),s):e},s.value=function(o){return arguments.length?(a=typeof o=="function"?o:dr(+o),s):a},s.order=function(o){return arguments.length?(t=o==null?xb:typeof o=="function"?o:dr(Array.from(o)),s):t},s.offset=function(o){return arguments.length?(n=o==null?fl:o,s):n},s}function mV(e,t){if((a=e.length)>0){for(var n,a,s=0,o=e[0].length,l;s<o;++s){for(l=n=0;n<a;++n)l+=e[n][s][1]||0;if(l)for(n=0;n<a;++n)e[n][s][1]/=l}fl(e,t)}}function pV(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,o=a.length;n<o;++n){for(var l=0,c=0;l<s;++l)c+=e[l][n][1]||0;a[n][1]+=a[n][0]=-c/2}fl(e,t)}}function gV(e,t){if(!(!((l=e.length)>0)||!((o=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,o,l;a<o;++a){for(var c=0,f=0,h=0;c<l;++c){for(var u=e[t[c]],m=u[a][1]||0,p=u[a-1][1]||0,v=(m-p)/2,j=0;j<c;++j){var y=e[t[j]],b=y[a][1]||0,N=y[a-1][1]||0;v+=b-N}f+=m,h+=v*m}s[a-1][1]+=s[a-1][0]=n,f&&(n-=h/f)}s[a-1][1]+=s[a-1][0]=n,fl(e,t)}}var Y0={},X0={},O2;function xV(){return O2||(O2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(X0)),X0}var J0={},M2;function U5(){return M2||(M2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(J0)),J0}var Q0={},T2;function Hj(){return T2||(T2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var a;return typeof n=="string"||typeof n=="symbol"?n:Object.is((a=n==null?void 0:n.valueOf)==null?void 0:a.call(n),-0)?"-0":String(n)}e.toKey=t})(Q0)),Q0}var Z0={},ev={},_2;function vV(){return _2||(_2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(ev)),ev}var R2;function Wj(){return R2||(R2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vV(),n=Hj();function a(s){if(Array.isArray(s))return s.map(n.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const o=[],l=s.length;if(l===0)return o;let c=0,f="",h="",u=!1;for(s.charCodeAt(0)===46&&(o.push(""),c++);c<l;){const m=s[c];h?m==="\\"&&c+1<l?(c++,f+=s[c]):m===h?h="":f+=m:u?m==='"'||m==="'"?h=m:m==="]"?(u=!1,o.push(f),f=""):f+=m:m==="["?(u=!0,f&&(o.push(f),f="")):m==="."?f&&(o.push(f),f=""):f+=m,c++}return f&&o.push(f),o}e.toPath=a})(Z0)),Z0}var $2;function Kj(){return $2||($2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xV(),n=U5(),a=Hj(),s=Wj();function o(c,f,h){if(c==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const u=c[f];return u===void 0?n.isDeepKey(f)?o(c,s.toPath(f),h):h:u}case"number":case"symbol":{typeof f=="number"&&(f=a.toKey(f));const u=c[f];return u===void 0?h:u}default:{if(Array.isArray(f))return l(c,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const u=c[f];return u===void 0?h:u}}}function l(c,f,h){if(f.length===0)return h;let u=c;for(let m=0;m<f.length;m++){if(u==null||t.isUnsafeProperty(f[m]))return h;u=u[f[m]]}return u===void 0?h:u}e.get=o})(Y0)),Y0}var tv,F2;function yV(){return F2||(F2=1,tv=Kj().get),tv}var bV=yV();const hl=Ts(bV);var jV=4;function ni(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jV,n=10**t,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function Dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((s,o,l)=>{var c=n[l-1];return typeof c=="string"?s+c+o:c!==void 0?s+ni(c)+o:s+o},"")}var $n=e=>e===0?0:e>0?1:-1,us=e=>typeof e=="number"&&e!=+e,co=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,lt=e=>(typeof e=="number"||e instanceof Number)&&!us(e),Ds=e=>lt(e)||typeof e=="string",wV=0,yu=e=>{var t=++wV;return"".concat(e||"").concat(t)},wa=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&typeof t!="string")return a;var o;if(co(t)){if(n==null)return a;var l=t.indexOf("%");o=n*parseFloat(t.slice(0,l))/100}else o=+t;return us(o)&&(o=a),s&&n!=null&&o>n&&(o=n),o},V5=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function jn(e,t,n){return lt(e)&&lt(t)?ni(e+n*(t-e)):t}function q5(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):hl(a,t))===n)}var fn=e=>e===null||typeof e>"u",Ju=e=>fn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function NV(e){return e!=null}function Qu(){}var SV=["type","size","sizeType"];function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vb.apply(null,arguments)}function L2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function z2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(n),!0).forEach(function(a){CV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function CV(e,t,n){return(t=kV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kV(e){var t=PV(e,"string");return typeof t=="symbol"?t:t+""}function PV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EV(e,t){if(e==null)return{};var n,a,s=AV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function AV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var G5={symbolCircle:Gj,symbolCross:V7,symbolDiamond:G7,symbolSquare:H7,symbolStar:X7,symbolTriangle:J7,symbolWye:Z7},IV=Math.PI/180,DV=e=>{var t="symbol".concat(Ju(e));return G5[t]||Gj},OV=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*IV;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},MV=(e,t)=>{G5["symbol".concat(Ju(e))]=t},H5=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,s=EV(e,SV),o=z2(z2({},s),{},{type:t,size:n,sizeType:a}),l="circle";typeof t=="string"&&(l=t);var c=()=>{var p=DV(l),v=eV().type(p).size(OV(n,a,l)),j=v();if(j!==null)return j},{className:f,cx:h,cy:u}=o,m=Hn(o);return lt(h)&&lt(u)&&lt(n)?x.createElement("path",vb({},m,{className:Zt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(u,")"),d:c()})):null};H5.registerSymbol=MV;var W5=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Yj=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{Uj(s)&&(a[s]=(o=>n[s](n,o)))}),a},TV=(e,t,n)=>a=>(e(t,n,a),null),K5=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var o=e[s];Uj(s)&&typeof o=="function"&&(a||(a={}),a[s]=TV(o,t,n))}),a};function B2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function _V(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(n),!0).forEach(function(a){RV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RV(e,t,n){return(t=$V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $V(e){var t=FV(e,"string");return typeof t=="symbol"?t:t+""}function FV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cn(e,t){var n=_V({},e),a=t,s=Object.keys(t),o=s.reduce((l,c)=>(l[c]===void 0&&a[c]!==void 0&&(l[c]=a[c]),l),n);return o}var rv={},nv={},U2;function LV(){return U2||(U2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const s=new Map;for(let o=0;o<n.length;o++){const l=n[o],c=a(l);s.has(c)||s.set(c,l)}return Array.from(s.values())}e.uniqBy=t})(nv)),nv}var av={},V2;function Y5(){return V2||(V2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(av)),av}var sv={},ov={},iv={},q2;function zV(){return q2||(q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(iv)),iv}var G2;function Xj(){return G2||(G2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zV();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(ov)),ov}var lv={},H2;function BV(){return H2||(H2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(lv)),lv}var W2;function UV(){return W2||(W2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xj(),n=BV();function a(s){return n.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a})(sv)),sv}var cv={},dv={},K2;function VV(){return K2||(K2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kj();function n(a){return function(s){return t.get(s,a)}}e.property=n})(dv)),dv}var uv={},fv={},hv={},mv={},Y2;function X5(){return Y2||(Y2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(mv)),mv}var pv={},X2;function J5(){return X2||(X2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(pv)),pv}var gv={},J2;function Q5(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=t})(gv)),gv}var Q2;function qV(){return Q2||(Q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X5(),n=J5(),a=Q5();function s(u,m,p){return typeof p!="function"?s(u,m,()=>{}):o(u,m,function v(j,y,b,N,k,D){const E=p(j,y,b,N,k,D);return E!==void 0?!!E:o(j,y,v,D)},new Map)}function o(u,m,p,v){if(m===u)return!0;switch(typeof m){case"object":return l(u,m,p,v);case"function":return Object.keys(m).length>0?o(u,{...m},p,v):a.eq(u,m);default:return t.isObject(u)?typeof m=="string"?m==="":!0:a.eq(u,m)}}function l(u,m,p,v){if(m==null)return!0;if(Array.isArray(m))return f(u,m,p,v);if(m instanceof Map)return c(u,m,p,v);if(m instanceof Set)return h(u,m,p,v);const j=Object.keys(m);if(u==null||n.isPrimitive(u))return j.length===0;if(j.length===0)return!0;if(v!=null&&v.has(m))return v.get(m)===u;v==null||v.set(m,u);try{for(let y=0;y<j.length;y++){const b=j[y];if(!n.isPrimitive(u)&&!(b in u)||m[b]===void 0&&u[b]!==void 0||m[b]===null&&u[b]!==null||!p(u[b],m[b],b,u,m,v))return!1}return!0}finally{v==null||v.delete(m)}}function c(u,m,p,v){if(m.size===0)return!0;if(!(u instanceof Map))return!1;for(const[j,y]of m.entries()){const b=u.get(j);if(p(b,y,j,u,m,v)===!1)return!1}return!0}function f(u,m,p,v){if(m.length===0)return!0;if(!Array.isArray(u))return!1;const j=new Set;for(let y=0;y<m.length;y++){const b=m[y];let N=!1;for(let k=0;k<u.length;k++){if(j.has(k))continue;const D=u[k];let E=!1;if(p(D,b,y,u,m,v)&&(E=!0),E){j.add(k),N=!0;break}}if(!N)return!1}return!0}function h(u,m,p,v){return m.size===0?!0:u instanceof Set?f([...u],[...m],p,v):!1}e.isMatchWith=s,e.isSetMatch=h})(hv)),hv}var Z2;function Z5(){return Z2||(Z2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qV();function n(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=n})(fv)),fv}var xv={},vv={},yv={},ek;function GV(){return ek||(ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(yv)),yv}var bv={},tk;function e4(){return tk||(tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(bv)),bv}var jv={},rk;function t4(){return rk||(rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",s="[object Boolean]",o="[object Arguments]",l="[object Symbol]",c="[object Date]",f="[object Map]",h="[object Set]",u="[object Array]",m="[object Function]",p="[object ArrayBuffer]",v="[object Object]",j="[object Error]",y="[object DataView]",b="[object Uint8Array]",N="[object Uint8ClampedArray]",k="[object Uint16Array]",D="[object Uint32Array]",E="[object BigUint64Array]",P="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",A="[object BigInt64Array]",_="[object Float32Array]",z="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=E,e.booleanTag=s,e.dataViewTag=y,e.dateTag=c,e.errorTag=j,e.float32ArrayTag=_,e.float64ArrayTag=z,e.functionTag=m,e.int16ArrayTag=C,e.int32ArrayTag=O,e.int8ArrayTag=P,e.mapTag=f,e.numberTag=a,e.objectTag=v,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=k,e.uint32ArrayTag=D,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=N})(jv)),jv}var wv={},nk;function HV(){return nk||(nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(wv)),wv}var ak;function r4(){return ak||(ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GV(),n=e4(),a=t4(),s=J5(),o=HV();function l(u,m){return c(u,void 0,u,new Map,m)}function c(u,m,p,v=new Map,j=void 0){const y=j==null?void 0:j(u,m,p,v);if(y!==void 0)return y;if(s.isPrimitive(u))return u;if(v.has(u))return v.get(u);if(Array.isArray(u)){const b=new Array(u.length);v.set(u,b);for(let N=0;N<u.length;N++)b[N]=c(u[N],N,p,v,j);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;v.set(u,b);for(const[N,k]of u)b.set(N,c(k,N,p,v,j));return b}if(u instanceof Set){const b=new Set;v.set(u,b);for(const N of u)b.add(c(N,void 0,p,v,j));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(o.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);v.set(u,b);for(let N=0;N<u.length;N++)b[N]=c(u[N],N,p,v,j);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return v.set(u,b),f(b,u,p,v,j),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return v.set(u,b),f(b,u,p,v,j),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return v.set(u,b),f(b,u,p,v,j),b}if(u instanceof Error){const b=new u.constructor;return v.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,f(b,u,p,v,j),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return v.set(u,b),f(b,u,p,v,j),b}if(u instanceof Number){const b=new Number(u.valueOf());return v.set(u,b),f(b,u,p,v,j),b}if(u instanceof String){const b=new String(u.valueOf());return v.set(u,b),f(b,u,p,v,j),b}if(typeof u=="object"&&h(u)){const b=Object.create(Object.getPrototypeOf(u));return v.set(u,b),f(b,u,p,v,j),b}return u}function f(u,m,p=u,v,j){const y=[...Object.keys(m),...t.getSymbols(m)];for(let b=0;b<y.length;b++){const N=y[b],k=Object.getOwnPropertyDescriptor(u,N);(k==null||k.writable)&&(u[N]=c(m[N],N,p,v,j))}}function h(u){switch(n.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=c,e.copyProperties=f})(vv)),vv}var sk;function WV(){return sk||(sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r4();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(xv)),xv}var ok;function KV(){return ok||(ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z5(),n=WV();function a(s){return s=n.cloneDeep(s),o=>t.isMatch(o,s)}e.matches=a})(uv)),uv}var Nv={},Sv={},Cv={},ik;function YV(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r4(),n=t4();function a(s,o){return t.cloneDeepWith(s,(l,c,f,h)=>{const u=o==null?void 0:o(l,c,f,h);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(m,s),m}case n.argumentsTag:{const m={};return t.copyProperties(m,s),m.length=s.length,m[Symbol.iterator]=s[Symbol.iterator],m}default:return}})}e.cloneDeepWith=a})(Cv)),Cv}var lk;function XV(){return lk||(lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YV();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(Sv)),Sv}var kv={},Pv={},ck;function n4(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(Pv)),Pv}var Ev={},dk;function JV(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e4();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(Ev)),Ev}var uk;function QV(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5(),n=n4(),a=JV(),s=Wj();function o(l,c){let f;if(Array.isArray(c)?f=c:typeof c=="string"&&t.isDeepKey(c)&&(l==null?void 0:l[c])==null?f=s.toPath(c):f=[c],f.length===0)return!1;let h=l;for(let u=0;u<f.length;u++){const m=f[u];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||a.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=o})(kv)),kv}var fk;function ZV(){return fk||(fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z5(),n=Hj(),a=XV(),s=Kj(),o=QV();function l(c,f){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return f=a.cloneDeep(f),function(h){const u=s.get(h,c);return u===void 0?o.has(h,c):f===void 0?u===void 0:t.isMatch(u,f)}}e.matchesProperty=l})(Nv)),Nv}var hk;function e9(){return hk||(hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y5(),n=VV(),a=KV(),s=ZV();function o(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):a.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=o})(cv)),cv}var mk;function t9(){return mk||(mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LV(),n=Y5(),a=UV(),s=e9();function o(l,c=n.identity){return a.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(c)):[]}e.uniqBy=o})(rv)),rv}var Av,pk;function r9(){return pk||(pk=1,Av=t9().uniqBy),Av}var n9=r9();const gk=Ts(n9);function a9(e,t,n){return t===!0?gk(e,n):typeof t=="function"?gk(e,t):e}var Iv={exports:{}},Dv={},Ov={exports:{}},Mv={};var xk;function s9(){if(xk)return Mv;xk=1;var e=Rc();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(m,p){var v=p(),j=a({inst:{value:v,getSnapshot:p}}),y=j[0].inst,b=j[1];return o(function(){y.value=v,y.getSnapshot=p,f(y)&&b({inst:y})},[m,v,p]),s(function(){return f(y)&&b({inst:y}),m(function(){f(y)&&b({inst:y})})},[m]),l(v),v}function f(m){var p=m.getSnapshot;m=m.value;try{var v=p();return!n(m,v)}catch(j){return!0}}function h(m,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Mv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Mv}var vk;function o9(){return vk||(vk=1,Ov.exports=s9()),Ov.exports}var yk;function i9(){if(yk)return Dv;yk=1;var e=Rc(),t=o9();function n(h,u){return h===u&&(h!==0||1/h===1/u)||h!==h&&u!==u}var a=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,c=e.useMemo,f=e.useDebugValue;return Dv.useSyncExternalStoreWithSelector=function(h,u,m,p,v){var j=o(null);if(j.current===null){var y={hasValue:!1,value:null};j.current=y}else y=j.current;j=c(function(){function N(C){if(!k){if(k=!0,D=C,C=p(C),v!==void 0&&y.hasValue){var O=y.value;if(v(O,C))return E=O}return E=C}if(O=E,a(D,C))return O;var A=p(C);return v!==void 0&&v(O,A)?(D=C,O):(D=C,E=A)}var k=!1,D,E,P=m===void 0?null:m;return[function(){return N(u())},P===null?void 0:function(){return N(P())}]},[u,m,p,v]);var b=s(h,j[0],j[1]);return l(function(){y.hasValue=!0,y.value=b},[b]),f(b),b},Dv}var bk;function l9(){return bk||(bk=1,Iv.exports=i9()),Iv.exports}var c9=l9(),Jj=x.createContext(null),d9=e=>e,br=()=>{var e=x.useContext(Jj);return e?e.store.dispatch:d9},sm=()=>{},u9=()=>sm,f9=(e,t)=>e===t;function pt(e){var t=x.useContext(Jj);return c9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:u9,t?t.store.getState:sm,t?t.store.getState:sm,t?e:sm,f9)}function h9(e,t="expected a function, instead received ".concat(typeof e)){if(typeof e!="function")throw new TypeError(t)}function m9(e,t="expected an object, instead received ".concat(typeof e)){if(typeof e!="object")throw new TypeError(t)}function p9(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?"function ".concat(a.name||"unnamed","()"):typeof a).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}var jk=e=>Array.isArray(e)?e:[e];function g9(e){const t=Array.isArray(e[0])?e[0]:e;return p9(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function x9(e,t){const n=[],{length:a}=e;for(let s=0;s<a;s++)n.push(e[s].apply(null,t));return n}var v9=class{constructor(e){this.value=e}deref(){return this.value}},y9=typeof WeakRef<"u"?WeakRef:v9,b9=0,wk=1;function Fh(){return{s:b9,v:void 0,o:null,p:null}}function a4(e,t={}){let n=Fh();const{resultEqualityCheck:a}=t;let s,o=0;function l(){var m,p;let c=n;const{length:f}=arguments;for(let v=0,j=f;v<j;v++){const y=arguments[v];if(typeof y=="function"||typeof y=="object"&&y!==null){let b=c.o;b===null&&(c.o=b=new WeakMap);const N=b.get(y);N===void 0?(c=Fh(),b.set(y,c)):c=N}else{let b=c.p;b===null&&(c.p=b=new Map);const N=b.get(y);N===void 0?(c=Fh(),b.set(y,c)):c=N}}const h=c;let u;if(c.s===wk)u=c.v;else if(u=e.apply(null,arguments),o++,a){const v=(p=(m=s==null?void 0:s.deref)==null?void 0:m.call(s))!=null?p:s;v!=null&&a(v,u)&&(u=v,o!==0&&o--),s=typeof u=="object"&&u!==null||typeof u=="function"?new y9(u):u}return h.s=wk,h.v=u,u}return l.clearCache=()=>{n=Fh(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function j9(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let o=0,l=0,c,f={},h=s.pop();typeof h=="object"&&(f=h,h=s.pop()),h9(h,"createSelector expects an output function after the inputs, but received: [".concat(typeof h,"]"));const u={...n,...f},{memoize:m,memoizeOptions:p=[],argsMemoize:v=a4,argsMemoizeOptions:j=[]}=u,y=jk(p),b=jk(j),N=g9(s),k=m(function(){return o++,h.apply(null,arguments)},...y),D=v(function(){l++;const P=x9(N,arguments);return c=k.apply(null,P),c},...b);return Object.assign(D,{resultFunc:h,memoizedResultFunc:k,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:m,argsMemoize:v})};return Object.assign(a,{withTypes:()=>a}),a}var ke=j9(a4),w9=Object.assign((e,t=ke)=>{m9(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((l,c,f)=>(l[n[f]]=c,l),{}))},{withTypes:()=>w9}),Tv={},_v={},Rv={},Nk;function N9(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,s,o)=>{if(a!==s){const l=t(a),c=t(s);if(l===c&&l===0){if(a<s)return o==="desc"?1:-1;if(a>s)return o==="desc"?-1:1}return o==="desc"?c-l:l-c}return 0};e.compareValues=n})(Rv)),Rv}var $v={},Fv={},Sk;function s4(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Fv)),Fv}var Ck;function S9(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s4(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(o,l){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||l!=null&&Object.hasOwn(l,o)}e.isKey=s})($v)),$v}var kk;function C9(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N9(),n=S9(),a=Wj();function s(o,l,c,f){if(o==null)return[];c=f?void 0:c,Array.isArray(o)||(o=Object.values(o)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(v=>String(v));const h=(v,j)=>{let y=v;for(let b=0;b<j.length&&y!=null;++b)y=y[j[b]];return y},u=(v,j)=>j==null||v==null?j:typeof v=="object"&&"key"in v?Object.hasOwn(j,v.key)?j[v.key]:h(j,v.path):typeof v=="function"?v(j):Array.isArray(v)?h(j,v):typeof j=="object"?j[v]:j,m=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:a.toPath(v)}));return o.map(v=>({original:v,criteria:m.map(j=>u(j,v))})).slice().sort((v,j)=>{for(let y=0;y<m.length;y++){const b=t.compareValues(v.criteria[y],j.criteria[y],c[y]);if(b!==0)return b}return 0}).map(v=>v.original)}e.orderBy=s})(_v)),_v}var Lv={},Pk;function k9(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const s=[],o=Math.floor(a),l=(c,f)=>{for(let h=0;h<c.length;h++){const u=c[h];Array.isArray(u)&&f<o?l(u,f+1):s.push(u)}};return l(n,0),s}e.flatten=t})(Lv)),Lv}var zv={},Ek;function o4(){return Ek||(Ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n4(),n=Xj(),a=X5(),s=Q5();function o(l,c,f){return a.isObject(f)&&(typeof c=="number"&&n.isArrayLike(f)&&t.isIndex(c)&&c<f.length||typeof c=="string"&&c in f)?s.eq(f[c],l):!1}e.isIterateeCall=o})(zv)),zv}var Ak;function P9(){return Ak||(Ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C9(),n=k9(),a=o4();function s(o,...l){const c=l.length;return c>1&&a.isIterateeCall(o,l[0],l[1])?l=[]:c>2&&a.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(o,n.flatten(l),["asc"])}e.sortBy=s})(Tv)),Tv}var Bv,Ik;function E9(){return Ik||(Ik=1,Bv=P9().sortBy),Bv}var A9=E9();const Yp=Ts(A9);var i4=e=>e.legend.settings,I9=e=>e.legend.size,D9=e=>e.legend.payload;ke([D9,i4],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?Yp(a,n):a});var Lh=1;function O9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=x.useState({height:0,left:0,top:0,width:0}),a=x.useCallback(s=>{if(s!=null){var o=s.getBoundingClientRect(),l={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(l.height-t.height)>Lh||Math.abs(l.left-t.left)>Lh||Math.abs(l.top-t.top)>Lh||Math.abs(l.width-t.width)>Lh)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function cn(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var M9=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dk=M9,Uv=()=>Math.random().toString(36).substring(7).split("").join("."),T9={INIT:"@@redux/INIT".concat(Uv()),REPLACE:"@@redux/REPLACE".concat(Uv()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Uv())},_m=T9;function Qj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Zj(e,t,n){if(typeof e!="function")throw new Error(cn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(cn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(cn(1));return n(Zj)(e,t)}let a=e,s=t,o=new Map,l=o,c=0,f=!1;function h(){l===o&&(l=new Map,o.forEach((b,N)=>{l.set(N,b)}))}function u(){if(f)throw new Error(cn(3));return s}function m(b){if(typeof b!="function")throw new Error(cn(4));if(f)throw new Error(cn(5));let N=!0;h();const k=c++;return l.set(k,b),function(){if(N){if(f)throw new Error(cn(6));N=!1,h(),l.delete(k),o=null}}}function p(b){if(!Qj(b))throw new Error(cn(7));if(typeof b.type>"u")throw new Error(cn(8));if(typeof b.type!="string")throw new Error(cn(17));if(f)throw new Error(cn(9));try{f=!0,s=a(s,b)}finally{f=!1}return(o=l).forEach(k=>{k()}),b}function v(b){if(typeof b!="function")throw new Error(cn(10));a=b,p({type:_m.REPLACE})}function j(){const b=m;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(cn(11));function k(){const E=N;E.next&&E.next(u())}return k(),{unsubscribe:b(k)}},[Dk](){return this}}}return p({type:_m.INIT}),{dispatch:p,subscribe:m,getState:u,replaceReducer:v,[Dk]:j}}function _9(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:_m.INIT})>"u")throw new Error(cn(12));if(typeof n(void 0,{type:_m.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cn(13))})}function l4(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(n[l]=e[l])}const a=Object.keys(n);let s;try{_9(n)}catch(o){s=o}return function(l={},c){if(s)throw s;let f=!1;const h={};for(let u=0;u<a.length;u++){const m=a[u],p=n[m],v=l[m],j=p(v,c);if(typeof j>"u")throw c&&c.type,new Error(cn(14));h[m]=j,f=f||j!==v}return f=f||a.length!==Object.keys(l).length,f?h:l}}function Ok(e,t){return function(...n){return t(e.apply(this,n))}}function Mk(e,t){if(typeof e=="function")return Ok(e,t);if(typeof e!="object"||e===null)throw new Error(cn(16));const n={};for(const a in e){const s=e[a];typeof s=="function"&&(n[a]=Ok(s,t))}return n}function bu(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function c4(...e){return t=>(n,a)=>{const s=t(n,a);let o=()=>{throw new Error(cn(15))};const l={getState:s.getState,dispatch:(f,...h)=>o(f,...h)},c=e.map(f=>f(l));return o=bu(...c)(s.dispatch),{...s,dispatch:o}}}function d4(e){return Qj(e)&&"type"in e&&typeof e.type=="string"}var u4=Symbol.for("immer-nothing"),Tk=Symbol.for("immer-draftable"),Wn=Symbol.for("immer-state");function as(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var ya=Object,Pc=ya.getPrototypeOf,Rm="constructor",Xp="prototype",yb="configurable",$m="enumerable",om="writable",ju="value",uo=e=>!!e&&!!e[Wn];function fs(e){var t;return e?f4(e)||Jp(e)||!!e[Tk]||!!((t=e[Rm])!=null&&t[Tk])||Qp(e)||Zp(e):!1}var R9=ya[Xp][Rm].toString(),_k=new WeakMap;function f4(e){if(!e||!ew(e))return!1;const t=Pc(e);if(t===null||t===ya[Xp])return!0;const n=ya.hasOwnProperty.call(t,Rm)&&t[Rm];if(n===Object)return!0;if(!hc(n))return!1;let a=_k.get(n);return a===void 0&&(a=Function.toString.call(n),_k.set(n,a)),a===R9}function Zu(e,t,n=!0){ef(e)===0?(n?Reflect.ownKeys(e):ya.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((a,s)=>t(s,a,e))}function ef(e){const t=e[Wn];return t?t.type_:Jp(e)?1:Qp(e)?2:Zp(e)?3:0}var Rk=(e,t,n=ef(e))=>n===2?e.has(t):ya[Xp].hasOwnProperty.call(e,t),bb=(e,t,n=ef(e))=>n===2?e.get(t):e[t],Fm=(e,t,n,a=ef(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function $9(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Jp=Array.isArray,Qp=e=>e instanceof Map,Zp=e=>e instanceof Set,ew=e=>typeof e=="object",hc=e=>typeof e=="function",Vv=e=>typeof e=="boolean";function F9(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Qs=e=>e.copy_||e.base_,tw=e=>e.modified_?e.copy_:e.base_;function jb(e,t){if(Qp(e))return new Map(e);if(Zp(e))return new Set(e);if(Jp(e))return Array[Xp].slice.call(e);const n=f4(e);if(t===!0||t==="class_only"&&!n){const a=ya.getOwnPropertyDescriptors(e);delete a[Wn];let s=Reflect.ownKeys(a);for(let o=0;o<s.length;o++){const l=s[o],c=a[l];c[om]===!1&&(c[om]=!0,c[yb]=!0),(c.get||c.set)&&(a[l]={[yb]:!0,[om]:!0,[$m]:c[$m],[ju]:e[l]})}return ya.create(Pc(e),a)}else{const a=Pc(e);if(a!==null&&n)return{...e};const s=ya.create(a);return ya.assign(s,e)}}function rw(e,t=!1){return eg(e)||uo(e)||!fs(e)||(ef(e)>1&&ya.defineProperties(e,{set:zh,add:zh,clear:zh,delete:zh}),ya.freeze(e),t&&Zu(e,(n,a)=>{rw(a,!0)},!1)),e}function L9(){as(2)}var zh={[ju]:L9};function eg(e){return e===null||!ew(e)?!0:ya.isFrozen(e)}var Lm="MapSet",wb="Patches",$k="ArrayMethods",h4={};function ml(e){const t=h4[e];return t||as(0,e),t}var Fk=e=>!!h4[e],wu,m4=()=>wu,z9=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Fk(Lm)?ml(Lm):void 0,arrayMethodsPlugin_:Fk($k)?ml($k):void 0});function Lk(e,t){t&&(e.patchPlugin_=ml(wb),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Nb(e){Sb(e),e.drafts_.forEach(B9),e.drafts_=null}function Sb(e){e===wu&&(wu=e.parent_)}var zk=e=>wu=z9(wu,e);function B9(e){const t=e[Wn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Bk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Wn].modified_&&(Nb(t),as(4)),fs(e)&&(e=Uk(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[Wn].base_,e,t)}else e=Uk(t,n);return U9(t,e,!0),Nb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==u4?e:void 0}function Uk(e,t){if(eg(t))return t;const n=t[Wn];if(!n)return nw(t,e.handledSet_,e);if(!tg(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);x4(n,e)}return n.copy_}function U9(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rw(t,n)}function p4(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var tg=(e,t)=>e.scope_===t,V9=[];function g4(e,t,n,a){var c;const s=Qs(e),o=e.type_;if(a!==void 0&&bb(s,a,o)===t){Fm(s,a,n,o);return}if(!e.draftLocations_){const f=e.draftLocations_=new Map;Zu(s,(h,u)=>{if(uo(u)){const m=f.get(u)||[];m.push(h),f.set(u,m)}})}const l=(c=e.draftLocations_.get(t))!=null?c:V9;for(const f of l)Fm(s,f,n,o)}function q9(e,t,n){e.callbacks_.push(function(s){var c,f;const o=t;if(!o||!tg(o,s))return;(c=s.mapSetPlugin_)==null||c.fixSetContents(o);const l=tw(o);g4(e,(f=o.draft_)!=null?f:o,l,n),x4(o,s)})}function x4(e,t){var a,s;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||((s=(a=e.assigned_)==null?void 0:a.size)!=null?s:0)>0)){const{patchPlugin_:o}=t;if(o){const l=o.getPath(e);l&&o.generatePatches_(e,l,t)}p4(e)}}function G9(e,t,n){const{scope_:a}=e;if(uo(n)){const s=n[Wn];tg(s,a)&&s.callbacks_.push(function(){im(e);const l=tw(s);g4(e,n,l,t)})}else fs(n)&&e.callbacks_.push(function(){var l;const o=Qs(e);bb(o,t,e.type_)===n&&a.drafts_.length>1&&((l=e.assigned_.get(t))!=null?l:!1)===!0&&e.copy_&&nw(bb(e.copy_,t,e.type_),a.handledSet_,a)})}function nw(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||uo(e)||t.has(e)||!fs(e)||eg(e)||(t.add(e),Zu(e,(a,s)=>{if(uo(s)){const o=s[Wn];if(tg(o,n)){const l=tw(o);Fm(e,a,l,e.type_),p4(o)}}else fs(s)&&nw(s,t,n)})),e}function H9(e,t){const n=Jp(e),a={type_:n?1:0,scope_:t?t.scope_:m4(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,o=aw;n&&(s=[a],o=Nu);const{revoke:l,proxy:c}=Proxy.revocable(s,o);return a.draft_=c,a.revoke_=l,[c,a]}var aw={get(e,t){if(t===Wn)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&n!=null&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const s=Qs(e);if(!Rk(s,t,e.type_))return W9(e,s,t);const o=s[t];if(e.finalized_||!fs(o)||a&&e.operationMethod&&(n!=null&&n.isMutatingArrayMethod(e.operationMethod))&&F9(t))return o;if(o===qv(e.base_,t)){im(e);const l=e.type_===1?+t:t,c=kb(e.scope_,o,e,l);return e.copy_[l]=c}return o},has(e,t){return t in Qs(e)},ownKeys(e){return Reflect.ownKeys(Qs(e))},set(e,t,n){const a=v4(Qs(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const s=qv(Qs(e),t),o=s==null?void 0:s[Wn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if($9(n,s)&&(n!==void 0||Rk(e.base_,t,e.type_)))return!0;im(e),Cb(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),G9(e,t,n)),!0},deleteProperty(e,t){return im(e),qv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Cb(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Qs(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[om]:!0,[yb]:e.type_!==1||t!=="length",[$m]:a[$m],[ju]:n[t]}},defineProperty(){as(11)},getPrototypeOf(e){return Pc(e.base_)},setPrototypeOf(){as(12)}},Nu={};Zu(aw,(e,t)=>{Nu[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Nu.deleteProperty=function(e,t){return Nu.set.call(this,e,t,void 0)};Nu.set=function(e,t,n){return aw.set.call(this,e[0],t,n,e[0])};function qv(e,t){const n=e[Wn];return(n?Qs(n):e)[t]}function W9(e,t,n){var s;const a=v4(t,n);return a?ju in a?a[ju]:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function v4(e,t){if(!(t in e))return;let n=Pc(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Pc(n)}}function Cb(e){e.modified_||(e.modified_=!0,e.parent_&&Cb(e.parent_))}function im(e){e.copy_||(e.assigned_=new Map,e.copy_=jb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var K9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,s)=>{if(hc(n)&&!hc(a)){const l=a;a=n;const c=this;return function(h=l,...u){return c.produce(h,m=>a.call(this,m,...u))}}hc(a)||as(6),s!==void 0&&!hc(s)&&as(7);let o;if(fs(n)){const l=zk(this),c=kb(l,n,void 0);let f=!0;try{o=a(c),f=!1}finally{f?Nb(l):Sb(l)}return Lk(l,s),Bk(o,l)}else if(!n||!ew(n)){if(o=a(n),o===void 0&&(o=n),o===u4&&(o=void 0),this.autoFreeze_&&rw(o,!0),s){const l=[],c=[];ml(wb).generateReplacementPatches_(n,o,{patches_:l,inversePatches_:c}),s(l,c)}return o}else as(1,n)},this.produceWithPatches=(n,a)=>{if(hc(n))return(c,...f)=>this.produceWithPatches(c,h=>n(h,...f));let s,o;return[this.produce(n,a,(c,f)=>{s=c,o=f}),s,o]},Vv(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Vv(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Vv(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){fs(t)||as(8),uo(t)&&(t=ds(t));const n=zk(this),a=kb(n,t,void 0);return a[Wn].isManual_=!0,Sb(n),a}finishDraft(t,n){const a=t&&t[Wn];(!a||!a.isManual_)&&as(9);const{scope_:s}=a;return Lk(s,n),Bk(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(n=n.slice(a+1));const s=ml(wb).applyPatches_;return uo(t)?s(t,n):this.produce(t,o=>s(o,n))}};function kb(e,t,n,a){var c,f;const[s,o]=Qp(t)?ml(Lm).proxyMap_(t,n):Zp(t)?ml(Lm).proxySet_(t,n):H9(t,n);return((c=n==null?void 0:n.scope_)!=null?c:m4()).drafts_.push(s),o.callbacks_=(f=n==null?void 0:n.callbacks_)!=null?f:[],o.key_=a,n&&a!==void 0?q9(n,o,a):o.callbacks_.push(function(u){var p;(p=u.mapSetPlugin_)==null||p.fixSetContents(o);const{patchPlugin_:m}=u;o.modified_&&m&&m.generatePatches_(o,[],u)}),s}function ds(e){return uo(e)||as(10,e),y4(e)}function y4(e){if(!fs(e)||eg(e))return e;const t=e[Wn];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jb(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=jb(e,!0);return Zu(n,(s,o)=>{Fm(n,s,y4(o))},a),t&&(t.finalized_=!1),n}var Y9=new K9,b4=Y9.produce;function j4(e){return({dispatch:n,getState:a})=>s=>o=>typeof o=="function"?o(n,a,e):s(o)}var X9=j4(),J9=j4,Q9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bu:bu.apply(null,arguments)};function Ha(e,t){function n(...a){if(t){let s=t(...a);if(!s)throw new Error(Na(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=a=>d4(a)&&a.type===e,n}var w4=class ou extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ou.prototype)}static get[Symbol.species](){return ou}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ou(...t[0].concat(this)):new ou(...t.concat(this))}};function Vk(e){return fs(e)?b4(e,()=>{}):e}function Bh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Z9(e){return typeof e=="boolean"}var eq=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=t!=null?t:{};let l=new w4;return n&&(Z9(n)?l.push(X9):l.push(J9(n.extraArgument))),l},N4="RTK_autoBatch",xr=()=>e=>({payload:e,meta:{[N4]:!0}}),qk=e=>t=>{setTimeout(t,e)},S4=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let s=!0,o=!1,l=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qk(10):e.type==="callback"?e.queueNotification:qk(e.timeout),h=()=>{l=!1,o&&(o=!1,c.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const m=()=>s&&u(),p=a.subscribe(m);return c.add(u),()=>{p(),c.delete(u)}},dispatch(u){var m;try{return s=!((m=u==null?void 0:u.meta)!=null&&m[N4]),o=!s,o&&(l||(l=!0,f(h))),a.dispatch(u)}finally{s=!0}}})},tq=e=>function(n){const{autoBatch:a=!0}=n!=null?n:{};let s=new w4(e);return a&&s.push(S4(typeof a=="object"?a:void 0)),s};function rq(e){const t=eq(),{reducer:n=void 0,middleware:a,devTools:s=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Qj(n))c=l4(n);else throw new Error(Na(1));let f;typeof a=="function"?f=a(t):f=t();let h=bu;s&&(h=Q9({trace:!1,...typeof s=="object"&&s}));const u=c4(...f),m=tq(u);let p=typeof l=="function"?l(m):m();const v=h(...p);return Zj(c,o,v)}function C4(e){const t={},n=[];let a;const s={addCase(o,l){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(Na(28));if(c in t)throw new Error(Na(29));return t[c]=l,s},addAsyncThunk(o,l){return l.pending&&(t[o.pending.type]=l.pending),l.rejected&&(t[o.rejected.type]=l.rejected),l.fulfilled&&(t[o.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:o.settled,reducer:l.settled}),s},addMatcher(o,l){return n.push({matcher:o,reducer:l}),s},addDefaultCase(o){return a=o,s}};return e(s),[t,n,a]}function nq(e){return typeof e=="function"}function aq(e,t){let[n,a,s]=C4(t),o;if(nq(e))o=()=>Vk(e());else{const c=Vk(e);o=()=>c}function l(c=o(),f){let h=[n[f.type],...a.filter(({matcher:u})=>u(f)).map(({reducer:u})=>u)];return h.filter(u=>!!u).length===0&&(h=[s]),h.reduce((u,m)=>{if(m)if(uo(u)){const v=m(u,f);return v===void 0?u:v}else{if(fs(u))return b4(u,p=>m(p,f));{const p=m(u,f);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},c)}return l.getInitialState=o,l}var sq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",oq=(e=21)=>{let t="",n=e;for(;n--;)t+=sq[Math.random()*64|0];return t},iq=Symbol.for("rtk-slice-createasyncthunk");function lq(e,t){return"".concat(e,"/").concat(t)}function cq({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[iq];return function(s){const{name:o,reducerPath:l=o}=s;if(!o)throw new Error(Na(11));const c=(typeof s.reducers=="function"?s.reducers(uq()):s.reducers)||{},f=Object.keys(c),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(E,P){const C=typeof E=="string"?E:E.type;if(!C)throw new Error(Na(12));if(C in h.sliceCaseReducersByType)throw new Error(Na(13));return h.sliceCaseReducersByType[C]=P,u},addMatcher(E,P){return h.sliceMatchers.push({matcher:E,reducer:P}),u},exposeAction(E,P){return h.actionCreators[E]=P,u},exposeCaseReducer(E,P){return h.sliceCaseReducersByName[E]=P,u}};f.forEach(E=>{const P=c[E],C={reducerName:E,type:lq(o,E),createNotation:typeof s.reducers=="function"};hq(P)?pq(C,P,u,t):fq(C,P,u)});function m(){const[E={},P=[],C=void 0]=typeof s.extraReducers=="function"?C4(s.extraReducers):[s.extraReducers],O={...E,...h.sliceCaseReducersByType};return aq(s.initialState,A=>{for(let _ in O)A.addCase(_,O[_]);for(let _ of h.sliceMatchers)A.addMatcher(_.matcher,_.reducer);for(let _ of P)A.addMatcher(_.matcher,_.reducer);C&&A.addDefaultCase(C)})}const p=E=>E,v=new Map,j=new WeakMap;let y;function b(E,P){return y||(y=m()),y(E,P)}function N(){return y||(y=m()),y.getInitialState()}function k(E,P=!1){function C(A){let _=A[E];return typeof _>"u"&&P&&(_=Bh(j,C,N)),_}function O(A=p){const _=Bh(v,P,()=>new WeakMap);return Bh(_,A,()=>{var G;const z={};for(const[T,M]of Object.entries((G=s.selectors)!=null?G:{}))z[T]=dq(M,A,()=>Bh(j,A,N),P);return z})}return{reducerPath:E,getSelectors:O,get selectors(){return O(C)},selectSlice:C}}const D={name:o,reducer:b,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...k(l),injectInto(E,{reducerPath:P,...C}={}){const O=P!=null?P:l;return E.inject({reducerPath:O,reducer:b},C),{...D,...k(O,!0)}}};return D}}function dq(e,t,n,a){function s(o,...l){let c=t(o);return typeof c>"u"&&a&&(c=n()),e(c,...l)}return s.unwrapped=e,s}var oa=cq();function uq(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function fq({type:e,reducerName:t,createNotation:n},a,s){let o,l;if("reducer"in a){if(n&&!mq(a))throw new Error(Na(17));o=a.reducer,l=a.prepare}else o=a;s.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?Ha(e,l):Ha(e))}function hq(e){return e._reducerDefinitionType==="asyncThunk"}function mq(e){return e._reducerDefinitionType==="reducerWithPrepare"}function pq({type:e,reducerName:t},n,a,s){if(!s)throw new Error(Na(18));const{payloadCreator:o,fulfilled:l,pending:c,rejected:f,settled:h,options:u}=n,m=s(e,o,u);a.exposeAction(t,m),l&&a.addCase(m.fulfilled,l),c&&a.addCase(m.pending,c),f&&a.addCase(m.rejected,f),h&&a.addMatcher(m.settled,h),a.exposeCaseReducer(t,{fulfilled:l||Uh,pending:c||Uh,rejected:f||Uh,settled:h||Uh})}function Uh(){}var gq="task",k4="listener",P4="completed",sw="cancelled",xq="task-".concat(sw),vq="task-".concat(P4),Pb="".concat(k4,"-").concat(sw),yq="".concat(k4,"-").concat(P4),rg=class{constructor(e){j0(this,"name","TaskAbortError");j0(this,"message");this.code=e,this.message="".concat(gq," ").concat(sw," (reason: ").concat(e,")")}},ow=(e,t)=>{if(typeof e!="function")throw new TypeError(Na(32))},zm=()=>{},E4=(e,t=zm)=>(e.catch(t),e),A4=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),al=e=>{if(e.aborted)throw new rg(e.reason)};function I4(e,t){let n=zm;return new Promise((a,s)=>{const o=()=>s(new rg(e.reason));if(e.aborted){o();return}n=A4(e,o),t.finally(()=>n()).then(a,s)}).finally(()=>{n=zm})}var bq=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof rg?"cancelled":"rejected",error:n}}finally{t==null||t()}},Bm=e=>t=>E4(I4(e,t).then(n=>(al(e),n))),D4=e=>{const t=Bm(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:bc}=Object,Gk={},ng="listenerMiddleware",jq=(e,t)=>{const n=a=>A4(e,()=>a.abort(e.reason));return(a,s)=>{ow(a);const o=new AbortController;n(o);const l=bq(async()=>{al(e),al(o.signal);const c=await a({pause:Bm(o.signal),delay:D4(o.signal),signal:o.signal});return al(o.signal),c},()=>o.abort(vq));return s!=null&&s.autoJoin&&t.push(l.catch(zm)),{result:Bm(e)(l),cancel(){o.abort(xq)}}}},wq=(e,t)=>{const n=async(a,s)=>{al(t);let o=()=>{};const c=[new Promise((f,h)=>{let u=e({predicate:a,effect:(m,p)=>{p.unsubscribe(),f([m,p.getState(),p.getOriginalState()])}});o=()=>{u(),h()}})];s!=null&&c.push(new Promise(f=>setTimeout(f,s,null)));try{const f=await I4(t,Promise.race(c));return al(t),f}finally{o()}};return(a,s)=>E4(n(a,s))},O4=e=>{let{type:t,actionCreator:n,matcher:a,predicate:s,effect:o}=e;if(t)s=Ha(t).match;else if(n)t=n.type,s=n.match;else if(a)s=a;else if(!s)throw new Error(Na(21));return ow(o),{predicate:s,type:t,effect:o}},M4=bc(e=>{const{type:t,predicate:n,effect:a}=O4(e);return{id:oq(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Na(22))}}},{withTypes:()=>M4}),Hk=(e,t)=>{const{type:n,effect:a,predicate:s}=O4(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===s)&&o.effect===a)},Eb=e=>{e.pending.forEach(t=>{t.abort(Pb)})},Nq=(e,t)=>()=>{for(const n of t.keys())Eb(n);e.clear()},Wk=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},T4=bc(Ha("".concat(ng,"/add")),{withTypes:()=>T4}),Sq=Ha("".concat(ng,"/removeAll")),_4=bc(Ha("".concat(ng,"/remove")),{withTypes:()=>_4}),Cq=(...e)=>{console.error("".concat(ng,"/error"),...e)},tf=(e={})=>{const t=new Map,n=new Map,a=v=>{var y;const j=(y=n.get(v))!=null?y:0;n.set(v,j+1)},s=v=>{var y;const j=(y=n.get(v))!=null?y:1;j===1?n.delete(v):n.set(v,j-1)},{extra:o,onError:l=Cq}=e;ow(l);const c=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),j=>{v.unsubscribe(),j!=null&&j.cancelActive&&Eb(v)}),f=v=>{var y;const j=(y=Hk(t,v))!=null?y:M4(v);return c(j)};bc(f,{withTypes:()=>f});const h=v=>{const j=Hk(t,v);return j&&(j.unsubscribe(),v.cancelActive&&Eb(j)),!!j};bc(h,{withTypes:()=>h});const u=async(v,j,y,b)=>{const N=new AbortController,k=wq(f,N.signal),D=[];try{v.pending.add(N),a(v),await Promise.resolve(v.effect(j,bc({},y,{getOriginalState:b,condition:(E,P)=>k(E,P).then(Boolean),take:k,delay:D4(N.signal),pause:Bm(N.signal),extra:o,signal:N.signal,fork:jq(N.signal,D),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((E,P,C)=>{E!==N&&(E.abort(Pb),C.delete(E))})},cancel:()=>{N.abort(Pb),v.pending.delete(N)},throwIfCancelled:()=>{al(N.signal)}})))}catch(E){E instanceof rg||Wk(l,E,{raisedBy:"effect"})}finally{await Promise.all(D),N.abort(yq),s(v),v.pending.delete(N)}},m=Nq(t,n);return{middleware:v=>j=>y=>{if(!d4(y))return j(y);if(T4.match(y))return f(y.payload);if(Sq.match(y)){m();return}if(_4.match(y))return h(y.payload);let b=v.getState();const N=()=>{if(b===Gk)throw new Error(Na(23));return b};let k;try{if(k=j(y),t.size>0){const D=v.getState(),E=Array.from(t.values());for(const P of E){let C=!1;try{C=P.predicate(y,D,b)}catch(O){C=!1,Wk(l,O,{raisedBy:"predicate"})}C&&u(P,y,v,N)}}}finally{b=Gk}return k},startListening:f,stopListening:h,clearListeners:m}};function Na(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var kq={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},R4=oa({name:"chartLayout",initialState:kq,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,s,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Pq,setLayout:Eq,setChartSize:Aq,setScale:Iq}=R4.actions,Dq=R4.reducer;function $4(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function yr(e){return Number.isFinite(e)}function Os(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(n),!0).forEach(function(a){Oq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Oq(e,t,n){return(t=Mq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mq(e){var t=Tq(e,"string");return typeof t=="symbol"?t:t+""}function Tq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mr(e,t,n){return fn(e)||fn(t)?n:Ds(t)?hl(e,t,n):typeof t=="function"?t(e):n}var _q=(e,t,n)=>{if(t&&n){var{width:a,height:s}=n,{align:o,verticalAlign:l,layout:c}=t;if((c==="vertical"||c==="horizontal"&&l==="middle")&&o!=="center"&&lt(e[o]))return mc(mc({},e),{},{[o]:e[o]+(a||0)});if((c==="horizontal"||c==="vertical"&&o==="center")&&l!=="middle"&&lt(e[l]))return mc(mc({},e),{},{[l]:e[l]+(s||0)})}return e},yo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",F4=(e,t,n,a)=>{if(a)return e.map(c=>c.coordinate);var s,o,l=e.map(c=>(c.coordinate===t&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate));return s||l.push(t),o||l.push(n),l},L4=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:o,scale:l,realScaleType:c,isCategorical:f,categoricalDomain:h,tickCount:u,ticks:m,niceTicks:p,axisType:v}=e;if(!l)return null;var j=c==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,y=s==="category"&&l.bandwidth?l.bandwidth()/j:0;if(y=v==="angleAxis"&&o&&o.length>=2?$n(o[0]-o[1])*2*y:y,m||p){var b=(m||p||[]).map((N,k)=>{var D=a?a.indexOf(N):N;return{coordinate:l(D)+y,value:N,offset:y,index:k}});return b.filter(N=>!us(N.coordinate))}return f&&h?h.map((N,k)=>({coordinate:l(N)+y,value:N,index:k,offset:y})):l.ticks&&u!=null?l.ticks(u).map((N,k)=>({coordinate:l(N)+y,value:N,offset:y,index:k})):l.domain().map((N,k)=>({coordinate:l(N)+y,value:a?a[N]:N,index:k,offset:y}))},Yk=1e-4,Rq=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,a=e.range(),s=Math.min(a[0],a[1])-Yk,o=Math.max(a[0],a[1])+Yk,l=e(t[0]),c=e(t[n-1]);(l<s||l>o||c<s||c>o)&&e.domain([t[0],t[n-1]])}},$q=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var s=0;s<a;++s)for(var o=0,l=0,c=0;c<n;++c){var f=e[c],h=f==null?void 0:f[s];if(h!=null){var u=h[1],m=h[0],p=us(u)?m:u;p>=0?(h[0]=o,h[1]=o+p,o=u):(h[0]=l,h[1]=l+p,l=u)}}}},Fq=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var s=0;s<a;++s)for(var o=0,l=0;l<n;++l){var c=e[l],f=c==null?void 0:c[s];if(f!=null){var h=us(f[1])?f[0]:f[1];h>=0?(f[0]=o,f[1]=o+h,o=f[1]):(f[0]=0,f[1]=0)}}}},Lq={sign:$q,expand:mV,none:fl,silhouette:pV,wiggle:gV,positive:Fq},zq=(e,t,n)=>{var a,s=(a=Lq[n])!==null&&a!==void 0?a:fl,o=hV().keys(t).value((c,f)=>Number(mr(c,f,0))).order(xb).offset(s),l=o(e);return l.forEach((c,f)=>{c.forEach((h,u)=>{var m=mr(e[u],t[f],0);Array.isArray(m)&&m.length===2&&lt(m[0])&&lt(m[1])&&(h[0]=m[0],h[1]=m[1])})}),l};function Bq(e){return e==null?void 0:String(e)}function Xk(e){var{axis:t,ticks:n,bandSize:a,entry:s,index:o,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!fn(s[t.dataKey])){var c=q5(n,"value",s[t.dataKey]);if(c)return c.coordinate+a/2}return n[o]?n[o].coordinate+a/2:null}var f=mr(s,fn(l)?t.dataKey:l);return fn(f)?null:t.scale(f)}var Uq=e=>{var t=e.flat(2).filter(lt);return[Math.min(...t),Math.max(...t)]},Vq=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],qq=(e,t,n)=>{if(e!=null)return Vq(Object.keys(e).reduce((a,s)=>{var o=e[s];if(!o)return a;var{stackedData:l}=o,c=l.reduce((f,h)=>{var u=$4(h,t,n),m=Uq(u);return!yr(m[0])||!yr(m[1])?f:[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]))},Jk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Um=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var s=Yp(t,u=>u.coordinate),o=1/0,l=1,c=s.length;l<c;l++){var f=s[l],h=s[l-1];o=Math.min(((f==null?void 0:f.coordinate)||0)-((h==null?void 0:h.coordinate)||0),o)}return o===1/0?0:o}return n?void 0:0};function Zk(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:s,name:o}=e;return mc(mc({},t),{},{dataKey:n,payload:a,value:s,name:o})}function ag(e,t){if(e)return String(e);if(typeof t=="string")return t}var Gq=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},Hq=(e,t)=>t==="centric"?e.angle:e.radius,bo=e=>e.layout.width,jo=e=>e.layout.height,Wq=e=>e.layout.scale,z4=e=>e.layout.margin,sg=ke(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),og=ke(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),B4="data-recharts-item-index",U4="data-recharts-item-id",rf=60;function eP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Vh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(n),!0).forEach(function(a){Kq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Kq(e,t,n){return(t=Yq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yq(e){var t=Xq(e,"string");return typeof t=="symbol"?t:t+""}function Xq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jq=e=>e.brush.height;function Qq(e){var t=og(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var s=typeof a.width=="number"?a.width:rf;return n+s}return n},0)}function Zq(e){var t=og(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var s=typeof a.width=="number"?a.width:rf;return n+s}return n},0)}function eG(e){var t=sg(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function tG(e){var t=sg(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var pn=ke([bo,jo,z4,Jq,Qq,Zq,eG,tG,i4,I9],(e,t,n,a,s,o,l,c,f,h)=>{var u={left:(n.left||0)+s,right:(n.right||0)+o},m={top:(n.top||0)+l,bottom:(n.bottom||0)+c},p=Vh(Vh({},m),u),v=p.bottom;p.bottom+=a,p=_q(p,f,h);var j=e-p.left-p.right,y=t-p.top-p.bottom;return Vh(Vh({brushBottom:v},p),{},{width:Math.max(j,0),height:Math.max(y,0)})}),rG=ke(pn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),V4=ke(bo,jo,(e,t)=>({x:0,y:0,width:e,height:t})),nG=x.createContext(null),ia=()=>x.useContext(nG)!=null,ig=e=>e.brush,lg=ke([ig,pn,z4],(e,t,n)=>({height:e.height,x:lt(e.x)?e.x:t.left,y:lt(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:lt(e.width)?e.width:t.width})),Gv={},Hv={},Wv={},tP;function aG(){return tP||(tP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:s,edges:o}={}){let l,c=null;const f=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),u=()=>{c!==null&&(n.apply(l,c),l=void 0,c=null)},m=()=>{h&&u(),y()};let p=null;const v=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,m()},a)},j=()=>{p!==null&&(clearTimeout(p),p=null)},y=()=>{j(),l=void 0,c=null},b=()=>{u()},N=function(...k){if(s!=null&&s.aborted)return;l=this,c=k;const D=p==null;v(),f&&D&&u()};return N.schedule=v,N.cancel=y,N.flush=b,s==null||s.addEventListener("abort",y,{once:!0}),N}e.debounce=t})(Wv)),Wv}var rP;function sG(){return rP||(rP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aG();function n(a,s=0,o={}){typeof o!="object"&&(o={});const{leading:l=!1,trailing:c=!0,maxWait:f}=o,h=Array(2);l&&(h[0]="leading"),c&&(h[1]="trailing");let u,m=null;const p=t.debounce(function(...y){u=a.apply(this,y),m=null},s,{edges:h}),v=function(...y){return f!=null&&(m===null&&(m=Date.now()),Date.now()-m>=f)?(u=a.apply(this,y),m=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,y),u)},j=()=>(p.flush(),u);return v.cancel=p.cancel,v.flush=j,v}e.debounce=n})(Hv)),Hv}var nP;function oG(){return nP||(nP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sG();function n(a,s=0,o={}){const{leading:l=!0,trailing:c=!0}=o;return t.debounce(a,s,{leading:l,maxWait:s,trailing:c})}e.throttle=n})(Gv)),Gv}var Kv,aP;function iG(){return aP||(aP=1,Kv=oG().throttle),Kv}var lG=iG();const cG=Ts(lG);var Vm=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>s[l++]))}},q4=(e,t,n)=>{var{width:a="100%",height:s="100%",aspect:o,maxHeight:l}=n,c=co(a)?e:Number(a),f=co(s)?t:Number(s);return o&&o>0&&(c?f=c/o:f&&(c=f*o),l&&f!=null&&f>l&&(f=l)),{calculatedWidth:c,calculatedHeight:f}},dG={width:0,height:0,overflow:"visible"},uG={width:0,overflowX:"visible"},fG={height:0,overflowY:"visible"},hG={},mG=e=>{var{width:t,height:n}=e,a=co(t),s=co(n);return a&&s?dG:a?uG:s?fG:hG};function pG(e){var{width:t,height:n,aspect:a}=e,s=t,o=n;return s===void 0&&o===void 0?(s="100%",o="100%"):s===void 0?s=a&&a>0?void 0:"100%":o===void 0&&(o=a&&a>0?void 0:"100%"),{width:s,height:o}}function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ab.apply(null,arguments)}function sP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function oP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(n),!0).forEach(function(a){gG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gG(e,t,n){return(t=xG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xG(e){var t=vG(e,"string");return typeof t=="symbol"?t:t+""}function vG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G4=x.createContext({width:-1,height:-1});function yG(e){return Os(e.width)&&Os(e.height)}function H4(e){var{children:t,width:n,height:a}=e,s=x.useMemo(()=>({width:n,height:a}),[n,a]);return yG(s)?x.createElement(G4.Provider,{value:s},t):null}var iw=()=>x.useContext(G4),bG=x.forwardRef((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:s,height:o,minWidth:l=0,minHeight:c,maxHeight:f,children:h,debounce:u=0,id:m,className:p,onResize:v,style:j={}}=e,y=x.useRef(null),b=x.useRef();b.current=v,x.useImperativeHandle(t,()=>y.current);var[N,k]=x.useState({containerWidth:a.width,containerHeight:a.height}),D=x.useCallback((A,_)=>{k(z=>{var G=Math.round(A),T=Math.round(_);return z.containerWidth===G&&z.containerHeight===T?z:{containerWidth:G,containerHeight:T}})},[]);x.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return Qu;var A=T=>{var M,{width:W,height:Z}=T[0].contentRect;D(W,Z),(M=b.current)===null||M===void 0||M.call(b,W,Z)};u>0&&(A=cG(A,u,{trailing:!0,leading:!1}));var _=new ResizeObserver(A),{width:z,height:G}=y.current.getBoundingClientRect();return D(z,G),_.observe(y.current),()=>{_.disconnect()}},[D,u]);var{containerWidth:E,containerHeight:P}=N;Vm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:C,calculatedHeight:O}=q4(E,P,{width:s,height:o,aspect:n,maxHeight:f});return Vm(C!=null&&C>0||O!=null&&O>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",C,O,s,o,l,c,n),x.createElement("div",{id:m?"".concat(m):void 0,className:Zt("recharts-responsive-container",p),style:oP(oP({},j),{},{width:s,height:o,minWidth:l,minHeight:c,maxHeight:f}),ref:y},x.createElement("div",{style:mG({width:s,height:o})},x.createElement(H4,{width:C,height:O},h)))}),iP=x.forwardRef((e,t)=>{var n=iw();if(Os(n.width)&&Os(n.height))return e.children;var{width:a,height:s}=pG({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:l}=q4(void 0,void 0,{width:a,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return lt(o)&&lt(l)?x.createElement(H4,{width:o,height:l},e.children):x.createElement(bG,Ab({},e,{width:a,height:s,ref:t}))});function W4(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var cg=()=>{var e,t=ia(),n=pt(rG),a=pt(lg),s=(e=pt(ig))===null||e===void 0?void 0:e.padding;return!t||!a||!s?n:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},jG={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},K4=()=>{var e;return(e=pt(pn))!==null&&e!==void 0?e:jG},Y4=()=>pt(bo),X4=()=>pt(jo),sr=e=>e.layout.layoutType,qc=()=>pt(sr),wG=()=>{var e=qc();if(e==="horizontal"||e==="vertical")return e},NG=()=>{var e=qc();return e!==void 0},dg=e=>{var t=br(),n=ia(),{width:a,height:s}=e,o=iw(),l=a,c=s;return o&&(l=o.width>0?o.width:a,c=o.height>0?o.height:s),x.useEffect(()=>{!n&&Os(l)&&Os(c)&&t(Aq({width:l,height:c}))},[t,n,l,c]),null},J4=Symbol.for("immer-nothing"),lP=Symbol.for("immer-draftable"),Ea=Symbol.for("immer-state");function ss(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Su=Object.getPrototypeOf;function Ec(e){return!!e&&!!e[Ea]}function pl(e){var t;return e?Q4(e)||Array.isArray(e)||!!e[lP]||!!((t=e.constructor)!=null&&t[lP])||nf(e)||fg(e):!1}var SG=Object.prototype.constructor.toString(),cP=new WeakMap;function Q4(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=cP.get(n);return a===void 0&&(a=Function.toString.call(n),cP.set(n,a)),a===SG}function qm(e,t,n=!0){ug(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((a,s)=>t(s,a,e))}function ug(e){const t=e[Ea];return t?t.type_:Array.isArray(e)?1:nf(e)?2:fg(e)?3:0}function Ib(e,t){return ug(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Z4(e,t,n){const a=ug(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function CG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nf(e){return e instanceof Map}function fg(e){return e instanceof Set}function Ki(e){return e.copy_||e.base_}function Db(e,t){if(nf(e))return new Map(e);if(fg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Q4(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[Ea];let s=Reflect.ownKeys(a);for(let o=0;o<s.length;o++){const l=s[o],c=a[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(a[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[l]})}return Object.create(Su(e),a)}else{const a=Su(e);if(a!==null&&n)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function lw(e,t=!1){return hg(e)||Ec(e)||!pl(e)||(ug(e)>1&&Object.defineProperties(e,{set:qh,add:qh,clear:qh,delete:qh}),Object.freeze(e),t&&Object.values(e).forEach(n=>lw(n,!0))),e}function kG(){ss(2)}var qh={value:kG};function hg(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var PG={};function gl(e){const t=PG[e];return t||ss(0,e),t}var Cu;function eM(){return Cu}function EG(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dP(e,t){t&&(gl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ob(e){Mb(e),e.drafts_.forEach(AG),e.drafts_=null}function Mb(e){e===Cu&&(Cu=e.parent_)}function uP(e){return Cu=EG(Cu,e)}function AG(e){const t=e[Ea];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fP(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ea].modified_&&(Ob(t),ss(4)),pl(e)&&(e=Gm(t,e),t.parent_||Hm(t,e)),t.patches_&&gl("Patches").generateReplacementPatches_(n[Ea].base_,e,t.patches_,t.inversePatches_)):e=Gm(t,n,[]),Ob(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==J4?e:void 0}function Gm(e,t,n){if(hg(t))return t;const a=e.immer_.shouldUseStrictIteration(),s=t[Ea];if(!s)return qm(t,(o,l)=>hP(e,s,t,o,l,n),a),t;if(s.scope_!==e)return t;if(!s.modified_)return Hm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let l=o,c=!1;s.type_===3&&(l=new Set(o),o.clear(),c=!0),qm(l,(f,h)=>hP(e,s,o,f,h,n,c),a),Hm(e,o,!1),n&&e.patches_&&gl("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function hP(e,t,n,a,s,o,l){if(s==null||typeof s!="object"&&!l)return;const c=hg(s);if(!(c&&!l)){if(Ec(s)){const f=o&&t&&t.type_!==3&&!Ib(t.assigned_,a)?o.concat(a):void 0,h=Gm(e,s,f);if(Z4(n,a,h),Ec(h))e.canAutoFreeze_=!1;else return}else l&&n.add(s);if(pl(s)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===s&&c)return;Gm(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(nf(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&Hm(e,s)}}}function Hm(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lw(t,n)}function IG(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:eM(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,o=cw;n&&(s=[a],o=ku);const{revoke:l,proxy:c}=Proxy.revocable(s,o);return a.draft_=c,a.revoke_=l,c}var cw={get(e,t){if(t===Ea)return e;const n=Ki(e);if(!Ib(n,t))return DG(e,n,t);const a=n[t];return e.finalized_||!pl(a)?a:a===Yv(e.base_,t)?(Xv(e),e.copy_[t]=_b(a,e)):a},has(e,t){return t in Ki(e)},ownKeys(e){return Reflect.ownKeys(Ki(e))},set(e,t,n){const a=tM(Ki(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const s=Yv(Ki(e),t),o=s==null?void 0:s[Ea];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(CG(n,s)&&(n!==void 0||Ib(e.base_,t)))return!0;Xv(e),Tb(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Yv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Xv(e),Tb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ki(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){ss(11)},getPrototypeOf(e){return Su(e.base_)},setPrototypeOf(){ss(12)}},ku={};qm(cw,(e,t)=>{ku[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ku.deleteProperty=function(e,t){return ku.set.call(this,e,t,void 0)};ku.set=function(e,t,n){return cw.set.call(this,e[0],t,n,e[0])};function Yv(e,t){const n=e[Ea];return(n?Ki(n):e)[t]}function DG(e,t,n){var s;const a=tM(t,n);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function tM(e,t){if(!(t in e))return;let n=Su(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Su(n)}}function Tb(e){e.modified_||(e.modified_=!0,e.parent_&&Tb(e.parent_))}function Xv(e){e.copy_||(e.copy_=Db(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var OG=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const l=this;return function(f=o,...h){return l.produce(f,u=>n.call(this,u,...h))}}typeof n!="function"&&ss(6),a!==void 0&&typeof a!="function"&&ss(7);let s;if(pl(t)){const o=uP(this),l=_b(t,void 0);let c=!0;try{s=n(l),c=!1}finally{c?Ob(o):Mb(o)}return dP(o,a),fP(s,o)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===J4&&(s=void 0),this.autoFreeze_&&lw(s,!0),a){const o=[],l=[];gl("Patches").generateReplacementPatches_(t,s,o,l),a(o,l)}return s}else ss(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...c)=>this.produceWithPatches(l,f=>t(f,...c));let a,s;return[this.produce(t,n,(l,c)=>{a=l,s=c}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){pl(e)||ss(8),Ec(e)&&(e=MG(e));const t=uP(this),n=_b(e,void 0);return n[Ea].isManual_=!0,Mb(t),n}finishDraft(e,t){const n=e&&e[Ea];(!n||!n.isManual_)&&ss(9);const{scope_:a}=n;return dP(a,t),fP(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const a=gl("Patches").applyPatches_;return Ec(e)?a(e,t):this.produce(e,s=>a(s,t))}};function _b(e,t){const n=nf(e)?gl("MapSet").proxyMap_(e,t):fg(e)?gl("MapSet").proxySet_(e,t):IG(e,t);return(t?t.scope_:eM()).drafts_.push(n),n}function MG(e){return Ec(e)||ss(10,e),rM(e)}function rM(e){if(!pl(e)||hg(e))return e;const t=e[Ea];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Db(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Db(e,!0);return qm(n,(s,o)=>{Z4(n,s,rM(o))},a),t&&(t.finalized_=!1),n}var TG=new OG;TG.produce;var _G={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},nM=oa({name:"legend",initialState:_G,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:xr()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,s=ds(e).payload.indexOf(n);s>-1&&(e.payload[s]=a)},prepare:xr()},removeLegendPayload:{reducer(e,t){var n=ds(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:xr()}}}),{setLegendSize:Tde,setLegendSettings:_de,addLegendPayload:aM,replaceLegendPayload:sM,removeLegendPayload:oM}=nM.actions,RG=nM.reducer;function Rb(){return Rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rb.apply(null,arguments)}function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Jv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(a){$G(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $G(e,t,n){return(t=FG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FG(e){var t=LG(e,"string");return typeof t=="symbol"?t:t+""}function LG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zG(e){return Array.isArray(e)&&Ds(e[0])&&Ds(e[1])?e.join(" ~ "):e}var BG=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:s={},payload:o,formatter:l,itemSorter:c,wrapperClassName:f,labelClassName:h,label:u,labelFormatter:m,accessibilityLayer:p=!1}=e,v=()=>{if(o&&o.length){var P={padding:0,margin:0},C=(c?Yp(o,c):o).map((O,A)=>{if(O.type==="none")return null;var _=O.formatter||l||zG,{value:z,name:G}=O,T=z,M=G;if(_){var W=_(z,G,O,A,o);if(Array.isArray(W))[T,M]=W;else if(W!=null)T=W;else return null}var Z=Jv({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},a);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:Z},Ds(M)?x.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Ds(M)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},T),x.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:P},C)}return null},j=Jv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),y=Jv({margin:0},s),b=!fn(u),N=b?u:"",k=Zt("recharts-default-tooltip",f),D=Zt("recharts-tooltip-label",h);b&&m&&o!==void 0&&o!==null&&(N=m(u,o));var E=p?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Rb({className:k,style:j},E),x.createElement("p",{className:D,style:y},x.isValidElement(N)?N:"".concat(N)),v())},Yd="recharts-tooltip-wrapper",UG={visibility:"hidden"};function VG(e){var{coordinate:t,translateX:n,translateY:a}=e;return Zt(Yd,{["".concat(Yd,"-right")]:lt(n)&&t&&lt(t.x)&&n>=t.x,["".concat(Yd,"-left")]:lt(n)&&t&&lt(t.x)&&n<t.x,["".concat(Yd,"-bottom")]:lt(a)&&t&&lt(t.y)&&a>=t.y,["".concat(Yd,"-top")]:lt(a)&&t&&lt(t.y)&&a<t.y})}function pP(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c,viewBox:f,viewBoxDimension:h}=e;if(o&&lt(o[a]))return o[a];var u=n[a]-c-(s>0?s:0),m=n[a]+s;if(t[a])return l[a]?u:m;var p=f[a];if(p==null)return 0;if(l[a]){var v=u,j=p;return v<j?Math.max(m,p):Math.max(u,p)}if(h==null)return 0;var y=m+c,b=p+h;return y>b?Math.max(u,p):Math.max(m,p)}function qG(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function GG(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipBox:l,useTranslate3d:c,viewBox:f}=e,h,u,m;return l.height>0&&l.width>0&&n?(u=pP({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),m=pP({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),h=qG({translateX:u,translateY:m,useTranslate3d:c})):h=UG,{cssProperties:h,cssClasses:VG({translateX:u,translateY:m,coordinate:n})}}function gP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(n),!0).forEach(function(a){$b(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $b(e,t,n){return(t=HG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HG(e){var t=WG(e,"string");return typeof t=="symbol"?t:t+""}function WG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class KG extends x.PureComponent{constructor(){super(...arguments),$b(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$b(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,s,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(s=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,children:o,coordinate:l,hasPayload:c,isAnimationActive:f,offset:h,position:u,reverseDirection:m,useTranslate3d:p,viewBox:v,wrapperStyle:j,lastBoundingBox:y,innerRef:b,hasPortalFromProps:N}=this.props,{cssClasses:k,cssProperties:D}=GG({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:u,reverseDirection:m,tooltipBox:{height:y.height,width:y.width},useTranslate3d:p,viewBox:v}),E=N?{}:Gh(Gh({transition:f&&t?"transform ".concat(a,"ms ").concat(s):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),P=Gh(Gh({},E),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},j);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:P,ref:b},o)}}var iM=()=>{var e;return(e=pt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fb.apply(null,arguments)}function xP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(n),!0).forEach(function(a){YG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YG(e,t,n){return(t=XG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XG(e){var t=JG(e,"string");return typeof t=="symbol"?t:t+""}function JG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yP={curveBasisClosed:rV,curveBasisOpen:nV,curveBasis:tV,curveBumpX:B7,curveBumpY:U7,curveLinearClosed:aV,curveLinear:Wp,curveMonotoneX:sV,curveMonotoneY:oV,curveNatural:iV,curveStep:lV,curveStepAfter:dV,curveStepBefore:cV},Wm=e=>yr(e.x)&&yr(e.y),bP=e=>e.base!=null&&Wm(e.base)&&Wm(e),Xd=e=>e.x,Jd=e=>e.y,QG=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Ju(e));return(n==="curveMonotone"||n==="curveBump")&&t?yP["".concat(n).concat(t==="vertical"?"Y":"X")]:yP[n]||Wp},ZG=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:s,connectNulls:o=!1}=e,l=QG(t,s),c=o?n.filter(Wm):n,f;if(Array.isArray(a)){var h=n.map((v,j)=>vP(vP({},v),{},{base:a[j]}));s==="vertical"?f=$h().y(Jd).x1(Xd).x0(v=>v.base.x):f=$h().x(Xd).y1(Jd).y0(v=>v.base.y);var u=f.defined(bP).curve(l),m=o?h.filter(bP):h;return u(m)}s==="vertical"&&lt(a)?f=$h().y(Jd).x1(Xd).x0(a):lt(a)?f=$h().x(Xd).y1(Jd).y0(a):f=D5().x(Xd).y(Jd);var p=f.defined(Wm).curve(l);return p(c)},jc=e=>{var{className:t,points:n,path:a,pathRef:s}=e,o=qc();if((!n||!n.length)&&!a)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},c=n&&n.length?ZG(l):a;return x.createElement("path",Fb({},Pa(e),Yj(e),{className:Zt("recharts-curve",t),d:c===null?void 0:c,ref:s}))},eH=["x","y","top","left","width","height","className"];function Lb(){return Lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lb.apply(null,arguments)}function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function tH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(a){rH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rH(e,t,n){return(t=nH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sH(e,t){if(e==null)return{};var n,a,s=oH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function oH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var iH=(e,t,n,a,s,o)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),lH=e=>{var{x:t=0,y:n=0,top:a=0,left:s=0,width:o=0,height:l=0,className:c}=e,f=sH(e,eH),h=tH({x:t,y:n,top:a,left:s,width:o,height:l},f);return!lt(t)||!lt(n)||!lt(o)||!lt(l)||!lt(a)||!lt(s)?null:x.createElement("path",Lb({},Hn(h),{className:Zt("recharts-cross",c),d:iH(t,n,o,l,a,s)}))};function cH(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function NP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(a){dH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dH(e,t,n){return(t=uH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uH(e){var t=fH(e,"string");return typeof t=="symbol"?t:t+""}function fH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hH=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),lM=(e,t,n)=>e.map(a=>"".concat(hH(a)," ").concat(t,"ms ").concat(n)).join(","),mH=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(s=>a.includes(s))),Pu=(e,t)=>Object.keys(t).reduce((n,a)=>NP(NP({},n),{},{[a]:e(a,t[a])}),{});function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(a){pH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pH(e,t,n){return(t=gH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gH(e){var t=xH(e,"string");return typeof t=="symbol"?t:t+""}function xH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Km=(e,t,n)=>e+(t-e)*n,zb=e=>{var{from:t,to:n}=e;return t!==n},cM=(e,t,n)=>{var a=Pu((s,o)=>{if(zb(o)){var[l,c]=e(o.from,o.to,o.velocity);return Kr(Kr({},o),{},{from:l,velocity:c})}return o},t);return n<1?Pu((s,o)=>zb(o)&&a[s]!=null?Kr(Kr({},o),{},{velocity:Km(o.velocity,a[s].velocity,n),from:Km(o.from,a[s].from,n)}):o,t):cM(e,a,n-1)};function vH(e,t,n,a,s,o){var l,c=a.reduce((p,v)=>Kr(Kr({},p),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),f=()=>Pu((p,v)=>v.from,c),h=()=>!Object.values(c).filter(zb).length,u=null,m=p=>{l||(l=p);var v=p-l,j=v/n.dt;c=cM(n,c,j),s(Kr(Kr(Kr({},e),t),f())),l=p,h()||(u=o.setTimeout(m))};return()=>(u=o.setTimeout(m),()=>{var p;(p=u)===null||p===void 0||p()})}function yH(e,t,n,a,s,o,l){var c=null,f=s.reduce((m,p)=>{var v=e[p],j=t[p];return v==null||j==null?m:Kr(Kr({},m),{},{[p]:[v,j]})},{}),h,u=m=>{h||(h=m);var p=(m-h)/a,v=Pu((y,b)=>Km(...b,n(p)),f);if(o(Kr(Kr(Kr({},e),t),v)),p<1)c=l.setTimeout(u);else{var j=Pu((y,b)=>Km(...b,n(1)),f);o(Kr(Kr(Kr({},e),t),j))}};return()=>(c=l.setTimeout(u),()=>{var m;(m=c)===null||m===void 0||m()})}const bH=(e,t,n,a,s,o)=>{var l=mH(e,t);return n==null?()=>(s(Kr(Kr({},e),t)),()=>{}):n.isStepper===!0?vH(e,t,n,l,s,o):yH(e,t,n,a,l,s,o)};var Ym=1e-4,dM=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],uM=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),CP=(e,t)=>n=>{var a=dM(e,t);return uM(a,n)},jH=(e,t)=>n=>{var a=dM(e,t),s=[...a.map((o,l)=>o*l).slice(1),0];return uM(s,n)},wH=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var s=a.map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]},NH=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=wH(n[0]);if(s)return s}}return n.length===4?n:[0,0,1,1]},SH=(e,t,n,a)=>{var s=CP(e,n),o=CP(t,a),l=jH(e,n),c=h=>h>1?1:h<0?0:h,f=h=>{for(var u=h>1?1:h,m=u,p=0;p<8;++p){var v=s(m)-u,j=l(m);if(Math.abs(v-u)<Ym||j<Ym)return o(m);m=c(m-v/j)}return o(m)};return f.isStepper=!1,f},kP=function(){return SH(...NH(...arguments))},CH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:s=17}=t,o=(l,c,f)=>{var h=-(l-c)*n,u=f*a,m=f+(h-u)*s/1e3,p=f*s/1e3+l;return Math.abs(p-c)<Ym&&Math.abs(m)<Ym?[c,0]:[p,m]};return o.isStepper=!0,o.dt=s,o},kH=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kP(e);case"spring":return CH();default:if(e.split("(")[0]==="cubic-bezier")return kP(e)}return typeof e=="function"?e:null};function PH(e){var t,n=()=>null,a=!1,s=null,o=l=>{if(!a){if(Array.isArray(l)){if(!l.length)return;var c=l,[f,...h]=c;if(typeof f=="number"){s=e.setTimeout(o.bind(null,h),f);return}o(f),s=e.setTimeout(o.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{a=!0},start:l=>{a=!1,s&&(s(),s=null),o(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class EH{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,o=l=>{l-a>=n?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(o))};return s=requestAnimationFrame(o),()=>{s!=null&&cancelAnimationFrame(s)}}}function AH(){return PH(new EH)}var IH=x.createContext(AH);function DH(e,t){var n=x.useContext(IH);return x.useMemo(()=>t!=null?t:n(e),[e,t,n])}var OH=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),af={isSsr:OH()},MH={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},PP={t:0},Qv={t:1};function mg(e){var t=Cn(e,MH),{isActive:n,canBegin:a,duration:s,easing:o,begin:l,onAnimationEnd:c,onAnimationStart:f,children:h}=t,u=n==="auto"?!af.isSsr:n,m=DH(t.animationId,t.animationManager),[p,v]=x.useState(u?PP:Qv),j=x.useRef(null);return x.useEffect(()=>{u||v(Qv)},[u]),x.useEffect(()=>{if(!u||!a)return Qu;var y=bH(PP,Qv,kH(o),s,v,m.getTimeoutController()),b=()=>{j.current=y()};return m.start([f,l,b,s,c]),()=>{m.stop(),j.current&&j.current(),c()}},[u,a,s,o,l,f,c,m]),h(p.t)}function pg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=x.useRef(yu(t)),a=x.useRef(e);return a.current!==e&&(n.current=yu(t),a.current=e),n.current}var TH=["radius"],_H=["radius"],EP,AP,IP,DP,OP,MP,TP,_P,RP,$P;function FP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function LP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(n),!0).forEach(function(a){RH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RH(e,t,n){return(t=$H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $H(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xm.apply(null,arguments)}function zP(e,t){if(e==null)return{};var n,a,s=LH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function LH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ks(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var BP=(e,t,n,a,s)=>{var o=ni(n),l=ni(a),c=Math.min(Math.abs(o)/2,Math.abs(l)/2),f=l>=0?1:-1,h=o>=0?1:-1,u=l>=0&&o>=0||l<0&&o<0?1:0,m;if(c>0&&s instanceof Array){for(var p=[0,0,0,0],v=0,j=4;v<j;v++)p[v]=s[v]>c?c:s[v];m=Dr(EP||(EP=ks(["M",",",""])),e,t+f*p[0]),p[0]>0&&(m+=Dr(AP||(AP=ks(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+h*p[0],t)),m+=Dr(IP||(IP=ks(["L ",",",""])),e+n-h*p[1],t),p[1]>0&&(m+=Dr(DP||(DP=ks(["A ",",",",0,0,",",\n        ",",",""])),p[1],p[1],u,e+n,t+f*p[1])),m+=Dr(OP||(OP=ks(["L ",",",""])),e+n,t+a-f*p[2]),p[2]>0&&(m+=Dr(MP||(MP=ks(["A ",",",",0,0,",",\n        ",",",""])),p[2],p[2],u,e+n-h*p[2],t+a)),m+=Dr(TP||(TP=ks(["L ",",",""])),e+h*p[3],t+a),p[3]>0&&(m+=Dr(_P||(_P=ks(["A ",",",",0,0,",",\n        ",",",""])),p[3],p[3],u,e,t+a-f*p[3])),m+="Z"}else if(c>0&&s===+s&&s>0){var y=Math.min(c,s);m=Dr(RP||(RP=ks(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+f*y,y,y,u,e+h*y,t,e+n-h*y,t,y,y,u,e+n,t+f*y,e+n,t+a-f*y,y,y,u,e+n-h*y,t+a,e+h*y,t+a,y,y,u,e,t+a-f*y)}else m=Dr($P||($P=ks(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return m},UP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fM=e=>{var t=Cn(e,UP),n=x.useRef(null),[a,s]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var U=n.current.getTotalLength();U&&s(U)}catch($){}},[]);var{x:o,y:l,width:c,height:f,radius:h,className:u}=t,{animationEasing:m,animationDuration:p,animationBegin:v,isAnimationActive:j,isUpdateAnimationActive:y}=t,b=x.useRef(c),N=x.useRef(f),k=x.useRef(o),D=x.useRef(l),E=x.useMemo(()=>({x:o,y:l,width:c,height:f,radius:h}),[o,l,c,f,h]),P=pg(E,"rectangle-");if(o!==+o||l!==+l||c!==+c||f!==+f||c===0||f===0)return null;var C=Zt("recharts-rectangle",u);if(!y){var O=Hn(t),{radius:A}=O,_=zP(O,TH);return x.createElement("path",Xm({},_,{x:ni(o),y:ni(l),width:ni(c),height:ni(f),radius:typeof h=="number"?h:void 0,className:C,d:BP(o,l,c,f,h)}))}var z=b.current,G=N.current,T=k.current,M=D.current,W="0px ".concat(a===-1?1:a,"px"),Z="".concat(a,"px 0px"),B=lM(["strokeDasharray"],p,typeof m=="string"?m:UP.animationEasing);return x.createElement(mg,{animationId:P,key:P,canBegin:a>0,duration:p,easing:m,isActive:y,begin:v},U=>{var $=jn(z,c,U),K=jn(G,f,U),V=jn(T,o,U),F=jn(M,l,U);n.current&&(b.current=$,N.current=K,k.current=V,D.current=F);var L;j?U>0?L={transition:B,strokeDasharray:Z}:L={strokeDasharray:W}:L={strokeDasharray:Z};var X=Hn(t),{radius:Y}=X,me=zP(X,_H);return x.createElement("path",Xm({},me,{radius:typeof h=="number"?h:void 0,className:C,d:BP(V,F,$,K,h),ref:n,style:LP(LP({},L),t.style)}))})};function VP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function qP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(n),!0).forEach(function(a){zH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zH(e,t,n){return(t=BH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BH(e){var t=UH(e,"string");return typeof t=="symbol"?t:t+""}function UH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jm=Math.PI/180,VH=e=>e*180/Math.PI,Ur=(e,t,n,a)=>({x:e+Math.cos(-Jm*a)*n,y:t+Math.sin(-Jm*a)*n}),hM=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},qH=(e,t)=>{var{x:n,y:a}=e,{x:s,y:o}=t;return Math.sqrt((n-s)**2+(a-o)**2)},GH=(e,t)=>{var{x:n,y:a}=e,{cx:s,cy:o}=t,l=qH({x:n,y:a},{x:s,y:o});if(l<=0)return{radius:l,angle:0};var c=(n-s)/l,f=Math.acos(c);return a>o&&(f=2*Math.PI-f),{radius:l,angle:VH(f),angleInRadian:f}},HH=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:t-o*360,endAngle:n-o*360}},WH=(e,t)=>{var{startAngle:n,endAngle:a}=t,s=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(s,o);return e+l*360},KH=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:s,angle:o}=GH({x:n,y:a},t),{innerRadius:l,outerRadius:c}=t;if(s<l||s>c||s===0)return null;var{startAngle:f,endAngle:h}=HH(t),u=o,m;if(f<=h){for(;u>h;)u-=360;for(;u<f;)u+=360;m=u>=f&&u<=h}else{for(;u>f;)u-=360;for(;u<h;)u+=360;m=u>=h&&u<=f}return m?qP(qP({},t),{},{radius:s,angle:WH(u,t)}):null};function mM(e){var{cx:t,cy:n,radius:a,startAngle:s,endAngle:o}=e,l=Ur(t,n,a,s),c=Ur(t,n,a,o);return{points:[l,c],cx:t,cy:n,radius:a,startAngle:s,endAngle:o}}var GP,HP,WP,KP,YP,XP,JP;function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bb.apply(null,arguments)}function Zi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var YH=(e,t)=>{var n=$n(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},Hh=e=>{var{cx:t,cy:n,radius:a,angle:s,sign:o,isExternal:l,cornerRadius:c,cornerIsExternal:f}=e,h=c*(l?1:-1)+a,u=Math.asin(c/h)/Jm,m=f?s:s+o*u,p=Ur(t,n,h,m),v=Ur(t,n,a,m),j=f?s-o*u:s,y=Ur(t,n,h*Math.cos(u*Jm),j);return{center:p,circleTangency:v,lineTangency:y,theta:u}},pM=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,c=YH(o,l),f=o+c,h=Ur(t,n,s,o),u=Ur(t,n,s,f),m=Dr(GP||(GP=Zi(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),h.x,h.y,s,s,+(Math.abs(c)>180),+(o>f),u.x,u.y);if(a>0){var p=Ur(t,n,a,o),v=Ur(t,n,a,f);m+=Dr(HP||(HP=Zi(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),v.x,v.y,a,a,+(Math.abs(c)>180),+(o<=f),p.x,p.y)}else m+=Dr(WP||(WP=Zi(["L ",","," Z"])),t,n);return m},XH=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h}=e,u=$n(h-f),{circleTangency:m,lineTangency:p,theta:v}=Hh({cx:t,cy:n,radius:s,angle:f,sign:u,cornerRadius:o,cornerIsExternal:c}),{circleTangency:j,lineTangency:y,theta:b}=Hh({cx:t,cy:n,radius:s,angle:h,sign:-u,cornerRadius:o,cornerIsExternal:c}),N=c?Math.abs(f-h):Math.abs(f-h)-v-b;if(N<0)return l?Dr(KP||(KP=Zi(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),p.x,p.y,o,o,o*2,o,o,-o*2):pM({cx:t,cy:n,innerRadius:a,outerRadius:s,startAngle:f,endAngle:h});var k=Dr(YP||(YP=Zi(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),p.x,p.y,o,o,+(u<0),m.x,m.y,s,s,+(N>180),+(u<0),j.x,j.y,o,o,+(u<0),y.x,y.y);if(a>0){var{circleTangency:D,lineTangency:E,theta:P}=Hh({cx:t,cy:n,radius:a,angle:f,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),{circleTangency:C,lineTangency:O,theta:A}=Hh({cx:t,cy:n,radius:a,angle:h,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=c?Math.abs(f-h):Math.abs(f-h)-P-A;if(_<0&&o===0)return"".concat(k,"L").concat(t,",").concat(n,"Z");k+=Dr(XP||(XP=Zi(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),O.x,O.y,o,o,+(u<0),C.x,C.y,a,a,+(_>180),+(u>0),D.x,D.y,o,o,+(u<0),E.x,E.y)}else k+=Dr(JP||(JP=Zi(["L",",","Z"])),t,n);return k},JH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gM=e=>{var t=Cn(e,JH),{cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:f,startAngle:h,endAngle:u,className:m}=t;if(o<s||h===u)return null;var p=Zt("recharts-sector",m),v=o-s,j=wa(l,v,0,!0),y;return j>0&&Math.abs(h-u)<360?y=XH({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,v/2),forceCornerRadius:c,cornerIsExternal:f,startAngle:h,endAngle:u}):y=pM({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:h,endAngle:u}),x.createElement("path",Bb({},Hn(t),{className:p,d:y}))};function QH(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(W5(t)){if(e==="centric"){var{cx:a,cy:s,innerRadius:o,outerRadius:l,angle:c}=t,f=Ur(a,s,o,c),h=Ur(a,s,l,c);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return mM(t)}}var Zv={},ey={},ty={},QP;function ZH(){return QP||(QP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s4();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(ty)),ty}var ZP;function eW(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZH();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(ey)),ey}var eE;function tW(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o4(),n=eW();function a(s,o,l){l&&typeof l!="number"&&t.isIterateeCall(s,o,l)&&(o=l=void 0),s=n.toFinite(s),o===void 0?(o=s,s=0):o=n.toFinite(o),l=l===void 0?s<o?1:-1:n.toFinite(l);const c=Math.max(Math.ceil((o-s)/(l||1)),0),f=new Array(c);for(let h=0;h<c;h++)f[h]=s,s+=l;return f}e.range=a})(Zv)),Zv}var ry,tE;function rW(){return tE||(tE=1,ry=tW().range),ry}var nW=rW();const xM=Ts(nW);function si(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dw(e){let t,n,a;e.length!==2?(t=si,n=(c,f)=>si(e(c),f),a=(c,f)=>e(c)-f):(t=e===si||e===aW?e:sW,n=e,a=e);function s(c,f,h=0,u=c.length){if(h<u){if(t(f,f)!==0)return u;do{const m=h+u>>>1;n(c[m],f)<0?h=m+1:u=m}while(h<u)}return h}function o(c,f,h=0,u=c.length){if(h<u){if(t(f,f)!==0)return u;do{const m=h+u>>>1;n(c[m],f)<=0?h=m+1:u=m}while(h<u)}return h}function l(c,f,h=0,u=c.length){const m=s(c,f,h,u-1);return m>h&&a(c[m-1],f)>-a(c[m],f)?m-1:m}return{left:s,center:l,right:o}}function sW(){return 0}function vM(e){return e===null?NaN:+e}function*oW(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const iW=dw(si),sf=iW.right;dw(vM).center;class rE extends Map{constructor(t,n=dW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(nE(this,t))}has(t){return super.has(nE(this,t))}set(t,n){return super.set(lW(this,t),n)}delete(t){return super.delete(cW(this,t))}}function nE({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function lW({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function cW({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function dW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uW(e=si){if(e===si)return yM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function yM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const fW=Math.sqrt(50),hW=Math.sqrt(10),mW=Math.sqrt(2);function Qm(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),o=a/Math.pow(10,s),l=o>=fW?10:o>=hW?5:o>=mW?2:1;let c,f,h;return s<0?(h=Math.pow(10,-s)/l,c=Math.round(e*h),f=Math.round(t*h),c/h<e&&++c,f/h>t&&--f,h=-h):(h=Math.pow(10,s)*l,c=Math.round(e/h),f=Math.round(t/h),c*h<e&&++c,f*h>t&&--f),f<c&&.5<=n&&n<2?Qm(e,t,n*2):[c,f,h]}function Ub(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,o,l]=a?Qm(t,e,n):Qm(e,t,n);if(!(o>=s))return[];const c=o-s+1,f=new Array(c);if(a)if(l<0)for(let h=0;h<c;++h)f[h]=(o-h)/-l;else for(let h=0;h<c;++h)f[h]=(o-h)*l;else if(l<0)for(let h=0;h<c;++h)f[h]=(s+h)/-l;else for(let h=0;h<c;++h)f[h]=(s+h)*l;return f}function Vb(e,t,n){return t=+t,e=+e,n=+n,Qm(e,t,n)[2]}function qb(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?Vb(t,e,n):Vb(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function aE(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function sE(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function bM(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?yM:uW(s);a>n;){if(a-n>600){const f=a-n+1,h=t-n+1,u=Math.log(f),m=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*m*(f-m)/f)*(h-f/2<0?-1:1),v=Math.max(n,Math.floor(t-h*m/f+p)),j=Math.min(a,Math.floor(t+(f-h)*m/f+p));bM(e,t,v,j,s)}const o=e[t];let l=n,c=a;for(Qd(e,n,t),s(e[a],o)>0&&Qd(e,n,a);l<c;){for(Qd(e,l,c),++l,--c;s(e[l],o)<0;)++l;for(;s(e[c],o)>0;)--c}s(e[n],o)===0?Qd(e,n,c):(++c,Qd(e,c,a)),c<=t&&(n=c+1),t<=c&&(a=c-1)}return e}function Qd(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function pW(e,t,n){if(e=Float64Array.from(oW(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return sE(e);if(t>=1)return aE(e);var a,s=(a-1)*t,o=Math.floor(s),l=aE(bM(e,o).subarray(0,o+1)),c=sE(e.subarray(o+1));return l+(c-l)*(s-o)}}function gW(e,t,n=vM){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,o=Math.floor(s),l=+n(e[o],o,e),c=+n(e[o+1],o+1,e);return l+(c-l)*(s-o)}}function xW(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(s);++a<s;)o[a]=e+a*n;return o}function Ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Gb=Symbol("implicit");function uw(){var e=new rE,t=[],n=[],a=Gb;function s(o){let l=e.get(o);if(l===void 0){if(a!==Gb)return a;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return s.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new rE;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(o){return arguments.length?(n=Array.from(o),s):n.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.copy=function(){return uw(t,n).unknown(a)},Ka.apply(s,arguments),s}function fw(){var e=uw().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,o,l,c=!1,f=0,h=0,u=.5;delete e.unknown;function m(){var p=t().length,v=s<a,j=v?s:a,y=v?a:s;o=(y-j)/Math.max(1,p-f+h*2),c&&(o=Math.floor(o)),j+=(y-j-o*(p-f))*u,l=o*(1-f),c&&(j=Math.round(j),l=Math.round(l));var b=xW(p).map(function(N){return j+o*N});return n(v?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,c=!0,m()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(p){return arguments.length?(c=!!p,m()):c},e.padding=function(p){return arguments.length?(f=Math.min(1,h=+p),m()):f},e.paddingInner=function(p){return arguments.length?(f=Math.min(1,p),m()):f},e.paddingOuter=function(p){return arguments.length?(h=+p,m()):h},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),m()):u},e.copy=function(){return fw(t(),[a,s]).round(c).paddingInner(f).paddingOuter(h).align(u)},Ka.apply(m(),arguments)}function jM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return jM(t())},e}function vW(){return jM(fw.apply(null,arguments).paddingInner(1))}function hw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wM(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function of(){}var Eu=.7,Zm=1/Eu,wc="\\s*([+-]?\\d+)\\s*",Au="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yW=/^#([0-9a-f]{3,8})$/,bW=new RegExp("^rgb\\(".concat(wc,",").concat(wc,",").concat(wc,"\\)$")),jW=new RegExp("^rgb\\(".concat(As,",").concat(As,",").concat(As,"\\)$")),wW=new RegExp("^rgba\\(".concat(wc,",").concat(wc,",").concat(wc,",").concat(Au,"\\)$")),NW=new RegExp("^rgba\\(".concat(As,",").concat(As,",").concat(As,",").concat(Au,"\\)$")),SW=new RegExp("^hsl\\(".concat(Au,",").concat(As,",").concat(As,"\\)$")),CW=new RegExp("^hsla\\(".concat(Au,",").concat(As,",").concat(As,",").concat(Au,"\\)$")),oE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hw(of,Iu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iE,formatHex:iE,formatHex8:kW,formatHsl:PW,formatRgb:lE,toString:lE});function iE(){return this.rgb().formatHex()}function kW(){return this.rgb().formatHex8()}function PW(){return NM(this).formatHsl()}function lE(){return this.rgb().formatRgb()}function Iu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yW.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cE(t):n===3?new aa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bW.exec(e))?new aa(t[1],t[2],t[3],1):(t=jW.exec(e))?new aa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wW.exec(e))?Wh(t[1],t[2],t[3],t[4]):(t=NW.exec(e))?Wh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=SW.exec(e))?fE(t[1],t[2]/100,t[3]/100,1):(t=CW.exec(e))?fE(t[1],t[2]/100,t[3]/100,t[4]):oE.hasOwnProperty(e)?cE(oE[e]):e==="transparent"?new aa(NaN,NaN,NaN,0):null}function cE(e){return new aa(e>>16&255,e>>8&255,e&255,1)}function Wh(e,t,n,a){return a<=0&&(e=t=n=NaN),new aa(e,t,n,a)}function EW(e){return e instanceof of||(e=Iu(e)),e?(e=e.rgb(),new aa(e.r,e.g,e.b,e.opacity)):new aa}function Hb(e,t,n,a){return arguments.length===1?EW(e):new aa(e,t,n,a==null?1:a)}function aa(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}hw(aa,Hb,wM(of,{brighter(e){return e=e==null?Zm:Math.pow(Zm,e),new aa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new aa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new aa(sl(this.r),sl(this.g),sl(this.b),ep(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dE,formatHex:dE,formatHex8:AW,formatRgb:uE,toString:uE}));function dE(){return"#".concat(el(this.r)).concat(el(this.g)).concat(el(this.b))}function AW(){return"#".concat(el(this.r)).concat(el(this.g)).concat(el(this.b)).concat(el((isNaN(this.opacity)?1:this.opacity)*255))}function uE(){const e=ep(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(sl(this.r),", ").concat(sl(this.g),", ").concat(sl(this.b)).concat(e===1?")":", ".concat(e,")"))}function ep(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function el(e){return e=sl(e),(e<16?"0":"")+e.toString(16)}function fE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new os(e,t,n,a)}function NM(e){if(e instanceof os)return new os(e.h,e.s,e.l,e.opacity);if(e instanceof of||(e=Iu(e)),!e)return new os;if(e instanceof os)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),o=Math.max(t,n,a),l=NaN,c=o-s,f=(o+s)/2;return c?(t===o?l=(n-a)/c+(n<a)*6:n===o?l=(a-t)/c+2:l=(t-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new os(l,c,f,e.opacity)}function IW(e,t,n,a){return arguments.length===1?NM(e):new os(e,t,n,a==null?1:a)}function os(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}hw(os,IW,wM(of,{brighter(e){return e=e==null?Zm:Math.pow(Zm,e),new os(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new os(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new aa(ny(e>=240?e-240:e+120,s,a),ny(e,s,a),ny(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new os(hE(this.h),Kh(this.s),Kh(this.l),ep(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ep(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(hE(this.h),", ").concat(Kh(this.s)*100,"%, ").concat(Kh(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function hE(e){return e=(e||0)%360,e<0?e+360:e}function Kh(e){return Math.max(0,Math.min(1,e||0))}function ny(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mw=e=>()=>e;function DW(e,t){return function(n){return e+n*t}}function OW(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function MW(e){return(e=+e)==1?SM:function(t,n){return n-t?OW(t,n,e):mw(isNaN(t)?n:t)}}function SM(e,t){var n=t-e;return n?DW(e,n):mw(isNaN(e)?t:e)}const mE=(function e(t){var n=MW(t);function a(s,o){var l=n((s=Hb(s)).r,(o=Hb(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=SM(s.opacity,o.opacity);return function(u){return s.r=l(u),s.g=c(u),s.b=f(u),s.opacity=h(u),s+""}}return a.gamma=e,a})(1);function TW(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(o){for(s=0;s<n;++s)a[s]=e[s]*(1-o)+t[s]*o;return a}}function _W(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RW(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),o=new Array(n),l;for(l=0;l<a;++l)s[l]=Gc(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(c){for(l=0;l<a;++l)o[l]=s[l](c);return o}}function $W(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function tp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function FW(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Gc(e[s],t[s]):a[s]=t[s];return function(o){for(s in n)a[s]=n[s](o);return a}}var Wb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ay=new RegExp(Wb.source,"g");function LW(e){return function(){return e}}function zW(e){return function(t){return e(t)+""}}function BW(e,t){var n=Wb.lastIndex=ay.lastIndex=0,a,s,o,l=-1,c=[],f=[];for(e=e+"",t=t+"";(a=Wb.exec(e))&&(s=ay.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(a=a[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:tp(a,s)})),n=ay.lastIndex;return n<t.length&&(o=t.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?zW(f[0].x):LW(t):(t=f.length,function(h){for(var u=0,m;u<t;++u)c[(m=f[u]).i]=m.x(h);return c.join("")})}function Gc(e,t){var n=typeof t,a;return t==null||n==="boolean"?mw(t):(n==="number"?tp:n==="string"?(a=Iu(t))?(t=a,mE):BW:t instanceof Iu?mE:t instanceof Date?$W:_W(t)?TW:Array.isArray(t)?RW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?FW:tp)(e,t)}function pw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function UW(e,t){t===void 0&&(t=e,e=Gc);for(var n=0,a=t.length-1,s=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(s,s=t[++n]);return function(l){var c=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return o[c](l-c)}}function VW(e){return function(){return e}}function rp(e){return+e}var pE=[0,1];function qn(e){return e}function Kb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:VW(isNaN(t)?NaN:.5)}function qW(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function GW(e,t,n){var a=e[0],s=e[1],o=t[0],l=t[1];return s<a?(a=Kb(s,a),o=n(l,o)):(a=Kb(a,s),o=n(o,l)),function(c){return o(a(c))}}function HW(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),o=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=Kb(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(c){var f=sf(e,c,1,a)-1;return o[f](s[f](c))}}function lf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gg(){var e=pE,t=pE,n=Gc,a,s,o,l=qn,c,f,h;function u(){var p=Math.min(e.length,t.length);return l!==qn&&(l=qW(e[0],e[p-1])),c=p>2?HW:GW,f=h=null,m}function m(p){return p==null||isNaN(p=+p)?o:(f||(f=c(e.map(a),t,n)))(a(l(p)))}return m.invert=function(p){return l(s((h||(h=c(t,e.map(a),tp)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,rp),u()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),n=pw,u()},m.clamp=function(p){return arguments.length?(l=p?!0:qn,u()):l!==qn},m.interpolate=function(p){return arguments.length?(n=p,u()):n},m.unknown=function(p){return arguments.length?(o=p,m):o},function(p,v){return a=p,s=v,u()}}function gw(){return gg()(qn,qn)}function WW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function np(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Ac(e){return e=np(Math.abs(e)),e?e[1]:NaN}function KW(e,t){return function(n,a){for(var s=n.length,o=[],l=0,c=e[0],f=0;s>0&&c>0&&(f+c+1>a&&(c=Math.max(1,a-f)),o.push(n.substring(s-=c,s+c)),!((f+=c+1)>a));)c=e[l=(l+1)%e.length];return o.reverse().join(t)}}function YW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var XW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Du(e){if(!(t=XW.exec(e)))throw new Error("invalid format: "+e);var t;return new xw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Du.prototype=xw.prototype;function xw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function JW(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var CM;function QW(e,t){var n=np(e,t);if(!n)return e+"";var a=n[0],s=n[1],o=s-(CM=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return o===l?a:o>l?a+new Array(o-l+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+np(e,Math.max(0,t+o-1))[0]}function gE(e,t){var n=np(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const xE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:WW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gE(e*100,t),r:gE,s:QW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vE(e){return e}var yE=Array.prototype.map,bE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ZW(e){var t=e.grouping===void 0||e.thousands===void 0?vE:KW(yE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?vE:YW(yE.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Du(m);var p=m.fill,v=m.align,j=m.sign,y=m.symbol,b=m.zero,N=m.width,k=m.comma,D=m.precision,E=m.trim,P=m.type;P==="n"?(k=!0,P="g"):xE[P]||(D===void 0&&(D=12),E=!0,P="g"),(b||p==="0"&&v==="=")&&(b=!0,p="0",v="=");var C=y==="$"?n:y==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",O=y==="$"?a:/[%p]/.test(P)?l:"",A=xE[P],_=/[defgprs%]/.test(P);D=D===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function z(G){var T=C,M=O,W,Z,B;if(P==="c")M=A(G)+M,G="";else{G=+G;var U=G<0||1/G<0;if(G=isNaN(G)?f:A(Math.abs(G),D),E&&(G=JW(G)),U&&+G==0&&j!=="+"&&(U=!1),T=(U?j==="("?j:c:j==="-"||j==="("?"":j)+T,M=(P==="s"?bE[8+CM/3]:"")+M+(U&&j==="("?")":""),_){for(W=-1,Z=G.length;++W<Z;)if(B=G.charCodeAt(W),48>B||B>57){M=(B===46?s+G.slice(W+1):G.slice(W))+M,G=G.slice(0,W);break}}}k&&!b&&(G=t(G,1/0));var $=T.length+G.length+M.length,K=$<N?new Array(N-$+1).join(p):"";switch(k&&b&&(G=t(K+G,K.length?N-M.length:1/0),K=""),v){case"<":G=T+G+M+K;break;case"=":G=T+K+G+M;break;case"^":G=K.slice(0,$=K.length>>1)+T+G+M+K.slice($);break;default:G=K+T+G+M;break}return o(G)}return z.toString=function(){return m+""},z}function u(m,p){var v=h((m=Du(m),m.type="f",m)),j=Math.max(-8,Math.min(8,Math.floor(Ac(p)/3)))*3,y=Math.pow(10,-j),b=bE[8+j/3];return function(N){return v(y*N)+b}}return{format:h,formatPrefix:u}}var Yh,vw,kM;eK({thousands:",",grouping:[3],currency:["$",""]});function eK(e){return Yh=ZW(e),vw=Yh.format,kM=Yh.formatPrefix,Yh}function tK(e){return Math.max(0,-Ac(Math.abs(e)))}function rK(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ac(t)/3)))*3-Ac(Math.abs(e)))}function nK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ac(t)-Ac(e))+1}function PM(e,t,n,a){var s=qb(e,t,n),o;switch(a=Du(a==null?",f":a),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=rK(s,l))&&(a.precision=o),kM(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=nK(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=tK(s))&&(a.precision=o-(a.type==="%")*2);break}}return vw(a)}function vi(e){var t=e.domain;return e.ticks=function(n){var a=t();return Ub(a[0],a[a.length-1],n==null?10:n)},e.tickFormat=function(n,a){var s=t();return PM(s[0],s[s.length-1],n==null?10:n,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,o=a.length-1,l=a[s],c=a[o],f,h,u=10;for(c<l&&(h=l,l=c,c=h,h=s,s=o,o=h);u-- >0;){if(h=Vb(l,c,n),h===f)return a[s]=l,a[o]=c,t(a);if(h>0)l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h;else if(h<0)l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h;else break;f=h}return e},e}function EM(){var e=gw();return e.copy=function(){return lf(e,EM())},Ka.apply(e,arguments),vi(e)}function AM(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,rp),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return AM(e).unknown(t)},e=arguments.length?Array.from(e,rp):[0,1],vi(n)}function IM(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],o=e[a],l;return o<s&&(l=n,n=a,a=l,l=s,s=o,o=l),e[n]=t.floor(s),e[a]=t.ceil(o),e}function jE(e){return Math.log(e)}function wE(e){return Math.exp(e)}function aK(e){return-Math.log(-e)}function sK(e){return-Math.exp(-e)}function oK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function iK(e){return e===10?oK:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function NE(e){return(t,n)=>-e(-t,n)}function yw(e){const t=e(jE,wE),n=t.domain;let a=10,s,o;function l(){return s=lK(a),o=iK(a),n()[0]<0?(s=NE(s),o=NE(o),e(aK,sK)):e(jE,wE),t}return t.base=function(c){return arguments.length?(a=+c,l()):a},t.domain=function(c){return arguments.length?(n(c),l()):n()},t.ticks=c=>{const f=n();let h=f[0],u=f[f.length-1];const m=u<h;m&&([h,u]=[u,h]);let p=s(h),v=s(u),j,y;const b=c==null?10:+c;let N=[];if(!(a%1)&&v-p<b){if(p=Math.floor(p),v=Math.ceil(v),h>0){for(;p<=v;++p)for(j=1;j<a;++j)if(y=p<0?j/o(-p):j*o(p),!(y<h)){if(y>u)break;N.push(y)}}else for(;p<=v;++p)for(j=a-1;j>=1;--j)if(y=p>0?j/o(-p):j*o(p),!(y<h)){if(y>u)break;N.push(y)}N.length*2<b&&(N=Ub(h,u,b))}else N=Ub(p,v,Math.min(v-p,b)).map(o);return m?N.reverse():N},t.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=a===10?"s":","),typeof f!="function"&&(!(a%1)&&(f=Du(f)).precision==null&&(f.trim=!0),f=vw(f)),c===1/0)return f;const h=Math.max(1,a*c/t.ticks().length);return u=>{let m=u/o(Math.round(s(u)));return m*a<a-.5&&(m*=a),m<=h?f(u):""}},t.nice=()=>n(IM(n(),{floor:c=>o(Math.floor(s(c))),ceil:c=>o(Math.ceil(s(c)))})),t}function DM(){const e=yw(gg()).domain([1,10]);return e.copy=()=>lf(e,DM()).base(e.base()),Ka.apply(e,arguments),e}function SE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function CE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bw(e){var t=1,n=e(SE(t),CE(t));return n.constant=function(a){return arguments.length?e(SE(t=+a),CE(t)):t},vi(n)}function OM(){var e=bw(gg());return e.copy=function(){return lf(e,OM()).constant(e.constant())},Ka.apply(e,arguments)}function kE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function dK(e){return e<0?-e*e:e*e}function jw(e){var t=e(qn,qn),n=1;function a(){return n===1?e(qn,qn):n===.5?e(cK,dK):e(kE(n),kE(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},vi(t)}function ww(){var e=jw(gg());return e.copy=function(){return lf(e,ww()).exponent(e.exponent())},Ka.apply(e,arguments),e}function uK(){return ww.apply(null,arguments).exponent(.5)}function PE(e){return Math.sign(e)*e*e}function fK(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function MM(){var e=gw(),t=[0,1],n=!1,a;function s(o){var l=fK(e(o));return isNaN(l)?a:n?Math.round(l):l}return s.invert=function(o){return e.invert(PE(o))},s.domain=function(o){return arguments.length?(e.domain(o),s):e.domain()},s.range=function(o){return arguments.length?(e.range((t=Array.from(o,rp)).map(PE)),s):t.slice()},s.rangeRound=function(o){return s.range(o).round(!0)},s.round=function(o){return arguments.length?(n=!!o,s):n},s.clamp=function(o){return arguments.length?(e.clamp(o),s):e.clamp()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.copy=function(){return MM(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Ka.apply(s,arguments),vi(s)}function TM(){var e=[],t=[],n=[],a;function s(){var l=0,c=Math.max(1,t.length);for(n=new Array(c-1);++l<c;)n[l-1]=gW(e,l/c);return o}function o(l){return l==null||isNaN(l=+l)?a:t[sf(n,l)]}return o.invertExtent=function(l){var c=t.indexOf(l);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let c of l)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(si),s()},o.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},o.unknown=function(l){return arguments.length?(a=l,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return TM().domain(e).range(t).unknown(a)},Ka.apply(o,arguments)}function _M(){var e=0,t=1,n=1,a=[.5],s=[0,1],o;function l(f){return f!=null&&f<=f?s[sf(a,f,0,n)]:o}function c(){var f=-1;for(a=new Array(n);++f<n;)a[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,c()):[e,t]},l.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,c()):s.slice()},l.invertExtent=function(f){var h=s.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=n?[a[n-1],t]:[a[h-1],a[h]]},l.unknown=function(f){return arguments.length&&(o=f),l},l.thresholds=function(){return a.slice()},l.copy=function(){return _M().domain([e,t]).range(s).unknown(o)},Ka.apply(vi(l),arguments)}function RM(){var e=[.5],t=[0,1],n,a=1;function s(o){return o!=null&&o<=o?t[sf(e,o,0,a)]:n}return s.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return RM().domain(e).range(t).unknown(n)},Ka.apply(s,arguments)}const sy=new Date,oy=new Date;function Qr(e,t,n,a){function s(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(e(o=new Date(+o)),o),s.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),s.round=o=>{const l=s(o),c=s.ceil(o);return o-l<c-o?l:c},s.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),s.range=(o,l,c)=>{const f=[];if(o=s.ceil(o),c=c==null?1:Math.floor(c),!(o<l)||!(c>0))return f;let h;do f.push(h=new Date(+o)),t(o,c),e(o);while(h<o&&o<l);return f},s.filter=o=>Qr(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;t(l,-1),!o(l););else for(;--c>=0;)for(;t(l,1),!o(l););}),n&&(s.count=(o,l)=>(sy.setTime(+o),oy.setTime(+l),e(sy),e(oy),Math.floor(n(sy,oy))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(a?l=>a(l)%o===0:l=>s.count(0,l)%o===0):s)),s}const ap=Qr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ap.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Qr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ap);ap.range;const to=1e3,Ba=to*60,ro=Ba*60,fo=ro*24,Nw=fo*7,EE=fo*30,iy=fo*365,tl=Qr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getUTCSeconds());tl.range;const Sw=Qr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*to)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getMinutes());Sw.range;const Cw=Qr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCMinutes());Cw.range;const kw=Qr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*to-e.getMinutes()*Ba)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getHours());kw.range;const Pw=Qr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getUTCHours());Pw.range;const cf=Qr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/fo,e=>e.getDate()-1);cf.range;const xg=Qr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fo,e=>e.getUTCDate()-1);xg.range;const $M=Qr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fo,e=>Math.floor(e/fo));$M.range;function Sl(e){return Qr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/Nw)}const vg=Sl(0),sp=Sl(1),hK=Sl(2),mK=Sl(3),Ic=Sl(4),pK=Sl(5),gK=Sl(6);vg.range;sp.range;hK.range;mK.range;Ic.range;pK.range;gK.range;function Cl(e){return Qr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Nw)}const yg=Cl(0),op=Cl(1),xK=Cl(2),vK=Cl(3),Dc=Cl(4),yK=Cl(5),bK=Cl(6);yg.range;op.range;xK.range;vK.range;Dc.range;yK.range;bK.range;const Ew=Qr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ew.range;const Aw=Qr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Aw.range;const ho=Qr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ho.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ho.range;const mo=Qr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());mo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});mo.range;function FM(e,t,n,a,s,o){const l=[[tl,1,to],[tl,5,5*to],[tl,15,15*to],[tl,30,30*to],[o,1,Ba],[o,5,5*Ba],[o,15,15*Ba],[o,30,30*Ba],[s,1,ro],[s,3,3*ro],[s,6,6*ro],[s,12,12*ro],[a,1,fo],[a,2,2*fo],[n,1,Nw],[t,1,EE],[t,3,3*EE],[e,1,iy]];function c(h,u,m){const p=u<h;p&&([h,u]=[u,h]);const v=m&&typeof m.range=="function"?m:f(h,u,m),j=v?v.range(h,+u+1):[];return p?j.reverse():j}function f(h,u,m){const p=Math.abs(u-h)/m,v=dw(([,,b])=>b).right(l,p);if(v===l.length)return e.every(qb(h/iy,u/iy,m));if(v===0)return ap.every(Math.max(qb(h,u,m),1));const[j,y]=l[p/l[v-1][2]<l[v][2]/p?v-1:v];return j.every(y)}return[c,f]}const[jK,wK]=FM(mo,Aw,yg,$M,Pw,Cw),[NK,SK]=FM(ho,Ew,vg,cf,kw,Sw);function ly(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function CK(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,o=e.days,l=e.shortDays,c=e.months,f=e.shortMonths,h=eu(s),u=tu(s),m=eu(o),p=tu(o),v=eu(l),j=tu(l),y=eu(c),b=tu(c),N=eu(f),k=tu(f),D={a:U,A:$,b:K,B:V,c:null,d:TE,e:TE,f:KK,g:aY,G:oY,H:GK,I:HK,j:WK,L:LM,m:YK,M:XK,p:F,q:L,Q:$E,s:FE,S:JK,u:QK,U:ZK,V:eY,w:tY,W:rY,x:null,X:null,y:nY,Y:sY,Z:iY,"%":RE},E={a:X,A:Y,b:me,B:xe,c:null,d:_E,e:_E,f:uY,g:jY,G:NY,H:lY,I:cY,j:dY,L:BM,m:fY,M:hY,p:Pe,q:Ge,Q:$E,s:FE,S:mY,u:pY,U:gY,V:xY,w:vY,W:yY,x:null,X:null,y:bY,Y:wY,Z:SY,"%":RE},P={a:z,A:G,b:T,B:M,c:W,d:OE,e:OE,f:BK,g:DE,G:IE,H:ME,I:ME,j:$K,L:zK,m:RK,M:FK,p:_,q:_K,Q:VK,s:qK,S:LK,u:IK,U:DK,V:OK,w:AK,W:MK,x:Z,X:B,y:DE,Y:IE,Z:TK,"%":UK};D.x=C(n,D),D.X=C(a,D),D.c=C(t,D),E.x=C(n,E),E.X=C(a,E),E.c=C(t,E);function C(he,ie){return function(Ce){var se=[],oe=-1,Fe=0,ze=he.length,De,Ue,Xe;for(Ce instanceof Date||(Ce=new Date(+Ce));++oe<ze;)he.charCodeAt(oe)===37&&(se.push(he.slice(Fe,oe)),(Ue=AE[De=he.charAt(++oe)])!=null?De=he.charAt(++oe):Ue=De==="e"?" ":"0",(Xe=ie[De])&&(De=Xe(Ce,Ue)),se.push(De),Fe=oe+1);return se.push(he.slice(Fe,oe)),se.join("")}}function O(he,ie){return function(Ce){var se=Zd(1900,void 0,1),oe=A(se,he,Ce+="",0),Fe,ze;if(oe!=Ce.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(ie&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Fe=cy(Zd(se.y,0,1)),ze=Fe.getUTCDay(),Fe=ze>4||ze===0?op.ceil(Fe):op(Fe),Fe=xg.offset(Fe,(se.V-1)*7),se.y=Fe.getUTCFullYear(),se.m=Fe.getUTCMonth(),se.d=Fe.getUTCDate()+(se.w+6)%7):(Fe=ly(Zd(se.y,0,1)),ze=Fe.getDay(),Fe=ze>4||ze===0?sp.ceil(Fe):sp(Fe),Fe=cf.offset(Fe,(se.V-1)*7),se.y=Fe.getFullYear(),se.m=Fe.getMonth(),se.d=Fe.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),ze="Z"in se?cy(Zd(se.y,0,1)).getUTCDay():ly(Zd(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(ze+5)%7:se.w+se.U*7-(ze+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,cy(se)):ly(se)}}function A(he,ie,Ce,se){for(var oe=0,Fe=ie.length,ze=Ce.length,De,Ue;oe<Fe;){if(se>=ze)return-1;if(De=ie.charCodeAt(oe++),De===37){if(De=ie.charAt(oe++),Ue=P[De in AE?ie.charAt(oe++):De],!Ue||(se=Ue(he,Ce,se))<0)return-1}else if(De!=Ce.charCodeAt(se++))return-1}return se}function _(he,ie,Ce){var se=h.exec(ie.slice(Ce));return se?(he.p=u.get(se[0].toLowerCase()),Ce+se[0].length):-1}function z(he,ie,Ce){var se=v.exec(ie.slice(Ce));return se?(he.w=j.get(se[0].toLowerCase()),Ce+se[0].length):-1}function G(he,ie,Ce){var se=m.exec(ie.slice(Ce));return se?(he.w=p.get(se[0].toLowerCase()),Ce+se[0].length):-1}function T(he,ie,Ce){var se=N.exec(ie.slice(Ce));return se?(he.m=k.get(se[0].toLowerCase()),Ce+se[0].length):-1}function M(he,ie,Ce){var se=y.exec(ie.slice(Ce));return se?(he.m=b.get(se[0].toLowerCase()),Ce+se[0].length):-1}function W(he,ie,Ce){return A(he,t,ie,Ce)}function Z(he,ie,Ce){return A(he,n,ie,Ce)}function B(he,ie,Ce){return A(he,a,ie,Ce)}function U(he){return l[he.getDay()]}function $(he){return o[he.getDay()]}function K(he){return f[he.getMonth()]}function V(he){return c[he.getMonth()]}function F(he){return s[+(he.getHours()>=12)]}function L(he){return 1+~~(he.getMonth()/3)}function X(he){return l[he.getUTCDay()]}function Y(he){return o[he.getUTCDay()]}function me(he){return f[he.getUTCMonth()]}function xe(he){return c[he.getUTCMonth()]}function Pe(he){return s[+(he.getUTCHours()>=12)]}function Ge(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ie=C(he+="",D);return ie.toString=function(){return he},ie},parse:function(he){var ie=O(he+="",!1);return ie.toString=function(){return he},ie},utcFormat:function(he){var ie=C(he+="",E);return ie.toString=function(){return he},ie},utcParse:function(he){var ie=O(he+="",!0);return ie.toString=function(){return he},ie}}}var AE={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,kK=/^%/,PK=/[\\^$*+?|[\]().{}]/g;function Xt(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",o=s.length;return a+(o<n?new Array(n-o+1).join(t)+s:s)}function EK(e){return e.replace(PK,"\\$&")}function eu(e){return new RegExp("^(?:"+e.map(EK).join("|")+")","i")}function tu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function AK(e,t,n){var a=gn.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function IK(e,t,n){var a=gn.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function DK(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function OK(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function MK(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function IE(e,t,n){var a=gn.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function DE(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function TK(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function _K(e,t,n){var a=gn.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function RK(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function OE(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function $K(e,t,n){var a=gn.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function ME(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function FK(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function LK(e,t,n){var a=gn.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function zK(e,t,n){var a=gn.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function BK(e,t,n){var a=gn.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function UK(e,t,n){var a=kK.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function VK(e,t,n){var a=gn.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function qK(e,t,n){var a=gn.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function TE(e,t){return Xt(e.getDate(),t,2)}function GK(e,t){return Xt(e.getHours(),t,2)}function HK(e,t){return Xt(e.getHours()%12||12,t,2)}function WK(e,t){return Xt(1+cf.count(ho(e),e),t,3)}function LM(e,t){return Xt(e.getMilliseconds(),t,3)}function KK(e,t){return LM(e,t)+"000"}function YK(e,t){return Xt(e.getMonth()+1,t,2)}function XK(e,t){return Xt(e.getMinutes(),t,2)}function JK(e,t){return Xt(e.getSeconds(),t,2)}function QK(e){var t=e.getDay();return t===0?7:t}function ZK(e,t){return Xt(vg.count(ho(e)-1,e),t,2)}function zM(e){var t=e.getDay();return t>=4||t===0?Ic(e):Ic.ceil(e)}function eY(e,t){return e=zM(e),Xt(Ic.count(ho(e),e)+(ho(e).getDay()===4),t,2)}function tY(e){return e.getDay()}function rY(e,t){return Xt(sp.count(ho(e)-1,e),t,2)}function nY(e,t){return Xt(e.getFullYear()%100,t,2)}function aY(e,t){return e=zM(e),Xt(e.getFullYear()%100,t,2)}function sY(e,t){return Xt(e.getFullYear()%1e4,t,4)}function oY(e,t){var n=e.getDay();return e=n>=4||n===0?Ic(e):Ic.ceil(e),Xt(e.getFullYear()%1e4,t,4)}function iY(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xt(t/60|0,"0",2)+Xt(t%60,"0",2)}function _E(e,t){return Xt(e.getUTCDate(),t,2)}function lY(e,t){return Xt(e.getUTCHours(),t,2)}function cY(e,t){return Xt(e.getUTCHours()%12||12,t,2)}function dY(e,t){return Xt(1+xg.count(mo(e),e),t,3)}function BM(e,t){return Xt(e.getUTCMilliseconds(),t,3)}function uY(e,t){return BM(e,t)+"000"}function fY(e,t){return Xt(e.getUTCMonth()+1,t,2)}function hY(e,t){return Xt(e.getUTCMinutes(),t,2)}function mY(e,t){return Xt(e.getUTCSeconds(),t,2)}function pY(e){var t=e.getUTCDay();return t===0?7:t}function gY(e,t){return Xt(yg.count(mo(e)-1,e),t,2)}function UM(e){var t=e.getUTCDay();return t>=4||t===0?Dc(e):Dc.ceil(e)}function xY(e,t){return e=UM(e),Xt(Dc.count(mo(e),e)+(mo(e).getUTCDay()===4),t,2)}function vY(e){return e.getUTCDay()}function yY(e,t){return Xt(op.count(mo(e)-1,e),t,2)}function bY(e,t){return Xt(e.getUTCFullYear()%100,t,2)}function jY(e,t){return e=UM(e),Xt(e.getUTCFullYear()%100,t,2)}function wY(e,t){return Xt(e.getUTCFullYear()%1e4,t,4)}function NY(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dc(e):Dc.ceil(e),Xt(e.getUTCFullYear()%1e4,t,4)}function SY(){return"+0000"}function RE(){return"%"}function $E(e){return+e}function FE(e){return Math.floor(+e/1e3)}var lc,VM,qM;CY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CY(e){return lc=CK(e),VM=lc.format,lc.parse,qM=lc.utcFormat,lc.utcParse,lc}function kY(e){return new Date(e)}function PY(e){return e instanceof Date?+e:+new Date(+e)}function Iw(e,t,n,a,s,o,l,c,f,h){var u=gw(),m=u.invert,p=u.domain,v=h(".%L"),j=h(":%S"),y=h("%I:%M"),b=h("%I %p"),N=h("%a %d"),k=h("%b %d"),D=h("%B"),E=h("%Y");function P(C){return(f(C)<C?v:c(C)<C?j:l(C)<C?y:o(C)<C?b:a(C)<C?s(C)<C?N:k:n(C)<C?D:E)(C)}return u.invert=function(C){return new Date(m(C))},u.domain=function(C){return arguments.length?p(Array.from(C,PY)):p().map(kY)},u.ticks=function(C){var O=p();return e(O[0],O[O.length-1],C==null?10:C)},u.tickFormat=function(C,O){return O==null?P:h(O)},u.nice=function(C){var O=p();return(!C||typeof C.range!="function")&&(C=t(O[0],O[O.length-1],C==null?10:C)),C?p(IM(O,C)):u},u.copy=function(){return lf(u,Iw(e,t,n,a,s,o,l,c,f,h))},u}function EY(){return Ka.apply(Iw(NK,SK,ho,Ew,vg,cf,kw,Sw,tl,VM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AY(){return Ka.apply(Iw(jK,wK,mo,Aw,yg,xg,Pw,Cw,tl,qM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bg(){var e=0,t=1,n,a,s,o,l=qn,c=!1,f;function h(m){return m==null||isNaN(m=+m)?f:l(s===0?.5:(m=(o(m)-n)*s,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=o(e=+e),a=o(t=+t),s=n===a?0:1/(a-n),h):[e,t]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(l=m,h):l};function u(m){return function(p){var v,j;return arguments.length?([v,j]=p,l=m(v,j),h):[l(0),l(1)]}}return h.range=u(Gc),h.rangeRound=u(pw),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return o=m,n=m(e),a=m(t),s=n===a?0:1/(a-n),h}}function yi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function GM(){var e=vi(bg()(qn));return e.copy=function(){return yi(e,GM())},wo.apply(e,arguments)}function HM(){var e=yw(bg()).domain([1,10]);return e.copy=function(){return yi(e,HM()).base(e.base())},wo.apply(e,arguments)}function WM(){var e=bw(bg());return e.copy=function(){return yi(e,WM()).constant(e.constant())},wo.apply(e,arguments)}function Dw(){var e=jw(bg());return e.copy=function(){return yi(e,Dw()).exponent(e.exponent())},wo.apply(e,arguments)}function IY(){return Dw.apply(null,arguments).exponent(.5)}function KM(){var e=[],t=qn;function n(a){if(a!=null&&!isNaN(a=+a))return t((sf(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(si),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,o)=>pW(e,o/a))},n.copy=function(){return KM(t).domain(e)},wo.apply(n,arguments)}function jg(){var e=0,t=.5,n=1,a=1,s,o,l,c,f,h=qn,u,m=!1,p;function v(y){return isNaN(y=+y)?p:(y=.5+((y=+u(y))-o)*(a*y<a*o?c:f),h(m?Math.max(0,Math.min(1,y)):y))}v.domain=function(y){return arguments.length?([e,t,n]=y,s=u(e=+e),o=u(t=+t),l=u(n=+n),c=s===o?0:.5/(o-s),f=o===l?0:.5/(l-o),a=o<s?-1:1,v):[e,t,n]},v.clamp=function(y){return arguments.length?(m=!!y,v):m},v.interpolator=function(y){return arguments.length?(h=y,v):h};function j(y){return function(b){var N,k,D;return arguments.length?([N,k,D]=b,h=UW(y,[N,k,D]),v):[h(0),h(.5),h(1)]}}return v.range=j(Gc),v.rangeRound=j(pw),v.unknown=function(y){return arguments.length?(p=y,v):p},function(y){return u=y,s=y(e),o=y(t),l=y(n),c=s===o?0:.5/(o-s),f=o===l?0:.5/(l-o),a=o<s?-1:1,v}}function YM(){var e=vi(jg()(qn));return e.copy=function(){return yi(e,YM())},wo.apply(e,arguments)}function XM(){var e=yw(jg()).domain([.1,1,10]);return e.copy=function(){return yi(e,XM()).base(e.base())},wo.apply(e,arguments)}function JM(){var e=bw(jg());return e.copy=function(){return yi(e,JM()).constant(e.constant())},wo.apply(e,arguments)}function Ow(){var e=jw(jg());return e.copy=function(){return yi(e,Ow()).exponent(e.exponent())},wo.apply(e,arguments)}function DY(){return Ow.apply(null,arguments).exponent(.5)}const iu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fw,scaleDiverging:YM,scaleDivergingLog:XM,scaleDivergingPow:Ow,scaleDivergingSqrt:DY,scaleDivergingSymlog:JM,scaleIdentity:AM,scaleImplicit:Gb,scaleLinear:EM,scaleLog:DM,scaleOrdinal:uw,scalePoint:vW,scalePow:ww,scaleQuantile:TM,scaleQuantize:_M,scaleRadial:MM,scaleSequential:GM,scaleSequentialLog:HM,scaleSequentialPow:Dw,scaleSequentialQuantile:KM,scaleSequentialSqrt:IY,scaleSequentialSymlog:WM,scaleSqrt:uK,scaleSymlog:OM,scaleThreshold:RM,scaleTime:EY,scaleUtc:AY,tickFormat:PM},Symbol.toStringTag,{value:"Module"}));var No=e=>e.chartData,wg=ke([No],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),QM=(e,t,n,a)=>a?wg(e):No(e),OY=(e,t,n)=>n?wg(e):No(e);function mi(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(yr(t)&&yr(n))return!0}return!1}function LE(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function ZM(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,s,o;if(yr(n))s=n;else if(typeof n=="function")return;if(yr(a))o=a;else if(typeof a=="function")return;var l=[s,o];if(mi(l))return l}}function MY(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(mi(a))return LE(a,t,n)}catch(v){}if(Array.isArray(e)&&e.length===2){var[s,o]=e,l,c;if(s==="auto")t!=null&&(l=Math.min(...t));else if(lt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch(v){}else if(typeof s=="string"&&Jk.test(s)){var f=Jk.exec(s);if(f==null||f[1]==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(o==="auto")t!=null&&(c=Math.max(...t));else if(lt(o))c=o;else if(typeof o=="function")try{t!=null&&(c=o(t==null?void 0:t[1]))}catch(v){}else if(typeof o=="string"&&Qk.test(o)){var u=Qk.exec(o);if(u==null||u[1]==null||t==null)c=void 0;else{var m=+u[1];c=t[1]+m}}else c=t==null?void 0:t[1];var p=[l,c];if(mi(p))return t==null?p:LE(p,t,n)}}}var Hc=1e9,TY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Tw,vr=!0,Wa="[DecimalError] ",ol=Wa+"Invalid argument: ",Mw=Wa+"Exponent out of range: ",Wc=Math.floor,Yi=Math.pow,_Y=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,va,dn=1e7,hr=7,eT=9007199254740991,ip=Wc(eT/hr),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var t,n,a,s,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===s?0:a>s^o.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*hr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(e){return ao(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var t=this,n=t.constructor;return lr(ao(t,new n(e),0,1),n.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return qr(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var t,n=this,a=n.constructor,s=a.precision,o=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(va))throw Error(Wa+"NaN");if(n.s<1)throw Error(Wa+(n.s?"NaN":"-Infinity"));return n.eq(va)?new a(0):(vr=!1,t=ao(Ou(n,o),Ou(e,o),o),vr=!0,lr(t,s))};nt.minus=nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nT(t,e):tT(t,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Wa+"NaN");return n.s?(vr=!1,t=ao(n,e,0,1).times(e),vr=!0,n.minus(t)):lr(new a(n),s)};nt.naturalExponential=nt.exp=function(){return rT(this)};nt.naturalLogarithm=nt.ln=function(){return Ou(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?tT(t,e):nT(t,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ol+e);if(t=qr(s)+1,a=s.d.length-1,n=a*hr+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};nt.squareRoot=nt.sqrt=function(){var e,t,n,a,s,o,l,c=this,f=c.constructor;if(c.s<1){if(!c.s)return new f(0);throw Error(Wa+"NaN")}for(e=qr(c),vr=!1,s=Math.sqrt(+c),s==0||s==1/0?(t=Es(c.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Wc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new f(t)):a=new f(s.toString()),n=f.precision,s=l=n+3;;)if(o=a,a=o.plus(ao(c,o,l+2)).times(.5),Es(o.d).slice(0,l)===(t=Es(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(lr(o,n+1,0),o.times(o).eq(c)){a=o;break}}else if(t!="9999")break;l+=4}return vr=!0,lr(a,n)};nt.times=nt.mul=function(e){var t,n,a,s,o,l,c,f,h,u=this,m=u.constructor,p=u.d,v=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,n=u.e+e.e,f=p.length,h=v.length,f<h&&(o=p,p=v,v=o,l=f,f=h,h=l),o=[],l=f+h,a=l;a--;)o.push(0);for(a=h;--a>=0;){for(t=0,s=f+a;s>a;)c=o[s]+v[a]*p[s-a-1]+t,o[s--]=c%dn|0,t=c/dn|0;o[s]=(o[s]+t)%dn|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,vr?lr(e,m.precision):e};nt.toDecimalPlaces=nt.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Ms(e,0,Hc),t===void 0?t=a.rounding:Ms(t,0,8),lr(n,e+qr(n)+1,t))};nt.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=xl(a,!0):(Ms(e,0,Hc),t===void 0?t=s.rounding:Ms(t,0,8),a=lr(new s(a),e+1,t),n=xl(a,!0,e+1)),n};nt.toFixed=function(e,t){var n,a,s=this,o=s.constructor;return e===void 0?xl(s):(Ms(e,0,Hc),t===void 0?t=o.rounding:Ms(t,0,8),a=lr(new o(s),e+qr(s)+1,t),n=xl(a.abs(),!1,e+qr(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var e=this,t=e.constructor;return lr(new t(e),qr(e)+1,t.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var t,n,a,s,o,l,c=this,f=c.constructor,h=12,u=+(e=new f(e));if(!e.s)return new f(va);if(c=new f(c),!c.s){if(e.s<1)throw Error(Wa+"Infinity");return c}if(c.eq(va))return c;if(a=f.precision,e.eq(va))return lr(c,a);if(t=e.e,n=e.d.length-1,l=t>=n,o=c.s,l){if((n=u<0?-u:u)<=eT){for(s=new f(va),t=Math.ceil(a/hr+4),vr=!1;n%2&&(s=s.times(c),BE(s.d,t)),n=Wc(n/2),n!==0;)c=c.times(c),BE(c.d,t);return vr=!0,e.s<0?new f(va).div(s):lr(s,a)}}else if(o<0)throw Error(Wa+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,vr=!1,s=e.times(Ou(c,a+h)),vr=!0,s=rT(s),s.s=o,s};nt.toPrecision=function(e,t){var n,a,s=this,o=s.constructor;return e===void 0?(n=qr(s),a=xl(s,n<=o.toExpNeg||n>=o.toExpPos)):(Ms(e,1,Hc),t===void 0?t=o.rounding:Ms(t,0,8),s=lr(new o(s),e,t),n=qr(s),a=xl(s,e<=n||n<=o.toExpNeg,e)),a};nt.toSignificantDigits=nt.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ms(e,1,Hc),t===void 0?t=a.rounding:Ms(t,0,8)),lr(new a(n),e,t)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qr(e),n=e.constructor;return xl(e,t<=n.toExpNeg||t>=n.toExpPos)};function tT(e,t){var n,a,s,o,l,c,f,h,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),vr?lr(t,m):t;if(f=e.d,h=t.d,l=e.e,s=t.e,f=f.slice(),o=l-s,o){for(o<0?(a=f,o=-o,c=h.length):(a=h,s=l,c=f.length),l=Math.ceil(m/hr),c=l>c?l+1:c+1,o>c&&(o=c,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(c=f.length,o=h.length,c-o<0&&(o=c,a=h,h=f,f=a),n=0;o;)n=(f[--o]=f[o]+h[o]+n)/dn|0,f[o]%=dn;for(n&&(f.unshift(n),++s),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=s,vr?lr(t,m):t}function Ms(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ol+e)}function Es(e){var t,n,a,s=e.length-1,o="",l=e[0];if(s>0){for(o+=l,t=1;t<s;t++)a=e[t]+"",n=hr-a.length,n&&(o+=Yo(n)),o+=a;l=e[t],a=l+"",n=hr-a.length,n&&(o+=Yo(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var ao=(function(){function e(a,s){var o,l=0,c=a.length;for(a=a.slice();c--;)o=a[c]*s+l,a[c]=o%dn|0,l=o/dn|0;return l&&a.unshift(l),a}function t(a,s,o,l){var c,f;if(o!=l)f=o>l?1:-1;else for(c=f=0;c<o;c++)if(a[c]!=s[c]){f=a[c]>s[c]?1:-1;break}return f}function n(a,s,o){for(var l=0;o--;)a[o]-=l,l=a[o]<s[o]?1:0,a[o]=l*dn+a[o]-s[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,o,l){var c,f,h,u,m,p,v,j,y,b,N,k,D,E,P,C,O,A,_=a.constructor,z=a.s==s.s?1:-1,G=a.d,T=s.d;if(!a.s)return new _(a);if(!s.s)throw Error(Wa+"Division by zero");for(f=a.e-s.e,O=T.length,P=G.length,v=new _(z),j=v.d=[],h=0;T[h]==(G[h]||0);)++h;if(T[h]>(G[h]||0)&&--f,o==null?k=o=_.precision:l?k=o+(qr(a)-qr(s))+1:k=o,k<0)return new _(0);if(k=k/hr+2|0,h=0,O==1)for(u=0,T=T[0],k++;(h<P||u)&&k--;h++)D=u*dn+(G[h]||0),j[h]=D/T|0,u=D%T|0;else{for(u=dn/(T[0]+1)|0,u>1&&(T=e(T,u),G=e(G,u),O=T.length,P=G.length),E=O,y=G.slice(0,O),b=y.length;b<O;)y[b++]=0;A=T.slice(),A.unshift(0),C=T[0],T[1]>=dn/2&&++C;do u=0,c=t(T,y,O,b),c<0?(N=y[0],O!=b&&(N=N*dn+(y[1]||0)),u=N/C|0,u>1?(u>=dn&&(u=dn-1),m=e(T,u),p=m.length,b=y.length,c=t(m,y,p,b),c==1&&(u--,n(m,O<p?A:T,p))):(u==0&&(c=u=1),m=T.slice()),p=m.length,p<b&&m.unshift(0),n(y,m,b),c==-1&&(b=y.length,c=t(T,y,O,b),c<1&&(u++,n(y,O<b?A:T,b))),b=y.length):c===0&&(u++,y=[0]),j[h++]=u,c&&y[0]?y[b++]=G[E]||0:(y=[G[E]],b=1);while((E++<P||y[0]!==void 0)&&k--)}return j[0]||j.shift(),v.e=f,lr(v,l?o+qr(v)+1:o)}})();function rT(e,t){var n,a,s,o,l,c,f=0,h=0,u=e.constructor,m=u.precision;if(qr(e)>16)throw Error(Mw+qr(e));if(!e.s)return new u(va);for(vr=!1,c=m,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(a=Math.log(Yi(2,h))/Math.LN10*2+5|0,c+=a,n=s=o=new u(va),u.precision=c;;){if(s=lr(s.times(e),c),n=n.times(++f),l=o.plus(ao(s,n,c)),Es(l.d).slice(0,c)===Es(o.d).slice(0,c)){for(;h--;)o=lr(o.times(o),c);return u.precision=m,t==null?(vr=!0,lr(o,m)):o}o=l}}function qr(e){for(var t=e.e*hr,n=e.d[0];n>=10;n/=10)t++;return t}function dy(e,t,n){if(t>e.LN10.sd())throw vr=!0,n&&(e.precision=n),Error(Wa+"LN10 precision limit exceeded");return lr(new e(e.LN10),t)}function Yo(e){for(var t="";e--;)t+="0";return t}function Ou(e,t){var n,a,s,o,l,c,f,h,u,m=1,p=10,v=e,j=v.d,y=v.constructor,b=y.precision;if(v.s<1)throw Error(Wa+(v.s?"NaN":"-Infinity"));if(v.eq(va))return new y(0);if(t==null?(vr=!1,h=b):h=t,v.eq(10))return t==null&&(vr=!0),dy(y,h);if(h+=p,y.precision=h,n=Es(j),a=n.charAt(0),o=qr(v),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)v=v.times(e),n=Es(v.d),a=n.charAt(0),m++;o=qr(v),a>1?(v=new y("0."+n),o++):v=new y(a+"."+n.slice(1))}else return f=dy(y,h+2,b).times(o+""),v=Ou(new y(a+"."+n.slice(1)),h-p).plus(f),y.precision=b,t==null?(vr=!0,lr(v,b)):v;for(c=l=v=ao(v.minus(va),v.plus(va),h),u=lr(v.times(v),h),s=3;;){if(l=lr(l.times(u),h),f=c.plus(ao(l,new y(s),h)),Es(f.d).slice(0,h)===Es(c.d).slice(0,h))return c=c.times(2),o!==0&&(c=c.plus(dy(y,h+2,b).times(o+""))),c=ao(c,new y(m),h),y.precision=b,t==null?(vr=!0,lr(c,b)):c;c=f,s+=2}}function zE(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=Wc(n/hr),e.d=[],a=(n+1)%hr,n<0&&(a+=hr),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=hr;a<s;)e.d.push(+t.slice(a,a+=hr));t=t.slice(a),a=hr-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),vr&&(e.e>ip||e.e<-ip))throw Error(Mw+n)}else e.s=0,e.e=0,e.d=[0];return e}function lr(e,t,n){var a,s,o,l,c,f,h,u,m=e.d;for(l=1,o=m[0];o>=10;o/=10)l++;if(a=t-l,a<0)a+=hr,s=t,h=m[u=0];else{if(u=Math.ceil((a+1)/hr),o=m.length,u>=o)return e;for(h=o=m[u],l=1;o>=10;o/=10)l++;a%=hr,s=a-hr+l}if(n!==void 0&&(o=Yi(10,l-s-1),c=h/o%10|0,f=t<0||m[u+1]!==void 0||h%o,f=n<4?(c||f)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||f||n==6&&(a>0?s>0?h/Yi(10,l-s):0:m[u-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return f?(o=qr(e),m.length=1,t=t-o-1,m[0]=Yi(10,(hr-t%hr)%hr),e.e=Wc(-t/hr)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=u,o=1,u--):(m.length=u+1,o=Yi(10,hr-a),m[u]=s>0?(h/Yi(10,l-s)%Yi(10,s)|0)*o:0),f)for(;;)if(u==0){(m[0]+=o)==dn&&(m[0]=1,++e.e);break}else{if(m[u]+=o,m[u]!=dn)break;m[u--]=0,o=1}for(a=m.length;m[--a]===0;)m.pop();if(vr&&(e.e>ip||e.e<-ip))throw Error(Mw+qr(e));return e}function nT(e,t){var n,a,s,o,l,c,f,h,u,m,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),vr?lr(t,v):t;if(f=e.d,m=t.d,a=t.e,h=e.e,f=f.slice(),l=h-a,l){for(u=l<0,u?(n=f,l=-l,c=m.length):(n=m,a=h,c=f.length),s=Math.max(Math.ceil(v/hr),c)+2,l>s&&(l=s,n.length=1),n.reverse(),s=l;s--;)n.push(0);n.reverse()}else{for(s=f.length,c=m.length,u=s<c,u&&(c=s),s=0;s<c;s++)if(f[s]!=m[s]){u=f[s]<m[s];break}l=0}for(u&&(n=f,f=m,m=n,t.s=-t.s),c=f.length,s=m.length-c;s>0;--s)f[c++]=0;for(s=m.length;s>l;){if(f[--s]<m[s]){for(o=s;o&&f[--o]===0;)f[o]=dn-1;--f[o],f[s]+=dn}f[s]-=m[s]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--a;return f[0]?(t.d=f,t.e=a,vr?lr(t,v):t):new p(0)}function xl(e,t,n){var a,s=qr(e),o=Es(e.d),l=o.length;return t?(n&&(a=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+Yo(a):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+Yo(-s-1)+o,n&&(a=n-l)>0&&(o+=Yo(a))):s>=l?(o+=Yo(s+1-l),n&&(a=n-s-1)>0&&(o=o+"."+Yo(a))):((a=s+1)<l&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-l)>0&&(s+1===l&&(o+="."),o+=Yo(a))),e.s<0?"-"+o:o}function BE(e,t){if(e.length>t)return e.length=t,!0}function aT(e){var t,n,a;function s(o){var l=this;if(!(l instanceof s))return new s(o);if(l.constructor=s,o instanceof s){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(ol+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return zE(l,o.toString())}else if(typeof o!="string")throw Error(ol+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,_Y.test(o))zE(l,o);else throw Error(ol+o)}if(s.prototype=nt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=aT,s.config=s.set=RY,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function RY(e){if(!e||typeof e!="object")throw Error(Wa+"Object expected");var t,n,a,s=["precision",1,Hc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(Wc(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(ol+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(ol+n+": "+a);return this}var Tw=aT(TY);va=new Tw(1);const ar=Tw;var $Y=e=>e,sT={},oT=e=>e===sT,UE=e=>function t(){return arguments.length===0||arguments.length===1&&oT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},iT=(e,t)=>e===1?t:UE(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(l=>l!==sT).length;return o>=e?t(...a):iT(e-o,UE(function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var h=a.map(u=>oT(u)?c.shift():u);return t(...h,...c)}))}),FY=e=>iT(e.length,e),Yb=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},LY=FY((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),zY=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return $Y;var s=n.reverse(),o=s[0],l=s.slice(1);return function(){return l.reduce((c,f)=>f(c),o(...arguments))}};function lT(e){var t;return e===0?t=1:t=Math.floor(new ar(e).abs().log(10).toNumber())+1,t}function cT(e,t,n){for(var a=new ar(e),s=0,o=[];a.lt(t)&&s<1e5;)o.push(a.toNumber()),a=a.add(n),s++;return o}var dT=e=>{var[t,n]=e,[a,s]=[t,n];return t>n&&([a,s]=[n,t]),[a,s]},uT=(e,t,n)=>{if(e.lte(0))return new ar(0);var a=lT(e.toNumber()),s=new ar(10).pow(a),o=e.div(s),l=a!==1?.05:.1,c=new ar(Math.ceil(o.div(l).toNumber())).add(n).mul(l),f=c.mul(s);return t?new ar(f.toNumber()):new ar(Math.ceil(f.toNumber()))},BY=(e,t,n)=>{var a=new ar(1),s=new ar(e);if(!s.isint()&&n){var o=Math.abs(e);o<1?(a=new ar(10).pow(lT(e)-1),s=new ar(Math.floor(s.div(a).toNumber())).mul(a)):o>1&&(s=new ar(Math.floor(e)))}else e===0?s=new ar(Math.floor((t-1)/2)):n||(s=new ar(Math.floor(e)));var l=Math.floor((t-1)/2),c=zY(LY(f=>s.add(new ar(f-l).mul(a)).toNumber()),Yb);return c(0,t)},fT=function(t,n,a,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new ar(0),tickMin:new ar(0),tickMax:new ar(0)};var l=uT(new ar(n).sub(t).div(a-1),s,o),c;t<=0&&n>=0?c=new ar(0):(c=new ar(t).add(n).div(2),c=c.sub(new ar(c).mod(l)));var f=Math.ceil(c.sub(t).div(l).toNumber()),h=Math.ceil(new ar(n).sub(c).div(l).toNumber()),u=f+h+1;return u>a?fT(t,n,a,s,o+1):(u<a&&(h=n>0?h+(a-u):h,f=n>0?f:f+(a-u)),{step:l,tickMin:c.sub(new ar(f).mul(l)),tickMax:c.add(new ar(h).mul(l))})},UY=function(t){var[n,a]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),[c,f]=dT([n,a]);if(c===-1/0||f===1/0){var h=f===1/0?[c,...Yb(0,s-1).map(()=>1/0)]:[...Yb(0,s-1).map(()=>-1/0),f];return n>a?h.reverse():h}if(c===f)return BY(c,s,o);var{step:u,tickMin:m,tickMax:p}=fT(c,f,l,o,0),v=cT(m,p.add(new ar(.1).mul(u)),u);return n>a?v.reverse():v},VY=function(t,n){var[a,s]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,c]=dT([a,s]);if(l===-1/0||c===1/0)return[a,s];if(l===c)return[l];var f=Math.max(n,2),h=uT(new ar(c).sub(l).div(f-1),o,0),u=[...cT(new ar(l),new ar(c),h),c];return o===!1&&(u=u.map(m=>Math.round(m))),a>s?u.reverse():u},qY=e=>e.rootProps.barCategoryGap,df=e=>e.rootProps.stackOffset,hT=e=>e.rootProps.reverseStackOrder,_w=e=>e.options.chartName,Rw=e=>e.rootProps.syncId,mT=e=>e.rootProps.syncMethod,$w=e=>e.options.eventEmitter,GY=e=>e.rootProps.baseValue,wn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Zs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ga={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Ng=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},HY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zs.angleAxisId,includeHidden:!1,name:void 0,reversed:Zs.reversed,scale:Zs.scale,tick:Zs.tick,tickCount:void 0,ticks:void 0,type:Zs.type,unit:void 0},WY={allowDataOverflow:ga.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ga.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ga.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ga.scale,tick:ga.tick,tickCount:ga.tickCount,ticks:void 0,type:ga.type,unit:void 0},KY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Zs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zs.scale,tick:Zs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},YY={allowDataOverflow:ga.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ga.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ga.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ga.scale,tick:ga.tick,tickCount:ga.tickCount,ticks:void 0,type:"category",unit:void 0},Fw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?KY:HY,Lw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?YY:WY,Sg=e=>e.polarOptions,zw=ke([bo,jo,pn],hM),pT=ke([Sg,zw],(e,t)=>{if(e!=null)return wa(e.innerRadius,t,0)}),gT=ke([Sg,zw],(e,t)=>{if(e!=null)return wa(e.outerRadius,t,t*.8)}),XY=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},xT=ke([Sg],XY);ke([Fw,xT],Ng);var vT=ke([zw,pT,gT],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ke([Lw,vT],Ng);var yT=ke([sr,Sg,pT,gT,bo,jo],(e,t,n,a,s,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:l,cy:c,startAngle:f,endAngle:h}=t;return{cx:wa(l,s,s/2),cy:wa(c,o,o/2),innerRadius:n,outerRadius:a,startAngle:f,endAngle:h,clockWise:!1}}}),jr=(e,t)=>t,uf=(e,t,n)=>n;function Bw(e){return e==null?void 0:e.id}function bT(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:s,dataKey:o}=n,l=new Map;return e.forEach(c=>{var f,h=(f=c.data)!==null&&f!==void 0?f:a;if(!(h==null||h.length===0)){var u=Bw(c);h.forEach((m,p)=>{var v=o==null||s?p:String(mr(m,o,null)),j=mr(m,c.dataKey,0),y;l.has(v)?y=l.get(v):y={},Object.assign(y,{[u]:j}),l.set(v,y)})}}),Array.from(l.values())}function Uw(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Cg=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function kg(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function JY(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var Zr=e=>{var t=sr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Kc=e=>e.tooltip.settings.axisId;function VE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(n),!0).forEach(function(a){QY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QY(e,t,n){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZY(e){var t=eX(e,"string");return typeof t=="symbol"?t:t+""}function eX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xb=[0,"auto"],on={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},jT=(e,t)=>e.cartesianAxis.xAxis[t],So=(e,t)=>{var n=jT(e,t);return n==null?on:n},ln={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Xb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:rf},wT=(e,t)=>e.cartesianAxis.yAxis[t],Co=(e,t)=>{var n=wT(e,t);return n==null?ln:n},tX={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Vw=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n==null?tX:n},Ar=(e,t,n)=>{switch(t){case"xAxis":return So(e,n);case"yAxis":return Co(e,n);case"zAxis":return Vw(e,n);case"angleAxis":return Fw(e,n);case"radiusAxis":return Lw(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},rX=(e,t,n)=>{switch(t){case"xAxis":return So(e,n);case"yAxis":return Co(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ff=(e,t,n)=>{switch(t){case"xAxis":return So(e,n);case"yAxis":return Co(e,n);case"angleAxis":return Fw(e,n);case"radiusAxis":return Lw(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},NT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function qw(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var ST=e=>e.graphicalItems.cartesianItems,nX=ke([jr,uf],qw),Gw=(e,t,n)=>e.filter(n).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),hf=ke([ST,Ar,nX],Gw,{memoizeOptions:{resultEqualityCheck:kg}}),CT=ke([hf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Uw)),kT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),aX=ke([hf],kT),Hw=e=>e.map(t=>t.data).filter(Boolean).flat(1),sX=ke([hf],Hw,{memoizeOptions:{resultEqualityCheck:kg}}),Ww=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:n.slice(a,s+1)},Kw=ke([sX,QM],Ww),Yw=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:mr(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:mr(s,a)}))):e.map(a=>({value:a})),Pg=ke([Kw,Ar,hf],Yw);function PT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function lm(e){if(Ds(e)||e instanceof Date){var t=Number(e);if(yr(t))return t}}function qE(e){if(Array.isArray(e)){var t=[lm(e[0]),lm(e[1])];return mi(t)?t:void 0}var n=lm(e);if(n!=null)return[n,n]}function po(e){return e.map(lm).filter(NV)}function oX(e,t,n){return!n||typeof t!="number"||us(t)?[]:n.length?po(n.flatMap(a=>{var s=mr(e,a.dataKey),o,l;if(Array.isArray(s)?[o,l]=s:o=l=s,!(!yr(o)||!yr(l)))return[t-o,t+l]})):[]}var en=e=>{var t=Zr(e),n=Kc(e);return ff(e,t,n)},mf=ke([en],e=>e==null?void 0:e.dataKey),iX=ke([CT,QM,en],bT),ET=(e,t,n,a)=>{var s={},o=t.reduce((l,c)=>{if(c.stackId==null)return l;var f=l[c.stackId];return f==null&&(f=[]),f.push(c),l[c.stackId]=f,l},s);return Object.fromEntries(Object.entries(o).map(l=>{var[c,f]=l,h=a?[...f].reverse():f,u=h.map(Bw);return[c,{stackedData:zq(e,u,n),graphicalItems:h}]}))},AT=ke([iX,CT,df,hT],ET),IT=(e,t,n,a)=>{var{dataStartIndex:s,dataEndIndex:o}=t;if(a==null&&n!=="zAxis"){var l=qq(e,s,o);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},lX=ke([Ar],e=>e.allowDataOverflow),Xw=e=>{var t;if(e==null||!("domain"in e))return Xb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=po(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Xb},Jw=ke([Ar],Xw),Qw=ke([Jw,lX],ZM),cX=ke([AT,No,jr,Qw],IT,{memoizeOptions:{resultEqualityCheck:Cg}}),Eg=e=>e.errorBars,dX=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>PT(n,a)),cp=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n.filter(Boolean);if(s.length!==0){var o=s.flat(),l=Math.min(...o),c=Math.max(...o);return[l,c]}},Zw=(e,t,n,a,s)=>{var o,l;if(n.length>0&&e.forEach(c=>{n.forEach(f=>{var h,u,m=(h=a[f.id])===null||h===void 0?void 0:h.filter(N=>PT(s,N)),p=mr(c,(u=t.dataKey)!==null&&u!==void 0?u:f.dataKey),v=oX(c,p,m);if(v.length>=2){var j=Math.min(...v),y=Math.max(...v);(o==null||j<o)&&(o=j),(l==null||y>l)&&(l=y)}var b=qE(p);b!=null&&(o=o==null?b[0]:Math.min(o,b[0]),l=l==null?b[1]:Math.max(l,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(c=>{var f=qE(mr(c,t.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),l=l==null?f[1]:Math.max(l,f[1]))}),yr(o)&&yr(l))return[o,l]},uX=ke([Kw,Ar,aX,Eg,jr],Zw,{memoizeOptions:{resultEqualityCheck:Cg}});function fX(e){var{value:t}=e;if(Ds(t)||t instanceof Date)return t}var hX=(e,t,n)=>{var a=e.map(fX).filter(s=>s!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&V5(a))?xM(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},DT=e=>e.referenceElements.dots,Yc=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),mX=ke([DT,jr,uf],Yc),OT=e=>e.referenceElements.areas,pX=ke([OT,jr,uf],Yc),MT=e=>e.referenceElements.lines,gX=ke([MT,jr,uf],Yc),TT=(e,t)=>{if(e!=null){var n=po(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},xX=ke(mX,jr,TT),_T=(e,t)=>{if(e!=null){var n=po(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},vX=ke([pX,jr],_T);function yX(e){var t;if(e.x!=null)return po([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:po(n)}function bX(e){var t;if(e.y!=null)return po([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:po(n)}var RT=(e,t)=>{if(e!=null){var n=e.flatMap(a=>t==="xAxis"?yX(a):bX(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},jX=ke([gX,jr],RT),wX=ke(xX,jX,vX,(e,t,n)=>cp(e,n,t)),eN=(e,t,n,a,s,o,l,c)=>{if(n!=null)return n;var f=l==="vertical"&&c==="xAxis"||l==="horizontal"&&c==="yAxis",h=f?cp(a,o,s):cp(o,s);return MY(t,h,e.allowDataOverflow)},NX=ke([Ar,Jw,Qw,cX,uX,wX,sr,jr],eN,{memoizeOptions:{resultEqualityCheck:Cg}}),SX=[0,1],tN=(e,t,n,a,s,o,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:c,type:f}=e,h=yo(t,o);if(h&&c==null){var u;return xM(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return f==="category"?hX(a,e,h):s==="expand"?SX:l}},rN=ke([Ar,sr,Kw,Pg,df,jr,NX],tN),$T=(e,t,n,a,s)=>{if(e!=null){var{scale:o,type:l}=e;if(o==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof o=="string"){var c="scale".concat(Ju(o));return c in iu?c:"point"}}},Xc=ke([Ar,sr,NT,_w,jr],$T);function CX(e){if(e!=null){if(e in iu)return iu[e]();var t="scale".concat(Ju(e));if(t in iu)return iu[t]()}}function nN(e,t,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var s=CX(t);if(s!=null){var o=s.domain(n).range(a);return Rq(o),o}}}var aN=(e,t,n)=>{var a=Xw(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&mi(e))return UY(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&mi(e))return VY(e,t.tickCount,t.allowDecimals)}},sN=ke([rN,ff,Xc],aN),oN=(e,t,n,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&mi(t)&&Array.isArray(n)&&n.length>0){var s=t[0],o=n[0],l=t[1],c=n[n.length-1];return[Math.min(s,o),Math.max(l,c)]}return t},kX=ke([Ar,rN,sN,jr],oN),PX=ke(Pg,Ar,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(po(e.map(m=>m.value))).sort((m,p)=>m-p),s=a[0],o=a[a.length-1];if(s==null||o==null)return 1/0;var l=o-s;if(l===0)return 1/0;for(var c=0;c<a.length-1;c++){var f=a[c],h=a[c+1];if(!(f==null||h==null)){var u=h-f;n=Math.min(n,u)}}return n/l}}),FT=ke(PX,sr,qY,pn,(e,t,n,a,s)=>s,(e,t,n,a,s)=>{if(!yr(e))return 0;var o=t==="vertical"?a.height:a.width;if(s==="gap")return e*o/2;if(s==="no-gap"){var l=wa(n,e*o),c=e*o/2;return c-l-(c-l)/o*l}return 0}),EX=(e,t,n)=>{var a=So(e,t);return a==null||typeof a.padding!="string"?0:FT(e,"xAxis",t,n,a.padding)},AX=(e,t,n)=>{var a=Co(e,t);return a==null||typeof a.padding!="string"?0:FT(e,"yAxis",t,n,a.padding)},IX=ke(So,EX,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((n=s.left)!==null&&n!==void 0?n:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),DX=ke(Co,AX,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((n=s.top)!==null&&n!==void 0?n:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),OX=ke([pn,IX,lg,ig,(e,t,n)=>n],(e,t,n,a,s)=>{var{padding:o}=a;return s?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),MX=ke([pn,sr,DX,lg,ig,(e,t,n)=>n],(e,t,n,a,s,o)=>{var{padding:l}=s;return o?[a.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),pf=(e,t,n,a)=>{var s;switch(t){case"xAxis":return OX(e,n,a);case"yAxis":return MX(e,n,a);case"zAxis":return(s=Vw(e,n))===null||s===void 0?void 0:s.range;case"angleAxis":return xT(e);case"radiusAxis":return vT(e,n);default:return}},LT=ke([Ar,pf],Ng),Ag=ke([Ar,Xc,kX,LT],nN);ke([hf,Eg,jr],dX);function zT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ig=(e,t)=>t,Dg=(e,t,n)=>n,TX=ke(sg,Ig,Dg,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(zT)),_X=ke(og,Ig,Dg,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(zT)),BT=(e,t)=>({width:e.width,height:t.height}),RX=(e,t)=>{var n=typeof t.width=="number"?t.width:rf;return{width:n,height:e.height}},$X=ke(pn,So,BT),FX=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},LX=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},zX=ke(jo,pn,TX,Ig,Dg,(e,t,n,a,s)=>{var o={},l;return n.forEach(c=>{var f=BT(t,c);l==null&&(l=FX(t,a,e));var h=a==="top"&&!s||a==="bottom"&&s;o[c.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),o}),BX=ke(bo,pn,_X,Ig,Dg,(e,t,n,a,s)=>{var o={},l;return n.forEach(c=>{var f=RX(t,c);l==null&&(l=LX(t,a,e));var h=a==="left"&&!s||a==="right"&&s;o[c.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),o}),UX=(e,t)=>{var n=So(e,t);if(n!=null)return zX(e,n.orientation,n.mirror)},VX=ke([pn,So,UX,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var s=n==null?void 0:n[a];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),qX=(e,t)=>{var n=Co(e,t);if(n!=null)return BX(e,n.orientation,n.mirror)},GX=ke([pn,Co,qX,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var s=n==null?void 0:n[a];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),HX=ke(pn,Co,(e,t)=>{var n=typeof t.width=="number"?t.width:rf;return{width:n,height:e.height}}),UT=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:s,type:o,dataKey:l}=n,c=yo(e,a),f=t.map(h=>h.value);if(l&&c&&o==="category"&&s&&V5(f))return f}},iN=ke([sr,Pg,Ar,jr],UT),VT=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:o}=n,l=yo(e,a);if(l&&(s==="number"||o!=="auto"))return t.map(c=>c.value)}},lN=ke([sr,Pg,ff,jr],VT),GE=ke([sr,rX,Xc,Ag,iN,lN,pf,sN,jr],(e,t,n,a,s,o,l,c,f)=>{if(t!=null){var h=yo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:o,duplicateDomain:s,isCategorical:h,niceTicks:c,range:l,realScaleType:n,scale:a}}}),WX=(e,t,n,a,s,o,l,c,f)=>{if(!(t==null||a==null)){var h=yo(e,f),{type:u,ticks:m,tickCount:p}=t,v=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,j=u==="category"&&a.bandwidth?a.bandwidth()/v:0;j=f==="angleAxis"&&o!=null&&o.length>=2?$n(o[0]-o[1])*2*j:j;var y=m||s;if(y){var b=y.map((N,k)=>{var D=l?l.indexOf(N):N;return{index:k,coordinate:a(D)+j,value:N,offset:j}});return b.filter(N=>yr(N.coordinate))}return h&&c?c.map((N,k)=>({coordinate:a(N)+j,value:N,index:k,offset:j})).filter(N=>yr(N.coordinate)):a.ticks?a.ticks(p).map(N=>({coordinate:a(N)+j,value:N,offset:j})):a.domain().map((N,k)=>({coordinate:a(N)+j,value:l?l[N]:N,index:k,offset:j}))}},qT=ke([sr,ff,Xc,Ag,sN,pf,iN,lN,jr],WX),KX=(e,t,n,a,s,o,l)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var c=yo(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&(a==null?void 0:a.length)>=2?$n(a[0]-a[1])*2*h:h,c&&o?o.map((u,m)=>({coordinate:n(u)+h,value:u,index:m,offset:h})):n.ticks?n.ticks(f).map(u=>({coordinate:n(u)+h,value:u,offset:h})):n.domain().map((u,m)=>({coordinate:n(u)+h,value:s?s[u]:u,index:m,offset:h}))}},GT=ke([sr,ff,Ag,pf,iN,lN,jr],KX),HT=ke(Ar,Ag,(e,t)=>{if(!(e==null||t==null))return lp(lp({},e),{},{scale:t})}),YX=ke([Ar,Xc,rN,LT],nN);ke((e,t,n)=>Vw(e,n),YX,(e,t)=>{if(!(e==null||t==null))return lp(lp({},e),{},{scale:t})});var XX=ke([sr,sg,og],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),WT=e=>e.options.defaultTooltipEventType,KT=e=>e.options.validateTooltipEventTypes;function YT(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function cN(e,t){var n=WT(e),a=KT(e);return YT(t,n,a)}function JX(e){return pt(t=>cN(t,e))}var XT=(e,t)=>{var n,a=Number(t);if(!(us(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},QX=e=>e.tooltip.settings,Zo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},ZX={itemInteraction:{click:Zo,hover:Zo},axisInteraction:{click:Zo,hover:Zo},keyboardInteraction:Zo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},JT=oa({name:"tooltip",initialState:ZX,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:xr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,s=ds(e).tooltipItemPayloads.indexOf(n);s>-1&&(e.tooltipItemPayloads[s]=a)},prepare:xr()},removeTooltipEntrySettings:{reducer(e,t){var n=ds(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:xr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:eJ,replaceTooltipEntrySettings:tJ,removeTooltipEntrySettings:rJ,setTooltipSettingsState:nJ,setActiveMouseOverItemIndex:QT,mouseLeaveItem:aJ,mouseLeaveChart:ZT,setActiveClickItemIndex:sJ,setMouseOverAxisIndex:e_,setMouseClickAxisIndex:oJ,setSyncInteraction:Jb,setKeyboardInteraction:Qb}=JT.actions,iJ=JT.reducer;function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(a){lJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lJ(e,t,n){return(t=cJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJ(e){var t=dJ(e,"string");return typeof t=="symbol"?t:t+""}function dJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uJ(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function fJ(e){return e.index!=null}var t_=(e,t,n,a)=>{if(t==null)return Zo;var s=uJ(e,t,n);if(s==null)return Zo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(fJ(s)){if(o)return Xh(Xh({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Xh(Xh({},Zo),{},{coordinate:s.coordinate})};function hJ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function mJ(e,t){var n=hJ(e),a=t[0],s=t[1];if(n===void 0)return!1;var o=Math.min(a,s),l=Math.max(a,s);return n>=o&&n<=l}function pJ(e,t,n){if(n==null||t==null)return!0;var a=mr(e,t);return a==null||!mi(n)?!0:mJ(a,n)}var dN=(e,t,n,a)=>{var s=e==null?void 0:e.index;if(s==null)return null;var o=Number(s);if(!yr(o))return s;var l=0,c=1/0;t.length>0&&(c=t.length-1);var f=Math.max(l,Math.min(o,c)),h=t[f];return h==null||pJ(h,n,a)?String(f):null},r_=(e,t,n,a,s,o,l,c)=>{if(!(o==null||c==null)){var f=l[0],h=f==null?void 0:c(f.positions,o);if(h!=null)return h;var u=s==null?void 0:s[Number(o)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},n_=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(n==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(l=>{var c;return((c=l.settings)===null||c===void 0?void 0:c.graphicalItemId)===s})},gf=e=>e.options.tooltipPayloadSearcher,Jc=e=>e.tooltip;function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function KE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(a){gJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gJ(e,t,n){return(t=xJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xJ(e){var t=vJ(e,"string");return typeof t=="symbol"?t:t+""}function vJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yJ(e,t){return e!=null?e:t}var a_=(e,t,n,a,s,o,l)=>{if(!(t==null||o==null)){var{chartData:c,computedData:f,dataStartIndex:h,dataEndIndex:u}=n,m=[];return e.reduce((p,v)=>{var j,{dataDefinedOnItem:y,settings:b}=v,N=yJ(y,c),k=Array.isArray(N)?$4(N,h,u):N,D=(j=b==null?void 0:b.dataKey)!==null&&j!==void 0?j:a,E=b==null?void 0:b.nameKey,P;if(a&&Array.isArray(k)&&!Array.isArray(k[0])&&l==="axis"?P=q5(k,a,s):P=o(k,t,f,E),Array.isArray(P))P.forEach(O=>{var A=KE(KE({},b),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(Zk({tooltipEntrySettings:A,dataKey:O.dataKey,payload:O.payload,value:mr(O.payload,O.dataKey),name:O.name}))});else{var C;p.push(Zk({tooltipEntrySettings:b,dataKey:D,payload:P,value:mr(P,D),name:(C=mr(P,E))!==null&&C!==void 0?C:b==null?void 0:b.name}))}return p},m)}},uN=ke([en,sr,NT,_w,Zr],$T),bJ=ke([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),jJ=ke([Zr,Kc],qw),Qc=ke([bJ,en,jJ],Gw,{memoizeOptions:{resultEqualityCheck:kg}}),wJ=ke([Qc],e=>e.filter(Uw)),NJ=ke([Qc],Hw,{memoizeOptions:{resultEqualityCheck:kg}}),Zc=ke([NJ,No],Ww),SJ=ke([wJ,No,en],bT),fN=ke([Zc,en,Qc],Yw),s_=ke([en],Xw),CJ=ke([en],e=>e.allowDataOverflow),o_=ke([s_,CJ],ZM),kJ=ke([Qc],e=>e.filter(Uw)),PJ=ke([SJ,kJ,df,hT],ET),EJ=ke([PJ,No,Zr,o_],IT),AJ=ke([Qc],kT),IJ=ke([Zc,en,AJ,Eg,Zr],Zw,{memoizeOptions:{resultEqualityCheck:Cg}}),DJ=ke([DT,Zr,Kc],Yc),OJ=ke([DJ,Zr],TT),MJ=ke([OT,Zr,Kc],Yc),TJ=ke([MJ,Zr],_T),_J=ke([MT,Zr,Kc],Yc),RJ=ke([_J,Zr],RT),$J=ke([OJ,RJ,TJ],cp),FJ=ke([en,s_,o_,EJ,IJ,$J,sr,Zr],eN),xf=ke([en,sr,Zc,fN,df,Zr,FJ],tN),LJ=ke([xf,en,uN],aN),zJ=ke([en,xf,LJ,Zr],oN),i_=e=>{var t=Zr(e),n=Kc(e),a=!1;return pf(e,t,n,a)},l_=ke([en,i_],Ng),c_=ke([en,uN,zJ,l_],nN),BJ=ke([sr,fN,en,Zr],UT),UJ=ke([sr,fN,en,Zr],VT),VJ=(e,t,n,a,s,o,l,c)=>{if(t){var{type:f}=t,h=yo(e,c);if(a){var u=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,m=f==="category"&&a.bandwidth?a.bandwidth()/u:0;return m=c==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?$n(s[0]-s[1])*2*m:m,h&&l?l.map((p,v)=>({coordinate:a(p)+m,value:p,index:v,offset:m})):a.domain().map((p,v)=>({coordinate:a(p)+m,value:o?o[p]:p,index:v,offset:m}))}}},ko=ke([sr,en,uN,c_,i_,BJ,UJ,Zr],VJ),hN=ke([WT,KT,QX],(e,t,n)=>YT(n.shared,e,t)),d_=e=>e.tooltip.settings.trigger,mN=e=>e.tooltip.settings.defaultIndex,vf=ke([Jc,hN,d_,mN],t_),Oc=ke([vf,Zc,mf,xf],dN),u_=ke([ko,Oc],XT),f_=ke([vf],e=>{if(e)return e.dataKey}),qJ=ke([vf],e=>{if(e)return e.graphicalItemId}),h_=ke([Jc,hN,d_,mN],n_),GJ=ke([bo,jo,sr,pn,ko,mN,h_,gf],r_),HJ=ke([vf,GJ],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),WJ=ke([vf],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),KJ=ke([h_,Oc,No,mf,u_,gf,hN],a_),YJ=ke([KJ],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function XE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(n),!0).forEach(function(a){XJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XJ(e,t,n){return(t=JJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JJ(e){var t=QJ(e,"string");return typeof t=="symbol"?t:t+""}function QJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZJ=()=>pt(en),eQ=()=>{var e=ZJ(),t=pt(ko),n=pt(c_);return Um(!e||!n?void 0:XE(XE({},e),{},{scale:n}),t)};function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function cc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(a){tQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tQ(e,t,n){return(t=rQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rQ(e){var t=nQ(e,"string");return typeof t=="symbol"?t:t+""}function nQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aQ=(e,t,n,a)=>{var s=t.find(o=>o&&o.index===n);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:s.coordinate}}return{x:0,y:0}},sQ=(e,t,n,a)=>{var s=t.find(h=>h&&h.index===n);if(s){if(e==="centric"){var o=s.coordinate,{radius:l}=a;return cc(cc(cc({},a),Ur(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,{angle:f}=a;return cc(cc(cc({},a),Ur(a.cx,a.cy,c,f)),{},{angle:f,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function oQ(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var m_=(e,t,n,a,s)=>{var o,l=(o=t==null?void 0:t.length)!==null&&o!==void 0?o:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var f,h,u,m,p,v=c>0?(f=n[c-1])===null||f===void 0?void 0:f.coordinate:(h=n[l-1])===null||h===void 0?void 0:h.coordinate,j=(u=n[c])===null||u===void 0?void 0:u.coordinate,y=c>=l-1?(m=n[0])===null||m===void 0?void 0:m.coordinate:(p=n[c+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(v==null||j==null||y==null))if($n(j-v)!==$n(y-j)){var N=[];if($n(y-j)===$n(s[1]-s[0])){b=y;var k=j+s[1]-s[0];N[0]=Math.min(k,(k+v)/2),N[1]=Math.max(k,(k+v)/2)}else{b=v;var D=y+s[1]-s[0];N[0]=Math.min(j,(D+j)/2),N[1]=Math.max(j,(D+j)/2)}var E=[Math.min(j,(b+j)/2),Math.max(j,(b+j)/2)];if(e>E[0]&&e<=E[1]||e>=N[0]&&e<=N[1]){var P;return(P=n[c])===null||P===void 0?void 0:P.index}}else{var C=Math.min(v,y),O=Math.max(v,y);if(e>(C+j)/2&&e<=(O+j)/2){var A;return(A=n[c])===null||A===void 0?void 0:A.index}}}else if(t)for(var _=0;_<l;_++){var z=t[_];if(z!=null){var G=t[_+1],T=t[_-1];if(_===0&&G!=null&&e<=(z.coordinate+G.coordinate)/2||_===l-1&&T!=null&&e>(z.coordinate+T.coordinate)/2||_>0&&_<l-1&&T!=null&&G!=null&&e>(z.coordinate+T.coordinate)/2&&e<=(z.coordinate+G.coordinate)/2)return z.index}}return-1},p_=()=>pt(_w),pN=(e,t)=>t,g_=(e,t,n)=>n,gN=(e,t,n,a)=>a,iQ=ke(ko,e=>Yp(e,t=>t.coordinate)),xN=ke([Jc,pN,g_,gN],t_),vN=ke([xN,Zc,mf,xf],dN),lQ=(e,t,n)=>{if(t!=null){var a=Jc(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},x_=ke([Jc,pN,g_,gN],n_),dp=ke([bo,jo,sr,pn,ko,gN,x_,gf],r_),cQ=ke([xN,dp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),v_=ke([ko,vN],XT),dQ=ke([x_,vN,No,mf,v_,gf,pN],a_),uQ=ke([xN,vN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),fQ=(e,t,n,a,s,o,l)=>{if(!(!e||!n||!a||!s)&&oQ(e,l)){var c=Gq(e,t),f=m_(c,o,s,n,a),h=aQ(t,s,f,e);return{activeIndex:String(f),activeCoordinate:h}}},hQ=(e,t,n,a,s,o,l)=>{if(!(!e||!a||!s||!o||!n)){var c=KH(e,n);if(c){var f=Hq(c,t),h=m_(f,l,o,a,s),u=sQ(t,o,h,c);return{activeIndex:String(h),activeCoordinate:u}}}},mQ=(e,t,n,a,s,o,l,c)=>{if(!(!e||!t||!a||!s||!o))return t==="horizontal"||t==="vertical"?fQ(e,t,a,s,o,l,c):hQ(e,t,n,a,s,o,l)},pQ=ke(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElement:a.element}}),gQ=ke(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(wn)),n=Array.from(new Set(t));return n.sort((a,s)=>a-s)},{memoizeOptions:{resultEqualityCheck:JY}});function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(a){xQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xQ(e,t,n){return(t=vQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vQ(e){var t=yQ(e,"string");return typeof t=="symbol"?t:t+""}function yQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bQ={},jQ={zIndexMap:Object.values(wn).reduce((e,t)=>ZE(ZE({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),bQ)},wQ=new Set(Object.values(wn));function NQ(e){return wQ.has(e)}var y_=oa({name:"zIndex",initialState:jQ,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:xr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!NQ(n)&&delete e.zIndexMap[n])},prepare:xr()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:s}=t.payload;e.zIndexMap[n]?s?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:s?void 0:a,panoramaElement:s?a:void 0}},prepare:xr()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:xr()}}}),{registerZIndexPortal:SQ,unregisterZIndexPortal:CQ,registerZIndexPortalElement:kQ,unregisterZIndexPortalElement:PQ}=y_.actions,EQ=y_.reducer;function ps(e){var{zIndex:t,children:n}=e,a=NG(),s=a&&t!==void 0&&t!==0,o=ia(),l=br();x.useLayoutEffect(()=>s?(l(SQ({zIndex:t})),()=>{l(CQ({zIndex:t}))}):Qu,[l,t,s]);var c=pt(f=>pQ(f,t,o));return s?c?oo.createPortal(n,c):null:n}function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zb.apply(null,arguments)}function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Jh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(n),!0).forEach(function(a){AQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AQ(e,t,n){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IQ(e){var t=DQ(e,"string");return typeof t=="symbol"?t:t+""}function DQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OQ(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return x.isValidElement(t)?x.cloneElement(t,a):x.createElement(n,a)}function MQ(e){var t,{coordinate:n,payload:a,index:s,offset:o,tooltipAxisBandSize:l,layout:c,cursor:f,tooltipEventType:h,chartName:u}=e,m=n,p=a,v=s;if(!f||!m||u!=="ScatterChart"&&h!=="axis")return null;var j,y,b;if(u==="ScatterChart")j=m,y=lH,b=wn.cursorLine;else if(u==="BarChart")j=cH(c,m,o,l),y=fM,b=wn.cursorRectangle;else if(c==="radial"&&W5(m)){var{cx:N,cy:k,radius:D,startAngle:E,endAngle:P}=mM(m);j={cx:N,cy:k,startAngle:E,endAngle:P,innerRadius:D,outerRadius:D},y=gM,b=wn.cursorLine}else j={points:QH(c,m,o)},y=jc,b=wn.cursorLine;var C=typeof f=="object"&&"className"in f?f.className:void 0,O=Jh(Jh(Jh(Jh({stroke:"#ccc",pointerEvents:"none"},o),j),kc(f)),{},{payload:p,payloadIndex:v,className:Zt("recharts-tooltip-cursor",C)});return x.createElement(ps,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},x.createElement(OQ,{cursor:f,cursorComp:y,cursorProps:O}))}function TQ(e){var t=eQ(),n=K4(),a=qc(),s=p_();return t==null||n==null||a==null||s==null?null:x.createElement(MQ,Zb({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:s}))}var b_=x.createContext(null),_Q=()=>x.useContext(b_),uy={exports:{}},tA;function RQ(){return tA||(tA=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(f,h,u){this.fn=f,this.context=h,this.once=u||!1}function o(f,h,u,m,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var v=new s(u,m||f,p),j=n?n+h:h;return f._events[j]?f._events[j].fn?f._events[j]=[f._events[j],v]:f._events[j].push(v):(f._events[j]=v,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new a:delete f._events[h]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],u,m;if(this._eventsCount===0)return h;for(m in u=this._events)t.call(u,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(u)):h},c.prototype.listeners=function(h){var u=n?n+h:h,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,v=m.length,j=new Array(v);p<v;p++)j[p]=m[p].fn;return j},c.prototype.listenerCount=function(h){var u=n?n+h:h,m=this._events[u];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,u,m,p,v,j){var y=n?n+h:h;if(!this._events[y])return!1;var b=this._events[y],N=arguments.length,k,D;if(b.fn){switch(b.once&&this.removeListener(h,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,m),!0;case 4:return b.fn.call(b.context,u,m,p),!0;case 5:return b.fn.call(b.context,u,m,p,v),!0;case 6:return b.fn.call(b.context,u,m,p,v,j),!0}for(D=1,k=new Array(N-1);D<N;D++)k[D-1]=arguments[D];b.fn.apply(b.context,k)}else{var E=b.length,P;for(D=0;D<E;D++)switch(b[D].once&&this.removeListener(h,b[D].fn,void 0,!0),N){case 1:b[D].fn.call(b[D].context);break;case 2:b[D].fn.call(b[D].context,u);break;case 3:b[D].fn.call(b[D].context,u,m);break;case 4:b[D].fn.call(b[D].context,u,m,p);break;default:if(!k)for(P=1,k=new Array(N-1);P<N;P++)k[P-1]=arguments[P];b[D].fn.apply(b[D].context,k)}}return!0},c.prototype.on=function(h,u,m){return o(this,h,u,m,!1)},c.prototype.once=function(h,u,m){return o(this,h,u,m,!0)},c.prototype.removeListener=function(h,u,m,p){var v=n?n+h:h;if(!this._events[v])return this;if(!u)return l(this,v),this;var j=this._events[v];if(j.fn)j.fn===u&&(!p||j.once)&&(!m||j.context===m)&&l(this,v);else{for(var y=0,b=[],N=j.length;y<N;y++)(j[y].fn!==u||p&&!j[y].once||m&&j[y].context!==m)&&b.push(j[y]);b.length?this._events[v]=b.length===1?b[0]:b:l(this,v)}return this},c.prototype.removeAllListeners=function(h){var u;return h?(u=n?n+h:h,this._events[u]&&l(this,u)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(uy)),uy.exports}var $Q=RQ();const FQ=Ts($Q);var Mu=new FQ,ej="recharts.syncEvent.tooltip",rA="recharts.syncEvent.brush";function j_(e,t){if(t){var n=Number.parseInt(t,10);if(!us(n))return e==null?void 0:e[n]}}var LQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},w_=oa({name:"options",initialState:LQ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),zQ=w_.reducer,{createEventEmitter:BQ}=w_.actions;function UQ(e){return e.tooltip.syncInteraction}var VQ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},N_=oa({name:"chartData",initialState:VQ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:nA,setDataStartEndIndexes:qQ,setComputedData:Rde}=N_.actions,GQ=N_.reducer,HQ=["x","y"];function aA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(n),!0).forEach(function(a){WQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WQ(e,t,n){return(t=KQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KQ(e){var t=YQ(e,"string");return typeof t=="symbol"?t:t+""}function YQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XQ(e,t){if(e==null)return{};var n,a,s=JQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function JQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function QQ(){var e=pt(Rw),t=pt($w),n=br(),a=pt(mT),s=pt(ko),o=qc(),l=cg(),c=pt(f=>f.rootProps.className);x.useEffect(()=>{if(e==null)return Qu;var f=(h,u,m)=>{if(t!==m&&e===h){if(a==="index"){var p;if(l&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var v=u.payload.coordinate,{x:j,y}=v,b=XQ(v,HQ),{x:N,y:k,width:D,height:E}=u.payload.sourceViewBox,P=dc(dc({},b),{},{x:l.x+(D?(j-N)/D:0)*l.width,y:l.y+(E?(y-k)/E:0)*l.height});n(dc(dc({},u),{},{payload:dc(dc({},u.payload),{},{coordinate:P})}))}else n(u);return}if(s!=null){var C;if(typeof a=="function"){var O={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},A=a(s,O);C=s[A]}else a==="value"&&(C=s.find(B=>String(B.value)===u.payload.label));var{coordinate:_}=u.payload;if(C==null||u.payload.active===!1||_==null||l==null){n(Jb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:G}=_,T=Math.min(z,l.x+l.width),M=Math.min(G,l.y+l.height),W={x:o==="horizontal"?C.coordinate:T,y:o==="horizontal"?M:C.coordinate},Z=Jb({active:u.payload.active,coordinate:W,dataKey:u.payload.dataKey,index:String(C.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(Z)}}};return Mu.on(ej,f),()=>{Mu.off(ej,f)}},[c,n,t,e,a,s,o,l])}function ZQ(){var e=pt(Rw),t=pt($w),n=br();x.useEffect(()=>{if(e==null)return Qu;var a=(s,o,l)=>{t!==l&&e===s&&n(qQ(o))};return Mu.on(rA,a),()=>{Mu.off(rA,a)}},[n,t,e])}function eZ(){var e=br();x.useEffect(()=>{e(BQ())},[e]),QQ(),ZQ()}function tZ(e,t,n,a,s,o){var l=pt(v=>lQ(v,e,t)),c=pt($w),f=pt(Rw),h=pt(mT),u=pt(UQ),m=u==null?void 0:u.active,p=cg();x.useEffect(()=>{if(!m&&f!=null&&c!=null){var v=Jb({active:o,coordinate:n,dataKey:l,index:s,label:typeof a=="number"?String(a):a,sourceViewBox:p,graphicalItemId:void 0});Mu.emit(ej,f,v,c)}},[m,n,l,s,a,c,f,h,o,p])}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function oA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(a){rZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rZ(e,t,n){return(t=nZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nZ(e){var t=aZ(e,"string");return typeof t=="symbol"?t:t+""}function aZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sZ(e){return e.dataKey}function oZ(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(BG,t)}var iA=[],iZ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lA(e){var t,n,a=Cn(e,iZ),{active:s,allowEscapeViewBox:o,animationDuration:l,animationEasing:c,content:f,filterNull:h,isAnimationActive:u,offset:m,payloadUniqBy:p,position:v,reverseDirection:j,useTranslate3d:y,wrapperStyle:b,cursor:N,shared:k,trigger:D,defaultIndex:E,portal:P,axisId:C}=a,O=br(),A=typeof E=="number"?String(E):E;x.useEffect(()=>{O(nJ({shared:k,trigger:D,axisId:C,active:s,defaultIndex:A}))},[O,k,D,C,s,A]);var _=cg(),z=iM(),G=JX(k),{activeIndex:T,isActive:M}=(t=pt(Pe=>uQ(Pe,G,D,A)))!==null&&t!==void 0?t:{},W=pt(Pe=>dQ(Pe,G,D,A)),Z=pt(Pe=>v_(Pe,G,D,A)),B=pt(Pe=>cQ(Pe,G,D,A)),U=W,$=_Q(),K=(n=s!=null?s:M)!==null&&n!==void 0?n:!1,[V,F]=O9([U,K]),L=G==="axis"?Z:void 0;tZ(G,D,B,L,T,K);var X=P!=null?P:$;if(X==null||_==null||G==null)return null;var Y=U!=null?U:iA;K||(Y=iA),h&&Y.length&&(Y=a9(Y.filter(Pe=>Pe.value!=null&&(Pe.hide!==!0||a.includeHidden)),p,sZ));var me=Y.length>0,xe=x.createElement(KG,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:u,active:K,coordinate:B,hasPayload:me,offset:m,position:v,reverseDirection:j,useTranslate3d:y,viewBox:_,wrapperStyle:b,lastBoundingBox:V,innerRef:F,hasPortalFromProps:!!P},oZ(f,oA(oA({},a),{},{payload:Y,label:L,active:K,activeIndex:T,coordinate:B,accessibilityLayer:z})));return x.createElement(x.Fragment,null,oo.createPortal(xe,X),K&&x.createElement(TQ,{cursor:N,tooltipEventType:G,coordinate:B,payload:Y,index:T}))}var Og=e=>null;Og.displayName="Cell";function lZ(e,t,n){return(t=cZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cZ(e){var t=dZ(e,"string");return typeof t=="symbol"?t:t+""}function dZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uZ{constructor(t){lZ(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function fZ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(n),!0).forEach(function(a){hZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hZ(e,t,n){return(t=mZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mZ(e){var t=pZ(e,"string");return typeof t=="symbol"?t:t+""}function pZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gZ={cacheSize:2e3,enableCache:!0},S_=fZ({},gZ),dA=new uZ(S_.cacheSize),xZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uA="recharts_measurement_span";function vZ(e,t){var n=t.fontSize||"",a=t.fontFamily||"",s=t.fontWeight||"",o=t.fontStyle||"",l=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l,"|").concat(c)}var fA=(e,t)=>{try{var n=document.getElementById(uA);n||(n=document.createElement("span"),n.setAttribute("id",uA),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,xZ,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch(s){return{width:0,height:0}}},uu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||af.isSsr)return{width:0,height:0};if(!S_.enableCache)return fA(t,n);var a=vZ(t,n),s=dA.get(a);if(s)return s;var o=fA(t,n);return dA.set(a,o),o},C_;function yZ(e,t,n){return(t=bZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bZ(e){var t=jZ(e,"string");return typeof t=="symbol"?t:t+""}function jZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,SZ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},CZ=["cm","mm","pt","pc","in","Q","px"];function kZ(e){return CZ.includes(e)}var pc="NaN";function PZ(e,t){return e*SZ[t]}class yn{static parse(t){var n,[,a,s]=(n=NZ.exec(t))!==null&&n!==void 0?n:[];return a==null?yn.NaN:new yn(parseFloat(a),s!=null?s:"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,us(t)&&(this.unit=""),n!==""&&!wZ.test(n)&&(this.num=NaN,this.unit=""),kZ(n)&&(this.num=PZ(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new yn(NaN,""):new yn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new yn(NaN,""):new yn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new yn(NaN,""):new yn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new yn(NaN,""):new yn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return us(this.num)}}C_=yn;yZ(yn,"NaN",new C_(NaN,""));function k_(e){if(e==null||e.includes(pc))return pc;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,s,o]=(n=hA.exec(t))!==null&&n!==void 0?n:[],l=yn.parse(a!=null?a:""),c=yn.parse(o!=null?o:""),f=s==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return pc;t=t.replace(hA,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,u,m,p]=(h=mA.exec(t))!==null&&h!==void 0?h:[],v=yn.parse(u!=null?u:""),j=yn.parse(p!=null?p:""),y=m==="+"?v.add(j):v.subtract(j);if(y.isNaN())return pc;t=t.replace(mA,y.toString())}return t}var pA=/\(([^()]*)\)/;function EZ(e){for(var t=e,n;(n=pA.exec(t))!=null;){var[,a]=n;t=t.replace(pA,k_(a))}return t}function AZ(e){var t=e.replace(/\s+/g,"");return t=EZ(t),t=k_(t),t}function IZ(e){try{return AZ(e)}catch(t){return pc}}function fy(e){var t=IZ(e.slice(5,-1));return t===pc?"":t}var DZ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],OZ=["dx","dy","angle","className","breakAll"];function tj(){return tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tj.apply(null,arguments)}function gA(e,t){if(e==null)return{};var n,a,s=MZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function MZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var P_=/[ \f\n\r\t\v\u2028\u2029]+/,E_=e=>{var{children:t,breakAll:n,style:a}=e;try{var s=[];fn(t)||(n?s=t.toString().split(""):s=t.toString().split(P_));var o=s.map(c=>({word:c,width:uu(c,a).width})),l=n?0:uu("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch(c){return null}};function TZ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var A_=(e,t,n,a)=>e.reduce((s,o)=>{var{word:l,width:c}=o,f=s[s.length-1];if(f&&c!=null&&(t==null||a||f.width+c+n<Number(t)))f.words.push(l),f.width+=c+n;else{var h={words:[l],width:c};s.push(h)}return s},[]),I_=e=>e.reduce((t,n)=>t.width>n.width?t:n),_Z="",xA=(e,t,n,a,s,o,l,c)=>{var f=e.slice(0,t),h=E_({breakAll:n,style:a,children:f+_Z});if(!h)return[!1,[]];var u=A_(h.wordsWithComputedWidth,o,l,c),m=u.length>s||I_(u).width>Number(o);return[m,u]},RZ=(e,t,n,a,s)=>{var{maxLines:o,children:l,style:c,breakAll:f}=e,h=lt(o),u=String(l),m=A_(t,a,n,s);if(!h||s)return m;var p=m.length>o||I_(m).width>Number(a);if(!p)return m;for(var v=0,j=u.length-1,y=0,b;v<=j&&y<=u.length-1;){var N=Math.floor((v+j)/2),k=N-1,[D,E]=xA(u,k,f,c,o,a,n,s),[P]=xA(u,N,f,c,o,a,n,s);if(!D&&!P&&(v=N+1),D&&P&&(j=N-1),!D&&P){b=E;break}y++}return b||m},vA=e=>{var t=fn(e)?[]:e.toString().split(P_);return[{words:t,width:void 0}]},$Z=e=>{var{width:t,scaleToFit:n,children:a,style:s,breakAll:o,maxLines:l}=e;if((t||n)&&!af.isSsr){var c,f,h=E_({breakAll:o,children:a,style:s});if(h){var{wordsWithComputedWidth:u,spaceWidth:m}=h;c=u,f=m}else return vA(a);return RZ({breakAll:o,children:a,maxLines:l,style:s},c,f,t,!!n)}return vA(a)},D_="#808080",FZ={angle:0,breakAll:!1,capHeight:"0.71em",fill:D_,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Mg=x.forwardRef((e,t)=>{var n=Cn(e,FZ),{x:a,y:s,lineHeight:o,capHeight:l,fill:c,scaleToFit:f,textAnchor:h,verticalAnchor:u}=n,m=gA(n,DZ),p=x.useMemo(()=>$Z({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),{dx:v,dy:j,angle:y,className:b,breakAll:N}=m,k=gA(m,OZ);if(!Ds(a)||!Ds(s)||p.length===0)return null;var D=Number(a)+(lt(v)?v:0),E=Number(s)+(lt(j)?j:0);if(!yr(D)||!yr(E))return null;var P;switch(u){case"start":P=fy("calc(".concat(l,")"));break;case"middle":P=fy("calc(".concat((p.length-1)/2," * -").concat(o," + (").concat(l," / 2))"));break;default:P=fy("calc(".concat(p.length-1," * -").concat(o,")"));break}var C=[];if(f){var O=p[0].width,{width:A}=m;C.push("scale(".concat(lt(A)&&lt(O)?A/O:1,")"))}return y&&C.push("rotate(".concat(y,", ").concat(D,", ").concat(E,")")),C.length&&(k.transform=C.join(" ")),x.createElement("text",tj({},Hn(k),{ref:t,x:D,y:E,className:Zt("recharts-text",b),textAnchor:h,fill:c.includes("url")?D_:c}),p.map((_,z)=>{var G=_.words.join(N?"":" ");return x.createElement("tspan",{x:D,dy:z===0?P:o,key:"".concat(G,"-").concat(z)},G)}))});Mg.displayName="Text";var LZ=["labelRef"],zZ=["content"];function yA(e,t){if(e==null)return{};var n,a,s=BZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function BZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function bA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(n),!0).forEach(function(a){UZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function UZ(e,t,n){return(t=VZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VZ(e){var t=qZ(e,"string");return typeof t=="symbol"?t:t+""}function qZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eo.apply(null,arguments)}var O_=x.createContext(null),GZ=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:s,width:o,height:l,children:c}=e,f=x.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:s,width:o,height:l}),[t,n,a,s,o,l]);return x.createElement(O_.Provider,{value:f},c)},M_=()=>{var e=x.useContext(O_),t=cg();return e||W4(t)},HZ=x.createContext(null),WZ=()=>{var e=x.useContext(HZ),t=pt(yT);return e||t},KZ=e=>{var{value:t,formatter:n}=e,a=fn(e.children)?t:e.children;return typeof n=="function"?n(a):a},yN=e=>e!=null&&typeof e=="function",YZ=(e,t)=>{var n=$n(t-e),a=Math.min(Math.abs(t-e),360);return n*a},XZ=(e,t,n,a,s)=>{var{offset:o,className:l}=e,{cx:c,cy:f,innerRadius:h,outerRadius:u,startAngle:m,endAngle:p,clockWise:v}=s,j=(h+u)/2,y=YZ(m,p),b=y>=0?1:-1,N,k;switch(t){case"insideStart":N=m+b*o,k=v;break;case"insideEnd":N=p-b*o,k=!v;break;case"end":N=p+b*o,k=v;break;default:throw new Error("Unsupported position ".concat(t))}k=y<=0?k:!k;var D=Ur(c,f,j,N),E=Ur(c,f,j,N+(k?1:-1)*359),P="M".concat(D.x,",").concat(D.y,"\n    A").concat(j,",").concat(j,",0,1,").concat(k?0:1,",\n    ").concat(E.x,",").concat(E.y),C=fn(e.id)?yu("recharts-radial-line-"):e.id;return x.createElement("text",eo({},a,{dominantBaseline:"central",className:Zt("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:C,d:P})),x.createElement("textPath",{xlinkHref:"#".concat(C)},n))},JZ=(e,t,n)=>{var{cx:a,cy:s,innerRadius:o,outerRadius:l,startAngle:c,endAngle:f}=e,h=(c+f)/2;if(n==="outside"){var{x:u,y:m}=Ur(a,s,l+t,h);return{x:u,y:m,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x:v,y:j}=Ur(a,s,p,h);return{x:v,y:j,textAnchor:"middle",verticalAnchor:"middle"}},rj=e=>"cx"in e&&lt(e.cx),QZ=(e,t)=>{var{parentViewBox:n,offset:a,position:s}=e,o;n!=null&&!rj(n)&&(o=n);var{x:l,y:c,upperWidth:f,lowerWidth:h,height:u}=t,m=l,p=l+(f-h)/2,v=(m+p)/2,j=(f+h)/2,y=m+f/2,b=u>=0?1:-1,N=b*a,k=b>0?"end":"start",D=b>0?"start":"end",E=f>=0?1:-1,P=E*a,C=E>0?"end":"start",O=E>0?"start":"end";if(s==="top"){var A={x:m+f/2,y:c-N,textAnchor:"middle",verticalAnchor:k};return _r(_r({},A),o?{height:Math.max(c-o.y,0),width:f}:{})}if(s==="bottom"){var _={x:p+h/2,y:c+u+N,textAnchor:"middle",verticalAnchor:D};return _r(_r({},_),o?{height:Math.max(o.y+o.height-(c+u),0),width:h}:{})}if(s==="left"){var z={x:v-P,y:c+u/2,textAnchor:C,verticalAnchor:"middle"};return _r(_r({},z),o?{width:Math.max(z.x-o.x,0),height:u}:{})}if(s==="right"){var G={x:v+j+P,y:c+u/2,textAnchor:O,verticalAnchor:"middle"};return _r(_r({},G),o?{width:Math.max(o.x+o.width-G.x,0),height:u}:{})}var T=o?{width:j,height:u}:{};return s==="insideLeft"?_r({x:v+P,y:c+u/2,textAnchor:O,verticalAnchor:"middle"},T):s==="insideRight"?_r({x:v+j-P,y:c+u/2,textAnchor:C,verticalAnchor:"middle"},T):s==="insideTop"?_r({x:m+f/2,y:c+N,textAnchor:"middle",verticalAnchor:D},T):s==="insideBottom"?_r({x:p+h/2,y:c+u-N,textAnchor:"middle",verticalAnchor:k},T):s==="insideTopLeft"?_r({x:m+P,y:c+N,textAnchor:O,verticalAnchor:D},T):s==="insideTopRight"?_r({x:m+f-P,y:c+N,textAnchor:C,verticalAnchor:D},T):s==="insideBottomLeft"?_r({x:p+P,y:c+u-N,textAnchor:O,verticalAnchor:k},T):s==="insideBottomRight"?_r({x:p+h-P,y:c+u-N,textAnchor:C,verticalAnchor:k},T):s&&typeof s=="object"&&(lt(s.x)||co(s.x))&&(lt(s.y)||co(s.y))?_r({x:l+wa(s.x,j),y:c+wa(s.y,u),textAnchor:"end",verticalAnchor:"end"},T):_r({x:y,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},ZZ={angle:0,offset:5,zIndex:wn.label,position:"middle",textBreakAll:!1};function Xo(e){var t=Cn(e,ZZ),{viewBox:n,position:a,value:s,children:o,content:l,className:c="",textBreakAll:f,labelRef:h}=t,u=WZ(),m=M_(),p=a==="center"?m:u!=null?u:m,v,j,y;if(n==null?v=p:rj(n)?v=n:v=W4(n),!v||fn(s)&&fn(o)&&!x.isValidElement(l)&&typeof l!="function")return null;var b=_r(_r({},t),{},{viewBox:v});if(x.isValidElement(l)){var{labelRef:N}=b,k=yA(b,LZ);return x.cloneElement(l,k)}if(typeof l=="function"){var{content:D}=b,E=yA(b,zZ);if(j=x.createElement(l,E),x.isValidElement(j))return j}else j=KZ(t);var P=Hn(t);if(rj(v)){if(a==="insideStart"||a==="insideEnd"||a==="end")return XZ(t,a,j,P,v);y=JZ(v,t.offset,t.position)}else y=QZ(t,v);return x.createElement(ps,{zIndex:t.zIndex},x.createElement(Mg,eo({ref:h,className:Zt("recharts-label",c)},P,y,{textAnchor:TZ(P.textAnchor)?P.textAnchor:y.textAnchor,breakAll:f}),j))}Xo.displayName="Label";var eee=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?x.createElement(Xo,eo({key:"label-implicit"},a)):Ds(e)?x.createElement(Xo,eo({key:"label-implicit",value:e},a)):x.isValidElement(e)?e.type===Xo?x.cloneElement(e,_r({key:"label-implicit"},a)):x.createElement(Xo,eo({key:"label-implicit",content:e},a)):yN(e)?x.createElement(Xo,eo({key:"label-implicit",content:e},a)):e&&typeof e=="object"?x.createElement(Xo,eo({},e,{key:"label-implicit"},a)):null};function tee(e){var{label:t,labelRef:n}=e,a=M_();return eee(t,a,n)||null}var hy={},my={},jA;function ree(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(my)),my}var py={},wA;function nee(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(py)),py}var NA;function aee(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ree(),n=nee(),a=Xj();function s(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=s})(hy)),hy}var gy,SA;function see(){return SA||(SA=1,gy=aee().last),gy}var oee=see();const iee=Ts(oee);var lee=["valueAccessor"],cee=["dataKey","clockWise","id","textBreakAll","zIndex"];function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},up.apply(null,arguments)}function CA(e,t){if(e==null)return{};var n,a,s=dee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function dee(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var uee=e=>Array.isArray(e.value)?iee(e.value):e.value,T_=x.createContext(void 0),fee=T_.Provider,__=x.createContext(void 0),hee=__.Provider;function mee(){return x.useContext(T_)}function pee(){return x.useContext(__)}function cm(e){var{valueAccessor:t=uee}=e,n=CA(e,lee),{dataKey:a,clockWise:s,id:o,textBreakAll:l,zIndex:c}=n,f=CA(n,cee),h=mee(),u=pee(),m=h||u;return!m||!m.length?null:x.createElement(ps,{zIndex:c!=null?c:wn.label},x.createElement(Sn,{className:"recharts-label-list"},m.map((p,v)=>{var j,y=fn(a)?t(p,v):mr(p&&p.payload,a),b=fn(o)?{}:{id:"".concat(o,"-").concat(v)};return x.createElement(Xo,up({key:"label-".concat(v)},Hn(p),f,b,{fill:(j=n.fill)!==null&&j!==void 0?j:p.fill,parentViewBox:p.parentViewBox,value:y,textBreakAll:l,viewBox:p.viewBox,index:v,zIndex:0}))})))}cm.displayName="LabelList";function R_(e){var{label:t}=e;return t?t===!0?x.createElement(cm,{key:"labelList-implicit"}):x.isValidElement(t)||yN(t)?x.createElement(cm,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(cm,up({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function nj(){return nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nj.apply(null,arguments)}var $_=e=>{var{cx:t,cy:n,r:a,className:s}=e,o=Zt("recharts-dot",s);return lt(t)&&lt(n)&&lt(a)?x.createElement("circle",nj({},Pa(e),Yj(e),{className:o,cx:t,cy:n,r:a})):null},F_=e=>e.graphicalItems.polarItems,gee=ke([jr,uf],qw),Tg=ke([F_,Ar,gee],Gw),xee=ke([Tg],Hw),_g=ke([xee,wg],Ww),vee=ke([_g,Ar,Tg],Yw);ke([_g,Ar,Tg],(e,t,n)=>n.length>0?e.flatMap(a=>n.flatMap(s=>{var o,l=mr(a,(o=t.dataKey)!==null&&o!==void 0?o:s.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:mr(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})));var kA=()=>{},yee=ke([_g,Ar,Tg,Eg,jr],Zw),bee=ke([Ar,Jw,Qw,kA,yee,kA,sr,jr],eN),L_=ke([Ar,sr,_g,vee,df,jr,bee],tN),jee=ke([L_,Ar,Xc],aN);ke([Ar,L_,jee,jr],oN);var wee={radiusAxis:{},angleAxis:{}},z_=oa({name:"polarAxis",initialState:wee,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:$de,removeRadiusAxis:Fde,addAngleAxis:Lde,removeAngleAxis:zde}=z_.actions,Nee=z_.reducer;function PA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function EA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(n),!0).forEach(function(a){See(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function See(e,t,n){return(t=Cee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cee(e){var t=kee(e,"string");return typeof t=="symbol"?t:t+""}function kee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pee=(e,t)=>t,bN=ke([F_,Pee],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),Eee=[],jN=(e,t,n)=>(n==null?void 0:n.length)===0?Eee:n,B_=ke([wg,bN,jN],(e,t,n)=>{var{chartData:a}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&n!=null&&(s=n.map(o=>EA(EA({},t.presentationProps),o.props))),s!=null)return s}}),Aee=ke([B_,bN,jN],(e,t,n)=>{if(!(e==null||t==null))return e.map((a,s)=>{var o,l=mr(a,t.nameKey,t.name),c;return n!=null&&(o=n[s])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?c=n[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?c=a.fill:c=t.fill,{value:ag(l,t.dataKey),color:c,payload:a,type:t.legendType}})}),Iee=ke([B_,bN,jN,pn],(e,t,n,a)=>{if(!(t==null||e==null))return Fte({offset:a,pieSettings:t,displayedData:e,cells:n})}),xy={exports:{}},or={};var AA;function Dee(){if(AA)return or;AA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function j(y){if(typeof y=="object"&&y!==null){var b=y.$$typeof;switch(b){case e:switch(y=y.type,y){case n:case s:case a:case f:case h:case p:return y;default:switch(y=y&&y.$$typeof,y){case l:case c:case m:case u:return y;case o:return y;default:return b}}case t:return b}}}return or.ContextConsumer=o,or.ContextProvider=l,or.Element=e,or.ForwardRef=c,or.Fragment=n,or.Lazy=m,or.Memo=u,or.Portal=t,or.Profiler=s,or.StrictMode=a,or.Suspense=f,or.SuspenseList=h,or.isContextConsumer=function(y){return j(y)===o},or.isContextProvider=function(y){return j(y)===l},or.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},or.isForwardRef=function(y){return j(y)===c},or.isFragment=function(y){return j(y)===n},or.isLazy=function(y){return j(y)===m},or.isMemo=function(y){return j(y)===u},or.isPortal=function(y){return j(y)===t},or.isProfiler=function(y){return j(y)===s},or.isStrictMode=function(y){return j(y)===a},or.isSuspense=function(y){return j(y)===f},or.isSuspenseList=function(y){return j(y)===h},or.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===s||y===a||y===f||y===h||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===u||y.$$typeof===l||y.$$typeof===o||y.$$typeof===c||y.$$typeof===v||y.getModuleId!==void 0)},or.typeOf=j,or}var IA;function Oee(){return IA||(IA=1,xy.exports=Dee()),xy.exports}var Mee=Oee(),DA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",OA=null,vy=null,U_=e=>{if(e===OA&&Array.isArray(vy))return vy;var t=[];return x.Children.forEach(e,n=>{fn(n)||(Mee.isFragment(n)?t=t.concat(U_(n.props.children)):t.push(n))}),vy=t,OA=e,t};function V_(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(s=>DA(s)):a=[DA(t)],U_(e).forEach(s=>{var o=hl(s,"type.displayName")||hl(s,"type.name");o&&a.indexOf(o)!==-1&&n.push(s)}),n}var q_=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,yy={},MA;function Tee(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var s;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((s=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&s.writable)?!1:n.toString()==="[object ".concat(o,"]")}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(yy)),yy}var by,TA;function _ee(){return TA||(TA=1,by=Tee().isPlainObject),by}var Ree=_ee();const $ee=Ts(Ree);var _A,RA,$A,FA,LA;function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function BA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(n),!0).forEach(function(a){Fee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fee(e,t,n){return(t=Lee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lee(e){var t=zee(e,"string");return typeof t=="symbol"?t:t+""}function zee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fp.apply(null,arguments)}function ru(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var UA=(e,t,n,a,s)=>{var o=n-a,l;return l=Dr(_A||(_A=ru(["M ",",",""])),e,t),l+=Dr(RA||(RA=ru(["L ",",",""])),e+n,t),l+=Dr($A||($A=ru(["L ",",",""])),e+n-o/2,t+s),l+=Dr(FA||(FA=ru(["L ",",",""])),e+n-o/2-a,t+s),l+=Dr(LA||(LA=ru(["L ",","," Z"])),e,t),l},Bee={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uee=e=>{var t=Cn(e,Bee),{x:n,y:a,upperWidth:s,lowerWidth:o,height:l,className:c}=t,{animationEasing:f,animationDuration:h,animationBegin:u,isUpdateAnimationActive:m}=t,p=x.useRef(null),[v,j]=x.useState(-1),y=x.useRef(s),b=x.useRef(o),N=x.useRef(l),k=x.useRef(n),D=x.useRef(a),E=pg(e,"trapezoid-");if(x.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var W=p.current.getTotalLength();W&&j(W)}catch(Z){}},[]),n!==+n||a!==+a||s!==+s||o!==+o||l!==+l||s===0&&o===0||l===0)return null;var P=Zt("recharts-trapezoid",c);if(!m)return x.createElement("g",null,x.createElement("path",fp({},Hn(t),{className:P,d:UA(n,a,s,o,l)})));var C=y.current,O=b.current,A=N.current,_=k.current,z=D.current,G="0px ".concat(v===-1?1:v,"px"),T="".concat(v,"px 0px"),M=lM(["strokeDasharray"],h,f);return x.createElement(mg,{animationId:E,key:E,canBegin:v>0,duration:h,easing:f,isActive:m,begin:u},W=>{var Z=jn(C,s,W),B=jn(O,o,W),U=jn(A,l,W),$=jn(_,n,W),K=jn(z,a,W);p.current&&(y.current=Z,b.current=B,N.current=U,k.current=$,D.current=K);var V=W>0?{transition:M,strokeDasharray:T}:{strokeDasharray:G};return x.createElement("path",fp({},Hn(t),{className:P,d:UA($,K,Z,B,U),ref:p,style:BA(BA({},V),t.style)}))})},Vee=["option","shapeType","activeClassName"];function qee(e,t){if(e==null)return{};var n,a,s=Gee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Gee(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function VA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function hp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(n),!0).forEach(function(a){Hee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Hee(e,t,n){return(t=Wee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wee(e){var t=Kee(e,"string");return typeof t=="symbol"?t:t+""}function Kee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yee(e,t){return hp(hp({},t),e)}function Xee(e,t){return e==="symbols"}function qA(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return x.createElement(fM,n);case"trapezoid":return x.createElement(Uee,n);case"sector":return x.createElement(gM,n);case"symbols":if(Xee(t))return x.createElement(H5,n);break;case"curve":return x.createElement(jc,n);default:return null}}function Jee(e){return x.isValidElement(e)?e.props:e}function Qee(e){var{option:t,shapeType:n,activeClassName:a="recharts-active-shape"}=e,s=qee(e,Vee),o;if(x.isValidElement(t))o=x.cloneElement(t,hp(hp({},s),Jee(t)));else if(typeof t=="function")o=t(s,s.index);else if($ee(t)&&typeof t!="boolean"){var l=Yee(t,s);o=x.createElement(qA,{shapeType:n,elementProps:l})}else{var c=s;o=x.createElement(qA,{shapeType:n,elementProps:c})}return s.isActive?x.createElement(Sn,{className:a},o):o}var Zee=(e,t,n)=>{var a=br();return(s,o)=>l=>{e==null||e(s,o,l),a(QT({activeIndex:String(o),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}},ete=e=>{var t=br();return(n,a)=>s=>{e==null||e(n,a,s),t(aJ())}},tte=(e,t,n)=>{var a=br();return(s,o)=>l=>{e==null||e(s,o,l),a(sJ({activeIndex:String(o),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}};function G_(e){var{tooltipEntrySettings:t}=e,n=br(),a=ia(),s=x.useRef(null);return x.useLayoutEffect(()=>{a||(s.current===null?n(eJ(t)):s.current!==t&&n(tJ({prev:s.current,next:t})),s.current=t)},[t,n,a]),x.useLayoutEffect(()=>()=>{s.current&&(n(rJ(s.current)),s.current=null)},[n]),null}function rte(e){var{legendPayload:t}=e,n=br(),a=ia(),s=x.useRef(null);return x.useLayoutEffect(()=>{a||(s.current===null?n(aM(t)):s.current!==t&&n(sM({prev:s.current,next:t})),s.current=t)},[n,a,t]),x.useLayoutEffect(()=>()=>{s.current&&(n(oM(s.current)),s.current=null)},[n]),null}function nte(e){var{legendPayload:t}=e,n=br(),a=pt(sr),s=x.useRef(null);return x.useLayoutEffect(()=>{a!=="centric"&&a!=="radial"||(s.current===null?n(aM(t)):s.current!==t&&n(sM({prev:s.current,next:t})),s.current=t)},[n,a,t]),x.useLayoutEffect(()=>()=>{s.current&&(n(oM(s.current)),s.current=null)},[n]),null}var jy,ate=()=>{var[e]=x.useState(()=>yu("uid-"));return e},ste=(jy=ED.useId)!==null&&jy!==void 0?jy:ate;function ote(e,t){var n=ste();return t||(e?"".concat(e,"-").concat(n):n)}var ite=x.createContext(void 0),H_=e=>{var{id:t,type:n,children:a}=e,s=ote("recharts-".concat(n),t);return x.createElement(ite.Provider,{value:s},a(s))},lte={cartesianItems:[],polarItems:[]},W_=oa({name:"graphicalItems",initialState:lte,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:xr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,s=ds(e).cartesianItems.indexOf(n);s>-1&&(e.cartesianItems[s]=a)},prepare:xr()},removeCartesianGraphicalItem:{reducer(e,t){var n=ds(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:xr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:xr()},removePolarGraphicalItem:{reducer(e,t){var n=ds(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:xr()}}}),{addCartesianGraphicalItem:cte,replaceCartesianGraphicalItem:dte,removeCartesianGraphicalItem:ute,addPolarGraphicalItem:fte,removePolarGraphicalItem:hte}=W_.actions,mte=W_.reducer,pte=e=>{var t=br(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?t(cte(e)):n.current!==e&&t(dte({prev:n.current,next:e})),n.current=e},[t,e]),x.useLayoutEffect(()=>()=>{n.current&&(t(ute(n.current)),n.current=null)},[t]),null},gte=x.memo(pte);function xte(e){var t=br();return x.useLayoutEffect(()=>(t(fte(e)),()=>{t(hte(e))}),[t,e]),null}var vte=["key"],yte=["onMouseEnter","onClick","onMouseLeave"],bte=["id"],jte=["id"];function GA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GA(Object(n),!0).forEach(function(a){wte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wte(e,t,n){return(t=Nte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nte(e){var t=Ste(e,"string");return typeof t=="symbol"?t:t+""}function Ste(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pi(){return pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pi.apply(null,arguments)}function Rg(e,t){if(e==null)return{};var n,a,s=Cte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Cte(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function kte(e){var t=x.useMemo(()=>V_(e.children,Og),[e.children]),n=pt(a=>Aee(a,e.id,t));return n==null?null:x.createElement(nte,{legendPayload:n})}var Pte=x.memo(e=>{var{dataKey:t,nameKey:n,sectors:a,stroke:s,strokeWidth:o,fill:l,name:c,hide:f,tooltipType:h,id:u}=e,m={dataDefinedOnItem:a.map(p=>p.tooltipPayload),positions:a.map(p=>p.tooltipPosition),settings:{stroke:s,strokeWidth:o,fill:l,dataKey:t,nameKey:n,name:ag(c,t),hide:f,type:h,color:l,unit:"",graphicalItemId:u}};return x.createElement(G_,{tooltipEntrySettings:m})}),Ete=(e,t)=>e>t?"start":e<t?"end":"middle",Ate=(e,t,n)=>wa(typeof t=="function"?t(e):t,n,n*.8),Ite=(e,t,n)=>{var{top:a,left:s,width:o,height:l}=t,c=hM(o,l),f=s+wa(e.cx,o,o/2),h=a+wa(e.cy,l,l/2),u=wa(e.innerRadius,c,0),m=Ate(n,e.outerRadius,c),p=e.maxRadius||Math.sqrt(o*o+l*l)/2;return{cx:f,cy:h,innerRadius:u,outerRadius:m,maxRadius:p}},Dte=(e,t)=>{var n=$n(t-e),a=Math.min(Math.abs(t-e),360);return n*a};function Ote(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Mte=(e,t)=>{if(x.isValidElement(e))return x.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Zt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:a}=t,s=Rg(t,vte);return x.createElement(jc,pi({},s,{type:"linear",className:n}))},Tte=(e,t,n)=>{if(x.isValidElement(e))return x.cloneElement(e,t);var a=n;if(typeof e=="function"&&(a=e(t),x.isValidElement(a)))return a;var s=Zt("recharts-pie-label-text",Ote(e));return x.createElement(Mg,pi({},t,{alignmentBaseline:"middle",className:s}),a)};function _te(e){var{sectors:t,props:n,showLabels:a}=e,{label:s,labelLine:o,dataKey:l}=n;if(!a||!s||!t)return null;var c=Pa(n),f=kc(s),h=kc(o),u=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,m=t.map((p,v)=>{var j=(p.startAngle+p.endAngle)/2,y=Ur(p.cx,p.cy,p.outerRadius+u,j),b=Or(Or(Or(Or({},c),p),{},{stroke:"none"},f),{},{index:v,textAnchor:Ete(y.x,p.cx)},y),N=Or(Or(Or(Or({},c),p),{},{fill:"none",stroke:p.fill},h),{},{index:v,points:[Ur(p.cx,p.cy,p.outerRadius,j),y],key:"line"});return x.createElement(ps,{zIndex:wn.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},x.createElement(Sn,null,o&&Mte(o,N),Tte(s,b,mr(p,l))))});return x.createElement(Sn,{className:"recharts-pie-labels"},m)}function Rte(e){var{sectors:t,props:n,showLabels:a}=e,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?x.createElement(R_,{label:s}):x.createElement(_te,{sectors:t,props:n,showLabels:a})}function $te(e){var{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:s,shape:o,id:l}=e,c=pt(Oc),f=pt(f_),h=pt(qJ),{onMouseEnter:u,onClick:m,onMouseLeave:p}=s,v=Rg(s,yte),j=Zee(u,s.dataKey,l),y=ete(p),b=tte(m,s.dataKey,l);return t==null||t.length===0?null:x.createElement(x.Fragment,null,t.map((N,k)=>{if((N==null?void 0:N.startAngle)===0&&(N==null?void 0:N.endAngle)===0&&t.length!==1)return null;var D=h==null||h===l,E=String(k)===c&&(f==null||s.dataKey===f)&&D,P=c?a:null,C=n&&E?n:P,O=Or(Or({},N),{},{stroke:N.stroke,tabIndex:-1,[B4]:k,[U4]:l});return x.createElement(Sn,pi({key:"sector-".concat(N==null?void 0:N.startAngle,"-").concat(N==null?void 0:N.endAngle,"-").concat(N.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},K5(v,N,k),{onMouseEnter:j(N,k),onMouseLeave:y(N,k),onClick:b(N,k)}),x.createElement(Qee,pi({option:o!=null?o:C,index:k,shapeType:"sector",isActive:E},O)))}))}function Fte(e){var t,{pieSettings:n,displayedData:a,cells:s,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:f,dataKey:h,nameKey:u,tooltipType:m}=n,p=Math.abs(n.minAngle),v=Dte(c,f),j=Math.abs(v),y=a.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,b=a.filter(C=>mr(C,h,0)!==0).length,N=(j>=360?b:b-1)*y,k=j-b*p-N,D=a.reduce((C,O)=>{var A=mr(O,h,0);return C+(lt(A)?A:0)},0),E;if(D>0){var P;E=a.map((C,O)=>{var A=mr(C,h,0),_=mr(C,u,O),z=Ite(n,o,C),G=(lt(A)?A:0)/D,T,M=Or(Or({},C),s&&s[O]&&s[O].props);O?T=P.endAngle+$n(v)*y*(A!==0?1:0):T=c;var W=T+$n(v)*((A!==0?p:0)+G*k),Z=(T+W)/2,B=(z.innerRadius+z.outerRadius)/2,U=[{name:_,value:A,payload:M,dataKey:h,type:m,graphicalItemId:n.id}],$=Ur(z.cx,z.cy,B,Z);return P=Or(Or(Or(Or({},n.presentationProps),{},{percent:G,cornerRadius:typeof l=="string"?parseFloat(l):l,name:_,tooltipPayload:U,midAngle:Z,middleRadius:B,tooltipPosition:$},M),z),{},{value:A,dataKey:h,startAngle:T,endAngle:W,payload:M,paddingAngle:$n(v)*y}),P})}return E}function Lte(e){var{showLabels:t,sectors:n,children:a}=e,s=x.useMemo(()=>!t||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,t]);return x.createElement(hee,{value:t?s:void 0},a)}function zte(e){var{props:t,previousSectorsRef:n,id:a}=e,{sectors:s,isAnimationActive:o,animationBegin:l,animationDuration:c,animationEasing:f,activeShape:h,inactiveShape:u,onAnimationStart:m,onAnimationEnd:p}=t,v=pg(t,"recharts-pie-"),j=n.current,[y,b]=x.useState(!1),N=x.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),k=x.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]);return x.createElement(Lte,{showLabels:!y,sectors:s},x.createElement(mg,{animationId:v,begin:l,duration:c,isActive:o,easing:f,onAnimationStart:k,onAnimationEnd:N,key:v},D=>{var E=[],P=s&&s[0],C=P==null?void 0:P.startAngle;return s==null||s.forEach((O,A)=>{var _=j&&j[A],z=A>0?hl(O,"paddingAngle",0):0;if(_){var G=jn(_.endAngle-_.startAngle,O.endAngle-O.startAngle,D),T=Or(Or({},O),{},{startAngle:C+z,endAngle:C+G+z});E.push(T),C=T.endAngle}else{var{endAngle:M,startAngle:W}=O,Z=jn(0,M-W,D),B=Or(Or({},O),{},{startAngle:C+z,endAngle:C+Z+z});E.push(B),C=B.endAngle}}),n.current=E,x.createElement(Sn,null,x.createElement($te,{sectors:E,activeShape:h,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:a}))}),x.createElement(Rte,{showLabels:!y,sectors:s,props:t}),t.children)}var Bte={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:wn.area};function Ute(e){var{id:t}=e,n=Rg(e,bte),{hide:a,className:s,rootTabIndex:o}=e,l=x.useMemo(()=>V_(e.children,Og),[e.children]),c=pt(u=>Iee(u,t,l)),f=x.useRef(null),h=Zt("recharts-pie",s);return a||c==null?(f.current=null,x.createElement(Sn,{tabIndex:o,className:h})):x.createElement(ps,{zIndex:e.zIndex},x.createElement(Pte,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),x.createElement(Sn,{tabIndex:o,className:h},x.createElement(zte,{props:Or(Or({},n),{},{sectors:c}),previousSectorsRef:f,id:t})))}function K_(e){var t=Cn(e,Bte),{id:n}=t,a=Rg(t,jte),s=Pa(a);return x.createElement(H_,{id:n,type:"pie"},o=>x.createElement(x.Fragment,null,x.createElement(xte,{type:"pie",id:o,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),x.createElement(kte,pi({},a,{id:o})),x.createElement(Ute,pi({},a,{id:o}))))}K_.displayName="Pie";var Vte=["points"];function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function wy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(n),!0).forEach(function(a){qte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qte(e,t,n){return(t=Gte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gte(e){var t=Hte(e,"string");return typeof t=="symbol"?t:t+""}function Hte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mp.apply(null,arguments)}function Wte(e,t){if(e==null)return{};var n,a,s=Kte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Kte(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Yte(e){var{option:t,dotProps:n,className:a}=e;if(x.isValidElement(t))return x.cloneElement(t,n);if(typeof t=="function")return t(n);var s=Zt(a,typeof t!="boolean"?t.className:""),o=n!=null?n:{},{points:l}=o,c=Wte(o,Vte);return x.createElement($_,mp({},c,{className:s}))}function Xte(e,t){return e==null?!1:t?!0:e.length===1}function Jte(e){var{points:t,dot:n,className:a,dotClassName:s,dataKey:o,baseProps:l,needClip:c,clipPathId:f,zIndex:h=wn.scatter}=e;if(!Xte(t,n))return null;var u=q_(n),m=I7(n),p=t.map((j,y)=>{var b,N,k=wy(wy(wy({r:3},l),m),{},{index:y,cx:(b=j.x)!==null&&b!==void 0?b:void 0,cy:(N=j.y)!==null&&N!==void 0?N:void 0,dataKey:o,value:j.value,payload:j.payload,points:t});return x.createElement(Yte,{key:"dot-".concat(y),option:n,dotProps:k,className:s})}),v={};return c&&f!=null&&(v.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(f,")")),x.createElement(ps,{zIndex:h},x.createElement(Sn,mp({className:a},v),p))}function WA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function KA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(n),!0).forEach(function(a){Qte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Qte(e,t,n){return(t=Zte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zte(e){var t=ere(e,"string");return typeof t=="symbol"?t:t+""}function ere(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y_=0,tre={xAxis:{},yAxis:{},zAxis:{}},X_=oa({name:"cartesianAxis",initialState:tre,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:xr()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:xr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:xr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:xr()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:xr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:xr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:xr()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:xr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:xr()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,s=e.yAxis[n];if(s){var o=s.widthHistory||[];if(o.length===3&&o[0]===o[2]&&a===o[1]&&a!==s.width&&Math.abs(a-o[0])<=1)return;var l=[...o,a].slice(-3);e.yAxis[n]=KA(KA({},e.yAxis[n]),{},{width:a,widthHistory:l})}}}}),{addXAxis:rre,replaceXAxis:nre,removeXAxis:are,addYAxis:sre,replaceYAxis:ore,removeYAxis:ire,addZAxis:Bde,replaceZAxis:Ude,removeZAxis:Vde,updateYAxisWidth:lre}=X_.actions,cre=X_.reducer,dre=ke([pn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),ure=ke([dre,bo,jo],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),wN=()=>pt(ure),fre=()=>pt(YJ);function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(a){hre(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hre(e,t,n){return(t=mre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mre(e){var t=pre(e,"string");return typeof t=="symbol"?t:t+""}function pre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gre=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:s,dataKey:o,clipPath:l}=e;if(s===!1||t.x==null||t.y==null)return null;var c={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a!=null?a:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},f=Ny(Ny(Ny({},c),kc(s)),Yj(s)),h;return x.isValidElement(s)?h=x.cloneElement(s,f):typeof s=="function"?h=s(f):h=x.createElement($_,f),x.createElement(Sn,{className:"recharts-active-dot",clipPath:l},h)};function XA(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:s,clipPath:o,zIndex:l=wn.activeDot}=e,c=pt(Oc),f=fre();if(t==null||f==null)return null;var h=t.find(u=>f.includes(u.payload));return fn(h)?null:x.createElement(ps,{zIndex:l},x.createElement(gre,{point:h,childIndex:Number(c),mainColor:n,dataKey:s,activeDot:a,clipPath:o}))}var J_=e=>{var{chartData:t}=e,n=br(),a=ia();return x.useEffect(()=>a?()=>{}:(n(nA(t)),()=>{n(nA(void 0))}),[t,n,a]),null},JA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Q_=oa({name:"brush",initialState:JA,reducers:{setBrushSettings(e,t){return t.payload==null?JA:t.payload}}}),{setBrushSettings:qde}=Q_.actions,xre=Q_.reducer;function vre(e,t,n){return(t=yre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yre(e){var t=bre(e,"string");return typeof t=="symbol"?t:t+""}function bre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class NN{static create(t){return new NN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}vre(NN,"EPS",1e-4);function jre(e){return(e%180+180)%180}var wre=function(t){var{width:n,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=jre(s),l=o*Math.PI/180,c=Math.atan(a/n),f=l>c&&l<Math.PI-c?a/Math.sin(l):n/Math.cos(l);return Math.abs(f)},Nre={dots:[],areas:[],lines:[]},Z_=oa({name:"referenceElements",initialState:Nre,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ds(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ds(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ds(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Gde,removeDot:Hde,addArea:Wde,removeArea:Kde,addLine:Yde,removeLine:Xde}=Z_.actions,Sre=Z_.reducer,Cre=x.createContext(void 0),kre=e=>{var{children:t}=e,[n]=x.useState("".concat(yu("recharts"),"-clip")),a=wN();if(a==null)return null;var{x:s,y:o,width:l,height:c}=a;return x.createElement(Cre.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:s,y:o,height:c,width:l}))),t)};function eR(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t){var s=e[a];s!==void 0&&n.push(s)}return n}function Pre(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return wre(a,n)}function Ere(e,t,n){var a=n==="width",{x:s,y:o,width:l,height:c}=e;return t===1?{start:a?s:o,end:a?s+l:o+c}:{start:a?s+l:o+c,end:a?s:o}}function Tu(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-s)<=0}function Are(e,t){return eR(e,t+1)}function Ire(e,t,n,a,s){for(var o=(a||[]).slice(),{start:l,end:c}=t,f=0,h=1,u=l,m=function(){var j=a==null?void 0:a[f];if(j===void 0)return{v:eR(a,h)};var y=f,b,N=()=>(b===void 0&&(b=n(j,y)),b),k=j.coordinate,D=f===0||Tu(e,k,N,u,c);D||(f=0,u=l,h+=1),D&&(u=k+e*(N()/2+s),f+=h)},p;h<=o.length;)if(p=m(),p)return p.v;return[]}function Dre(e,t,n,a,s){var o=(a||[]).slice(),l=o.length;if(l===0)return[];for(var{start:c,end:f}=t,h=1;h<=l;h++){for(var u=(l-1)%h,m=c,p=!0,v=function(){var k=a[j],D=j,E,P=()=>(E===void 0&&(E=n(k,D)),E),C=k.coordinate,O=j===u||Tu(e,C,P,m,f);if(!O)return p=!1,1;O&&(m=C+e*(P()/2+s))},j=u;j<l&&!v();j+=h);if(p){for(var y=[],b=u;b<l;b+=h)y.push(a[b]);return y}}return[]}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(a){Ore(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ore(e,t,n){return(t=Mre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mre(e){var t=Tre(e,"string");return typeof t=="symbol"?t:t+""}function Tre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _re(e,t,n,a,s){for(var o=(a||[]).slice(),l=o.length,{start:c}=t,{end:f}=t,h=function(p){var v=o[p],j,y=()=>(j===void 0&&(j=n(v,p)),j);if(p===l-1){var b=e*(v.coordinate+e*y()/2-f);o[p]=v=Tn(Tn({},v),{},{tickCoord:b>0?v.coordinate-b*e:v.coordinate})}else o[p]=v=Tn(Tn({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var N=Tu(e,v.tickCoord,y,c,f);N&&(f=v.tickCoord-e*(y()/2+s),o[p]=Tn(Tn({},v),{},{isShow:!0}))}},u=l-1;u>=0;u--)h(u);return o}function Rre(e,t,n,a,s,o){var l=(a||[]).slice(),c=l.length,{start:f,end:h}=t;if(o){var u=a[c-1],m=n(u,c-1),p=e*(u.coordinate+e*m/2-h);if(l[c-1]=u=Tn(Tn({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var v=Tu(e,u.tickCoord,()=>m,f,h);v&&(h=u.tickCoord-e*(m/2+s),l[c-1]=Tn(Tn({},u),{},{isShow:!0}))}}for(var j=o?c-1:c,y=function(k){var D=l[k],E,P=()=>(E===void 0&&(E=n(D,k)),E);if(k===0){var C=e*(D.coordinate-e*P()/2-f);l[k]=D=Tn(Tn({},D),{},{tickCoord:C<0?D.coordinate-C*e:D.coordinate})}else l[k]=D=Tn(Tn({},D),{},{tickCoord:D.coordinate});if(D.tickCoord!=null){var O=Tu(e,D.tickCoord,P,f,h);O&&(f=D.tickCoord+e*(P()/2+s),l[k]=Tn(Tn({},D),{},{isShow:!0}))}},b=0;b<j;b++)y(b);return l}function SN(e,t,n){var{tick:a,ticks:s,viewBox:o,minTickGap:l,orientation:c,interval:f,tickFormatter:h,unit:u,angle:m}=e;if(!s||!s.length||!a)return[];if(lt(f)||af.isSsr){var p;return(p=Are(s,lt(f)?f:0))!==null&&p!==void 0?p:[]}var v=[],j=c==="top"||c==="bottom"?"width":"height",y=u&&j==="width"?uu(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},b=(D,E)=>{var P=typeof h=="function"?h(D.value,E):D.value;return j==="width"?Pre(uu(P,{fontSize:t,letterSpacing:n}),y,m):uu(P,{fontSize:t,letterSpacing:n})[j]},N=s.length>=2?$n(s[1].coordinate-s[0].coordinate):1,k=Ere(o,N,j);return f==="equidistantPreserveStart"?Ire(N,k,b,s,l):f==="equidistantPreserveEnd"?Dre(N,k,b,s,l):(f==="preserveStart"||f==="preserveStartEnd"?v=Rre(N,k,b,s,l,f==="preserveStartEnd"):v=_re(N,k,b,s,l),v.filter(D=>D.isShow))}var $re=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:s=0,tickMargin:o=0}=e,l=0;if(t){Array.from(t).forEach(u=>{if(u){var m=u.getBoundingClientRect();m.width>l&&(l=m.width)}});var c=n?n.getBoundingClientRect().width:0,f=s+o,h=l+f+c+(n?a:0);return Math.round(h)}return 0},Fre=["axisLine","width","height","className","hide","ticks","axisType"];function Lre(e,t){if(e==null)return{};var n,a,s=zre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function zre(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vl.apply(null,arguments)}function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(a){Bre(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Bre(e,t,n){return(t=Ure(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ure(e){var t=Vre(e,"string");return typeof t=="symbol"?t:t+""}function Vre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var so={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:wn.axis};function qre(e){var{x:t,y:n,width:a,height:s,orientation:o,mirror:l,axisLine:c,otherSvgProps:f}=e;if(!c)return null;var h=Br(Br(Br({},f),Pa(c)),{},{fill:"none"});if(o==="top"||o==="bottom"){var u=+(o==="top"&&!l||o==="bottom"&&l);h=Br(Br({},h),{},{x1:t,y1:n+u*s,x2:t+a,y2:n+u*s})}else{var m=+(o==="left"&&!l||o==="right"&&l);h=Br(Br({},h),{},{x1:t+m*a,y1:n,x2:t+m*a,y2:n+s})}return x.createElement("line",vl({},h,{className:Zt("recharts-cartesian-axis-line",hl(c,"className"))}))}function Gre(e,t,n,a,s,o,l,c,f){var h,u,m,p,v,j,y=c?-1:1,b=e.tickSize||l,N=lt(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=u=e.coordinate,p=n+ +!c*s,m=p-y*b,j=m-y*f,v=N;break;case"left":m=p=e.coordinate,u=t+ +!c*a,h=u-y*b,v=h-y*f,j=N;break;case"right":m=p=e.coordinate,u=t+ +c*a,h=u+y*b,v=h+y*f,j=N;break;default:h=u=e.coordinate,p=n+ +c*s,m=p+y*b,j=m+y*f,v=N;break}return{line:{x1:h,y1:m,x2:u,y2:p},tick:{x:v,y:j}}}function Hre(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Wre(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Kre(e){var{option:t,tickProps:n,value:a}=e,s,o=Zt(n.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))s=x.cloneElement(t,Br(Br({},n),{},{className:o}));else if(typeof t=="function")s=t(Br(Br({},n),{},{className:o}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Zt(l,t==null?void 0:t.className)),s=x.createElement(Mg,vl({},n,{className:l}),a)}return s}var Yre=x.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:s,stroke:o,tickFormatter:l,unit:c,padding:f,tickTextProps:h,orientation:u,mirror:m,x:p,y:v,width:j,height:y,tickSize:b,tickMargin:N,fontSize:k,letterSpacing:D,getTicksConfig:E,events:P,axisType:C}=e,O=SN(Br(Br({},E),{},{ticks:n}),k,D),A=Hre(u,m),_=Wre(u,m),z=Pa(E),G=kc(a),T={};typeof s=="object"&&(T=s);var M=Br(Br({},z),{},{fill:"none"},T),W=O.map(U=>Br({entry:U},Gre(U,p,v,j,y,u,b,m,N))),Z=W.map(U=>{var{entry:$,line:K}=U;return x.createElement(Sn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},s&&x.createElement("line",vl({},M,K,{className:Zt("recharts-cartesian-axis-tick-line",hl(s,"className"))})))}),B=W.map((U,$)=>{var{entry:K,tick:V}=U,F=Br(Br(Br(Br({textAnchor:A,verticalAnchor:_},z),{},{stroke:"none",fill:o},G),V),{},{index:$,payload:K,visibleTicksCount:O.length,tickFormatter:l,padding:f},h);return x.createElement(Sn,vl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},K5(P,K,$)),a&&x.createElement(Kre,{option:a,tickProps:F,value:"".concat(typeof l=="function"?l(K.value,$):K.value).concat(c||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(C,"-ticks")},B.length>0&&x.createElement(ps,{zIndex:wn.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(C,"-tick-labels"),ref:t},B)),Z.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(C,"-tick-lines")},Z))}),Xre=x.forwardRef((e,t)=>{var{axisLine:n,width:a,height:s,className:o,hide:l,ticks:c,axisType:f}=e,h=Lre(e,Fre),[u,m]=x.useState(""),[p,v]=x.useState(""),j=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return $re({ticks:j.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=x.useCallback(b=>{if(b){var N=b.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=N;var k=N[0];if(k){var D=window.getComputedStyle(k),E=D.fontSize,P=D.letterSpacing;(E!==u||P!==p)&&(m(E),v(P))}}},[u,p]);return l||a!=null&&a<=0||s!=null&&s<=0?null:x.createElement(ps,{zIndex:e.zIndex},x.createElement(Sn,{className:Zt("recharts-cartesian-axis",o)},x.createElement(qre,{x:e.x,y:e.y,width:a,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Pa(e)}),x.createElement(Yre,{ref:y,axisType:f,events:h,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(GZ,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(tee,{label:e.label,labelRef:e.labelRef}),e.children)))}),CN=x.forwardRef((e,t)=>{var n=Cn(e,so);return x.createElement(Xre,vl({},n,{ref:t}))});CN.displayName="CartesianAxis";var Jre=["x1","y1","x2","y2","key"],Qre=["offset"],Zre=["xAxisId","yAxisId"],ene=["xAxisId","yAxisId"];function eI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(n),!0).forEach(function(a){tne(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tne(e,t,n){return(t=rne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rne(e){var t=nne(e,"string");return typeof t=="symbol"?t:t+""}function nne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rl.apply(null,arguments)}function pp(e,t){if(e==null)return{};var n,a,s=ane(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ane(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var sne=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:s,width:o,height:l,ry:c}=e;return x.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function tR(e){var{option:t,lineItemProps:n}=e,a;if(x.isValidElement(t))a=x.cloneElement(t,n);else if(typeof t=="function")a=t(n);else{var s,{x1:o,y1:l,x2:c,y2:f,key:h}=n,u=pp(n,Jre),m=(s=Pa(u))!==null&&s!==void 0?s:{},{offset:p}=m,v=pp(m,Qre);a=x.createElement("line",rl({},v,{x1:o,y1:l,x2:c,y2:f,fill:"none",key:h}))}return a}function one(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:o,yAxisId:l}=e,c=pp(e,Zre),f=s.map((h,u)=>{var m=_n(_n({},c),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(u),index:u});return x.createElement(tR,{key:"line-".concat(u),option:a,lineItemProps:m})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function ine(e){var{y:t,height:n,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:o,yAxisId:l}=e,c=pp(e,ene),f=s.map((h,u)=>{var m=_n(_n({},c),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(u),index:u});return x.createElement(tR,{option:a,lineItemProps:m,key:"line-".concat(u)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function lne(e){var{horizontalFill:t,fillOpacity:n,x:a,y:s,width:o,height:l,horizontalPoints:c,horizontal:f=!0}=e;if(!f||!t||!t.length||c==null)return null;var h=c.map(m=>Math.round(m+s-s)).sort((m,p)=>m-p);s!==h[0]&&h.unshift(0);var u=h.map((m,p)=>{var v=!h[p+1],j=v?s+l-m:h[p+1]-m;if(j<=0)return null;var y=p%t.length;return x.createElement("rect",{key:"react-".concat(p),y:m,x:a,height:j,width:o,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function cne(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:s,y:o,width:l,height:c,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var h=f.map(m=>Math.round(m+s-s)).sort((m,p)=>m-p);s!==h[0]&&h.unshift(0);var u=h.map((m,p)=>{var v=!h[p+1],j=v?s+l-m:h[p+1]-m;if(j<=0)return null;var y=p%n.length;return x.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:j,height:c,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var dne=(e,t)=>{var{xAxis:n,width:a,height:s,offset:o}=e;return F4(SN(_n(_n(_n({},so),n),{},{ticks:L4(n),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,t)},une=(e,t)=>{var{yAxis:n,width:a,height:s,offset:o}=e;return F4(SN(_n(_n(_n({},so),n),{},{ticks:L4(n),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,t)},fne={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:wn.grid};function rR(e){var t=Y4(),n=X4(),a=K4(),s=_n(_n({},Cn(e,fne)),{},{x:lt(e.x)?e.x:a.left,y:lt(e.y)?e.y:a.top,width:lt(e.width)?e.width:a.width,height:lt(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:l,x:c,y:f,width:h,height:u,syncWithTicks:m,horizontalValues:p,verticalValues:v}=s,j=ia(),y=pt(_=>GE(_,"xAxis",o,j)),b=pt(_=>GE(_,"yAxis",l,j));if(!Os(h)||!Os(u)||!lt(c)||!lt(f))return null;var N=s.verticalCoordinatesGenerator||dne,k=s.horizontalCoordinatesGenerator||une,{horizontalPoints:D,verticalPoints:E}=s;if((!D||!D.length)&&typeof k=="function"){var P=p&&p.length,C=k({yAxis:b?_n(_n({},b),{},{ticks:P?p:b.ticks}):void 0,width:t!=null?t:h,height:n!=null?n:u,offset:a},P?!0:m);Vm(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(D=C)}if((!E||!E.length)&&typeof N=="function"){var O=v&&v.length,A=N({xAxis:y?_n(_n({},y),{},{ticks:O?v:y.ticks}):void 0,width:t!=null?t:h,height:n!=null?n:u,offset:a},O?!0:m);Vm(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(E=A)}return x.createElement(ps,{zIndex:s.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(sne,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),x.createElement(lne,rl({},s,{horizontalPoints:D})),x.createElement(cne,rl({},s,{verticalPoints:E})),x.createElement(one,rl({},s,{offset:a,horizontalPoints:D,xAxis:y,yAxis:b})),x.createElement(ine,rl({},s,{offset:a,verticalPoints:E,xAxis:y,yAxis:b}))))}rR.displayName="CartesianGrid";var hne={},nR=oa({name:"errorBars",initialState:hne,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:s}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?s:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(s=>s.dataKey!==a.dataKey||s.direction!==a.direction))}}}),{addErrorBar:Jde,replaceErrorBar:Qde,removeErrorBar:Zde}=nR.actions,mne=nR.reducer;function aR(e,t){var n,a,s=pt(h=>So(h,e)),o=pt(h=>Co(h,t)),l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:on.allowDataOverflow,c=(a=o==null?void 0:o.allowDataOverflow)!==null&&a!==void 0?a:ln.allowDataOverflow,f=l||c;return{needClip:f,needClipX:l,needClipY:c}}function pne(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,s=wN(),{needClipX:o,needClipY:l,needClip:c}=aR(t,n);if(!c||!s)return null;var{x:f,y:h,width:u,height:m}=s;return x.createElement("clipPath",{id:"clipPath-".concat(a)},x.createElement("rect",{x:o?f:f-u/2,y:l?h:h-m/2,width:o?u:u*2,height:l?m:m*2}))}function gne(e){var t=kc(e),n=3,a=2;if(t!=null){var{r:s,strokeWidth:o}=t,l=Number(s),c=Number(o);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(c)||c<0)&&(c=a),{r:l,strokeWidth:c}}return{r:n,strokeWidth:a}}var Sy={exports:{}},Cy={};var tI;function xne(){if(tI)return Cy;tI=1;var e=Rc();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return Cy.useSyncExternalStoreWithSelector=function(f,h,u,m,p){var v=s(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=l(function(){function b(P){if(!N){if(N=!0,k=P,P=m(P),p!==void 0&&j.hasValue){var C=j.value;if(p(C,P))return D=C}return D=P}if(C=D,n(k,P))return C;var O=m(P);return p!==void 0&&p(C,O)?(k=P,C):(k=P,D=O)}var N=!1,k,D,E=u===void 0?null:u;return[function(){return b(h())},E===null?void 0:function(){return b(E())}]},[h,u,m,p]);var y=a(f,v[0],v[1]);return o(function(){j.hasValue=!0,j.value=y},[y]),c(y),y},Cy}var rI;function vne(){return rI||(rI=1,Sy.exports=xne()),Sy.exports}vne();var yne=x.version.startsWith("19"),bne=Symbol.for(yne?"react.transitional.element":"react.element"),jne=Symbol.for("react.portal"),wne=Symbol.for("react.fragment"),Nne=Symbol.for("react.strict_mode"),Sne=Symbol.for("react.profiler"),Cne=Symbol.for("react.consumer"),kne=Symbol.for("react.context"),sR=Symbol.for("react.forward_ref"),Pne=Symbol.for("react.suspense"),Ene=Symbol.for("react.suspense_list"),kN=Symbol.for("react.memo"),Ane=Symbol.for("react.lazy"),Ine=sR,Dne=kN;function One(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case bne:switch(e=e.type,e){case wne:case Sne:case Nne:case Pne:case Ene:return e;default:switch(e=e&&e.$$typeof,e){case kne:case sR:case Ane:case kN:return e;case Cne:return e;default:return t}}case jne:return t}}}function Mne(e){return One(e)===kN}function Tne(e,t,n,a,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:l}){let c=!1,f,h,u,m,p;function v(k,D){return f=k,h=D,u=e(f,h),m=t(a,h),p=n(u,m,h),c=!0,p}function j(){return u=e(f,h),t.dependsOnOwnProps&&(m=t(a,h)),p=n(u,m,h),p}function y(){return e.dependsOnOwnProps&&(u=e(f,h)),t.dependsOnOwnProps&&(m=t(a,h)),p=n(u,m,h),p}function b(){const k=e(f,h),D=!l(k,u);return u=k,D&&(p=n(u,m,h)),p}function N(k,D){const E=!o(D,h),P=!s(k,f,D,h);return f=k,h=D,E&&P?j():E?y():P?b():p}return function(D,E){return c?N(D,E):v(D,E)}}function _ne(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:a,...s}){const o=t(e,s),l=n(e,s),c=a(e,s);return Tne(o,l,c,e,s)}function Rne(e,t){const n={};for(const a in e){const s=e[a];typeof s=="function"&&(n[a]=(...o)=>t(s(...o)))}return n}function aj(e){return function(n){const a=e(n);function s(){return a}return s.dependsOnOwnProps=!1,s}}function nI(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function oR(e,t){return function(a,{displayName:s}){const o=function(c,f){return o.dependsOnOwnProps?o.mapToProps(c,f):o.mapToProps(c,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(c,f){o.mapToProps=e,o.dependsOnOwnProps=nI(e);let h=o(c,f);return typeof h=="function"&&(o.mapToProps=h,o.dependsOnOwnProps=nI(h),h=o(c,f)),h},o}}function PN(e,t){return(n,a)=>{throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(a.wrappedComponentName,"."))}}function $ne(e){return e&&typeof e=="object"?aj(t=>Rne(e,t)):e?typeof e=="function"?oR(e):PN(e,"mapDispatchToProps"):aj(t=>({dispatch:t}))}function Fne(e){return e?typeof e=="function"?oR(e):PN(e,"mapStateToProps"):aj(()=>({}))}function Lne(e,t,n){return{...n,...e,...t}}function zne(e){return function(n,{displayName:a,areMergedPropsEqual:s}){let o=!1,l;return function(f,h,u){const m=e(f,h,u);return o?s(m,l)||(l=m):(o=!0,l=m),l}}}function Bne(e){return e?typeof e=="function"?zne(e):PN(e,"mergeProps"):()=>Lne}function Une(e){e()}function Vne(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Une(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var aI={notify(){},get:()=>[]};function iR(e,t){let n,a=aI,s=0,o=!1;function l(y){u();const b=a.subscribe(y);let N=!1;return()=>{N||(N=!0,b(),m())}}function c(){a.notify()}function f(){j.onStateChange&&j.onStateChange()}function h(){return o}function u(){s++,n||(n=t?t.addNestedSub(f):e.subscribe(f),a=Vne())}function m(){s--,n&&s===0&&(n(),n=void 0,a.clear(),a=aI)}function p(){o||(o=!0,u())}function v(){o&&(o=!1,m())}const j={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:h,trySubscribe:p,tryUnsubscribe:v,getListeners:()=>a};return j}var qne=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gne=qne(),Hne=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Wne=Hne(),Kne=()=>Gne||Wne?x.useLayoutEffect:x.useEffect,gp=Kne();function sI(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function dm(e,t){if(sI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!sI(e[n[s]],t[n[s]]))return!1;return!0}var Yne={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Xne={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Jne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qne={[Ine]:Jne,[Dne]:lR};function oI(e){return Mne(e)?lR:Qne[e.$$typeof]||Yne}var Zne=Object.defineProperty,eae=Object.getOwnPropertyNames,iI=Object.getOwnPropertySymbols,tae=Object.getOwnPropertyDescriptor,rae=Object.getPrototypeOf,lI=Object.prototype;function sj(e,t){if(typeof t!="string"){if(lI){const o=rae(t);o&&o!==lI&&sj(e,o)}let n=eae(t);iI&&(n=n.concat(iI(t)));const a=oI(e),s=oI(t);for(let o=0;o<n.length;++o){const l=n[o];if(!Xne[l]&&!(s&&s[l])&&!(a&&a[l])){const c=tae(t,l);try{Zne(e,l,c)}catch(f){}}}}return e}var ky=Symbol.for("react-redux-context"),Py=typeof globalThis<"u"?globalThis:{};function nae(){var n;if(!x.createContext)return{};const e=(n=Py[ky])!=null?n:Py[ky]=new Map;let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var cR=nae(),aae=[null,null];function sae(e,t,n){gp(()=>e(...t),n)}function oae(e,t,n,a,s,o){e.current=a,n.current=!1,s.current&&(s.current=null,o())}function iae(e,t,n,a,s,o,l,c,f,h,u){if(!e)return()=>{};let m=!1,p=null;const v=()=>{if(m||!c.current)return;const y=t.getState();let b,N;try{b=a(y,s.current)}catch(k){N=k,p=k}N||(p=null),b===o.current?l.current||h():(o.current=b,f.current=b,l.current=!0,u())};return n.onStateChange=v,n.trySubscribe(),v(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function lae(e,t){return e===t}function cae(e,t,n,{pure:a,areStatesEqual:s=lae,areOwnPropsEqual:o=dm,areStatePropsEqual:l=dm,areMergedPropsEqual:c=dm,forwardRef:f=!1,context:h=cR}={}){const u=h,m=Fne(e),p=$ne(t),v=Bne(n),j=!!e;return b=>{const N=b.displayName||b.name||"Component",k="Connect(".concat(N,")"),D={shouldHandleStateChanges:j,displayName:k,wrappedComponentName:N,WrappedComponent:b,initMapStateToProps:m,initMapDispatchToProps:p,initMergeProps:v,areStatesEqual:s,areStatePropsEqual:l,areOwnPropsEqual:o,areMergedPropsEqual:c};function E(O){const[A,_,z]=x.useMemo(()=>{const{reactReduxForwardedRef:se,...oe}=O;return[O.context,se,oe]},[O]),G=x.useMemo(()=>{let se=u;return A!=null&&A.Consumer,se},[A,u]),T=x.useContext(G),M=!!O.store&&!!O.store.getState&&!!O.store.dispatch,W=!!T&&!!T.store,Z=M?O.store:T.store,B=W?T.getServerState:Z.getState,U=x.useMemo(()=>_ne(Z.dispatch,D),[Z]),[$,K]=x.useMemo(()=>{if(!j)return aae;const se=iR(Z,M?void 0:T.subscription),oe=se.notifyNestedSubs.bind(se);return[se,oe]},[Z,M,T]),V=x.useMemo(()=>M?T:{...T,subscription:$},[M,T,$]),F=x.useRef(void 0),L=x.useRef(z),X=x.useRef(void 0),Y=x.useRef(!1),me=x.useRef(!1),xe=x.useRef(void 0);gp(()=>(me.current=!0,()=>{me.current=!1}),[]);const Pe=x.useMemo(()=>()=>X.current&&z===L.current?X.current:U(Z.getState(),z),[Z,z]),Ge=x.useMemo(()=>oe=>$?iae(j,Z,$,U,L,F,Y,me,X,K,oe):()=>{},[$]);sae(oae,[L,F,Y,z,X,K]);let he;try{he=x.useSyncExternalStore(Ge,Pe,B?()=>U(B(),z):Pe)}catch(se){throw xe.current&&(se.message+="\nThe error may be correlated with this previous error:\n".concat(xe.current.stack,"\n\n")),se}gp(()=>{xe.current=void 0,X.current=void 0,F.current=he});const ie=x.useMemo(()=>x.createElement(b,{...he,ref:_}),[_,b,he]);return x.useMemo(()=>j?x.createElement(G.Provider,{value:V},ie):ie,[G,ie,V])}const C=x.memo(E);if(C.WrappedComponent=b,C.displayName=E.displayName=k,f){const A=x.forwardRef(function(z,G){return x.createElement(C,{...z,reactReduxForwardedRef:G})});return A.displayName=k,A.WrappedComponent=b,sj(A,b)}return sj(C,b)}}var dR=cae;function dae(e){const{children:t,context:n,serverState:a,store:s}=e,o=x.useMemo(()=>{const f=iR(s);return{store:s,subscription:f,getServerState:a?()=>a:void 0}},[s,a]),l=x.useMemo(()=>s.getState(),[s]);gp(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==s.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,l]);const c=n||cR;return x.createElement(c.Provider,{value:o},t)}var uR=dae,uae=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function fae(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function EN(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(uae.has(a)){if(e[a]==null&&t[a]==null)continue;if(!dm(e[a],t[a]))return!1}else if(!fae(e[a],t[a]))return!1;return!0}function AN(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:Y_}function IN(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:Y_}var fR=(e,t,n)=>HT(e,"xAxis",AN(e,t),n),hR=(e,t,n)=>GT(e,"xAxis",AN(e,t),n),mR=(e,t,n)=>HT(e,"yAxis",IN(e,t),n),pR=(e,t,n)=>GT(e,"yAxis",IN(e,t),n),hae=ke([sr,fR,mR,hR,pR],(e,t,n,a,s)=>yo(e,"xAxis")?Um(t,a,!1):Um(n,s,!1)),mae=(e,t)=>t,gR=ke([ST,mae],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),xR=e=>{var t=sr(e),n=yo(t,"xAxis");return n?"yAxis":"xAxis"},pae=(e,t)=>{var n=xR(e);return n==="yAxis"?IN(e,t):AN(e,t)},gae=(e,t,n)=>AT(e,xR(e),pae(e,t),n),xae=ke([gR,gae],(e,t)=>{var n;if(!(e==null||t==null)){var{stackId:a}=e,s=Bw(e);if(!(a==null||s==null)){var o=(n=t[a])===null||n===void 0?void 0:n.stackedData,l=o==null?void 0:o.find(c=>c.key===s);if(l!=null)return l.map(c=>[c[0],c[1]])}}}),vae=ke([sr,fR,mR,hR,pR,xae,OY,hae,gR,GY],(e,t,n,a,s,o,l,c,f,h)=>{var{chartData:u,dataStartIndex:m,dataEndIndex:p}=l;if(!(f==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||a==null||s==null||a.length===0||s.length===0||c==null)){var{data:v}=f,j;if(v&&v.length>0?j=v:j=u==null?void 0:u.slice(m,p+1),j!=null)return $ae({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataStartIndex:m,areaSettings:f,stackedData:o,displayedData:j,chartBaseValue:h,bandSize:c})}}),yae=["id"],bae=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},il.apply(null,arguments)}function vR(e,t){if(e==null)return{};var n,a,s=jae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function jae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(n),!0).forEach(function(a){wae(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wae(e,t,n){return(t=Nae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nae(e){var t=Sae(e,"string");return typeof t=="symbol"?t:t+""}function Sae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xp(e,t){return e&&e!=="none"?e:t}var Cae=e=>{var{dataKey:t,name:n,stroke:a,fill:s,legendType:o,hide:l}=e;return[{inactive:l,dataKey:t,type:o,color:xp(a,s),value:ag(n,t),payload:e}]},kae=x.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,unit:f,tooltipType:h,id:u}=e,m={dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:void 0,name:ag(l,t),hide:c,type:h,color:xp(a,o),unit:f,graphicalItemId:u}};return x.createElement(G_,{tooltipEntrySettings:m})});function Pae(e){var{clipPathId:t,points:n,props:a}=e,{needClip:s,dot:o,dataKey:l}=a,c=Pa(a);return x.createElement(Jte,{points:n,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:l,baseProps:c,needClip:s,clipPathId:t})}function Eae(e){var{showLabels:t,children:n,points:a}=e,s=a.map(o=>{var l,c,f={x:(l=o.x)!==null&&l!==void 0?l:0,y:(c=o.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return gc(gc({},f),{},{value:o.value,payload:o.payload,parentViewBox:void 0,viewBox:f,fill:void 0})});return x.createElement(fee,{value:t?s:void 0},n)}function dI(e){var{points:t,baseLine:n,needClip:a,clipPathId:s,props:o}=e,{layout:l,type:c,stroke:f,connectNulls:h,isRange:u}=o,{id:m}=o,p=vR(o,yae),v=Pa(p),j=Hn(p);return x.createElement(x.Fragment,null,(t==null?void 0:t.length)>1&&x.createElement(Sn,{clipPath:a?"url(#clipPath-".concat(s,")"):void 0},x.createElement(jc,il({},j,{id:m,points:t,connectNulls:h,type:c,baseLine:n,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&x.createElement(jc,il({},v,{className:"recharts-area-curve",layout:l,type:c,connectNulls:h,fill:"none",points:t})),f!=="none"&&u&&x.createElement(jc,il({},v,{className:"recharts-area-curve",layout:l,type:c,connectNulls:h,fill:"none",points:n}))),x.createElement(Pae,{points:t,props:p,clipPathId:s}))}function Aae(e){var t,n,{alpha:a,baseLine:s,points:o,strokeWidth:l}=e,c=(t=o[0])===null||t===void 0?void 0:t.y,f=(n=o[o.length-1])===null||n===void 0?void 0:n.y;if(!yr(c)||!yr(f))return null;var h=a*Math.abs(c-f),u=Math.max(...o.map(m=>m.x||0));return lt(s)?u=Math.max(s,u):s&&Array.isArray(s)&&s.length&&(u=Math.max(...s.map(m=>m.x||0),u)),lt(u)?x.createElement("rect",{x:0,y:c<f?c:c-h,width:u+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}function Iae(e){var t,n,{alpha:a,baseLine:s,points:o,strokeWidth:l}=e,c=(t=o[0])===null||t===void 0?void 0:t.x,f=(n=o[o.length-1])===null||n===void 0?void 0:n.x;if(!yr(c)||!yr(f))return null;var h=a*Math.abs(c-f),u=Math.max(...o.map(m=>m.y||0));return lt(s)?u=Math.max(s,u):s&&Array.isArray(s)&&s.length&&(u=Math.max(...s.map(m=>m.y||0),u)),lt(u)?x.createElement("rect",{x:c<f?c:c-h,y:0,width:h,height:Math.floor(u+(l?parseInt("".concat(l),10):1))}):null}function Dae(e){var{alpha:t,layout:n,points:a,baseLine:s,strokeWidth:o}=e;return n==="vertical"?x.createElement(Aae,{alpha:t,points:a,baseLine:s,strokeWidth:o}):x.createElement(Iae,{alpha:t,points:a,baseLine:s,strokeWidth:o})}function Oae(e){var{needClip:t,clipPathId:n,props:a,previousPointsRef:s,previousBaselineRef:o}=e,{points:l,baseLine:c,isAnimationActive:f,animationBegin:h,animationDuration:u,animationEasing:m,onAnimationStart:p,onAnimationEnd:v}=a,j=x.useMemo(()=>({points:l,baseLine:c}),[l,c]),y=pg(j,"recharts-area-"),b=wG(),[N,k]=x.useState(!1),D=!N,E=x.useCallback(()=>{typeof v=="function"&&v(),k(!1)},[v]),P=x.useCallback(()=>{typeof p=="function"&&p(),k(!0)},[p]);if(b==null)return null;var C=s.current,O=o.current;return x.createElement(Eae,{showLabels:D,points:l},a.children,x.createElement(mg,{animationId:y,begin:h,duration:u,isActive:f,easing:m,onAnimationEnd:E,onAnimationStart:P,key:y},A=>{if(C){var _=C.length/l.length,z=A===1?l:l.map((T,M)=>{var W=Math.floor(M*_);if(C[W]){var Z=C[W];return gc(gc({},T),{},{x:jn(Z.x,T.x,A),y:jn(Z.y,T.y,A)})}return T}),G;return lt(c)?G=jn(O,c,A):fn(c)||us(c)?G=jn(O,0,A):G=c.map((T,M)=>{var W=Math.floor(M*_);if(Array.isArray(O)&&O[W]){var Z=O[W];return gc(gc({},T),{},{x:jn(Z.x,T.x,A),y:jn(Z.y,T.y,A)})}return T}),A>0&&(s.current=z,o.current=G),x.createElement(dI,{points:z,baseLine:G,needClip:t,clipPathId:n,props:a})}return A>0&&(s.current=l,o.current=c),x.createElement(Sn,null,f&&x.createElement("defs",null,x.createElement("clipPath",{id:"animationClipPath-".concat(n)},x.createElement(Dae,{alpha:A,points:l,baseLine:c,layout:b,strokeWidth:a.strokeWidth}))),x.createElement(Sn,{clipPath:"url(#animationClipPath-".concat(n,")")},x.createElement(dI,{points:l,baseLine:c,needClip:t,clipPathId:n,props:a})))}),x.createElement(R_,{label:a.label}))}function Mae(e){var{needClip:t,clipPathId:n,props:a}=e,s=x.useRef(null),o=x.useRef();return x.createElement(Oae,{needClip:t,clipPathId:n,props:a,previousPointsRef:s,previousBaselineRef:o})}class Tae extends x.PureComponent{render(){var{hide:t,dot:n,points:a,className:s,top:o,left:l,needClip:c,xAxisId:f,yAxisId:h,width:u,height:m,id:p,baseLine:v,zIndex:j}=this.props;if(t)return null;var y=Zt("recharts-area",s),b=p,{r:N,strokeWidth:k}=gne(n),D=q_(n),E=N*2+k,P=c?"url(#clipPath-".concat(D?"":"dots-").concat(b,")"):void 0;return x.createElement(ps,{zIndex:j},x.createElement(Sn,{className:y},c&&x.createElement("defs",null,x.createElement(pne,{clipPathId:b,xAxisId:f,yAxisId:h}),!D&&x.createElement("clipPath",{id:"clipPath-dots-".concat(b)},x.createElement("rect",{x:l-E/2,y:o-E/2,width:u+E,height:m+E}))),x.createElement(Mae,{needClip:c,clipPathId:b,props:this.props})),x.createElement(XA,{points:a,mainColor:xp(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:P}),this.props.isRange&&Array.isArray(v)&&x.createElement(XA,{points:v,mainColor:xp(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:P}))}}var yR={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:wn.area};function _ae(e){var t,n=Cn(e,yR),{activeDot:a,animationBegin:s,animationDuration:o,animationEasing:l,connectNulls:c,dot:f,fill:h,fillOpacity:u,hide:m,isAnimationActive:p,legendType:v,stroke:j,xAxisId:y,yAxisId:b}=n,N=vR(n,bae),k=qc(),D=p_(),{needClip:E}=aR(y,b),P=ia(),{points:C,isRange:O,baseLine:A}=(t=pt(W=>vae(W,e.id,P)))!==null&&t!==void 0?t:{},_=wN();if(k!=="horizontal"&&k!=="vertical"||_==null||D!=="AreaChart"&&D!=="ComposedChart")return null;var{height:z,width:G,x:T,y:M}=_;return!C||!C.length?null:x.createElement(Tae,il({},N,{activeDot:a,animationBegin:s,animationDuration:o,animationEasing:l,baseLine:A,connectNulls:c,dot:f,fill:h,fillOpacity:u,height:z,hide:m,layout:k,isAnimationActive:p==="auto"?!af.isSsr:p,isRange:O,legendType:v,needClip:E,points:C,stroke:j,width:G,left:T,top:M,xAxisId:y,yAxisId:b}))}var Rae=(e,t,n,a,s)=>{var o=n!=null?n:t;if(lt(o))return o;var l=e==="horizontal"?s:a,c=l.scale.domain();if(l.type==="number"){var f=Math.max(c[0],c[1]),h=Math.min(c[0],c[1]);return o==="dataMin"?h:o==="dataMax"||f<0?f:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]};function $ae(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:a},stackedData:s,layout:o,chartBaseValue:l,xAxis:c,yAxis:f,displayedData:h,dataStartIndex:u,xAxisTicks:m,yAxisTicks:p,bandSize:v}=e,j=s&&s.length,y=Rae(o,l,n,c,f),b=o==="horizontal",N=!1,k=h.map((E,P)=>{var C,O,A;if(j)A=s[u+P];else{var _=mr(E,a);Array.isArray(_)?(A=_,N=!0):A=[y,_]}var z=(C=(O=A)===null||O===void 0?void 0:O[1])!==null&&C!==void 0?C:null,G=z==null||j&&!t&&mr(E,a)==null;return b?{x:Xk({axis:c,ticks:m,bandSize:v,entry:E,index:P}),y:G?null:f.scale(z),value:A,payload:E}:{x:G?null:c.scale(z),y:Xk({axis:f,ticks:p,bandSize:v,entry:E,index:P}),value:A,payload:E}}),D;return j||N?D=k.map(E=>{var P=Array.isArray(E.value)?E.value[0]:null;return b?{x:E.x,y:P!=null&&E.y!=null?f.scale(P):null,payload:E.payload}:{x:P!=null?c.scale(P):null,y:E.y,payload:E.payload}}):D=b?f.scale(y):c.scale(y),{points:k,baseLine:D,isRange:N}}function Fae(e){var t=Cn(e,yR),n=ia();return x.createElement(H_,{id:t.id,type:"area"},a=>x.createElement(x.Fragment,null,x.createElement(rte,{legendPayload:Cae(t)}),x.createElement(kae,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),x.createElement(gte,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Bq(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),x.createElement(_ae,il({},t,{id:a}))))}var bR=x.memo(Fae,EN);bR.displayName="Area";var Lae="Invariant failed";function zae(e,t){throw new Error(Lae)}var Bae=["domain","range"],Uae=["domain","range"];function uI(e,t){if(e==null)return{};var n,a,s=Vae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Vae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function fI(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function jR(e,t){if(e===t)return!0;var{domain:n,range:a}=e,s=uI(e,Bae),{domain:o,range:l}=t,c=uI(t,Uae);return!fI(n,o)||!fI(a,l)?!1:EN(s,c)}var qae=["dangerouslySetInnerHTML","ticks","scale"],Gae=["id","scale"];function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oj.apply(null,arguments)}function hI(e,t){if(e==null)return{};var n,a,s=Hae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Hae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Wae(e){var t=br(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?t(rre(e)):n.current!==e&&t(nre({prev:n.current,next:e})),n.current=e},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(t(are(n.current)),n.current=null)},[t]),null}var Kae=e=>{var{xAxisId:t,className:n}=e,a=pt(V4),s=ia(),o="xAxis",l=pt(N=>qT(N,o,t,s)),c=pt(N=>$X(N,t)),f=pt(N=>VX(N,t)),h=pt(N=>jT(N,t));if(c==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:u,ticks:m,scale:p}=e,v=hI(e,qae),{id:j,scale:y}=h,b=hI(h,Gae);return x.createElement(CN,oj({},v,b,{x:f.x,y:f.y,width:c.width,height:c.height,className:Zt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:l,axisType:o}))},Yae={allowDataOverflow:on.allowDataOverflow,allowDecimals:on.allowDecimals,allowDuplicatedCategory:on.allowDuplicatedCategory,angle:on.angle,axisLine:so.axisLine,height:on.height,hide:!1,includeHidden:on.includeHidden,interval:on.interval,minTickGap:on.minTickGap,mirror:on.mirror,orientation:on.orientation,padding:on.padding,reversed:on.reversed,scale:on.scale,tick:on.tick,tickCount:on.tickCount,tickLine:so.tickLine,tickSize:so.tickSize,type:on.type,xAxisId:0},Xae=e=>{var t=Cn(e,Yae);return x.createElement(x.Fragment,null,x.createElement(Wae,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(Kae,t))},wR=x.memo(Xae,jR);wR.displayName="XAxis";var Jae=["dangerouslySetInnerHTML","ticks","scale"],Qae=["id","scale"];function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ij.apply(null,arguments)}function mI(e,t){if(e==null)return{};var n,a,s=Zae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Zae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ese(e){var t=br(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?t(sre(e)):n.current!==e&&t(ore({prev:n.current,next:e})),n.current=e},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(t(ire(n.current)),n.current=null)},[t]),null}var tse=e=>{var{yAxisId:t,className:n,width:a,label:s}=e,o=x.useRef(null),l=x.useRef(null),c=pt(V4),f=ia(),h=br(),u="yAxis",m=pt(C=>HX(C,t)),p=pt(C=>GX(C,t)),v=pt(C=>qT(C,u,t,f)),j=pt(C=>wT(C,t));if(x.useLayoutEffect(()=>{if(!(a!=="auto"||!m||yN(s)||x.isValidElement(s)||j==null)){var C=o.current;if(C){var O=C.getCalculatedWidth();Math.round(m.width)!==Math.round(O)&&h(lre({id:t,width:O}))}}},[v,m,h,s,t,a,j]),m==null||p==null||j==null)return null;var{dangerouslySetInnerHTML:y,ticks:b,scale:N}=e,k=mI(e,Jae),{id:D,scale:E}=j,P=mI(j,Qae);return x.createElement(CN,ij({},k,P,{ref:o,labelRef:l,x:p.x,y:p.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:m.width,height:m.height,className:Zt("recharts-".concat(u," ").concat(u),n),viewBox:c,ticks:v,axisType:u}))},rse={allowDataOverflow:ln.allowDataOverflow,allowDecimals:ln.allowDecimals,allowDuplicatedCategory:ln.allowDuplicatedCategory,angle:ln.angle,axisLine:so.axisLine,hide:!1,includeHidden:ln.includeHidden,interval:ln.interval,minTickGap:ln.minTickGap,mirror:ln.mirror,orientation:ln.orientation,padding:ln.padding,reversed:ln.reversed,scale:ln.scale,tick:ln.tick,tickCount:ln.tickCount,tickLine:so.tickLine,tickSize:so.tickSize,type:ln.type,width:ln.width,yAxisId:0},nse=e=>{var t=Cn(e,rse);return x.createElement(x.Fragment,null,x.createElement(ese,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement(tse,t))},NR=x.memo(nse,jR);NR.displayName="YAxis";var ase=(e,t)=>t,DN=ke([ase,sr,yT,Zr,l_,ko,iQ,pn],mQ),ON=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},SR=Ha("mouseClick"),CR=tf();CR.startListening({actionCreator:SR,effect:(e,t)=>{var n=e.payload,a=DN(t.getState(),ON(n));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(oJ({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var lj=Ha("mouseMove"),kR=tf(),Qh=null;kR.startListening({actionCreator:lj,effect:(e,t)=>{var n=e.payload;Qh!==null&&cancelAnimationFrame(Qh);var a=ON(n);Qh=requestAnimationFrame(()=>{var s=t.getState(),o=cN(s,s.tooltip.settings.shared);if(o==="axis"){var l=DN(s,a);(l==null?void 0:l.activeIndex)!=null?t.dispatch(e_({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(ZT())}Qh=null})}});function sse(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var pI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},PR=oa({name:"rootProps",initialState:pI,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:pI.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),ose=PR.reducer,{updateOptions:ise}=PR.actions,ER=oa({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:lse}=ER.actions,cse=ER.reducer,AR=Ha("keyDown"),IR=Ha("focus"),MN=tf();MN.startListening({actionCreator:AR,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var l=dN(s,Zc(n),mf(n),xf(n)),c=l==null?-1:Number(l);if(!(!Number.isFinite(c)||c<0)){var f=ko(n);if(o==="Enter"){var h=dp(n,"axis","hover",String(s.index));t.dispatch(Qb({active:!s.active,activeIndex:s.index,activeCoordinate:h}));return}var u=XX(n),m=u==="left-to-right"?1:-1,p=o==="ArrowRight"?1:-1,v=c+p*m;if(!(f==null||v>=f.length||v<0)){var j=dp(n,"axis","hover",String(v));t.dispatch(Qb({active:!0,activeIndex:v.toString(),activeCoordinate:j}))}}}}}});MN.startListening({actionCreator:IR,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var o="0",l=dp(n,"axis","hover",String(o));t.dispatch(Qb({active:!0,activeIndex:o,activeCoordinate:l}))}}}});var La=Ha("externalEvent"),DR=tf(),Ey=new Map;DR.startListening({actionCreator:La,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var s=a.type,o=Ey.get(s);o!==void 0&&cancelAnimationFrame(o);var l=requestAnimationFrame(()=>{try{var c=t.getState(),f={activeCoordinate:HJ(c),activeDataKey:f_(c),activeIndex:Oc(c),activeLabel:u_(c),activeTooltipIndex:Oc(c),isTooltipActive:WJ(c)};n(f,a)}finally{Ey.delete(s)}});Ey.set(s,l)}}});var dse=ke([Jc],e=>e.tooltipItemPayloads),use=ke([dse,gf,(e,t)=>t,(e,t,n)=>n],(e,t,n,a)=>{var s=e.find(c=>c.settings.graphicalItemId===a);if(s!=null){var{positions:o}=s;if(o!=null){var l=t(o,n);return l}}}),OR=Ha("touchMove"),MR=tf();MR.startListening({actionCreator:OR,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),s=cN(a,a.tooltip.settings.shared);if(s==="axis"){var o=n.touches[0];if(o==null)return;var l=DN(a,ON({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(e_({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(s==="item"){var c,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var u=h.getAttribute(B4),m=(c=h.getAttribute(U4))!==null&&c!==void 0?c:void 0,p=Qc(a).find(y=>y.id===m);if(u==null||p==null||m==null)return;var{dataKey:v}=p,j=use(a,u,m);t.dispatch(QT({activeDataKey:v,activeIndex:u,activeCoordinate:j,activeGraphicalItemId:m}))}}}});var fse=l4({brush:xre,cartesianAxis:cre,chartData:GQ,errorBars:mne,graphicalItems:mte,layout:Dq,legend:RG,options:zQ,polarAxis:Nee,polarOptions:cse,referenceElements:Sre,rootProps:ose,tooltip:iJ,zIndex:EQ}),hse=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return rq({reducer:fse,preloadedState:t,middleware:a=>{var s;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([CR.middleware,kR.middleware,MN.middleware,DR.middleware,MR.middleware])},enhancers:a=>{var s=a;return typeof a=="function"&&(s=a()),s.concat(S4({type:"raf"}))},devTools:{serialize:{replacer:sse},name:"recharts-".concat(n)}})};function TR(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,s=ia(),o=x.useRef(null);if(s)return n;o.current==null&&(o.current=hse(t,a));var l=Jj;return x.createElement(uR,{context:l,store:o.current},n)}function mse(e){var{layout:t,margin:n}=e,a=br(),s=ia();return x.useEffect(()=>{s||(a(Eq(t)),a(Pq(n)))},[a,s,t,n]),null}var _R=x.memo(mse,EN);function RR(e){var t=br();return x.useEffect(()=>{t(ise(e))},[t,e]),null}function gI(e){var{zIndex:t,isPanorama:n}=e,a=x.useRef(null),s=br();return x.useLayoutEffect(()=>(a.current&&s(kQ({zIndex:t,element:a.current,isPanorama:n})),()=>{s(PQ({zIndex:t,isPanorama:n}))}),[s,t,n]),x.createElement("g",{tabIndex:-1,ref:a})}function xI(e){var{children:t,isPanorama:n}=e,a=pt(gQ);if(!a||a.length===0)return t;var s=a.filter(l=>l<0),o=a.filter(l=>l>0);return x.createElement(x.Fragment,null,s.map(l=>x.createElement(gI,{key:l,zIndex:l,isPanorama:n})),t,o.map(l=>x.createElement(gI,{key:l,zIndex:l,isPanorama:n})))}var pse=["children"];function gse(e,t){if(e==null)return{};var n,a,s=xse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function xse(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vp.apply(null,arguments)}var vse={width:"100%",height:"100%",display:"block"},yse=x.forwardRef((e,t)=>{var n=Y4(),a=X4(),s=iM();if(!Os(n)||!Os(a))return null;var{children:o,otherAttributes:l,title:c,desc:f}=e,h,u;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=s?0:void 0,typeof l.role=="string"?u=l.role:u=s?"application":void 0),x.createElement(C5,vp({},l,{title:c,desc:f,role:u,tabIndex:h,width:n,height:a,style:vse,ref:t}),o)}),bse=e=>{var{children:t}=e,n=pt(lg);if(!n)return null;var{width:a,height:s,y:o,x:l}=n;return x.createElement(C5,{width:a,height:s,x:l,y:o},t)},vI=x.forwardRef((e,t)=>{var{children:n}=e,a=gse(e,pse),s=ia();return s?x.createElement(bse,null,x.createElement(xI,{isPanorama:!0},n)):x.createElement(yse,vp({ref:t},a),x.createElement(xI,{isPanorama:!1},n))});function jse(){var e=br(),[t,n]=x.useState(null),a=pt(Wq);return x.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),o=s.width/t.offsetWidth;yr(o)&&o!==a&&e(Iq(o))}},[t,e,a]),n}function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function wse(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(a){Nse(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Nse(e,t,n){return(t=Sse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sse(e){var t=Cse(e,"string");return typeof t=="symbol"?t:t+""}function Cse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yl.apply(null,arguments)}var kse=()=>(eZ(),null);function yp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Pse=x.forwardRef((e,t)=>{var n,a,s=x.useRef(null),[o,l]=x.useState({containerWidth:yp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:yp((a=e.style)===null||a===void 0?void 0:a.height)}),c=x.useCallback((h,u)=>{l(m=>{var p=Math.round(h),v=Math.round(u);return m.containerWidth===p&&m.containerHeight===v?m:{containerWidth:p,containerHeight:v}})},[]),f=x.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:u,height:m}=h.getBoundingClientRect();c(u,m);var p=j=>{var{width:y,height:b}=j[0].contentRect;c(y,b)},v=new ResizeObserver(p);v.observe(h),s.current=v}},[t,c]);return x.useEffect(()=>()=>{var h=s.current;h!=null&&h.disconnect()},[c]),x.createElement(x.Fragment,null,x.createElement(dg,{width:o.containerWidth,height:o.containerHeight}),x.createElement("div",yl({ref:f},e)))}),Ese=x.forwardRef((e,t)=>{var{width:n,height:a}=e,[s,o]=x.useState({containerWidth:yp(n),containerHeight:yp(a)}),l=x.useCallback((f,h)=>{o(u=>{var m=Math.round(f),p=Math.round(h);return u.containerWidth===m&&u.containerHeight===p?u:{containerWidth:m,containerHeight:p}})},[]),c=x.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:h,height:u}=f.getBoundingClientRect();l(h,u)}},[t,l]);return x.createElement(x.Fragment,null,x.createElement(dg,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",yl({ref:c},e)))}),Ase=x.forwardRef((e,t)=>{var{width:n,height:a}=e;return x.createElement(x.Fragment,null,x.createElement(dg,{width:n,height:a}),x.createElement("div",yl({ref:t},e)))}),Ise=x.forwardRef((e,t)=>{var{width:n,height:a}=e;return co(n)||co(a)?x.createElement(Ese,yl({},e,{ref:t})):x.createElement(Ase,yl({},e,{ref:t}))});function Dse(e){return e===!0?Pse:Ise}var Ose=x.forwardRef((e,t)=>{var{children:n,className:a,height:s,onClick:o,onContextMenu:l,onDoubleClick:c,onMouseDown:f,onMouseEnter:h,onMouseLeave:u,onMouseMove:m,onMouseUp:p,onTouchEnd:v,onTouchMove:j,onTouchStart:y,style:b,width:N,responsive:k,dispatchTouchEvents:D=!0}=e,E=x.useRef(null),P=br(),[C,O]=x.useState(null),[A,_]=x.useState(null),z=jse(),G=iw(),T=(G==null?void 0:G.width)>0?G.width:N,M=(G==null?void 0:G.height)>0?G.height:s,W=x.useCallback(he=>{z(he),typeof t=="function"&&t(he),O(he),_(he),he!=null&&(E.current=he)},[z,t,O,_]),Z=x.useCallback(he=>{P(SR(he)),P(La({handler:o,reactEvent:he}))},[P,o]),B=x.useCallback(he=>{P(lj(he)),P(La({handler:h,reactEvent:he}))},[P,h]),U=x.useCallback(he=>{P(ZT()),P(La({handler:u,reactEvent:he}))},[P,u]),$=x.useCallback(he=>{P(lj(he)),P(La({handler:m,reactEvent:he}))},[P,m]),K=x.useCallback(()=>{P(IR())},[P]),V=x.useCallback(he=>{P(AR(he.key))},[P]),F=x.useCallback(he=>{P(La({handler:l,reactEvent:he}))},[P,l]),L=x.useCallback(he=>{P(La({handler:c,reactEvent:he}))},[P,c]),X=x.useCallback(he=>{P(La({handler:f,reactEvent:he}))},[P,f]),Y=x.useCallback(he=>{P(La({handler:p,reactEvent:he}))},[P,p]),me=x.useCallback(he=>{P(La({handler:y,reactEvent:he}))},[P,y]),xe=x.useCallback(he=>{D&&P(OR(he)),P(La({handler:j,reactEvent:he}))},[P,D,j]),Pe=x.useCallback(he=>{P(La({handler:v,reactEvent:he}))},[P,v]),Ge=Dse(k);return x.createElement(b_.Provider,{value:C},x.createElement($7.Provider,{value:A},x.createElement(Ge,{width:T!=null?T:b==null?void 0:b.width,height:M!=null?M:b==null?void 0:b.height,className:Zt("recharts-wrapper",a),style:wse({position:"relative",cursor:"default",width:T,height:M},b),onClick:Z,onContextMenu:F,onDoubleClick:L,onFocus:K,onKeyDown:V,onMouseDown:X,onMouseEnter:B,onMouseLeave:U,onMouseMove:$,onMouseUp:Y,onTouchEnd:Pe,onTouchMove:xe,onTouchStart:me,ref:W},x.createElement(kse,null),n)))}),Mse=["width","height","responsive","children","className","style","compact","title","desc"];function Tse(e,t){if(e==null)return{};var n,a,s=_se(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function _se(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var $R=x.forwardRef((e,t)=>{var{width:n,height:a,responsive:s,children:o,className:l,style:c,compact:f,title:h,desc:u}=e,m=Tse(e,Mse),p=Pa(m);return f?x.createElement(x.Fragment,null,x.createElement(dg,{width:n,height:a}),x.createElement(vI,{otherAttributes:p,title:h,desc:u},o)):x.createElement(Ose,{className:l,style:c,width:n,height:a,responsive:s!=null?s:!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(vI,{otherAttributes:p,title:h,desc:u,ref:t},x.createElement(kre,null,o)))});function cj(){return cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cj.apply(null,arguments)}var Rse={top:5,right:5,bottom:5,left:5},$se={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Rse,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Fse=x.forwardRef(function(t,n){var a,s=Cn(t.categoricalChartProps,$se),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,u={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(TR,{preloadedState:{options:u},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:o},x.createElement(J_,{chartData:h.data}),x.createElement(_R,{layout:s.layout,margin:s.margin}),x.createElement(RR,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),x.createElement($R,cj({},s,{ref:n})))});function Lse(e){var t=br();return x.useEffect(()=>{t(lse(e))},[t,e]),null}var zse=["layout"];function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dj.apply(null,arguments)}function Bse(e,t){if(e==null)return{};var n,a,s=Use(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Use(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Vse={top:5,right:5,bottom:5,left:5},FR={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Vse,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},qse=x.forwardRef(function(t,n){var a,s=Cn(t.categoricalChartProps,FR),{layout:o}=s,l=Bse(s,zse),{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:u}=t,m={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:u,eventEmitter:void 0};return x.createElement(TR,{preloadedState:{options:m},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:c},x.createElement(J_,{chartData:s.data}),x.createElement(_R,{layout:o,margin:s.margin}),x.createElement(RR,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),x.createElement(Lse,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),x.createElement($R,dj({},l,{ref:n})))});function bI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bI(Object(n),!0).forEach(function(a){Gse(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Gse(e,t,n){return(t=Hse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hse(e){var t=Wse(e,"string");return typeof t=="symbol"?t:t+""}function Wse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kse=["item"],Yse=jI(jI({},FR),{},{layout:"centric",startAngle:0,endAngle:360}),Xse=x.forwardRef((e,t)=>{var n=Cn(e,Yse);return x.createElement(qse,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Kse,tooltipPayloadSearcher:j_,categoricalChartProps:n,ref:t})}),Jse=["axis"],Qse=x.forwardRef((e,t)=>x.createElement(Fse,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Jse,tooltipPayloadSearcher:j_,categoricalChartProps:e,ref:t}));const wI="http://localhost:5006/api",Zh=["#FF6600","#000000","#666666","#999999","#CCCCCC"],em=({title:e,value:t,icon:n,trend:a,color:s,subtitle:o})=>r.jsx(We,{className:"overflow-hidden border-none shadow-md hover:shadow-lg transition-shadow bg-white",children:r.jsxs(Mt,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:e}),r.jsx("h3",{className:"text-2xl font-black text-gray-900",children:t}),o&&r.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:o})]}),r.jsx("div",{className:"p-3 rounded-xl ".concat(s," bg-opacity-10 text-").concat(s.split("-")[1],"-600"),children:r.jsx(n,{size:24})})]}),a&&r.jsxs("div",{className:"mt-4 flex items-center text-xs font-bold",children:[a>0?r.jsxs("span",{className:"text-green-500 flex items-center bg-green-50 px-2 py-0.5 rounded-full",children:[r.jsx(xu,{size:14,className:"mr-1"})," +",a,"%"]}):r.jsxs("span",{className:"text-red-500 flex items-center bg-red-50 px-2 py-0.5 rounded-full",children:[r.jsx(VD,{size:14,className:"mr-1"})," ",a,"%"]}),r.jsx("span",{className:"text-gray-400 ml-2 font-medium",children:"vs ayer"})]})]})}),Zse=()=>{const e=$t(),[t,n]=x.useState(!0),[a,s]=x.useState(!1),[o,l]=x.useState({salesToday:0,purchasesToday:0,cxpPending:0,lowStockCount:0,recentSales:[]}),[c,f]=x.useState({salesByHour:[],topProducts:[],cashStatus:[]});x.useEffect(()=>{(async()=>{try{n(!0);const[m,p]=await Promise.all([fetch("".concat(wI,"/Dashboard/Summary")),fetch("".concat(wI,"/Dashboard/Charts"))]);if(m.ok){const v=await m.json();l(v)}if(p.ok){const v=await p.json();f(v)}}catch(m){console.error("Dashboard error:",m)}finally{n(!1),setTimeout(()=>s(!0),100)}})()},[]);const h=u=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(u);return r.jsxs("div",{className:"p-6 space-y-8 max-w-[1600px] mx-auto transition-colors duration-500",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ll,{className:"text-hd-orange",size:24}),r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Consola Administrativa"})]}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Anlisis de tiempo real y gestin operativa del sistema."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(re,{onClick:()=>e("/launchpad"),className:"bg-black hover:bg-gray-800 text-white font-black uppercase tracking-tighter italic border-b-4 border-hd-orange",children:[r.jsx(cl,{size:18,className:"mr-2"})," Men de Mdulos"]}),r.jsxs("div",{className:"bg-white border px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold text-gray-600 shadow-sm",children:[r.jsx(mm,{size:16,className:"text-hd-orange"}),new Date().toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(em,{title:"Ventas de Hoy",value:h(o.salesToday),icon:io,color:"bg-blue-500",subtitle:"Subtotal + ITBIS acumulado"}),r.jsx(em,{title:"Compras realizadas",value:h(o.purchasesToday),icon:ti,color:"bg-green-500",subtitle:"Convertido a DOP"}),r.jsx(em,{title:"CXP - Saldo Pendiente",value:h(o.cxpPending),icon:Xr,color:"bg-orange-500",subtitle:"Deuda total a proveedores"}),r.jsx(em,{title:"Stock Crtico",value:o.lowStockCount,icon:gu,color:"bg-red-500",subtitle:"Bajo stock de seguridad"})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[r.jsxs(We,{className:"xl:col-span-2 border-none shadow-xl bg-white overflow-hidden",children:[r.jsx(vt,{className:"flex flex-row items-center justify-between border-b bg-gray-50/30 px-6 py-4",children:r.jsxs(bt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(ti,{className:"text-hd-orange",size:20}),"Flujo de Ventas (ltimas 24h)"]})}),r.jsx(Mt,{className:"p-6 pt-8",children:r.jsx("div",{className:"w-full h-[300px]",style:{width:"100%",height:300},children:a&&c.salesByHour.length>0?r.jsx("div",{style:{width:"100%",height:300},children:r.jsx(iP,{children:r.jsxs(Qse,{data:c.salesByHour.map(u=>({hour:"".concat(u.Hour,":00"),amount:u.Amount})),children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#FF6600",stopOpacity:.1}),r.jsx("stop",{offset:"95%",stopColor:"#FF6600",stopOpacity:0})]})}),r.jsx(rR,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),r.jsx(wR,{dataKey:"hour",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#9CA3AF"},dy:10}),r.jsx(NR,{hide:!0}),r.jsx(lA,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1)"},formatter:u=>[h(u),"Ventas"]}),r.jsx(bR,{type:"monotone",dataKey:"amount",stroke:"#FF6600",strokeWidth:3,fillOpacity:1,fill:"url(#colorSales)"})]})})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 gap-2 border-2 border-dashed border-gray-100 rounded-xl",children:[r.jsx(ti,{size:32}),r.jsx("p",{className:"text-sm font-medium italic",children:"Sin actividad de ventas en las ltimas 24h"})]})})})]}),r.jsxs(We,{className:"border-none shadow-xl bg-white overflow-hidden",children:[r.jsx(vt,{className:"border-b bg-gray-50/30 px-6 py-4",children:r.jsxs(bt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(FC,{className:"text-hd-orange",size:20}),"Distribucin de Efectivo"]})}),r.jsxs(Mt,{className:"p-6 flex flex-col items-center justify-center",children:[a&&c.cashStatus.length>0?r.jsx("div",{style:{width:"100%",height:240},children:r.jsx(iP,{children:r.jsxs(Xse,{children:[r.jsx(K_,{data:c.cashStatus,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"Value",children:c.cashStatus.map((u,m)=>r.jsx(Og,{fill:Zh[m%Zh.length]},"cell-".concat(m)))}),r.jsx(lA,{})]})})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 gap-2 border-2 border-dashed border-gray-100 rounded-xl",children:[r.jsx(FC,{size:32}),r.jsx("p",{className:"text-sm font-medium italic font-mono text-center px-4",children:"Sin datos de cobros hoy"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4 w-full",children:c.cashStatus.map((u,m)=>r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Zh[m%Zh.length]}}),r.jsx("span",{className:"text-[10px] uppercase font-black text-gray-400",children:u.Name||"Otros"})]}),r.jsx("span",{className:"text-sm font-black text-gray-800 ml-4",children:h(u.Value)})]},m))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(We,{className:"lg:col-span-2 border-none shadow-xl bg-white overflow-hidden",children:[r.jsxs(vt,{className:"flex flex-row items-center justify-between border-b bg-gray-50/30 px-6 py-4",children:[r.jsxs(bt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(ll,{className:"text-hd-orange",size:20}),"Ventas del Da"]}),r.jsxs(re,{variant:"ghost",size:"sm",className:"text-hd-orange font-bold text-xs uppercase tracking-widest hover:bg-orange-50",children:["Ver todas ",r.jsx(ir,{size:14})]})]}),r.jsx(Mt,{className:"p-0",children:r.jsx("div",{className:"max-h-[400px] overflow-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 text-gray-600 text-[10px] uppercase font-black tracking-widest border-b h-12 sticky top-0 bg-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6",children:"No. Factura"}),r.jsx("th",{className:"px-6",children:"Cliente"}),r.jsx("th",{className:"px-6",children:"Hora"}),r.jsx("th",{className:"px-6 text-right",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:o.recentSales.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-400 italic font-medium",children:"No se han registrado ventas hoy."})}):o.recentSales.map(u=>r.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors group",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-black text-xs text-hd-orange bg-orange-50 px-2 py-1 rounded border border-orange-100",children:u.NumeroFactura})}),r.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-700",children:u.Cliente||"Cliente General"}),r.jsx("td",{className:"px-6 py-4 text-xs font-medium text-gray-400 italic",children:new Date(u.Fecha).toLocaleString("es-DO",{hour:"2-digit",minute:"2-digit"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"text-sm font-black text-gray-900",children:h(u.Total)})})]},u.NumeroFactura))})]})})})]}),r.jsxs(We,{className:"border-none shadow-xl bg-white text-gray-900 overflow-hidden flex flex-col",children:[r.jsx(vt,{className:"border-b bg-gray-50/30 px-6 py-4",children:r.jsxs(bt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(ti,{className:"text-hd-orange",size:20}),"Productos Ms Vendidos"]})}),r.jsx(Mt,{className:"p-6 flex-grow",children:r.jsxs("div",{className:"space-y-6",children:[c.topProducts.map((u,m)=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsx("span",{className:"text-xs font-bold text-gray-600 truncate max-w-[200px]",children:u.Name}),r.jsxs("span",{className:"text-xs font-black text-hd-orange",children:[u.Value," unds"]})]}),r.jsx("div",{className:"h-1.5 w-full bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-hd-orange rounded-full",style:{width:"".concat(u.Value/Math.max(...c.topProducts.map(p=>p.Value))*100,"%")}})})]},m)),c.topProducts.length===0&&r.jsx("p",{className:"text-gray-500 text-sm italic text-center py-10",children:"Sin datos de productos este mes."})]})}),o.lowStockCount>0&&r.jsx("div",{className:"p-6 bg-red-600/10 border-t border-red-500/20 group cursor-pointer hover:bg-red-600/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[r.jsx(gu,{size:18}),r.jsxs("span",{className:"text-xs font-black uppercase tracking-tight",children:[o.lowStockCount," Alertas de Stock"]})]}),r.jsx(ir,{size:16,className:"text-red-500 group-hover:translate-x-1 transition-transform"})]})})]})]})]})};function eoe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function LR(e,t){var n=x.useState(function(){return{inputs:t,result:e()}})[0],a=x.useRef(!0),s=x.useRef(n),o=a.current||!!(t&&s.current.inputs&&eoe(t,s.current.inputs)),l=o?s.current:{inputs:t,result:e()};return x.useEffect(function(){a.current=!1,s.current=l},[l]),l.result}function toe(e,t){return LR(function(){return e},t)}var Ht=LR,gt=toe,ls=function(t){var n=t.top,a=t.right,s=t.bottom,o=t.left,l=a-o,c=s-n,f={top:n,right:a,bottom:s,left:o,width:l,height:c,x:o,y:n,center:{x:(a+o)/2,y:(s+n)/2}};return f},TN=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},NI=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},roe=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Ay={top:0,right:0,bottom:0,left:0},_N=function(t){var n=t.borderBox,a=t.margin,s=a===void 0?Ay:a,o=t.border,l=o===void 0?Ay:o,c=t.padding,f=c===void 0?Ay:c,h=ls(TN(n,s)),u=ls(NI(n,l)),m=ls(NI(u,f));return{marginBox:h,borderBox:ls(n),paddingBox:u,contentBox:m,margin:s,border:l,padding:f}},Fa=function(t){var n=t.slice(0,-2),a=t.slice(-2);if(a!=="px")return 0;var s=Number(n);return isNaN(s)&&zae(),s},noe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},bp=function(t,n){var a=t.borderBox,s=t.border,o=t.margin,l=t.padding,c=roe(a,n);return _N({borderBox:c,border:s,margin:o,padding:l})},jp=function(t,n){return n===void 0&&(n=noe()),bp(t,n)},zR=function(t,n){var a={top:Fa(n.marginTop),right:Fa(n.marginRight),bottom:Fa(n.marginBottom),left:Fa(n.marginLeft)},s={top:Fa(n.paddingTop),right:Fa(n.paddingRight),bottom:Fa(n.paddingBottom),left:Fa(n.paddingLeft)},o={top:Fa(n.borderTopWidth),right:Fa(n.borderRightWidth),bottom:Fa(n.borderBottomWidth),left:Fa(n.borderLeftWidth)};return _N({borderBox:t,margin:a,padding:s,border:o})},BR=function(t){var n=t.getBoundingClientRect(),a=window.getComputedStyle(t);return zR(n,a)},SI=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function aoe(e,t){return!!(e===t||SI(e)&&SI(t))}function soe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!aoe(e[n],t[n]))return!1;return!0}function hn(e,t){t===void 0&&(t=soe);var n=null;function a(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var l=e.apply(this,s);return n={lastResult:l,lastArgs:s,lastThis:this},l}return a.clear=function(){n=null},a}var _u=function(t){var n=[],a=null,s=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];n=c,!a&&(a=requestAnimationFrame(function(){a=null,t.apply(void 0,n)}))};return s.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},s};function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wp.apply(null,arguments)}function UR(e,t){}UR.bind(null,"warn");UR.bind(null,"error");function oi(){}function ooe(e,t){return{...e,...t}}function Ua(e,t,n){const a=t.map(s=>{const o=ooe(n,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){a.forEach(o=>{o()})}}const ioe="Invariant failed";class Np extends Error{}Np.prototype.toString=function(){return this.message};function Je(e,t){throw new Np(ioe)}class loe extends Nt.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=oi,this.onWindowError=n=>{const a=this.getCallbacks();a.isDragging()&&a.tryAbort(),n.error instanceof Np&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Ua(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Np){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const coe="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",Sp=e=>e+1,doe=e=>"\n  You have lifted an item in position ".concat(Sp(e.source.index),"\n"),VR=(e,t)=>{const n=e.droppableId===t.droppableId,a=Sp(e.index),s=Sp(t.index);return n?"\n      You have moved the item from position ".concat(a,"\n      to position ").concat(s,"\n    "):"\n    You have moved the item from position ".concat(a,"\n    in list ").concat(e.droppableId,"\n    to list ").concat(t.droppableId,"\n    in position ").concat(s,"\n  ")},qR=(e,t,n)=>t.droppableId===n.droppableId?"\n      The item ".concat(e,"\n      has been combined with ").concat(n.draggableId):"\n      The item ".concat(e,"\n      in list ").concat(t.droppableId,"\n      has been combined with ").concat(n.draggableId,"\n      in list ").concat(n.droppableId,"\n    "),uoe=e=>{const t=e.destination;if(t)return VR(e.source,t);const n=e.combine;return n?qR(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},CI=e=>"\n  The item has returned to its starting position\n  of ".concat(Sp(e.index),"\n"),foe=e=>{if(e.reason==="CANCEL")return"\n      Movement cancelled.\n      ".concat(CI(e.source),"\n    ");const t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      ".concat(VR(e.source,t),"\n    "):n?"\n      You have dropped the item.\n      ".concat(qR(e.draggableId,e.source,n),"\n    "):"\n    The item has been dropped while not over a drop area.\n    ".concat(CI(e.source),"\n  ")},um={dragHandleUsageInstructions:coe,onDragStart:doe,onDragUpdate:uoe,onDragEnd:foe},mn={x:0,y:0},Nn=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ba=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ii=(e,t)=>e.x===t.x&&e.y===t.y,ed=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),bl=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Ru=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),kI=(e,t)=>Math.min(...t.map(n=>Ru(e,n))),GR=e=>t=>({x:e(t.x),y:e(t.y)});var hoe=(e,t)=>{const n=ls({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const yf=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),PI=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],moe={top:0,right:0,bottom:0,left:0},poe=(e,t)=>t?yf(e,t.scroll.diff.displacement):e,goe=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,xoe=(e,t)=>t&&t.shouldClipSubject?hoe(t.pageMarginBox,e):ls(e);var Mc=({page:e,withPlaceholder:t,axis:n,frame:a})=>{const s=poe(e.marginBox,a),o=goe(s,n,t),l=xoe(o,a);return{page:e,withPlaceholder:t,active:l}},RN=(e,t)=>{e.frame||Je();const n=e.frame,a=ba(t,n.scroll.initial),s=ed(a),o={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:a,displacement:s},max:n.scroll.max}},l=Mc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:l}};const HR=hn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),WR=hn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),$g=hn(e=>Object.values(e)),voe=hn(e=>Object.values(e));var td=hn((e,t)=>voe(t).filter(a=>e===a.descriptor.droppableId).sort((a,s)=>a.descriptor.index-s.descriptor.index));function $N(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Fg(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Lg=hn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),yoe=({isMovingForward:e,draggable:t,destination:n,insideDestination:a,previousImpact:s})=>{if(!n.isCombineEnabled||!$N(s))return null;function l(v){const j={type:"COMBINE",combine:{draggableId:v,droppableId:n.descriptor.id}};return{...s,at:j}}const c=s.displaced.all,f=c.length?c[0]:null;if(e)return f?l(f):null;const h=Lg(t,a);if(!f){if(!h.length)return null;const v=h[h.length-1];return l(v.descriptor.id)}const u=h.findIndex(v=>v.descriptor.id===f);u===-1&&Je();const m=u-1;if(m<0)return null;const p=h[m];return l(p.descriptor.id)},rd=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const KR={point:mn,value:0},$u={invisible:{},visible:{},all:[]},boe={displaced:$u,displacedBy:KR,at:null};var Va=(e,t)=>n=>e<=n&&n<=t,YR=e=>{const t=Va(e.top,e.bottom),n=Va(e.left,e.right);return a=>{if(t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right))return!0;const o=t(a.top)||t(a.bottom),l=n(a.left)||n(a.right);if(o&&l)return!0;const f=a.top<e.top&&a.bottom>e.bottom,h=a.left<e.left&&a.right>e.right;return f&&h?!0:f&&l||h&&o}},joe=e=>{const t=Va(e.top,e.bottom),n=Va(e.left,e.right);return a=>t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right)};const FN={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},XR={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var woe=e=>t=>{const n=Va(t.top,t.bottom),a=Va(t.left,t.right);return s=>e===FN?n(s.top)&&n(s.bottom):a(s.left)&&a(s.right)};const Noe=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:mn;return yf(e,n)},Soe=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,Coe=(e,t,n)=>n(t)(e),LN=({target:e,destination:t,viewport:n,withDroppableDisplacement:a,isVisibleThroughFrameFn:s})=>{const o=a?Noe(e,t):e;return Soe(o,t,s)&&Coe(o,n,s)},koe=e=>LN({...e,isVisibleThroughFrameFn:YR}),JR=e=>LN({...e,isVisibleThroughFrameFn:joe}),Poe=e=>LN({...e,isVisibleThroughFrameFn:woe(e.destination.axis)}),Eoe=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:a,visible:s}=t;if(a[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function Aoe(e,t){const n=e.page.marginBox,a={top:t.point.y,right:0,bottom:0,left:t.point.x};return ls(TN(n,a))}function Fu({afterDragging:e,destination:t,displacedBy:n,viewport:a,forceShouldAnimate:s,last:o}){return e.reduce(function(c,f){const h=Aoe(f,n),u=f.descriptor.id;if(c.all.push(u),!koe({target:h,destination:t,viewport:a,withDroppableDisplacement:!0}))return c.invisible[f.descriptor.id]=!0,c;const p=Eoe(u,o,s),v={draggableId:u,shouldAnimate:p};return c.visible[u]=v,c},{all:[],visible:{},invisible:{}})}function Ioe(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function EI({insideDestination:e,inHomeList:t,displacedBy:n,destination:a}){const s=Ioe(e,{inHomeList:t});return{displaced:$u,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:s}}}}function Cp({draggable:e,insideDestination:t,destination:n,viewport:a,displacedBy:s,last:o,index:l,forceShouldAnimate:c}){const f=rd(e,n);if(l==null)return EI({insideDestination:t,inHomeList:f,displacedBy:s,destination:n});const h=t.find(j=>j.descriptor.index===l);if(!h)return EI({insideDestination:t,inHomeList:f,displacedBy:s,destination:n});const u=Lg(e,t),m=t.indexOf(h),p=u.slice(m);return{displaced:Fu({afterDragging:p,destination:n,displacedBy:s,last:o,viewport:a.frame,forceShouldAnimate:c}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function gi(e,t){return!!t.effected[e]}var Doe=({isMovingForward:e,destination:t,draggables:n,combine:a,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=a.draggableId,c=n[o].descriptor.index;return gi(o,s)?e?c:c-1:e?c+1:c},Ooe=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:a})=>{if(!n.length)return null;const s=a.index,o=e?s+1:s-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,f=t?c:c+1;return o<l||o>f?null:o},Moe=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:a,destination:s,insideDestination:o,previousImpact:l,viewport:c,afterCritical:f})=>{const h=l.at;if(h||Je(),h.type==="REORDER"){const m=Ooe({isMovingForward:e,isInHomeList:t,location:h.destination,insideDestination:o});return m==null?null:Cp({draggable:n,insideDestination:o,destination:s,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:m})}const u=Doe({isMovingForward:e,destination:s,displaced:l.displaced,draggables:a,combine:h.combine,afterCritical:f});return u==null?null:Cp({draggable:n,insideDestination:o,destination:s,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})},Toe=({displaced:e,afterCritical:t,combineWith:n,displacedBy:a})=>{const s=!!(e.visible[n]||e.invisible[n]);return gi(n,t)?s?mn:ed(a.point):s?a.point:mn},_oe=({afterCritical:e,impact:t,draggables:n})=>{const a=Fg(t);a||Je();const s=a.draggableId,o=n[s].page.borderBox.center,l=Toe({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return Nn(o,l)};const QR=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Roe=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,zN=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,AI=({axis:e,moveRelativeTo:t,isMoving:n})=>bl(e.line,t.marginBox[e.end]+QR(e,n),zN(e,t.marginBox,n)),II=({axis:e,moveRelativeTo:t,isMoving:n})=>bl(e.line,t.marginBox[e.start]-Roe(e,n),zN(e,t.marginBox,n)),$oe=({axis:e,moveInto:t,isMoving:n})=>bl(e.line,t.contentBox[e.start]+QR(e,n),zN(e,t.contentBox,n));var Foe=({impact:e,draggable:t,draggables:n,droppable:a,afterCritical:s})=>{const o=td(a.descriptor.id,n),l=t.page,c=a.axis;if(!o.length)return $oe({axis:c,moveInto:a.page,isMoving:l});const{displaced:f,displacedBy:h}=e,u=f.all[0];if(u){const p=n[u];if(gi(u,s))return II({axis:c,moveRelativeTo:p.page,isMoving:l});const v=bp(p.page,h.point);return II({axis:c,moveRelativeTo:v,isMoving:l})}const m=o[o.length-1];if(m.descriptor.id===t.descriptor.id)return l.borderBox.center;if(gi(m.descriptor.id,s)){const p=bp(m.page,ed(s.displacedBy.point));return AI({axis:c,moveRelativeTo:p,isMoving:l})}return AI({axis:c,moveRelativeTo:m.page,isMoving:l})},uj=(e,t)=>{const n=e.frame;return n?Nn(t,n.scroll.diff.displacement):t};const Loe=({impact:e,draggable:t,droppable:n,draggables:a,afterCritical:s})=>{const o=t.page.borderBox.center,l=e.at;return!n||!l?o:l.type==="REORDER"?Foe({impact:e,draggable:t,draggables:a,droppable:n,afterCritical:s}):_oe({impact:e,draggables:a,afterCritical:s})};var zg=e=>{const t=Loe(e),n=e.droppable;return n?uj(n,t):t},ZR=(e,t)=>{const n=ba(t,e.scroll.initial),a=ed(n);return{frame:ls({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:a}}}};function DI(e,t){return e.map(n=>t[n])}function zoe(e,t){for(let n=0;n<t.length;n++){const a=t[n].visible[e];if(a)return a}return null}var Boe=({impact:e,viewport:t,destination:n,draggables:a,maxScrollChange:s})=>{const o=ZR(t,Nn(t.scroll.current,s)),l=n.frame?RN(n,Nn(n.frame.scroll.current,s)):n,c=e.displaced,f=Fu({afterDragging:DI(c.all,a),destination:n,displacedBy:e.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),h=Fu({afterDragging:DI(c.all,a),destination:l,displacedBy:e.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),u={},m={},p=[c,f,h];return c.all.forEach(j=>{const y=zoe(j,p);if(y){m[j]=y;return}u[j]=!0}),{...e,displaced:{all:c.all,invisible:u,visible:m}}},Uoe=(e,t)=>Nn(e.scroll.diff.displacement,t),BN=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const a=Uoe(n,e),s=ba(a,t.page.borderBox.center);return Nn(t.client.borderBox.center,s)},e$=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:a,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const l=ba(n,e.page.borderBox.center),f={target:yf(e.page.borderBox,l),destination:t,withDroppableDisplacement:s,viewport:a};return o?Poe(f):JR(f)},Voe=({isMovingForward:e,draggable:t,destination:n,draggables:a,previousImpact:s,viewport:o,previousPageBorderBoxCenter:l,previousClientSelection:c,afterCritical:f})=>{if(!n.isEnabled)return null;const h=td(n.descriptor.id,a),u=rd(t,n),m=yoe({isMovingForward:e,draggable:t,destination:n,insideDestination:h,previousImpact:s})||Moe({isMovingForward:e,isInHomeList:u,draggable:t,draggables:a,destination:n,insideDestination:h,previousImpact:s,viewport:o,afterCritical:f});if(!m)return null;const p=zg({impact:m,draggable:t,droppable:n,draggables:a,afterCritical:f});if(e$({draggable:t,destination:n,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:BN({pageBorderBoxCenter:p,draggable:t,viewport:o}),impact:m,scrollJumpRequest:null};const j=ba(p,l),y=Boe({impact:m,viewport:o,destination:n,draggables:a,maxScrollChange:j});return{clientSelection:c,impact:y,scrollJumpRequest:j}};const Un=e=>{const t=e.subject.active;return t||Je(),t};var qoe=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:a,viewport:s})=>{const o=n.subject.active;if(!o)return null;const l=n.axis,c=Va(o[l.start],o[l.end]),f=$g(a).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>YR(s.frame)(Un(u))).filter(u=>{const m=Un(u);return e?o[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<o[l.crossAxisStart]}).filter(u=>{const m=Un(u),p=Va(m[l.start],m[l.end]);return c(m[l.start])||c(m[l.end])||p(o[l.start])||p(o[l.end])}).sort((u,m)=>{const p=Un(u)[l.crossAxisStart],v=Un(m)[l.crossAxisStart];return e?p-v:v-p}).filter((u,m,p)=>Un(u)[l.crossAxisStart]===Un(p[0])[l.crossAxisStart]);if(!f.length)return null;if(f.length===1)return f[0];const h=f.filter(u=>Va(Un(u)[l.start],Un(u)[l.end])(t[l.line]));return h.length===1?h[0]:h.length>1?h.sort((u,m)=>Un(u)[l.start]-Un(m)[l.start])[0]:f.sort((u,m)=>{const p=kI(t,PI(Un(u))),v=kI(t,PI(Un(m)));return p!==v?p-v:Un(u)[l.start]-Un(m)[l.start]})[0]};const OI=(e,t)=>{const n=e.page.borderBox.center;return gi(e.descriptor.id,t)?ba(n,t.displacedBy.point):n},Goe=(e,t)=>{const n=e.page.borderBox;return gi(e.descriptor.id,t)?yf(n,ed(t.displacedBy.point)):n};var Hoe=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:a,afterCritical:s})=>a.filter(l=>JR({target:Goe(l,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((l,c)=>{const f=Ru(e,uj(n,OI(l,s))),h=Ru(e,uj(n,OI(c,s)));return f<h?-1:h<f?1:l.descriptor.index-c.descriptor.index})[0]||null,bf=hn(function(t,n){const a=n[t.line];return{value:a,point:bl(t.line,a)}});const Woe=(e,t,n)=>{const a=e.axis;if(e.descriptor.mode==="virtual")return bl(a.line,t[a.line]);const s=e.subject.page.contentBox[a.size],f=td(e.descriptor.id,n).reduce((h,u)=>h+u.client.marginBox[a.size],0)+t[a.line]-s;return f<=0?null:bl(a.line,f)},t$=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),r$=(e,t,n)=>{const a=e.frame;rd(t,e)&&Je(),e.subject.withPlaceholder&&Je();const s=bf(e.axis,t.displaceBy).point,o=Woe(e,s,n),l={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!a){const u=Mc({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return{...e,subject:u}}const c=o?Nn(a.scroll.max,o):a.scroll.max,f=t$(a,c),h=Mc({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:f});return{...e,subject:h,frame:f}},Koe=e=>{const t=e.subject.withPlaceholder;t||Je();const n=e.frame;if(!n){const l=Mc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:l}}const a=t.oldFrameMaxScroll;a||Je();const s=t$(n,a),o=Mc({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var Yoe=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:a,draggables:s,destination:o,viewport:l,afterCritical:c})=>{if(!t){if(n.length)return null;const m={displaced:$u,displacedBy:KR,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},p=zg({impact:m,draggable:a,droppable:o,draggables:s,afterCritical:c}),v=rd(a,o)?o:r$(o,a,s);return e$({draggable:a,destination:v,newPageBorderBoxCenter:p,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const f=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],h=(()=>{const m=t.descriptor.index;return t.descriptor.id===a.descriptor.id||f?m:m+1})(),u=bf(o.axis,a.displaceBy);return Cp({draggable:a,insideDestination:n,destination:o,viewport:l,displacedBy:u,last:$u,index:h})},Xoe=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:a,draggables:s,droppables:o,viewport:l,afterCritical:c})=>{const f=qoe({isMovingForward:e,pageBorderBoxCenter:t,source:a,droppables:o,viewport:l});if(!f)return null;const h=td(f.descriptor.id,s),u=Hoe({pageBorderBoxCenter:t,viewport:l,destination:f,insideDestination:h,afterCritical:c}),m=Yoe({previousPageBorderBoxCenter:t,destination:f,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:h,viewport:l,afterCritical:c});if(!m)return null;const p=zg({impact:m,draggable:n,droppable:f,draggables:s,afterCritical:c});return{clientSelection:BN({pageBorderBoxCenter:p,draggable:n,viewport:l}),impact:m,scrollJumpRequest:null}},Sa=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Joe=(e,t)=>{const n=Sa(e);return n?t[n]:null};var Qoe=({state:e,type:t})=>{const n=Joe(e.impact,e.dimensions.droppables),a=!!n,s=e.dimensions.droppables[e.critical.droppable.id],o=n||s,l=o.axis.direction,c=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!a)return null;const f=t==="MOVE_DOWN"||t==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:m,droppables:p}=e.dimensions;return c?Voe({isMovingForward:f,previousPageBorderBoxCenter:u,draggable:h,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Xoe({isMovingForward:f,previousPageBorderBoxCenter:u,draggable:h,isOver:o,draggables:m,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function Xi(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function n$(e){const t=Va(e.top,e.bottom),n=Va(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function Zoe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function eie({pageBorderBox:e,draggable:t,candidates:n}){const a=t.page.borderBox.center,s=n.map(o=>{const l=o.axis,c=bl(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Ru(a,c)}}).sort((o,l)=>l.distance-o.distance);return s[0]?s[0].id:null}function tie({pageBorderBox:e,draggable:t,droppables:n}){const a=$g(n).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!Zoe(e,o))return!1;if(n$(o)(e.center))return!0;const l=s.axis,c=o.center[l.crossAxisLine],f=e[l.crossAxisStart],h=e[l.crossAxisEnd],u=Va(o[l.crossAxisStart],o[l.crossAxisEnd]),m=u(f),p=u(h);return!m&&!p?!0:m?f<c:h>c});return a.length?a.length===1?a[0].descriptor.id:eie({pageBorderBox:e,draggable:t,candidates:a}):null}const a$=(e,t)=>ls(yf(e,t));var rie=(e,t)=>{const n=e.frame;return n?a$(t,n.scroll.diff.value):t};function s$({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function nie({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var aie=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:a,last:s,viewport:o,afterCritical:l})=>{const c=n.axis,f=bf(n.axis,t.displaceBy),h=f.value,u=e[c.start],m=e[c.end],v=Lg(t,a).find(y=>{const b=y.descriptor.id,N=y.page.borderBox.center[c.line],k=gi(b,l),D=s$({displaced:s,id:b});return k?D?m<=N:u<N-h:D?m<=N+h:u<N})||null,j=nie({draggable:t,closest:v,inHomeList:rd(t,n)});return Cp({draggable:t,insideDestination:a,destination:n,viewport:o,last:s,displacedBy:f,index:j})};const sie=4;var oie=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:a,insideDestination:s,afterCritical:o})=>{if(!a.isCombineEnabled)return null;const l=a.axis,c=bf(a.axis,e.displaceBy),f=c.value,h=t[l.start],u=t[l.end],p=Lg(e,s).find(j=>{const y=j.descriptor.id,b=j.page.borderBox,k=b[l.size]/sie,D=gi(y,o),E=s$({displaced:n.displaced,id:y});return D?E?u>b[l.start]+k&&u<b[l.end]-k:h>b[l.start]-f+k&&h<b[l.end]-f-k:E?u>b[l.start]+f+k&&u<b[l.end]+f-k:h>b[l.start]+k&&h<b[l.end]-k});return p?{displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}}:null},o$=({pageOffset:e,draggable:t,draggables:n,droppables:a,previousImpact:s,viewport:o,afterCritical:l})=>{const c=a$(t.page.borderBox,e),f=tie({pageBorderBox:c,draggable:t,droppables:a});if(!f)return boe;const h=a[f],u=td(h.descriptor.id,n),m=rie(h,c);return oie({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:s,destination:h,insideDestination:u,afterCritical:l})||aie({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:h,insideDestination:u,last:s.displaced,viewport:o,afterCritical:l})},UN=(e,t)=>({...e,[t.descriptor.id]:t});const iie=({previousImpact:e,impact:t,droppables:n})=>{const a=Sa(e),s=Sa(t);if(!a||a===s)return n;const o=n[a];if(!o.subject.withPlaceholder)return n;const l=Koe(o);return UN(n,l)};var lie=({draggable:e,draggables:t,droppables:n,previousImpact:a,impact:s})=>{const o=iie({previousImpact:a,impact:s,droppables:n}),l=Sa(s);if(!l)return o;const c=n[l];if(rd(e,c)||c.subject.withPlaceholder)return o;const f=r$(c,e,t);return UN(o,f)},fu=({state:e,clientSelection:t,dimensions:n,viewport:a,impact:s,scrollJumpRequest:o})=>{const l=a||e.viewport,c=n||e.dimensions,f=t||e.current.client.selection,h=ba(f,e.initial.client.selection),u={offset:h,selection:f,borderBoxCenter:Nn(e.initial.client.borderBoxCenter,h)},m={selection:Nn(u.selection,l.scroll.current),borderBoxCenter:Nn(u.borderBoxCenter,l.scroll.current),offset:Nn(u.offset,l.scroll.diff.value)},p={client:u,page:m};if(e.phase==="COLLECTING")return{...e,dimensions:c,viewport:l,current:p};const v=c.draggables[e.critical.draggable.id],j=s||o$({pageOffset:m.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),y=lie({draggable:v,impact:j,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables});return{...e,current:p,dimensions:{draggables:c.draggables,droppables:y},impact:j,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function cie(e,t){return e.map(n=>t[n])}var i$=({impact:e,viewport:t,draggables:n,destination:a,forceShouldAnimate:s})=>{const o=e.displaced,l=cie(o.all,n),c=Fu({afterDragging:l,destination:a,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:c}},l$=({impact:e,draggable:t,droppable:n,draggables:a,viewport:s,afterCritical:o})=>{const l=zg({impact:e,draggable:t,draggables:a,droppable:n,afterCritical:o});return BN({pageBorderBoxCenter:l,draggable:t,viewport:s})},c$=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Je();const a=e.impact,s=n||e.viewport,o=t||e.dimensions,{draggables:l,droppables:c}=o,f=l[e.critical.draggable.id],h=Sa(a);h||Je();const u=c[h],m=i$({impact:a,viewport:s,destination:u,draggables:l}),p=l$({impact:m,draggable:f,droppable:u,draggables:l,viewport:s,afterCritical:e.afterCritical});return fu({impact:m,clientSelection:p,state:e,dimensions:o,viewport:s})},die=e=>({index:e.index,droppableId:e.droppableId}),d$=({draggable:e,home:t,draggables:n,viewport:a})=>{const s=bf(t.axis,e.displaceBy),o=td(t.descriptor.id,n),l=o.indexOf(e);l===-1&&Je();const c=o.slice(l+1),f=c.reduce((p,v)=>(p[v.descriptor.id]=!0,p),{}),h={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:f};return{impact:{displaced:Fu({afterDragging:c,destination:t,displacedBy:s,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:die(e.descriptor)}},afterCritical:h}},uie=(e,t)=>({draggables:e.draggables,droppables:UN(e.droppables,t)}),fie=({draggable:e,offset:t,initialWindowScroll:n})=>{const a=bp(e.client,t),s=jp(a,n);return{...e,placeholder:{...e.placeholder,client:a},client:a,page:s}},hie=e=>{const t=e.frame;return t||Je(),t},mie=({additions:e,updatedDroppables:t,viewport:n})=>{const a=n.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,l=t[o],f=hie(l).scroll.diff.value,h=Nn(a,f);return fie({draggable:s,offset:h,initialWindowScroll:n.scroll.initial})})},pie=({state:e,published:t})=>{const n=t.modified.map(N=>{const k=e.dimensions.droppables[N.droppableId];return RN(k,N.scroll)}),a={...e.dimensions.droppables,...HR(n)},s=WR(mie({additions:t.additions,updatedDroppables:a,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(N=>{delete o[N]});const l={droppables:a,draggables:o},c=Sa(e.impact),f=c?l.droppables[c]:null,h=l.draggables[e.critical.draggable.id],u=l.droppables[e.critical.droppable.id],{impact:m,afterCritical:p}=d$({draggable:h,home:u,draggables:o,viewport:e.viewport}),v=f&&f.isCombineEnabled?e.impact:m,j=o$({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:e.viewport,afterCritical:p}),y={...e,phase:"DRAGGING",impact:j,onLiftImpact:m,dimensions:l,afterCritical:p,forceShouldAnimate:!1};return e.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const fj=e=>e.movementMode==="SNAP",Iy=(e,t,n)=>{const a=uie(e.dimensions,t);return!fj(e)||n?fu({state:e,dimensions:a}):c$({state:e,dimensions:a})};function Dy(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const MI={phase:"IDLE",completed:null,shouldFlush:!1};var gie=(e=MI,t)=>{if(t.type==="FLUSH")return{...MI,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Je();const{critical:n,clientSelection:a,viewport:s,dimensions:o,movementMode:l}=t.payload,c=o.draggables[n.draggable.id],f=o.droppables[n.droppable.id],h={selection:a,borderBoxCenter:c.client.borderBox.center,offset:mn},u={client:h,page:{selection:Nn(h.selection,s.scroll.initial),borderBoxCenter:Nn(h.selection,s.scroll.initial),offset:Nn(h.selection,s.scroll.diff.value)}},m=$g(o.droppables).every(y=>!y.isFixedOnPage),{impact:p,afterCritical:v}=d$({draggable:c,home:f,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:o,initial:u,current:u,isWindowScrollAllowed:m,impact:p,afterCritical:v,onLiftImpact:p,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Je(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Je(),pie({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Xi(e)||Je();const{client:n}=t.payload;return ii(n,e.current.client.selection)?e:fu({state:e,clientSelection:n,impact:fj(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Dy(e);Xi(e)||Je();const{id:n,newScroll:a}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const o=RN(s,a);return Iy(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Xi(e)||Je();const{id:n,isEnabled:a}=t.payload,s=e.dimensions.droppables[n];s||Je(),s.isEnabled===a&&Je();const o={...s,isEnabled:a};return Iy(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Xi(e)||Je();const{id:n,isCombineEnabled:a}=t.payload,s=e.dimensions.droppables[n];s||Je(),s.isCombineEnabled===a&&Je();const o={...s,isCombineEnabled:a};return Iy(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Xi(e)||Je(),e.isWindowScrollAllowed||Je();const n=t.payload.newScroll;if(ii(e.viewport.scroll.current,n))return Dy(e);const a=ZR(e.viewport,n);return fj(e)?c$({state:e,viewport:a}):fu({state:e,viewport:a})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Xi(e))return e;const n=t.payload.maxScroll;if(ii(n,e.viewport.scroll.max))return e;const a={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:a}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Je();const n=Qoe({state:e,type:t.type});return n?fu({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Je(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:a,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Je(),{phase:"DROP_ANIMATING",completed:n,dropDuration:a,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function tr(e,t){return e instanceof Object&&"type"in e&&e.type===t}const xie=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),vie=e=>({type:"LIFT",payload:e}),yie=e=>({type:"INITIAL_PUBLISH",payload:e}),bie=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),jie=()=>({type:"COLLECTION_STARTING",payload:null}),wie=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Nie=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Sie=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),u$=e=>({type:"MOVE",payload:e}),Cie=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),kie=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Pie=()=>({type:"MOVE_UP",payload:null}),Eie=()=>({type:"MOVE_DOWN",payload:null}),Aie=()=>({type:"MOVE_RIGHT",payload:null}),Iie=()=>({type:"MOVE_LEFT",payload:null}),VN=()=>({type:"FLUSH",payload:null}),Die=e=>({type:"DROP_ANIMATE",payload:e}),qN=e=>({type:"DROP_COMPLETE",payload:e}),f$=e=>({type:"DROP",payload:e}),Oie=e=>({type:"DROP_PENDING",payload:e}),h$=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Mie=e=>({getState:t,dispatch:n})=>a=>s=>{if(!tr(s,"LIFT")){a(s);return}const{id:o,clientSelection:l,movementMode:c}=s.payload,f=t();f.phase==="DROP_ANIMATING"&&n(qN({completed:f.completed})),t().phase!=="IDLE"&&Je(),n(VN()),n(xie({draggableId:o,movementMode:c}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:m,dimensions:p,viewport:v}=e.startPublishing(u);n(yie({critical:m,dimensions:p,clientSelection:l,movementMode:c,viewport:v}))},Tie=e=>()=>t=>n=>{tr(n,"INITIAL_PUBLISH")&&e.dragging(),tr(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(tr(n,"FLUSH")||tr(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const GN={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Lu={opacity:{drop:0,combining:.7},scale:{drop:.75}},m$={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Hi="".concat(m$.outOfTheWay,"s ").concat(GN.outOfTheWay),hu={fluid:"opacity ".concat(Hi),snap:"transform ".concat(Hi,", opacity ").concat(Hi),drop:e=>{const t="".concat(e,"s ").concat(GN.drop);return"transform ".concat(t,", opacity ").concat(t)},outOfTheWay:"transform ".concat(Hi),placeholder:"height ".concat(Hi,", width ").concat(Hi,", margin ").concat(Hi)},TI=e=>ii(e,mn)?void 0:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),hj={moveTo:TI,drop:(e,t)=>{const n=TI(e);if(n)return t?"".concat(n," scale(").concat(Lu.scale.drop,")"):n}},{minDropTime:mj,maxDropTime:p$}=m$,_ie=p$-mj,_I=1500,Rie=.6;var $ie=({current:e,destination:t,reason:n})=>{const a=Ru(e,t);if(a<=0)return mj;if(a>=_I)return p$;const s=a/_I,o=mj+_ie*s,l=n==="CANCEL"?o*Rie:o;return Number(l.toFixed(2))},Fie=({impact:e,draggable:t,dimensions:n,viewport:a,afterCritical:s})=>{const{draggables:o,droppables:l}=n,c=Sa(e),f=c?l[c]:null,h=l[t.descriptor.droppableId],u=l$({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:f||h,viewport:a});return ba(u,t.client.borderBox.center)},Lie=({draggables:e,reason:t,lastImpact:n,home:a,viewport:s,onLiftImpact:o})=>!n.at||t!=="DROP"?{impact:i$({draggables:e,impact:o,destination:a,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:$u},didDropInsideDroppable:!0};const zie=({getState:e,dispatch:t})=>n=>a=>{if(!tr(a,"DROP")){n(a);return}const s=e(),o=a.payload.reason;if(s.phase==="COLLECTING"){t(Oie({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&Je(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||Je();const c=s.critical,f=s.dimensions,h=f.draggables[s.critical.draggable.id],{impact:u,didDropInsideDroppable:m}=Lie({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),p=m?$N(u):null,v=m?Fg(u):null,j={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:h.descriptor.id,type:h.descriptor.type,source:j,reason:o,mode:s.movementMode,destination:p,combine:v},b=Fie({impact:u,draggable:h,dimensions:f,viewport:s.viewport,afterCritical:s.afterCritical}),N={critical:s.critical,afterCritical:s.afterCritical,result:y,impact:u};if(!(!ii(s.current.client.offset,b)||!!y.combine)){t(qN({completed:N}));return}const D=$ie({current:s.current.client.offset,destination:b,reason:o});t(Die({newHomeClientOffset:b,dropDuration:D,completed:N}))};var g$=()=>({x:window.pageXOffset,y:window.pageYOffset});function Bie(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Uie({onWindowScroll:e}){function t(){e(g$())}const n=_u(t),a=Bie(n);let s=oi;function o(){return s!==oi}function l(){o()&&Je(),s=Ua(window,[a])}function c(){o()||Je(),n.cancel(),s(),s=oi}return{start:l,stop:c,isActive:o}}const Vie=e=>tr(e,"DROP_COMPLETE")||tr(e,"DROP_ANIMATE")||tr(e,"FLUSH"),qie=e=>{const t=Uie({onWindowScroll:n=>{e.dispatch(Cie({newScroll:n}))}});return n=>a=>{!t.isActive()&&tr(a,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&Vie(a)&&t.stop(),n(a)}};var Gie=e=>{let t=!1,n=!1;const a=setTimeout(()=>{n=!0}),s=o=>{t||n||(t=!0,e(o),clearTimeout(a))};return s.wasCalled=()=>t,s},Hie=()=>{const e=[],t=s=>{const o=e.findIndex(c=>c.timerId===s);o===-1&&Je();const[l]=e.splice(o,1);l.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),l={timerId:o,callback:s};e.push(l)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const Wie=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Kie=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Yie=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,a=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&a},nu=(e,t)=>{t()},tm=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Oy(e,t,n,a){if(!e){n(a(t));return}const s=Gie(n);e(t,{announce:s}),s.wasCalled()||n(a(t))}var Xie=(e,t)=>{const n=Hie();let a=null;const s=(m,p)=>{a&&Je(),nu("onBeforeCapture",()=>{const v=e().onBeforeCapture;v&&v({draggableId:m,mode:p})})},o=(m,p)=>{a&&Je(),nu("onBeforeDragStart",()=>{const v=e().onBeforeDragStart;v&&v(tm(m,p))})},l=(m,p)=>{a&&Je();const v=tm(m,p);a={mode:p,lastCritical:m,lastLocation:v.source,lastCombine:null},n.add(()=>{nu("onDragStart",()=>Oy(e().onDragStart,v,t,um.onDragStart))})},c=(m,p)=>{const v=$N(p),j=Fg(p);a||Je();const y=!Yie(m,a.lastCritical);y&&(a.lastCritical=m);const b=!Wie(a.lastLocation,v);b&&(a.lastLocation=v);const N=!Kie(a.lastCombine,j);if(N&&(a.lastCombine=j),!y&&!b&&!N)return;const k={...tm(m,a.mode),combine:j,destination:v};n.add(()=>{nu("onDragUpdate",()=>Oy(e().onDragUpdate,k,t,um.onDragUpdate))})},f=()=>{a||Je(),n.flush()},h=m=>{a||Je(),a=null,nu("onDragEnd",()=>Oy(e().onDragEnd,m,t,um.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:l,update:c,flush:f,drop:h,abort:()=>{if(!a)return;const m={...tm(a.lastCritical,a.mode),combine:null,destination:null,reason:"CANCEL"};h(m)}}},Jie=(e,t)=>{const n=Xie(e,t);return a=>s=>o=>{if(tr(o,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(tr(o,"INITIAL_PUBLISH")){const c=o.payload.critical;n.beforeStart(c,o.payload.movementMode),s(o),n.start(c,o.payload.movementMode);return}if(tr(o,"DROP_COMPLETE")){const c=o.payload.completed.result;n.flush(),s(o),n.drop(c);return}if(s(o),tr(o,"FLUSH")){n.abort();return}const l=a.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}};const Qie=e=>t=>n=>{if(!tr(n,"DROP_ANIMATION_FINISHED")){t(n);return}const a=e.getState();a.phase!=="DROP_ANIMATING"&&Je(),e.dispatch(qN({completed:a.completed}))},Zie=e=>{let t=null,n=null;function a(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>o=>{if((tr(o,"FLUSH")||tr(o,"DROP_COMPLETE")||tr(o,"DROP_ANIMATION_FINISHED"))&&a(),s(o),!tr(o,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(h$())}};n=requestAnimationFrame(()=>{n=null,t=Ua(window,[l])})}};var ele=e=>()=>t=>n=>{(tr(n,"DROP_COMPLETE")||tr(n,"FLUSH")||tr(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},tle=e=>{let t=!1;return()=>n=>a=>{if(tr(a,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(a.payload.critical.draggable.id),n(a),e.tryRestoreFocusRecorded();return}if(n(a),!!t){if(tr(a,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(tr(a,"DROP_COMPLETE")){t=!1;const s=a.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const rle=e=>tr(e,"DROP_COMPLETE")||tr(e,"DROP_ANIMATE")||tr(e,"FLUSH");var nle=e=>t=>n=>a=>{if(rle(a)){e.stop(),n(a);return}if(tr(a,"INITIAL_PUBLISH")){n(a);const s=t.getState();s.phase!=="DRAGGING"&&Je(),e.start(s);return}n(a),e.scroll(t.getState())};const ale=e=>t=>n=>{if(t(n),!tr(n,"PUBLISH_WHILE_DRAGGING"))return;const a=e.getState();a.phase==="DROP_PENDING"&&(a.isWaiting||e.dispatch(f$({reason:a.reason})))},sle=bu;var ole=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:a,announce:s,autoScroller:o})=>Zj(gie,sle(c4(Tie(n),ele(e),Mie(e),zie,Qie,Zie,ale,nle(o),qie,tle(t),Jie(a,s))));const My=()=>({additions:{},removals:{},modified:{}});function ile({registry:e,callbacks:t}){let n=My(),a=null;const s=()=>{a||(t.collectionStarting(),a=requestAnimationFrame(()=>{a=null;const{additions:f,removals:h,modified:u}=n,m=Object.keys(f).map(j=>e.draggable.getById(j).getDimension(mn)).sort((j,y)=>j.descriptor.index-y.descriptor.index),p=Object.keys(u).map(j=>{const b=e.droppable.getById(j).callbacks.getScrollWhileDragging();return{droppableId:j,scroll:b}}),v={additions:m,removals:Object.keys(h),modified:p};n=My(),t.publish(v)}))};return{add:f=>{const h=f.descriptor.id;n.additions[h]=f,n.modified[f.descriptor.droppableId]=!0,n.removals[h]&&delete n.removals[h],s()},remove:f=>{const h=f.descriptor;n.removals[h.id]=!0,n.modified[h.droppableId]=!0,n.additions[h.id]&&delete n.additions[h.id],s()},stop:()=>{a&&(cancelAnimationFrame(a),a=null,n=My())}}}var x$=({scrollHeight:e,scrollWidth:t,height:n,width:a})=>{const s=ba({x:t,y:e},{x:a,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},v$=()=>{const e=document.documentElement;return e||Je(),e},y$=()=>{const e=v$();return x$({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},lle=()=>{const e=g$(),t=y$(),n=e.y,a=e.x,s=v$(),o=s.clientWidth,l=s.clientHeight,c=a+o,f=n+l;return{frame:ls({top:n,left:a,right:c,bottom:f}),scroll:{initial:e,current:e,max:t,diff:{value:mn,displacement:mn}}}},cle=({critical:e,scrollOptions:t,registry:n})=>{const a=lle(),s=a.scroll.current,o=e.droppable,l=n.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(s,t)),c=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(s));return{dimensions:{draggables:WR(c),droppables:HR(l)},critical:e,viewport:a}};function RI(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var dle=(e,t)=>{let n=null;const a=ile({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(p,v)=>{e.droppable.exists(p)||Je(),n&&t.updateDroppableIsEnabled({id:p,isEnabled:v})},o=(p,v)=>{n&&(e.droppable.exists(p)||Je(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:v}))},l=(p,v)=>{n&&(e.droppable.exists(p)||Je(),t.updateDroppableScroll({id:p,newScroll:v}))},c=(p,v)=>{n&&e.droppable.getById(p).callbacks.scroll(v)},f=()=>{if(!n)return;a.stop();const p=n.critical.droppable;e.droppable.getAllByType(p.type).forEach(v=>v.callbacks.dragStopped()),n.unsubscribe(),n=null},h=p=>{n||Je();const v=n.critical.draggable;p.type==="ADDITION"&&RI(e,v,p.value)&&a.add(p.value),p.type==="REMOVAL"&&RI(e,v,p.value)&&a.remove(p.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:c,updateDroppableScroll:l,startPublishing:p=>{n&&Je();const v=e.draggable.getById(p.draggableId),j=e.droppable.getById(v.descriptor.droppableId),y={draggable:v.descriptor,droppable:j.descriptor},b=e.subscribe(h);return n={critical:y,unsubscribe:b},cle({critical:y,registry:e,scrollOptions:p.scrollOptions})},stopPublishing:f}},b$=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",ule=e=>{window.scrollBy(e.x,e.y)};const fle=hn(e=>$g(e).filter(t=>!(!t.isEnabled||!t.frame))),hle=(e,t)=>fle(t).find(a=>(a.frame||Je(),n$(a.frame.pageMarginBox)(e)))||null;var mle=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return hle(e,n)};const zu={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var ple=(e,t,n=()=>zu)=>{const a=n(),s=e[t.size]*a.startFromPercentage,o=e[t.size]*a.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},j$=({startOfRange:e,endOfRange:t,current:n})=>{const a=t-e;return a===0?0:(n-e)/a},HN=1,gle=(e,t,n=()=>zu)=>{const a=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return a.maxPixelScroll;if(e===t.startScrollingFrom)return HN;const o=1-j$({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),l=a.maxPixelScroll*a.ease(o);return Math.ceil(l)},xle=(e,t,n)=>{const a=n(),s=a.durationDampening.accelerateAt,o=a.durationDampening.stopDampeningAt,l=t,c=o,h=Date.now()-l;if(h>=o)return e;if(h<s)return HN;const u=j$({startOfRange:s,endOfRange:c,current:h}),m=e*a.ease(u);return Math.ceil(m)},$I=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const o=gle(e,t,s);return o===0?0:a?Math.max(xle(o,n,s),HN):o},FI=({container:e,distanceToEdges:t,dragStartTime:n,axis:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=ple(e,a,o);return t[a.end]<t[a.start]?$I({distanceToEdge:t[a.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*$I({distanceToEdge:t[a.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},vle=({container:e,subject:t,proposedScroll:n})=>{const a=t.height>e.height,s=t.width>e.width;return!s&&!a?n:s&&a?null:{x:s?0:n.x,y:a?0:n.y}};const yle=GR(e=>e===0?0:e);var w$=({dragStartTime:e,container:t,subject:n,center:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},c=FI({container:t,distanceToEdges:l,dragStartTime:e,axis:FN,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),f=FI({container:t,distanceToEdges:l,dragStartTime:e,axis:XR,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),h=yle({x:f,y:c});if(ii(h,mn))return null;const u=vle({container:t,subject:n,proposedScroll:h});return u?ii(u,mn)?null:u:null};const ble=GR(e=>e===0?0:e>0?1:-1),WN=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:a})=>{const s=Nn(t,a),o={x:e(s.x,n.x),y:e(s.y,n.y)};return ii(o,mn)?null:o}})(),N$=({max:e,current:t,change:n})=>{const a={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=ble(n),o=WN({max:a,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},KN=(e,t)=>N$({current:e.scroll.current,max:e.scroll.max,change:t}),jle=(e,t)=>{if(!KN(e,t))return null;const n=e.scroll.max,a=e.scroll.current;return WN({current:a,max:n,change:t})},YN=(e,t)=>{const n=e.frame;return n?N$({current:n.scroll.current,max:n.scroll.max,change:t}):!1},wle=(e,t)=>{const n=e.frame;return!n||!YN(e,t)?null:WN({current:n.scroll.current,max:n.scroll.max,change:t})};var Nle=({viewport:e,subject:t,center:n,dragStartTime:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=w$({dragStartTime:a,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return l&&KN(e,l)?l:null},Sle=({droppable:e,subject:t,center:n,dragStartTime:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=e.frame;if(!l)return null;const c=w$({dragStartTime:a,container:l.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return c&&YN(e,c)?c:null},LI=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:a,scrollDroppable:s,getAutoScrollerOptions:o})=>{const l=e.current.page.borderBoxCenter,f=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const m=e.viewport,p=Nle({dragStartTime:t,viewport:m,subject:f,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:o});if(p){a(p);return}}const h=mle({center:l,destination:Sa(e.impact),droppables:e.dimensions.droppables});if(!h)return;const u=Sle({dragStartTime:t,droppable:h,subject:f,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:o});u&&s(h.descriptor.id,u)},Cle=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>zu})=>{const a=_u(e),s=_u(t);let o=null;const l=h=>{o||Je();const{shouldUseTimeDampening:u,dragStartTime:m}=o;LI({state:h,scrollWindow:a,scrollDroppable:s,dragStartTime:m,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:h=>{o&&Je();const u=Date.now();let m=!1;const p=()=>{m=!0};LI({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),o={dragStartTime:u,shouldUseTimeDampening:m},m&&l(h)},stop:()=>{o&&(a.cancel(),s.cancel(),o=null)},scroll:l}},kle=({move:e,scrollDroppable:t,scrollWindow:n})=>{const a=(c,f)=>{const h=Nn(c.current.client.selection,f);e({client:h})},s=(c,f)=>{if(!YN(c,f))return f;const h=wle(c,f);if(!h)return t(c.descriptor.id,f),null;const u=ba(f,h);return t(c.descriptor.id,u),ba(f,u)},o=(c,f,h)=>{if(!c||!KN(f,h))return h;const u=jle(f,h);if(!u)return n(h),null;const m=ba(h,u);return n(m),ba(h,m)};return c=>{const f=c.scrollJumpRequest;if(!f)return;const h=Sa(c.impact);h||Je();const u=s(c.dimensions.droppables[h],f);if(!u)return;const m=c.viewport,p=o(c.isWindowScrollAllowed,m,u);p&&a(c,p)}},Ple=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:a})=>{const s=Cle({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:a}),o=kle({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:f=>{if(!(a().disabled||f.phase!=="DRAGGING")){if(f.movementMode==="FLUID"){s.scroll(f);return}f.scrollJumpRequest&&o(f)}},start:s.start,stop:s.stop}};const Tc="data-rfd",_c=(()=>{const e="".concat(Tc,"-drag-handle");return{base:e,draggableId:"".concat(e,"-draggable-id"),contextId:"".concat(e,"-context-id")}})(),pj=(()=>{const e="".concat(Tc,"-draggable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}})(),Ele=(()=>{const e="".concat(Tc,"-droppable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}})(),zI={contextId:"".concat(Tc,"-scroll-container-context-id")},Ale=e=>t=>"[".concat(t,'="').concat(e,'"]'),au=(e,t)=>e.map(n=>{const a=n.styles[t];return a?"".concat(n.selector," { ").concat(a," }"):""}).join(" "),Ile="pointer-events: none;";var Dle=e=>{const t=Ale(e),n=(()=>{const c="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:t(_c.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:c,dragging:Ile,dropAnimating:c}}})(),a=(()=>{const c="\n      transition: ".concat(hu.outOfTheWay,";\n    ");return{selector:t(pj.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),s={selector:t(Ele.contextId),styles:{always:"overflow-anchor: none;"}},l=[a,n,s,{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:au(l,"always"),resting:au(l,"resting"),dragging:au(l,"dragging"),dropAnimating:au(l,"dropAnimating"),userCancel:au(l,"userCancel")}};const Ca=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,Ty=()=>{const e=document.querySelector("head");return e||Je(),e},BI=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Ole(e,t){const n=Ht(()=>Dle(e),[e]),a=x.useRef(null),s=x.useRef(null),o=gt(hn(m=>{const p=s.current;p||Je(),p.textContent=m}),[]),l=gt(m=>{const p=a.current;p||Je(),p.textContent=m},[]);Ca(()=>{!a.current&&!s.current||Je();const m=BI(t),p=BI(t);return a.current=m,s.current=p,m.setAttribute("".concat(Tc,"-always"),e),p.setAttribute("".concat(Tc,"-dynamic"),e),Ty().appendChild(m),Ty().appendChild(p),l(n.always),o(n.resting),()=>{const v=j=>{const y=j.current;y||Je(),Ty().removeChild(y),j.current=null};v(a),v(s)}},[t,l,o,n.always,n.resting,e]);const c=gt(()=>o(n.dragging),[o,n.dragging]),f=gt(m=>{if(m==="DROP"){o(n.dropAnimating);return}o(n.userCancel)},[o,n.dropAnimating,n.userCancel]),h=gt(()=>{s.current&&o(n.resting)},[o,n.resting]);return Ht(()=>({dragging:c,dropping:f,resting:h}),[c,f,h])}function S$(e,t){return Array.from(e.querySelectorAll(t))}var C$=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Bg(e){return e instanceof C$(e).HTMLElement}function Mle(e,t){const n="[".concat(_c.contextId,'="').concat(e,'"]'),a=S$(document,n);if(!a.length)return null;const s=a.find(o=>o.getAttribute(_c.draggableId)===t);return!s||!Bg(s)?null:s}function Tle(e){const t=x.useRef({}),n=x.useRef(null),a=x.useRef(null),s=x.useRef(!1),o=gt(function(p,v){const j={id:p,focus:v};return t.current[p]=j,function(){const b=t.current;b[p]!==j&&delete b[p]}},[]),l=gt(function(p){const v=Mle(e,p);v&&v!==document.activeElement&&v.focus()},[e]),c=gt(function(p,v){n.current===p&&(n.current=v)},[]),f=gt(function(){a.current||s.current&&(a.current=requestAnimationFrame(()=>{a.current=null;const p=n.current;p&&l(p)}))},[l]),h=gt(function(p){n.current=null;const v=document.activeElement;v&&v.getAttribute(_c.draggableId)===p&&(n.current=p)},[]);return Ca(()=>(s.current=!0,function(){s.current=!1;const p=a.current;p&&cancelAnimationFrame(p)}),[]),Ht(()=>({register:o,tryRecordFocus:h,tryRestoreFocusRecorded:f,tryShiftRecord:c}),[o,h,f,c])}function _le(){const e={draggables:{},droppables:{}},t=[];function n(m){return t.push(m),function(){const v=t.indexOf(m);v!==-1&&t.splice(v,1)}}function a(m){t.length&&t.forEach(p=>p(m))}function s(m){return e.draggables[m]||null}function o(m){const p=s(m);return p||Je(),p}const l={register:m=>{e.draggables[m.descriptor.id]=m,a({type:"ADDITION",value:m})},update:(m,p)=>{const v=e.draggables[p.descriptor.id];v&&v.uniqueId===m.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:m=>{const p=m.descriptor.id,v=s(p);v&&m.uniqueId===v.uniqueId&&(delete e.draggables[p],e.droppables[m.descriptor.droppableId]&&a({type:"REMOVAL",value:m}))},getById:o,findById:s,exists:m=>!!s(m),getAllByType:m=>Object.values(e.draggables).filter(p=>p.descriptor.type===m)};function c(m){return e.droppables[m]||null}function f(m){const p=c(m);return p||Je(),p}const h={register:m=>{e.droppables[m.descriptor.id]=m},unregister:m=>{const p=c(m.descriptor.id);p&&m.uniqueId===p.uniqueId&&delete e.droppables[m.descriptor.id]},getById:f,findById:c,exists:m=>!!c(m),getAllByType:m=>Object.values(e.droppables).filter(p=>p.descriptor.type===m)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:h,subscribe:n,clean:u}}function Rle(){const e=Ht(_le,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var XN=Nt.createContext(null),kp=()=>{const e=document.body;return e||Je(),e};const $le={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Fle=e=>"rfd-announcement-".concat(e);function Lle(e){const t=Ht(()=>Fle(e),[e]),n=x.useRef(null);return x.useEffect(function(){const o=document.createElement("div");return n.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),wp(o.style,$le),kp().appendChild(o),function(){setTimeout(function(){const f=kp();f.contains(o)&&f.removeChild(o),o===n.current&&(n.current=null)})}},[t]),gt(s=>{const o=n.current;if(o){o.textContent=s;return}},[])}const zle={separator:"::"};function JN(e,t=zle){const n=Nt.useId();return Ht(()=>"".concat(e).concat(t.separator).concat(n),[t.separator,e,n])}function Ble({contextId:e,uniqueId:t}){return"rfd-hidden-text-".concat(e,"-").concat(t)}function Ule({contextId:e,text:t}){const n=JN("hidden-text",{separator:"-"}),a=Ht(()=>Ble({contextId:e,uniqueId:n}),[n,e]);return x.useEffect(function(){const o=document.createElement("div");return o.id=a,o.textContent=t,o.style.display="none",kp().appendChild(o),function(){const c=kp();c.contains(o)&&c.removeChild(o)}},[a,t]),a}var Ug=Nt.createContext(null);function k$(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function Vle(){let e=null;function t(){return!!e}function n(l){return l===e}function a(l){e&&Je();const c={abandon:l};return e=c,c}function s(){e||Je(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:a,release:s,tryAbandon:o}}function Bu(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const qle=9,Gle=13,QN=27,P$=32,Hle=33,Wle=34,Kle=35,Yle=36,Xle=37,Jle=38,Qle=39,Zle=40,ece={[Gle]:!0,[qle]:!0};var E$=e=>{ece[e.keyCode]&&e.preventDefault()};const Vg=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,"ms".concat(e),"webkit".concat(e),"moz".concat(e),"o".concat(e)].find(a=>"on".concat(a)in document)||e})(),A$=0,UI=5;function tce(e,t){return Math.abs(t.x-e.x)>=UI||Math.abs(t.y-e.y)>=UI}const VI={type:"IDLE"};function rce({cancel:e,completed:t,getPhase:n,setPhase:a}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:l,clientY:c}=s;if(o!==A$)return;const f={x:l,y:c},h=n();if(h.type==="DRAGGING"){s.preventDefault(),h.actions.move(f);return}h.type!=="PENDING"&&Je();const u=h.point;if(!tce(u,f))return;s.preventDefault();const m=h.actions.fluidLift(f);a({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===QN){s.preventDefault(),e();return}E$(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=n();if(o.type==="IDLE"&&Je(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Vg,fn:e}]}function nce(e){const t=x.useRef(VI),n=x.useRef(oi),a=Ht(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==A$||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const p=e.findClosestDraggableId(m);if(!p)return;const v=e.tryGetLock(p,l,{sourceEvent:m});if(!v)return;m.preventDefault();const j={x:m.clientX,y:m.clientY};n.current(),h(v,j)}}),[e]),s=Ht(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const m=e.findClosestDraggableId(u);if(!m)return;const p=e.findOptionsForDraggable(m);p&&(p.shouldRespectForcePress||e.canGetLock(m)&&u.preventDefault())}}),[e]),o=gt(function(){const m={passive:!1,capture:!0};n.current=Ua(window,[s,a],m)},[s,a]),l=gt(()=>{t.current.type!=="IDLE"&&(t.current=VI,n.current(),o())},[o]),c=gt(()=>{const u=t.current;l(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[l]),f=gt(function(){const m={capture:!0,passive:!1},p=rce({cancel:c,completed:l,getPhase:()=>t.current,setPhase:v=>{t.current=v}});n.current=Ua(window,p,m)},[c,l]),h=gt(function(m,p){t.current.type!=="IDLE"&&Je(),t.current={type:"PENDING",point:p,actions:m},f()},[f]);Ca(function(){return o(),function(){n.current()}},[o])}function ace(){}const sce={[Wle]:!0,[Hle]:!0,[Yle]:!0,[Kle]:!0};function oce(e,t){function n(){t(),e.cancel()}function a(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===QN){s.preventDefault(),n();return}if(s.keyCode===P$){s.preventDefault(),a();return}if(s.keyCode===Zle){s.preventDefault(),e.moveDown();return}if(s.keyCode===Jle){s.preventDefault(),e.moveUp();return}if(s.keyCode===Qle){s.preventDefault(),e.moveRight();return}if(s.keyCode===Xle){s.preventDefault(),e.moveLeft();return}if(sce[s.keyCode]){s.preventDefault();return}E$(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Vg,fn:n}]}function ice(e){const t=x.useRef(ace),n=Ht(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==P$)return;const l=e.findClosestDraggableId(o);if(!l)return;const c=e.tryGetLock(l,u,{sourceEvent:o});if(!c)return;o.preventDefault();let f=!0;const h=c.snapLift();t.current();function u(){f||Je(),f=!1,t.current(),a()}t.current=Ua(window,oce(h,u),{capture:!0,passive:!1})}}),[e]),a=gt(function(){const o={passive:!1,capture:!0};t.current=Ua(window,[n],o)},[n]);Ca(function(){return a(),function(){t.current()}},[a])}const _y={type:"IDLE"},lce=120,cce=.15;function dce({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===QN&&n.preventDefault(),e()}},{eventName:Vg,fn:e}]}function uce({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:a=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:l}=a.touches[0],c={x:o,y:l};a.preventDefault(),s.actions.move(c)}},{eventName:"touchend",fn:a=>{const s=n();if(s.type!=="DRAGGING"){e();return}a.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:a=>{if(n().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:a=>{const s=n();s.type==="IDLE"&&Je();const o=a.touches[0];if(!o||!(o.force>=cce))return;const c=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){c&&e();return}if(c){if(s.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}},{eventName:Vg,fn:e}]}function fce(e){const t=x.useRef(_y),n=x.useRef(oi),a=gt(function(){return t.current},[]),s=gt(function(v){t.current=v},[]),o=Ht(()=>({eventName:"touchstart",fn:function(v){if(v.defaultPrevented)return;const j=e.findClosestDraggableId(v);if(!j)return;const y=e.tryGetLock(j,c,{sourceEvent:v});if(!y)return;const b=v.touches[0],{clientX:N,clientY:k}=b,D={x:N,y:k};n.current(),m(y,D)}}),[e]),l=gt(function(){const v={capture:!0,passive:!1};n.current=Ua(window,[o],v)},[o]),c=gt(()=>{const p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(_y),n.current(),l())},[l,s]),f=gt(()=>{const p=t.current;c(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[c]),h=gt(function(){const v={capture:!0,passive:!1},j={cancel:f,completed:c,getPhase:a},y=Ua(window,uce(j),v),b=Ua(window,dce(j),v);n.current=function(){y(),b()}},[f,a,c]),u=gt(function(){const v=a();v.type!=="PENDING"&&Je();const j=v.actions.fluidLift(v.point);s({type:"DRAGGING",actions:j,hasMoved:!1})},[a,s]),m=gt(function(v,j){a().type!=="IDLE"&&Je();const y=setTimeout(u,lce);s({type:"PENDING",point:j,actions:v,longPressTimerId:y}),h()},[h,a,s,u]);Ca(function(){return l(),function(){n.current();const j=a();j.type==="PENDING"&&(clearTimeout(j.longPressTimerId),s(_y))}},[a,l,s]),Ca(function(){return Ua(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const hce=["input","button","textarea","select","option","optgroup","video","audio"];function I$(e,t){if(t==null)return!1;if(hce.includes(t.tagName.toLowerCase()))return!0;const a=t.getAttribute("contenteditable");return a==="true"||a===""?!0:t===e?!1:I$(e,t.parentElement)}function mce(e,t){const n=t.target;return Bg(n)?I$(e,n):!1}var pce=e=>ls(e.getBoundingClientRect()).center;function gce(e){return e instanceof C$(e).Element}const xce=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(a=>a in Element.prototype)||e})();function D$(e,t){return e==null?null:e[xce](t)?e:D$(e.parentElement,t)}function vce(e,t){return e.closest?e.closest(t):D$(e,t)}function yce(e){return"[".concat(_c.contextId,'="').concat(e,'"]')}function bce(e,t){const n=t.target;if(!gce(n))return null;const a=yce(e),s=vce(n,a);return!s||!Bg(s)?null:s}function jce(e,t){const n=bce(e,t);return n?n.getAttribute(_c.draggableId):null}function wce(e,t){const n="[".concat(pj.contextId,'="').concat(e,'"]'),s=S$(document,n).find(o=>o.getAttribute(pj.id)===t);return!s||!Bg(s)?null:s}function Nce(e){e.preventDefault()}function rm({expected:e,phase:t,isLockActive:n,shouldWarn:a}){return!(!n()||e!==t)}function O$({lockAPI:e,store:t,registry:n,draggableId:a}){if(e.isClaimed())return!1;const s=n.draggable.findById(a);return!(!s||!s.options.isEnabled||!b$(t.getState(),a))}function Sce({lockAPI:e,contextId:t,store:n,registry:a,draggableId:s,forceSensorStop:o,sourceEvent:l}){if(!O$({lockAPI:e,store:n,registry:a,draggableId:s}))return null;const f=a.draggable.getById(s),h=wce(t,f.descriptor.id);if(!h||l&&!f.options.canDragInteractiveElements&&mce(h,l))return null;const u=e.claim(o||oi);let m="PRE_DRAG";function p(){return f.options.shouldRespectForcePress}function v(){return e.isActive(u)}function j(P,C){rm({expected:P,phase:m,isLockActive:v,shouldWarn:!0})&&n.dispatch(C())}const y=j.bind(null,"DRAGGING");function b(P){function C(){e.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(C(),Je()),n.dispatch(vie(P.liftActionArgs)),m="DRAGGING";function O(A,_={shouldBlockNextClick:!1}){if(P.cleanup(),_.shouldBlockNextClick){const z=Ua(window,[{eventName:"click",fn:Nce,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}C(),n.dispatch(f$({reason:A}))}return{isActive:()=>rm({expected:"DRAGGING",phase:m,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:p,drop:A=>O("DROP",A),cancel:A=>O("CANCEL",A),...P.actions}}function N(P){const C=_u(A=>{y(()=>u$({client:A}))});return{...b({liftActionArgs:{id:s,clientSelection:P,movementMode:"FLUID"},cleanup:()=>C.cancel(),actions:{move:C}}),move:C}}function k(){const P={moveUp:()=>y(Pie),moveRight:()=>y(Aie),moveDown:()=>y(Eie),moveLeft:()=>y(Iie)};return b({liftActionArgs:{id:s,clientSelection:pce(h),movementMode:"SNAP"},cleanup:oi,actions:P})}function D(){rm({expected:"PRE_DRAG",phase:m,isLockActive:v,shouldWarn:!0})&&e.release()}return{isActive:()=>rm({expected:"PRE_DRAG",phase:m,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:N,snapLift:k,abort:D}}const Cce=[nce,ice,fce];function kce({contextId:e,store:t,registry:n,customSensors:a,enableDefaultSensors:s}){const o=[...s?Cce:[],...a||[]],l=x.useState(()=>Vle())[0],c=gt(function(b,N){Bu(b)&&!Bu(N)&&l.tryAbandon()},[l]);Ca(function(){let b=t.getState();return t.subscribe(()=>{const k=t.getState();c(b,k),b=k})},[l,t,c]),Ca(()=>l.tryAbandon,[l.tryAbandon]);const f=gt(y=>O$({lockAPI:l,registry:n,store:t,draggableId:y}),[l,n,t]),h=gt((y,b,N)=>Sce({lockAPI:l,registry:n,contextId:e,store:t,draggableId:y,forceSensorStop:b||null,sourceEvent:N&&N.sourceEvent?N.sourceEvent:null}),[e,l,n,t]),u=gt(y=>jce(e,y),[e]),m=gt(y=>{const b=n.draggable.findById(y);return b?b.options:null},[n.draggable]),p=gt(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(VN()))},[l,t]),v=gt(()=>l.isClaimed(),[l]),j=Ht(()=>({canGetLock:f,tryGetLock:h,findClosestDraggableId:u,findOptionsForDraggable:m,tryReleaseLock:p,isLockClaimed:v}),[f,h,u,m,p,v]);for(let y=0;y<o.length;y++)o[y](j)}const Pce=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};oo.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Ece=e=>({...zu,...e.autoScrollerOptions,durationDampening:{...zu.durationDampening,...e.autoScrollerOptions}});function su(e){return e.current||Je(),e.current}function Ace(e){const{contextId:t,setCallbacks:n,sensors:a,nonce:s,dragHandleUsageInstructions:o}=e,l=x.useRef(null),c=k$(e),f=gt(()=>Pce(c.current),[c]),h=gt(()=>Ece(c.current),[c]),u=Lle(t),m=Ule({contextId:t,text:o}),p=Ole(t,s),v=gt(z=>{su(l).dispatch(z)},[]),j=Ht(()=>Mk({publishWhileDragging:bie,updateDroppableScroll:wie,updateDroppableIsEnabled:Nie,updateDroppableIsCombineEnabled:Sie,collectionStarting:jie},v),[v]),y=Rle(),b=Ht(()=>dle(y,j),[y,j]),N=Ht(()=>Ple({scrollWindow:ule,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:h,...Mk({move:u$},v)}),[b.scrollDroppable,v,h]),k=Tle(t),D=Ht(()=>ole({announce:u,autoScroller:N,dimensionMarshal:b,focusMarshal:k,getResponders:f,styleMarshal:p}),[u,N,b,k,f,p]);l.current=D;const E=gt(()=>{const z=su(l);z.getState().phase!=="IDLE"&&z.dispatch(VN())},[]),P=gt(()=>{const z=su(l).getState();return z.phase==="DROP_ANIMATING"?!0:z.phase==="IDLE"?!1:z.isDragging},[]),C=Ht(()=>({isDragging:P,tryAbort:E}),[P,E]);n(C);const O=gt(z=>b$(su(l).getState(),z),[]),A=gt(()=>Xi(su(l).getState()),[]),_=Ht(()=>({marshal:b,focus:k,contextId:t,canLift:O,isMovementAllowed:A,dragHandleUsageInstructionsId:m,registry:y}),[t,b,m,k,O,A,y]);return kce({contextId:t,store:D,registry:y,customSensors:a||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>E,[E]),Nt.createElement(Ug.Provider,{value:_},Nt.createElement(uR,{context:XN,store:D},e.children))}function Ice(){return Nt.useId()}function M$(e){const t=Ice(),n=e.dragHandleUsageInstructions||um.dragHandleUsageInstructions;return Nt.createElement(loe,null,a=>Nt.createElement(Ace,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const qI={dragging:5e3,dropAnimating:4500},Dce=(e,t)=>t?hu.drop(t.duration):e?hu.snap:hu.fluid,Oce=(e,t)=>{if(e)return t?Lu.opacity.drop:Lu.opacity.combining},Mce=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Tce(e){const n=e.dimension.client,{offset:a,combineWith:s,dropping:o}=e,l=!!s,c=Mce(e),f=!!o,h=f?hj.drop(a,l):hj.moveTo(a);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Dce(c,o),transform:h,opacity:Oce(l,f),zIndex:f?qI.dropAnimating:qI.dragging,pointerEvents:"none"}}function _ce(e){return{transform:hj.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Rce(e){return e.type==="DRAGGING"?Tce(e):_ce(e)}function $ce(e,t,n=mn){const a=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=zR(s,a),l=jp(o,n),c={client:o,tagName:t.tagName.toLowerCase(),display:a.display},f={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:c,displaceBy:f,client:o,page:l}}function Fce(e){const t=JN("draggable"),{descriptor:n,registry:a,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}=e,f=Ht(()=>({canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}),[o,c,l]),h=gt(v=>{const j=s();return j||Je(),$ce(n,j,v)},[n,s]),u=Ht(()=>({uniqueId:t,descriptor:n,options:f,getDimension:h}),[n,h,f,t]),m=x.useRef(u),p=x.useRef(!0);Ca(()=>(a.draggable.register(m.current),()=>a.draggable.unregister(m.current)),[a.draggable]),Ca(()=>{if(p.current){p.current=!1;return}const v=m.current;m.current=u,a.draggable.update(u,v)},[u,a.draggable])}var ZN=Nt.createContext(null);function Pp(e){const t=x.useContext(e);return t||Je(),t}function Lce(e){e.preventDefault()}const zce=e=>{const t=x.useRef(null),n=gt((C=null)=>{t.current=C},[]),a=gt(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:l}=Pp(Ug),{type:c,droppableId:f}=Pp(ZN),h=Ht(()=>({id:e.draggableId,index:e.index,type:c,droppableId:f}),[e.draggableId,e.index,c,f]),{children:u,draggableId:m,isEnabled:p,shouldRespectForcePress:v,canDragInteractiveElements:j,isClone:y,mapped:b,dropAnimationFinished:N}=e;if(!y){const C=Ht(()=>({descriptor:h,registry:l,getDraggableRef:a,canDragInteractiveElements:j,shouldRespectForcePress:v,isEnabled:p}),[h,l,a,j,v,p]);Fce(C)}const k=Ht(()=>p?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:Lce}:null,[s,o,m,p]),D=gt(C=>{b.type==="DRAGGING"&&b.dropping&&C.propertyName==="transform"&&oo.flushSync(N)},[N,b]),E=Ht(()=>{const C=Rce(b),O=b.type==="DRAGGING"&&b.dropping?D:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":m,style:C,onTransitionEnd:O},dragHandleProps:k}},[s,k,m,b,D,n]),P=Ht(()=>({draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}),[h.droppableId,h.id,h.index,h.type]);return Nt.createElement(Nt.Fragment,null,u(E,b.snapshot,P))};var T$=(e,t)=>e===t,_$=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const Bce=e=>e.combine?e.combine.draggableId:null,Uce=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Vce(){const e=hn((s,o)=>({x:s,y:o})),t=hn((s,o,l=null,c=null,f=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!f,dropAnimation:f,mode:s,draggingOver:l,combineWith:c,combineTargetFor:null})),n=hn((s,o,l,c,f=null,h=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:f,combineWith:h,mode:o,offset:s,dimension:l,forceShouldAnimate:u,snapshot:t(o,c,f,h,null)}}));return(s,o)=>{if(Bu(s)){if(s.critical.draggable.id!==o.draggableId)return null;const l=s.current.client.offset,c=s.dimensions.draggables[o.draggableId],f=Sa(s.impact),h=Uce(s.impact),u=s.forceShouldAnimate;return n(e(l.x,l.y),s.movementMode,c,o.isClone,f,h,u)}if(s.phase==="DROP_ANIMATING"){const l=s.completed;if(l.result.draggableId!==o.draggableId)return null;const c=o.isClone,f=s.dimensions.draggables[o.draggableId],h=l.result,u=h.mode,m=_$(h),p=Bce(h),j={duration:s.dropDuration,curve:GN.drop,moveTo:s.newHomeClientOffset,opacity:p?Lu.opacity.drop:null,scale:p?Lu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:f,dropping:j,draggingOver:m,combineWith:p,mode:u,forceShouldAnimate:null,snapshot:t(u,c,m,p,j)}}}return null}}function R$(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const qce={mapped:{type:"SECONDARY",offset:mn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:R$(null)}};function Gce(){const e=hn((l,c)=>({x:l,y:c})),t=hn(R$),n=hn((l,c=null,f)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:c,shouldAnimateDisplacement:f,snapshot:t(c)}})),a=l=>l?n(mn,l,!0):null,s=(l,c,f,h)=>{const u=f.displaced.visible[l],m=!!(h.inVirtualList&&h.effected[l]),p=Fg(f),v=p&&p.draggableId===l?c:null;if(!u){if(!m)return a(v);if(f.displaced.invisible[l])return null;const b=ed(h.displacedBy.point),N=e(b.x,b.y);return n(N,v,!0)}if(m)return a(v);const j=f.displacedBy.point,y=e(j.x,j.y);return n(y,v,u.shouldAnimate)};return(l,c)=>{if(Bu(l))return l.critical.draggable.id===c.draggableId?null:s(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const f=l.completed;return f.result.draggableId===c.draggableId?null:s(c.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null}}const Hce=()=>{const e=Vce(),t=Gce();return(a,s)=>e(a,s)||t(a,s)||qce},Wce={dropAnimationFinished:h$},Kce=dR(Hce,Wce,null,{context:XN,areStatePropsEqual:T$})(zce);function $$(e){return Pp(ZN).isUsingCloneFor===e.draggableId&&!e.isClone?null:Nt.createElement(Kce,e)}function Ep(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,a=!!e.shouldRespectForcePress;return Nt.createElement($$,wp({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:a}))}const F$=e=>t=>e===t,Yce=F$("scroll"),Xce=F$("auto"),GI=(e,t)=>t(e.overflowX)||t(e.overflowY),Jce=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return GI(n,Yce)||GI(n,Xce)},Qce=()=>!1,L$=e=>e==null?null:e===document.body?Qce()?e:null:e===document.documentElement?null:Jce(e)?e:L$(e.parentElement);var gj=e=>({x:e.scrollLeft,y:e.scrollTop});const z$=e=>e?window.getComputedStyle(e).position==="fixed"?!0:z$(e.parentElement):!1;var Zce=e=>{const t=L$(e),n=z$(e);return{closestScrollable:t,isFixedOnPage:n}},ede=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:a,direction:s,client:o,page:l,closest:c})=>{const f=(()=>{if(!c)return null;const{scrollSize:p,client:v}=c,j=x$({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:j,diff:{value:mn,displacement:mn}}}})(),h=s==="vertical"?FN:XR,u=Mc({page:l,withPlaceholder:null,axis:h,frame:f});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:a,axis:h,isEnabled:t,client:o,page:l,frame:f,subject:u}};const tde=(e,t)=>{const n=BR(e);if(!t||e!==t)return n;const a=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,o=a+t.scrollHeight,l=s+t.scrollWidth,f=TN({top:a,right:l,bottom:o,left:s},n.border);return _N({borderBox:f,margin:n.margin,border:n.border,padding:n.padding})};var rde=({ref:e,descriptor:t,env:n,windowScroll:a,direction:s,isDropDisabled:o,isCombineEnabled:l,shouldClipSubject:c})=>{const f=n.closestScrollable,h=tde(e,f),u=jp(h,a),m=(()=>{if(!f)return null;const v=BR(f),j={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:v,page:jp(v,a),scroll:gj(f),scrollSize:j,shouldClipSubject:c}})();return ede({descriptor:t,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:s,client:h,page:u,closest:m})};const nde={passive:!1},ade={passive:!0};var HI=e=>e.shouldPublishImmediately?nde:ade;const nm=e=>e&&e.env.closestScrollable||null;function sde(e){const t=x.useRef(null),n=Pp(Ug),a=JN("droppable"),{registry:s,marshal:o}=n,l=k$(e),c=Ht(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),f=x.useRef(c),h=Ht(()=>hn((E,P)=>{t.current||Je();const C={x:E,y:P};o.updateDroppableScroll(c.id,C)}),[c.id,o]),u=gt(()=>{const E=t.current;return!E||!E.env.closestScrollable?mn:gj(E.env.closestScrollable)},[]),m=gt(()=>{const E=u();h(E.x,E.y)},[u,h]),p=Ht(()=>_u(m),[m]),v=gt(()=>{const E=t.current,P=nm(E);if(E&&P||Je(),E.scrollOptions.shouldPublishImmediately){m();return}p()},[p,m]),j=gt((E,P)=>{t.current&&Je();const C=l.current,O=C.getDroppableRef();O||Je();const A=Zce(O),_={ref:O,descriptor:c,env:A,scrollOptions:P};t.current=_;const z=rde({ref:O,descriptor:c,env:A,windowScroll:E,direction:C.direction,isDropDisabled:C.isDropDisabled,isCombineEnabled:C.isCombineEnabled,shouldClipSubject:!C.ignoreContainerClipping}),G=A.closestScrollable;return G&&(G.setAttribute(zI.contextId,n.contextId),G.addEventListener("scroll",v,HI(_.scrollOptions))),z},[n.contextId,c,v,l]),y=gt(()=>{const E=t.current,P=nm(E);return E&&P||Je(),gj(P)},[]),b=gt(()=>{const E=t.current;E||Je();const P=nm(E);t.current=null,P&&(p.cancel(),P.removeAttribute(zI.contextId),P.removeEventListener("scroll",v,HI(E.scrollOptions)))},[v,p]),N=gt(E=>{const P=t.current;P||Je();const C=nm(P);C||Je(),C.scrollTop+=E.y,C.scrollLeft+=E.x},[]),k=Ht(()=>({getDimensionAndWatchScroll:j,getScrollWhileDragging:y,dragStopped:b,scroll:N}),[b,j,y,N]),D=Ht(()=>({uniqueId:a,descriptor:c,callbacks:k}),[k,c,a]);Ca(()=>(f.current=D.descriptor,s.droppable.register(D),()=>{t.current&&b(),s.droppable.unregister(D)}),[k,c,b,D,o,s.droppable]),Ca(()=>{t.current&&o.updateDroppableIsEnabled(f.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Ca(()=>{t.current&&o.updateDroppableIsCombineEnabled(f.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function Ry(){}const WI={width:0,height:0,margin:moe},ode=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?WI:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},ide=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const a=ode({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?hu.placeholder:null}},lde=e=>{const t=x.useRef(null),n=gt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:a,onTransitionEnd:s,onClose:o,contextId:l}=e,[c,f]=x.useState(e.animate==="open");x.useEffect(()=>c?a!=="open"?(n(),f(!1),Ry):t.current?Ry:(t.current=setTimeout(()=>{t.current=null,f(!1)}),n):Ry,[a,c,n]);const h=gt(m=>{m.propertyName==="height"&&(s(),a==="close"&&o())},[a,o,s]),u=ide({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return Nt.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":l,onTransitionEnd:h,ref:e.innerRef})};var cde=Nt.memo(lde);class dde extends Nt.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const ude=e=>{const t=x.useContext(Ug);t||Je();const{contextId:n,isMovementAllowed:a}=t,s=x.useRef(null),o=x.useRef(null),{children:l,droppableId:c,type:f,mode:h,direction:u,ignoreContainerClipping:m,isDropDisabled:p,isCombineEnabled:v,snapshot:j,useClone:y,updateViewportMaxScroll:b,getContainerForClone:N}=e,k=gt(()=>s.current,[]),D=gt((G=null)=>{s.current=G},[]);gt(()=>o.current,[]);const E=gt((G=null)=>{o.current=G},[]),P=gt(()=>{a()&&b({maxScroll:y$()})},[a,b]);sde({droppableId:c,type:f,mode:h,direction:u,isDropDisabled:p,isCombineEnabled:v,ignoreContainerClipping:m,getDroppableRef:k});const C=Ht(()=>Nt.createElement(dde,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:G,data:T,animate:M})=>Nt.createElement(cde,{placeholder:T,onClose:G,innerRef:E,animate:M,contextId:n,onTransitionEnd:P})),[n,P,e.placeholder,e.shouldAnimatePlaceholder,E]),O=Ht(()=>({innerRef:D,placeholder:C,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":n}}),[n,c,C,D]),A=y?y.dragging.draggableId:null,_=Ht(()=>({droppableId:c,type:f,isUsingCloneFor:A}),[c,A,f]);function z(){if(!y)return null;const{dragging:G,render:T}=y,M=Nt.createElement($$,{draggableId:G.draggableId,index:G.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(W,Z)=>T(W,Z,G));return CF.createPortal(M,N())}return Nt.createElement(ZN.Provider,{value:_},l(O,j),z())};function fde(){return document.body||Je(),document.body}const KI={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:fde},B$=e=>{let t={...e},n;for(n in KI)e[n]===void 0&&(t={...t,[n]:KI[n]});return t},$y=(e,t)=>e===t.droppable.type,YI=(e,t)=>t.draggables[e.draggable.id],hde=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=hn(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),a=hn((o,l,c,f,h,u)=>{const m=h.descriptor.id;if(h.descriptor.droppableId===o){const j=u?{render:u,dragging:n(h.descriptor)}:null,y={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:j}}if(!l)return t;if(!f)return e;const v={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}});return(o,l)=>{const c=B$(l),f=c.droppableId,h=c.type,u=!c.isDropDisabled,m=c.renderClone;if(Bu(o)){const p=o.critical;if(!$y(h,p))return t;const v=YI(p,o.dimensions),j=Sa(o.impact)===f;return a(f,u,j,j,v,m)}if(o.phase==="DROP_ANIMATING"){const p=o.completed;if(!$y(h,p.critical))return t;const v=YI(p.critical,o.dimensions);return a(f,u,_$(p.result)===f,Sa(p.impact)===f,v,m)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const p=o.completed;if(!$y(h,p.critical))return t;const v=Sa(p.impact)===f,j=!!(p.impact.at&&p.impact.at.type==="COMBINE"),y=p.critical.droppable.id===f;return v?j?e:t:y?e:t}return t}},mde={updateViewportMaxScroll:kie},pde=dR(hde,mde,(e,t,n)=>({...B$(n),...e,...t}),{context:XN,areStatePropsEqual:T$})(ude);var Ap=pde;const gde=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState(!1);x.useEffect(()=>{const p=localStorage.getItem("launchpad_structure"),v=localStorage.getItem("launchpad_hidden"),j=Ky.filter(y=>y.id!=="inicio");if(v)try{s(JSON.parse(v))}catch(y){}if(p)try{let b=JSON.parse(p).map(k=>{const D=j.find(E=>E.id===k.id);return D?{...D,id:k.id,label:k.label,subItems:k.subItems.map(E=>{let P=null;return j.forEach(C=>{var A;const O=(A=C.subItems)==null?void 0:A.find(_=>_.path===E.path);O&&(P=O)}),P||E})}:null}).filter(Boolean);const N=j.filter(k=>!b.some(D=>D.id===k.id));N.length>0&&(b=[...b,...N]),n(b)}catch(y){n(j)}else n(j)},[]);const c=(p,v=a)=>{n(p);const j=p.map(y=>{var b;return{id:y.id,label:y.label,subItems:((b=y.subItems)==null?void 0:b.map(N=>({label:N.label,path:N.path,highlight:N.highlight})))||[]}});localStorage.setItem("launchpad_structure",JSON.stringify(j)),localStorage.setItem("launchpad_hidden",JSON.stringify(v))},f=p=>{const v=a.includes(p)?a.filter(j=>j!==p):[...a,p];s(v),localStorage.setItem("launchpad_hidden",JSON.stringify(v))},h=()=>{window.confirm("Restablecer el men a su estado original?")&&(localStorage.removeItem("launchpad_structure"),localStorage.removeItem("launchpad_hidden"),window.location.reload())},u=p=>{const{source:v,destination:j,type:y}=p;if(j){if(y==="MODULE"){const b=Array.from(t),[N]=b.splice(v.index,1);b.splice(j.index,0,N),c(b);return}if(y==="SUBITEM"){const b=t.findIndex(O=>O.id===v.droppableId),N=t.findIndex(O=>O.id===j.droppableId);if(b===-1||N===-1)return;const k=[...t],D={...k[b]},E={...k[N]},P=Array.from(D.subItems||[]),[C]=P.splice(v.index,1);if(v.droppableId===j.droppableId)P.splice(j.index,0,C),D.subItems=P,k[b]=D;else{const O=Array.from(E.subItems||[]);O.splice(j.index,0,C),D.subItems=P,E.subItems=O,k[b]=D,k[N]=E}c(k)}}},m=o?t:t.filter(p=>!a.includes(p.id));return r.jsx("div",{className:"min-h-screen bg-gray-50 p-6 lg:p-12 animate-in fade-in duration-500 overflow-y-auto font-sans",children:r.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-10",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("div",{className:"p-2 bg-hd-orange rounded-lg shadow-lg shadow-hd-orange/20",children:r.jsx(cl,{size:22,className:"text-white"})}),r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-widest uppercase italic",children:"Mapa Operativo"})]}),r.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-[0.4em] text-[10px] flex items-center gap-2 font-mono",children:"Personalizacin y Control Unificado"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(re,{variant:o?"hd-orange":"outline",size:"sm",className:"font-bold uppercase tracking-tight text-[10px] h-10 px-4 ".concat(o?"bg-hd-orange text-white":"bg-white text-gray-400 border-gray-200 hover:text-hd-orange"),onClick:()=>l(!o),children:[r.jsx(qy,{size:16,className:"mr-2"}),o?"Guardar Cambios":"Personalizar Vista"]}),r.jsx(re,{variant:"outline",size:"sm",className:"bg-white text-gray-300 hover:text-red-500 border-gray-100 h-10",onClick:h,children:r.jsx(na,{size:14})}),r.jsx(re,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-hd-orange hover:bg-orange-50 rounded-full h-12 w-12 transition-colors",onClick:()=>e("/"),children:r.jsx(Tt,{size:32})})]})]}),o&&r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-hd-orange/20 shadow-sm animate-in slide-in-from-top duration-300",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(qy,{size:18,className:"text-hd-orange"}),r.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-gray-900 italic",children:"Gestin de Visibilidad"})]}),r.jsx("div",{className:"flex flex-wrap gap-4",children:t.map(p=>{const v=a.includes(p.id);return r.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all cursor-pointer ".concat(v?"bg-gray-50 border-gray-100 opacity-60":"bg-orange-50 border-orange-100 text-hd-orange"),children:[r.jsx("input",{type:"checkbox",checked:!v,onChange:()=>f(p.id),className:"accent-hd-orange h-4 w-4"}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-tighter",children:p.label})]},p.id)})}),r.jsx("p",{className:"text-[9px] text-gray-400 mt-4 italic font-bold uppercase tracking-wider",children:"* Los mdulos desmarcados no aparecern en la vista normal. Puedes arrastrar los paneles abajo para reordenarlos."})]}),r.jsx(M$,{onDragEnd:u,children:r.jsx(Ap,{droppableId:"all-modules",direction:"horizontal",type:"MODULE",children:p=>r.jsxs("div",{...p.droppableProps,ref:p.innerRef,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12 pb-20",children:[m.map((v,j)=>{const y=v.icon||ll,b=a.includes(v.id);return r.jsx(Ep,{draggableId:v.id,index:j,isDragDisabled:!o,children:(N,k)=>r.jsx(We,{ref:N.innerRef,...N.draggableProps,className:"border-none shadow-md bg-white hover:shadow-xl transition-all duration-300 flex flex-col relative ".concat(k.isDragging?"ring-2 ring-hd-orange shadow-2xl scale-105 z-50":""," ").concat(b&&o?"opacity-50 grayscale":""),children:r.jsxs("div",{className:"p-5 flex-grow flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg border transition-colors ".concat(b?"bg-gray-100 text-gray-400":"bg-orange-50 text-hd-orange border-orange-100"),children:r.jsx(y,{size:20})}),r.jsx("h2",{className:"text-lg font-black text-gray-800 tracking-tight uppercase italic",children:v.label})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[o&&r.jsx("button",{onClick:()=>f(v.id),className:"p-1.5 rounded-full transition-colors ".concat(b?"text-gray-400 hover:text-green-500 bg-gray-50":"text-hd-orange hover:text-gray-400 bg-orange-50"),title:b?"Mostrar":"Ocultar",children:b?r.jsx(jj,{size:16}):r.jsx(ci,{size:16})}),o&&r.jsx("div",{...N.dragHandleProps,className:"text-gray-300 hover:text-hd-orange cursor-grab active:cursor-grabbing p-1",children:r.jsx(Vy,{size:18})})]})]}),r.jsx(Ap,{droppableId:v.id,type:"SUBITEM",isDropDisabled:!o&&!v.id.includes("utilidades"),children:(D,E)=>{var P;return r.jsxs("div",{...D.droppableProps,ref:D.innerRef,className:"flex-grow space-y-1 p-2 rounded-lg transition-colors min-h-[50px] ".concat(E.isDraggingOver?"bg-orange-50/50 outline-2 outline-dashed outline-hd-orange/20":""),children:[(P=v.subItems)==null?void 0:P.map((C,O)=>{const A=C.icon||ir,_="".concat(v.id,"-").concat(C.path,"-").concat(O);return r.jsx(Ep,{draggableId:_,index:O,isDragDisabled:!o,children:(z,G)=>r.jsxs("div",{ref:z.innerRef,...z.draggableProps,...z.dragHandleProps,onClick:()=>!G.isDragging&&e(C.path),className:"flex items-center group cursor-pointer p-3 rounded-lg transition-all border border-transparent ".concat(G.isDragging?"bg-white shadow-xl scale-105 border-hd-orange z-[100]":"hover:bg-gray-50"," ").concat(C.highlight?"bg-orange-50/50 border-orange-100":""),children:[r.jsx("div",{className:"p-1.5 rounded bg-gray-100 mr-3 transition-colors ".concat(C.highlight?"text-hd-orange":"text-gray-400 group-hover:text-hd-orange"),children:r.jsx(A,{size:14})}),r.jsx("div",{className:"flex-grow",children:r.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wider transition-colors ".concat(C.highlight?"text-hd-orange":"text-gray-600 group-hover:text-gray-900"),children:C.label})}),r.jsx(ir,{size:12,className:"transition-all text-hd-orange ".concat(G.isDragging?"opacity-100":"opacity-0 group-hover:opacity-100 group-hover:translate-x-1")})]})},_)}),D.placeholder]})}})]})})},v.id)}),p.placeholder]})})}),r.jsx("div",{className:"text-center opacity-40 pt-8 border-t border-gray-200",children:r.jsx("p",{className:"text-gray-400 text-[10px] font-black uppercase tracking-[0.5em]",children:"CENTRO DE CONTROL PERSONALIZABLE  v1.3.0"})})]})})},uc="http://localhost:5006/api",xde=()=>{var E,P;const[e,t]=x.useState({showStockBreakdown:!0,enableBeep:!0,defaultWarehouseId:null,filterByCurrency:!1,filterByPriceLevel:!1,selectedPriceLevel:"",distributionDefaultUnit:"UND",distributionUseSeparateSequence:!1,enableStockTooltip:!0}),[n,a]=x.useState({id:0,code:"SALES_INVOICE",prefix:"FACT-",currentValue:0,length:6}),[s,o]=x.useState({id:0,code:"DIST_INVOICE",prefix:"DIST-",currentValue:0,length:6}),[l,c]=x.useState({defaultClientId:null}),[f,h]=x.useState([]),[u,m]=x.useState([]),[p,v]=x.useState([]),[j,y]=x.useState(!1),[b,N]=x.useState(null);x.useEffect(()=>{const C=localStorage.getItem("pos_config");if(C)try{const T=JSON.parse(C);t(M=>({...M,...T}))}catch(T){console.error("Failed to parse saved POS config",T)}const O=async()=>{var T;try{const M=await qa();if(h(M),N(null),!e.defaultWarehouseId&&M.length>0){const W=(T=M[0].id)!=null?T:M[0].Id;t(Z=>({...Z,defaultWarehouseId:W}))}}catch(M){console.error(M),N(M.message)}},A=async()=>{try{const T=await fetch("".concat(uc,"/Clients"));if(T.ok){const M=await T.json();m(Array.isArray(M)?M:M.value||[])}}catch(T){console.error("Error fetching clients:",T)}},_=async()=>{try{const T=await Cc();v(T)}catch(T){console.error("Error fetching price levels:",T)}},z=async()=>{try{const T=await fetch("".concat(uc,"/Sequences"));if(T.ok){const M=await T.json(),W=M.find(B=>B.code==="SALES_INVOICE");W&&a(W);const Z=M.find(B=>B.code==="DIST_INVOICE");Z&&o(Z)}}catch(T){console.error("Error fetching sequences:",T)}},G=async()=>{try{const T=await fetch("".concat(uc,"/CompanyConfiguration"));if(T.ok){const M=await T.json();c(M||{})}}catch(T){console.error("Error fetching company config:",T)}};O(),A(),_(),z(),G()},[]);const k=(C,O)=>{t(A=>{const _={...A,[C]:O};return localStorage.setItem("pos_config",JSON.stringify(_)),window.dispatchEvent(new Event("pos_config_changed")),_})},D=async()=>{y(!0);try{if(n.id&&await fetch("".concat(uc,"/Sequences/").concat(n.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),e.distributionUseSeparateSequence&&s.id?await fetch("".concat(uc,"/Sequences/").concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):e.distributionUseSeparateSequence&&s.id,(await fetch("".concat(uc,"/CompanyConfiguration"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)alert("Configuracin guardada correctamente");else throw new Error("Error al guardar configuracin de empresa")}catch(C){console.error(C),alert("Error al guardar cambios")}finally{y(!1)}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-4xl mx-auto p-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Configuracin de POS"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Personalice el comportamiento y la visualizacin del terminal de punto de venta."})]}),r.jsxs(sO,{defaultValue:"general",className:"w-full",children:[r.jsxs(oO,{className:"mb-4",children:[r.jsx(bm,{value:"general",children:"General"}),r.jsx(bm,{value:"distribucion",children:"Ventas Distribucin"})]}),r.jsxs(jm,{value:"general",className:"space-y-6",children:[r.jsxs(We,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(vt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(bt,{className:"flex items-center gap-2",children:[r.jsx(xm,{className:"h-5 w-5 text-hd-orange"}),"Interfaz de Venta"]})}),r.jsxs(Mt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Almacn Predeterminado"}),r.jsxs("select",{value:(E=e.defaultWarehouseId)!=null?E:"",onChange:C=>k("defaultWarehouseId",parseInt(C.target.value)||null),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-hd-orange focus:border-hd-orange p-2.5",children:[r.jsx("option",{value:"",children:"-- Seleccione --"}),f.map((C,O)=>r.jsx("option",{value:C.id||C.Id,children:C.nombre||C.Nombre},C.id||C.Id||O))]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Se selecciona al abrir el POS."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Cliente Predeterminado"}),r.jsxs("select",{value:(P=l.defaultClientId)!=null?P:"",onChange:C=>c(O=>({...O,defaultClientId:parseInt(C.target.value)||null})),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-hd-orange focus:border-hd-orange p-2.5",children:[r.jsx("option",{value:"",children:"-- Seleccione (Por defecto: Consumidor Final) --"}),u.map((C,O)=>r.jsx("option",{value:C.id||C.Id,children:C.name||C.Name},C.id||C.Id||O))]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Se carga automticamente en la venta."})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Permitir Venta sin Stock"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Permitir facturar artculos con inventario cero o negativo."})]}),r.jsx("button",{onClick:()=>c(C=>({...C,allowNegativeStock:!C.allowNegativeStock})),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ".concat(l.allowNegativeStock?"bg-hd-orange":"bg-gray-200"),children:r.jsx("span",{className:"".concat(l.allowNegativeStock?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Desglose de Stock"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver existencia por almacn al pasar el mouse."})]}),r.jsx("button",{onClick:()=>k("showStockBreakdown",!e.showStockBreakdown),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ".concat(e.showStockBreakdown?"bg-hd-orange":"bg-gray-200"),children:r.jsx("span",{className:"".concat(e.showStockBreakdown?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Sonido (Beep)"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Reproduce sonido al escanear."})]}),r.jsx("button",{onClick:()=>k("enableBeep",!e.enableBeep),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ".concat(e.enableBeep!==!1?"bg-hd-orange":"bg-gray-200"),children:r.jsx("span",{className:"".concat(e.enableBeep!==!1?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Filtrar por Moneda del Cliente"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ocultar artculos que no tengan precio en la moneda del cliente."})]}),r.jsx("button",{onClick:()=>k("filterByCurrency",!e.filterByCurrency),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ".concat(e.filterByCurrency?"bg-hd-orange":"bg-gray-200"),children:r.jsx("span",{className:"".concat(e.filterByCurrency?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]}),r.jsx("div",{className:"flex items-center justify-between col-span-1 md:col-span-2 border-t border-gray-100 pt-4 mt-2",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Filtrar por Nivel de Precio"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Solo mostrar artculos que tengan precio definido en el nivel seleccionado."})]}),r.jsx("button",{onClick:()=>k("filterByPriceLevel",!e.filterByPriceLevel),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ".concat(e.filterByPriceLevel?"bg-hd-orange":"bg-gray-200"),children:r.jsx("span",{className:"".concat(e.filterByPriceLevel?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]}),e.filterByPriceLevel&&r.jsxs("div",{className:"mt-2 animate-in slide-in-from-top-2 duration-300",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Nivel de Precio requerido"}),r.jsxs("select",{value:e.selectedPriceLevel||"",onChange:C=>k("selectedPriceLevel",C.target.value),className:"w-full md:w-1/2 bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-hd-orange focus:border-hd-orange p-2.5",children:[r.jsx("option",{value:"",children:"-- Seleccione Nivel --"}),p.map((C,O)=>r.jsx("option",{value:C.nombre||C.Nombre,children:C.nombre||C.Nombre},O))]})]})]})})]})]})]}),r.jsxs(We,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(vt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(bt,{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"h-5 w-5 text-blue-600"}),"Secuencia de Ventas (Facturas)"]})}),r.jsxs(Mt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:n.prefix||"",onChange:C=>a({...n,prefix:C.target.value}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: FACT-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secuencia Actual"}),r.jsx("input",{type:"number",value:n.currentValue,onChange:C=>a({...n,currentValue:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Siguiente: ",n.prefix,String(n.currentValue+1).padStart(n.length,"0")]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ceros a la Izquierda"}),r.jsx("input",{type:"number",value:n.length,onChange:C=>a({...n,length:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:D,disabled:j,className:"bg-blue-600 hover:bg-blue-700",children:j?"Guardando...":"Guardar Configuracin"})})]})]})]}),r.jsx(jm,{value:"distribucion",children:r.jsxs(We,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(vt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(bt,{className:"flex items-center gap-2",children:[r.jsx(xm,{className:"h-5 w-5 text-purple-600"}),"Configuracin de Distribucin"]})}),r.jsxs(Mt,{className:"p-6 space-y-6",children:[r.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-100 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-yellow-900 text-sm",children:"Control de Inventario (Global)"}),r.jsx("p",{className:"text-xs text-yellow-700",children:"Permitir facturar artculos con inventario cero o negativo."})]}),r.jsx("button",{onClick:()=>c(C=>({...C,allowNegativeStock:!C.allowNegativeStock})),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 ".concat(l.allowNegativeStock?"bg-yellow-500":"bg-gray-200"),children:r.jsx("span",{className:"".concat(l.allowNegativeStock?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]})}),r.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-blue-900 text-sm",children:"Tooltip de Inventario"}),r.jsx("p",{className:"text-xs text-blue-700",children:"Mostrar desglose de stock por almacn al pasar el mouse sobre un producto."})]}),r.jsx("button",{onClick:()=>k("enableStockTooltip",!e.enableStockTooltip),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(e.enableStockTooltip?"bg-blue-600":"bg-gray-200"),children:r.jsx("span",{className:"".concat(e.enableStockTooltip?"translate-x-6":"translate-x-1"," inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm")})})]})}),r.jsxs("div",{className:"space-y-2 max-w-md",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Unidad Predeterminada"}),r.jsx("input",{type:"text",value:e.distributionDefaultUnit||"UND",onChange:C=>k("distributionDefaultUnit",C.target.value),className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-600 focus:border-purple-600 p-2.5",placeholder:"Ej: UND, CAJA, LBS"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Unidad por defecto al agregar productos si no tienen una definida."})]}),r.jsx("hr",{className:"border-gray-100"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Secuencia de Numeracin"}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"seqStrategy",checked:!e.distributionUseSeparateSequence,onChange:()=>k("distributionUseSeparateSequence",!1),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-sm font-medium text-gray-900",children:"Usar la misma secuencia de Ventas"}),r.jsxs("span",{className:"block text-xs text-gray-500",children:["Las facturas de distribucin seguirn el consecutivo general (",n.prefix,"...)."]})]})]}),r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"seqStrategy",checked:e.distributionUseSeparateSequence,onChange:()=>k("distributionUseSeparateSequence",!0),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-sm font-medium text-gray-900",children:"Usar secuencia independiente"}),r.jsx("span",{className:"block text-xs text-gray-500",children:"Crear una numeracin separada para el mdulo de distribucin."})]})]})]})]}),e.distributionUseSeparateSequence&&r.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-100 animate-in fade-in slide-in-from-top-2",children:[r.jsx("h4",{className:"text-sm font-bold text-purple-800 mb-3",children:"Configurar Secuencia de Distribucin"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-purple-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:s.prefix||"",onChange:C=>o({...s,prefix:C.target.value}),className:"w-full bg-white border border-purple-200 rounded p-2 text-sm focus:ring-purple-500 focus:border-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-purple-700 mb-1",children:"Actual"}),r.jsx("input",{type:"number",value:s.currentValue,onChange:C=>o({...s,currentValue:parseInt(C.target.value)}),className:"w-full bg-white border border-purple-200 rounded p-2 text-sm focus:ring-purple-500 focus:border-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-purple-700 mb-1",children:"Longitud"}),r.jsx("input",{type:"number",value:s.length,onChange:C=>o({...s,length:parseInt(C.target.value)}),className:"w-full bg-white border border-purple-200 rounded p-2 text-sm focus:ring-purple-500 focus:border-purple-500"})]})]}),r.jsxs("p",{className:"text-xs text-purple-600 mt-2",children:["Ejemplo de prxima factura: ",r.jsxs("strong",{children:[s.prefix,String(s.currentValue+1).padStart(s.length,"0")]})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:D,disabled:j,className:"bg-purple-600 hover:bg-purple-700",children:j?"Guardando...":"Guardar Cambios"})})]})]})})]})]})},XI="http://localhost:5006/api",vde=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!1),[s,o]=x.useState("");x.useEffect(()=>{l()},[]);const l=async()=>{try{const u=await fetch("".concat(XI,"/Sequences"));if(u.ok){const m=await u.json();t(m.filter(p=>["PURCHASE_ORDER","GOODS_RECEIPT","DIRECT_PURCHASE"].includes(p.code)))}}catch(u){console.error("Error fetching sequences:",u)}},c=(u,m,p)=>{t(v=>v.map(j=>j.id===u?{...j,[m]:p}:j))},f=async u=>{a(!0);try{(await fetch("".concat(XI,"/Sequences/").concat(u.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok?(o("Configuracin guardada correctamente"),setTimeout(()=>o(""),3e3)):alert("Eror al guardar")}catch(m){console.error("Error saving:",m),alert("Error al guardar")}finally{a(!1)}},h=(u,m,p)=>{const v=e.find(j=>j.code===u);return v?r.jsxs(We,{className:"shadow-lg border-none overflow-hidden h-full",children:[r.jsx(vt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(bt,{className:"flex items-center gap-2",children:[p,m]})}),r.jsxs(Mt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:v.prefix||"",onChange:j=>c(v.id,"prefix",j.target.value),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500 font-mono"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secuencia Actual"}),r.jsx("input",{type:"number",value:v.currentValue,onChange:j=>c(v.id,"currentValue",parseInt(j.target.value)),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500 font-mono"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Prximo: ",v.prefix,String(v.currentValue+1).padStart(v.length,"0")]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud (Ceros)"}),r.jsx("input",{type:"number",value:v.length,onChange:j=>c(v.id,"length",parseInt(j.target.value)),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:()=>f(v),disabled:n,className:"bg-blue-600 hover:bg-blue-700 w-full",children:"Guardar Cambios"})})]})]}):null};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-5xl mx-auto p-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Configuracin de Compras"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione las secuencias de documentos para el ciclo de compras."})]}),s&&r.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-lg text-sm font-medium animate-pulse",children:s})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h("PURCHASE_ORDER","Orden de Compra",r.jsx(Pr,{className:"h-5 w-5 text-blue-600"})),h("GOODS_RECEIPT","Recepcin de Mercanca",r.jsx(Rn,{className:"h-5 w-5 text-orange-600"})),h("DIRECT_PURCHASE","Factura Directa",r.jsx(Pr,{className:"h-5 w-5 text-emerald-600"}))]})]})},yde="\n    .custom-scrollbar::-webkit-scrollbar { width: 6px; }\n    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\n    .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }\n    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }\n    \n    @keyframes slideIn {\n        from { transform: translateX(20px); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n    }\n    .animate-slide-in { animation: slideIn 0.3s ease forwards; }\n",Xs="http://localhost:5006/api",bde=()=>{var fe,pe,Ie,Oe,_e,Re;const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(null),[o,l]=x.useState(null),[c,f]=x.useState(!1),[h,u]=x.useState(!1),[m,p]=x.useState("properties"),[v,j]=x.useState([]),[y,b]=x.useState(""),[N,k]=x.useState([]),[D,E]=x.useState([]),[P,C]=x.useState(!1),[O,A]=x.useState(null),[_,z]=x.useState("receipt.NumeroRecibo"),[G,T]=x.useState(!1),[M,W]=x.useState([]),[Z,B]=x.useState(!1);x.useEffect(()=>{he(),me(),U()},[]);const U=async()=>{B(!0);try{const ee=await fetch("".concat(Xs,"/Printers"));if(ee.ok){const ye=await ee.json();W(ye)}}catch(ee){console.error("Error fetching printers:",ee)}finally{B(!1)}},[$,K]=x.useState("Informacin Adicional"),[V,F]=x.useState({company:{name:"MI EMPRESA S.A.",rnc:"123-456-789",address:"Calle Principal #123, Santo Domingo",phone:"(809) 555-1234"},receipt:{NumeroRecibo:"REC-0001",NumeroFactura:"FACT-0001",date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),cashier:"Juan Prez",client:"Cliente General",subtotal:100,tax:18,total:118,paymentMethod:"Efectivo",ncf:"B0100000001",ncfExpiration:"31/12/2025",tipoNCF:"Factura de Crdito Fiscal",clientRnc:"101-00000-1",clientAddress:"Av. Winston Churchill, Santo Domingo",items:[{description:"Martillo De Ua 16oz",quantity:1,price:450,total:450,sku:"HER-001",discount:0,tax:81},{description:'Clavos de Acero 2"',quantity:50,price:2.5,total:125,sku:"FER-005",discount:5,tax:22.5},{description:"Cinta Mtrica 5m",quantity:1,price:350,total:350,sku:"HER-002",discount:0,tax:63}]}}),L=x.useMemo(()=>{const ee={empresa:[{id:"companyLogo",type:"image",label:"Logo Empresa",source:"company.logoPath",height:60,alignment:"center"},{id:"companyName",type:"text",label:"Nombre Empresa",source:"company.name",fontSize:14,bold:!0,alignment:"center"},{id:"companyRNC",type:"text",label:"RNC",source:"company.rnc",fontSize:10,alignment:"center"},{id:"companyAddress",type:"text",label:"Direccin",source:"company.address",fontSize:9,alignment:"center"},{id:"companyPhone",type:"text",label:"Telfono",source:"company.phone",fontSize:9,alignment:"center"}],recibo:[{id:"invoiceNumber",type:"text",label:"No. Factura",source:"receipt.NumeroFactura",fontSize:10,alignment:"left"},{id:"receiptNumber",type:"text",label:"NumeroRecibo",source:"receipt.NumeroRecibo",fontSize:10,alignment:"left"},{id:"date",type:"text",label:"Fecha",source:"receipt.date",format:"date",fontSize:10,alignment:"left"},{id:"time",type:"text",label:"Hora",source:"receipt.time",format:"time",fontSize:10,alignment:"left"},{id:"cashier",type:"text",label:"Cajero",source:"receipt.cashier",fontSize:10,alignment:"left"},{id:"client",type:"text",label:"Cliente",source:"receipt.client",fontSize:10,alignment:"left"},{id:"clientRnc",type:"text",label:"RNC Cliente",source:"receipt.clientRnc",fontSize:10,alignment:"left"},{id:"clientAddress",type:"text",label:"Direccin Cliente",source:"receipt.clientAddress",fontSize:10,alignment:"left"},{id:"ncf",type:"text",label:"NCF",source:"receipt.ncf",fontSize:10,alignment:"left"},{id:"ncfExpiration",type:"text",label:"Vencimiento NCF",source:"receipt.ncfExpiration",fontSize:9,alignment:"left"},{id:"tipoNCF",type:"text",label:"Tipo NCF",source:"receipt.tipoNCF",fontSize:9,alignment:"left"},{id:"itemsTable",type:"table",label:"Tabla Detalles (Built-in)",source:"receipt.items",fontSize:9}],totales:[{id:"subtotal",type:"text",label:"Subtotal",source:"receipt.subtotal",format:"currency",fontSize:10,alignment:"right"},{id:"itbis",type:"text",label:"ITBIS",source:"receipt.tax",format:"currency",fontSize:10,alignment:"right"},{id:"total",type:"text",label:"Total",source:"receipt.total",format:"currency",fontSize:14,bold:!0,alignment:"right"},{id:"paymentMethod",type:"text",label:"Mtodo Pago",source:"receipt.paymentMethod",fontSize:10,alignment:"left"}],visuales:[{id:"separator",type:"line",label:"Lnea Separadora",style:"solid"},{id:"space_small",type:"space",label:"Espacio Pequeo",height:10},{id:"space_large",type:"space",label:"Espacio Grande",height:20},{id:"customText",type:"text",label:"Texto Simple",text:"Gracias por su compra!",fontSize:12,bold:!0,alignment:"center"},{id:"compositeText",type:"composite",label:"Texto Compuesto",text:"{receipt.NumeroRecibo} - {receipt.date}",fontSize:10,alignment:"center"}]};return y&&N.length>0&&(ee.sqlView=N.map(ye=>{const Me=ye.Name||ye.name||ye.NAME;return{id:"sql_".concat(y,"_").concat(Me),type:"text",label:"".concat(Me),source:"ext.".concat(Me),fontSize:10,alignment:"left"}})),ee},[y,N]),X=[{label:"Nombre Empresa",value:"{company.name}"},{label:"RNC",value:"{company.rnc}"},{label:"Direccin",value:"{company.address}"},{label:"Telfono",value:"{company.phone}"},{label:"NumeroRecibo",value:"{receipt.NumeroRecibo}"},{label:"Fecha",value:"{receipt.date}"},{label:"Hora",value:"{receipt.time}"},{label:"Cajero",value:"{receipt.cashier}"},{label:"Cliente",value:"{receipt.client}"},{label:"RNC Cliente",value:"{receipt.clientRnc}"},{label:"Dir. Cliente",value:"{receipt.clientAddress}"},{label:"NCF",value:"{receipt.ncf}"},{label:"Vencimiento NCF",value:"{receipt.ncfExpiration}"},{label:"Tipo NCF",value:"{receipt.tipoNCF}"},{label:"Subtotal",value:"{receipt.subtotal}"},{label:"ITBIS",value:"{receipt.tax}"},{label:"Total",value:"{receipt.total}"}],Y=x.useMemo(()=>{const ee=[{label:"Descripcin",value:"description"},{label:"Cantidad",value:"quantity"},{label:"Precio",value:"price"},{label:"Total Fila",value:"total"},{label:"SKU / Cdigo",value:"sku"},{label:"Descuento",value:"discount"},{label:"ITBIS Art.",value:"tax"}];return y&&N.length>0&&N.forEach(ye=>{const Me=ye.Name||ye.name||ye.NAME;ee.push({label:"SQL: ".concat(Me),value:Me})}),ee},[y,N]);x.useEffect(()=>{he(),Ge(),me()},[]),x.useEffect(()=>{var ee;if((ee=a==null?void 0:a.config)!=null&&ee.sections){const ye=a.config.sections.find(Me=>{var ne;return(ne=Me.viewBinding)==null?void 0:ne.viewName});ye&&(console.log("Template has binding, fetching data for:",ye.viewBinding.viewName),xe(ye.viewBinding.viewName))}},[a==null?void 0:a.id]);const me=async()=>{C(!0),A(null);try{const ee=new AbortController,ye=setTimeout(()=>ee.abort(),5e3),Me=await fetch("".concat(Xs,"/SqlMetadata/Ping"),{signal:ee.signal}).catch(()=>null);Me&&!Me.ok&&console.warn("Ping failed, but continuing with Views fetch...");const ne=await fetch("".concat(Xs,"/SqlMetadata/Views"),{signal:ee.signal});if(clearTimeout(ye),ne.ok){const q=await ne.json();console.log("SQL Views loaded:",q),j(q),A(null)}else{const q=await ne.json().catch(()=>({}));A(q.message||"Error del servidor (".concat(ne.status,"): El endpoint no fue encontrado o el backend no est cargando este controlador."))}}catch(ee){console.error("Error fetching SQL views:",ee),ee.name==="AbortError"?A("La conexin con el servidor SQL tard demasiado (Timeout)."):A("No se pudo conectar con el servidor. Verifique que el API est activo en "+Xs)}finally{C(!1)}},xe=async ee=>{if(ee){C(!0);try{const ye=await fetch("".concat(Xs,"/SqlMetadata/Views/").concat(encodeURIComponent(ee),"/Columns"));if(ye.ok){const ne=await ye.json();k(ne),E([])}const Me=await fetch("".concat(Xs,"/SqlMetadata/Execute/").concat(encodeURIComponent(ee)));if(Me.ok){const ne=await Me.json();let q=ne;if(Array.isArray(ne)&&(q=ne.length>0?ne[0]:null),!q&&data.length>0&&(q={},data.forEach(Q=>{const ve=Q.Name||Q.name||Q.NAME;q[ve]="[".concat(ve,"]")}),console.log("Generated MOCK data for preview:",q)),q){const Q={};Object.keys(q).forEach(ve=>{Q[ve]=q[ve],Q[ve.toLowerCase()]=q[ve]}),F(ve=>({...ve,ext:Q}))}}}catch(ye){console.error("Error fetching view metadata:",ye)}finally{C(!1)}}},Pe=()=>{if(!y||D.length===0)return;const ee="ext_".concat(y.toLowerCase(),"_").concat(Date.now()),ye=D.map((q,Q)=>({id:"field_".concat(ee,"_").concat(Q),type:"text",label:q,source:"ext.".concat(q),fontSize:10,alignment:"left",marginBottom:2})),Me={id:ee,name:$,order:(a.config.sections.length>0?Math.max(...a.config.sections.map(q=>q.order)):0)+1,visible:!0,fields:ye,viewBinding:{viewName:y,mappingField:_}},ne={...a.config,sections:[...a.config.sections,Me]};s({...a,config:ne}),alert("Seccin agregada al final del recibo con los campos seleccionados."),p("properties")},Ge=async()=>{try{const ee=await fetch("".concat(Xs,"/CompanyConfiguration"));if(ee.ok){const ye=await ee.json();F(Me=>({...Me,company:{name:ye.nombreEmpresa||Me.company.name,rnc:ye.rnc||Me.company.rnc,address:ye.direccion||Me.company.address,phone:ye.telefono||Me.company.phone,logoPath:ye.logoPath?"".concat(Xs.replace("/api","")).concat(ye.logoPath):null}}))}}catch(ee){console.error("Error fetching company config:",ee)}},he=async()=>{try{const ee=await sz();if(n(ee),ee.length>0){const ye=ee.find(Me=>Me.porDefecto)||ee[0];ie(ye.id)}else s({nombre:"Nueva Plantilla",tipoRecibo:"Venta",anchoMM:80,config:{paperWidth:"80mm",padding:0,sections:[{id:"header",name:"Encabezado",order:1,visible:!0,fields:[]},{id:"info",name:"Informacin",order:2,visible:!0,fields:[]},{id:"items",name:"Productos",order:3,visible:!0,type:"table",fields:[]},{id:"totals",name:"Totales",order:4,visible:!0,fields:[]},{id:"footer",name:"Pie",order:5,visible:!0,fields:[]}]}})}catch(ee){console.error("Error loading templates:",ee)}},ie=async ee=>{try{const ye=await oz(ee),Me=JSON.parse(ye.configuracionJSON);s({...ye,config:Me})}catch(ye){console.error("Error loading template:",ye)}},Ce=ee=>{if(!ee.destination)return;const{source:ye,destination:Me,draggableId:ne}=ee;if(ye.droppableId==="palette"){let q=null;for(const be of Object.values(L)){const Le=be.find(Qe=>Qe.id===ne);if(Le){console.log("Found field in palette:",Le),q={...Le,id:"".concat(Le.id,"_").concat(Date.now())};break}}if(!q){console.warn("Field not found in palette:",ne);return}const Q={...a.config},ve=Q.sections.findIndex(be=>be.id===Me.droppableId);ve!==-1&&(Q.sections[ve].fields||(Q.sections[ve].fields=[]),Q.sections[ve].fields.splice(Me.index,0,q),s({...a,config:Q}))}else{const q={...a.config},Q=q.sections.findIndex(be=>be.id===ye.droppableId),ve=q.sections.findIndex(be=>be.id===Me.droppableId);if(Q!==-1&&ve!==-1){const be=[...q.sections[Q].fields||[]],[Le]=be.splice(ye.index,1);if(ye.droppableId===Me.droppableId)be.splice(Me.index,0,Le),q.sections[Q].fields=be;else{const Qe=[...q.sections[ve].fields||[]];Qe.splice(Me.index,0,Le),q.sections[Q].fields=be,q.sections[ve].fields=Qe}s({...a,config:q})}}},se=(ee,ye,Me,ne)=>{const q={...a.config},Q=q.sections.findIndex(ve=>ve.id===ee);if(Q!==-1){if(ee===ye)q.sections[Q][Me]=ne;else{const ve=q.sections[Q].fields.findIndex(be=>be.id===ye);ve!==-1&&(q.sections[Q].fields[ve][Me]=ne)}s({...a,config:q}),o&&o.id===ye&&l({...o,[Me]:ne})}},oe=(ee,ye)=>{const Me={...a.config},ne=Me.sections.findIndex(q=>q.id===ee);ne!==-1&&(ee===ye?(Me.sections[ne].type=void 0,Me.sections[ne].fields=[]):Me.sections[ne].fields=Me.sections[ne].fields.filter(q=>q.id!==ye),s({...a,config:Me}),o&&o.id===ye&&l(null))},Fe=(ee,ye,Me,ne)=>{ee.preventDefault(),ee.stopPropagation();const q=ee.clientX,Q=[...Me.columns||[]],ve=Q[ye],be=Q[ye+1];if(!ve||!be)return;const Le=ve.width,Qe=be.width,tt=ee.target.closest(".receipt-table");if(!tt)return;const ct=tt.offsetWidth,Ft=Et=>{const dt=(Et.clientX-q)/ct*100;let wr=Le+dt,er=Qe-dt;wr<5||er<5||(ve.width=wr,be.width=er,se(ne,Me.id,"columns",[...Q]))},Dt=()=>{document.removeEventListener("mousemove",Ft),document.removeEventListener("mouseup",Dt)};document.addEventListener("mousemove",Ft),document.addEventListener("mouseup",Dt)},ze=(ee,ye)=>{const Me={...a.config,[ee]:ye};s({...a,config:Me})},De=(ee,ye)=>{if(!ee)return"";const Me=ee.split(".");let ne=V;for(const q of Me)ne=ne&&ne[q]!==void 0?ne[q]:"";return ye==="currency"?"$".concat(Number(ne).toFixed(2)):ne},Ue=ee=>ee?ee.replace(/\{([\w\.]+)\}/g,(ye,Me)=>{const ne=De(Me);return ne!=null?ne:""}):"",Xe=(ee,ye)=>{var ve;const Me=ee.alignment||"left",ne=ee.fontSize||10,q=ee.bold?"bold":"normal";if(ee.type==="line"){const be=ee.style==="double"?"double":ee.style==="dashed"?"dashed":"solid";return r.jsx("hr",{style:{borderTop:"1px ".concat(be," #000"),margin:"5px 0"}})}if(ee.type==="space")return r.jsx("div",{style:{height:"".concat(ee.height||10,"px")}});if(ee.type==="image"){const be=De(ee.source);return be?r.jsx("div",{style:{textAlign:ee.alignment||"center",marginBottom:"5px"},children:r.jsx("img",{src:be,alt:"logo",style:{maxHeight:"".concat(ee.height||60,"px"),maxWidth:"100%",objectFit:"contain"}})}):r.jsx("div",{className:"text-red-500 text-xs text-center",children:"[Imagen no encontrada]"})}if(ee.type==="table"){const be=((ve=V.receipt)==null?void 0:ve.items)||[],Le=ee.columns&&ee.columns.length>0?ee.columns:[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Prec",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}],Qe=Array.isArray(Le)?Le.filter(Et=>Et&&Et.active!==!1):[],tt=ee.rowLayout||[{type:"columns"}],ct=ee.headerBorder||"dashed",Ft=ct==="none"?"none":"1px ".concat(ct," black"),Dt=Et=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Et||0);return Qe.length===0&&tt.length===0?r.jsx("div",{className:"p-2 border border-dashed text-gray-400 text-[10px] text-center italic",children:"Tabla sin configuracin"}):r.jsxs("div",{className:"receipt-table",style:{width:"100%",fontSize:"".concat(ne,"px"),fontFamily:"monospace",marginBottom:"5px"},children:[tt.some(Et=>Et.type==="columns")&&r.jsx("div",{style:{display:"flex",borderBottom:Ft,paddingBottom:"2px",marginBottom:"2px",fontWeight:"bold",position:"relative"},children:Qe.map((Et,qt)=>r.jsxs("div",{style:{width:"".concat(Et.width,"%"),textAlign:Et.alignment||"left",position:"relative"},children:[Et.label||"Col",ee.resizeMode&&qt<Qe.length-1&&r.jsx("div",{onMouseDown:dt=>Fe(dt,qt,ee,ye),style:{position:"absolute",right:0,top:0,bottom:0,width:"10px",cursor:"col-resize",zIndex:10,transform:"translateX(50%)",display:"flex",justifyContent:"center"},className:"group/resizer hover:bg-blue-100/50",children:r.jsx("div",{className:"w-[2px] h-full bg-blue-400 opacity-50 group-hover/resizer:opacity-100"})})]},qt))}),Array.isArray(be)&&be.slice(0,3).map((Et,qt)=>r.jsx("div",{style:{marginBottom:"4px",borderBottom:qt<be.length-1?"1px dotted #ccc":"none"},children:tt.map((dt,wr)=>{if(dt.type==="columns")return r.jsx("div",{style:{display:"flex"},children:Qe.map((er,la)=>r.jsx("div",{style:{width:"".concat(er.width,"%"),textAlign:er.alignment||"left",overflow:"hidden"},children:er.format==="currency"?Dt(Et[er.field]):Et[er.field]||"-"},la))},wr);if(dt.type==="text"){const er=dt.text?dt.text.replace(/\{(\w+)\}/g,(la,kn)=>Et[kn]||la):"";return r.jsx("div",{style:{textAlign:dt.alignment||"left",fontSize:"".concat(dt.fontSize||ne-1,"px"),fontStyle:"italic",color:"#666",whiteSpace:"pre-wrap"},children:er},wr)}else if(dt.type==="separator")return r.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"2px 0"}},wr);return null})},qt))]})}let Q="";return ee.type==="composite"||ee.text&&ee.text.includes("{")?Q=Ue(ee.text):Q=ee.text||(ee.source?De(ee.source,ee.format):""),(!Q||Q==="")&&(Q="[".concat(ee.label||"Campo Vaco","]")),r.jsx("div",{style:{textAlign:Me,fontSize:"".concat(ne,"px"),fontWeight:q,marginBottom:"3px"},children:Q})},Ze=async()=>{var ee;if(a){f(!0);try{const ye={Id:a.id||0,Nombre:a.nombre||a.Nombre||"Nueva Plantilla",Descripcion:a.descripcion||a.Descripcion||"",TipoRecibo:a.tipoRecibo||a.TipoRecibo||"Venta",AnchoMM:a.anchoMM||a.AnchoMM||(((ee=a.config)==null?void 0:ee.paperWidth)==="58mm"?58:80),PrinterName:a.printerName||a.PrinterName||"",ConfiguracionJSON:JSON.stringify(a.config),Activo:a.activo!==void 0?a.activo:a.Activo!==void 0?a.Activo:!0,PorDefecto:a.porDefecto!==void 0?a.porDefecto:a.PorDefecto!==void 0?a.PorDefecto:!1,Usuario:a.usuario||a.Usuario||"Admin"},Me=ye.Id&&ye.Id>2e9;if(ye.Id&&!Me)await cz(ye.Id,ye);else{const{Id:ne,...q}=ye;await lz(q)}alert("Plantilla guardada exitosamente!"),he()}catch(ye){console.error("Error saving template:",ye),alert("Error al guardar: "+ye.message)}finally{f(!1)}}},J=ee=>{if(!o)return;const ye=o.text||"";se(o.sectionId,o.id,"text",ye+ee)};return r.jsxs(M$,{onDragEnd:Ce,children:[r.jsx("style",{children:yde}),r.jsxs("div",{className:"flex flex-col h-screen bg-gray-100 font-sans text-gray-800",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",onClick:()=>e("/configuracion/pos"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diseador de Recibos"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("select",{className:"text-xs bg-gray-50 border rounded px-2 py-1 font-semibold text-gray-700 focus:ring-1 focus:ring-hd-orange",value:(a==null?void 0:a.id)||"",onChange:ee=>ie(ee.target.value),children:t.map(ee=>r.jsx("option",{value:ee.id,children:ee.nombre},ee.id))}),r.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest px-2 py-0.5 bg-gray-100 rounded",children:(a==null?void 0:a.tipoRecibo)||"Venta"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full",children:[r.jsx("div",{className:"h-2 w-2 rounded-full ".concat(O&&O.includes("API")?"bg-red-500 animate-pulse":"bg-green-500")}),r.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:O&&O.includes("API")?"API Offline":"API Online"})]}),r.jsxs(re,{variant:"outline",className:"h-9 px-4 text-gray-600 hover:text-hd-orange transition-colors",onClick:()=>e("/configuracion"),children:[r.jsx(un,{className:"h-4 w-4 mr-2"})," Volver"]}),r.jsx("div",{className:"h-6 w-px bg-gray-200"}),r.jsxs(re,{variant:"outline",className:"h-9 px-4 text-gray-600",onClick:()=>u(!0),children:[r.jsx(ci,{className:"h-4 w-4 mr-2"})," Previsualizar"]}),r.jsxs(re,{className:"h-9 px-6 bg-hd-orange text-white hover:bg-orange-600 shadow-md transform active:scale-95 transition-all",onClick:Ze,disabled:c,children:[c?r.jsx(Fn,{className:"h-4 w-4 animate-spin mr-2"}):r.jsx(Kt,{className:"h-4 w-4 mr-2"}),"GUARDAR CAMBIOS"]})]})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:"w-72 bg-white border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b bg-gray-50 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Paleta de Campos"}),r.jsx(Lt,{className:"h-4 w-4 text-hd-orange"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar",children:r.jsx(Ap,{droppableId:"palette",isDropDisabled:!0,children:ee=>{let ye=0;return r.jsxs("div",{ref:ee.innerRef,...ee.droppableProps,style:{minHeight:"100%"},children:[Object.entries(L).map(([Me,ne])=>r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"h-1 w-1 bg-hd-orange rounded-full"}),r.jsx("h4",{className:"text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:Me==="sqlView"?"DATO EXTERNO (SQL)":Me})]}),r.jsx("div",{className:"space-y-2",children:ne.map(q=>{const Q=ye++;return r.jsx(Ep,{draggableId:q.id,index:Q,children:(ve,be)=>r.jsx("div",{ref:ve.innerRef,...ve.draggableProps,...ve.dragHandleProps,style:{...ve.draggableProps.style},className:"p-3 bg-white border border-gray-100 rounded shadow-sm cursor-move hover:border-hd-orange hover:shadow-md transition-all group ".concat(be.isDragging?"ring-2 ring-hd-orange ring-opacity-50":""),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vy,{className:"h-4 w-4 text-gray-300 group-hover:text-hd-orange"}),r.jsx("span",{className:"text-xs font-bold text-gray-700",children:q.label})]}),Me==="sqlView"&&r.jsx(Bd,{className:"h-3 w-3 text-blue-400"})]})})},q.id)})})]},Me)),ee.placeholder]})}})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-200/50 p-12 custom-scrollbar flex justify-center items-start",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-16 h-6 bg-gray-400/20 rounded z-0"}),r.jsxs("div",{className:"bg-white shadow-[0_10px_40px_rgba(0,0,0,0.1)] border-t-[3px] border-hd-orange overflow-hidden relative z-10",style:{width:((fe=a==null?void 0:a.config)==null?void 0:fe.paperWidth)==="58mm"?"220px":"302px",minHeight:"600px",transition:"width 0.3s ease"},children:[r.jsx("div",{className:"h-2 w-full bg-white relative overflow-hidden",children:r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 flex justify-around opacity-20",children:Array(20).fill(0).map((ee,ye)=>r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 -mt-1"},ye))})}),r.jsx("div",{className:"p-4",children:(Ie=(pe=a==null?void 0:a.config)==null?void 0:pe.sections)==null?void 0:Ie.map(ee=>r.jsx(Ap,{droppableId:ee.id,children:(ye,Me)=>{var ne;return r.jsxs("div",{ref:ye.innerRef,...ye.droppableProps,className:"min-h-[40px] mb-4 p-2 rounded ".concat(Me.isDraggingOver?"bg-orange-50 border border-orange-200":"border border-transparent"),children:[r.jsxs("div",{className:"text-[10px] text-gray-400 mb-1.5 font-black uppercase flex justify-between items-center tracking-tighter",children:[r.jsx("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-gray-500",children:ee.name}),ee.type==="table"&&r.jsxs("span",{className:"text-blue-500 flex items-center gap-1 cursor-pointer hover:underline",onClick:()=>l({...ee,sectionId:ee.id}),children:[r.jsx(Bd,{size:10})," Editar Columnas"]})]}),ee.type==="table"?r.jsx("div",{className:"p-1 rounded cursor-pointer ".concat((o==null?void 0:o.id)===ee.id?"bg-orange-50 border border-orange-200":"hover:bg-gray-50"),onClick:()=>l({...ee,sectionId:ee.id}),children:Xe({type:"table",...ee},ee.id)}):(ne=ee.fields)==null?void 0:ne.map((q,Q)=>r.jsx(Ep,{draggableId:q.id,index:Q,children:(ve,be)=>r.jsxs("div",{ref:ve.innerRef,...ve.draggableProps,className:"group relative ".concat(be.isDragging?"opacity-50":""),onClick:()=>l({...q,sectionId:ee.id}),children:[r.jsx("div",{...ve.dragHandleProps,className:"absolute -left-4 top-1 opacity-0 group-hover:opacity-100 cursor-move",children:r.jsx(Vy,{className:"h-4 w-4 text-gray-400"})}),r.jsx("div",{className:"p-1 rounded ".concat((o==null?void 0:o.id)===q.id?"bg-orange-50 border border-orange-200":"hover:bg-gray-50"),children:Xe(q,ee.id)}),r.jsx("button",{onClick:Le=>{Le.stopPropagation(),oe(ee.id,q.id)},className:"absolute -right-4 top-1 opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700",children:r.jsx(rr,{className:"h-3.5 w-3.5"})})]})},q.id)),ye.placeholder]})}},ee.id))})]})]})}),r.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col overflow-hidden shadow-xl",children:[r.jsxs("div",{className:"flex border-b",children:[r.jsxs("button",{onClick:()=>p("properties"),className:"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-2 ".concat(m==="properties"?"text-hd-orange border-b-2 border-hd-orange bg-orange-50":"text-gray-500 hover:bg-gray-50"),children:[r.jsx(di,{className:"h-3.5 w-3.5"})," Propiedades"]}),r.jsxs("button",{onClick:()=>p("views"),className:"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-2 ".concat(m==="views"?"text-hd-orange border-b-2 border-hd-orange bg-orange-50":"text-gray-500 hover:bg-gray-50"),children:[r.jsx(Bd,{className:"h-3.5 w-3.5"})," Vista SQL"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:m==="properties"?r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("h3",{className:"text-xs font-black text-gray-700 uppercase tracking-tight flex items-center gap-2",children:[o?r.jsx(eL,{size:14,className:"text-hd-orange"}):r.jsx(ja,{size:14,className:"text-hd-orange"}),o?"Configurar Campo":"Diseo del Recibo"]}),o?r.jsxs("div",{className:"space-y-5 animate-in slide-in-from-right-2 duration-200",children:[r.jsxs("div",{className:"space-y-4 bg-gray-50 p-3 rounded-lg border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[8px] font-black text-gray-400 uppercase mb-2 tracking-widest",children:"Alineacin Horizontal"}),r.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(ee=>r.jsxs("button",{onClick:()=>se(o.sectionId,o.id,"alignment",ee),className:"flex-1 h-8 flex items-center justify-center rounded border transition-all ".concat(o.alignment===ee?"bg-hd-orange text-white border-hd-orange shadow-sm":"bg-white text-gray-400 border-gray-200 hover:border-hd-orange hover:text-hd-orange"),children:[ee==="left"&&r.jsx(TC,{size:16}),ee==="center"&&r.jsx(MC,{size:16}),ee==="right"&&r.jsx(_C,{size:16})]},ee))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[8px] font-black text-gray-400 uppercase mb-1 tracking-widest",children:"Tamao (px)"}),r.jsx(ge,{type:"number",value:o.fontSize||10,className:"h-8 text-xs font-bold",onChange:ee=>se(o.sectionId,o.id,"fontSize",parseInt(ee.target.value))})]}),r.jsx("div",{className:"flex flex-col justify-end",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer h-8 px-2 bg-white border rounded hover:border-hd-orange transition-colors",children:[r.jsx("input",{type:"checkbox",checked:o.bold||!1,className:"rounded text-hd-orange focus:ring-hd-orange",onChange:ee=>se(o.sectionId,o.id,"bold",ee.target.checked)}),r.jsx("span",{className:"text-[10px] font-bold text-gray-600",children:"Negrita"})]})})]})]}),o.type==="composite"&&r.jsxs("div",{className:"space-y-3 p-3 bg-white border rounded-lg shadow-sm",children:[r.jsx("label",{className:"block text-[10px] font-bold text-gray-700 uppercase",children:"Texto Dinmico"}),r.jsx("textarea",{value:o.text||"",rows:3,className:"w-full text-xs border rounded-md p-2 focus:ring-1 focus:ring-hd-orange outline-none bg-gray-50",onChange:ee=>se(o.sectionId,o.id,"text",ee.target.value),placeholder:"Escribe aqu. Usa el men de abajo para insertar variables."}),r.jsx("div",{className:"grid grid-cols-2 gap-1.5 max-h-40 overflow-y-auto p-1.5 border rounded bg-gray-50 custom-scrollbar",children:X.map(ee=>r.jsx("button",{onClick:()=>J(ee.value),className:"text-left text-[9px] p-2 bg-white border border-gray-100 rounded shadow-sm truncate hover:border-hd-orange hover:text-hd-orange transition-colors",children:ee.label},ee.value))})]}),o.type==="table"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-800 text-white p-2.5 rounded-t-lg",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Columnas Principales"}),r.jsx("span",{className:"text-[9px] text-gray-400",children:"Campos en la fila central"})]}),r.jsxs("div",{className:"flex gap-1 items-center",children:[r.jsxs("button",{onClick:()=>se(o.sectionId,o.id,"resizeMode",!o.resizeMode),className:"px-2 py-1 rounded text-[9px] font-black uppercase transition-colors flex items-center gap-1 ".concat(o.resizeMode?"bg-blue-500 text-white":"bg-gray-700 text-gray-400 hover:text-white"),title:"Activar para redimensionar columnas con el mouse",children:[r.jsx(Z6,{size:10})," ",o.resizeMode?"Ajustando":"Ajustar"]}),r.jsx("div",{className:"w-px h-3 bg-gray-600 mx-1"}),r.jsx("button",{onClick:()=>{const ee=o.columns||[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Prec",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}],ye=.8,Me=ee.map(ve=>({...ve,width:Math.floor(ve.width*ye)})),Q={label:"Nuevo",field:"description",width:100-Me.reduce((ve,be)=>ve+be.width,0),alignment:"left",active:!0};se(o.sectionId,o.id,"columns",[...Me,Q])},className:"px-2 py-1 bg-hd-orange rounded text-[9px] font-black uppercase hover:bg-white hover:text-hd-orange transition-colors",children:"+ Col"}),r.jsx("button",{onClick:()=>{const ee=[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Prec",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}];se(o.sectionId,o.id,"columns",ee)},className:"px-2 py-1 bg-white/10 rounded text-[9px] font-black uppercase hover:bg-white/20 transition-colors",children:"Reset"})]})]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto p-1.5 border border-t-0 rounded-b-lg bg-gray-50 custom-scrollbar",children:(o.columns||[]).map((ee,ye)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200 space-y-2 shadow-sm relative group/col",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ge,{placeholder:"Etiqueta",value:ee.label,className:"h-7 text-[10px] font-bold",onChange:Me=>{const ne=[...o.columns||[]];ne[ye].label=Me.target.value,se(o.sectionId,o.id,"columns",ne)}}),r.jsxs("select",{value:ee.field,className:"h-7 text-[10px] border rounded bg-white focus:ring-1 focus:ring-hd-orange outline-none",onChange:Me=>{const ne=[...o.columns||[]];ne[ye].field=Me.target.value,se(o.sectionId,o.id,"columns",ne)},children:[r.jsx("option",{value:"",children:"Seleccionar Campo..."}),Y.map(Me=>r.jsx("option",{value:Me.value,children:Me.label},Me.value))]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1.5 border-t border-gray-100",children:[r.jsx("div",{className:"flex bg-gray-100 rounded p-0.5",children:["left","center","right"].map(Me=>r.jsxs("button",{onClick:()=>{const ne=[...o.columns||[]];ne[ye].alignment=Me,se(o.sectionId,o.id,"columns",ne)},className:"p-1 rounded text-gray-500 hover:text-hd-orange transition-colors ".concat(ee.alignment===Me?"bg-white shadow text-hd-orange font-bold":""),title:Me==="left"?"Izquierda":Me==="center"?"Centro":"Derecha",children:[Me==="left"&&r.jsx(TC,{size:10}),Me==="center"&&r.jsx(MC,{size:10}),Me==="right"&&r.jsx(_C,{size:10})]},Me))}),r.jsxs("div",{className:"flex items-center bg-gray-100 rounded px-2 h-6 flex-1",children:[r.jsx("span",{className:"text-[8px] font-black text-gray-400 mr-2 uppercase",children:"W%"}),r.jsx("input",{type:"number",value:ee.width,className:"bg-transparent text-[10px] font-bold w-full text-center outline-none",onChange:Me=>{const ne=[...o.columns||[]];ne[ye].width=parseInt(Me.target.value),se(o.sectionId,o.id,"columns",ne)}})]}),r.jsxs("select",{value:ee.format||"",className:"h-6 text-[9px] border rounded flex-1 bg-white",onChange:Me=>{const ne=[...o.columns||[]];ne[ye].format=Me.target.value,se(o.sectionId,o.id,"columns",ne)},children:[r.jsx("option",{value:"",children:"Sin Formato"}),r.jsx("option",{value:"currency",children:"Moneda ($)"})]}),r.jsx("button",{className:"text-gray-300 hover:text-red-500 transition-colors ml-auto",onClick:()=>{const Me=(o.columns||[]).filter((ne,q)=>q!==ye);se(o.sectionId,o.id,"columns",Me)},children:r.jsx(rr,{size:12})})]})]},ye))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center bg-hd-orange text-white p-2.5 rounded-t-lg",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Fila Extra (Multi-lnea)"}),r.jsx("span",{className:"text-[9px] text-orange-100",children:"Lneas arriba o abajo"})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{const ee=o.rowLayout||[{type:"columns"}];se(o.sectionId,o.id,"rowLayout",[...ee,{type:"text",text:"Ref: {sku}",alignment:"left",fontSize:8}])},className:"px-2 py-1 bg-white text-hd-orange rounded text-[9px] font-black uppercase hover:bg-orange-50 transition-colors",children:"+ Texto"}),r.jsx("button",{onClick:()=>{const ee=o.rowLayout||[{type:"columns"}];se(o.sectionId,o.id,"rowLayout",[...ee,{type:"separator"}])},className:"px-2 py-1 bg-white text-hd-orange rounded text-[9px] font-black uppercase hover:bg-orange-50 transition-colors",children:"+ Raya"})]})]}),r.jsx("div",{className:"space-y-2 p-1.5 border border-t-0 rounded-b-lg bg-gray-50 max-h-60 overflow-y-auto custom-scrollbar",children:(o.rowLayout||[{type:"columns"}]).map((ee,ye,Me)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-gray-100 flex flex-col gap-2 group/row shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded uppercase ".concat(ee.type==="columns"?"bg-hd-orange/10 text-hd-orange":"bg-gray-100 text-gray-500"),children:ee.type==="columns"?"Columnas":ee.type==="text"?"Texto":"Raya"}),r.jsxs("div",{className:"flex items-center gap-1 opacity-50 group-hover:opacity-100 transition-opacity",children:[ye>0&&r.jsx("button",{onClick:()=>{const ne=[...o.rowLayout||[]];[ne[ye],ne[ye-1]]=[ne[ye-1],ne[ye]],se(o.sectionId,o.id,"rowLayout",ne)},className:"text-gray-500 hover:text-hd-orange p-1 bg-gray-100 rounded",title:"Subir",children:r.jsx(GD,{size:14})}),ye<Me.length-1&&r.jsx("button",{onClick:()=>{const ne=[...o.rowLayout||[]];[ne[ye],ne[ye+1]]=[ne[ye+1],ne[ye]],se(o.sectionId,o.id,"rowLayout",ne)},className:"text-gray-500 hover:text-hd-orange p-1 bg-gray-100 rounded",title:"Bajar",children:r.jsx(kr,{size:14})}),ee.type!=="columns"&&r.jsx("button",{onClick:()=>{const ne=(o.rowLayout||[]).filter((q,Q)=>Q!==ye);se(o.sectionId,o.id,"rowLayout",ne)},className:"text-red-400 hover:text-red-600 ml-1 p-1 bg-red-50 rounded",children:r.jsx(rr,{size:14})})]})]}),ee.type==="text"&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ge,{value:ee.text,className:"h-7 text-[10px] flex-1",placeholder:"Ej: SKU: {sku}",onChange:ne=>{const q=[...o.rowLayout||[]];q[ye].text=ne.target.value,se(o.sectionId,o.id,"rowLayout",q)}}),r.jsxs("select",{value:"",className:"h-7 w-8 text-center bg-gray-50 border rounded font-black text-hd-orange text-xs cursor-pointer",onChange:ne=>{if(!ne.target.value)return;const q=[...o.rowLayout||[]];q[ye].text=(q[ye].text||"")+" {".concat(ne.target.value,"}"),se(o.sectionId,o.id,"rowLayout",q)},children:[r.jsx("option",{value:"",children:"+"}),Y.map(ne=>r.jsx("option",{value:ne.value,children:ne.label},ne.value))]})]}),ee.type==="separator"&&r.jsx("div",{className:"h-px w-full border-t border-dashed border-gray-200"})]},ye))})]})]}),r.jsx(re,{variant:"outline",className:"w-full h-9 text-[10px] font-black uppercase tracking-widest border-2 hover:bg-gray-50",onClick:()=>l(null),children:"Cerrar Editor"})]}):r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-3 tracking-widest flex items-center gap-2",children:[r.jsx("div",{className:"h-2 w-2 bg-hd-orange rounded-full"})," Ancho del Papel"]}),r.jsx("div",{className:"flex gap-2",children:["80mm","58mm"].map(ee=>{var ye;return r.jsxs("button",{onClick:()=>ze("paperWidth",ee),className:"flex-1 p-3 border-2 rounded-xl flex flex-col items-center gap-1 transition-all ".concat(((ye=a==null?void 0:a.config)==null?void 0:ye.paperWidth)===ee?"border-hd-orange bg-orange-50 text-hd-orange shadow-inner":"border-gray-100 text-gray-400 hover:border-gray-200"),children:[r.jsx("div",{className:"text-sm font-bold",children:ee}),r.jsx("div",{className:"text-[8px] uppercase tracking-tighter",children:ee==="80mm"?"Estndar":"Cintas"})]},ee)})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Mrgenes Laterales"}),r.jsxs("span",{className:"text-[10px] font-bold text-hd-orange",children:[((Oe=a==null?void 0:a.config)==null?void 0:Oe.padding)||0,"px"]})]}),r.jsx("input",{type:"range",min:"0",max:"30",value:((_e=a==null?void 0:a.config)==null?void 0:_e.padding)||0,className:"w-full accent-hd-orange",onChange:ee=>ze("padding",parseInt(ee.target.value))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 tracking-widest flex items-center gap-2",children:[r.jsx(Is,{className:"h-3 w-3 text-gray-400"})," Impresora Predeterminada"]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:(a==null?void 0:a.printerName)||"",onChange:ee=>{s(ye=>({...ye,printerName:ee.target.value}))},className:"w-full h-10 text-xs font-bold border border-gray-200 rounded-lg px-3 bg-white focus:ring-2 focus:ring-hd-orange outline-none shadow-sm appearance-none",children:[r.jsx("option",{value:"",children:"-- Sin Impresora Asignada --"}),M.map(ee=>r.jsx("option",{value:ee,children:ee},ee))]}),r.jsx("div",{className:"absolute right-3 top-3 pointer-events-none",children:Z?r.jsx(no,{className:"h-4 w-4 text-hd-orange animate-spin"}):r.jsx(kr,{className:"h-4 w-4 text-gray-400"})})]}),r.jsx("p",{className:"text-[8px] text-gray-400 mt-1.5 italic",children:"Esta impresora se usar automticamente al imprimir este recibo."})]}),r.jsxs("div",{className:"p-4 bg-orange-100/50 rounded-xl border border-orange-100 flex flex-col gap-2",children:[r.jsx(ja,{className:"h-5 w-5 text-blue-400 shrink-0"}),r.jsx("p",{className:"text-[9px] text-blue-600 leading-tight",children:"Las vistas SQL te permiten traer datos externos (como estados de cuenta o turnos) a tu recibo."})]})]})]}):r.jsx("div",{className:"p-4 space-y-4 h-full flex flex-col",children:y?r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right duration-300 flex-1 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>b(""),className:"text-[10px] font-black text-hd-orange flex items-center gap-1 uppercase hover:underline tracking-tight",children:[r.jsx(un,{className:"h-3 w-3"})," Lista de Vistas"]}),r.jsx("span",{className:"text-[9px] font-black text-gray-400 bg-gray-100 px-2 py-1 rounded uppercase tracking-tighter",children:y})]}),r.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-xl bg-gray-50/50 shadow-inner custom-scrollbar",children:P?r.jsxs("div",{className:"p-12 text-center text-gray-400",children:[r.jsx(Fn,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-hd-orange"}),r.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Leyendo SQL..."})]}):r.jsx("div",{className:"p-1 space-y-1",children:N.map(ee=>{const ye=ee.Name||ee.name||ee.NAME;return r.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg border border-transparent hover:border-hd-orange cursor-pointer transition-all shadow-sm",children:[r.jsx("input",{type:"checkbox",className:"rounded text-hd-orange focus:ring-hd-orange",checked:D.includes(ye),onChange:Me=>Me.target.checked?E([...D,ye]):E(D.filter(ne=>ne!==ye))}),r.jsx("span",{className:"text-xs font-bold text-gray-600",children:ye})]},ye)})})}),r.jsxs("div",{className:"space-y-3 bg-white p-3 rounded-xl border border-gray-100 shadow-lg mt-auto",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 tracking-widest",children:"Vincular con (Parmetro)"}),r.jsxs("select",{value:_,onChange:ee=>z(ee.target.value),className:"w-full h-9 text-xs font-bold border rounded px-2 bg-white focus:ring-1 focus:ring-hd-orange outline-none",children:[r.jsx("option",{value:"receipt.NumeroRecibo",children:"NumeroRecibo (REC-XXXX)"}),r.jsx("option",{value:"receipt.NumeroFactura",children:"No. Factura (FACT-XXXX)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 tracking-widest",children:"Nombre del Nuevo Grupo"}),r.jsx(ge,{value:$,onChange:ee=>K(ee.target.value),placeholder:"Ej: Historial Pagos",className:"h-9 text-xs font-bold focus:ring-hd-orange"})]}),r.jsx(re,{onClick:Pe,disabled:D.length===0,className:"w-full bg-hd-orange text-white text-xs font-black h-10 shadow-md hover:shadow-lg hover:-translate-y-0.5 transition-all uppercase tracking-widest",children:"VINCULAR DATOS"})]})]}):r.jsxs("div",{className:"space-y-4 flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("h3",{className:"text-xs font-black text-gray-700 uppercase tracking-tight flex items-center gap-2",children:[r.jsx(Bd,{className:"h-4 w-4 text-hd-orange"})," Objetos de Datos SQL"]}),r.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-tighter",children:Xs})]}),r.jsx("button",{onClick:me,disabled:P,className:"p-2 hover:bg-orange-50 rounded-full transition-colors text-hd-orange disabled:opacity-30",children:r.jsx(no,{className:"h-4 w-4 ".concat(P?"animate-spin":"")})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto border border-gray-100 rounded-xl bg-gray-50/50 custom-scrollbar",children:[P&&r.jsxs("div",{className:"p-12 text-center text-gray-400",children:[r.jsx(Fn,{className:"h-8 w-8 animate-spin mx-auto mb-3 text-hd-orange"}),r.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Conectando..."})]}),O&&r.jsxs("div",{className:"p-8 text-center bg-red-50 border border-red-100 rounded-lg m-2",children:[r.jsx(Tt,{className:"h-8 w-8 mx-auto mb-2 text-red-500 opacity-50"}),r.jsx("p",{className:"text-[10px] font-black text-red-600 uppercase mb-2",children:"Error de Conexin"}),r.jsx("p",{className:"text-[9px] text-red-500 italic mb-3",children:O}),r.jsx(re,{size:"sm",variant:"outline",className:"h-7 text-[9px] border-red-200 text-red-600 hover:bg-red-50",onClick:me,children:"REINTENTAR"})]}),!P&&!O&&v.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Bd,{className:"h-12 w-12 mx-auto mb-3 text-gray-200"}),r.jsx("p",{className:"text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Sin datos disponibles"}),r.jsx("p",{className:"text-[9px] text-gray-400 italic mt-2",children:"No se encontraron Vistas o Tablas en el SQL del Backend."})]}),v.map((ee,ye)=>{const Me=ee.Name||ee.name||ee.NAME,ne=ee.Type||ee.type||"View";return r.jsxs("button",{onClick:()=>{b(Me),xe(Me)},className:"w-full text-left px-4 py-3 border-b border-gray-100 last:border-0 hover:bg-white flex justify-between items-center group transition-all hover:shadow-sm",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-bold text-xs text-gray-700",children:Me}),r.jsx("span",{className:"text-[8px] text-orange-400 px-1 py-0.5 bg-orange-50 rounded uppercase font-black self-start mt-1 tracking-tighter",children:ne})]}),r.jsx(ir,{className:"h-4 w-4 text-gray-300 group-hover:text-hd-orange transition-transform group-hover:translate-x-1"})]},Me||ye)})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-lg flex gap-3",children:[r.jsx(ja,{className:"h-5 w-5 text-blue-400 shrink-0"}),r.jsx("p",{className:"text-[9px] text-blue-600 leading-tight",children:"Las vistas SQL te permiten traer datos externos (como estados de cuenta o turnos) a tu recibo."})]})]})})})]})]}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[r.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex items-center justify-between",children:[r.jsxs("h3",{className:"font-black text-gray-800 uppercase tracking-widest text-xs flex items-center gap-2",children:[r.jsx(ci,{className:"h-4 w-4 text-hd-orange"})," Previsualizacin Real"]}),r.jsx("button",{onClick:()=>u(!1),className:"p-1.5 hover:bg-gray-200 rounded-full transition-colors",children:r.jsx(Tt,{className:"h-5 w-5 text-gray-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-10 flex justify-center bg-gray-200 custom-scrollbar",children:r.jsx("div",{className:"bg-white shadow-2xl p-6 ring-1 ring-black/5 h-fit mb-10",style:{width:((Re=a==null?void 0:a.config)==null?void 0:Re.paperWidth)==="58mm"?"220px":"302px",minHeight:"400px"},children:r.jsx(jO,{template:a,data:V})})}),r.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-t flex justify-end gap-3",children:[r.jsx(re,{variant:"outline",className:"h-10 text-xs font-bold px-6",onClick:()=>u(!1),children:"Cerrar"}),r.jsxs(re,{className:"bg-hd-orange text-white h-10 text-xs font-black uppercase tracking-widest px-6 shadow-md",onClick:()=>window.print(),children:[r.jsx(Is,{className:"h-5 w-5 mr-2"})," Imprimir"]})]})]})})]})]})},U$=x.createContext(),jde=({children:e})=>{const[t,n]=x.useState(localStorage.getItem("theme")||"soft-dark");x.useEffect(()=>{document.documentElement.classList.remove("theme-original","theme-homeDepot","theme-soft-dark","theme-light","theme-dark"),document.documentElement.classList.add("theme-".concat(t)),t==="soft-dark"||t==="homeDepot"?document.documentElement.classList.add("theme-dark"):document.documentElement.classList.add("theme-light"),localStorage.setItem("theme",t)},[t]);const a=()=>{n(o=>o==="original"?"soft-dark":"original")},s=t==="soft-dark"||t==="homeDepot";return r.jsx(U$.Provider,{value:{theme:t,toggleTheme:a,setTheme:n,isDarkMode:s},children:e})},wde=()=>{const e=Nt.useContext(U$);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Nde=()=>{const[e,t]=x.useState(""),[n,a]=x.useState(""),[s,o]=x.useState(!1),[l,c]=x.useState(!1),[f,h]=x.useState(""),{login:u}=jl(),{isDarkMode:m}=wde(),p=async v=>{v.preventDefault(),c(!0),h("");try{const j=await fetch("http://localhost:5006/api/Auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:e,password:n})});if(j.ok){const y=await j.json();u(y)}else{const y=await j.json();h(y.message||"Credenciales invlidas (401)")}}catch(j){h("Error de conexin con el servidor")}finally{c(!1)}};return r.jsxs("div",{className:"min-h-screen bg-hd-black flex items-center justify-center p-4 relative overflow-hidden font-sans",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-hd-orange/10 blur-[120px] rounded-full animate-pulse"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-hd-orange/5 blur-[120px] rounded-full"}),r.jsxs("div",{className:"w-full max-w-md bg-zinc-900/80 backdrop-blur-xl rounded-3xl border border-white/10 shadow-2xl p-8 relative z-10 animate-in fade-in zoom-in duration-500",children:[r.jsxs("div",{className:"flex flex-col items-center mb-10",children:[r.jsx("div",{className:"w-16 h-16 bg-hd-orange rounded-2xl flex items-center justify-center shadow-lg shadow-hd-orange/20 mb-6 group transition-transform hover:scale-110",children:r.jsx(aL,{size:36,className:"text-white group-hover:animate-bounce"})}),r.jsx("h1",{className:"text-3xl font-black text-white italic uppercase tracking-tighter mb-2",children:"POS CRONO"}),r.jsxs("p",{className:"text-zinc-500 text-xs font-black uppercase tracking-[0.3em] flex items-center gap-2",children:[r.jsx(ll,{size:12,className:"text-hd-orange"}),"Acceso de Seguridad"]})]}),r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 ml-1 italic",children:"Nombre de Usuario"}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-zinc-500 group-focus-within:text-hd-orange transition-colors",children:r.jsx(Sj,{size:18})}),r.jsx("input",{type:"text",required:!0,value:e,onChange:v=>t(v.target.value),className:"w-full bg-zinc-800/50 border border-white/5 rounded-xl py-4 pl-12 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-hd-orange/50 focus:border-hd-orange transition-all font-medium placeholder:text-zinc-700",placeholder:"Ingresa tu usuario"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 ml-1 italic",children:"Contrasea"}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-zinc-500 group-focus-within:text-hd-orange transition-colors",children:r.jsx(gm,{size:18})}),r.jsx("input",{type:s?"text":"password",required:!0,value:n,onChange:v=>a(v.target.value),className:"w-full bg-zinc-800/50 border border-white/5 rounded-xl py-4 pl-12 pr-12 text-white focus:outline-none focus:ring-2 focus:ring-hd-orange/50 focus:border-hd-orange transition-all font-medium placeholder:text-zinc-700",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-zinc-500 hover:text-white transition-colors",children:s?r.jsx(jj,{size:18}):r.jsx(ci,{size:18})})]})]}),f&&r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-500 text-[10px] font-black uppercase tracking-wider p-4 rounded-xl flex items-center gap-2 animate-in slide-in-from-top-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-ping"}),f]}),r.jsx(re,{type:"submit",disabled:l,className:"w-full bg-hd-orange hover:bg-orange-600 text-white font-black uppercase tracking-widest py-6 rounded-xl shadow-lg shadow-hd-orange/20 transition-all active:scale-95 flex items-center justify-center gap-2 italic",children:l?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:["Confirmar Acceso ",r.jsx(gm,{size:16})]})})]}),r.jsx("div",{className:"mt-10 pt-8 border-t border-white/5 text-center px-4",children:r.jsx("p",{className:"text-[9px] text-zinc-600 font-black uppercase tracking-[0.2em] leading-relaxed italic",children:"El acceso al sistema est monitoreado. Cualquier intento no autorizado ser registrado en los registros de auditora."})})]})]})},Sde=()=>{const{user:e}=jl(),[t,n]=x.useState([]),[a,s]=x.useState(null),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(""),[m,p]=x.useState(!1),[v,j]=x.useState(!1),[y,b]=x.useState({type:"",text:""});x.useEffect(()=>{N(),k()},[]),x.useEffect(()=>{a&&D(a.id)},[a]);const N=async()=>{try{const z=await(await fetch("http://localhost:5006/api/SecurityEditor/groups",{headers:{Authorization:"Bearer ".concat(e.token)}})).json();n(z),z.length>0&&!a&&s(z[0])}catch(_){console.error("Error fetching groups",_)}},k=async()=>{try{const z=await(await fetch("http://localhost:5006/api/SecurityEditor/permissions-catalog",{headers:{Authorization:"Bearer ".concat(e.token)}})).json();l(z)}catch(_){console.error("Error fetching catalog",_)}},D=async _=>{p(!0);try{const G=await(await fetch("http://localhost:5006/api/SecurityEditor/group-permissions/".concat(_),{headers:{Authorization:"Bearer ".concat(e.token)}})).json();f(G)}catch(z){console.error("Error fetching group permissions",z)}finally{p(!1)}},E=_=>{f(z=>z.find(T=>T.securityObjectId===_)?z.map(T=>T.securityObjectId===_?{...T,isAllowed:!T.isAllowed}:T):[...z,{roleId:a.id,securityObjectId:_,isAllowed:!0,uiBehavior:1}])},P=_=>{f(z=>z.map(G=>G.securityObjectId===_?{...G,uiBehavior:G.uiBehavior===0?1:0}:G))},C=async()=>{j(!0),b({type:"",text:""});try{(await fetch("http://localhost:5006/api/SecurityEditor/group-permissions/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)},body:JSON.stringify(c.map(z=>({...z,roleId:a.id})))})).ok?(b({type:"success",text:"Configuracin guardada correctamente"}),setTimeout(()=>b({type:"",text:""}),3e3)):b({type:"error",text:"Error al guardar los cambios"})}catch(_){b({type:"error",text:"Error de conexin"})}finally{j(!1)}},O=o.filter(_=>_.name.toLowerCase().includes(h.toLowerCase())||_.code.toLowerCase().includes(h.toLowerCase())||_.category.toLowerCase().includes(h.toLowerCase())),A=Array.from(new Set(O.map(_=>_.category)));return r.jsxs("div",{className:"p-8 bg-[var(--bg-main)] min-h-screen text-[var(--text-main)] transition-colors duration-500 font-sans",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-6 border-b border-[var(--border-color)] pb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight flex items-center gap-3 text-[var(--text-main)]",children:[r.jsx("div",{className:"p-2.5 bg-hd-orange/10 rounded-xl",children:r.jsx(_p,{size:28,className:"text-hd-orange"})}),"Editor de Seguridad"]}),r.jsxs("p",{className:"text-[var(--text-muted)] text-sm font-medium mt-1 ml-1 pl-14 flex items-center gap-2 opacity-80",children:[r.jsx(ll,{size:14,className:"text-hd-orange"}),"Control de acceso basado en roles (RBAC)"]})]}),r.jsxs("div",{className:"flex items-center gap-4 self-end md:self-auto",children:[y.text&&r.jsxs("div",{className:"px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-widest flex items-center gap-2 animate-in slide-in-from-right duration-300 shadow-sm ".concat(y.type==="success"?"bg-emerald-500/10 text-emerald-600 border border-emerald-500/20":"bg-red-500/10 text-red-600 border border-red-500/20"),children:[y.type==="success"?r.jsx(Tp,{size:16}):r.jsx(gu,{size:16}),y.text]}),r.jsxs(re,{onClick:C,disabled:v||!a,className:"bg-hd-orange hover:bg-orange-600 text-white font-bold px-6 py-3 rounded-xl flex items-center gap-2 shadow-lg shadow-hd-orange/20 transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-50 disabled:pointer-events-none",children:[v?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsx(Kt,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Guardar Cambios"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsxs("div",{className:"lg:col-span-3 lg:col-start-1 bg-[var(--bg-card)] rounded-3xl border border-[var(--border-color)] p-6 flex flex-col shadow-sm h-[calc(100vh-250px)] sticky top-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xs font-bold uppercase tracking-widest text-[var(--text-muted)]",children:"Roles de Sistema"}),r.jsx("div",{className:"p-1.5 bg-[var(--bg-main)] rounded-lg text-hd-orange",children:r.jsx(zr,{size:16})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:t.map(_=>r.jsxs("button",{onClick:()=>s(_),className:"w-full text-left p-4 rounded-2xl transition-all border flex items-center justify-between group relative overflow-hidden ".concat((a==null?void 0:a.id)===_.id?"bg-hd-orange border-hd-orange shadow-lg shadow-hd-orange/20 text-white":"bg-[var(--bg-main)] border-[var(--border-color)] text-[var(--text-muted)] hover:bg-[var(--bg-main)]/80 hover:border-hd-orange/30 hover:text-[var(--text-main)]"),children:[r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx("div",{className:"p-2 rounded-xl ".concat((a==null?void 0:a.id)===_.id?"bg-white/20":"bg-[var(--bg-card)] shadow-sm"," transition-colors"),children:r.jsx(gm,{size:16})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:_.name}),r.jsx("span",{className:"text-[10px] ".concat((a==null?void 0:a.id)===_.id?"text-white/80":"text-[var(--text-muted)]"," font-medium mt-0.5 truncate max-w-[120px]"),children:_.description||"Sin descripcin"})]})]}),(a==null?void 0:a.id)===_.id&&r.jsx(ir,{size:16,className:"text-white/80"})]},_.id))})]}),r.jsxs("div",{className:"lg:col-span-9 bg-[var(--bg-card)] rounded-3xl border border-[var(--border-color)] p-8 flex flex-col shadow-sm h-[calc(100vh-250px)]",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-8",children:[r.jsxs("div",{className:"relative flex-1 group w-full",children:[r.jsx("div",{className:"absolute inset-0 bg-hd-orange/5 rounded-2xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),r.jsx(Yt,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] group-focus-within:text-hd-orange transition-colors",size:20}),r.jsx("input",{type:"text",placeholder:"Buscar permiso, cdigo o categora...",value:h,onChange:_=>u(_.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4 pl-14 pr-6 text-[var(--text-main)] placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange/50 transition-all shadow-sm relative z-10"})]}),r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[var(--bg-main)] rounded-xl border border-[var(--border-color)]",children:[r.jsx("span",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Permisos:"}),r.jsx("span",{className:"text-lg font-bold text-hd-orange",children:O.length})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto pr-4 custom-scrollbar space-y-10",children:A.map(_=>r.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[r.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest text-hd-orange flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-hd-orange"}),_]}),r.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-[var(--border-color)] to-transparent"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-4",children:O.filter(z=>z.category===_).map(z=>{var W;const G=c.find(Z=>Z.securityObjectId===z.id),T=(G==null?void 0:G.isAllowed)||!1,M=(W=G==null?void 0:G.uiBehavior)!=null?W:1;return r.jsxs("div",{className:"group p-5 rounded-2xl border transition-all duration-300 relative overflow-hidden ".concat(T?"bg-gradient-to-br from-[var(--bg-main)] to-[var(--bg-card)] border-hd-orange/30 shadow-md shadow-hd-orange/5":"bg-[var(--bg-main)] border-[var(--border-color)] opacity-70 hover:opacity-100 hover:border-[var(--border-color)]/80"),children:[r.jsx("div",{className:"flex justify-between items-start mb-4",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("button",{onClick:()=>E(z.id),className:"mt-1 min-w-[24px] h-6 rounded-lg border-2 flex items-center justify-center transition-all duration-200 ".concat(T?"bg-hd-orange border-hd-orange text-white shadow-sm scale-110":"border-[var(--text-muted)]/30 text-transparent hover:border-hd-orange/50"),children:r.jsx(qD,{size:16,strokeWidth:4})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold leading-tight ".concat(T?"text-[var(--text-main)]":"text-[var(--text-muted)]"),children:z.name}),r.jsx("span",{className:"inline-block mt-1.5 px-2 py-0.5 rounded text-[9px] font-mono font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-muted)] uppercase",children:z.code})]})]})}),r.jsx("p",{className:"text-xs text-[var(--text-muted)] leading-relaxed pl-10 mb-4 opacity-80",children:z.description}),r.jsxs("div",{className:"pl-10 flex items-center gap-2 transition-all duration-300 ".concat(T?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"),children:[r.jsx("span",{className:"text-[9px] font-bold text-[var(--text-muted)] uppercase tracking-wider mr-2",children:"Si denegado:"}),r.jsx("button",{onClick:()=>T&&P(z.id),disabled:!T,className:"px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ".concat(M===0?"bg-zinc-800 text-white border-zinc-900":"bg-transparent text-[var(--text-muted)] border-transparent hover:bg-[var(--bg-card)]"),title:"El elemento desaparece de la UI",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(jj,{size:12})," Ocultar"]})}),r.jsx("button",{onClick:()=>T&&P(z.id),disabled:!T,className:"px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ".concat(M===1?"bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-gray-100 border-zinc-300 dark:border-zinc-600":"bg-transparent text-[var(--text-muted)] border-transparent hover:bg-[var(--bg-card)]"),title:"El elemento se ve pero no se puede usar",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(sL,{size:12})," Inactivar"]})})]})]},z.id)})})]},_))})]})]})]})},Cde=()=>{const{user:e}=jl(),[t,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState(""),[c,f]=x.useState(!0),[h,u]=x.useState({type:"",text:""}),[m,p]=x.useState(!1),[v,j]=x.useState(!1),[y,b]=x.useState(!1),[N,k]=x.useState(null),[D,E]=x.useState({userName:"",fullName:"",email:"",password:"",role:"CAJEROS",isActive:!0}),[P,C]=x.useState("");x.useEffect(()=>{O()},[]);const O=async()=>{f(!0);try{const[T,M]=await Promise.all([fetch("http://localhost:5006/api/SecurityEditor/users",{headers:{Authorization:"Bearer ".concat(e.token)}}),fetch("http://localhost:5006/api/SecurityEditor/groups",{headers:{Authorization:"Bearer ".concat(e.token)}})]);if(T.ok&&M.ok){const W=await T.json(),Z=await M.json();n(W),s(Z)}}catch(T){console.error("Error fetching data",T),u({type:"error",text:"Error al conectar con el servidor"})}finally{f(!1)}},A=(T=null)=>{T?(k(T),E({userName:T.userName,fullName:T.fullName||"",email:T.email||"",password:"",role:"CAJEROS",isActive:T.isActive})):(k(null),E({userName:"",fullName:"",email:"",password:"",role:"CAJEROS",isActive:!0})),p(!0)},_=async T=>{T.preventDefault(),b(!0);try{const M=N?"http://localhost:5006/api/SecurityEditor/users/".concat(N.id):"http://localhost:5006/api/SecurityEditor/users",Z=await fetch(M,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)},body:JSON.stringify(D)});if(Z.ok)u({type:"success",text:"Usuario ".concat(N?"actualizado":"creado"," correctamente")}),p(!1),O();else{const B=await Z.json();u({type:"error",text:Array.isArray(B)?B[0].description:"Error al guardar usuario"})}}catch(M){u({type:"error",text:"Error de conexin"})}finally{b(!1)}},z=async()=>{if(P){b(!0);try{(await fetch("http://localhost:5006/api/SecurityEditor/users/".concat(N.id,"/reset-password"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)},body:JSON.stringify({newPassword:P})})).ok?(u({type:"success",text:"Contrasea actualizada"}),j(!1),C("")):u({type:"error",text:"Error al resetear contrasea"})}catch(T){u({type:"error",text:"Error de conexin"})}finally{b(!1)}}},G=t.filter(T=>T.userName.toLowerCase().includes(o.toLowerCase())||T.fullName&&T.fullName.toLowerCase().includes(o.toLowerCase()));return r.jsxs("div",{className:"p-8 bg-[var(--bg-main)] min-h-screen text-[var(--text-main)] transition-colors duration-500 font-sans",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight flex items-center gap-3 text-[var(--text-main)]",children:[r.jsx("div",{className:"p-2.5 bg-hd-orange/10 rounded-xl",children:r.jsx(zr,{size:28,className:"text-hd-orange"})}),"Directorio de Usuarios"]}),r.jsx("p",{className:"text-[var(--text-muted)] text-sm font-medium mt-1 ml-1 pl-14 flex items-center gap-2 opacity-80",children:"Gestin de accesos y seguridad"})]}),r.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[r.jsx(re,{onClick:O,className:"p-3 rounded-xl border border-[var(--border-color)] text-[var(--text-muted)] hover:text-[var(--text-main)] hover:bg-[var(--bg-card)] transition-all",title:"Recargar datos",children:r.jsx(no,{size:20,className:c?"animate-spin":""})}),r.jsxs(re,{onClick:()=>A(),className:"bg-hd-orange hover:bg-orange-600 text-white font-bold px-6 py-3 rounded-xl flex items-center gap-2 shadow-lg shadow-hd-orange/20 transition-all hover:scale-[1.02] active:scale-95",children:[r.jsx(Hy,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Nuevo Usuario"})]})]})]}),h.text&&r.jsxs("div",{className:"mb-8 p-4 rounded-xl flex items-center gap-3 border animate-in slide-in-from-top-2 duration-300 ".concat(h.type==="error"?"bg-red-500/10 border-red-500/20 text-red-600":"bg-emerald-500/10 border-emerald-500/20 text-emerald-600"),children:[h.type==="error"?r.jsx(A0,{size:20}):r.jsx(Tp,{size:20}),r.jsx("span",{className:"font-semibold text-sm",children:h.text}),r.jsx("button",{onClick:()=>u({type:"",text:""}),className:"ml-auto hover:bg-black/5 p-1 rounded-full transition-colors",children:r.jsx(A0,{size:16,className:"opacity-50"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8",children:[r.jsx("div",{className:"col-span-12 md:col-span-7 lg:col-span-8",children:r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-hd-orange/5 rounded-2xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),r.jsx(Yt,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] group-focus-within:text-hd-orange transition-colors",size:20}),r.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:o,onChange:T=>l(T.target.value),className:"w-full bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl py-4 pl-14 pr-6 text-[var(--text-main)] placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange/50 transition-all shadow-sm relative z-10"})]})}),r.jsxs("div",{className:"col-span-12 md:col-span-5 lg:col-span-4 flex gap-4",children:[r.jsxs("div",{className:"flex-1 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl p-4 flex flex-col items-center justify-center shadow-sm hover:border-hd-orange/30 transition-colors",children:[r.jsx("span",{className:"text-2xl font-bold text-[var(--text-main)] w-full text-center truncate",children:t.length}),r.jsx("span",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-widest mt-1",children:"Registrados"})]}),r.jsxs("div",{className:"flex-1 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl p-4 flex flex-col items-center justify-center shadow-sm hover:border-emerald-500/30 transition-colors",children:[r.jsx("span",{className:"text-2xl font-bold text-emerald-500 w-full text-center truncate",children:t.filter(T=>T.isActive).length}),r.jsx("span",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-widest mt-1",children:"Activos"})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c?Array(6).fill(0).map((T,M)=>r.jsx("div",{className:"h-64 bg-[var(--bg-card)] rounded-2xl border border-[var(--border-color)] animate-pulse"},M)):G.map(T=>r.jsxs("div",{className:"bg-[var(--bg-card)] hover:shadow-xl hover:shadow-black/5 border border-[var(--border-color)] rounded-2xl p-6 transition-all duration-300 group relative flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-hd-orange/10 to-transparent rounded-2xl flex items-center justify-center text-hd-orange font-bold text-xl shadow-inner border border-hd-orange/5 group-hover:scale-110 transition-transform duration-300",children:T.userName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-[var(--text-main)] leading-tight truncate max-w-[140px]",children:T.fullName||T.userName}),r.jsxs("p",{className:"text-xs text-[var(--text-muted)] font-mono mt-1 opacity-75",children:["@",T.userName]})]})]}),r.jsxs("div",{className:"px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border flex items-center gap-1.5 ".concat(T.isActive?"bg-emerald-500/5 text-emerald-600 border-emerald-500/20":"bg-red-500/5 text-red-600 border-red-500/20"),children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full ".concat(T.isActive?"bg-emerald-500 animate-pulse":"bg-red-500")}),T.isActive?"Activo":"Inactivo"]})]}),r.jsxs("div",{className:"space-y-3 mb-6 bg-[var(--bg-main)]/50 p-4 rounded-xl border border-[var(--border-color)]/50",children:[r.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[r.jsx(_p,{size:14,className:"text-hd-orange opacity-70"}),r.jsx("span",{className:"font-semibold uppercase tracking-wide",children:"Acceso Total"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[r.jsx(YD,{size:14,className:"text-hd-orange opacity-70"}),r.jsx("span",{className:"truncate",children:T.email||"Sin correo asociado"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-2 mt-auto",children:[r.jsxs("button",{onClick:()=>A(T),className:"flex-1 py-2.5 rounded-xl bg-[var(--bg-main)] hover:bg-hd-orange hover:text-white text-[var(--text-main)] font-semibold text-xs uppercase tracking-wider transition-all border border-[var(--border-color)] hover:border-hd-orange hover:shadow-md flex items-center justify-center gap-2 group/btn",children:[r.jsx(wl,{size:14,className:"group-hover/btn:-translate-y-0.5 transition-transform"}),"Editar"]}),r.jsx("button",{onClick:()=>{k(T),j(!0)},className:"w-10 h-10 flex items-center justify-center rounded-xl bg-[var(--bg-main)] hover:bg-[var(--text-main)] hover:text-[var(--bg-main)] text-[var(--text-muted)] transition-colors border border-[var(--border-color)] group/key",title:"Cambiar Contrasea",children:r.jsx(Y6,{size:16,className:"group-hover/key:rotate-12 transition-transform"})})]})]},T.id))}),m&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[var(--bg-card)] w-full max-w-lg rounded-3xl shadow-2xl border border-[var(--border-color)] overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-6 border-b border-[var(--border-color)] flex justify-between items-center bg-[var(--bg-main)]/50",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-main)]",children:N?"Editar Perfil":"Nuevo Usuario"}),r.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Informacin de cuenta y permisos"})]}),r.jsx("button",{onClick:()=>p(!1),className:"text-[var(--text-muted)] hover:text-[var(--text-main)] hover:bg-[var(--bg-main)] p-2 rounded-full transition-all",children:r.jsx(A0,{size:24})})]}),r.jsx("div",{className:"overflow-y-auto p-6 md:p-8",children:r.jsxs("form",{id:"userForm",onSubmit:_,className:"space-y-5",children:[!N&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Username (ID)"}),r.jsx("input",{required:!0,type:"text",value:D.userName,onChange:T=>E({...D,userName:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all font-medium",placeholder:"ej. jperez"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Nombre Completo"}),r.jsx("input",{required:!0,type:"text",value:D.fullName,onChange:T=>E({...D,fullName:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:"Nombre y Apellido"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Email"}),r.jsx("input",{type:"email",value:D.email,onChange:T=>E({...D,email:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:"correo@ejemplo.com"})]}),!N&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Contrasea"}),r.jsx("input",{required:!0,type:"password",value:D.password,onChange:T=>E({...D,password:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:""})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Rol / Permisos"}),r.jsxs("div",{className:"relative",children:[r.jsx("select",{value:D.role,onChange:T=>E({...D,role:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all appearance-none cursor-pointer",children:a.map(T=>r.jsx("option",{value:T.name,children:T.name},T.id))}),r.jsx(ir,{size:18,className:"absolute right-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)] rotate-90 pointer-events-none"})]})]}),N&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-[var(--bg-main)] rounded-xl border border-[var(--border-color)] cursor-pointer hover:border-hd-orange/30 transition-colors",onClick:()=>E({...D,isActive:!D.isActive}),children:[r.jsx("div",{className:"w-10 h-6 rounded-full p-1 transition-colors ".concat(D.isActive?"bg-hd-orange":"bg-gray-300 dark:bg-zinc-700"),children:r.jsx("div",{className:"w-4 h-4 rounded-full bg-white shadow-sm transition-transform ".concat(D.isActive?"translate-x-4":"translate-x-0")})}),r.jsx("label",{className:"text-sm font-semibold text-[var(--text-main)] cursor-pointer select-none flex-1",children:"Habilitar Acceso"})]})]})}),r.jsxs("div",{className:"p-6 border-t border-[var(--border-color)] bg-[var(--bg-main)]/30 flex gap-4",children:[r.jsx(re,{type:"button",onClick:()=>p(!1),className:"flex-1 bg-transparent hover:bg-[var(--bg-main)] text-[var(--text-muted)] border border-[var(--border-color)] font-bold py-3.5 rounded-xl transition-all",children:"Cancelar"}),r.jsx(re,{type:"submit",form:"userForm",disabled:y,className:"flex-1 bg-hd-orange hover:bg-orange-600 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-hd-orange/20 transition-all flex items-center justify-center gap-2",children:y?r.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}):"Guardar"})]})]})}),v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[var(--bg-card)] w-full max-w-md rounded-3xl shadow-2xl border border-[var(--border-color)] overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-6 border-b border-[var(--border-color)] bg-[var(--bg-main)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-main)]",children:"Reestablecer Acceso"}),r.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["Usuario: ",r.jsx("span",{className:"font-mono text-hd-orange font-bold uppercase",children:N==null?void 0:N.userName})]})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Nueva Contrasea"}),r.jsx("input",{type:"password",value:P,onChange:T=>C(T.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:"",autoFocus:!0})]}),r.jsxs("div",{className:"flex gap-4 pt-2",children:[r.jsx(re,{onClick:()=>j(!1),className:"flex-1 bg-transparent hover:bg-[var(--bg-main)] text-[var(--text-muted)] border border-[var(--border-color)] font-bold py-3 rounded-xl",children:"Cancelar"}),r.jsx(re,{onClick:z,disabled:y,className:"flex-1 bg-hd-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl shadow-md",children:y?"...":"Actualizar"})]})]})]})})]})},kde=()=>{const e=$t(),[t,n]=x.useState([]),[a,s]=x.useState(!0);x.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const l=await tz();n(l)}catch(l){console.error("Failed to load promotions",l)}finally{s(!1)}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto pb-20 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Promociones y Ofertas"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Gestiona descuentos, cupones y reglas automticas."})]}),r.jsxs(re,{onClick:()=>e("/marketing/promociones/nuevo"),className:"bg-hd-orange hover:bg-orange-600 font-bold",children:[r.jsx(Lt,{className:"mr-2 h-5 w-5"})," Nueva Promocin"]})]}),r.jsx(We,{className:"border-0 shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-4 px-6 font-bold text-gray-600",children:"Nombre"}),r.jsx("th",{className:"text-left py-4 px-6 font-bold text-gray-600",children:"Tipo"}),r.jsx("th",{className:"text-left py-4 px-6 font-bold text-gray-600",children:"Vigencia"}),r.jsx("th",{className:"text-center py-4 px-6 font-bold text-gray-600",children:"Estado"}),r.jsx("th",{className:"text-right py-4 px-6 font-bold text-gray-600",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50",children:t.map(l=>r.jsxs("tr",{className:"hover:bg-orange-50/30 transition-colors group",children:[r.jsx("td",{className:"py-4 px-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-hd-orange",children:r.jsx(Nl,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-gray-800",children:l.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",l.id]})]})]})}),r.jsx("td",{className:"py-4 px-6 text-sm",children:r.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded border border-gray-200 font-medium",children:l.type})}),r.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sa,{size:14}),l.startDate]})}),r.jsx("td",{className:"py-4 px-6 text-center",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(l.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:l.isActive?"Activa":"Inactiva"})}),r.jsx("td",{className:"py-4 px-6 text-right",children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>e("/marketing/promociones/editar/".concat(l.id)),children:r.jsx(zc,{className:"h-4 w-4 text-gray-400 group-hover:text-hd-orange"})})})]},l.id))})]})})})]})},Pde=({isOpen:e,onClose:t,onSelect:n})=>{const[a,s]=x.useState(""),[o,l]=x.useState([]),[c,f]=x.useState(!1);x.useEffect(()=>{e&&(h(),s(""))},[e]);const h=async()=>{try{f(!0);const m=await wm();l(m)}catch(m){console.error("Error loading categories:",m)}finally{f(!1)}},u=x.useMemo(()=>{const m=a.toLowerCase();return m?o.filter(p=>p.nombre.toLowerCase().includes(m)||p.descripcion&&p.descripcion.toLowerCase().includes(m)):o},[o,a]);return r.jsx(ui,{open:e,onOpenChange:t,children:r.jsxs(fi,{className:"max-w-md p-0 overflow-hidden border-0 shadow-2xl bg-white rounded-xl h-[60vh] flex flex-col",children:[r.jsxs("div",{className:"bg-white border-b border-gray-100 p-4 flex flex-col gap-3 shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 tracking-tight flex items-center gap-2",children:[r.jsx(ja,{className:"h-5 w-5 text-hd-orange"}),"Seleccionar Categora"]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full h-8 w-8",children:r.jsx(Tt,{size:20})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Yt,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ge,{className:"w-full pl-9 h-9 bg-gray-50 border-gray-200 focus:bg-white transition-colors",placeholder:"Buscar categora...",value:a,onChange:m=>s(m.target.value),autoFocus:!0})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 bg-gray-50",children:[c?r.jsx("div",{className:"flex justify-center p-8 text-gray-400 animate-pulse",children:"Cargando..."}):u.map(m=>r.jsxs("div",{onClick:()=>{n(m),t()},className:"group flex items-center gap-3 p-3 rounded-lg hover:bg-white hover:shadow-md border border-transparent hover:border-gray-100 cursor-pointer transition-all",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center text-hd-orange group-hover:bg-hd-orange group-hover:text-white transition-colors",children:r.jsx(Nl,{size:18})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800",children:m.nombre}),m.descripcion&&r.jsx("div",{className:"text-xs text-gray-500",children:m.descripcion})]}),r.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 text-hd-orange",children:r.jsx(qD,{size:16})})]},m.id)),!c&&u.length===0&&r.jsx("div",{className:"text-center py-10 text-gray-400",children:"No se encontraron categoras."})]})]})})},JI=()=>{const e=$t(),{id:t}=xo(),n=!!t,[a,s]=x.useState({name:"",description:"",startDate:new Date().toISOString().split("T")[0],endDate:"",isActive:!0,priority:0,rules:[],actions:[],autoApply:!1,stackable:!1,requiresCoupon:!1,applyTo:"Both"}),[o,l]=x.useState(!1),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState(null);x.useEffect(()=>{n&&v()},[t]);const v=async()=>{var E,P;try{const C=await rz(t),O={...C,startDate:(E=C.startDate)==null?void 0:E.split("T")[0],endDate:((P=C.endDate)==null?void 0:P.split("T")[0])||""};s(O)}catch(C){console.error("Error loading promo",C)}},j=[{value:"MinOrderTotal",label:"Monto Mnimo Orden"},{value:"ContainsProduct",label:"Contiene Producto (ID)"},{value:"ContainsCategory",label:"Contiene Categora (Nombre)"}],y=[{value:"DiscountPercentage",label:"Descuento (%)"},{value:"DiscountAmount",label:"Descuento Fijo ($)"}],b=async()=>{try{const E={...a,endDate:a.endDate?a.endDate:null,priority:parseInt(a.priority)||0,actions:a.actions.map(P=>({...P,value:parseFloat(P.value)||0,targetArtifact:P.targetArtifact||null})).filter(P=>P.value>0),rules:a.rules.map(P=>({...P,value:P.value?P.value.toString():""})).filter(P=>P.value!=="")};n?await az(t,E):await nz(E),e("/marketing/promociones")}catch(E){console.error("Error saving promotion",E),alert("Error al guardar: ".concat(E.message))}},N=(E,P)=>{s(C=>({...C,[E]:P}))},k=E=>{if(h!==null){const P=[...a.rules];P[h].value=E.id.toString(),s({...a,rules:P}),u(null)}else if(m!==null){const P=[...a.actions];P[m].targetArtifact=E.id.toString(),s({...a,actions:P}),p(null)}l(!1)},D=E=>{if(h!==null){const P=[...a.rules];P[h].value=E.nombre,s({...a,rules:P}),u(null)}else if(m!==null){const P=[...a.actions];P[m].targetArtifact=E.nombre,s({...a,actions:P}),p(null)}f(!1)};return r.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto pb-20 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-gray-50/95 backdrop-blur z-20 py-4 border-b border-gray-200 -mx-6 px-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",onClick:()=>e("/marketing/promociones"),children:r.jsx(un,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Editar Promocin":"Nueva Promocin"}),r.jsx("p",{className:"text-sm text-gray-500",children:n?"ID: ".concat(t):"Configura las reglas y beneficios"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/marketing/promociones"),children:"Cancelar"}),r.jsxs(re,{onClick:b,className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Kt,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]}),r.jsxs(We,{className:"shadow-sm border-l-4 border-l-hd-orange",children:[r.jsx(vt,{children:r.jsxs(bt,{className:"flex items-center gap-2",children:[r.jsx(HD,{className:"h-5 w-5 text-gray-500"})," Informacin General"]})}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre de la Promocin"}),r.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.name,onChange:E=>N("name",E.target.value),placeholder:"Ej: Descuento Verano 2025"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),r.jsx("input",{type:"number",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.priority,onChange:E=>N("priority",E.target.value)}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mayor nmero = Se aplica primero."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Aplicar A:"}),r.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.applyTo,onChange:E=>N("applyTo",E.target.value),children:[r.jsx("option",{value:"Both",children:"Ambos (POS y Distribucin)"}),r.jsx("option",{value:"POS",children:"Solo POS"}),r.jsx("option",{value:"Distribution",children:"Solo Ventas Distribucin"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inicio"}),r.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.startDate,onChange:E=>N("startDate",E.target.value)})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fin (Opcional)"}),r.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.endDate,onChange:E=>N("endDate",E.target.value)})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a.isActive,onChange:E=>N("isActive",E.target.checked),className:"rounded text-hd-orange focus:ring-orange-500 h-5 w-5"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Activa"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer ml-4",children:[r.jsx("input",{type:"checkbox",checked:a.autoApply,onChange:E=>N("autoApply",E.target.checked),className:"rounded text-hd-orange focus:ring-orange-500 h-5 w-5"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Aplicar Automticamente"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer ml-4",children:[r.jsx("input",{type:"checkbox",checked:a.stackable,onChange:E=>N("stackable",E.target.checked),className:"rounded text-hd-orange focus:ring-orange-500 h-5 w-5"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Acumulable"})]})]})]})]}),r.jsxs(We,{className:"shadow-sm",children:[r.jsx(vt,{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(bt,{className:"text-gray-800",children:"Reglas (Condiciones)"}),r.jsxs(re,{size:"sm",variant:"outline",onClick:()=>s({...a,rules:[...a.rules,{type:"MinOrderTotal",operator:"GreaterThan",value:""}]}),children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Agregar Regla"]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[a.rules.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-400 border-2 border-dashed border-gray-200 rounded-lg",children:"No hay reglas definidas. La promocin se aplicar siempre."}),a.rules.map((E,P)=>r.jsxs("div",{className:"flex gap-4 items-center bg-gray-50 p-3 rounded border border-gray-200",children:[r.jsx("select",{className:"block w-1/3 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:E.type,onChange:C=>{const O=[...a.rules];O[P].type=C.target.value,s({...a,rules:O})},children:j.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsxs("select",{className:"block w-1/5 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:E.operator,onChange:C=>{const O=[...a.rules];O[P].operator=C.target.value,s({...a,rules:O})},children:[r.jsx("option",{value:"GreaterThan",children:"Mayor que"}),r.jsx("option",{value:"Equals",children:"Igual a"})]}),r.jsxs("div",{className:"relative flex-1 group",children:[r.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border ".concat(E.type==="ContainsProduct"||E.type==="ContainsCategory"?"pr-10":""),placeholder:E.type==="ContainsProduct"?"ID Producto":E.type==="ContainsCategory"?"Nombre Categora":"Valor",value:E.value,onChange:C=>{const O=[...a.rules];O[P].value=C.target.value,s({...a,rules:O})}}),(E.type==="ContainsProduct"||E.type==="ContainsCategory")&&r.jsx("button",{type:"button",className:"absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-hd-orange transition-colors rounded-r-md border-l border-transparent hover:bg-orange-50",onClick:()=>{u(P),E.type==="ContainsProduct"?l(!0):f(!0)},title:"Buscar...",children:E.type==="ContainsProduct"?r.jsx(Yt,{size:16}):r.jsx(ja,{size:16})})]}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{const C=[...a.rules];C.splice(P,1),s({...a,rules:C})},children:r.jsx(rr,{className:"h-4 w-4 text-red-500"})})]},P))]})]}),r.jsxs(We,{className:"shadow-sm",children:[r.jsx(vt,{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(bt,{className:"text-gray-800",children:"Beneficios (Acciones)"}),r.jsxs(re,{size:"sm",variant:"outline",className:"text-hd-orange border-hd-orange hover:bg-orange-50",onClick:()=>s({...a,actions:[...a.actions,{type:"DiscountPercentage",value:0,appliesTo:"Order",targetArtifact:""}]}),children:[r.jsx(Lt,{className:"h-4 w-4 mr-1"})," Agregar Beneficio"]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[a.actions.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-400 border-2 border-dashed border-gray-200 rounded-lg",children:[r.jsx(Lc,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),"Qu gana el cliente? Agrega un beneficio."]}),a.actions.map((E,P)=>r.jsxs("div",{className:"flex flex-col gap-2 bg-green-50 p-3 rounded border border-green-200",children:[r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsx("select",{className:"block w-1/3 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:E.type,onChange:C=>{const O=[...a.actions];O[P].type=C.target.value,s({...a,actions:O})},children:y.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"block w-32 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",placeholder:"0",value:E.value,onChange:C=>{const O=[...a.actions];O[P].value=C.target.value,s({...a,actions:O})}}),r.jsx("span",{className:"text-sm text-gray-500",children:"en"}),r.jsxs("select",{className:"block w-1/4 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:E.appliesTo,onChange:C=>{const O=[...a.actions];O[P].appliesTo=C.target.value,s({...a,actions:O})},children:[r.jsx("option",{value:"Order",children:"Total de la Orden"}),r.jsx("option",{value:"SpecificProduct",children:"Producto Especfico"}),r.jsx("option",{value:"Category",children:"Categora"})]}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{const C=[...a.actions];C.splice(P,1),s({...a,actions:C})},children:r.jsx(rr,{className:"h-4 w-4 text-red-500"})})]}),(E.appliesTo==="SpecificProduct"||E.appliesTo==="Category")&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-1/3 text-right pr-2",children:E.appliesTo==="SpecificProduct"?"ID del Producto:":"Nombre Categora:"}),r.jsxs("div",{className:"relative flex-1 group",children:[r.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-green-200 sm:text-sm p-2 border pr-10",placeholder:E.appliesTo==="SpecificProduct"?"Ej: 101":"Ej: Herramientas",value:E.targetArtifact||"",onChange:C=>{const O=[...a.actions];O[P].targetArtifact=C.target.value,s({...a,actions:O})}}),r.jsx("button",{type:"button",className:"absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-hd-orange transition-colors rounded-r-md border-l border-transparent hover:bg-orange-50",onClick:()=>{p(P),E.appliesTo==="SpecificProduct"?l(!0):f(!0)},title:"Buscar...",children:E.appliesTo==="SpecificProduct"?r.jsx(Yt,{size:16}):r.jsx(ja,{size:16})})]})]})]},P))]})]}),r.jsx(ul,{isOpen:o,onClose:()=>l(!1),onSelect:k}),r.jsx(Pde,{isOpen:c,onClose:()=>f(!1),onSelect:D})]})},Ede=()=>{const[e,t]=x.useState(null),[n,a]=x.useState(!0);if(x.useEffect(()=>{(async()=>{try{const c=await fetch("http://localhost:5006/api/Trial/status");if(c.ok){const f=await c.json();t(f)}}catch(c){console.error("Error fetching trial status",c)}finally{a(!1)}})()},[]),n||!e)return null;const{daysRemaining:s,isExpired:o}=e;return o?r.jsxs("div",{className:"bg-red-600 text-white py-4 px-4 flex flex-col items-center justify-center gap-3 z-[9999] sticky top-0 shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(gu,{size:24,className:"text-yellow-300 animate-pulse"}),r.jsx("span",{className:"font-bold text-lg uppercase tracking-wider",children:"PERIODO DE PRUEBA EXPIRADO"})]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("input",{type:"text",placeholder:"Ingrese Clave de Activacin",id:"licenseKey",className:"px-3 py-1 text-black rounded text-sm w-64"}),r.jsx("button",{onClick:async()=>{const l=document.getElementById("licenseKey").value;(await fetch("http://localhost:5006/api/Trial/activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:l})})).ok?(alert("Licencia Activada! El sistema se reiniciar."),window.location.reload()):alert("Clave invlida.")},className:"bg-white text-red-600 px-4 py-1 rounded font-bold text-sm hover:bg-gray-200 transition-colors",children:"ACTIVAR AHORA"})]})]}):s<=10?r.jsxs("div",{className:"bg-orange-500 text-white py-1.5 px-4 flex items-center justify-center gap-2 z-[9999] sticky top-0 shadow-md",children:[r.jsx(mm,{size:16}),r.jsxs("span",{className:"font-medium text-xs",children:["Atencin: Quedan ",r.jsxs("strong",{children:[s," das"]})," de tu periodo de prueba gratuito."]})]}):r.jsx("div",{className:"bg-gray-800 text-gray-300 py-1 px-4 flex items-center justify-center gap-2 z-[9999] sticky top-0 text-[10px] opacity-90 hover:opacity-100 transition-opacity",children:r.jsxs("span",{className:"uppercase tracking-widest font-semibold flex items-center gap-1",children:[r.jsx(mm,{size:10})," Versin Demo: ",s," das restantes"]})})};function Ade(){return r.jsxs(jde,{children:[r.jsx(Ede,{}),r.jsx(k6,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsx(T6,{children:r.jsxs(x6,{children:[r.jsx(Ye,{path:"/login",element:r.jsx(Nde,{})}),r.jsxs(Ye,{element:r.jsx(_6,{}),children:[r.jsxs(Ye,{path:"/",element:r.jsx(cL,{}),children:[r.jsx(Ye,{index:!0,element:r.jsx(Zse,{})}),r.jsx(Ye,{path:"clientes",element:r.jsx(dL,{})}),r.jsx(Ye,{path:"clientes/nuevo",element:r.jsx(zC,{})}),r.jsx(Ye,{path:"clientes/editar/:id",element:r.jsx(zC,{})}),r.jsx(Ye,{path:"proveedores",element:r.jsx(vL,{})}),r.jsx(Ye,{path:"proveedores/nuevo",element:r.jsx(BC,{})}),r.jsx(Ye,{path:"proveedores/editar/:id",element:r.jsx(BC,{})}),r.jsx(Ye,{path:"vendedores",element:r.jsx(ez,{})}),r.jsx(Ye,{path:"vendedores/nuevo",element:r.jsx(JC,{})}),r.jsx(Ye,{path:"vendedores/editar/:id",element:r.jsx(JC,{})}),r.jsx(Ye,{path:"productos",element:r.jsx(IL,{})}),r.jsx(Ye,{path:"productos/nuevo",element:r.jsx(qC,{})}),r.jsx(Ye,{path:"productos/editar/:id",element:r.jsx(qC,{})}),r.jsx(Ye,{path:"inventario/lista-precios",element:r.jsx(bU,{})}),r.jsx(Ye,{path:"inventario/niveles-precios",element:r.jsx(n7,{})}),r.jsx(Ye,{path:"inventario/categorias-articulos",element:r.jsx(pU,{})}),r.jsx(Ye,{path:"inventario/unidades-medida",element:r.jsx(dU,{})}),r.jsx(Ye,{path:"inventario/historial",element:r.jsx(P2,{})}),r.jsx(Ye,{path:"inventario/historial/:articuloId",element:r.jsx(P2,{})}),r.jsx(Ye,{path:"inventario/almacenes",element:r.jsx(uU,{})}),r.jsx(Ye,{path:"inventario/grupos-impuestos",element:r.jsx(fU,{})}),r.jsx(Ye,{path:"inventario/grupos-producto",element:r.jsx(hU,{})}),r.jsx(Ye,{path:"configuracion/motivos-ajuste",element:r.jsx(mU,{})}),r.jsx(Ye,{path:"ajustes",element:r.jsx(UL,{})}),r.jsx(Ye,{path:"ajustes/nuevo",element:r.jsx(XL,{})}),r.jsx(Ye,{path:"transferencias",element:r.jsx(JL,{})}),r.jsx(Ye,{path:"transferencias/nuevo",element:r.jsx(XC,{})}),r.jsx(Ye,{path:"transferencias/editar/:id",element:r.jsx(XC,{})}),r.jsx(Ye,{path:"kardex",element:r.jsx(LL,{})}),r.jsx(Ye,{path:"configuracion/ncf",element:r.jsx(kB,{})}),r.jsx(Ye,{path:"configuracion/clientes",element:r.jsx(PB,{})}),r.jsx(Ye,{path:"configuracion/articulos",element:r.jsx(AB,{})}),r.jsx(Ye,{path:"configuracion/monedas",element:r.jsx(eU,{})}),r.jsx(Ye,{path:"configuracion/proveedores",element:r.jsx(nU,{})}),r.jsx(Ye,{path:"configuracion/compania",element:r.jsx(aU,{})}),r.jsx(Ye,{path:"configuracion/cxp",element:r.jsx(sU,{})}),r.jsx(Ye,{path:"configuracion/pos",element:r.jsx(xde,{})}),r.jsx(Ye,{path:"configuracion/compras",element:r.jsx(vde,{})}),r.jsx(Ye,{path:"configuracion/receipt-designer",element:r.jsx(bde,{})}),r.jsx(Ye,{path:"configuracion/transferencias",element:r.jsx(iU,{})}),r.jsx(Ye,{path:"configuracion/ajustes",element:r.jsx(cU,{})}),r.jsx(Ye,{path:"configuracion/security-editor",element:r.jsx(Sde,{})}),r.jsx(Ye,{path:"configuracion/usuarios",element:r.jsx(Cde,{})}),r.jsx(Ye,{path:"ventas/pos",element:r.jsx(gz,{})}),r.jsx(Ye,{path:"ventas/distribucion",element:r.jsx(Iz,{})}),r.jsx(Ye,{path:"ventas/devoluciones",element:r.jsx(xB,{})}),r.jsx(Ye,{path:"ventas/historial-devoluciones",element:r.jsx(vB,{})}),r.jsx(Ye,{path:"ventas/historial",element:r.jsx(pB,{})}),r.jsx(Ye,{path:"ventas/corte",element:r.jsx(bB,{})}),r.jsx(Ye,{path:"compras",element:r.jsx(NB,{})}),r.jsx(Ye,{path:"compras/nuevo",element:r.jsx(c2,{})}),r.jsx(Ye,{path:"compras/editar/:id",element:r.jsx(c2,{})}),r.jsx(Ye,{path:"compras/reportes",element:r.jsx(oU,{})}),r.jsx(Ye,{path:"reportes/ventas",element:r.jsx(pa,{title:"Reporte de Ventas"})}),r.jsx(Ye,{path:"reportes/inventario",element:r.jsx(pa,{title:"Reporte de Inventario"})}),r.jsx(Ye,{path:"reportes/valoracion-inventario",element:r.jsx(o7,{})}),r.jsx(Ye,{path:"reportes/compras-multi-moneda",element:r.jsx(l7,{})}),r.jsx(Ye,{path:"reportes/manager",element:r.jsx(d7,{})}),r.jsx(Ye,{path:"compras/imprimir/:id",element:r.jsx(c7,{})}),r.jsx(Ye,{path:"cuentas-por-pagar/pagos",element:r.jsx(h7,{})}),r.jsx(Ye,{path:"cuentas-por-cobrar/cobros",element:r.jsx(m7,{})}),r.jsx(Ye,{path:"reportes/ventas-vendedor",element:r.jsx(pa,{title:"Reporte por Vendedor"})}),r.jsx(Ye,{path:"reportes/ventas-cliente",element:r.jsx(pa,{title:"Reporte por Cliente"})}),r.jsx(Ye,{path:"reportes/kardex",element:r.jsx(pa,{title:"Movimientos de Artculos"})}),r.jsx(Ye,{path:"reportes/clientes",element:r.jsx(pa,{title:"Listado de Clientes"})}),r.jsx(Ye,{path:"reportes/proveedores",element:r.jsx(pa,{title:"Listado de Proveedores"})}),r.jsx(Ye,{path:"marketing/promociones",element:r.jsx(kde,{})}),r.jsx(Ye,{path:"marketing/promociones/nuevo",element:r.jsx(JI,{})}),r.jsx(Ye,{path:"marketing/promociones/editar/:id",element:r.jsx(JI,{})}),r.jsx(Ye,{path:"crm/dashboard",element:r.jsx(x7,{})}),r.jsx(Ye,{path:"crm/prospectos",element:r.jsx(g7,{})}),r.jsx(Ye,{path:"crm/oportunidades",element:r.jsx(pa,{title:"CRM Oportunidades"})}),r.jsx(Ye,{path:"crm/actividades",element:r.jsx(pa,{title:"CRM Actividades"})}),r.jsx(Ye,{path:"crm/interacciones",element:r.jsx(pa,{title:"CRM Interacciones"})}),r.jsx(Ye,{path:"reportes/smartlist/facturas",element:r.jsx(j7,{})}),r.jsx(Ye,{path:"reportes/smartlist/articulos",element:r.jsx(w7,{})}),r.jsx(Ye,{path:"reportes/smartlist/proveedores",element:r.jsx(N7,{})}),r.jsx(Ye,{path:"reportes/smartlist/pagos",element:r.jsx(S7,{})}),r.jsx(Ye,{path:"reportes/smartlist/inventario",element:r.jsx(C7,{})}),r.jsx(Ye,{path:"reportes/ventas-cobros",element:r.jsx(k7,{})}),r.jsx(Ye,{path:"utilidades/calculadora",element:r.jsx(pa,{title:"Calculadora"})}),r.jsx(Ye,{path:"utilidades/notas",element:r.jsx(pa,{title:"Bloc de Notas"})}),r.jsx(Ye,{path:"utilidades/calendario",element:r.jsx(pa,{title:"Calendario"})})]}),r.jsx(Ye,{path:"launchpad",element:r.jsx(gde,{})})]})]})})})]})}ID.createRoot(document.getElementById("root")).render(r.jsx(Ade,{}));export{Dde as __vite_legacy_guard};
