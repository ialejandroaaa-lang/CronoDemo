function L$(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Os(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w0={exports:{}},Fd={},N0={exports:{}},Mt={};var uC;function z$(){if(uC)return Mt;uC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),m=Symbol.iterator;function p(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,y={};function b(R,H,Y){this.props=R,this.context=H,this.refs=y,this.updater=Y||v}b.prototype.isReactComponent={},b.prototype.setState=function(R,H){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,H,"setState")},b.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function N(){}N.prototype=b.prototype;function P(R,H,Y){this.props=R,this.context=H,this.refs=y,this.updater=Y||v}var A=P.prototype=new N;A.constructor=P,j(A,b.prototype),A.isPureReactComponent=!0;var k=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function C(R,H,Y){var ee,me={},De=null,Se=null;if(H!=null)for(ee in H.ref!==void 0&&(Se=H.ref),H.key!==void 0&&(De=""+H.key),H)I.call(H,ee)&&!O.hasOwnProperty(ee)&&(me[ee]=H[ee]);var We=arguments.length-2;if(We===1)me.children=Y;else if(1<We){for(var pe=Array(We),ue=0;ue<We;ue++)pe[ue]=arguments[ue+2];me.children=pe}if(R&&R.defaultProps)for(ee in We=R.defaultProps,We)me[ee]===void 0&&(me[ee]=We[ee]);return{$$typeof:e,type:R,key:De,ref:Se,props:me,_owner:E.current}}function M(R,H){return{$$typeof:e,type:R.type,key:H,ref:R.ref,props:R.props,_owner:R._owner}}function F(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function V(R){var H={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Y){return H[Y]})}var T=/\/+/g;function L(R,H){return typeof R=="object"&&R!==null&&R.key!=null?V(""+R.key):H.toString(36)}function U(R,H,Y,ee,me){var De=typeof R;(De==="undefined"||De==="boolean")&&(R=null);var Se=!1;if(R===null)Se=!0;else switch(De){case"string":case"number":Se=!0;break;case"object":switch(R.$$typeof){case e:case t:Se=!0}}if(Se)return Se=R,me=me(Se),R=ee===""?"."+L(Se,0):ee,k(me)?(Y="",R!=null&&(Y=R.replace(T,"$&/")+"/"),U(me,H,Y,"",function(ue){return ue})):me!=null&&(F(me)&&(me=M(me,Y+(!me.key||Se&&Se.key===me.key?"":(""+me.key).replace(T,"$&/")+"/")+R)),H.push(me)),1;if(Se=0,ee=ee===""?".":ee+":",k(R))for(var We=0;We<R.length;We++){De=R[We];var pe=ee+L(De,We);Se+=U(De,H,Y,pe,me)}else if(pe=p(R),typeof pe=="function")for(R=pe.call(R),We=0;!(De=R.next()).done;)De=De.value,pe=ee+L(De,We++),Se+=U(De,H,Y,pe,me);else if(De==="object")throw H=String(R),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Se}function J(R,H,Y){if(R==null)return R;var ee=[],me=0;return U(R,ee,"","",function(De){return H.call(Y,De,me++)}),ee}function q(R){if(R._status===-1){var H=R._result;H=H(),H.then(function(Y){(R._status===0||R._status===-1)&&(R._status=1,R._result=Y)},function(Y){(R._status===0||R._status===-1)&&(R._status=2,R._result=Y)}),R._status===-1&&(R._status=0,R._result=H)}if(R._status===1)return R._result.default;throw R._result}var W={current:null},z={transition:null},K={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:z,ReactCurrentOwner:E};function B(){throw Error("act(...) is not supported in production builds of React.")}return Mt.Children={map:J,forEach:function(R,H,Y){J(R,function(){H.apply(this,arguments)},Y)},count:function(R){var H=0;return J(R,function(){H++}),H},toArray:function(R){return J(R,function(H){return H})||[]},only:function(R){if(!F(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Mt.Component=b,Mt.Fragment=n,Mt.Profiler=s,Mt.PureComponent=P,Mt.StrictMode=a,Mt.Suspense=f,Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Mt.act=B,Mt.cloneElement=function(R,H,Y){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ee=j({},R.props),me=R.key,De=R.ref,Se=R._owner;if(H!=null){if(H.ref!==void 0&&(De=H.ref,Se=E.current),H.key!==void 0&&(me=""+H.key),R.type&&R.type.defaultProps)var We=R.type.defaultProps;for(pe in H)I.call(H,pe)&&!O.hasOwnProperty(pe)&&(ee[pe]=H[pe]===void 0&&We!==void 0?We[pe]:H[pe])}var pe=arguments.length-2;if(pe===1)ee.children=Y;else if(1<pe){We=Array(pe);for(var ue=0;ue<pe;ue++)We[ue]=arguments[ue+2];ee.children=We}return{$$typeof:e,type:R.type,key:me,ref:De,props:ee,_owner:Se}},Mt.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:o,_context:R},R.Consumer=R},Mt.createElement=C,Mt.createFactory=function(R){var H=C.bind(null,R);return H.type=R,H},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(R){return{$$typeof:c,render:R}},Mt.isValidElement=F,Mt.lazy=function(R){return{$$typeof:u,_payload:{_status:-1,_result:R},_init:q}},Mt.memo=function(R,H){return{$$typeof:h,type:R,compare:H===void 0?null:H}},Mt.startTransition=function(R){var H=z.transition;z.transition={};try{R()}finally{z.transition=H}},Mt.unstable_act=B,Mt.useCallback=function(R,H){return W.current.useCallback(R,H)},Mt.useContext=function(R){return W.current.useContext(R)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(R){return W.current.useDeferredValue(R)},Mt.useEffect=function(R,H){return W.current.useEffect(R,H)},Mt.useId=function(){return W.current.useId()},Mt.useImperativeHandle=function(R,H,Y){return W.current.useImperativeHandle(R,H,Y)},Mt.useInsertionEffect=function(R,H){return W.current.useInsertionEffect(R,H)},Mt.useLayoutEffect=function(R,H){return W.current.useLayoutEffect(R,H)},Mt.useMemo=function(R,H){return W.current.useMemo(R,H)},Mt.useReducer=function(R,H,Y){return W.current.useReducer(R,H,Y)},Mt.useRef=function(R){return W.current.useRef(R)},Mt.useState=function(R){return W.current.useState(R)},Mt.useSyncExternalStore=function(R,H,Y){return W.current.useSyncExternalStore(R,H,Y)},Mt.useTransition=function(){return W.current.useTransition()},Mt.version="18.3.1",Mt}var fC;function $c(){return fC||(fC=1,N0.exports=z$()),N0.exports}var hC;function U$(){if(hC)return Fd;hC=1;var e=$c(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,h){var u,m={},p=null,v=null;h!==void 0&&(p=""+h),f.key!==void 0&&(p=""+f.key),f.ref!==void 0&&(v=f.ref);for(u in f)a.call(f,u)&&!o.hasOwnProperty(u)&&(m[u]=f[u]);if(c&&c.defaultProps)for(u in f=c.defaultProps,f)m[u]===void 0&&(m[u]=f[u]);return{$$typeof:t,type:c,key:p,ref:v,props:m,_owner:s.current}}return Fd.Fragment=n,Fd.jsx=l,Fd.jsxs=l,Fd}var mC;function B$(){return mC||(mC=1,w0.exports=U$()),w0.exports}var r=B$(),x=$c();const bt=Os(x),YI=L$({__proto__:null,default:bt},[x]);var Eh={},S0={exports:{}},Xn={},C0={exports:{}},k0={};var pC;function V$(){return pC||(pC=1,(function(e){function t(z,K){var B=z.length;z.push(K);e:for(;0<B;){var R=B-1>>>1,H=z[R];if(0<s(H,K))z[R]=K,z[B]=H,B=R;else break e}}function n(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var K=z[0],B=z.pop();if(B!==K){z[0]=B;e:for(var R=0,H=z.length,Y=H>>>1;R<Y;){var ee=2*(R+1)-1,me=z[ee],De=ee+1,Se=z[De];if(0>s(me,B))De<H&&0>s(Se,me)?(z[R]=Se,z[De]=B,R=De):(z[R]=me,z[ee]=B,R=ee);else if(De<H&&0>s(Se,B))z[R]=Se,z[De]=B,R=De;else break e}}return K}function s(z,K){var B=z.sortIndex-K.sortIndex;return B!==0?B:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var f=[],h=[],u=1,m=null,p=3,v=!1,j=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(z){for(var K=n(h);K!==null;){if(K.callback===null)a(h);else if(K.startTime<=z)a(h),K.sortIndex=K.expirationTime,t(f,K);else break;K=n(h)}}function k(z){if(y=!1,A(z),!j)if(n(f)!==null)j=!0,q(I);else{var K=n(h);K!==null&&W(k,K.startTime-z)}}function I(z,K){j=!1,y&&(y=!1,N(C),C=-1),v=!0;var B=p;try{for(A(K),m=n(f);m!==null&&(!(m.expirationTime>K)||z&&!V());){var R=m.callback;if(typeof R=="function"){m.callback=null,p=m.priorityLevel;var H=R(m.expirationTime<=K);K=e.unstable_now(),typeof H=="function"?m.callback=H:m===n(f)&&a(f),A(K)}else a(f);m=n(f)}if(m!==null)var Y=!0;else{var ee=n(h);ee!==null&&W(k,ee.startTime-K),Y=!1}return Y}finally{m=null,p=B,v=!1}}var E=!1,O=null,C=-1,M=5,F=-1;function V(){return!(e.unstable_now()-F<M)}function T(){if(O!==null){var z=e.unstable_now();F=z;var K=!0;try{K=O(!0,z)}finally{K?L():(E=!1,O=null)}}else E=!1}var L;if(typeof P=="function")L=function(){P(T)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,J=U.port2;U.port1.onmessage=T,L=function(){J.postMessage(null)}}else L=function(){b(T,0)};function q(z){O=z,E||(E=!0,L())}function W(z,K){C=b(function(){z(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,q(I))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(z){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var B=p;p=K;try{return z()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=p;p=z;try{return K()}finally{p=B}},e.unstable_scheduleCallback=function(z,K,B){var R=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?R+B:R):B=R,z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,z={id:u++,callback:K,priorityLevel:z,startTime:B,expirationTime:H,sortIndex:-1},B>R?(z.sortIndex=B,t(h,z),n(f)===null&&z===n(h)&&(y?(N(C),C=-1):y=!0,W(k,B-R))):(z.sortIndex=H,t(f,z),j||v||(j=!0,q(I))),z},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(z){var K=p;return function(){var B=p;p=K;try{return z.apply(this,arguments)}finally{p=B}}}})(k0)),k0}var gC;function q$(){return gC||(gC=1,C0.exports=V$()),C0.exports}var xC;function G$(){if(xC)return Xn;xC=1;var e=$c(),t=q$();function n(i){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+i,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+i+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function o(i,d){l(i,d),l(i+"Capture",d)}function l(i,d){for(s[i]=d,i=0;i<d.length;i++)a.add(d[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},m={};function p(i){return f.call(m,i)?!0:f.call(u,i)?!1:h.test(i)?m[i]=!0:(u[i]=!0,!1)}function v(i,d,g,w){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function j(i,d,g,w){if(d===null||typeof d>"u"||v(i,d,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function y(i,d,g,w,S,D,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=S,this.mustUseProperty=g,this.propertyName=i,this.type=d,this.sanitizeURL=D,this.removeEmptyString=$}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new y(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var d=i[0];b[d]=new y(d,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new y(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new y(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new y(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new y(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new y(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new y(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new y(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function P(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var d=i.replace(N,P);b[d]=new y(d,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var d=i.replace(N,P);b[d]=new y(d,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var d=i.replace(N,P);b[d]=new y(d,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new y(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new y(i,1,!1,i.toLowerCase(),null,!0,!0)});function A(i,d,g,w){var S=b.hasOwnProperty(d)?b[d]:null;(S!==null?S.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(j(d,g,S,w)&&(g=null),w||S===null?p(d)&&(g===null?i.removeAttribute(d):i.setAttribute(d,""+g)):S.mustUseProperty?i[S.propertyName]=g===null?S.type===3?!1:"":g:(d=S.attributeName,w=S.attributeNamespace,g===null?i.removeAttribute(d):(S=S.type,g=S===3||S===4&&g===!0?"":""+g,w?i.setAttributeNS(w,d,g):i.setAttribute(d,g))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),E=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),V=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),z=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var B=Object.assign,R;function H(i){if(R===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);R=d&&d[1]||""}return`
`+R+i}var Y=!1;function ee(i,d){if(!i||Y)return"";Y=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ee){var w=Ee}Reflect.construct(i,[],d)}else{try{d.call()}catch(Ee){w=Ee}i.call(d.prototype)}else{try{throw Error()}catch(Ee){w=Ee}i()}}catch(Ee){if(Ee&&w&&typeof Ee.stack=="string"){for(var S=Ee.stack.split(`
`),D=w.stack.split(`
`),$=S.length-1,te=D.length-1;1<=$&&0<=te&&S[$]!==D[te];)te--;for(;1<=$&&0<=te;$--,te--)if(S[$]!==D[te]){if($!==1||te!==1)do if($--,te--,0>te||S[$]!==D[te]){var de=`
`+S[$].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=$&&0<=te);break}}}finally{Y=!1,Error.prepareStackTrace=g}return(i=i?i.displayName||i.name:"")?H(i):""}function me(i){switch(i.tag){case 5:return H(i.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return i=ee(i.type,!1),i;case 11:return i=ee(i.type.render,!1),i;case 1:return i=ee(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case E:return"Portal";case M:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case U:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case F:return(i._context.displayName||"Context")+".Provider";case T:var d=i.render;return i=i.displayName,i||(i=d.displayName||d.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case J:return d=i.displayName||null,d!==null?d:De(i.type)||"Memo";case q:d=i._payload,i=i._init;try{return De(i(d))}catch{}}return null}function Se(i){var d=i.type;switch(i.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=d.render,i=i.displayName||i.name||"",d.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(d);case 8:return d===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function We(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function pe(i){var d=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ue(i){var d=pe(i)?"checked":"value",g=Object.getOwnPropertyDescriptor(i.constructor.prototype,d),w=""+i[d];if(!i.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var S=g.get,D=g.set;return Object.defineProperty(i,d,{configurable:!0,get:function(){return S.call(this)},set:function($){w=""+$,D.call(this,$)}}),Object.defineProperty(i,d,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function($){w=""+$},stopTracking:function(){i._valueTracker=null,delete i[d]}}}}function ke(i){i._valueTracker||(i._valueTracker=ue(i))}function se(i){if(!i)return!1;var d=i._valueTracker;if(!d)return!0;var g=d.getValue(),w="";return i&&(w=pe(i)?i.checked?"true":"false":i.value),i=w,i!==g?(d.setValue(i),!0):!1}function fe(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Te(i,d){var g=d.checked;return B({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??i._wrapperState.initialChecked})}function Re(i,d){var g=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;g=We(d.value!=null?d.value:g),i._wrapperState={initialChecked:w,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Ie(i,d){d=d.checked,d!=null&&A(i,"checked",d,!1)}function Qe(i,d){Ie(i,d);var g=We(d.value),w=d.type;if(g!=null)w==="number"?(g===0&&i.value===""||i.value!=g)&&(i.value=""+g):i.value!==""+g&&(i.value=""+g);else if(w==="submit"||w==="reset"){i.removeAttribute("value");return}d.hasOwnProperty("value")?tt(i,d.type,g):d.hasOwnProperty("defaultValue")&&tt(i,d.type,We(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(i.defaultChecked=!!d.defaultChecked)}function Xe(i,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+i._wrapperState.initialValue,g||d===i.value||(i.value=d),i.defaultValue=d}g=i.name,g!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,g!==""&&(i.name=g)}function tt(i,d,g){(d!=="number"||fe(i.ownerDocument)!==i)&&(g==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+g&&(i.defaultValue=""+g))}var Q=Array.isArray;function _(i,d,g,w){if(i=i.options,d){d={};for(var S=0;S<g.length;S++)d["$"+g[S]]=!0;for(g=0;g<i.length;g++)S=d.hasOwnProperty("$"+i[g].value),i[g].selected!==S&&(i[g].selected=S),S&&w&&(i[g].defaultSelected=!0)}else{for(g=""+We(g),d=null,S=0;S<i.length;S++){if(i[S].value===g){i[S].selected=!0,w&&(i[S].defaultSelected=!0);return}d!==null||i[S].disabled||(d=i[S])}d!==null&&(d.selected=!0)}}function X(i,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return B({},d,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ne(i,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(n(92));if(Q(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),g=d}i._wrapperState={initialValue:We(g)}}function ae(i,d){var g=We(d.value),w=We(d.defaultValue);g!=null&&(g=""+g,g!==i.value&&(i.value=g),d.defaultValue==null&&i.defaultValue!==g&&(i.defaultValue=g)),w!=null&&(i.defaultValue=""+w)}function ge(i){var d=i.textContent;d===i._wrapperState.initialValue&&d!==""&&d!==null&&(i.value=d)}function be(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(i,d){return i==null||i==="http://www.w3.org/1999/xhtml"?be(d):i==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ve,qe=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,w,S){MSApp.execUnsafeLocalFunction(function(){return i(d,g,w,S)})}:i})(function(i,d){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=d;else{for(ve=ve||document.createElement("div"),ve.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=ve.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;d.firstChild;)i.appendChild(d.firstChild)}});function Z(i,d){if(d){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=d;return}}i.textContent=d}var le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];Object.keys(le).forEach(function(i){Ce.forEach(function(d){d=d+i.charAt(0).toUpperCase()+i.substring(1),le[d]=le[i]})});function Oe(i,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||le.hasOwnProperty(i)&&le[i]?(""+d).trim():d+"px"}function Le(i,d){i=i.style;for(var g in d)if(d.hasOwnProperty(g)){var w=g.indexOf("--")===0,S=Oe(g,d[g],w);g==="float"&&(g="cssFloat"),w?i.setProperty(g,S):i[g]=S}}var Ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(i,d){if(d){if(Ye[i]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function Ot(i,d){if(i.indexOf("-")===-1)return typeof d.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dt=null;function Lt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var br=null,Xt=null,Ur=null;function At(i){if(i=Nd(i)){if(typeof br!="function")throw Error(n(280));var d=i.stateNode;d&&(d=Vf(d),br(i.stateNode,i.type,d))}}function na(i){Xt?Ur?Ur.push(i):Ur=[i]:Xt=i}function wa(){if(Xt){var i=Xt,d=Ur;if(Ur=Xt=null,At(i),d)for(i=0;i<d.length;i++)At(d[i])}}function xi(i,d){return i(d)}function vi(){}var _s=!1;function yi(i,d,g){if(_s)return i(d,g);_s=!0;try{return xi(i,d,g)}finally{_s=!1,(Xt!==null||Ur!==null)&&(vi(),wa())}}function Ga(i,d){var g=i.stateNode;if(g===null)return null;var w=Vf(g);if(w===null)return null;g=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(i=i.type,w=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!w;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var oe=!1;if(c)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){oe=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch{oe=!1}function we(i,d,g,w,S,D,$,te,de){var Ee=Array.prototype.slice.call(arguments,3);try{d.apply(g,Ee)}catch(Ue){this.onError(Ue)}}var $e=!1,xt=null,Je=!1,Et=null,ht={onError:function(i){$e=!0,xt=i}};function Kt(i,d,g,w,S,D,$,te,de){$e=!1,xt=null,we.apply(ht,arguments)}function Zt(i,d,g,w,S,D,$,te,de){if(Kt.apply(this,arguments),$e){if($e){var Ee=xt;$e=!1,xt=null}else throw Error(n(198));Je||(Je=!0,Et=Ee)}}function Bn(i){var d=i,g=i;if(i.alternate)for(;d.return;)d=d.return;else{i=d;do d=i,(d.flags&4098)!==0&&(g=d.return),i=d.return;while(i)}return d.tag===3?g:null}function bi(i){if(i.tag===13){var d=i.memoizedState;if(d===null&&(i=i.alternate,i!==null&&(d=i.memoizedState)),d!==null)return d.dehydrated}return null}function jf(i){if(Bn(i)!==i)throw Error(n(188))}function Vg(i){var d=i.alternate;if(!d){if(d=Bn(i),d===null)throw Error(n(188));return d!==i?null:i}for(var g=i,w=d;;){var S=g.return;if(S===null)break;var D=S.alternate;if(D===null){if(w=S.return,w!==null){g=w;continue}break}if(S.child===D.child){for(D=S.child;D;){if(D===g)return jf(S),i;if(D===w)return jf(S),d;D=D.sibling}throw Error(n(188))}if(g.return!==w.return)g=S,w=D;else{for(var $=!1,te=S.child;te;){if(te===g){$=!0,g=S,w=D;break}if(te===w){$=!0,w=S,g=D;break}te=te.sibling}if(!$){for(te=D.child;te;){if(te===g){$=!0,g=D,w=S;break}if(te===w){$=!0,w=D,g=S;break}te=te.sibling}if(!$)throw Error(n(189))}}if(g.alternate!==w)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?i:d}function kl(i){return i=Vg(i),i!==null?wf(i):null}function wf(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var d=wf(i);if(d!==null)return d;i=i.sibling}return null}var Pl=t.unstable_scheduleCallback,Nf=t.unstable_cancelCallback,ad=t.unstable_shouldYield,qg=t.unstable_requestPaint,lr=t.unstable_now,Gg=t.unstable_getCurrentPriorityLevel,ji=t.unstable_ImmediatePriority,Sf=t.unstable_UserBlockingPriority,Co=t.unstable_NormalPriority,sd=t.unstable_LowPriority,Cf=t.unstable_IdlePriority,ko=null,Na=null;function Hg(i){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(ko,i,void 0,(i.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Pf,Wg=Math.log,kf=Math.LN2;function Pf(i){return i>>>=0,i===0?32:31-(Wg(i)/kf|0)|0}var Po=64,El=4194304;function Eo(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Al(i,d){var g=i.pendingLanes;if(g===0)return 0;var w=0,S=i.suspendedLanes,D=i.pingedLanes,$=g&268435455;if($!==0){var te=$&~S;te!==0?w=Eo(te):(D&=$,D!==0&&(w=Eo(D)))}else $=g&~S,$!==0?w=Eo($):D!==0&&(w=Eo(D));if(w===0)return 0;if(d!==0&&d!==w&&(d&S)===0&&(S=w&-w,D=d&-d,S>=D||S===16&&(D&4194240)!==0))return d;if((w&4)!==0&&(w|=g&16),d=i.entangledLanes,d!==0)for(i=i.entanglements,d&=w;0<d;)g=31-Vn(d),S=1<<g,w|=i[g],d&=~S;return w}function Ef(i,d){switch(i){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kg(i,d){for(var g=i.suspendedLanes,w=i.pingedLanes,S=i.expirationTimes,D=i.pendingLanes;0<D;){var $=31-Vn(D),te=1<<$,de=S[$];de===-1?((te&g)===0||(te&w)!==0)&&(S[$]=Ef(te,d)):de<=d&&(i.expiredLanes|=te),D&=~te}}function Il(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function od(){var i=Po;return Po<<=1,(Po&4194240)===0&&(Po=64),i}function wi(i){for(var d=[],g=0;31>g;g++)d.push(i);return d}function Ni(i,d,g){i.pendingLanes|=d,d!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,d=31-Vn(d),i[d]=g}function id(i,d){var g=i.pendingLanes&~d;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=d,i.mutableReadLanes&=d,i.entangledLanes&=d,d=i.entanglements;var w=i.eventTimes;for(i=i.expirationTimes;0<g;){var S=31-Vn(g),D=1<<S;d[S]=0,w[S]=-1,i[S]=-1,g&=~D}}function Si(i,d){var g=i.entangledLanes|=d;for(i=i.entanglements;g;){var w=31-Vn(g),S=1<<w;S&d|i[w]&d&&(i[w]|=d),g&=~S}}var Rt=0;function ld(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ci,cd,Af,dd,If,ud=!1,ki=[],hs=null,ms=null,ps=null,Pi=new Map,Ei=new Map,gs=[],Yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Df(i,d){switch(i){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Pi.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(d.pointerId)}}function Ai(i,d,g,w,S,D){return i===null||i.nativeEvent!==D?(i={blockedOn:d,domEventName:g,eventSystemFlags:w,nativeEvent:D,targetContainers:[S]},d!==null&&(d=Nd(d),d!==null&&cd(d)),i):(i.eventSystemFlags|=w,d=i.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),i)}function Xg(i,d,g,w,S){switch(d){case"focusin":return hs=Ai(hs,i,d,g,w,S),!0;case"dragenter":return ms=Ai(ms,i,d,g,w,S),!0;case"mouseover":return ps=Ai(ps,i,d,g,w,S),!0;case"pointerover":var D=S.pointerId;return Pi.set(D,Ai(Pi.get(D)||null,i,d,g,w,S)),!0;case"gotpointercapture":return D=S.pointerId,Ei.set(D,Ai(Ei.get(D)||null,i,d,g,w,S)),!0}return!1}function Of(i){var d=Di(i.target);if(d!==null){var g=Bn(d);if(g!==null){if(d=g.tag,d===13){if(d=bi(g),d!==null){i.blockedOn=d,If(i.priority,function(){Af(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xe(i){if(i.blockedOn!==null)return!1;for(var d=i.targetContainers;0<d.length;){var g=Sa(i.domEventName,i.eventSystemFlags,d[0],i.nativeEvent);if(g===null){g=i.nativeEvent;var w=new g.constructor(g.type,g);dt=w,g.target.dispatchEvent(w),dt=null}else return d=Nd(g),d!==null&&cd(d),i.blockedOn=g,!1;d.shift()}return!0}function ie(i,d,g){xe(i)&&g.delete(d)}function yt(){ud=!1,hs!==null&&xe(hs)&&(hs=null),ms!==null&&xe(ms)&&(ms=null),ps!==null&&xe(ps)&&(ps=null),Pi.forEach(ie),Ei.forEach(ie)}function jt(i,d){i.blockedOn===d&&(i.blockedOn=null,ud||(ud=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yt)))}function On(i){function d(S){return jt(S,i)}if(0<ki.length){jt(ki[0],i);for(var g=1;g<ki.length;g++){var w=ki[g];w.blockedOn===i&&(w.blockedOn=null)}}for(hs!==null&&jt(hs,i),ms!==null&&jt(ms,i),ps!==null&&jt(ps,i),Pi.forEach(d),Ei.forEach(d),g=0;g<gs.length;g++)w=gs[g],w.blockedOn===i&&(w.blockedOn=null);for(;0<gs.length&&(g=gs[0],g.blockedOn===null);)Of(g),g.blockedOn===null&&gs.shift()}var xs=k.ReactCurrentBatchConfig,Ao=!0;function Mf(i,d,g,w){var S=Rt,D=xs.transition;xs.transition=null;try{Rt=1,Ol(i,d,g,w)}finally{Rt=S,xs.transition=D}}function Dl(i,d,g,w){var S=Rt,D=xs.transition;xs.transition=null;try{Rt=4,Ol(i,d,g,w)}finally{Rt=S,xs.transition=D}}function Ol(i,d,g,w){if(Ao){var S=Sa(i,d,g,w);if(S===null)fx(i,d,w,vs,g),Df(i,w);else if(Xg(S,i,d,g,w))w.stopPropagation();else if(Df(i,w),d&4&&-1<Yg.indexOf(i)){for(;S!==null;){var D=Nd(S);if(D!==null&&Ci(D),D=Sa(i,d,g,w),D===null&&fx(i,d,w,vs,g),D===S)break;S=D}S!==null&&w.stopPropagation()}else fx(i,d,w,null,g)}}var vs=null;function Sa(i,d,g,w){if(vs=null,i=Lt(w),i=Di(i),i!==null)if(d=Bn(i),d===null)i=null;else if(g=d.tag,g===13){if(i=bi(d),i!==null)return i;i=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;i=null}else d!==i&&(i=null);return vs=i,null}function $s(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gg()){case ji:return 1;case Sf:return 4;case Co:case sd:return 16;case Cf:return 536870912;default:return 16}default:return 16}}var Ha=null,Ii=null,rr=null;function qn(){if(rr)return rr;var i,d=Ii,g=d.length,w,S="value"in Ha?Ha.value:Ha.textContent,D=S.length;for(i=0;i<g&&d[i]===S[i];i++);var $=g-i;for(w=1;w<=$&&d[g-w]===S[D-w];w++);return rr=S.slice(i,1<w?1-w:void 0)}function Ml(i){var d=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&d===13&&(i=13)):i=d,i===10&&(i=13),32<=i||i===13?i:0}function Tf(){return!0}function ZN(){return!1}function aa(i){function d(g,w,S,D,$){this._reactName=g,this._targetInst=S,this.type=w,this.nativeEvent=D,this.target=$,this.currentTarget=null;for(var te in i)i.hasOwnProperty(te)&&(g=i[te],this[te]=g?g(D):D[te]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Tf:ZN,this.isPropagationStopped=ZN,this}return B(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Tf)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Tf)},persist:function(){},isPersistent:Tf}),d}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jg=aa(Tl),fd=B({},Tl,{view:0,detail:0}),f6=aa(fd),Qg,Zg,hd,Rf=B({},fd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tx,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==hd&&(hd&&i.type==="mousemove"?(Qg=i.screenX-hd.screenX,Zg=i.screenY-hd.screenY):Zg=Qg=0,hd=i),Qg)},movementY:function(i){return"movementY"in i?i.movementY:Zg}}),e1=aa(Rf),h6=B({},Rf,{dataTransfer:0}),m6=aa(h6),p6=B({},fd,{relatedTarget:0}),ex=aa(p6),g6=B({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),x6=aa(g6),v6=B({},Tl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),y6=aa(v6),b6=B({},Tl,{data:0}),t1=aa(b6),j6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S6(i){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(i):(i=N6[i])?!!d[i]:!1}function tx(){return S6}var C6=B({},fd,{key:function(i){if(i.key){var d=j6[i.key]||i.key;if(d!=="Unidentified")return d}return i.type==="keypress"?(i=Ml(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?w6[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tx,charCode:function(i){return i.type==="keypress"?Ml(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ml(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),k6=aa(C6),P6=B({},Rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r1=aa(P6),E6=B({},fd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tx}),A6=aa(E6),I6=B({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),D6=aa(I6),O6=B({},Rf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),M6=aa(O6),T6=[9,13,27,32],rx=c&&"CompositionEvent"in window,md=null;c&&"documentMode"in document&&(md=document.documentMode);var R6=c&&"TextEvent"in window&&!md,n1=c&&(!rx||md&&8<md&&11>=md),a1=" ",s1=!1;function o1(i,d){switch(i){case"keyup":return T6.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Rl=!1;function _6(i,d){switch(i){case"compositionend":return i1(d);case"keypress":return d.which!==32?null:(s1=!0,a1);case"textInput":return i=d.data,i===a1&&s1?null:i;default:return null}}function $6(i,d){if(Rl)return i==="compositionend"||!rx&&o1(i,d)?(i=qn(),rr=Ii=Ha=null,Rl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return n1&&d.locale!=="ko"?null:d.data;default:return null}}var F6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l1(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d==="input"?!!F6[i.type]:d==="textarea"}function c1(i,d,g,w){na(w),d=zf(d,"onChange"),0<d.length&&(g=new Jg("onChange","change",null,g,w),i.push({event:g,listeners:d}))}var pd=null,gd=null;function L6(i){P1(i,0)}function _f(i){var d=zl(i);if(se(d))return i}function z6(i,d){if(i==="change")return d}var d1=!1;if(c){var nx;if(c){var ax="oninput"in document;if(!ax){var u1=document.createElement("div");u1.setAttribute("oninput","return;"),ax=typeof u1.oninput=="function"}nx=ax}else nx=!1;d1=nx&&(!document.documentMode||9<document.documentMode)}function f1(){pd&&(pd.detachEvent("onpropertychange",h1),gd=pd=null)}function h1(i){if(i.propertyName==="value"&&_f(gd)){var d=[];c1(d,gd,i,Lt(i)),yi(L6,d)}}function U6(i,d,g){i==="focusin"?(f1(),pd=d,gd=g,pd.attachEvent("onpropertychange",h1)):i==="focusout"&&f1()}function B6(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _f(gd)}function V6(i,d){if(i==="click")return _f(d)}function q6(i,d){if(i==="input"||i==="change")return _f(d)}function G6(i,d){return i===d&&(i!==0||1/i===1/d)||i!==i&&d!==d}var Wa=typeof Object.is=="function"?Object.is:G6;function xd(i,d){if(Wa(i,d))return!0;if(typeof i!="object"||i===null||typeof d!="object"||d===null)return!1;var g=Object.keys(i),w=Object.keys(d);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var S=g[w];if(!f.call(d,S)||!Wa(i[S],d[S]))return!1}return!0}function m1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function p1(i,d){var g=m1(i);i=0;for(var w;g;){if(g.nodeType===3){if(w=i+g.textContent.length,i<=d&&w>=d)return{node:g,offset:d-i};i=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=m1(g)}}function g1(i,d){return i&&d?i===d?!0:i&&i.nodeType===3?!1:d&&d.nodeType===3?g1(i,d.parentNode):"contains"in i?i.contains(d):i.compareDocumentPosition?!!(i.compareDocumentPosition(d)&16):!1:!1}function x1(){for(var i=window,d=fe();d instanceof i.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)i=d.contentWindow;else break;d=fe(i.document)}return d}function sx(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d&&(d==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||d==="textarea"||i.contentEditable==="true")}function H6(i){var d=x1(),g=i.focusedElem,w=i.selectionRange;if(d!==g&&g&&g.ownerDocument&&g1(g.ownerDocument.documentElement,g)){if(w!==null&&sx(g)){if(d=w.start,i=w.end,i===void 0&&(i=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(i,g.value.length);else if(i=(d=g.ownerDocument||document)&&d.defaultView||window,i.getSelection){i=i.getSelection();var S=g.textContent.length,D=Math.min(w.start,S);w=w.end===void 0?D:Math.min(w.end,S),!i.extend&&D>w&&(S=w,w=D,D=S),S=p1(g,D);var $=p1(g,w);S&&$&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==$.node||i.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),i.removeAllRanges(),D>w?(i.addRange(d),i.extend($.node,$.offset)):(d.setEnd($.node,$.offset),i.addRange(d)))}}for(d=[],i=g;i=i.parentNode;)i.nodeType===1&&d.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)i=d[g],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var W6=c&&"documentMode"in document&&11>=document.documentMode,_l=null,ox=null,vd=null,ix=!1;function v1(i,d,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ix||_l==null||_l!==fe(w)||(w=_l,"selectionStart"in w&&sx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),vd&&xd(vd,w)||(vd=w,w=zf(ox,"onSelect"),0<w.length&&(d=new Jg("onSelect","select",null,d,g),i.push({event:d,listeners:w}),d.target=_l)))}function $f(i,d){var g={};return g[i.toLowerCase()]=d.toLowerCase(),g["Webkit"+i]="webkit"+d,g["Moz"+i]="moz"+d,g}var $l={animationend:$f("Animation","AnimationEnd"),animationiteration:$f("Animation","AnimationIteration"),animationstart:$f("Animation","AnimationStart"),transitionend:$f("Transition","TransitionEnd")},lx={},y1={};c&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function Ff(i){if(lx[i])return lx[i];if(!$l[i])return i;var d=$l[i],g;for(g in d)if(d.hasOwnProperty(g)&&g in y1)return lx[i]=d[g];return i}var b1=Ff("animationend"),j1=Ff("animationiteration"),w1=Ff("animationstart"),N1=Ff("transitionend"),S1=new Map,C1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(i,d){S1.set(i,d),o(d,[i])}for(var cx=0;cx<C1.length;cx++){var dx=C1[cx],K6=dx.toLowerCase(),Y6=dx[0].toUpperCase()+dx.slice(1);Io(K6,"on"+Y6)}Io(b1,"onAnimationEnd"),Io(j1,"onAnimationIteration"),Io(w1,"onAnimationStart"),Io("dblclick","onDoubleClick"),Io("focusin","onFocus"),Io("focusout","onBlur"),Io(N1,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X6=new Set("cancel close invalid load scroll toggle".split(" ").concat(yd));function k1(i,d,g){var w=i.type||"unknown-event";i.currentTarget=g,Zt(w,d,void 0,i),i.currentTarget=null}function P1(i,d){d=(d&4)!==0;for(var g=0;g<i.length;g++){var w=i[g],S=w.event;w=w.listeners;e:{var D=void 0;if(d)for(var $=w.length-1;0<=$;$--){var te=w[$],de=te.instance,Ee=te.currentTarget;if(te=te.listener,de!==D&&S.isPropagationStopped())break e;k1(S,te,Ee),D=de}else for($=0;$<w.length;$++){if(te=w[$],de=te.instance,Ee=te.currentTarget,te=te.listener,de!==D&&S.isPropagationStopped())break e;k1(S,te,Ee),D=de}}}if(Je)throw i=Et,Je=!1,Et=null,i}function cr(i,d){var g=d[vx];g===void 0&&(g=d[vx]=new Set);var w=i+"__bubble";g.has(w)||(E1(d,i,2,!1),g.add(w))}function ux(i,d,g){var w=0;d&&(w|=4),E1(g,i,w,d)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function bd(i){if(!i[Lf]){i[Lf]=!0,a.forEach(function(g){g!=="selectionchange"&&(X6.has(g)||ux(g,!1,i),ux(g,!0,i))});var d=i.nodeType===9?i:i.ownerDocument;d===null||d[Lf]||(d[Lf]=!0,ux("selectionchange",!1,d))}}function E1(i,d,g,w){switch($s(d)){case 1:var S=Mf;break;case 4:S=Dl;break;default:S=Ol}g=S.bind(null,d,g,i),S=void 0,!oe||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),w?S!==void 0?i.addEventListener(d,g,{capture:!0,passive:S}):i.addEventListener(d,g,!0):S!==void 0?i.addEventListener(d,g,{passive:S}):i.addEventListener(d,g,!1)}function fx(i,d,g,w,S){var D=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var $=w.tag;if($===3||$===4){var te=w.stateNode.containerInfo;if(te===S||te.nodeType===8&&te.parentNode===S)break;if($===4)for($=w.return;$!==null;){var de=$.tag;if((de===3||de===4)&&(de=$.stateNode.containerInfo,de===S||de.nodeType===8&&de.parentNode===S))return;$=$.return}for(;te!==null;){if($=Di(te),$===null)return;if(de=$.tag,de===5||de===6){w=D=$;continue e}te=te.parentNode}}w=w.return}yi(function(){var Ee=D,Ue=Lt(g),Ve=[];e:{var ze=S1.get(i);if(ze!==void 0){var et=Jg,at=i;switch(i){case"keypress":if(Ml(g)===0)break e;case"keydown":case"keyup":et=k6;break;case"focusin":at="focus",et=ex;break;case"focusout":at="blur",et=ex;break;case"beforeblur":case"afterblur":et=ex;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=e1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=m6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=A6;break;case b1:case j1:case w1:et=x6;break;case N1:et=D6;break;case"scroll":et=f6;break;case"wheel":et=M6;break;case"copy":case"cut":case"paste":et=y6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=r1}var ct=(d&4)!==0,Ir=!ct&&i==="scroll",je=ct?ze!==null?ze+"Capture":null:ze;ct=[];for(var he=Ee,Ne;he!==null;){Ne=he;var Ge=Ne.stateNode;if(Ne.tag===5&&Ge!==null&&(Ne=Ge,je!==null&&(Ge=Ga(he,je),Ge!=null&&ct.push(jd(he,Ge,Ne)))),Ir)break;he=he.return}0<ct.length&&(ze=new et(ze,at,null,g,Ue),Ve.push({event:ze,listeners:ct}))}}if((d&7)===0){e:{if(ze=i==="mouseover"||i==="pointerover",et=i==="mouseout"||i==="pointerout",ze&&g!==dt&&(at=g.relatedTarget||g.fromElement)&&(Di(at)||at[Fs]))break e;if((et||ze)&&(ze=Ue.window===Ue?Ue:(ze=Ue.ownerDocument)?ze.defaultView||ze.parentWindow:window,et?(at=g.relatedTarget||g.toElement,et=Ee,at=at?Di(at):null,at!==null&&(Ir=Bn(at),at!==Ir||at.tag!==5&&at.tag!==6)&&(at=null)):(et=null,at=Ee),et!==at)){if(ct=e1,Ge="onMouseLeave",je="onMouseEnter",he="mouse",(i==="pointerout"||i==="pointerover")&&(ct=r1,Ge="onPointerLeave",je="onPointerEnter",he="pointer"),Ir=et==null?ze:zl(et),Ne=at==null?ze:zl(at),ze=new ct(Ge,he+"leave",et,g,Ue),ze.target=Ir,ze.relatedTarget=Ne,Ge=null,Di(Ue)===Ee&&(ct=new ct(je,he+"enter",at,g,Ue),ct.target=Ne,ct.relatedTarget=Ir,Ge=ct),Ir=Ge,et&&at)t:{for(ct=et,je=at,he=0,Ne=ct;Ne;Ne=Fl(Ne))he++;for(Ne=0,Ge=je;Ge;Ge=Fl(Ge))Ne++;for(;0<he-Ne;)ct=Fl(ct),he--;for(;0<Ne-he;)je=Fl(je),Ne--;for(;he--;){if(ct===je||je!==null&&ct===je.alternate)break t;ct=Fl(ct),je=Fl(je)}ct=null}else ct=null;et!==null&&A1(Ve,ze,et,ct,!1),at!==null&&Ir!==null&&A1(Ve,Ir,at,ct,!0)}}e:{if(ze=Ee?zl(Ee):window,et=ze.nodeName&&ze.nodeName.toLowerCase(),et==="select"||et==="input"&&ze.type==="file")var ft=z6;else if(l1(ze))if(d1)ft=q6;else{ft=B6;var wt=U6}else(et=ze.nodeName)&&et.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(ft=V6);if(ft&&(ft=ft(i,Ee))){c1(Ve,ft,g,Ue);break e}wt&&wt(i,ze,Ee),i==="focusout"&&(wt=ze._wrapperState)&&wt.controlled&&ze.type==="number"&&tt(ze,"number",ze.value)}switch(wt=Ee?zl(Ee):window,i){case"focusin":(l1(wt)||wt.contentEditable==="true")&&(_l=wt,ox=Ee,vd=null);break;case"focusout":vd=ox=_l=null;break;case"mousedown":ix=!0;break;case"contextmenu":case"mouseup":case"dragend":ix=!1,v1(Ve,g,Ue);break;case"selectionchange":if(W6)break;case"keydown":case"keyup":v1(Ve,g,Ue)}var Nt;if(rx)e:{switch(i){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else Rl?o1(i,g)&&(kt="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(kt="onCompositionStart");kt&&(n1&&g.locale!=="ko"&&(Rl||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Rl&&(Nt=qn()):(Ha=Ue,Ii="value"in Ha?Ha.value:Ha.textContent,Rl=!0)),wt=zf(Ee,kt),0<wt.length&&(kt=new t1(kt,i,null,g,Ue),Ve.push({event:kt,listeners:wt}),Nt?kt.data=Nt:(Nt=i1(g),Nt!==null&&(kt.data=Nt)))),(Nt=R6?_6(i,g):$6(i,g))&&(Ee=zf(Ee,"onBeforeInput"),0<Ee.length&&(Ue=new t1("onBeforeInput","beforeinput",null,g,Ue),Ve.push({event:Ue,listeners:Ee}),Ue.data=Nt))}P1(Ve,d)})}function jd(i,d,g){return{instance:i,listener:d,currentTarget:g}}function zf(i,d){for(var g=d+"Capture",w=[];i!==null;){var S=i,D=S.stateNode;S.tag===5&&D!==null&&(S=D,D=Ga(i,g),D!=null&&w.unshift(jd(i,D,S)),D=Ga(i,d),D!=null&&w.push(jd(i,D,S))),i=i.return}return w}function Fl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function A1(i,d,g,w,S){for(var D=d._reactName,$=[];g!==null&&g!==w;){var te=g,de=te.alternate,Ee=te.stateNode;if(de!==null&&de===w)break;te.tag===5&&Ee!==null&&(te=Ee,S?(de=Ga(g,D),de!=null&&$.unshift(jd(g,de,te))):S||(de=Ga(g,D),de!=null&&$.push(jd(g,de,te)))),g=g.return}$.length!==0&&i.push({event:d,listeners:$})}var J6=/\r\n?/g,Q6=/\u0000|\uFFFD/g;function I1(i){return(typeof i=="string"?i:""+i).replace(J6,`
`).replace(Q6,"")}function Uf(i,d,g){if(d=I1(d),I1(i)!==d&&g)throw Error(n(425))}function Bf(){}var hx=null,mx=null;function px(i,d){return i==="textarea"||i==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var gx=typeof setTimeout=="function"?setTimeout:void 0,Z6=typeof clearTimeout=="function"?clearTimeout:void 0,D1=typeof Promise=="function"?Promise:void 0,e$=typeof queueMicrotask=="function"?queueMicrotask:typeof D1<"u"?function(i){return D1.resolve(null).then(i).catch(t$)}:gx;function t$(i){setTimeout(function(){throw i})}function xx(i,d){var g=d,w=0;do{var S=g.nextSibling;if(i.removeChild(g),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(w===0){i.removeChild(S),On(d);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=S}while(g);On(d)}function Do(i){for(;i!=null;i=i.nextSibling){var d=i.nodeType;if(d===1||d===3)break;if(d===8){if(d=i.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return i}function O1(i){i=i.previousSibling;for(var d=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return i;d--}else g==="/$"&&d++}i=i.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),ys="__reactFiber$"+Ll,wd="__reactProps$"+Ll,Fs="__reactContainer$"+Ll,vx="__reactEvents$"+Ll,r$="__reactListeners$"+Ll,n$="__reactHandles$"+Ll;function Di(i){var d=i[ys];if(d)return d;for(var g=i.parentNode;g;){if(d=g[Fs]||g[ys]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(i=O1(i);i!==null;){if(g=i[ys])return g;i=O1(i)}return d}i=g,g=i.parentNode}return null}function Nd(i){return i=i[ys]||i[Fs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function zl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Vf(i){return i[wd]||null}var yx=[],Ul=-1;function Oo(i){return{current:i}}function dr(i){0>Ul||(i.current=yx[Ul],yx[Ul]=null,Ul--)}function or(i,d){Ul++,yx[Ul]=i.current,i.current=d}var Mo={},wn=Oo(Mo),Gn=Oo(!1),Oi=Mo;function Bl(i,d){var g=i.type.contextTypes;if(!g)return Mo;var w=i.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var S={},D;for(D in g)S[D]=d[D];return w&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=d,i.__reactInternalMemoizedMaskedChildContext=S),S}function Hn(i){return i=i.childContextTypes,i!=null}function qf(){dr(Gn),dr(wn)}function M1(i,d,g){if(wn.current!==Mo)throw Error(n(168));or(wn,d),or(Gn,g)}function T1(i,d,g){var w=i.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var S in w)if(!(S in d))throw Error(n(108,Se(i)||"Unknown",S));return B({},g,w)}function Gf(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Mo,Oi=wn.current,or(wn,i),or(Gn,Gn.current),!0}function R1(i,d,g){var w=i.stateNode;if(!w)throw Error(n(169));g?(i=T1(i,d,Oi),w.__reactInternalMemoizedMergedChildContext=i,dr(Gn),dr(wn),or(wn,i)):dr(Gn),or(Gn,g)}var Ls=null,Hf=!1,bx=!1;function _1(i){Ls===null?Ls=[i]:Ls.push(i)}function a$(i){Hf=!0,_1(i)}function To(){if(!bx&&Ls!==null){bx=!0;var i=0,d=Rt;try{var g=Ls;for(Rt=1;i<g.length;i++){var w=g[i];do w=w(!0);while(w!==null)}Ls=null,Hf=!1}catch(S){throw Ls!==null&&(Ls=Ls.slice(i+1)),Pl(ji,To),S}finally{Rt=d,bx=!1}}return null}var Vl=[],ql=0,Wf=null,Kf=0,Ca=[],ka=0,Mi=null,zs=1,Us="";function Ti(i,d){Vl[ql++]=Kf,Vl[ql++]=Wf,Wf=i,Kf=d}function $1(i,d,g){Ca[ka++]=zs,Ca[ka++]=Us,Ca[ka++]=Mi,Mi=i;var w=zs;i=Us;var S=32-Vn(w)-1;w&=~(1<<S),g+=1;var D=32-Vn(d)+S;if(30<D){var $=S-S%5;D=(w&(1<<$)-1).toString(32),w>>=$,S-=$,zs=1<<32-Vn(d)+S|g<<S|w,Us=D+i}else zs=1<<D|g<<S|w,Us=i}function jx(i){i.return!==null&&(Ti(i,1),$1(i,1,0))}function wx(i){for(;i===Wf;)Wf=Vl[--ql],Vl[ql]=null,Kf=Vl[--ql],Vl[ql]=null;for(;i===Mi;)Mi=Ca[--ka],Ca[ka]=null,Us=Ca[--ka],Ca[ka]=null,zs=Ca[--ka],Ca[ka]=null}var sa=null,oa=null,hr=!1,Ka=null;function F1(i,d){var g=Ia(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=i,d=i.deletions,d===null?(i.deletions=[g],i.flags|=16):d.push(g)}function L1(i,d){switch(i.tag){case 5:var g=i.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(i.stateNode=d,sa=i,oa=Do(d.firstChild),!0):!1;case 6:return d=i.pendingProps===""||d.nodeType!==3?null:d,d!==null?(i.stateNode=d,sa=i,oa=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=Mi!==null?{id:zs,overflow:Us}:null,i.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=Ia(18,null,null,0),g.stateNode=d,g.return=i,i.child=g,sa=i,oa=null,!0):!1;default:return!1}}function Nx(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Sx(i){if(hr){var d=oa;if(d){var g=d;if(!L1(i,d)){if(Nx(i))throw Error(n(418));d=Do(g.nextSibling);var w=sa;d&&L1(i,d)?F1(w,g):(i.flags=i.flags&-4097|2,hr=!1,sa=i)}}else{if(Nx(i))throw Error(n(418));i.flags=i.flags&-4097|2,hr=!1,sa=i}}}function z1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;sa=i}function Yf(i){if(i!==sa)return!1;if(!hr)return z1(i),hr=!0,!1;var d;if((d=i.tag!==3)&&!(d=i.tag!==5)&&(d=i.type,d=d!=="head"&&d!=="body"&&!px(i.type,i.memoizedProps)),d&&(d=oa)){if(Nx(i))throw U1(),Error(n(418));for(;d;)F1(i,d),d=Do(d.nextSibling)}if(z1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,d=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"){if(d===0){oa=Do(i.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}i=i.nextSibling}oa=null}}else oa=sa?Do(i.stateNode.nextSibling):null;return!0}function U1(){for(var i=oa;i;)i=Do(i.nextSibling)}function Gl(){oa=sa=null,hr=!1}function Cx(i){Ka===null?Ka=[i]:Ka.push(i)}var s$=k.ReactCurrentBatchConfig;function Sd(i,d,g){if(i=g.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var w=g.stateNode}if(!w)throw Error(n(147,i));var S=w,D=""+i;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===D?d.ref:(d=function($){var te=S.refs;$===null?delete te[D]:te[D]=$},d._stringRef=D,d)}if(typeof i!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,i))}return i}function Xf(i,d){throw i=Object.prototype.toString.call(d),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":i))}function B1(i){var d=i._init;return d(i._payload)}function V1(i){function d(je,he){if(i){var Ne=je.deletions;Ne===null?(je.deletions=[he],je.flags|=16):Ne.push(he)}}function g(je,he){if(!i)return null;for(;he!==null;)d(je,he),he=he.sibling;return null}function w(je,he){for(je=new Map;he!==null;)he.key!==null?je.set(he.key,he):je.set(he.index,he),he=he.sibling;return je}function S(je,he){return je=Bo(je,he),je.index=0,je.sibling=null,je}function D(je,he,Ne){return je.index=Ne,i?(Ne=je.alternate,Ne!==null?(Ne=Ne.index,Ne<he?(je.flags|=2,he):Ne):(je.flags|=2,he)):(je.flags|=1048576,he)}function $(je){return i&&je.alternate===null&&(je.flags|=2),je}function te(je,he,Ne,Ge){return he===null||he.tag!==6?(he=g0(Ne,je.mode,Ge),he.return=je,he):(he=S(he,Ne),he.return=je,he)}function de(je,he,Ne,Ge){var ft=Ne.type;return ft===O?Ue(je,he,Ne.props.children,Ge,Ne.key):he!==null&&(he.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===q&&B1(ft)===he.type)?(Ge=S(he,Ne.props),Ge.ref=Sd(je,he,Ne),Ge.return=je,Ge):(Ge=bh(Ne.type,Ne.key,Ne.props,null,je.mode,Ge),Ge.ref=Sd(je,he,Ne),Ge.return=je,Ge)}function Ee(je,he,Ne,Ge){return he===null||he.tag!==4||he.stateNode.containerInfo!==Ne.containerInfo||he.stateNode.implementation!==Ne.implementation?(he=x0(Ne,je.mode,Ge),he.return=je,he):(he=S(he,Ne.children||[]),he.return=je,he)}function Ue(je,he,Ne,Ge,ft){return he===null||he.tag!==7?(he=Bi(Ne,je.mode,Ge,ft),he.return=je,he):(he=S(he,Ne),he.return=je,he)}function Ve(je,he,Ne){if(typeof he=="string"&&he!==""||typeof he=="number")return he=g0(""+he,je.mode,Ne),he.return=je,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case I:return Ne=bh(he.type,he.key,he.props,null,je.mode,Ne),Ne.ref=Sd(je,null,he),Ne.return=je,Ne;case E:return he=x0(he,je.mode,Ne),he.return=je,he;case q:var Ge=he._init;return Ve(je,Ge(he._payload),Ne)}if(Q(he)||K(he))return he=Bi(he,je.mode,Ne,null),he.return=je,he;Xf(je,he)}return null}function ze(je,he,Ne,Ge){var ft=he!==null?he.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return ft!==null?null:te(je,he,""+Ne,Ge);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case I:return Ne.key===ft?de(je,he,Ne,Ge):null;case E:return Ne.key===ft?Ee(je,he,Ne,Ge):null;case q:return ft=Ne._init,ze(je,he,ft(Ne._payload),Ge)}if(Q(Ne)||K(Ne))return ft!==null?null:Ue(je,he,Ne,Ge,null);Xf(je,Ne)}return null}function et(je,he,Ne,Ge,ft){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return je=je.get(Ne)||null,te(he,je,""+Ge,ft);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case I:return je=je.get(Ge.key===null?Ne:Ge.key)||null,de(he,je,Ge,ft);case E:return je=je.get(Ge.key===null?Ne:Ge.key)||null,Ee(he,je,Ge,ft);case q:var wt=Ge._init;return et(je,he,Ne,wt(Ge._payload),ft)}if(Q(Ge)||K(Ge))return je=je.get(Ne)||null,Ue(he,je,Ge,ft,null);Xf(he,Ge)}return null}function at(je,he,Ne,Ge){for(var ft=null,wt=null,Nt=he,kt=he=0,en=null;Nt!==null&&kt<Ne.length;kt++){Nt.index>kt?(en=Nt,Nt=null):en=Nt.sibling;var Gt=ze(je,Nt,Ne[kt],Ge);if(Gt===null){Nt===null&&(Nt=en);break}i&&Nt&&Gt.alternate===null&&d(je,Nt),he=D(Gt,he,kt),wt===null?ft=Gt:wt.sibling=Gt,wt=Gt,Nt=en}if(kt===Ne.length)return g(je,Nt),hr&&Ti(je,kt),ft;if(Nt===null){for(;kt<Ne.length;kt++)Nt=Ve(je,Ne[kt],Ge),Nt!==null&&(he=D(Nt,he,kt),wt===null?ft=Nt:wt.sibling=Nt,wt=Nt);return hr&&Ti(je,kt),ft}for(Nt=w(je,Nt);kt<Ne.length;kt++)en=et(Nt,je,kt,Ne[kt],Ge),en!==null&&(i&&en.alternate!==null&&Nt.delete(en.key===null?kt:en.key),he=D(en,he,kt),wt===null?ft=en:wt.sibling=en,wt=en);return i&&Nt.forEach(function(Vo){return d(je,Vo)}),hr&&Ti(je,kt),ft}function ct(je,he,Ne,Ge){var ft=K(Ne);if(typeof ft!="function")throw Error(n(150));if(Ne=ft.call(Ne),Ne==null)throw Error(n(151));for(var wt=ft=null,Nt=he,kt=he=0,en=null,Gt=Ne.next();Nt!==null&&!Gt.done;kt++,Gt=Ne.next()){Nt.index>kt?(en=Nt,Nt=null):en=Nt.sibling;var Vo=ze(je,Nt,Gt.value,Ge);if(Vo===null){Nt===null&&(Nt=en);break}i&&Nt&&Vo.alternate===null&&d(je,Nt),he=D(Vo,he,kt),wt===null?ft=Vo:wt.sibling=Vo,wt=Vo,Nt=en}if(Gt.done)return g(je,Nt),hr&&Ti(je,kt),ft;if(Nt===null){for(;!Gt.done;kt++,Gt=Ne.next())Gt=Ve(je,Gt.value,Ge),Gt!==null&&(he=D(Gt,he,kt),wt===null?ft=Gt:wt.sibling=Gt,wt=Gt);return hr&&Ti(je,kt),ft}for(Nt=w(je,Nt);!Gt.done;kt++,Gt=Ne.next())Gt=et(Nt,je,kt,Gt.value,Ge),Gt!==null&&(i&&Gt.alternate!==null&&Nt.delete(Gt.key===null?kt:Gt.key),he=D(Gt,he,kt),wt===null?ft=Gt:wt.sibling=Gt,wt=Gt);return i&&Nt.forEach(function(F$){return d(je,F$)}),hr&&Ti(je,kt),ft}function Ir(je,he,Ne,Ge){if(typeof Ne=="object"&&Ne!==null&&Ne.type===O&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case I:e:{for(var ft=Ne.key,wt=he;wt!==null;){if(wt.key===ft){if(ft=Ne.type,ft===O){if(wt.tag===7){g(je,wt.sibling),he=S(wt,Ne.props.children),he.return=je,je=he;break e}}else if(wt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===q&&B1(ft)===wt.type){g(je,wt.sibling),he=S(wt,Ne.props),he.ref=Sd(je,wt,Ne),he.return=je,je=he;break e}g(je,wt);break}else d(je,wt);wt=wt.sibling}Ne.type===O?(he=Bi(Ne.props.children,je.mode,Ge,Ne.key),he.return=je,je=he):(Ge=bh(Ne.type,Ne.key,Ne.props,null,je.mode,Ge),Ge.ref=Sd(je,he,Ne),Ge.return=je,je=Ge)}return $(je);case E:e:{for(wt=Ne.key;he!==null;){if(he.key===wt)if(he.tag===4&&he.stateNode.containerInfo===Ne.containerInfo&&he.stateNode.implementation===Ne.implementation){g(je,he.sibling),he=S(he,Ne.children||[]),he.return=je,je=he;break e}else{g(je,he);break}else d(je,he);he=he.sibling}he=x0(Ne,je.mode,Ge),he.return=je,je=he}return $(je);case q:return wt=Ne._init,Ir(je,he,wt(Ne._payload),Ge)}if(Q(Ne))return at(je,he,Ne,Ge);if(K(Ne))return ct(je,he,Ne,Ge);Xf(je,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,he!==null&&he.tag===6?(g(je,he.sibling),he=S(he,Ne),he.return=je,je=he):(g(je,he),he=g0(Ne,je.mode,Ge),he.return=je,je=he),$(je)):g(je,he)}return Ir}var Hl=V1(!0),q1=V1(!1),Jf=Oo(null),Qf=null,Wl=null,kx=null;function Px(){kx=Wl=Qf=null}function Ex(i){var d=Jf.current;dr(Jf),i._currentValue=d}function Ax(i,d,g){for(;i!==null;){var w=i.alternate;if((i.childLanes&d)!==d?(i.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),i===g)break;i=i.return}}function Kl(i,d){Qf=i,kx=Wl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&d)!==0&&(Wn=!0),i.firstContext=null)}function Pa(i){var d=i._currentValue;if(kx!==i)if(i={context:i,memoizedValue:d,next:null},Wl===null){if(Qf===null)throw Error(n(308));Wl=i,Qf.dependencies={lanes:0,firstContext:i}}else Wl=Wl.next=i;return d}var Ri=null;function Ix(i){Ri===null?Ri=[i]:Ri.push(i)}function G1(i,d,g,w){var S=d.interleaved;return S===null?(g.next=g,Ix(d)):(g.next=S.next,S.next=g),d.interleaved=g,Bs(i,w)}function Bs(i,d){i.lanes|=d;var g=i.alternate;for(g!==null&&(g.lanes|=d),g=i,i=i.return;i!==null;)i.childLanes|=d,g=i.alternate,g!==null&&(g.childLanes|=d),g=i,i=i.return;return g.tag===3?g.stateNode:null}var Ro=!1;function Dx(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H1(i,d){i=i.updateQueue,d.updateQueue===i&&(d.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Vs(i,d){return{eventTime:i,lane:d,tag:0,payload:null,callback:null,next:null}}function _o(i,d,g){var w=i.updateQueue;if(w===null)return null;if(w=w.shared,(Vt&2)!==0){var S=w.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),w.pending=d,Bs(i,g)}return S=w.interleaved,S===null?(d.next=d,Ix(w)):(d.next=S.next,S.next=d),w.interleaved=d,Bs(i,g)}function Zf(i,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var w=d.lanes;w&=i.pendingLanes,g|=w,d.lanes=g,Si(i,g)}}function W1(i,d){var g=i.updateQueue,w=i.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var S=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var $={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};D===null?S=D=$:D=D.next=$,g=g.next}while(g!==null);D===null?S=D=d:D=D.next=d}else S=D=d;g={baseState:w.baseState,firstBaseUpdate:S,lastBaseUpdate:D,shared:w.shared,effects:w.effects},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=d:i.next=d,g.lastBaseUpdate=d}function eh(i,d,g,w){var S=i.updateQueue;Ro=!1;var D=S.firstBaseUpdate,$=S.lastBaseUpdate,te=S.shared.pending;if(te!==null){S.shared.pending=null;var de=te,Ee=de.next;de.next=null,$===null?D=Ee:$.next=Ee,$=de;var Ue=i.alternate;Ue!==null&&(Ue=Ue.updateQueue,te=Ue.lastBaseUpdate,te!==$&&(te===null?Ue.firstBaseUpdate=Ee:te.next=Ee,Ue.lastBaseUpdate=de))}if(D!==null){var Ve=S.baseState;$=0,Ue=Ee=de=null,te=D;do{var ze=te.lane,et=te.eventTime;if((w&ze)===ze){Ue!==null&&(Ue=Ue.next={eventTime:et,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var at=i,ct=te;switch(ze=d,et=g,ct.tag){case 1:if(at=ct.payload,typeof at=="function"){Ve=at.call(et,Ve,ze);break e}Ve=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ct.payload,ze=typeof at=="function"?at.call(et,Ve,ze):at,ze==null)break e;Ve=B({},Ve,ze);break e;case 2:Ro=!0}}te.callback!==null&&te.lane!==0&&(i.flags|=64,ze=S.effects,ze===null?S.effects=[te]:ze.push(te))}else et={eventTime:et,lane:ze,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ue===null?(Ee=Ue=et,de=Ve):Ue=Ue.next=et,$|=ze;if(te=te.next,te===null){if(te=S.shared.pending,te===null)break;ze=te,te=ze.next,ze.next=null,S.lastBaseUpdate=ze,S.shared.pending=null}}while(!0);if(Ue===null&&(de=Ve),S.baseState=de,S.firstBaseUpdate=Ee,S.lastBaseUpdate=Ue,d=S.shared.interleaved,d!==null){S=d;do $|=S.lane,S=S.next;while(S!==d)}else D===null&&(S.shared.lanes=0);Fi|=$,i.lanes=$,i.memoizedState=Ve}}function K1(i,d,g){if(i=d.effects,d.effects=null,i!==null)for(d=0;d<i.length;d++){var w=i[d],S=w.callback;if(S!==null){if(w.callback=null,w=g,typeof S!="function")throw Error(n(191,S));S.call(w)}}}var Cd={},bs=Oo(Cd),kd=Oo(Cd),Pd=Oo(Cd);function _i(i){if(i===Cd)throw Error(n(174));return i}function Ox(i,d){switch(or(Pd,d),or(kd,i),or(bs,Cd),i=d.nodeType,i){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Fe(null,"");break;default:i=i===8?d.parentNode:d,d=i.namespaceURI||null,i=i.tagName,d=Fe(d,i)}dr(bs),or(bs,d)}function Yl(){dr(bs),dr(kd),dr(Pd)}function Y1(i){_i(Pd.current);var d=_i(bs.current),g=Fe(d,i.type);d!==g&&(or(kd,i),or(bs,g))}function Mx(i){kd.current===i&&(dr(bs),dr(kd))}var jr=Oo(0);function th(i){for(var d=i;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Tx=[];function Rx(){for(var i=0;i<Tx.length;i++)Tx[i]._workInProgressVersionPrimary=null;Tx.length=0}var rh=k.ReactCurrentDispatcher,_x=k.ReactCurrentBatchConfig,$i=0,wr=null,Br=null,Qr=null,nh=!1,Ed=!1,Ad=0,o$=0;function Nn(){throw Error(n(321))}function $x(i,d){if(d===null)return!1;for(var g=0;g<d.length&&g<i.length;g++)if(!Wa(i[g],d[g]))return!1;return!0}function Fx(i,d,g,w,S,D){if($i=D,wr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,rh.current=i===null||i.memoizedState===null?d$:u$,i=g(w,S),Ed){D=0;do{if(Ed=!1,Ad=0,25<=D)throw Error(n(301));D+=1,Qr=Br=null,d.updateQueue=null,rh.current=f$,i=g(w,S)}while(Ed)}if(rh.current=oh,d=Br!==null&&Br.next!==null,$i=0,Qr=Br=wr=null,nh=!1,d)throw Error(n(300));return i}function Lx(){var i=Ad!==0;return Ad=0,i}function js(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?wr.memoizedState=Qr=i:Qr=Qr.next=i,Qr}function Ea(){if(Br===null){var i=wr.alternate;i=i!==null?i.memoizedState:null}else i=Br.next;var d=Qr===null?wr.memoizedState:Qr.next;if(d!==null)Qr=d,Br=i;else{if(i===null)throw Error(n(310));Br=i,i={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Qr===null?wr.memoizedState=Qr=i:Qr=Qr.next=i}return Qr}function Id(i,d){return typeof d=="function"?d(i):d}function zx(i){var d=Ea(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var w=Br,S=w.baseQueue,D=g.pending;if(D!==null){if(S!==null){var $=S.next;S.next=D.next,D.next=$}w.baseQueue=S=D,g.pending=null}if(S!==null){D=S.next,w=w.baseState;var te=$=null,de=null,Ee=D;do{var Ue=Ee.lane;if(($i&Ue)===Ue)de!==null&&(de=de.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),w=Ee.hasEagerState?Ee.eagerState:i(w,Ee.action);else{var Ve={lane:Ue,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};de===null?(te=de=Ve,$=w):de=de.next=Ve,wr.lanes|=Ue,Fi|=Ue}Ee=Ee.next}while(Ee!==null&&Ee!==D);de===null?$=w:de.next=te,Wa(w,d.memoizedState)||(Wn=!0),d.memoizedState=w,d.baseState=$,d.baseQueue=de,g.lastRenderedState=w}if(i=g.interleaved,i!==null){S=i;do D=S.lane,wr.lanes|=D,Fi|=D,S=S.next;while(S!==i)}else S===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function Ux(i){var d=Ea(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var w=g.dispatch,S=g.pending,D=d.memoizedState;if(S!==null){g.pending=null;var $=S=S.next;do D=i(D,$.action),$=$.next;while($!==S);Wa(D,d.memoizedState)||(Wn=!0),d.memoizedState=D,d.baseQueue===null&&(d.baseState=D),g.lastRenderedState=D}return[D,w]}function X1(){}function J1(i,d){var g=wr,w=Ea(),S=d(),D=!Wa(w.memoizedState,S);if(D&&(w.memoizedState=S,Wn=!0),w=w.queue,Bx(eS.bind(null,g,w,i),[i]),w.getSnapshot!==d||D||Qr!==null&&Qr.memoizedState.tag&1){if(g.flags|=2048,Dd(9,Z1.bind(null,g,w,S,d),void 0,null),Zr===null)throw Error(n(349));($i&30)!==0||Q1(g,d,S)}return S}function Q1(i,d,g){i.flags|=16384,i={getSnapshot:d,value:g},d=wr.updateQueue,d===null?(d={lastEffect:null,stores:null},wr.updateQueue=d,d.stores=[i]):(g=d.stores,g===null?d.stores=[i]:g.push(i))}function Z1(i,d,g,w){d.value=g,d.getSnapshot=w,tS(d)&&rS(i)}function eS(i,d,g){return g(function(){tS(d)&&rS(i)})}function tS(i){var d=i.getSnapshot;i=i.value;try{var g=d();return!Wa(i,g)}catch{return!0}}function rS(i){var d=Bs(i,1);d!==null&&Qa(d,i,1,-1)}function nS(i){var d=js();return typeof i=="function"&&(i=i()),d.memoizedState=d.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:i},d.queue=i,i=i.dispatch=c$.bind(null,wr,i),[d.memoizedState,i]}function Dd(i,d,g,w){return i={tag:i,create:d,destroy:g,deps:w,next:null},d=wr.updateQueue,d===null?(d={lastEffect:null,stores:null},wr.updateQueue=d,d.lastEffect=i.next=i):(g=d.lastEffect,g===null?d.lastEffect=i.next=i:(w=g.next,g.next=i,i.next=w,d.lastEffect=i)),i}function aS(){return Ea().memoizedState}function ah(i,d,g,w){var S=js();wr.flags|=i,S.memoizedState=Dd(1|d,g,void 0,w===void 0?null:w)}function sh(i,d,g,w){var S=Ea();w=w===void 0?null:w;var D=void 0;if(Br!==null){var $=Br.memoizedState;if(D=$.destroy,w!==null&&$x(w,$.deps)){S.memoizedState=Dd(d,g,D,w);return}}wr.flags|=i,S.memoizedState=Dd(1|d,g,D,w)}function sS(i,d){return ah(8390656,8,i,d)}function Bx(i,d){return sh(2048,8,i,d)}function oS(i,d){return sh(4,2,i,d)}function iS(i,d){return sh(4,4,i,d)}function lS(i,d){if(typeof d=="function")return i=i(),d(i),function(){d(null)};if(d!=null)return i=i(),d.current=i,function(){d.current=null}}function cS(i,d,g){return g=g!=null?g.concat([i]):null,sh(4,4,lS.bind(null,d,i),g)}function Vx(){}function dS(i,d){var g=Ea();d=d===void 0?null:d;var w=g.memoizedState;return w!==null&&d!==null&&$x(d,w[1])?w[0]:(g.memoizedState=[i,d],i)}function uS(i,d){var g=Ea();d=d===void 0?null:d;var w=g.memoizedState;return w!==null&&d!==null&&$x(d,w[1])?w[0]:(i=i(),g.memoizedState=[i,d],i)}function fS(i,d,g){return($i&21)===0?(i.baseState&&(i.baseState=!1,Wn=!0),i.memoizedState=g):(Wa(g,d)||(g=od(),wr.lanes|=g,Fi|=g,i.baseState=!0),d)}function i$(i,d){var g=Rt;Rt=g!==0&&4>g?g:4,i(!0);var w=_x.transition;_x.transition={};try{i(!1),d()}finally{Rt=g,_x.transition=w}}function hS(){return Ea().memoizedState}function l$(i,d,g){var w=zo(i);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},mS(i))pS(d,g);else if(g=G1(i,d,g,w),g!==null){var S=Tn();Qa(g,i,w,S),gS(g,d,w)}}function c$(i,d,g){var w=zo(i),S={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(mS(i))pS(d,S);else{var D=i.alternate;if(i.lanes===0&&(D===null||D.lanes===0)&&(D=d.lastRenderedReducer,D!==null))try{var $=d.lastRenderedState,te=D($,g);if(S.hasEagerState=!0,S.eagerState=te,Wa(te,$)){var de=d.interleaved;de===null?(S.next=S,Ix(d)):(S.next=de.next,de.next=S),d.interleaved=S;return}}catch{}finally{}g=G1(i,d,S,w),g!==null&&(S=Tn(),Qa(g,i,w,S),gS(g,d,w))}}function mS(i){var d=i.alternate;return i===wr||d!==null&&d===wr}function pS(i,d){Ed=nh=!0;var g=i.pending;g===null?d.next=d:(d.next=g.next,g.next=d),i.pending=d}function gS(i,d,g){if((g&4194240)!==0){var w=d.lanes;w&=i.pendingLanes,g|=w,d.lanes=g,Si(i,g)}}var oh={readContext:Pa,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},d$={readContext:Pa,useCallback:function(i,d){return js().memoizedState=[i,d===void 0?null:d],i},useContext:Pa,useEffect:sS,useImperativeHandle:function(i,d,g){return g=g!=null?g.concat([i]):null,ah(4194308,4,lS.bind(null,d,i),g)},useLayoutEffect:function(i,d){return ah(4194308,4,i,d)},useInsertionEffect:function(i,d){return ah(4,2,i,d)},useMemo:function(i,d){var g=js();return d=d===void 0?null:d,i=i(),g.memoizedState=[i,d],i},useReducer:function(i,d,g){var w=js();return d=g!==void 0?g(d):d,w.memoizedState=w.baseState=d,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},w.queue=i,i=i.dispatch=l$.bind(null,wr,i),[w.memoizedState,i]},useRef:function(i){var d=js();return i={current:i},d.memoizedState=i},useState:nS,useDebugValue:Vx,useDeferredValue:function(i){return js().memoizedState=i},useTransition:function(){var i=nS(!1),d=i[0];return i=i$.bind(null,i[1]),js().memoizedState=i,[d,i]},useMutableSource:function(){},useSyncExternalStore:function(i,d,g){var w=wr,S=js();if(hr){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),Zr===null)throw Error(n(349));($i&30)!==0||Q1(w,d,g)}S.memoizedState=g;var D={value:g,getSnapshot:d};return S.queue=D,sS(eS.bind(null,w,D,i),[i]),w.flags|=2048,Dd(9,Z1.bind(null,w,D,g,d),void 0,null),g},useId:function(){var i=js(),d=Zr.identifierPrefix;if(hr){var g=Us,w=zs;g=(w&~(1<<32-Vn(w)-1)).toString(32)+g,d=":"+d+"R"+g,g=Ad++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=o$++,d=":"+d+"r"+g.toString(32)+":";return i.memoizedState=d},unstable_isNewReconciler:!1},u$={readContext:Pa,useCallback:dS,useContext:Pa,useEffect:Bx,useImperativeHandle:cS,useInsertionEffect:oS,useLayoutEffect:iS,useMemo:uS,useReducer:zx,useRef:aS,useState:function(){return zx(Id)},useDebugValue:Vx,useDeferredValue:function(i){var d=Ea();return fS(d,Br.memoizedState,i)},useTransition:function(){var i=zx(Id)[0],d=Ea().memoizedState;return[i,d]},useMutableSource:X1,useSyncExternalStore:J1,useId:hS,unstable_isNewReconciler:!1},f$={readContext:Pa,useCallback:dS,useContext:Pa,useEffect:Bx,useImperativeHandle:cS,useInsertionEffect:oS,useLayoutEffect:iS,useMemo:uS,useReducer:Ux,useRef:aS,useState:function(){return Ux(Id)},useDebugValue:Vx,useDeferredValue:function(i){var d=Ea();return Br===null?d.memoizedState=i:fS(d,Br.memoizedState,i)},useTransition:function(){var i=Ux(Id)[0],d=Ea().memoizedState;return[i,d]},useMutableSource:X1,useSyncExternalStore:J1,useId:hS,unstable_isNewReconciler:!1};function Ya(i,d){if(i&&i.defaultProps){d=B({},d),i=i.defaultProps;for(var g in i)d[g]===void 0&&(d[g]=i[g]);return d}return d}function qx(i,d,g,w){d=i.memoizedState,g=g(w,d),g=g==null?d:B({},d,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var ih={isMounted:function(i){return(i=i._reactInternals)?Bn(i)===i:!1},enqueueSetState:function(i,d,g){i=i._reactInternals;var w=Tn(),S=zo(i),D=Vs(w,S);D.payload=d,g!=null&&(D.callback=g),d=_o(i,D,S),d!==null&&(Qa(d,i,S,w),Zf(d,i,S))},enqueueReplaceState:function(i,d,g){i=i._reactInternals;var w=Tn(),S=zo(i),D=Vs(w,S);D.tag=1,D.payload=d,g!=null&&(D.callback=g),d=_o(i,D,S),d!==null&&(Qa(d,i,S,w),Zf(d,i,S))},enqueueForceUpdate:function(i,d){i=i._reactInternals;var g=Tn(),w=zo(i),S=Vs(g,w);S.tag=2,d!=null&&(S.callback=d),d=_o(i,S,w),d!==null&&(Qa(d,i,w,g),Zf(d,i,w))}};function xS(i,d,g,w,S,D,$){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(w,D,$):d.prototype&&d.prototype.isPureReactComponent?!xd(g,w)||!xd(S,D):!0}function vS(i,d,g){var w=!1,S=Mo,D=d.contextType;return typeof D=="object"&&D!==null?D=Pa(D):(S=Hn(d)?Oi:wn.current,w=d.contextTypes,D=(w=w!=null)?Bl(i,S):Mo),d=new d(g,D),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ih,i.stateNode=d,d._reactInternals=i,w&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=D),d}function yS(i,d,g,w){i=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,w),d.state!==i&&ih.enqueueReplaceState(d,d.state,null)}function Gx(i,d,g,w){var S=i.stateNode;S.props=g,S.state=i.memoizedState,S.refs={},Dx(i);var D=d.contextType;typeof D=="object"&&D!==null?S.context=Pa(D):(D=Hn(d)?Oi:wn.current,S.context=Bl(i,D)),S.state=i.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(qx(i,d,D,g),S.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&ih.enqueueReplaceState(S,S.state,null),eh(i,g,S,w),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function Xl(i,d){try{var g="",w=d;do g+=me(w),w=w.return;while(w);var S=g}catch(D){S=`
Error generating stack: `+D.message+`
`+D.stack}return{value:i,source:d,stack:S,digest:null}}function Hx(i,d,g){return{value:i,source:null,stack:g??null,digest:d??null}}function Wx(i,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var h$=typeof WeakMap=="function"?WeakMap:Map;function bS(i,d,g){g=Vs(-1,g),g.tag=3,g.payload={element:null};var w=d.value;return g.callback=function(){mh||(mh=!0,l0=w),Wx(i,d)},g}function jS(i,d,g){g=Vs(-1,g),g.tag=3;var w=i.type.getDerivedStateFromError;if(typeof w=="function"){var S=d.value;g.payload=function(){return w(S)},g.callback=function(){Wx(i,d)}}var D=i.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(g.callback=function(){Wx(i,d),typeof w!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),g}function wS(i,d,g){var w=i.pingCache;if(w===null){w=i.pingCache=new h$;var S=new Set;w.set(d,S)}else S=w.get(d),S===void 0&&(S=new Set,w.set(d,S));S.has(g)||(S.add(g),i=P$.bind(null,i,d,g),d.then(i,i))}function NS(i){do{var d;if((d=i.tag===13)&&(d=i.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return i;i=i.return}while(i!==null);return null}function SS(i,d,g,w,S){return(i.mode&1)===0?(i===d?i.flags|=65536:(i.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=Vs(-1,1),d.tag=2,_o(g,d,1))),g.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var m$=k.ReactCurrentOwner,Wn=!1;function Mn(i,d,g,w){d.child=i===null?q1(d,null,g,w):Hl(d,i.child,g,w)}function CS(i,d,g,w,S){g=g.render;var D=d.ref;return Kl(d,S),w=Fx(i,d,g,w,D,S),g=Lx(),i!==null&&!Wn?(d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~S,qs(i,d,S)):(hr&&g&&jx(d),d.flags|=1,Mn(i,d,w,S),d.child)}function kS(i,d,g,w,S){if(i===null){var D=g.type;return typeof D=="function"&&!p0(D)&&D.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=D,PS(i,d,D,w,S)):(i=bh(g.type,null,w,d,d.mode,S),i.ref=d.ref,i.return=d,d.child=i)}if(D=i.child,(i.lanes&S)===0){var $=D.memoizedProps;if(g=g.compare,g=g!==null?g:xd,g($,w)&&i.ref===d.ref)return qs(i,d,S)}return d.flags|=1,i=Bo(D,w),i.ref=d.ref,i.return=d,d.child=i}function PS(i,d,g,w,S){if(i!==null){var D=i.memoizedProps;if(xd(D,w)&&i.ref===d.ref)if(Wn=!1,d.pendingProps=w=D,(i.lanes&S)!==0)(i.flags&131072)!==0&&(Wn=!0);else return d.lanes=i.lanes,qs(i,d,S)}return Kx(i,d,g,w,S)}function ES(i,d,g){var w=d.pendingProps,S=w.children,D=i!==null?i.memoizedState:null;if(w.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Ql,ia),ia|=g;else{if((g&1073741824)===0)return i=D!==null?D.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:i,cachePool:null,transitions:null},d.updateQueue=null,or(Ql,ia),ia|=i,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=D!==null?D.baseLanes:g,or(Ql,ia),ia|=w}else D!==null?(w=D.baseLanes|g,d.memoizedState=null):w=g,or(Ql,ia),ia|=w;return Mn(i,d,S,g),d.child}function AS(i,d){var g=d.ref;(i===null&&g!==null||i!==null&&i.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function Kx(i,d,g,w,S){var D=Hn(g)?Oi:wn.current;return D=Bl(d,D),Kl(d,S),g=Fx(i,d,g,w,D,S),w=Lx(),i!==null&&!Wn?(d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~S,qs(i,d,S)):(hr&&w&&jx(d),d.flags|=1,Mn(i,d,g,S),d.child)}function IS(i,d,g,w,S){if(Hn(g)){var D=!0;Gf(d)}else D=!1;if(Kl(d,S),d.stateNode===null)ch(i,d),vS(d,g,w),Gx(d,g,w,S),w=!0;else if(i===null){var $=d.stateNode,te=d.memoizedProps;$.props=te;var de=$.context,Ee=g.contextType;typeof Ee=="object"&&Ee!==null?Ee=Pa(Ee):(Ee=Hn(g)?Oi:wn.current,Ee=Bl(d,Ee));var Ue=g.getDerivedStateFromProps,Ve=typeof Ue=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ve||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==w||de!==Ee)&&yS(d,$,w,Ee),Ro=!1;var ze=d.memoizedState;$.state=ze,eh(d,w,$,S),de=d.memoizedState,te!==w||ze!==de||Gn.current||Ro?(typeof Ue=="function"&&(qx(d,g,Ue,w),de=d.memoizedState),(te=Ro||xS(d,g,te,w,ze,de,Ee))?(Ve||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=de),$.props=w,$.state=de,$.context=Ee,w=te):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{$=d.stateNode,H1(i,d),te=d.memoizedProps,Ee=d.type===d.elementType?te:Ya(d.type,te),$.props=Ee,Ve=d.pendingProps,ze=$.context,de=g.contextType,typeof de=="object"&&de!==null?de=Pa(de):(de=Hn(g)?Oi:wn.current,de=Bl(d,de));var et=g.getDerivedStateFromProps;(Ue=typeof et=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(te!==Ve||ze!==de)&&yS(d,$,w,de),Ro=!1,ze=d.memoizedState,$.state=ze,eh(d,w,$,S);var at=d.memoizedState;te!==Ve||ze!==at||Gn.current||Ro?(typeof et=="function"&&(qx(d,g,et,w),at=d.memoizedState),(Ee=Ro||xS(d,g,Ee,w,ze,at,de)||!1)?(Ue||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(w,at,de),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(w,at,de)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||te===i.memoizedProps&&ze===i.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===i.memoizedProps&&ze===i.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=at),$.props=w,$.state=at,$.context=de,w=Ee):(typeof $.componentDidUpdate!="function"||te===i.memoizedProps&&ze===i.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||te===i.memoizedProps&&ze===i.memoizedState||(d.flags|=1024),w=!1)}return Yx(i,d,g,w,D,S)}function Yx(i,d,g,w,S,D){AS(i,d);var $=(d.flags&128)!==0;if(!w&&!$)return S&&R1(d,g,!1),qs(i,d,D);w=d.stateNode,m$.current=d;var te=$&&typeof g.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,i!==null&&$?(d.child=Hl(d,i.child,null,D),d.child=Hl(d,null,te,D)):Mn(i,d,te,D),d.memoizedState=w.state,S&&R1(d,g,!0),d.child}function DS(i){var d=i.stateNode;d.pendingContext?M1(i,d.pendingContext,d.pendingContext!==d.context):d.context&&M1(i,d.context,!1),Ox(i,d.containerInfo)}function OS(i,d,g,w,S){return Gl(),Cx(S),d.flags|=256,Mn(i,d,g,w),d.child}var Xx={dehydrated:null,treeContext:null,retryLane:0};function Jx(i){return{baseLanes:i,cachePool:null,transitions:null}}function MS(i,d,g){var w=d.pendingProps,S=jr.current,D=!1,$=(d.flags&128)!==0,te;if((te=$)||(te=i!==null&&i.memoizedState===null?!1:(S&2)!==0),te?(D=!0,d.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),or(jr,S&1),i===null)return Sx(d),i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((d.mode&1)===0?d.lanes=1:i.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=w.children,i=w.fallback,D?(w=d.mode,D=d.child,$={mode:"hidden",children:$},(w&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=$):D=jh($,w,0,null),i=Bi(i,w,g,null),D.return=d,i.return=d,D.sibling=i,d.child=D,d.child.memoizedState=Jx(g),d.memoizedState=Xx,i):Qx(d,$));if(S=i.memoizedState,S!==null&&(te=S.dehydrated,te!==null))return p$(i,d,$,w,te,S,g);if(D){D=w.fallback,$=d.mode,S=i.child,te=S.sibling;var de={mode:"hidden",children:w.children};return($&1)===0&&d.child!==S?(w=d.child,w.childLanes=0,w.pendingProps=de,d.deletions=null):(w=Bo(S,de),w.subtreeFlags=S.subtreeFlags&14680064),te!==null?D=Bo(te,D):(D=Bi(D,$,g,null),D.flags|=2),D.return=d,w.return=d,w.sibling=D,d.child=w,w=D,D=d.child,$=i.child.memoizedState,$=$===null?Jx(g):{baseLanes:$.baseLanes|g,cachePool:null,transitions:$.transitions},D.memoizedState=$,D.childLanes=i.childLanes&~g,d.memoizedState=Xx,w}return D=i.child,i=D.sibling,w=Bo(D,{mode:"visible",children:w.children}),(d.mode&1)===0&&(w.lanes=g),w.return=d,w.sibling=null,i!==null&&(g=d.deletions,g===null?(d.deletions=[i],d.flags|=16):g.push(i)),d.child=w,d.memoizedState=null,w}function Qx(i,d){return d=jh({mode:"visible",children:d},i.mode,0,null),d.return=i,i.child=d}function lh(i,d,g,w){return w!==null&&Cx(w),Hl(d,i.child,null,g),i=Qx(d,d.pendingProps.children),i.flags|=2,d.memoizedState=null,i}function p$(i,d,g,w,S,D,$){if(g)return d.flags&256?(d.flags&=-257,w=Hx(Error(n(422))),lh(i,d,$,w)):d.memoizedState!==null?(d.child=i.child,d.flags|=128,null):(D=w.fallback,S=d.mode,w=jh({mode:"visible",children:w.children},S,0,null),D=Bi(D,S,$,null),D.flags|=2,w.return=d,D.return=d,w.sibling=D,d.child=w,(d.mode&1)!==0&&Hl(d,i.child,null,$),d.child.memoizedState=Jx($),d.memoizedState=Xx,D);if((d.mode&1)===0)return lh(i,d,$,null);if(S.data==="$!"){if(w=S.nextSibling&&S.nextSibling.dataset,w)var te=w.dgst;return w=te,D=Error(n(419)),w=Hx(D,w,void 0),lh(i,d,$,w)}if(te=($&i.childLanes)!==0,Wn||te){if(w=Zr,w!==null){switch($&-$){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(w.suspendedLanes|$))!==0?0:S,S!==0&&S!==D.retryLane&&(D.retryLane=S,Bs(i,S),Qa(w,i,S,-1))}return m0(),w=Hx(Error(n(421))),lh(i,d,$,w)}return S.data==="$?"?(d.flags|=128,d.child=i.child,d=E$.bind(null,i),S._reactRetry=d,null):(i=D.treeContext,oa=Do(S.nextSibling),sa=d,hr=!0,Ka=null,i!==null&&(Ca[ka++]=zs,Ca[ka++]=Us,Ca[ka++]=Mi,zs=i.id,Us=i.overflow,Mi=d),d=Qx(d,w.children),d.flags|=4096,d)}function TS(i,d,g){i.lanes|=d;var w=i.alternate;w!==null&&(w.lanes|=d),Ax(i.return,d,g)}function Zx(i,d,g,w,S){var D=i.memoizedState;D===null?i.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:S}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=w,D.tail=g,D.tailMode=S)}function RS(i,d,g){var w=d.pendingProps,S=w.revealOrder,D=w.tail;if(Mn(i,d,w.children,g),w=jr.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=d.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&TS(i,g,d);else if(i.tag===19)TS(i,g,d);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===d)break e;for(;i.sibling===null;){if(i.return===null||i.return===d)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}w&=1}if(or(jr,w),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(g=d.child,S=null;g!==null;)i=g.alternate,i!==null&&th(i)===null&&(S=g),g=g.sibling;g=S,g===null?(S=d.child,d.child=null):(S=g.sibling,g.sibling=null),Zx(d,!1,S,g,D);break;case"backwards":for(g=null,S=d.child,d.child=null;S!==null;){if(i=S.alternate,i!==null&&th(i)===null){d.child=S;break}i=S.sibling,S.sibling=g,g=S,S=i}Zx(d,!0,g,null,D);break;case"together":Zx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ch(i,d){(d.mode&1)===0&&i!==null&&(i.alternate=null,d.alternate=null,d.flags|=2)}function qs(i,d,g){if(i!==null&&(d.dependencies=i.dependencies),Fi|=d.lanes,(g&d.childLanes)===0)return null;if(i!==null&&d.child!==i.child)throw Error(n(153));if(d.child!==null){for(i=d.child,g=Bo(i,i.pendingProps),d.child=g,g.return=d;i.sibling!==null;)i=i.sibling,g=g.sibling=Bo(i,i.pendingProps),g.return=d;g.sibling=null}return d.child}function g$(i,d,g){switch(d.tag){case 3:DS(d),Gl();break;case 5:Y1(d);break;case 1:Hn(d.type)&&Gf(d);break;case 4:Ox(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,S=d.memoizedProps.value;or(Jf,w._currentValue),w._currentValue=S;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(or(jr,jr.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?MS(i,d,g):(or(jr,jr.current&1),i=qs(i,d,g),i!==null?i.sibling:null);or(jr,jr.current&1);break;case 19:if(w=(g&d.childLanes)!==0,(i.flags&128)!==0){if(w)return RS(i,d,g);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),or(jr,jr.current),w)break;return null;case 22:case 23:return d.lanes=0,ES(i,d,g)}return qs(i,d,g)}var _S,e0,$S,FS;_S=function(i,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},e0=function(){},$S=function(i,d,g,w){var S=i.memoizedProps;if(S!==w){i=d.stateNode,_i(bs.current);var D=null;switch(g){case"input":S=Te(i,S),w=Te(i,w),D=[];break;case"select":S=B({},S,{value:void 0}),w=B({},w,{value:void 0}),D=[];break;case"textarea":S=X(i,S),w=X(i,w),D=[];break;default:typeof S.onClick!="function"&&typeof w.onClick=="function"&&(i.onclick=Bf)}Ze(g,w);var $;g=null;for(Ee in S)if(!w.hasOwnProperty(Ee)&&S.hasOwnProperty(Ee)&&S[Ee]!=null)if(Ee==="style"){var te=S[Ee];for($ in te)te.hasOwnProperty($)&&(g||(g={}),g[$]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(s.hasOwnProperty(Ee)?D||(D=[]):(D=D||[]).push(Ee,null));for(Ee in w){var de=w[Ee];if(te=S?.[Ee],w.hasOwnProperty(Ee)&&de!==te&&(de!=null||te!=null))if(Ee==="style")if(te){for($ in te)!te.hasOwnProperty($)||de&&de.hasOwnProperty($)||(g||(g={}),g[$]="");for($ in de)de.hasOwnProperty($)&&te[$]!==de[$]&&(g||(g={}),g[$]=de[$])}else g||(D||(D=[]),D.push(Ee,g)),g=de;else Ee==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,te=te?te.__html:void 0,de!=null&&te!==de&&(D=D||[]).push(Ee,de)):Ee==="children"?typeof de!="string"&&typeof de!="number"||(D=D||[]).push(Ee,""+de):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ee)?(de!=null&&Ee==="onScroll"&&cr("scroll",i),D||te===de||(D=[])):(D=D||[]).push(Ee,de))}g&&(D=D||[]).push("style",g);var Ee=D;(d.updateQueue=Ee)&&(d.flags|=4)}},FS=function(i,d,g,w){g!==w&&(d.flags|=4)};function Od(i,d){if(!hr)switch(i.tailMode){case"hidden":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?d||i.tail===null?i.tail=null:i.tail.sibling=null:w.sibling=null}}function Sn(i){var d=i.alternate!==null&&i.alternate.child===i.child,g=0,w=0;if(d)for(var S=i.child;S!==null;)g|=S.lanes|S.childLanes,w|=S.subtreeFlags&14680064,w|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)g|=S.lanes|S.childLanes,w|=S.subtreeFlags,w|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=w,i.childLanes=g,d}function x$(i,d,g){var w=d.pendingProps;switch(wx(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(d),null;case 1:return Hn(d.type)&&qf(),Sn(d),null;case 3:return w=d.stateNode,Yl(),dr(Gn),dr(wn),Rx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(i===null||i.child===null)&&(Yf(d)?d.flags|=4:i===null||i.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ka!==null&&(u0(Ka),Ka=null))),e0(i,d),Sn(d),null;case 5:Mx(d);var S=_i(Pd.current);if(g=d.type,i!==null&&d.stateNode!=null)$S(i,d,g,w,S),i.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(n(166));return Sn(d),null}if(i=_i(bs.current),Yf(d)){w=d.stateNode,g=d.type;var D=d.memoizedProps;switch(w[ys]=d,w[wd]=D,i=(d.mode&1)!==0,g){case"dialog":cr("cancel",w),cr("close",w);break;case"iframe":case"object":case"embed":cr("load",w);break;case"video":case"audio":for(S=0;S<yd.length;S++)cr(yd[S],w);break;case"source":cr("error",w);break;case"img":case"image":case"link":cr("error",w),cr("load",w);break;case"details":cr("toggle",w);break;case"input":Re(w,D),cr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!D.multiple},cr("invalid",w);break;case"textarea":ne(w,D),cr("invalid",w)}Ze(g,D),S=null;for(var $ in D)if(D.hasOwnProperty($)){var te=D[$];$==="children"?typeof te=="string"?w.textContent!==te&&(D.suppressHydrationWarning!==!0&&Uf(w.textContent,te,i),S=["children",te]):typeof te=="number"&&w.textContent!==""+te&&(D.suppressHydrationWarning!==!0&&Uf(w.textContent,te,i),S=["children",""+te]):s.hasOwnProperty($)&&te!=null&&$==="onScroll"&&cr("scroll",w)}switch(g){case"input":ke(w),Xe(w,D,!0);break;case"textarea":ke(w),ge(w);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(w.onclick=Bf)}w=S,d.updateQueue=w,w!==null&&(d.flags|=4)}else{$=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=be(g)),i==="http://www.w3.org/1999/xhtml"?g==="script"?(i=$.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof w.is=="string"?i=$.createElement(g,{is:w.is}):(i=$.createElement(g),g==="select"&&($=i,w.multiple?$.multiple=!0:w.size&&($.size=w.size))):i=$.createElementNS(i,g),i[ys]=d,i[wd]=w,_S(i,d,!1,!1),d.stateNode=i;e:{switch($=Ot(g,w),g){case"dialog":cr("cancel",i),cr("close",i),S=w;break;case"iframe":case"object":case"embed":cr("load",i),S=w;break;case"video":case"audio":for(S=0;S<yd.length;S++)cr(yd[S],i);S=w;break;case"source":cr("error",i),S=w;break;case"img":case"image":case"link":cr("error",i),cr("load",i),S=w;break;case"details":cr("toggle",i),S=w;break;case"input":Re(i,w),S=Te(i,w),cr("invalid",i);break;case"option":S=w;break;case"select":i._wrapperState={wasMultiple:!!w.multiple},S=B({},w,{value:void 0}),cr("invalid",i);break;case"textarea":ne(i,w),S=X(i,w),cr("invalid",i);break;default:S=w}Ze(g,S),te=S;for(D in te)if(te.hasOwnProperty(D)){var de=te[D];D==="style"?Le(i,de):D==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,de!=null&&qe(i,de)):D==="children"?typeof de=="string"?(g!=="textarea"||de!=="")&&Z(i,de):typeof de=="number"&&Z(i,""+de):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?de!=null&&D==="onScroll"&&cr("scroll",i):de!=null&&A(i,D,de,$))}switch(g){case"input":ke(i),Xe(i,w,!1);break;case"textarea":ke(i),ge(i);break;case"option":w.value!=null&&i.setAttribute("value",""+We(w.value));break;case"select":i.multiple=!!w.multiple,D=w.value,D!=null?_(i,!!w.multiple,D,!1):w.defaultValue!=null&&_(i,!!w.multiple,w.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=Bf)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Sn(d),null;case 6:if(i&&d.stateNode!=null)FS(i,d,i.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(n(166));if(g=_i(Pd.current),_i(bs.current),Yf(d)){if(w=d.stateNode,g=d.memoizedProps,w[ys]=d,(D=w.nodeValue!==g)&&(i=sa,i!==null))switch(i.tag){case 3:Uf(w.nodeValue,g,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Uf(w.nodeValue,g,(i.mode&1)!==0)}D&&(d.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[ys]=d,d.stateNode=w}return Sn(d),null;case 13:if(dr(jr),w=d.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(hr&&oa!==null&&(d.mode&1)!==0&&(d.flags&128)===0)U1(),Gl(),d.flags|=98560,D=!1;else if(D=Yf(d),w!==null&&w.dehydrated!==null){if(i===null){if(!D)throw Error(n(318));if(D=d.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[ys]=d}else Gl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Sn(d),D=!1}else Ka!==null&&(u0(Ka),Ka=null),D=!0;if(!D)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(w=w!==null,w!==(i!==null&&i.memoizedState!==null)&&w&&(d.child.flags|=8192,(d.mode&1)!==0&&(i===null||(jr.current&1)!==0?Vr===0&&(Vr=3):m0())),d.updateQueue!==null&&(d.flags|=4),Sn(d),null);case 4:return Yl(),e0(i,d),i===null&&bd(d.stateNode.containerInfo),Sn(d),null;case 10:return Ex(d.type._context),Sn(d),null;case 17:return Hn(d.type)&&qf(),Sn(d),null;case 19:if(dr(jr),D=d.memoizedState,D===null)return Sn(d),null;if(w=(d.flags&128)!==0,$=D.rendering,$===null)if(w)Od(D,!1);else{if(Vr!==0||i!==null&&(i.flags&128)!==0)for(i=d.child;i!==null;){if($=th(i),$!==null){for(d.flags|=128,Od(D,!1),w=$.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=g,g=d.child;g!==null;)D=g,i=w,D.flags&=14680066,$=D.alternate,$===null?(D.childLanes=0,D.lanes=i,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=$.childLanes,D.lanes=$.lanes,D.child=$.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=$.memoizedProps,D.memoizedState=$.memoizedState,D.updateQueue=$.updateQueue,D.type=$.type,i=$.dependencies,D.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),g=g.sibling;return or(jr,jr.current&1|2),d.child}i=i.sibling}D.tail!==null&&lr()>Zl&&(d.flags|=128,w=!0,Od(D,!1),d.lanes=4194304)}else{if(!w)if(i=th($),i!==null){if(d.flags|=128,w=!0,g=i.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Od(D,!0),D.tail===null&&D.tailMode==="hidden"&&!$.alternate&&!hr)return Sn(d),null}else 2*lr()-D.renderingStartTime>Zl&&g!==1073741824&&(d.flags|=128,w=!0,Od(D,!1),d.lanes=4194304);D.isBackwards?($.sibling=d.child,d.child=$):(g=D.last,g!==null?g.sibling=$:d.child=$,D.last=$)}return D.tail!==null?(d=D.tail,D.rendering=d,D.tail=d.sibling,D.renderingStartTime=lr(),d.sibling=null,g=jr.current,or(jr,w?g&1|2:g&1),d):(Sn(d),null);case 22:case 23:return h0(),w=d.memoizedState!==null,i!==null&&i.memoizedState!==null!==w&&(d.flags|=8192),w&&(d.mode&1)!==0?(ia&1073741824)!==0&&(Sn(d),d.subtreeFlags&6&&(d.flags|=8192)):Sn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function v$(i,d){switch(wx(d),d.tag){case 1:return Hn(d.type)&&qf(),i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 3:return Yl(),dr(Gn),dr(wn),Rx(),i=d.flags,(i&65536)!==0&&(i&128)===0?(d.flags=i&-65537|128,d):null;case 5:return Mx(d),null;case 13:if(dr(jr),i=d.memoizedState,i!==null&&i.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Gl()}return i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 19:return dr(jr),null;case 4:return Yl(),null;case 10:return Ex(d.type._context),null;case 22:case 23:return h0(),null;case 24:return null;default:return null}}var dh=!1,Cn=!1,y$=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Jl(i,d){var g=i.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){Pr(i,d,w)}else g.current=null}function t0(i,d,g){try{g()}catch(w){Pr(i,d,w)}}var LS=!1;function b$(i,d){if(hx=Ao,i=x1(),sx(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var S=w.anchorOffset,D=w.focusNode;w=w.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break e}var $=0,te=-1,de=-1,Ee=0,Ue=0,Ve=i,ze=null;t:for(;;){for(var et;Ve!==g||S!==0&&Ve.nodeType!==3||(te=$+S),Ve!==D||w!==0&&Ve.nodeType!==3||(de=$+w),Ve.nodeType===3&&($+=Ve.nodeValue.length),(et=Ve.firstChild)!==null;)ze=Ve,Ve=et;for(;;){if(Ve===i)break t;if(ze===g&&++Ee===S&&(te=$),ze===D&&++Ue===w&&(de=$),(et=Ve.nextSibling)!==null)break;Ve=ze,ze=Ve.parentNode}Ve=et}g=te===-1||de===-1?null:{start:te,end:de}}else g=null}g=g||{start:0,end:0}}else g=null;for(mx={focusedElem:i,selectionRange:g},Ao=!1,rt=d;rt!==null;)if(d=rt,i=d.child,(d.subtreeFlags&1028)!==0&&i!==null)i.return=d,rt=i;else for(;rt!==null;){d=rt;try{var at=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ct=at.memoizedProps,Ir=at.memoizedState,je=d.stateNode,he=je.getSnapshotBeforeUpdate(d.elementType===d.type?ct:Ya(d.type,ct),Ir);je.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var Ne=d.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ge){Pr(d,d.return,Ge)}if(i=d.sibling,i!==null){i.return=d.return,rt=i;break}rt=d.return}return at=LS,LS=!1,at}function Md(i,d,g){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var S=w=w.next;do{if((S.tag&i)===i){var D=S.destroy;S.destroy=void 0,D!==void 0&&t0(d,g,D)}S=S.next}while(S!==w)}}function uh(i,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&i)===i){var w=g.create;g.destroy=w()}g=g.next}while(g!==d)}}function r0(i){var d=i.ref;if(d!==null){var g=i.stateNode;switch(i.tag){case 5:i=g;break;default:i=g}typeof d=="function"?d(i):d.current=i}}function zS(i){var d=i.alternate;d!==null&&(i.alternate=null,zS(d)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(d=i.stateNode,d!==null&&(delete d[ys],delete d[wd],delete d[vx],delete d[r$],delete d[n$])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function US(i){return i.tag===5||i.tag===3||i.tag===4}function BS(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||US(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function n0(i,d,g){var w=i.tag;if(w===5||w===6)i=i.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(i,d):g.insertBefore(i,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(i,g)):(d=g,d.appendChild(i)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Bf));else if(w!==4&&(i=i.child,i!==null))for(n0(i,d,g),i=i.sibling;i!==null;)n0(i,d,g),i=i.sibling}function a0(i,d,g){var w=i.tag;if(w===5||w===6)i=i.stateNode,d?g.insertBefore(i,d):g.appendChild(i);else if(w!==4&&(i=i.child,i!==null))for(a0(i,d,g),i=i.sibling;i!==null;)a0(i,d,g),i=i.sibling}var hn=null,Xa=!1;function $o(i,d,g){for(g=g.child;g!==null;)VS(i,d,g),g=g.sibling}function VS(i,d,g){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(ko,g)}catch{}switch(g.tag){case 5:Cn||Jl(g,d);case 6:var w=hn,S=Xa;hn=null,$o(i,d,g),hn=w,Xa=S,hn!==null&&(Xa?(i=hn,g=g.stateNode,i.nodeType===8?i.parentNode.removeChild(g):i.removeChild(g)):hn.removeChild(g.stateNode));break;case 18:hn!==null&&(Xa?(i=hn,g=g.stateNode,i.nodeType===8?xx(i.parentNode,g):i.nodeType===1&&xx(i,g),On(i)):xx(hn,g.stateNode));break;case 4:w=hn,S=Xa,hn=g.stateNode.containerInfo,Xa=!0,$o(i,d,g),hn=w,Xa=S;break;case 0:case 11:case 14:case 15:if(!Cn&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){S=w=w.next;do{var D=S,$=D.destroy;D=D.tag,$!==void 0&&((D&2)!==0||(D&4)!==0)&&t0(g,d,$),S=S.next}while(S!==w)}$o(i,d,g);break;case 1:if(!Cn&&(Jl(g,d),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(te){Pr(g,d,te)}$o(i,d,g);break;case 21:$o(i,d,g);break;case 22:g.mode&1?(Cn=(w=Cn)||g.memoizedState!==null,$o(i,d,g),Cn=w):$o(i,d,g);break;default:$o(i,d,g)}}function qS(i){var d=i.updateQueue;if(d!==null){i.updateQueue=null;var g=i.stateNode;g===null&&(g=i.stateNode=new y$),d.forEach(function(w){var S=A$.bind(null,i,w);g.has(w)||(g.add(w),w.then(S,S))})}}function Ja(i,d){var g=d.deletions;if(g!==null)for(var w=0;w<g.length;w++){var S=g[w];try{var D=i,$=d,te=$;e:for(;te!==null;){switch(te.tag){case 5:hn=te.stateNode,Xa=!1;break e;case 3:hn=te.stateNode.containerInfo,Xa=!0;break e;case 4:hn=te.stateNode.containerInfo,Xa=!0;break e}te=te.return}if(hn===null)throw Error(n(160));VS(D,$,S),hn=null,Xa=!1;var de=S.alternate;de!==null&&(de.return=null),S.return=null}catch(Ee){Pr(S,d,Ee)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)GS(d,i),d=d.sibling}function GS(i,d){var g=i.alternate,w=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ja(d,i),ws(i),w&4){try{Md(3,i,i.return),uh(3,i)}catch(ct){Pr(i,i.return,ct)}try{Md(5,i,i.return)}catch(ct){Pr(i,i.return,ct)}}break;case 1:Ja(d,i),ws(i),w&512&&g!==null&&Jl(g,g.return);break;case 5:if(Ja(d,i),ws(i),w&512&&g!==null&&Jl(g,g.return),i.flags&32){var S=i.stateNode;try{Z(S,"")}catch(ct){Pr(i,i.return,ct)}}if(w&4&&(S=i.stateNode,S!=null)){var D=i.memoizedProps,$=g!==null?g.memoizedProps:D,te=i.type,de=i.updateQueue;if(i.updateQueue=null,de!==null)try{te==="input"&&D.type==="radio"&&D.name!=null&&Ie(S,D),Ot(te,$);var Ee=Ot(te,D);for($=0;$<de.length;$+=2){var Ue=de[$],Ve=de[$+1];Ue==="style"?Le(S,Ve):Ue==="dangerouslySetInnerHTML"?qe(S,Ve):Ue==="children"?Z(S,Ve):A(S,Ue,Ve,Ee)}switch(te){case"input":Qe(S,D);break;case"textarea":ae(S,D);break;case"select":var ze=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!D.multiple;var et=D.value;et!=null?_(S,!!D.multiple,et,!1):ze!==!!D.multiple&&(D.defaultValue!=null?_(S,!!D.multiple,D.defaultValue,!0):_(S,!!D.multiple,D.multiple?[]:"",!1))}S[wd]=D}catch(ct){Pr(i,i.return,ct)}}break;case 6:if(Ja(d,i),ws(i),w&4){if(i.stateNode===null)throw Error(n(162));S=i.stateNode,D=i.memoizedProps;try{S.nodeValue=D}catch(ct){Pr(i,i.return,ct)}}break;case 3:if(Ja(d,i),ws(i),w&4&&g!==null&&g.memoizedState.isDehydrated)try{On(d.containerInfo)}catch(ct){Pr(i,i.return,ct)}break;case 4:Ja(d,i),ws(i);break;case 13:Ja(d,i),ws(i),S=i.child,S.flags&8192&&(D=S.memoizedState!==null,S.stateNode.isHidden=D,!D||S.alternate!==null&&S.alternate.memoizedState!==null||(i0=lr())),w&4&&qS(i);break;case 22:if(Ue=g!==null&&g.memoizedState!==null,i.mode&1?(Cn=(Ee=Cn)||Ue,Ja(d,i),Cn=Ee):Ja(d,i),ws(i),w&8192){if(Ee=i.memoizedState!==null,(i.stateNode.isHidden=Ee)&&!Ue&&(i.mode&1)!==0)for(rt=i,Ue=i.child;Ue!==null;){for(Ve=rt=Ue;rt!==null;){switch(ze=rt,et=ze.child,ze.tag){case 0:case 11:case 14:case 15:Md(4,ze,ze.return);break;case 1:Jl(ze,ze.return);var at=ze.stateNode;if(typeof at.componentWillUnmount=="function"){w=ze,g=ze.return;try{d=w,at.props=d.memoizedProps,at.state=d.memoizedState,at.componentWillUnmount()}catch(ct){Pr(w,g,ct)}}break;case 5:Jl(ze,ze.return);break;case 22:if(ze.memoizedState!==null){KS(Ve);continue}}et!==null?(et.return=ze,rt=et):KS(Ve)}Ue=Ue.sibling}e:for(Ue=null,Ve=i;;){if(Ve.tag===5){if(Ue===null){Ue=Ve;try{S=Ve.stateNode,Ee?(D=S.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(te=Ve.stateNode,de=Ve.memoizedProps.style,$=de!=null&&de.hasOwnProperty("display")?de.display:null,te.style.display=Oe("display",$))}catch(ct){Pr(i,i.return,ct)}}}else if(Ve.tag===6){if(Ue===null)try{Ve.stateNode.nodeValue=Ee?"":Ve.memoizedProps}catch(ct){Pr(i,i.return,ct)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===i)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===i)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===i)break e;Ue===Ve&&(Ue=null),Ve=Ve.return}Ue===Ve&&(Ue=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:Ja(d,i),ws(i),w&4&&qS(i);break;case 21:break;default:Ja(d,i),ws(i)}}function ws(i){var d=i.flags;if(d&2){try{e:{for(var g=i.return;g!==null;){if(US(g)){var w=g;break e}g=g.return}throw Error(n(160))}switch(w.tag){case 5:var S=w.stateNode;w.flags&32&&(Z(S,""),w.flags&=-33);var D=BS(i);a0(i,D,S);break;case 3:case 4:var $=w.stateNode.containerInfo,te=BS(i);n0(i,te,$);break;default:throw Error(n(161))}}catch(de){Pr(i,i.return,de)}i.flags&=-3}d&4096&&(i.flags&=-4097)}function j$(i,d,g){rt=i,HS(i)}function HS(i,d,g){for(var w=(i.mode&1)!==0;rt!==null;){var S=rt,D=S.child;if(S.tag===22&&w){var $=S.memoizedState!==null||dh;if(!$){var te=S.alternate,de=te!==null&&te.memoizedState!==null||Cn;te=dh;var Ee=Cn;if(dh=$,(Cn=de)&&!Ee)for(rt=S;rt!==null;)$=rt,de=$.child,$.tag===22&&$.memoizedState!==null?YS(S):de!==null?(de.return=$,rt=de):YS(S);for(;D!==null;)rt=D,HS(D),D=D.sibling;rt=S,dh=te,Cn=Ee}WS(i)}else(S.subtreeFlags&8772)!==0&&D!==null?(D.return=S,rt=D):WS(i)}}function WS(i){for(;rt!==null;){var d=rt;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Cn||uh(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!Cn)if(g===null)w.componentDidMount();else{var S=d.elementType===d.type?g.memoizedProps:Ya(d.type,g.memoizedProps);w.componentDidUpdate(S,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var D=d.updateQueue;D!==null&&K1(d,D,w);break;case 3:var $=d.updateQueue;if($!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}K1(d,$,g)}break;case 5:var te=d.stateNode;if(g===null&&d.flags&4){g=te;var de=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":de.autoFocus&&g.focus();break;case"img":de.src&&(g.src=de.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ee=d.alternate;if(Ee!==null){var Ue=Ee.memoizedState;if(Ue!==null){var Ve=Ue.dehydrated;Ve!==null&&On(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Cn||d.flags&512&&r0(d)}catch(ze){Pr(d,d.return,ze)}}if(d===i){rt=null;break}if(g=d.sibling,g!==null){g.return=d.return,rt=g;break}rt=d.return}}function KS(i){for(;rt!==null;){var d=rt;if(d===i){rt=null;break}var g=d.sibling;if(g!==null){g.return=d.return,rt=g;break}rt=d.return}}function YS(i){for(;rt!==null;){var d=rt;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{uh(4,d)}catch(de){Pr(d,g,de)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var S=d.return;try{w.componentDidMount()}catch(de){Pr(d,S,de)}}var D=d.return;try{r0(d)}catch(de){Pr(d,D,de)}break;case 5:var $=d.return;try{r0(d)}catch(de){Pr(d,$,de)}}}catch(de){Pr(d,d.return,de)}if(d===i){rt=null;break}var te=d.sibling;if(te!==null){te.return=d.return,rt=te;break}rt=d.return}}var w$=Math.ceil,fh=k.ReactCurrentDispatcher,s0=k.ReactCurrentOwner,Aa=k.ReactCurrentBatchConfig,Vt=0,Zr=null,Tr=null,mn=0,ia=0,Ql=Oo(0),Vr=0,Td=null,Fi=0,hh=0,o0=0,Rd=null,Kn=null,i0=0,Zl=1/0,Gs=null,mh=!1,l0=null,Fo=null,ph=!1,Lo=null,gh=0,_d=0,c0=null,xh=-1,vh=0;function Tn(){return(Vt&6)!==0?lr():xh!==-1?xh:xh=lr()}function zo(i){return(i.mode&1)===0?1:(Vt&2)!==0&&mn!==0?mn&-mn:s$.transition!==null?(vh===0&&(vh=od()),vh):(i=Rt,i!==0||(i=window.event,i=i===void 0?16:$s(i.type)),i)}function Qa(i,d,g,w){if(50<_d)throw _d=0,c0=null,Error(n(185));Ni(i,g,w),((Vt&2)===0||i!==Zr)&&(i===Zr&&((Vt&2)===0&&(hh|=g),Vr===4&&Uo(i,mn)),Yn(i,w),g===1&&Vt===0&&(d.mode&1)===0&&(Zl=lr()+500,Hf&&To()))}function Yn(i,d){var g=i.callbackNode;Kg(i,d);var w=Al(i,i===Zr?mn:0);if(w===0)g!==null&&Nf(g),i.callbackNode=null,i.callbackPriority=0;else if(d=w&-w,i.callbackPriority!==d){if(g!=null&&Nf(g),d===1)i.tag===0?a$(JS.bind(null,i)):_1(JS.bind(null,i)),e$(function(){(Vt&6)===0&&To()}),g=null;else{switch(ld(w)){case 1:g=ji;break;case 4:g=Sf;break;case 16:g=Co;break;case 536870912:g=Cf;break;default:g=Co}g=sC(g,XS.bind(null,i))}i.callbackPriority=d,i.callbackNode=g}}function XS(i,d){if(xh=-1,vh=0,(Vt&6)!==0)throw Error(n(327));var g=i.callbackNode;if(ec()&&i.callbackNode!==g)return null;var w=Al(i,i===Zr?mn:0);if(w===0)return null;if((w&30)!==0||(w&i.expiredLanes)!==0||d)d=yh(i,w);else{d=w;var S=Vt;Vt|=2;var D=ZS();(Zr!==i||mn!==d)&&(Gs=null,Zl=lr()+500,zi(i,d));do try{C$();break}catch(te){QS(i,te)}while(!0);Px(),fh.current=D,Vt=S,Tr!==null?d=0:(Zr=null,mn=0,d=Vr)}if(d!==0){if(d===2&&(S=Il(i),S!==0&&(w=S,d=d0(i,S))),d===1)throw g=Td,zi(i,0),Uo(i,w),Yn(i,lr()),g;if(d===6)Uo(i,w);else{if(S=i.current.alternate,(w&30)===0&&!N$(S)&&(d=yh(i,w),d===2&&(D=Il(i),D!==0&&(w=D,d=d0(i,D))),d===1))throw g=Td,zi(i,0),Uo(i,w),Yn(i,lr()),g;switch(i.finishedWork=S,i.finishedLanes=w,d){case 0:case 1:throw Error(n(345));case 2:Ui(i,Kn,Gs);break;case 3:if(Uo(i,w),(w&130023424)===w&&(d=i0+500-lr(),10<d)){if(Al(i,0)!==0)break;if(S=i.suspendedLanes,(S&w)!==w){Tn(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=gx(Ui.bind(null,i,Kn,Gs),d);break}Ui(i,Kn,Gs);break;case 4:if(Uo(i,w),(w&4194240)===w)break;for(d=i.eventTimes,S=-1;0<w;){var $=31-Vn(w);D=1<<$,$=d[$],$>S&&(S=$),w&=~D}if(w=S,w=lr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*w$(w/1960))-w,10<w){i.timeoutHandle=gx(Ui.bind(null,i,Kn,Gs),w);break}Ui(i,Kn,Gs);break;case 5:Ui(i,Kn,Gs);break;default:throw Error(n(329))}}}return Yn(i,lr()),i.callbackNode===g?XS.bind(null,i):null}function d0(i,d){var g=Rd;return i.current.memoizedState.isDehydrated&&(zi(i,d).flags|=256),i=yh(i,d),i!==2&&(d=Kn,Kn=g,d!==null&&u0(d)),i}function u0(i){Kn===null?Kn=i:Kn.push.apply(Kn,i)}function N$(i){for(var d=i;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var S=g[w],D=S.getSnapshot;S=S.value;try{if(!Wa(D(),S))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Uo(i,d){for(d&=~o0,d&=~hh,i.suspendedLanes|=d,i.pingedLanes&=~d,i=i.expirationTimes;0<d;){var g=31-Vn(d),w=1<<g;i[g]=-1,d&=~w}}function JS(i){if((Vt&6)!==0)throw Error(n(327));ec();var d=Al(i,0);if((d&1)===0)return Yn(i,lr()),null;var g=yh(i,d);if(i.tag!==0&&g===2){var w=Il(i);w!==0&&(d=w,g=d0(i,w))}if(g===1)throw g=Td,zi(i,0),Uo(i,d),Yn(i,lr()),g;if(g===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=d,Ui(i,Kn,Gs),Yn(i,lr()),null}function f0(i,d){var g=Vt;Vt|=1;try{return i(d)}finally{Vt=g,Vt===0&&(Zl=lr()+500,Hf&&To())}}function Li(i){Lo!==null&&Lo.tag===0&&(Vt&6)===0&&ec();var d=Vt;Vt|=1;var g=Aa.transition,w=Rt;try{if(Aa.transition=null,Rt=1,i)return i()}finally{Rt=w,Aa.transition=g,Vt=d,(Vt&6)===0&&To()}}function h0(){ia=Ql.current,dr(Ql)}function zi(i,d){i.finishedWork=null,i.finishedLanes=0;var g=i.timeoutHandle;if(g!==-1&&(i.timeoutHandle=-1,Z6(g)),Tr!==null)for(g=Tr.return;g!==null;){var w=g;switch(wx(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&qf();break;case 3:Yl(),dr(Gn),dr(wn),Rx();break;case 5:Mx(w);break;case 4:Yl();break;case 13:dr(jr);break;case 19:dr(jr);break;case 10:Ex(w.type._context);break;case 22:case 23:h0()}g=g.return}if(Zr=i,Tr=i=Bo(i.current,null),mn=ia=d,Vr=0,Td=null,o0=hh=Fi=0,Kn=Rd=null,Ri!==null){for(d=0;d<Ri.length;d++)if(g=Ri[d],w=g.interleaved,w!==null){g.interleaved=null;var S=w.next,D=g.pending;if(D!==null){var $=D.next;D.next=S,w.next=$}g.pending=w}Ri=null}return i}function QS(i,d){do{var g=Tr;try{if(Px(),rh.current=oh,nh){for(var w=wr.memoizedState;w!==null;){var S=w.queue;S!==null&&(S.pending=null),w=w.next}nh=!1}if($i=0,Qr=Br=wr=null,Ed=!1,Ad=0,s0.current=null,g===null||g.return===null){Vr=1,Td=d,Tr=null;break}e:{var D=i,$=g.return,te=g,de=d;if(d=mn,te.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ee=de,Ue=te,Ve=Ue.tag;if((Ue.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var ze=Ue.alternate;ze?(Ue.updateQueue=ze.updateQueue,Ue.memoizedState=ze.memoizedState,Ue.lanes=ze.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var et=NS($);if(et!==null){et.flags&=-257,SS(et,$,te,D,d),et.mode&1&&wS(D,Ee,d),d=et,de=Ee;var at=d.updateQueue;if(at===null){var ct=new Set;ct.add(de),d.updateQueue=ct}else at.add(de);break e}else{if((d&1)===0){wS(D,Ee,d),m0();break e}de=Error(n(426))}}else if(hr&&te.mode&1){var Ir=NS($);if(Ir!==null){(Ir.flags&65536)===0&&(Ir.flags|=256),SS(Ir,$,te,D,d),Cx(Xl(de,te));break e}}D=de=Xl(de,te),Vr!==4&&(Vr=2),Rd===null?Rd=[D]:Rd.push(D),D=$;do{switch(D.tag){case 3:D.flags|=65536,d&=-d,D.lanes|=d;var je=bS(D,de,d);W1(D,je);break e;case 1:te=de;var he=D.type,Ne=D.stateNode;if((D.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Fo===null||!Fo.has(Ne)))){D.flags|=65536,d&=-d,D.lanes|=d;var Ge=jS(D,te,d);W1(D,Ge);break e}}D=D.return}while(D!==null)}tC(g)}catch(ft){d=ft,Tr===g&&g!==null&&(Tr=g=g.return);continue}break}while(!0)}function ZS(){var i=fh.current;return fh.current=oh,i===null?oh:i}function m0(){(Vr===0||Vr===3||Vr===2)&&(Vr=4),Zr===null||(Fi&268435455)===0&&(hh&268435455)===0||Uo(Zr,mn)}function yh(i,d){var g=Vt;Vt|=2;var w=ZS();(Zr!==i||mn!==d)&&(Gs=null,zi(i,d));do try{S$();break}catch(S){QS(i,S)}while(!0);if(Px(),Vt=g,fh.current=w,Tr!==null)throw Error(n(261));return Zr=null,mn=0,Vr}function S$(){for(;Tr!==null;)eC(Tr)}function C$(){for(;Tr!==null&&!ad();)eC(Tr)}function eC(i){var d=aC(i.alternate,i,ia);i.memoizedProps=i.pendingProps,d===null?tC(i):Tr=d,s0.current=null}function tC(i){var d=i;do{var g=d.alternate;if(i=d.return,(d.flags&32768)===0){if(g=x$(g,d,ia),g!==null){Tr=g;return}}else{if(g=v$(g,d),g!==null){g.flags&=32767,Tr=g;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Vr=6,Tr=null;return}}if(d=d.sibling,d!==null){Tr=d;return}Tr=d=i}while(d!==null);Vr===0&&(Vr=5)}function Ui(i,d,g){var w=Rt,S=Aa.transition;try{Aa.transition=null,Rt=1,k$(i,d,g,w)}finally{Aa.transition=S,Rt=w}return null}function k$(i,d,g,w){do ec();while(Lo!==null);if((Vt&6)!==0)throw Error(n(327));g=i.finishedWork;var S=i.finishedLanes;if(g===null)return null;if(i.finishedWork=null,i.finishedLanes=0,g===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var D=g.lanes|g.childLanes;if(id(i,D),i===Zr&&(Tr=Zr=null,mn=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||ph||(ph=!0,sC(Co,function(){return ec(),null})),D=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||D){D=Aa.transition,Aa.transition=null;var $=Rt;Rt=1;var te=Vt;Vt|=4,s0.current=null,b$(i,g),GS(g,i),H6(mx),Ao=!!hx,mx=hx=null,i.current=g,j$(g),qg(),Vt=te,Rt=$,Aa.transition=D}else i.current=g;if(ph&&(ph=!1,Lo=i,gh=S),D=i.pendingLanes,D===0&&(Fo=null),Hg(g.stateNode),Yn(i,lr()),d!==null)for(w=i.onRecoverableError,g=0;g<d.length;g++)S=d[g],w(S.value,{componentStack:S.stack,digest:S.digest});if(mh)throw mh=!1,i=l0,l0=null,i;return(gh&1)!==0&&i.tag!==0&&ec(),D=i.pendingLanes,(D&1)!==0?i===c0?_d++:(_d=0,c0=i):_d=0,To(),null}function ec(){if(Lo!==null){var i=ld(gh),d=Aa.transition,g=Rt;try{if(Aa.transition=null,Rt=16>i?16:i,Lo===null)var w=!1;else{if(i=Lo,Lo=null,gh=0,(Vt&6)!==0)throw Error(n(331));var S=Vt;for(Vt|=4,rt=i.current;rt!==null;){var D=rt,$=D.child;if((rt.flags&16)!==0){var te=D.deletions;if(te!==null){for(var de=0;de<te.length;de++){var Ee=te[de];for(rt=Ee;rt!==null;){var Ue=rt;switch(Ue.tag){case 0:case 11:case 15:Md(8,Ue,D)}var Ve=Ue.child;if(Ve!==null)Ve.return=Ue,rt=Ve;else for(;rt!==null;){Ue=rt;var ze=Ue.sibling,et=Ue.return;if(zS(Ue),Ue===Ee){rt=null;break}if(ze!==null){ze.return=et,rt=ze;break}rt=et}}}var at=D.alternate;if(at!==null){var ct=at.child;if(ct!==null){at.child=null;do{var Ir=ct.sibling;ct.sibling=null,ct=Ir}while(ct!==null)}}rt=D}}if((D.subtreeFlags&2064)!==0&&$!==null)$.return=D,rt=$;else e:for(;rt!==null;){if(D=rt,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Md(9,D,D.return)}var je=D.sibling;if(je!==null){je.return=D.return,rt=je;break e}rt=D.return}}var he=i.current;for(rt=he;rt!==null;){$=rt;var Ne=$.child;if(($.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=$,rt=Ne;else e:for($=he;rt!==null;){if(te=rt,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:uh(9,te)}}catch(ft){Pr(te,te.return,ft)}if(te===$){rt=null;break e}var Ge=te.sibling;if(Ge!==null){Ge.return=te.return,rt=Ge;break e}rt=te.return}}if(Vt=S,To(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(ko,i)}catch{}w=!0}return w}finally{Rt=g,Aa.transition=d}}return!1}function rC(i,d,g){d=Xl(g,d),d=bS(i,d,1),i=_o(i,d,1),d=Tn(),i!==null&&(Ni(i,1,d),Yn(i,d))}function Pr(i,d,g){if(i.tag===3)rC(i,i,g);else for(;d!==null;){if(d.tag===3){rC(d,i,g);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Fo===null||!Fo.has(w))){i=Xl(g,i),i=jS(d,i,1),d=_o(d,i,1),i=Tn(),d!==null&&(Ni(d,1,i),Yn(d,i));break}}d=d.return}}function P$(i,d,g){var w=i.pingCache;w!==null&&w.delete(d),d=Tn(),i.pingedLanes|=i.suspendedLanes&g,Zr===i&&(mn&g)===g&&(Vr===4||Vr===3&&(mn&130023424)===mn&&500>lr()-i0?zi(i,0):o0|=g),Yn(i,d)}function nC(i,d){d===0&&((i.mode&1)===0?d=1:(d=El,El<<=1,(El&130023424)===0&&(El=4194304)));var g=Tn();i=Bs(i,d),i!==null&&(Ni(i,d,g),Yn(i,g))}function E$(i){var d=i.memoizedState,g=0;d!==null&&(g=d.retryLane),nC(i,g)}function A$(i,d){var g=0;switch(i.tag){case 13:var w=i.stateNode,S=i.memoizedState;S!==null&&(g=S.retryLane);break;case 19:w=i.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(d),nC(i,g)}var aC;aC=function(i,d,g){if(i!==null)if(i.memoizedProps!==d.pendingProps||Gn.current)Wn=!0;else{if((i.lanes&g)===0&&(d.flags&128)===0)return Wn=!1,g$(i,d,g);Wn=(i.flags&131072)!==0}else Wn=!1,hr&&(d.flags&1048576)!==0&&$1(d,Kf,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;ch(i,d),i=d.pendingProps;var S=Bl(d,wn.current);Kl(d,g),S=Fx(null,d,w,i,S,g);var D=Lx();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Hn(w)?(D=!0,Gf(d)):D=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Dx(d),S.updater=ih,d.stateNode=S,S._reactInternals=d,Gx(d,w,i,g),d=Yx(null,d,w,!0,D,g)):(d.tag=0,hr&&D&&jx(d),Mn(null,d,S,g),d=d.child),d;case 16:w=d.elementType;e:{switch(ch(i,d),i=d.pendingProps,S=w._init,w=S(w._payload),d.type=w,S=d.tag=D$(w),i=Ya(w,i),S){case 0:d=Kx(null,d,w,i,g);break e;case 1:d=IS(null,d,w,i,g);break e;case 11:d=CS(null,d,w,i,g);break e;case 14:d=kS(null,d,w,Ya(w.type,i),g);break e}throw Error(n(306,w,""))}return d;case 0:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Ya(w,S),Kx(i,d,w,S,g);case 1:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Ya(w,S),IS(i,d,w,S,g);case 3:e:{if(DS(d),i===null)throw Error(n(387));w=d.pendingProps,D=d.memoizedState,S=D.element,H1(i,d),eh(d,w,null,g);var $=d.memoizedState;if(w=$.element,D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){S=Xl(Error(n(423)),d),d=OS(i,d,w,g,S);break e}else if(w!==S){S=Xl(Error(n(424)),d),d=OS(i,d,w,g,S);break e}else for(oa=Do(d.stateNode.containerInfo.firstChild),sa=d,hr=!0,Ka=null,g=q1(d,null,w,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Gl(),w===S){d=qs(i,d,g);break e}Mn(i,d,w,g)}d=d.child}return d;case 5:return Y1(d),i===null&&Sx(d),w=d.type,S=d.pendingProps,D=i!==null?i.memoizedProps:null,$=S.children,px(w,S)?$=null:D!==null&&px(w,D)&&(d.flags|=32),AS(i,d),Mn(i,d,$,g),d.child;case 6:return i===null&&Sx(d),null;case 13:return MS(i,d,g);case 4:return Ox(d,d.stateNode.containerInfo),w=d.pendingProps,i===null?d.child=Hl(d,null,w,g):Mn(i,d,w,g),d.child;case 11:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Ya(w,S),CS(i,d,w,S,g);case 7:return Mn(i,d,d.pendingProps,g),d.child;case 8:return Mn(i,d,d.pendingProps.children,g),d.child;case 12:return Mn(i,d,d.pendingProps.children,g),d.child;case 10:e:{if(w=d.type._context,S=d.pendingProps,D=d.memoizedProps,$=S.value,or(Jf,w._currentValue),w._currentValue=$,D!==null)if(Wa(D.value,$)){if(D.children===S.children&&!Gn.current){d=qs(i,d,g);break e}}else for(D=d.child,D!==null&&(D.return=d);D!==null;){var te=D.dependencies;if(te!==null){$=D.child;for(var de=te.firstContext;de!==null;){if(de.context===w){if(D.tag===1){de=Vs(-1,g&-g),de.tag=2;var Ee=D.updateQueue;if(Ee!==null){Ee=Ee.shared;var Ue=Ee.pending;Ue===null?de.next=de:(de.next=Ue.next,Ue.next=de),Ee.pending=de}}D.lanes|=g,de=D.alternate,de!==null&&(de.lanes|=g),Ax(D.return,g,d),te.lanes|=g;break}de=de.next}}else if(D.tag===10)$=D.type===d.type?null:D.child;else if(D.tag===18){if($=D.return,$===null)throw Error(n(341));$.lanes|=g,te=$.alternate,te!==null&&(te.lanes|=g),Ax($,g,d),$=D.sibling}else $=D.child;if($!==null)$.return=D;else for($=D;$!==null;){if($===d){$=null;break}if(D=$.sibling,D!==null){D.return=$.return,$=D;break}$=$.return}D=$}Mn(i,d,S.children,g),d=d.child}return d;case 9:return S=d.type,w=d.pendingProps.children,Kl(d,g),S=Pa(S),w=w(S),d.flags|=1,Mn(i,d,w,g),d.child;case 14:return w=d.type,S=Ya(w,d.pendingProps),S=Ya(w.type,S),kS(i,d,w,S,g);case 15:return PS(i,d,d.type,d.pendingProps,g);case 17:return w=d.type,S=d.pendingProps,S=d.elementType===w?S:Ya(w,S),ch(i,d),d.tag=1,Hn(w)?(i=!0,Gf(d)):i=!1,Kl(d,g),vS(d,w,S),Gx(d,w,S,g),Yx(null,d,w,!0,i,g);case 19:return RS(i,d,g);case 22:return ES(i,d,g)}throw Error(n(156,d.tag))};function sC(i,d){return Pl(i,d)}function I$(i,d,g,w){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(i,d,g,w){return new I$(i,d,g,w)}function p0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function D$(i){if(typeof i=="function")return p0(i)?1:0;if(i!=null){if(i=i.$$typeof,i===T)return 11;if(i===J)return 14}return 2}function Bo(i,d){var g=i.alternate;return g===null?(g=Ia(i.tag,d,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=d,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&14680064,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,d=i.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g}function bh(i,d,g,w,S,D){var $=2;if(w=i,typeof i=="function")p0(i)&&($=1);else if(typeof i=="string")$=5;else e:switch(i){case O:return Bi(g.children,S,D,d);case C:$=8,S|=8;break;case M:return i=Ia(12,g,d,S|2),i.elementType=M,i.lanes=D,i;case L:return i=Ia(13,g,d,S),i.elementType=L,i.lanes=D,i;case U:return i=Ia(19,g,d,S),i.elementType=U,i.lanes=D,i;case W:return jh(g,S,D,d);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:$=10;break e;case V:$=9;break e;case T:$=11;break e;case J:$=14;break e;case q:$=16,w=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return d=Ia($,g,d,S),d.elementType=i,d.type=w,d.lanes=D,d}function Bi(i,d,g,w){return i=Ia(7,i,w,d),i.lanes=g,i}function jh(i,d,g,w){return i=Ia(22,i,w,d),i.elementType=W,i.lanes=g,i.stateNode={isHidden:!1},i}function g0(i,d,g){return i=Ia(6,i,null,d),i.lanes=g,i}function x0(i,d,g){return d=Ia(4,i.children!==null?i.children:[],i.key,d),d.lanes=g,d.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},d}function O$(i,d,g,w,S){this.tag=d,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wi(0),this.expirationTimes=wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.identifierPrefix=w,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function v0(i,d,g,w,S,D,$,te,de){return i=new O$(i,d,g,te,de),d===1?(d=1,D===!0&&(d|=8)):d=0,D=Ia(3,null,null,d),i.current=D,D.stateNode=i,D.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dx(D),i}function M$(i,d,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:w==null?null:""+w,children:i,containerInfo:d,implementation:g}}function oC(i){if(!i)return Mo;i=i._reactInternals;e:{if(Bn(i)!==i||i.tag!==1)throw Error(n(170));var d=i;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Hn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(i.tag===1){var g=i.type;if(Hn(g))return T1(i,g,d)}return d}function iC(i,d,g,w,S,D,$,te,de){return i=v0(g,w,!0,i,S,D,$,te,de),i.context=oC(null),g=i.current,w=Tn(),S=zo(g),D=Vs(w,S),D.callback=d??null,_o(g,D,S),i.current.lanes=S,Ni(i,S,w),Yn(i,w),i}function wh(i,d,g,w){var S=d.current,D=Tn(),$=zo(S);return g=oC(g),d.context===null?d.context=g:d.pendingContext=g,d=Vs(D,$),d.payload={element:i},w=w===void 0?null:w,w!==null&&(d.callback=w),i=_o(S,d,$),i!==null&&(Qa(i,S,$,D),Zf(i,S,$)),$}function Nh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function lC(i,d){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<d?g:d}}function y0(i,d){lC(i,d),(i=i.alternate)&&lC(i,d)}function T$(){return null}var cC=typeof reportError=="function"?reportError:function(i){console.error(i)};function b0(i){this._internalRoot=i}Sh.prototype.render=b0.prototype.render=function(i){var d=this._internalRoot;if(d===null)throw Error(n(409));wh(i,d,null,null)},Sh.prototype.unmount=b0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var d=i.containerInfo;Li(function(){wh(null,i,null,null)}),d[Fs]=null}};function Sh(i){this._internalRoot=i}Sh.prototype.unstable_scheduleHydration=function(i){if(i){var d=dd();i={blockedOn:null,target:i,priority:d};for(var g=0;g<gs.length&&d!==0&&d<gs[g].priority;g++);gs.splice(g,0,i),g===0&&Of(i)}};function j0(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ch(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function dC(){}function R$(i,d,g,w,S){if(S){if(typeof w=="function"){var D=w;w=function(){var Ee=Nh($);D.call(Ee)}}var $=iC(d,w,i,0,null,!1,!1,"",dC);return i._reactRootContainer=$,i[Fs]=$.current,bd(i.nodeType===8?i.parentNode:i),Li(),$}for(;S=i.lastChild;)i.removeChild(S);if(typeof w=="function"){var te=w;w=function(){var Ee=Nh(de);te.call(Ee)}}var de=v0(i,0,!1,null,null,!1,!1,"",dC);return i._reactRootContainer=de,i[Fs]=de.current,bd(i.nodeType===8?i.parentNode:i),Li(function(){wh(d,de,g,w)}),de}function kh(i,d,g,w,S){var D=g._reactRootContainer;if(D){var $=D;if(typeof S=="function"){var te=S;S=function(){var de=Nh($);te.call(de)}}wh(d,$,i,S)}else $=R$(g,d,i,S,w);return Nh($)}Ci=function(i){switch(i.tag){case 3:var d=i.stateNode;if(d.current.memoizedState.isDehydrated){var g=Eo(d.pendingLanes);g!==0&&(Si(d,g|1),Yn(d,lr()),(Vt&6)===0&&(Zl=lr()+500,To()))}break;case 13:Li(function(){var w=Bs(i,1);if(w!==null){var S=Tn();Qa(w,i,1,S)}}),y0(i,1)}},cd=function(i){if(i.tag===13){var d=Bs(i,134217728);if(d!==null){var g=Tn();Qa(d,i,134217728,g)}y0(i,134217728)}},Af=function(i){if(i.tag===13){var d=zo(i),g=Bs(i,d);if(g!==null){var w=Tn();Qa(g,i,d,w)}y0(i,d)}},dd=function(){return Rt},If=function(i,d){var g=Rt;try{return Rt=i,d()}finally{Rt=g}},br=function(i,d,g){switch(d){case"input":if(Qe(i,g),d=g.name,g.type==="radio"&&d!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var w=g[d];if(w!==i&&w.form===i.form){var S=Vf(w);if(!S)throw Error(n(90));se(w),Qe(w,S)}}}break;case"textarea":ae(i,g);break;case"select":d=g.value,d!=null&&_(i,!!g.multiple,d,!1)}},xi=f0,vi=Li;var _$={usingClientEntryPoint:!1,Events:[Nd,zl,Vf,na,wa,f0]},$d={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$$={bundleType:$d.bundleType,version:$d.version,rendererPackageName:$d.rendererPackageName,rendererConfig:$d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kl(i),i===null?null:i.stateNode},findFiberByHostInstance:$d.findFiberByHostInstance||T$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ko=Ph.inject($$),Na=Ph}catch{}}return Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_$,Xn.createPortal=function(i,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j0(d))throw Error(n(200));return M$(i,d,null,g)},Xn.createRoot=function(i,d){if(!j0(i))throw Error(n(299));var g=!1,w="",S=cC;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=v0(i,1,!1,null,null,g,!1,w,S),i[Fs]=d.current,bd(i.nodeType===8?i.parentNode:i),new b0(d)},Xn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var d=i._reactInternals;if(d===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=kl(d),i=i===null?null:i.stateNode,i},Xn.flushSync=function(i){return Li(i)},Xn.hydrate=function(i,d,g){if(!Ch(d))throw Error(n(200));return kh(null,i,d,!0,g)},Xn.hydrateRoot=function(i,d,g){if(!j0(i))throw Error(n(405));var w=g!=null&&g.hydratedSources||null,S=!1,D="",$=cC;if(g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onRecoverableError!==void 0&&($=g.onRecoverableError)),d=iC(d,null,i,1,g??null,S,!1,D,$),i[Fs]=d.current,bd(i),w)for(i=0;i<w.length;i++)g=w[i],S=g._getVersion,S=S(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,S]:d.mutableSourceEagerHydrationData.push(g,S);return new Sh(d)},Xn.render=function(i,d,g){if(!Ch(d))throw Error(n(200));return kh(null,i,d,!1,g)},Xn.unmountComponentAtNode=function(i){if(!Ch(i))throw Error(n(40));return i._reactRootContainer?(Li(function(){kh(null,null,i,!1,function(){i._reactRootContainer=null,i[Fs]=null})}),!0):!1},Xn.unstable_batchedUpdates=f0,Xn.unstable_renderSubtreeIntoContainer=function(i,d,g,w){if(!Ch(g))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return kh(i,d,g,!1,w)},Xn.version="18.3.1-next-f1338f8080-20240426",Xn}var vC;function XI(){if(vC)return S0.exports;vC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),S0.exports=G$(),S0.exports}var yC;function H$(){if(yC)return Eh;yC=1;var e=XI();return Eh.createRoot=e.createRoot,Eh.hydrateRoot=e.hydrateRoot,Eh}var JI=H$(),so=XI();const W$=Os(so);function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hu.apply(this,arguments)}var Jo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jo||(Jo={}));const bC="popstate";function K$(e){e===void 0&&(e={});function t(a,s){let{pathname:o,search:l,hash:c}=a.location;return _y("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:mm(s)}return X$(t,n,null,e)}function Cr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Y$(){return Math.random().toString(36).substr(2,8)}function jC(e,t){return{usr:e.state,key:e.key,idx:t}}function _y(e,t,n,a){return n===void 0&&(n=null),hu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Fc(t):t,{state:n,key:t&&t.key||a||Y$()})}function mm(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Fc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function X$(e,t,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,l=s.history,c=Jo.Pop,f=null,h=u();h==null&&(h=0,l.replaceState(hu({},l.state,{idx:h}),""));function u(){return(l.state||{idx:null}).idx}function m(){c=Jo.Pop;let b=u(),N=b==null?null:b-h;h=b,f&&f({action:c,location:y.location,delta:N})}function p(b,N){c=Jo.Push;let P=_y(y.location,b,N);h=u()+1;let A=jC(P,h),k=y.createHref(P);try{l.pushState(A,"",k)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(k)}o&&f&&f({action:c,location:y.location,delta:1})}function v(b,N){c=Jo.Replace;let P=_y(y.location,b,N);h=u();let A=jC(P,h),k=y.createHref(P);l.replaceState(A,"",k),o&&f&&f({action:c,location:y.location,delta:0})}function j(b){let N=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof b=="string"?b:mm(b);return P=P.replace(/ $/,"%20"),Cr(N,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,N)}let y={get action(){return c},get location(){return e(s,l)},listen(b){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(bC,m),f=b,()=>{s.removeEventListener(bC,m),f=null}},createHref(b){return t(s,b)},createURL:j,encodeLocation(b){let N=j(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:v,go(b){return l.go(b)}};return y}var wC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wC||(wC={}));function J$(e,t,n){return n===void 0&&(n="/"),Q$(e,t,n)}function Q$(e,t,n,a){let s=typeof t=="string"?Fc(t):t,o=Sc(s.pathname||"/",n);if(o==null)return null;let l=QI(e);Z$(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let h=d3(o);c=l3(l[f],h)}return c}function QI(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(o,l,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(Cr(f.relativePath.startsWith(a),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(a.length));let h=ti([a,f.relativePath]),u=n.concat(f);o.children&&o.children.length>0&&(Cr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),QI(o.children,t,u,h)),!(o.path==null&&!o.index)&&t.push({path:h,score:o3(h,o.index),routesMeta:u})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let f of ZI(o.path))s(o,l,f)}),t}function ZI(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let l=ZI(a.join("/")),c=[];return c.push(...l.map(f=>f===""?o:[o,f].join("/"))),s&&c.push(...l),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function Z$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:i3(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const e3=/^:[\w-]+$/,t3=3,r3=2,n3=1,a3=10,s3=-2,NC=e=>e==="*";function o3(e,t){let n=e.split("/"),a=n.length;return n.some(NC)&&(a+=s3),t&&(a+=r3),n.filter(s=>!NC(s)).reduce((s,o)=>s+(e3.test(o)?t3:o===""?n3:a3),a)}function i3(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function l3(e,t,n){let{routesMeta:a}=e,s={},o="/",l=[];for(let c=0;c<a.length;++c){let f=a[c],h=c===a.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=$y({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},u),p=f.route;if(!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:ti([o,m.pathname]),pathnameBase:p3(ti([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=ti([o,m.pathnameBase]))}return l}function $y(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=c3(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:a.reduce((h,u,m)=>{let{paramName:p,isOptional:v}=u;if(p==="*"){let y=c[m]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const j=c[m];return v&&!j?h[p]=void 0:h[p]=(j||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:e}}function c3(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),gj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(a.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function d3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Sc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}const u3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f3=e=>u3.test(e);function h3(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?Fc(e):e,o;if(n)if(f3(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),gj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=SC(n.substring(1),"/"):o=SC(n,t)}else o=t;return{pathname:o,search:g3(a),hash:x3(s)}}function SC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function P0(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function xj(e,t){let n=m3(e);return t?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function vj(e,t,n,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=Fc(e):(s=hu({},e),Cr(!s.pathname||!s.pathname.includes("?"),P0("?","pathname","search",s)),Cr(!s.pathname||!s.pathname.includes("#"),P0("#","pathname","hash",s)),Cr(!s.search||!s.search.includes("#"),P0("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=n;else{let m=t.length-1;if(!a&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}c=m>=0?t[m]:"/"}let f=h3(s,c),h=l&&l!=="/"&&l.endsWith("/"),u=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||u)&&(f.pathname+="/"),f}const ti=e=>e.join("/").replace(/\/\/+/g,"/"),p3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),g3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,x3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function v3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eD=["post","put","patch","delete"];new Set(eD);const y3=["get",...eD];new Set(y3);function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mu.apply(this,arguments)}const Ap=x.createContext(null),tD=x.createContext(null),po=x.createContext(null),Ip=x.createContext(null),Ms=x.createContext({outlet:null,matches:[],isDataRoute:!1}),rD=x.createContext(null);function b3(e,t){let{relative:n}=t===void 0?{}:t;Lc()||Cr(!1);let{basename:a,navigator:s}=x.useContext(po),{hash:o,pathname:l,search:c}=Dp(e,{relative:n}),f=l;return a!=="/"&&(f=l==="/"?a:ti([a,l])),s.createHref({pathname:f,search:c,hash:o})}function Lc(){return x.useContext(Ip)!=null}function ds(){return Lc()||Cr(!1),x.useContext(Ip).location}function nD(e){x.useContext(po).static||x.useLayoutEffect(e)}function Tt(){let{isDataRoute:e}=x.useContext(Ms);return e?R3():j3()}function j3(){Lc()||Cr(!1);let e=x.useContext(Ap),{basename:t,future:n,navigator:a}=x.useContext(po),{matches:s}=x.useContext(Ms),{pathname:o}=ds(),l=JSON.stringify(xj(s,n.v7_relativeSplatPath)),c=x.useRef(!1);return nD(()=>{c.current=!0}),x.useCallback(function(h,u){if(u===void 0&&(u={}),!c.current)return;if(typeof h=="number"){a.go(h);return}let m=vj(h,JSON.parse(l),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ti([t,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[t,a,l,o,e])}const w3=x.createContext(null);function N3(e){let t=x.useContext(Ms).outlet;return t&&x.createElement(w3.Provider,{value:e},t)}function Ts(){let{matches:e}=x.useContext(Ms),t=e[e.length-1];return t?t.params:{}}function Dp(e,t){let{relative:n}=t===void 0?{}:t,{future:a}=x.useContext(po),{matches:s}=x.useContext(Ms),{pathname:o}=ds(),l=JSON.stringify(xj(s,a.v7_relativeSplatPath));return x.useMemo(()=>vj(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function S3(e,t){return C3(e,t)}function C3(e,t,n,a){Lc()||Cr(!1);let{navigator:s}=x.useContext(po),{matches:o}=x.useContext(Ms),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let h=ds(),u;if(t){var m;let b=typeof t=="string"?Fc(t):t;f==="/"||(m=b.pathname)!=null&&m.startsWith(f)||Cr(!1),u=b}else u=h;let p=u.pathname||"/",v=p;if(f!=="/"){let b=f.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let j=J$(e,{pathname:v}),y=I3(j&&j.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:ti([f,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?f:ti([f,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,a);return t&&y?x.createElement(Ip.Provider,{value:{location:mu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Jo.Pop}},y):y}function k3(){let e=T3(),t=v3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,null)}const P3=x.createElement(k3,null);class E3 extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(Ms.Provider,{value:this.props.routeContext},x.createElement(rD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A3(e){let{routeContext:t,match:n,children:a}=e,s=x.useContext(Ap);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Ms.Provider,{value:t},a)}function I3(e,t,n,a){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=a)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let u=l.findIndex(m=>m.route.id&&c?.[m.route.id]!==void 0);u>=0||Cr(!1),l=l.slice(0,Math.min(l.length,u+1))}let f=!1,h=-1;if(n&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=u),m.route.id){let{loaderData:p,errors:v}=n,j=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||j){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((u,m,p)=>{let v,j=!1,y=null,b=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||P3,f&&(h<0&&p===0?(_3("route-fallback"),j=!0,b=null):h===p&&(j=!0,b=m.route.hydrateFallbackElement||null)));let N=t.concat(l.slice(0,p+1)),P=()=>{let A;return v?A=y:j?A=b:m.route.Component?A=x.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=u,x.createElement(A3,{match:m,routeContext:{outlet:u,matches:N,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?x.createElement(E3,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:P(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):P()},null)}var aD=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(aD||{}),sD=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(sD||{});function D3(e){let t=x.useContext(Ap);return t||Cr(!1),t}function O3(e){let t=x.useContext(tD);return t||Cr(!1),t}function M3(e){let t=x.useContext(Ms);return t||Cr(!1),t}function oD(e){let t=M3(),n=t.matches[t.matches.length-1];return n.route.id||Cr(!1),n.route.id}function T3(){var e;let t=x.useContext(rD),n=O3(),a=oD();return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}function R3(){let{router:e}=D3(aD.UseNavigateStable),t=oD(sD.UseNavigateStable),n=x.useRef(!1);return nD(()=>{n.current=!0}),x.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,mu({fromRouteId:t},o)))},[e,t])}const CC={};function _3(e,t,n){CC[e]||(CC[e]=!0)}function $3(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function kC(e){let{to:t,replace:n,state:a,relative:s}=e;Lc()||Cr(!1);let{future:o,static:l}=x.useContext(po),{matches:c}=x.useContext(Ms),{pathname:f}=ds(),h=Tt(),u=vj(t,xj(c,o.v7_relativeSplatPath),f,s==="path"),m=JSON.stringify(u);return x.useEffect(()=>h(JSON.parse(m),{replace:n,state:a,relative:s}),[h,m,s,n,a]),null}function iD(e){return N3(e.context)}function He(e){Cr(!1)}function F3(e){let{basename:t="/",children:n=null,location:a,navigationType:s=Jo.Pop,navigator:o,static:l=!1,future:c}=e;Lc()&&Cr(!1);let f=t.replace(/^\/*/,"/"),h=x.useMemo(()=>({basename:f,navigator:o,static:l,future:mu({v7_relativeSplatPath:!1},c)}),[f,c,o,l]);typeof a=="string"&&(a=Fc(a));let{pathname:u="/",search:m="",hash:p="",state:v=null,key:j="default"}=a,y=x.useMemo(()=>{let b=Sc(u,f);return b==null?null:{location:{pathname:b,search:m,hash:p,state:v,key:j},navigationType:s}},[f,u,m,p,v,j,s]);return y==null?null:x.createElement(po.Provider,{value:h},x.createElement(Ip.Provider,{children:n,value:y}))}function L3(e){let{children:t,location:n}=e;return S3(Fy(t),n)}new Promise(()=>{});function Fy(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(a,s)=>{if(!x.isValidElement(a))return;let o=[...t,s];if(a.type===x.Fragment){n.push.apply(n,Fy(a.props.children,o));return}a.type!==He&&Cr(!1),!a.props.index||!a.props.children||Cr(!1);let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Fy(a.props.children,o)),n.push(l)}),n}function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pm.apply(this,arguments)}function lD(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function z3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function U3(e,t){return e.button===0&&(!t||t==="_self")&&!z3(e)}function Ly(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let a=e[n];return t.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function B3(e,t){let n=Ly(e);return t&&t.forEach((a,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const V3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],q3=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],G3="6";try{window.__reactRouterVersion=G3}catch{}const H3=x.createContext({isTransitioning:!1}),W3="startTransition",PC=YI[W3];function K3(e){let{basename:t,children:n,future:a,window:s}=e,o=x.useRef();o.current==null&&(o.current=K$({window:s,v5Compat:!0}));let l=o.current,[c,f]=x.useState({action:l.action,location:l.location}),{v7_startTransition:h}=a||{},u=x.useCallback(m=>{h&&PC?PC(()=>f(m)):f(m)},[f,h]);return x.useLayoutEffect(()=>l.listen(u),[l,u]),x.useEffect(()=>$3(a),[a]),x.createElement(F3,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:a})}const Y3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J3=x.forwardRef(function(t,n){let{onClick:a,relative:s,reloadDocument:o,replace:l,state:c,target:f,to:h,preventScrollReset:u,viewTransition:m}=t,p=lD(t,V3),{basename:v}=x.useContext(po),j,y=!1;if(typeof h=="string"&&X3.test(h)&&(j=h,Y3))try{let A=new URL(window.location.href),k=h.startsWith("//")?new URL(A.protocol+h):new URL(h),I=Sc(k.pathname,v);k.origin===A.origin&&I!=null?h=I+k.search+k.hash:y=!0}catch{}let b=b3(h,{relative:s}),N=Z3(h,{replace:l,state:c,target:f,preventScrollReset:u,relative:s,viewTransition:m});function P(A){a&&a(A),A.defaultPrevented||N(A)}return x.createElement("a",pm({},p,{href:j||b,onClick:y||o?a:P,ref:n,target:f}))}),st=x.forwardRef(function(t,n){let{"aria-current":a="page",caseSensitive:s=!1,className:o="",end:l=!1,style:c,to:f,viewTransition:h,children:u}=t,m=lD(t,q3),p=Dp(f,{relative:m.relative}),v=ds(),j=x.useContext(tD),{navigator:y,basename:b}=x.useContext(po),N=j!=null&&tF(p)&&h===!0,P=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,A=v.pathname,k=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(A=A.toLowerCase(),k=k?k.toLowerCase():null,P=P.toLowerCase()),k&&b&&(k=Sc(k,b)||k);const I=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let E=A===P||!l&&A.startsWith(P)&&A.charAt(I)==="/",O=k!=null&&(k===P||!l&&k.startsWith(P)&&k.charAt(P.length)==="/"),C={isActive:E,isPending:O,isTransitioning:N},M=E?a:void 0,F;typeof o=="function"?F=o(C):F=[o,E?"active":null,O?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let V=typeof c=="function"?c(C):c;return x.createElement(J3,pm({},m,{"aria-current":M,className:F,ref:n,style:V,to:f,viewTransition:h}),typeof u=="function"?u(C):u)});var zy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zy||(zy={}));var EC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(EC||(EC={}));function Q3(e){let t=x.useContext(Ap);return t||Cr(!1),t}function Z3(e,t){let{target:n,replace:a,state:s,preventScrollReset:o,relative:l,viewTransition:c}=t===void 0?{}:t,f=Tt(),h=ds(),u=Dp(e,{relative:l});return x.useCallback(m=>{if(U3(m,n)){m.preventDefault();let p=a!==void 0?a:mm(h)===mm(u);f(e,{replace:p,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[h,f,u,a,s,n,e,o,l,c])}function eF(e){let t=x.useRef(Ly(e)),n=x.useRef(!1),a=ds(),s=x.useMemo(()=>B3(a.search,n.current?null:t.current),[a.search]),o=Tt(),l=x.useCallback((c,f)=>{const h=Ly(typeof c=="function"?c(s):c);n.current=!0,o("?"+h,f)},[o,s]);return[s,l]}function tF(e,t){t===void 0&&(t={});let n=x.useContext(H3);n==null&&Cr(!1);let{basename:a}=Q3(zy.useViewTransitionState),s=Dp(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Sc(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=Sc(n.nextLocation.pathname,a)||n.nextLocation.pathname;return $y(s.pathname,l)!=null||$y(s.pathname,o)!=null}const cD=x.createContext(),rF=({children:e})=>{const[t,n]=x.useState(null),[a,s]=x.useState(!0),o=Tt();x.useEffect(()=>{const h=localStorage.getItem("auth_user");if(h)try{n(JSON.parse(h))}catch{localStorage.removeItem("auth_user")}s(!1)},[]);const l=async h=>{localStorage.setItem("auth_user",JSON.stringify(h)),n(h),o("/")},c=()=>{localStorage.removeItem("auth_user"),n(null),o("/login")},f=h=>!t||!t.permissions?!1:t.role==="ADMINISTRADORES"?!0:t.permissions.includes(h);return r.jsx(cD.Provider,{value:{user:t,loading:a,login:l,logout:c,hasPermission:f},children:e})},jl=()=>x.useContext(cD),nF=({permission:e})=>{const{user:t,loading:n,hasPermission:a}=jl();return n?r.jsx("div",{className:"min-h-screen bg-hd-black flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-hd-orange"})}):t?e&&!a(e)?r.jsx(kC,{to:"/",replace:!0}):r.jsx(iD,{}):r.jsx(kC,{to:"/login",replace:!0})};var aF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sF=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_e=(e,t)=>{const n=x.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:f,...h},u)=>x.createElement("svg",{ref:u,...aF,width:s,height:s,stroke:a,strokeWidth:l?Number(o)*24/Number(s):o,className:["lucide",`lucide-${sF(e)}`,c].join(" "),...h},[...t.map(([m,p])=>x.createElement(m,p)),...Array.isArray(f)?f:[f]]));return n.displayName=`${e}`,n};const ll=_e("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const zc=_e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const pu=_e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const AC=_e("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);const IC=_e("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);const DC=_e("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);const dD=_e("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);const Kr=_e("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const on=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const nl=_e("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);const Op=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Bu=_e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const gu=_e("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const Ln=_e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const OC=_e("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const xu=_e("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const as=_e("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const oF=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const iF=_e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const Ji=_e("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const vc=_e("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);const MC=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const TC=_e("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const ea=_e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Mp=_e("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Cc=_e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const uD=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Nr=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const lF=_e("ChevronFirst",[["path",{d:"m17 18-6-6 6-6",key:"1yerx2"}],["path",{d:"M7 6v12",key:"1p53r6"}]]);const cF=_e("ChevronLast",[["path",{d:"m7 18 6-6-6-6",key:"lwmzdw"}],["path",{d:"M17 6v12",key:"1o0aio"}]]);const dF=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ar=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const fD=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const uF=_e("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const Ra=_e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const gm=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const si=_e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Ld=_e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Wr=_e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const yj=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const bj=_e("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const oi=_e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Sr=_e("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const Vu=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const fF=_e("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const hD=_e("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const mD=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const hF=_e("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Uy=_e("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const vu=_e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const pD=_e("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);const mF=_e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const gD=_e("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const pF=_e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const jj=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const gF=_e("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const ma=_e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const cl=_e("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const Hr=_e("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Dn=_e("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const xm=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const xF=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const vF=_e("MailWarning",[["path",{d:"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5",key:"e61zoh"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M20 14v4",key:"1hm744"}],["path",{d:"M20 22v.01",key:"12bgn6"}]]);const ou=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const xD=_e("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const vD=_e("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);const yD=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const yF=_e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const vm=_e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const bF=_e("MoveHorizontal",[["polyline",{points:"18 8 22 12 18 16",key:"1hqrds"}],["polyline",{points:"6 8 2 12 6 16",key:"f0ernq"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}]]);const An=_e("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const jF=_e("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Uc=_e("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);const wl=_e("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const wF=_e("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const NF=_e("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const bD=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const _t=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const La=_e("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const Qn=_e("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const ro=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const E0=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ft=_e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Ht=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const SF=_e("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const By=_e("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const ii=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Vy=_e("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Tp=_e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const qy=_e("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const oo=_e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const CF=_e("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);const Nl=_e("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);const ym=_e("Tags",[["path",{d:"M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z",key:"gt587u"}],["path",{d:"M6 9.01V9",key:"1flxpt"}],["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}]]);const wj=_e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const jD=_e("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const Qt=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const kF=_e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Qo=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const yc=_e("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);const wD=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const ND=_e("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Gy=_e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Nj=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const _r=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const RC=_e("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const PF=_e("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);const A0=_e("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const It=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Hy=_e("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Wy=[{id:"inicio",label:"Inicio",path:"/",icon:gD,isLink:!0},{id:"acceso-rapido",label:"Acceso Rpido",icon:Hy,subItems:[{label:"POS (Caja)",path:"/ventas/pos",icon:qy,highlight:!0},{label:"Maestro Stock",path:"/productos",icon:vc,highlight:!0},{label:"Nuevo Cliente",path:"/clientes/nuevo",icon:_r},{label:"Nueva Compra",path:"/compras/nuevo",icon:Ra}]},{id:"crm",label:"CRM",icon:pD,subItems:[{label:"Dashboard",path:"/crm/dashboard",icon:as},{label:"Prospectos",path:"/crm/prospectos",icon:_r},{label:"Oportunidades",path:"/crm/oportunidades",icon:wj},{label:"Actividades",path:"/crm/actividades",icon:ea},{label:"Interacciones",path:"/crm/interacciones",icon:yD}]},{id:"ventas",label:"Ventas",icon:oo,subItems:[{label:"Clientes",path:"/clientes",icon:_r},{label:"Vendedores",path:"/vendedores",icon:ND},{label:"POS (Caja)",path:"/ventas/pos",icon:qy},{label:"Ventas Distribucin",path:"/ventas/distribucion",icon:yc},{label:"Historial de Ventas",path:"/ventas/historial",icon:Sr},{label:"Control de Devoluciones",path:"/ventas/historial-devoluciones",icon:Qn},{label:"Corte de Caja",path:"/ventas/corte",icon:Wr}]},{id:"compras",label:"Compras",icon:Ra,subItems:[{label:"rdenes y Facturas",path:"/compras",icon:Ra},{label:"Proveedores",path:"/proveedores",icon:yc},{label:"Cuentas por Pagar",path:"/cuentas-por-pagar/pagos",icon:nl}]},{id:"inventario",label:"Inventario",icon:An,subItems:[{label:"Maestro de Artculos",path:"/productos",icon:vc},{label:"Ajustes",path:"/ajustes",icon:Qn},{label:"Transferencias",path:"/transferencias",icon:nl},{label:"Control (Kardex)",path:"/kardex",icon:Sr},{label:"Lista de Precios",path:"/inventario/lista-precios",icon:Wr},{label:"Niveles de Precio",path:"/inventario/niveles-precios",icon:ma},{label:"Atributos de Artculos",path:"/inventario/categorias-articulos",icon:ym},{label:"Unidades de Medida",path:"/inventario/unidades-medida",icon:vu},{label:"Almacenes",path:"/inventario/almacenes",icon:vc},{label:"Grupos de Impuestos",path:"/inventario/grupos-impuestos",icon:Qn},{label:"Grupos de Producto",path:"/inventario/grupos-producto",icon:An}]},{id:"marketing",label:"Marketing",icon:vD,subItems:[{label:"Promociones",path:"/marketing/promociones",icon:ym},{label:"Cupones",path:"/marketing/cupones",icon:jD}]},{id:"configuracion",label:"Configuracin",icon:ii,subItems:[{label:"Compaa",path:"/configuracion/compania",icon:ii},{label:"Cuentas por Pagar",path:"/configuracion/cxp",icon:Sr},{label:"Comprobantes (NCF)",path:"/configuracion/ncf",icon:vu},{label:"Configuracin Clientes",path:"/configuracion/clientes",icon:_r},{label:"Configuracin Artculos",path:"/configuracion/articulos",icon:An},{label:"Monedas y Tasas",path:"/configuracion/monedas",icon:Wr},{label:"Configuracin Proveedores",path:"/configuracion/proveedores",icon:_r},{label:"Configuracin POS",path:"/configuracion/pos",icon:vm},{label:"Configuracin Compras",path:"/configuracion/compras",icon:Ra},{label:"Configuracin Transferencias",path:"/configuracion/transferencias",icon:nl},{label:"Configuracin Ajustes",path:"/configuracion/ajustes",icon:Qn},{label:"Gestin de Usuarios",path:"/configuracion/usuarios",icon:_r},{label:"Editor de Seguridad",path:"/configuracion/security-editor",icon:Tp}]},{id:"manager",label:"Manager Report",icon:as,subItems:[{label:"Ver Reporte",path:"/reportes/manager",icon:as},{label:"Diseador de Recibos",path:"/configuracion/receipt-designer",icon:Sr}]},{id:"reportes",label:"Reportes",icon:as,subItems:[{label:"General de Ventas",path:"/reportes/ventas",icon:oo},{label:"Cobros y Mtodos",path:"/reportes/ventas-cobros",icon:Wr},{label:"Por Vendedor",path:"/reportes/ventas-vendedor",icon:_r},{label:"Por Cliente",path:"/reportes/ventas-cliente",icon:_r},{label:"Reportes de Compras",path:"/compras/reportes",icon:Ra},{label:"Multi-Moneda (Excel)",path:"/reportes/compras-multi-moneda",icon:Wr},{label:"S.L. Facturas",path:"/reportes/smartlist/facturas",icon:Hr,highlight:!0},{label:"S.L. Artculos",path:"/reportes/smartlist/articulos",icon:Hr,highlight:!0},{label:"S.L. Proveedores",path:"/reportes/smartlist/proveedores",icon:Hr,highlight:!0},{label:"S.L. Pagos",path:"/reportes/smartlist/pagos",icon:Hr,highlight:!0},{label:"S.L. Existencias",path:"/reportes/smartlist/inventario",icon:Hr,highlight:!0},{label:"Existencias Actuales",path:"/reportes/inventario",icon:An},{label:"Valoracin de Inventario",path:"/reportes/valoracion-inventario",icon:Wr},{label:"Movimientos de Artculos",path:"/reportes/kardex",icon:Sr},{label:"Listado de Clientes",path:"/reportes/clientes",icon:_r},{label:"Listado de Proveedores",path:"/reportes/proveedores",icon:yc}]},{id:"utilidades",label:"Utilidades",icon:cl,subItems:[{label:"Calculadora",path:"/utilidades/calculadora",icon:ll},{label:"Bloc de Notas",path:"/utilidades/notas",icon:Sr},{label:"Calendario",path:"/utilidades/calendario",icon:ea}]}],_C=({permission:e,behavior:t="disable",children:n,fallback:a=null})=>{const{hasPermission:s}=jl();return s(e)?r.jsx(r.Fragment,{children:n}):t==="hide"?a||null:t==="disable"?bt.isValidElement(n)?bt.cloneElement(n,{disabled:!0,title:"No tiene permiso para realizar esta accin",className:`${n.props.className||""} opacity-50 cursor-not-allowed grayscale pointer-events-none`,onClick:l=>{l.preventDefault(),l.stopPropagation()}}):r.jsx("div",{className:"opacity-50 cursor-not-allowed grayscale pointer-events-none",title:"Acceso Denegado",children:n}):null},EF=()=>{const[e,t]=x.useState([]),[n,a]=x.useState({crm:!1,operaciones:!0,inventario:!1,ventas:!1,configuracion:!1,reportes:!0,repVentas:!1,repCompras:!1,repInventario:!1,repEntidades:!1,repSmartList:!0,compras:!0,marketing:!0,manager:!1}),[s,o]=x.useState(!1),l=h=>{a(u=>({...u,[h]:!u[h]}))};bt.useEffect(()=>{const h=localStorage.getItem("launchpad_structure"),u=Wy.find(m=>m.id==="acceso-rapido")?.subItems||[];if(h)try{const p=JSON.parse(h).find(v=>v.id==="acceso-rapido");p&&p.subItems?t(p.subItems):t(u)}catch{t(u)}else t(u)},[]);const c=({isActive:h})=>`flex items-center space-x-3 px-4 py-3 rounded-md transition-colors ${h?"bg-hd-orange text-white":"text-zinc-400 hover:bg-white/5 hover:text-white"}`,f=({isActive:h})=>`block flex items-center space-x-3 px-8 py-2 text-sm transition-colors ${h?"text-hd-orange font-black":"text-zinc-500 hover:text-white"}`;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-[60]",children:r.jsx("button",{onClick:()=>o(!s),className:"p-2 bg-hd-black text-white rounded-md shadow-lg border border-gray-700",children:r.jsx(cl,{size:24})})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>o(!1)}),r.jsxs("div",{className:`
                w-64 bg-hd-black border-r border-white/5 min-h-screen text-gray-100 flex flex-col font-sans transition-all duration-300
                fixed inset-y-0 left-0 z-50 
                lg:relative lg:translate-x-0
                ${s?"translate-x-0":"-translate-x-full"}
            `,children:[r.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center space-x-2 bg-black/10",children:[r.jsx("div",{className:"w-8 h-8 bg-hd-orange rounded flex items-center justify-center font-bold text-xl text-white shadow-lg shadow-hd-orange/20",children:"C"}),r.jsx("span",{className:"text-xl font-black italic tracking-tighter uppercase",children:"CRONO POS"}),r.jsx("button",{className:"ml-auto lg:hidden text-gray-400",onClick:()=>o(!1),children:r.jsx(Nr,{className:"rotate-90",size:20})})]}),r.jsxs("nav",{className:"flex-1 py-4 space-y-1 overflow-y-auto",children:[r.jsxs(st,{to:"/",className:c,end:!0,children:[r.jsx(gD,{size:20}),r.jsx("span",{children:"Inicio"})]}),r.jsxs(st,{to:"/launchpad",className:c,children:[r.jsx(cl,{size:20}),r.jsx("span",{children:"Launchpad"})]}),r.jsxs("div",{className:"px-4 py-2 border-y border-white/5 my-2 bg-black/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Hy,{size:12,className:"text-hd-orange animate-pulse"}),r.jsx("p",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest italic opacity-50",children:"Acceso Rpido"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.slice(0,6).map((h,u)=>{let m=null;Wy.forEach(j=>{const y=j.subItems?.find(b=>b.path===h.path);y&&(m=y)});const p=m||h,v=p.icon||Hy;return r.jsxs(st,{to:p.path,className:"flex flex-col items-center justify-center p-2 rounded bg-gray-800/40 hover:bg-hd-orange transition-all group border border-white/5",children:[r.jsx(v,{size:16,className:"text-hd-orange group-hover:text-white mb-1"}),r.jsx("span",{className:"text-[9px] font-black text-gray-400 group-hover:text-white uppercase tracking-tighter text-center leading-none",children:p.label.split(" ")[0]})]},u)})})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("crm"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(pD,{size:20}),r.jsx("span",{children:"CRM"})]}),n.crm?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.crm&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/crm/dashboard",className:f,children:[r.jsx(as,{size:18}),r.jsx("span",{children:"Dashboard"})]}),r.jsxs(st,{to:"/crm/prospectos",className:f,children:[r.jsx(_r,{size:18}),r.jsx("span",{children:"Prospectos"})]}),r.jsxs(st,{to:"/crm/oportunidades",className:f,children:[r.jsx(wj,{size:18}),r.jsx("span",{children:"Oportunidades"})]}),r.jsxs(st,{to:"/crm/actividades",className:f,children:[r.jsx(ea,{size:18}),r.jsx("span",{children:"Actividades"})]}),r.jsxs(st,{to:"/crm/interacciones",className:f,children:[r.jsx(yD,{size:18}),r.jsx("span",{children:"Interacciones"})]})]})]}),r.jsxs(st,{to:"/clientes",className:c,children:[r.jsx(_r,{size:20}),r.jsx("span",{children:"Clientes"})]}),r.jsxs(st,{to:"/vendedores",className:f,children:[r.jsx(ND,{size:18}),r.jsx("span",{children:"Vendedores"})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("marketing"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(vD,{size:20,className:"text-hd-orange"}),r.jsx("span",{children:"Marketing"})]}),n.marketing?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.marketing&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/marketing/promociones",className:f,children:[r.jsx(ym,{size:18}),r.jsx("span",{children:"Promociones"})]}),r.jsxs(st,{to:"/marketing/cupones",className:f,children:[r.jsx(jD,{size:18}),r.jsx("span",{children:"Cupones"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("ventas"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(oo,{size:20}),r.jsx("span",{children:"Ventas"})]}),n.ventas?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.ventas&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/ventas/pos",className:f,children:[r.jsx(qy,{size:18}),r.jsx("span",{children:"POS (Caja)"})]}),r.jsxs(st,{to:"/ventas/distribucion",className:f,children:[r.jsx(yc,{size:18}),r.jsx("span",{children:"Ventas Distribucin"})]}),r.jsxs(st,{to:"/ventas/devoluciones",className:f,children:[r.jsx(Qn,{size:18}),r.jsx("span",{children:"Devoluciones y NC"})]}),r.jsxs(st,{to:"/ventas/historial",className:f,children:[r.jsx(Sr,{size:18}),r.jsx("span",{children:"Historial de Ventas"})]}),r.jsxs(st,{to:"/ventas/corte",className:f,children:[r.jsx(Wr,{size:18}),r.jsx("span",{children:"Corte de Caja"})]}),r.jsxs(st,{to:"/cuentas-por-cobrar/cobros",className:f,children:[r.jsx(Wr,{size:18}),r.jsx("span",{children:"Cuentas por Cobrar"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("compras"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ra,{size:20}),r.jsx("span",{children:"Compras"})]}),n.compras?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.compras&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/compras",className:f,end:!0,children:[r.jsx(Ra,{size:18}),r.jsx("span",{children:"rdenes y Facturas"})]}),r.jsxs(st,{to:"/proveedores",className:f,children:[r.jsx(yc,{size:18}),r.jsx("span",{children:"Proveedores"})]}),r.jsxs(st,{to:"/cuentas-por-pagar/pagos",className:f,children:[r.jsx(nl,{size:18}),r.jsx("span",{children:"Cuentas por Pagar"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("inventario"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(An,{size:20}),r.jsx("span",{children:"Inventario"})]}),n.inventario?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.inventario&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/productos",className:f,children:[r.jsx(vc,{size:18}),r.jsx("span",{children:"Maestro de Artculos"})]}),r.jsxs("div",{className:"ml-4 border-l-2 border-gray-700 pl-4 mt-1 mb-2 space-y-1",children:[r.jsxs(st,{to:"/inventario/lista-precios",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(Wr,{size:14}),r.jsx("span",{children:"Lista de Precios"})]}),r.jsxs(st,{to:"/inventario/niveles-precios",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(ma,{size:14}),r.jsx("span",{children:"Niveles de Precio"})]}),r.jsxs(st,{to:"/inventario/categorias-articulos",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(ym,{size:14}),r.jsx("span",{children:"Atributos de Artculos"})]}),r.jsxs(st,{to:"/inventario/unidades-medida",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(vu,{size:14}),r.jsx("span",{children:"Unidades de Medida"})]}),r.jsxs(st,{to:"/inventario/almacenes",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(vc,{size:14}),r.jsx("span",{children:"Almacenes"})]}),r.jsxs(st,{to:"/inventario/grupos-impuestos",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(Qn,{size:14}),r.jsx("span",{children:"Grupos de Impuestos"})]}),r.jsxs(st,{to:"/inventario/grupos-producto",className:"flex items-center gap-2 px-4 py-1.5 text-xs text-gray-400 hover:text-white transition-colors",children:[r.jsx(An,{size:14}),r.jsx("span",{children:"Grupos de Producto"})]})]}),r.jsxs(st,{to:"/ajustes",className:f,children:[r.jsx(Qn,{size:18}),r.jsx("span",{children:"Ajustes"})]}),r.jsxs(st,{to:"/transferencias",className:f,children:[r.jsx(nl,{size:18}),r.jsx("span",{children:"Transferencias"})]}),r.jsxs(st,{to:"/inventario/historial",className:f,children:[r.jsx(Sr,{size:18}),r.jsx("span",{children:"Historial (Kardex)"})]}),r.jsxs(st,{to:"/kardex",className:f,children:[r.jsx(vc,{size:18}),r.jsx("span",{children:"Control (Kardex)"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("configuracion"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ii,{size:20}),r.jsx("span",{children:"Configuracin"})]}),n.configuracion?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.configuracion&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/configuracion/compania",className:f,children:[r.jsx(ii,{size:18}),r.jsx("span",{children:"Compaa"})]}),r.jsxs(st,{to:"/configuracion/cxp",className:f,children:[r.jsx(Sr,{size:18}),r.jsx("span",{children:"Cuentas por Pagar"})]}),r.jsxs(st,{to:"/configuracion/ncf",className:f,children:[r.jsx(vu,{size:18}),r.jsx("span",{children:"Comprobantes (NCF)"})]}),r.jsxs(st,{to:"/configuracion/clientes",className:f,children:[r.jsx(_r,{size:18}),r.jsx("span",{children:"Configuracin Clientes"})]}),r.jsxs(st,{to:"/configuracion/articulos",className:f,children:[r.jsx(An,{size:18}),r.jsx("span",{className:n.configuracion?"":"hidden",children:"Configuracin Artculos"})]}),r.jsxs(st,{to:"/configuracion/monedas",className:f,children:[r.jsx(Wr,{size:18}),r.jsx("span",{className:n.configuracion?"":"hidden",children:"Monedas y Tasas"})]}),r.jsxs(st,{to:"/configuracion/proveedores",className:f,children:[r.jsx(_r,{size:18}),r.jsx("span",{children:"Configuracin Proveedores"})]}),r.jsxs(st,{to:"/configuracion/pos",className:f,children:[r.jsx(vm,{size:18}),r.jsx("span",{children:"Configuracin POS"})]}),r.jsxs(st,{to:"/configuracion/compras",className:f,children:[r.jsx(Ra,{size:18}),r.jsx("span",{children:"Configuracin Compras"})]}),r.jsxs(st,{to:"/configuracion/transferencias",className:f,children:[r.jsx(nl,{size:18}),r.jsx("span",{children:"Configuracin Transferencias"})]}),r.jsxs(st,{to:"/configuracion/usuarios",className:f,children:[r.jsx(_r,{size:18}),r.jsx("span",{children:"Gestin de Usuarios"})]}),r.jsxs(st,{to:"/configuracion/security-editor",className:f,children:[r.jsx(Tp,{size:18}),r.jsx("span",{children:"Editor de Seguridad"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("manager"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(as,{size:20}),r.jsx("span",{children:"Manager Report"})]}),n.manager?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.manager&&r.jsxs("div",{className:"bg-black/20 pb-2",children:[r.jsxs(st,{to:"/reportes/manager",className:f,end:!0,children:[r.jsx(as,{size:18}),r.jsx("span",{children:"Ver Reporte"})]}),r.jsxs(st,{to:"/configuracion/receipt-designer",className:f,children:[r.jsx(Sr,{size:18}),r.jsx("span",{children:"Diseador de Recibos"})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("reportes"),className:"w-full flex items-center justify-between px-4 py-3 text-gray-300 hover:bg-gray-800 hover:text-white rounded-md transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(as,{size:20}),r.jsx("span",{children:"Reportes"})]}),n.reportes?r.jsx(Nr,{size:16}):r.jsx(ar,{size:16})]}),n.reportes&&r.jsxs("div",{className:"bg-black/20 pb-2 ml-4 border-l border-gray-800",children:[r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repVentas"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(oo,{size:16}),r.jsx("span",{children:"Ventas"})]}),n.repVentas?r.jsx(Nr,{size:14}):r.jsx(ar,{size:14})]}),n.repVentas&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/reportes/ventas",className:f,children:r.jsx("span",{children:"General de Ventas"})}),r.jsx(st,{to:"/reportes/ventas-cobros",className:f,children:r.jsx("span",{children:"Cobros y Mtodos de Pago"})}),r.jsx(st,{to:"/reportes/ventas-vendedor",className:f,children:r.jsx("span",{children:"Por Vendedor"})}),r.jsx(st,{to:"/reportes/ventas-cliente",className:f,children:r.jsx("span",{children:"Por Cliente"})}),r.jsx(st,{to:"/ventas/corte",className:f,children:r.jsx("span",{children:"Corte de Caja"})})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repCompras"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ra,{size:16}),r.jsx("span",{children:"Compras"})]}),n.repCompras?r.jsx(Nr,{size:14}):r.jsx(ar,{size:14})]}),n.repCompras&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/compras/reportes",className:f,children:r.jsx("span",{children:"Reportes de Compras"})}),r.jsx(st,{to:"/reportes/compras-multi-moneda",className:f,children:r.jsx("span",{children:"Multi-Moneda (Excel)"})}),r.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-800",children:[r.jsx("div",{className:"px-8 py-1 text-[10px] font-bold text-hd-orange uppercase tracking-widest opacity-70",children:"SmartLists Dinmicos"}),r.jsxs(st,{to:"/reportes/smartlist/facturas",className:f,children:[r.jsx(Hr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Facturas"})]}),r.jsxs(st,{to:"/reportes/smartlist/articulos",className:f,children:[r.jsx(Hr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Artculos"})]}),r.jsxs(st,{to:"/reportes/smartlist/proveedores",className:f,children:[r.jsx(Hr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Proveedores"})]}),r.jsxs(st,{to:"/reportes/smartlist/pagos",className:f,children:[r.jsx(Hr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Pagos"})]}),r.jsxs(st,{to:"/reportes/smartlist/inventario",className:f,children:[r.jsx(Hr,{size:14,className:"text-hd-orange"}),r.jsx("span",{children:"S.L. Existencias"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repInventario"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(An,{size:16}),r.jsx("span",{children:"Inventario"})]}),n.repInventario?r.jsx(Nr,{size:14}):r.jsx(ar,{size:14})]}),n.repInventario&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/reportes/inventario",className:f,children:r.jsx("span",{children:"Existencias Actuales"})}),r.jsx(st,{to:"/reportes/valoracion-inventario",className:f,children:r.jsx("span",{children:"Valoracin de Inventario"})}),r.jsx(st,{to:"/reportes/kardex",className:f,children:r.jsx("span",{children:"Movimientos de Artculos"})})]})]}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>l("repEntidades"),className:"w-full flex items-center justify-between px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(_r,{size:16}),r.jsx("span",{children:"Entidades"})]}),n.repEntidades?r.jsx(Nr,{size:14}):r.jsx(ar,{size:14})]}),n.repEntidades&&r.jsxs("div",{className:"ml-4 space-y-1",children:[r.jsx(st,{to:"/reportes/clientes",className:f,children:r.jsx("span",{children:"Listado de Clientes"})}),r.jsx(st,{to:"/reportes/proveedores",className:f,children:r.jsx("span",{children:"Listado de Proveedores"})})]})]})]})]})]}),r.jsx("div",{className:"p-4 border-t border-gray-800 text-xs text-gray-500 text-center",children:"Versin 1.0.0"})]})]})},AF=()=>{const e=ds(),t=Tt(),{user:n,logout:a}=jl(),s=()=>{const o=e.pathname;return o==="/"?"Dashboard":o.startsWith("/clientes")?"Gestin de Clientes":o.startsWith("/proveedores")?"Gestin de Proveedores":o.startsWith("/ventas/devoluciones")?"Devoluciones y Notas de Crdito":o.startsWith("/ventas")?"Punto de Venta":o.startsWith("/compras")?"Compras e Ingresos":o.includes("/productos/nuevo")?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:"Catlogo de Productos"}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsx("span",{children:"Nuevo Artculo"})]}),r.jsx("div",{className:"text-sm text-gray-500 font-normal",children:"Ficha de Artculo"})]}):o.includes("/productos/editar")?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:"Catlogo de Productos"}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsx("span",{children:"Editar Artculo"})]}),r.jsx("div",{className:"text-sm text-gray-500 font-normal",children:"Ficha de Artculo"})]}):o.startsWith("/productos")?"Catlogo de Productos":o.startsWith("/inventario/lista-precios")?"Mantenimiento Lista de Precios":o.startsWith("/inventario/categorias-articulos")?"Segmentacin de Artculos":o.startsWith("/inventario/unidades-medida")?"Unidades de Medida":o.startsWith("/inventario/almacenes")?"Almacenes":o.startsWith("/inventario/grupos-impuestos")?"Grupos de Impuestos":o.startsWith("/kardex")?"Control de Inventario":o.startsWith("/configuracion/articulos")?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/configuracion"),className:"flex items-center justify-center p-2 rounded-full hover:bg-gray-100 transition-colors",children:r.jsx(on,{size:20,className:"text-gray-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl font-bold text-gray-800",children:"Configuracin de Artculos"}),r.jsx("div",{className:"text-xs text-gray-500 font-normal",children:"Configuracin de secuencia numrica para artculos"})]})]}),r.jsx("div",{id:"header-message",className:"ml-14"})]}):o.startsWith("/reportes/valoracion-inventario")?"Valoracin de Inventario":o.startsWith("/reportes")?"Reportes":"Sistema POS"};return r.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden font-sans",children:[r.jsx(EF,{}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 z-10",children:[r.jsx("div",{className:"text-xl font-bold text-gray-800",children:s()}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{id:"header-actions"}),r.jsxs("button",{className:"p-2 text-gray-400 hover:text-hd-orange transition-colors relative",children:[r.jsx(oF,{size:20}),r.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),r.jsxs("div",{className:"flex items-center space-x-2 border-l border-gray-200 pl-4 ml-2",children:[r.jsxs("div",{className:"text-right hidden md:block mr-2",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700",children:n?.fullName||"Usuario"}),r.jsx("div",{className:"text-[10px] font-black uppercase text-hd-orange tracking-tighter italic leading-none",children:n?.role||"Vendedor"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 bg-hd-orange rounded-full flex items-center justify-center text-white shadow-lg shadow-hd-orange/10 font-black italic",children:n?.userName?.substring(0,2).toUpperCase()||"U"}),r.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50/50 rounded-xl transition-all",title:"Cerrar Sesin",children:r.jsx(xF,{size:20})})]})]})]})]}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:r.jsx(iD,{})})]})]})},la=({title:e})=>r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mb-6",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-700 mb-2",children:e}),r.jsx("p",{className:"max-w-md text-center",children:"Estamos trabajando en el diseo de este mdulo. Pronto ver aqu los formularios y tablas correspondientes."})]}),re=({children:e,variant:t="primary",size:n="md",isLoading:a=!1,className:s="",...o})=>{const l="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",c={primary:"bg-hd-orange text-white hover:bg-orange-600 focus:ring-orange-500",secondary:"bg-gray-800 text-white hover:bg-gray-900 focus:ring-gray-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700",ghost:"bg-transparent hover:bg-gray-100 text-gray-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},f={xs:"h-6 px-2 text-[10px]",sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2 text-sm",lg:"h-12 px-8 text-base"};return r.jsxs("button",{className:`${l} ${c[t]} ${f[n]} ${s}`,disabled:a||o.disabled,...o,children:[a&&r.jsx(Dn,{className:"mr-2 h-4 w-4 animate-spin"}),e]})},ye=bt.forwardRef(({label:e,error:t,className:n="",id:a,...s},o)=>r.jsxs("div",{className:`flex flex-col space-y-1.5 ${n}`,children:[e&&r.jsx("label",{htmlFor:a,className:"text-sm font-medium text-gray-700",children:e}),r.jsx("input",{ref:o,id:a,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-hd-orange focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 ${t?"border-red-500 focus:ring-red-500":""}`,...s}),t&&r.jsx("span",{className:"text-xs text-red-500",children:t})]}));ye.displayName="Input";const zt=({children:e,className:t="",style:n={}})=>r.jsx("div",{className:"w-full overflow-auto border border-gray-300 rounded-sm",children:r.jsx("table",{className:`w-full caption-bottom text-sm ${t}`,style:n,children:e})}),Ut=({children:e,className:t=""})=>r.jsx("thead",{className:`bg-gray-100 ${t}`,children:e}),Bt=({children:e,className:t=""})=>r.jsx("tbody",{className:`bg-white ${t}`,children:e}),Me=({children:e,className:t="",...n})=>r.jsx("tr",{className:`transition-colors hover:bg-blue-50/50 data-[state=selected]:bg-purple-100 data-[state=selected]:text-purple-900 ${t}`,...n,children:e}),ce=({children:e,className:t="",...n})=>r.jsx("th",{className:`h-10 px-4 text-left align-middle font-medium text-gray-600 border-b border-r border-gray-300 last:border-r-0 bg-gray-50 whitespace-nowrap ${t}`,...n,children:e}),G=({children:e,className:t="",...n})=>r.jsx("td",{className:`p-1.5 align-middle border-b border-r border-gray-200 last:border-r-0 text-gray-700 [&:has([role=checkbox])]:pr-0 ${t}`,...n,children:e}),Be=bt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("div",{ref:a,className:`bg-white rounded-lg shadow-sm border border-gray-200 ${t}`,...n,children:e})),gt=bt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("div",{ref:a,className:`px-6 py-4 border-b border-gray-100 ${t}`,...n,children:e})),vt=bt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("h3",{ref:a,className:`text-lg font-semibold text-gray-800 ${t}`,...n,children:e})),Pt=bt.forwardRef(({children:e,className:t="",...n},a)=>r.jsx("div",{ref:a,className:`px-6 py-4 ${t}`,...n,children:e}));Be.displayName="Card";gt.displayName="CardHeader";vt.displayName="CardTitle";Pt.displayName="CardContent";const IF=()=>{const e=Tt(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{const j=await fetch("http://localhost:5006/api/Clients");if(j.ok){const y=await j.json(),b=Array.isArray(y)?y:y.value||[];s(b)}else{const y=await j.text();console.error("Failed to fetch clients:",j.status,y),alert("Error al cargar clientes: "+y)}}catch(j){console.error("Error fetching clients:",j)}finally{l(!1)}},f=async j=>{if(window.confirm("Est seguro de eliminar este cliente?"))try{(await fetch(`http://localhost:5006/api/Clients/${j}`,{method:"DELETE"})).ok?c():alert("Error al eliminar")}catch(y){console.error("Error deleting client:",y)}},[h,u]=x.useState({key:null,direction:"asc"}),m=j=>{let y="asc";h.key===j&&h.direction==="asc"&&(y="desc"),u({key:j,direction:y})},p=bt.useMemo(()=>{let j=[...a];return t&&(j=j.filter(y=>{const b=y.name||y.Name||"",N=y.company||y.Company||"",P=y.code||y.Code||"";return b.toLowerCase().includes(t.toLowerCase())||N.toLowerCase().includes(t.toLowerCase())||P.toLowerCase().includes(t.toLowerCase())})),h.key&&j.sort((y,b)=>{const N=y[h.key]?y[h.key].toString().toLowerCase():"",P=b[h.key]?b[h.key].toString().toLowerCase():"";return N<P?h.direction==="asc"?-1:1:N>P?h.direction==="asc"?1:-1:0}),j},[a,t,h]),v=j=>h.key!==j?r.jsx(Hr,{size:14,className:"opacity-30"}):h.direction==="asc"?r.jsx(Ln,{size:14,className:"text-hd-orange"}):r.jsx(Kr,{size:14,className:"text-hd-orange"});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Clientes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de cartera de clientes"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{variant:"outline",className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:[r.jsx(Vu,{className:"mr-2 h-4 w-4"})," Filtros"]}),r.jsxs(re,{onClick:()=>e("/clientes/nuevo"),className:"bg-hd-orange hover:bg-orange-600 text-white shadow-md",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Cliente"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"border-l-4 border-l-blue-500",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Clientes"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:a.length})]})}),r.jsx(Be,{className:"border-l-4 border-l-green-500",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Activos"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:a.filter(j=>j.status==="Active").length})]})}),r.jsx(Be,{className:"border-l-4 border-l-orange-500",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Crdito Disponible"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"$1.2M"})]})}),r.jsx(Be,{className:"border-l-4 border-l-red-500",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Saldo Vencido"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"$45.2k"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex gap-4",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ye,{placeholder:"Buscar por nombre, empresa o cdigo...",className:"pl-9 bg-white",value:t,onChange:j=>n(j.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-100/90 border-b-2 border-gray-200",children:r.jsxs(Me,{children:[r.jsx(ce,{onClick:()=>m("code"),className:"w-[100px] font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Cdigo"}),v("code")]})}),r.jsx(ce,{onClick:()=>m("name"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Nombre"}),v("name")]})}),r.jsx(ce,{onClick:()=>m("company"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Empresa"}),v("company")]})}),r.jsx(ce,{onClick:()=>m("phone"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Telfono"}),v("phone")]})}),r.jsx(ce,{onClick:()=>m("email"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Email"}),v("email")]})}),r.jsx(ce,{onClick:()=>m("status"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Estado"}),v("status")]})}),r.jsx(ce,{className:"text-right font-bold text-gray-700",children:"Acciones"})]})}),r.jsx(Bt,{children:o?r.jsx(Me,{children:r.jsx(G,{colSpan:7,className:"text-center py-8 text-gray-500",children:"Cargando clientes..."})}):p.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No se encontraron clientes"})}):p.map(j=>r.jsxs(Me,{className:"hover:bg-gray-50 transition-colors",children:[r.jsx(G,{className:"font-medium text-gray-900",children:j.code||j.Code}),r.jsx(G,{className:"font-medium text-gray-800",children:j.name||j.Name}),r.jsx(G,{className:"text-gray-600",children:j.company||j.Company||"-"}),r.jsx(G,{className:"text-gray-600 text-sm",children:j.phone||j.Phone}),r.jsx(G,{className:"text-gray-600 text-sm",children:j.email||j.Email}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(j.status||j.Status)==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(j.status||j.Status)==="Active"?"Activo":"Inactivo"})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(`/clientes/editar/${j.id}`),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(Uc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(j.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(Qt,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},j.id||j.Id))})]})})]})]})},Rp="http://localhost:5006/api",kc=async()=>{const e=await fetch(`${Rp}/NivelesPrecio`);if(!e.ok)throw new Error("Error getting price levels");return e.json()},Sj=async e=>{const t=await fetch(`${Rp}/NivelesPrecio`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error saving price level");return t.json()},DF=async(e,t)=>{if(!(await fetch(`${Rp}/NivelesPrecio/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Error updating price level");return!0},OF=async e=>{if(!(await fetch(`${Rp}/NivelesPrecio/${e}`,{method:"DELETE"})).ok)throw new Error("Error deleting price level");return!0},MF=({clientId:e})=>{const[t,n]=x.useState([]),[a,s]=x.useState(!1);if(x.useEffect(()=>{e&&(s(!0),fetch(`http://localhost:5006/api/Clients/${e}/Statement`).then(l=>l.json()).then(l=>n(Array.isArray(l)?l:[])).catch(l=>console.error("Error loading ledger:",l)).finally(()=>s(!1)))},[e]),!e)return r.jsx("div",{className:"text-gray-400 p-4",children:"Guarde el cliente para ver su estado de cuenta."});const o=l=>l?`RD$ ${l.toLocaleString("en-US",{minimumFractionDigits:2})}`:"-";return r.jsx("div",{className:"overflow-x-auto border rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dbito"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crdito"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Saldo"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"Cargando movimientos..."})}):t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay movimientos registrados."})}):t.map((l,c)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(l.fecha).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[l.documento,l.referencia&&r.jsx("div",{className:"text-xs text-gray-400 font-normal",children:l.referencia})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${l.tipo==="Factura"?"bg-blue-100 text-blue-800":l.tipo==="Cobro"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:l.tipo})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:o(l.debito)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:o(l.credito)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-gray-900",children:o(l.balance)})]},`${l.refId}-${c}`))})]})})},Ah=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(Nr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ar,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},Dr=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),$C=()=>{const e=Tt(),{id:t}=Ts(),[n,a]=x.useState(""),[s,o]=x.useState({code:"",name:"",company:"",taxId:"",phone:"",email:"",address:"",status:"Active",balance:0,tipoNCF:"",nivelPrecio:"",moneda:""}),[l,c]=x.useState(null),[f,h]=x.useState([]),[u,m]=x.useState([]),[p,v]=x.useState([]);x.useEffect(()=>{(async()=>{try{const A=await fetch("http://localhost:5006/api/ClientConfiguration");if(A.ok){const E=await A.json();if(c(E),!t&&E.useAutoSequence){const O=String(E.currentValue).padStart(E.sequenceLength,"0"),C=E.useInitials?`${E.initials}${E.separator}${O}`:O;o(M=>({...M,code:C}))}}const k=await fetch("http://localhost:5006/api/Sellers");if(k.ok){const E=await k.json();h(E)}const I=await fetch("http://localhost:5006/api/Ventas/NCF/Sequences");if(I.ok){const E=await I.json();m(E)}try{const E=await kc();v(E)}catch(E){console.error("Error fetching price levels",E)}}catch(A){console.error("Error loading initial data:",A)}})()},[t]),x.useEffect(()=>{t&&j(t)},[t]);const j=async P=>{try{const A=await fetch(`http://localhost:5006/api/Clients/${P}`);if(A.ok){const k=await A.json();o(k)}else console.error("Failed to fetch client"),alert("No se pudo cargar el cliente")}catch(A){console.error("Error:",A)}},y=P=>{if(!l||!l.nameCase)return P;switch(l.nameCase){case"words":return P.split(" ").map(A=>A.charAt(0).toUpperCase()+A.slice(1).toLowerCase()).join(" ");case"first":return P.charAt(0).toUpperCase()+P.slice(1).toLowerCase();case"normal":default:return P}},b=P=>{const{name:A,value:k}=P.target;let I=k;A==="name"&&(I=y(k)),o(E=>({...E,[A]:I}))},N=async()=>{try{if(!s.name){alert("El nombre es obligatorio");return}const P=t?"PUT":"POST",A=t?`http://localhost:5006/api/Clients/${t}`:"http://localhost:5006/api/Clients",k={...s,code:s.code||`C${Math.floor(Math.random()*1e4)}`};if((await fetch(A,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok){if(a(t?"Cliente actualizado correctamente.":"El cliente se ha registrado correctamente."),!t){const E=await fetch("http://localhost:5006/api/ClientConfiguration");if(E.ok){const O=await E.json(),C=String(O.currentValue).padStart(O.sequenceLength,"0"),M=O.useInitials?`${O.initials}${O.separator}${C}`:C;o({code:M,name:"",company:"",taxId:"",phone:"",email:"",address:"",status:"Active",balance:0,tipoNCF:"",nivelPrecio:""})}}}else console.error("Error saving client"),alert("Error al guardar")}catch(P){console.error("Error:",P),alert("Error de conexin")}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/clientes"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Clientes"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:"Nuevo Cliente"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Tarjeta de Cliente"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[n&&r.jsx("span",{className:"text-lg font-bold text-blue-400 animate-pulse",children:n}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"ghost",className:"text-gray-600 hover:bg-gray-100",children:r.jsx("span",{className:"text-xs font-medium",children:"Reportes"})}),r.jsx(re,{variant:"ghost",className:"text-gray-600 hover:bg-gray-100",children:r.jsx("span",{className:"text-xs font-medium",children:"Movimientos"})}),r.jsx("div",{className:"h-4 w-px bg-gray-300 mx-2"}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/clientes"),className:"border-gray-300 text-gray-700",children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:N,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(Ah,{title:"Informacin General",children:[r.jsx(Dr,{label:"No.",children:r.jsx(ye,{name:"code",value:s.code,onChange:b,placeholder:"(Auto)",className:"bg-gray-50 border-gray-300 text-gray-900 font-bold",readOnly:l?.useAutoSequence||!!t})}),r.jsx(Dr,{label:"Nombre",required:!0,children:r.jsx(ye,{name:"name",value:s.name,onChange:b,placeholder:"Nombre del cliente",className:"font-medium"})}),r.jsx(Dr,{label:"Saldo Consolidado (RD$)",children:r.jsx(ye,{value:s.balance,onChange:()=>{},placeholder:"0.00",className:"text-right text-hd-orange font-black border-gray-300 text-lg",readOnly:!0})}),r.jsx(Dr,{label:"Lmite Crdito (RD$)",children:r.jsx(ye,{type:"number",placeholder:"0.00",className:"text-right",readOnly:!0})}),r.jsx(Dr,{label:"Vendedor",children:r.jsxs("select",{name:"sellerName",value:s.sellerName||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),f.map(P=>r.jsxs("option",{value:P.name,className:"text-gray-900",children:[P.code," - ",P.name]},P.id))]})}),r.jsx(Dr,{label:"Bloqueado",children:r.jsxs("select",{name:"status",value:s.status,onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"Active",children:"No"}),r.jsx("option",{value:"Blocked",children:"Todo"})]})})]}),r.jsxs(Ah,{title:"Direccin y Contacto",defaultExpanded:!0,children:[r.jsx(Dr,{label:"Direccin",required:!0,children:r.jsx(ye,{name:"address",value:s.address,onChange:b,placeholder:"Calle, nmero..."})}),r.jsx(Dr,{label:"Direccin 2",children:r.jsx(ye,{placeholder:"Apartamento, local...",readOnly:!0})}),r.jsx(Dr,{label:"Ciudad",children:r.jsx(ye,{placeholder:"Santo Domingo",readOnly:!0})}),r.jsx(Dr,{label:"Cdigo Postal",children:r.jsx(ye,{placeholder:"10101",readOnly:!0})}),r.jsx(Dr,{label:"Telfono",children:r.jsx(ye,{name:"phone",value:s.phone,onChange:b,placeholder:"(809) 000-0000"})}),r.jsx(Dr,{label:"Correo Electrnico",children:r.jsx(ye,{name:"email",type:"email",value:s.email,onChange:b,placeholder:"cliente@ejemplo.com",className:"text-blue-600 underline"})}),r.jsx(Dr,{label:"Pgina Web",children:r.jsx(ye,{placeholder:"www.ejemplo.com",readOnly:!0})}),r.jsx(Dr,{label:"Contacto Principal",children:r.jsx(ye,{placeholder:"Nombre del contacto",readOnly:!0})})]}),r.jsxs(Ah,{title:"Facturacin",defaultExpanded:!1,children:[r.jsx(Dr,{label:"RNC / Cdula",required:!0,children:r.jsx(ye,{name:"taxId",value:s.taxId,onChange:b,placeholder:"001-0000000-0"})}),r.jsx(Dr,{label:"Condicin Pago",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{children:"Contado"}),r.jsx("option",{children:"15 Das"}),r.jsx("option",{children:"30 Das"}),r.jsx("option",{children:"60 Das"})]})}),r.jsx(Dr,{label:"Nivel de Precio",children:r.jsxs("select",{name:"nivelPrecio",value:s.nivelPrecio||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"-- Predeterminado --"}),p.map(P=>r.jsx("option",{value:P.nombre,children:P.nombre},P.id))]})}),r.jsx(Dr,{label:"Tipo NCF",children:r.jsxs("select",{name:"tipoNCF",value:s.tipoNCF||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),u.map(P=>r.jsxs("option",{value:P.tipoNCF,children:[P.nombre," (",P.tipoNCF,")"]},P.id))]})}),r.jsx(Dr,{label:"Moneda",children:r.jsxs("select",{name:"moneda",value:s.moneda||"",onChange:b,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),r.jsx("option",{value:"DOP",children:"DOP"}),r.jsx("option",{value:"USD",children:"USD"})]})}),r.jsx(Dr,{label:"Grupo Impuesto",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",disabled:!0,children:[r.jsx("option",{children:"ITBIS 18%"}),r.jsx("option",{children:"Exento"})]})}),r.jsx(Dr,{label:"Compaa",children:r.jsx(ye,{name:"company",value:s.company,onChange:b,placeholder:"Nombre de empresa..."})})]}),r.jsx(Ah,{title:"Estado de Cuenta",defaultExpanded:!0,children:r.jsx("div",{className:"col-span-full",children:r.jsx(MF,{clientId:t})})})]})]})},qu="http://localhost:5006/api",Cj=async()=>{const e=await fetch(`${qu}/Proveedores`);if(!e.ok)throw new Error(`Failed to get providers: ${e.status}`);return e.json()},TF=async e=>{const t=await fetch(`${qu}/Proveedores/${e}`);if(!t.ok)throw new Error(`Failed to get provider: ${t.status}`);return t.json()},RF=async e=>{const t=await fetch(`${qu}/Proveedores`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Failed to save provider: ${t.status} ${n}`)}return t.json()},_F=async(e,t)=>{const n=await fetch(`${qu}/Proveedores/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const a=await n.text();throw new Error(`Failed to update provider: ${n.status} ${a}`)}return n.status===204?null:n.json()},$F=async e=>{const t=await fetch(`${qu}/Proveedores/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.text();throw new Error(`Failed to delete provider: ${t.status} ${n}`)}return!0},FF=()=>{const e=Tt(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{l(!0);const u=await Cj();s(u)}catch(u){console.error("Error loading suppliers:",u)}finally{l(!1)}},f=async u=>{if(window.confirm("Est seguro de eliminar este proveedor?"))try{await $F(u),c()}catch(m){console.error("Error deleting supplier:",m),alert("Error al eliminar proveedor")}},h=a.filter(u=>u.razonSocial.toLowerCase().includes(t.toLowerCase())||u.contacto&&u.contacto.toLowerCase().includes(t.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Proveedores"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione la informacin de sus proveedores y rdenes de compra."})]}),r.jsxs(re,{onClick:()=>e("/proveedores/nuevo"),className:"bg-gray-800 hover:bg-gray-900 shadow-lg",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Proveedor"]})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(vt,{children:"Listado General"}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar proveedor...",className:"pl-9",value:t,onChange:u=>n(u.target.value)})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[100px]",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Cdigo ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Empresa ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{className:"hidden md:table-cell",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Contacto ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{className:"hidden md:table-cell",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Telfono ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{className:"hidden lg:table-cell",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Email ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-gray-900 group",children:["Estado ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2 cursor-pointer hover:text-gray-900 group",children:["Deuda Total ",r.jsx(Hr,{size:14,className:"text-gray-400 group-hover:text-gray-600"})]})}),r.jsx(ce,{className:"text-right",children:"Acciones"})]})}),r.jsx(Bt,{children:h.map(u=>r.jsxs(Me,{className:"cursor-pointer",children:[r.jsx(G,{className:"font-medium",children:u.codigoProveedor}),r.jsxs(G,{children:[r.jsx("div",{className:"font-medium text-gray-900",children:u.razonSocial}),r.jsx("div",{className:"text-xs text-gray-500",children:u.numeroDocumento})]}),r.jsx(G,{className:"hidden md:table-cell text-gray-600",children:u.contacto}),r.jsx(G,{className:"hidden md:table-cell text-gray-600",children:u.telefono}),r.jsx(G,{className:"hidden lg:table-cell text-gray-600",children:u.correo}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.activo?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:u.activo?"Activo":"Inactivo"})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{className:`font-bold ${u.deudaTotal>0?"text-red-600":"text-green-600"}`,children:["RD$ ",u.deudaTotal.toLocaleString(void 0,{minimumFractionDigits:2})]}),u.deudaTotal>0&&r.jsx("span",{className:"text-[10px] text-gray-400 italic",children:"Balance Consolidado"})]})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/cuentas-por-pagar/pagos"),className:"h-10 w-10 p-2 rounded-full text-green-600 hover:text-green-800 hover:bg-green-100 transition-all border border-transparent hover:border-green-200 shadow-sm",title:"Registrar Pago",children:r.jsx(Wr,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(`/proveedores/editar/${u.id}`),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(Uc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(u.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(Qt,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},u.id))})]})})]})]})},I0=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(Nr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ar,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},Rn=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),FC=()=>{const e=Tt(),{id:t}=Ts(),n=!!t,[a,s]=x.useState(null),[o,l]=x.useState("N/A"),[c,f]=x.useState(""),[h,u]=x.useState(""),[m,p]=x.useState(""),[v,j]=x.useState(""),[y,b]=x.useState(""),[N,P]=x.useState(""),[A,k]=x.useState(""),[I,E]=x.useState(""),[O,C]=x.useState(""),[M,F]=x.useState(!0);x.useEffect(()=>{L(),T(),n?U():V()},[n,t]);const V=async()=>{try{const W=await fetch("http://localhost:5006/api/ProveedorConfiguration/NextCode");if(W.ok){const z=await W.text();u(z||`PROV-${Math.floor(1e3+Math.random()*9e3)}`)}}catch(q){console.error("Error fetching next code:",q)}},T=async()=>{try{const W=await fetch("http://localhost:5006/api/ProveedorConfiguration");if(W.ok){const z=await W.json();s(z)}}catch(q){console.error(q)}},L=async()=>{},U=async()=>{try{const q=await TF(t);u(q.codigoProveedor),p(q.razonSocial),j(q.numeroDocumento||""),b(q.tipoComprobante||""),P(q.direccion||""),k(q.telefono||""),E(q.correo||""),C(q.contacto||""),F(q.activo)}catch(q){console.error("Error loading provider:",q),alert("Error al cargar proveedor")}},J=async()=>{if(!m||!h){alert("Por favor complete los campos obligatorios (*).");return}const q={CodigoProveedor:h,RazonSocial:m,NumeroDocumento:v,TipoComprobante:y,Direccion:N,Telefono:A,Correo:I,Contacto:O,Activo:M};try{n?(await _F(parseInt(t),{...q,Id:parseInt(t)}),e("/proveedores")):(await RF(q),await fetch("http://localhost:5006/api/ProveedorConfiguration/Increment",{method:"POST"}),e("/proveedores"))}catch(W){console.error("Error saving provider:",W),alert("Error al guardar proveedor: "+W.message)}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/proveedores"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Proveedores"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:n?"Editar Proveedor":"Nuevo Proveedor"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Tarjeta de Proveedor"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"ghost",className:"text-gray-600 hover:bg-gray-100",children:r.jsx("span",{className:"text-xs font-medium",children:"Historial"})}),r.jsx("div",{className:"h-4 w-px bg-gray-300 mx-2"}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/proveedores"),className:"border-gray-300 text-gray-700",children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:J,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(I0,{title:"General",children:[r.jsx(Rn,{label:"No. Proveedor",required:!0,children:r.jsx(ye,{value:h,onChange:q=>u(q.target.value),placeholder:"(Auto)",className:"bg-gray-50 border-gray-200"})}),r.jsx(Rn,{label:"Nombre / Razn Social",required:!0,children:r.jsx(ye,{value:m,onChange:q=>p(q.target.value),placeholder:"Nombre o Razn Social",className:"font-medium"})}),r.jsx(Rn,{label:"RNC / Tax ID",children:r.jsx(ye,{value:v,onChange:q=>j(q.target.value),placeholder:"001-0000000-0"})}),r.jsx(Rn,{label:"Tipo de Comprobante",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:y,onChange:q=>b(q.target.value),children:[r.jsx("option",{value:"",children:"-- Seleccione --"}),r.jsx("option",{value:"B01",children:"Crdito Fiscal (B01)"}),r.jsx("option",{value:"B02",children:"Consumidor Final (B02)"}),r.jsx("option",{value:"B11",children:"Proveedor Informal (B11)"}),r.jsx("option",{value:"B13",children:"Gastos Menores (B13)"}),r.jsx("option",{value:"B14",children:"Rgimen Especial (B14)"}),r.jsx("option",{value:"B15",children:"Gubernamental (B15)"})]})}),r.jsx(Rn,{label:"Balance Consolidado (RD$)",children:r.jsx(ye,{placeholder:"0.00",className:"text-right text-red-600 font-bold border-gray-200",readOnly:!0})}),r.jsx(Rn,{label:"Activo",children:r.jsx("div",{className:"flex items-center pt-2",children:r.jsx("input",{type:"checkbox",checked:M,onChange:q=>F(q.target.checked),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"})})})]}),r.jsxs(I0,{title:"Direccin y Contacto",defaultExpanded:!0,children:[r.jsx(Rn,{label:"Direccin",children:r.jsx(ye,{value:N,onChange:q=>P(q.target.value),placeholder:"Calle, Nave, Local..."})}),r.jsx(Rn,{label:"Ciudad",children:r.jsx(ye,{placeholder:"Santo Domingo"})}),r.jsx(Rn,{label:"Pas/Regin",children:r.jsx("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",children:r.jsx("option",{children:"Repblica Dominicana"})})}),r.jsx("div",{className:"col-span-1 md:col-span-2 lg:col-span-3 h-px bg-gray-100 my-2"}),r.jsx(Rn,{label:"Telfono",children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:r.jsx(bD,{size:14})}),r.jsx(ye,{value:A,onChange:q=>k(q.target.value),placeholder:"(809) 000-0000",className:"rounded-l-none"})]})}),r.jsx(Rn,{label:"Correo Electrnico",children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:r.jsx(ou,{size:14})}),r.jsx(ye,{type:"email",value:I,onChange:q=>E(q.target.value),placeholder:"proveedor@empresa.com",className:"rounded-l-none text-blue-600 underline"})]})}),r.jsx(Rn,{label:"Sitio Web",children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:r.jsx(mD,{size:14})}),r.jsx(ye,{placeholder:"www.proveedor.com",className:"rounded-l-none text-blue-600"})]})}),r.jsx(Rn,{label:"Contacto Principal",children:r.jsx(ye,{value:O,onChange:q=>C(q.target.value),placeholder:"Nombre del contacto"})})]}),a&&a.habilitarPagoRecurrente&&r.jsxs(I0,{title:"Pagos y Facturacin",children:[r.jsx("div",{className:"col-span-1 md:col-span-3 mb-2",children:r.jsx("div",{className:"bg-orange-50 border-l-4 border-hd-orange p-3",children:r.jsxs("p",{className:"text-sm text-orange-700",children:[r.jsx("strong",{children:"Nota:"})," Este proveedor est habilitado para pagos configurables."]})})}),r.jsx(Rn,{label:"Frecuencia de Pago",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange",value:o,onChange:q=>l(q.target.value),children:[r.jsx("option",{value:"N/A",children:"Sin Automatizacin"}),a.habilitarFrecuenciaSemanal&&r.jsx("option",{value:"Semanal",children:"Semanal"}),a.habilitarFrecuenciaQuincenal&&r.jsx("option",{value:"Quincenal",children:"Quincenal"}),a.habilitarFrecuenciaMensual&&r.jsx("option",{value:"Mensual",children:"Mensual"}),a.habilitarFechasEspecificas&&r.jsx("option",{value:"FechasEspecificas",children:"Fechas Especficas"})]})}),o!=="N/A"&&r.jsx(Rn,{label:o==="FechasEspecificas"?"Das de Pago (ej: 5, 20)":"Da Preferido",children:r.jsx(ye,{value:c,onChange:q=>f(q.target.value),placeholder:o==="Semanal"?"Ej: Viernes":"Ej: 15 y 30"})})]})]})]})},Rs="http://localhost:5006/api",LF=async e=>{const t=await fetch(`${Rs}/Articulos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Failed to save article: ${t.status} ${n}`)}return t.json()},zF=async(e,t)=>{const n=await fetch(`${Rs}/Articulos/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const a=await n.text();throw new Error(`Failed to update article: ${n.status} ${a}`)}return n.status===204?null:n.json()},UF=async e=>{const t=await fetch(`${Rs}/Articulos/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.text();throw new Error(`Failed to delete article: ${t.status} ${n}`)}return!0},SD=async e=>{const t=await fetch(`${Rs}/Articulos/${e}`);if(!t.ok)throw new Error(`Failed to get article: ${t.status}`);return t.json()},dl=async()=>{const e=await fetch(`${Rs}/Articulos`);if(!e.ok)throw new Error(`Failed to get articles: ${e.status}`);return e.json()},CD=async e=>{const t=await fetch(`${Rs}/Articulos/${e}/Precios`);if(!t.ok)throw new Error("Failed to load prices");return t.json()},BF=async()=>{const e=await fetch(`${Rs}/Articulos/NavigationList`);if(!e.ok)throw new Error("Failed to load navigation list");return e.json()},VF=async(e,t)=>{const n=t?`?almacenId=${t}`:"",a=await fetch(`${Rs}/Articulos/${e}/Stock${n}`);if(!a.ok)throw new Error("Failed to load stock");return a.json()},qF=async e=>{const t=await fetch(`${Rs}/Articulos/${e}/StockBreakdown`);if(!t.ok)throw new Error("Failed to load stock breakdown");return t.json()},GF=async e=>{const t=new FormData;t.append("file",e);const n=await fetch(`${Rs}/Upload/ProductImage`,{method:"POST",body:t});if(!n.ok){const a=await n.text();throw new Error(`Failed to upload image: ${n.status} ${a}`)}return n.json()},bm="http://localhost:5006/api",za=async()=>{const e=await fetch(`${bm}/Almacenes`);if(!e.ok)throw new Error("Error al cargar almacenes");return e.json()},kD=async e=>{const t=!!e.id,n=t?`${bm}/Almacenes/${e.id}`:`${bm}/Almacenes`,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar almacn");return s.json()},HF=async e=>{const t=await fetch(`${bm}/Almacenes/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar almacn");return t.ok},Gu="http://localhost:5006/api",PD=async()=>{const e=await fetch(`${Gu}/ArticuloConfiguration`);if(!e.ok)throw new Error("Failed to load configuration");return e.json()},WF=async e=>{const t=await fetch(`${Gu}/ArticuloConfiguration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to save configuration");return t.json()},kj=async()=>{const e=await fetch(`${Gu}/ArticuloConfiguration/SecuenciasPorGrupo`);if(!e.ok)throw new Error("Failed to load sequences");return e.json()},KF=async e=>{console.log("Saving sequences payload:",e);const t=await fetch(`${Gu}/ArticuloConfiguration/SecuenciasPorGrupo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw console.error("Failed to save sequences:",n),new Error(`Failed to save sequences: ${t.status} ${n}`)}return t.json()},LC=async e=>{const t=await fetch(`${Gu}/ArticuloConfiguration/GenerarNumeroArticulo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grupoProducto:e})});if(!t.ok){const n=await t.text();throw console.error("Failed to generate article number:",n),new Error(`Failed to generate article number: ${t.status} ${n}`)}return t.json()},li=({open:e,onOpenChange:t,children:n,className:a="max-w-3xl"})=>e?r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>t(!1)}),r.jsx("div",{className:`relative z-[101] w-full bg-white rounded-lg shadow-2xl animate-in fade-in zoom-in duration-200 overflow-hidden ${a}`,children:n})]}):null,ci=({children:e,className:t=""})=>r.jsx("div",{className:`p-6 ${t}`,children:e}),zC=({children:e,className:t=""})=>r.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${t}`,children:e}),Ky=({children:e,className:t=""})=>r.jsx("h2",{className:`text-lg font-semibold leading-none tracking-tight text-gray-900 ${t}`,children:e}),YF=({children:e,className:t=""})=>r.jsx("div",{className:`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6 ${t}`,children:e}),XF=()=>{const e=Tt(),[t,n]=x.useState(""),[a,s]=x.useState({key:null,direction:"asc"}),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(""),[m,p]=x.useState(!0),[v,j]=x.useState([]),[y,b]=x.useState(null),[N,P]=x.useState(0),[A,k]=x.useState(1),[I,E]=x.useState(!1),[O,C]=x.useState(!1);x.useEffect(()=>{(async()=>{try{p(!0);const q=(await kj()).filter(H=>H.activo),W=q.map(H=>H.grupo);f(W);const z=q.find(H=>H.esDefecto);z&&u(z.grupo);const B=(await dl()).map(H=>({id:H.id,codigo:H.numeroArticulo,descripcion:H.descripcion,categoria:H.categoria||H.grupoProducto||"Sin Categora",grupo:H.grupoProducto,precio:H.precioUnitario,stock:H.stockActual||0,estado:H.bloqueado?"Inactivo":"Activo"}));l(B);const R=await za();j(R),R.length>0&&k(R[0].id)}catch(J){console.error("Error loading products:",J)}finally{p(!1)}})()},[]);const M=async()=>{try{if(C(!0),(await fetch(`http://localhost:5006/api/Articulos/${y.id}/QuickStock`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cantidad:parseFloat(N),almacenId:A})})).ok){const J=await dl();l(J.map(q=>({id:q.id,codigo:q.numeroArticulo,descripcion:q.descripcion,categoria:q.categoria||q.grupoProducto||"Sin Categora",grupo:q.grupoProducto,precio:q.precioUnitario,stock:q.stockActual||0,estado:q.bloqueado?"Inactivo":"Activo"}))),E(!1)}else alert("Error al actualizar inventario")}catch(U){console.error(U)}finally{C(!1)}},F=async U=>{if(window.confirm("Est seguro que desea eliminar este artculo?"))try{await UF(U),l(J=>J.filter(q=>q.id!==U))}catch(J){console.error("Error deleting article:",J),alert("Error al eliminar el artculo")}},V=U=>{let J="asc";a.key===U&&a.direction==="asc"&&(J="desc"),s({key:U,direction:J})},T=x.useMemo(()=>{let U=[...o];return h&&(U=U.filter(J=>J.grupo===h)),t&&(U=U.filter(J=>J.descripcion.toLowerCase().includes(t.toLowerCase())||J.codigo.toLowerCase().includes(t.toLowerCase()))),a.key&&U.sort((J,q)=>{const W=J[a.key]?J[a.key].toString().toLowerCase():"",z=q[a.key]?q[a.key].toString().toLowerCase():"";return W<z?a.direction==="asc"?-1:1:W>z?a.direction==="asc"?1:-1:0}),U},[o,t,a,h]),L=U=>a.key!==U?r.jsx(Hr,{size:14,className:"opacity-30"}):a.direction==="asc"?r.jsx(Ln,{size:14,className:"text-hd-orange"}):r.jsx(Kr,{size:14,className:"text-hd-orange"});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Catlogo de Productos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin maestra de inventario y servicios."})]}),r.jsxs(re,{onClick:()=>e("/productos/nuevo"),className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Producto"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-2",children:r.jsxs(Be,{className:"p-4 flex items-center space-x-4 bg-orange-50 border-orange-100",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full text-orange-600",children:r.jsx(An,{size:24})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Total Items"}),r.jsx("div",{className:"text-2xl font-bold text-gray-800",children:o.length})]})]})}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 pb-4",children:[r.jsx(vt,{children:"Lista de Artculos"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[r.jsxs("select",{className:"h-10 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange w-full sm:w-48",value:h,onChange:U=>u(U.target.value),children:[r.jsx("option",{value:"",children:"Todos los Grupos"}),c.map(U=>r.jsx("option",{value:U,children:U},U))]}),r.jsxs("div",{className:"relative w-full sm:w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar por cdigo o nombre...",className:"pl-9",value:t,onChange:U=>n(U.target.value)})]})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-100/90 border-b-2 border-gray-200",children:r.jsxs(Me,{children:[r.jsx(ce,{onClick:()=>V("codigo"),className:"w-[120px] font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"No. Artculo"}),L("codigo")]})}),r.jsx(ce,{onClick:()=>V("descripcion"),className:"font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Descripcin"}),L("descripcion")]})}),r.jsx(ce,{onClick:()=>V("categoria"),className:"hidden md:table-cell font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:"Categora/Grupo"}),L("categoria")]})}),r.jsx(ce,{onClick:()=>V("precio"),className:"text-right font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("span",{children:"Precio Unitario"}),L("precio")]})}),r.jsx(ce,{onClick:()=>V("stock"),className:"text-right font-bold text-gray-700 cursor-pointer hover:bg-gray-200 transition-colors select-none",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("span",{children:"Stock"}),L("stock")]})}),r.jsx(ce,{className:"font-bold text-gray-700 select-none",children:r.jsx("span",{children:"Estado"})}),r.jsx(ce,{className:"text-right font-bold text-gray-700",children:"Acciones"})]})}),r.jsx(Bt,{children:m?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Cargando..."})}):T.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No se encontraron artculos"})}):T.map(U=>r.jsxs(Me,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:[r.jsx(G,{className:"font-medium text-gray-900",children:U.codigo}),r.jsx(G,{children:r.jsx("div",{className:"font-medium text-gray-800",children:U.descripcion})}),r.jsx(G,{className:"hidden md:table-cell text-gray-600",children:U.categoria}),r.jsxs(G,{className:"text-right font-medium text-gray-900",children:["$",U.precio.toFixed(2)]}),r.jsx(G,{className:"text-right font-bold text-hd-orange",children:U.stock}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U.estado==="Activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.estado})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",title:"Ajuste Manual (Correccin)",children:r.jsx(_t,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(`/inventario/historial/${U.id}`),className:"h-10 w-10 p-2 rounded-full text-indigo-600 hover:text-indigo-800 hover:bg-indigo-100 transition-all border border-transparent hover:border-indigo-200 shadow-sm",title:"Historial de Movimientos",children:r.jsx(mF,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(`/productos/editar/${U.id}`),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(Uc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>F(U.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(Qt,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},U.id))})]})})]}),r.jsx(li,{open:I,onOpenChange:E,children:r.jsxs(ci,{className:"max-w-md bg-white p-0 overflow-hidden border-none shadow-2xl",children:[r.jsxs("div",{className:"bg-hd-black p-6 text-white flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-hd-orange rounded-lg",children:r.jsx(PF,{className:"text-white",size:20})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black italic tracking-tighter",children:"AJUSTE MANUAL"}),r.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Correccin de Stock"})]})]}),r.jsx(re,{variant:"ghost",onClick:()=>E(!1),className:"text-white hover:bg-white/10",children:r.jsx(It,{})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:r.jsx("div",{className:"flex",children:r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm text-yellow-700",children:[r.jsx("span",{className:"font-bold",children:"Nota:"})," Este botn debe usarse solo para correcciones rpidas (ej. conteo fsico, mermas encontradas al momento)."]}),r.jsxs("p",{className:"text-sm text-yellow-700 mt-2",children:["Para ingresar mercanca de proveedores, por favor sigue usando el mdulo de ",r.jsx("span",{className:"font-bold",children:"Compras -> Recepcin"}),', el cual s genera las "Entradas de Inventario" formales.']})]})})}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Artculo Seleccionado"}),r.jsx("p",{className:"font-bold text-gray-800",children:y?.descripcion}),r.jsx("p",{className:"text-xs text-hd-orange font-bold uppercase",children:y?.codigo})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1",children:"Almacn de Destino"}),r.jsx("select",{className:"w-full h-12 px-4 rounded-xl border-2 border-gray-100 bg-gray-50 font-bold text-gray-700 focus:border-hd-orange transition-all outline-none appearance-none",value:A,onChange:U=>k(parseInt(U.target.value)),children:v.map(U=>r.jsx("option",{value:U.id,children:U.nombre},U.id))})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1",children:"Cantidad a Ajustar"}),r.jsxs("div",{className:"relative",children:[r.jsx(ye,{type:"number",autoFocus:!0,className:"h-14 text-2xl font-black text-right pr-4 focus:ring-hd-orange border-2 rounded-xl",value:N,onChange:U=>P(U.target.value)}),r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300 font-black italic text-xl",children:"QTY"})]})]})]}),r.jsx(re,{className:"w-full h-14 bg-hd-orange hover:bg-orange-600 text-white font-black uppercase tracking-widest shadow-xl shadow-orange-500/20 rounded-xl transition-all active:scale-[0.98]",onClick:M,disabled:O||!N||N==0,children:O?r.jsx(Dn,{className:"animate-spin"}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mp,{})," REGISTRAR AJUSTE"]})})]})]})})]})},Pj=x.createContext({}),ED=({defaultValue:e,children:t,className:n=""})=>{const[a,s]=x.useState(e);return r.jsx(Pj.Provider,{value:{activeTab:a,setActiveTab:s},children:r.jsx("div",{className:`w-full ${n}`,children:t})})},AD=({children:e,className:t=""})=>r.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ${t}`,children:e}),hc=({value:e,children:t,className:n=""})=>{const{activeTab:a,setActiveTab:s}=x.useContext(Pj),o=a===e;return r.jsx("button",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 
            ${o?"bg-white text-gray-950 shadow-sm":"hover:bg-gray-200/50 hover:text-gray-900"} ${n}`,onClick:()=>s(e),children:t})},mc=({value:e,children:t,className:n=""})=>{const{activeTab:a}=x.useContext(Pj);return a!==e?null:r.jsx("div",{className:`mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 ${n}`,children:t})},Yy=({isOpen:e,onClose:t,onSave:n,title:a,fields:s})=>{const[o,l]=x.useState({});if(!e)return null;const c=()=>{n(o),l({}),t()},f=(h,u)=>{l(m=>({...m,[h]:u}))};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:a}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(It,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6 space-y-4",children:s.map(h=>r.jsx("div",{children:h.type==="select"?r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:h.label}),r.jsxs("select",{value:o[h.name]||"",onChange:u=>f(h.name,u.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",children:[r.jsx("option",{value:"",children:"Seleccionar..."}),h.options?.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))]})]}):r.jsx(ye,{label:h.label,placeholder:h.placeholder,value:o[h.name]||"",onChange:u=>f(h.name,u.target.value),type:h.type||"text"})},h.name))}),r.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t bg-gray-50",children:[r.jsx(re,{variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{onClick:c,className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})})},Go=({onClick:e})=>r.jsx("button",{type:"button",onClick:e,className:"ml-2 inline-flex items-center justify-center h-10 w-10 rounded-md border border-gray-300 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-hd-orange transition-colors",title:"Agregar nuevo",children:r.jsx(_t,{className:"h-4 w-4 text-gray-600"})}),_p="http://localhost:5006/api",go=async()=>{const e=await fetch(`${_p}/UnidadMedida/Planes`);if(!e.ok)throw new Error("Error getting plans");return e.json()},JF=async e=>{const t=await fetch(`${_p}/UnidadMedida/Planes/${e}`);if(!t.ok)throw new Error("Error getting plan");return t.json()},QF=async e=>{const t=await fetch(`${_p}/UnidadMedida/Planes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error saving plan");return t.json()},ZF=async e=>{const t=await fetch(`${_p}/UnidadMedida/Planes/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error deleting plan");return t.json()},Ua="http://localhost:5006/api",jm=async()=>{const e=await fetch(`${Ua}/Categorias`);if(!e.ok)throw new Error("Error al cargar categoras");return e.json()},ID=async e=>{const t=!!e.id,n=t?`${Ua}/Categorias/${e.id}`:`${Ua}/Categorias`,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar categora");return s.json()},eL=async e=>{const t=await fetch(`${Ua}/Categorias/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar categora");return t.ok},Xy=async()=>{const e=await fetch(`${Ua}/Marcas`);if(!e.ok)throw new Error("Error al cargar marcas");return e.json()},DD=async e=>{const t=!!e.id,n=t?`${Ua}/Marcas/${e.id}`:`${Ua}/Marcas`,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar marca");return s.json()},tL=async e=>{const t=await fetch(`${Ua}/Marcas/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar marca");return t.ok},Jy=async()=>{const e=await fetch(`${Ua}/Tipos`);if(!e.ok)throw new Error("Error al cargar tipos");return e.json()},OD=async e=>{const t=!!e.id,n=t?`${Ua}/Tipos/${e.id}`:`${Ua}/Tipos`,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar tipo");return s.json()},rL=async e=>{const t=await fetch(`${Ua}/Tipos/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar tipo");return t.ok},wm="http://localhost:5006/api",Qy=async()=>{const e=await fetch(`${wm}/GruposImpuestos`);if(!e.ok)throw new Error("Error al cargar grupos de impuestos");return e.json()},MD=async e=>{const t=!!e.id,n=t?`${wm}/GruposImpuestos/${e.id}`:`${wm}/GruposImpuestos`,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Error al guardar grupo de impuestos");return s.json()},nL=async e=>{const t=await fetch(`${wm}/GruposImpuestos/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error al eliminar grupo de impuestos");return t.ok},Nm="http://localhost:5006/api",Sm=async()=>{try{const e=await fetch(`${Nm}/GruposProducto`);if(!e.ok)throw new Error("Error fetching product groups");return await e.json()}catch(e){throw console.error("Error fetching product groups:",e),e}},TD=async e=>{try{const t=e.id?"PUT":"POST",n=e.id?`${Nm}/GruposProducto/${e.id}`:`${Nm}/GruposProducto`,a=await fetch(n,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("Error saving product group");return await a.json()}catch(t){throw console.error("Error saving product group:",t),t}},aL=async e=>{try{const t=await fetch(`${Nm}/GruposProducto/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Error deleting product group");return await t.json()}catch(t){throw console.error("Error deleting product group:",t),t}},om=({isOpen:e,onClose:t,onSave:n,title:a,type:s,initialData:o,error:l})=>{const[c,f]=x.useState({codigo:"",nombre:"",descripcion:"",activo:!0}),[h,u]=x.useState("");x.useEffect(()=>{e&&(f(o||{codigo:"",nombre:"",descripcion:"",activo:!0}),u(""))},[e,o]);const m=async p=>{p.preventDefault();try{await n(c)}catch(v){console.error(v),u(`Error al guardar ${a}`)}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[c.id?"Editar":"Nueva"," ",a]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[(h||l)&&r.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm",children:h||l}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsx(ye,{value:c.codigo,onChange:p=>f({...c,codigo:p.target.value}),placeholder:"EJ: COD-01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ye,{value:c.nombre,onChange:p=>f({...c,nombre:p.target.value}),placeholder:`Nombre de ${a}`,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),r.jsx(ye,{value:c.descripcion||"",onChange:p=>f({...c,descripcion:p.target.value}),placeholder:"Breve descripcin"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:c.activo,onChange:p=>f({...c,activo:p.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})]})}):null},RD=({isOpen:e,onClose:t,onSave:n,initialData:a,error:s})=>{const[o,l]=x.useState({codigo:"",nombre:"",direccion:"",ciudad:"",activo:!0}),[c,f]=x.useState("");x.useEffect(()=>{e&&(l(a||{codigo:"",nombre:"",direccion:"",ciudad:"",activo:!0}),f(""))},[e,a]);const h=async u=>{u.preventDefault();try{await n(o)}catch(m){console.error(m),f("Error al guardar Almacn")}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[o.id?"Editar":"Nuevo"," Almacn"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[(c||s)&&r.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm",children:c||s}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsx(ye,{value:o.codigo,onChange:u=>l({...o,codigo:u.target.value}),placeholder:"EJ: ALM-01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ye,{value:o.nombre,onChange:u=>l({...o,nombre:u.target.value}),placeholder:"Nombre del Almacn",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin"}),r.jsx(ye,{value:o.direccion||"",onChange:u=>l({...o,direccion:u.target.value}),placeholder:"Direccin fsica"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),r.jsx(ye,{value:o.ciudad||"",onChange:u=>l({...o,ciudad:u.target.value}),placeholder:"Ciudad"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:o.activo,onChange:u=>l({...o,activo:u.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})]})}):null},_D=({isOpen:e,onClose:t,onSave:n,initialData:a,error:s})=>{const[o,l]=x.useState({codigo:"",nombre:"",descripcion:"",tasa:0,activo:!0}),[c,f]=x.useState("");x.useEffect(()=>{e&&(l(a||{codigo:"",nombre:"",descripcion:"",tasa:0,activo:!0}),f(""))},[e,a]);const h=async u=>{u.preventDefault();try{await n(o)}catch(m){console.error(m),f("Error al guardar")}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[o.id?"Editar":"Nuevo"," Grupo de Impuestos"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[(c||s)&&r.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm",children:c||s}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsx(ye,{value:o.codigo,onChange:u=>l({...o,codigo:u.target.value}),placeholder:"EJ: ITBIS18",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ye,{value:o.nombre,onChange:u=>l({...o,nombre:u.target.value}),placeholder:"ITBIS 18%",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa (%)"}),r.jsx(ye,{type:"number",step:"0.01",value:o.tasa,onChange:u=>l({...o,tasa:parseFloat(u.target.value)||0}),placeholder:"18.00",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),r.jsx(ye,{value:o.descripcion||"",onChange:u=>l({...o,descripcion:u.target.value}),placeholder:"Descripcin opcional"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:o.activo,onChange:u=>l({...o,activo:u.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})]})}):null},$D=({isOpen:e,onClose:t,onSave:n,grupo:a})=>{const[s,o]=x.useState({codigo:"",nombre:"",descripcion:"",activo:!0});x.useEffect(()=>{o(a||{codigo:"",nombre:"",descripcion:"",activo:!0})},[a,e]);const l=c=>{c.preventDefault(),n(s)};return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-hd-orange p-4 flex justify-between items-center text-white",children:[r.jsx("h2",{className:"text-lg font-bold",children:a?"Editar Grupo":"Nuevo Grupo"}),r.jsx("button",{onClick:t,className:"hover:bg-orange-700 p-1 rounded transition-colors",children:r.jsx(It,{size:20})})]}),r.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Cdigo"}),r.jsx(ye,{placeholder:"Ej: PROF",value:s.codigo,onChange:c=>o({...s,codigo:c.target.value.toUpperCase()}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Nombre"}),r.jsx(ye,{placeholder:"Ej: Profesional",value:s.nombre,onChange:c=>o({...s,nombre:c.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Descripcin"}),r.jsx(ye,{placeholder:"Opcional...",value:s.descripcion||"",onChange:c=>o({...s,descripcion:c.target.value})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Activo"}),r.jsx("input",{type:"checkbox",checked:s.activo,onChange:c=>o({...s,activo:c.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"})]}),r.jsxs("div",{className:"pt-4 flex justify-end space-x-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),r.jsx(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-700 text-white shadow-lg",children:a?"Actualizar":"Guardar"})]})]})]})}):null},UC=()=>{const e=Tt(),{id:t}=Ts(),n=!!t,[a,s]=x.useState(""),[o,l]=x.useState(""),[c,f]=x.useState(""),[h,u]=x.useState("UND"),[m,p]=x.useState(""),[v,j]=x.useState(""),[y,b]=x.useState(""),[N,P]=x.useState(""),[A,k]=x.useState(""),[I,E]=x.useState(""),[O,C]=x.useState(""),[M,F]=x.useState(""),[V,T]=x.useState(""),[L,U]=x.useState(""),[J,q]=x.useState([]),[W,z]=x.useState([]),[K,B]=x.useState({id:"",nombre:"",costo:"",referencia:""});x.useEffect(()=>{},[]);const[R,H]=x.useState("Promedio"),[Y,ee]=x.useState(""),[me,De]=x.useState(""),[Se,We]=x.useState([]),[pe,ue]=x.useState(""),[ke,se]=x.useState(""),[fe,Te]=x.useState([]),[Re,Ie]=x.useState(""),[Qe,Xe]=x.useState(!1),[tt,Q]=x.useState([{id:1,codigo:"MAT-001",descripcion:"Cemento Portland Tipo I, 42.5 kg",cantidad:8.5,unidad:"SACO",desperdicio:3,precio:285},{id:2,codigo:"MAT-002",descripcion:"Arena gruesa lavada, puesto en obra",cantidad:.52,unidad:"M3",desperdicio:5,precio:450},{id:3,codigo:"MAT-003",descripcion:'Grava triturada 3/4", puesto en obra',cantidad:.73,unidad:"M3",desperdicio:5,precio:520}]),_=async()=>{if(!Si||!a){alert("Por favor complete los campos obligatorios (Nmero de Artculo, Descripcin)");return}const xe={NumeroArticulo:Si,CodigoBarras:o,Descripcion:a,GrupoProducto:ld,Categoria:c,Marca:m,Tipo:v,UnidadMedida:h,AlmacenPrincipal:od,UbicacionAlmacen:y,GrupoImpuesto:Pf,MargenPorcentaje:parseFloat(N)||0,CostoUnitario:parseFloat(A)||0,PrecioUnitario:parseFloat(I)||0,NivelPrecio:O,StockSeguridad:parseFloat(M)||0,PuntoPedido:parseFloat(V)||0,ProveedorPrincipal:L,Proveedores:J,Bloqueado:!1,MetodoCosteo:R,CostoEstandar:parseFloat(Y)||0,PlanMedida:pe,ImagenUrl:Re};try{if(n){await zF(parseInt(t),{...xe,Id:parseInt(t)});const ie=document.getElementById("header-message");ie&&(ie.innerHTML='<div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-2 rounded flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Artculo actualizado correctamente</div>',setTimeout(()=>ie.innerHTML="",3e3))}else{await LF(xe);const ie=document.getElementById("header-message");ie&&(ie.innerHTML='<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Artculo guardado correctamente</div>',setTimeout(()=>ie.innerHTML="",3e3))}}catch(ie){console.error("Error saving Article:",ie),alert("Error al guardar el artculo: "+ie.message)}},[X,ne]=x.useState([{id:1,codigo:"EQ-101",descripcion:"Mezcladora de concreto 9 p3 (7HP)",cantidad:1,unidad:"HM",rendimiento:.25,costoHora:185},{id:2,codigo:"EQ-102",descripcion:"Vibrador de concreto 4HP gasolina",cantidad:1,unidad:"HM",rendimiento:.2,costoHora:95}]),[ae,ge]=x.useState([{id:1,codigo:"MO-201",descripcion:"Oficial albail especializado",cantidad:1,unidad:"HH",salario:225},{id:2,codigo:"MO-202",descripcion:"Operario (fierrero)",cantidad:.5,unidad:"HH",salario:195},{id:3,codigo:"MO-203",descripcion:"Pen / Ayudante general",cantidad:2,unidad:"HH",salario:165}]),[be,Fe]=x.useState({cargasSociales:85,seguros:12,herramientas:8,financiamiento:3,imprevistos:5,utilidad:15}),[ve,qe]=x.useState([{concepto:"Supervisin tcnica",monto:285},{concepto:"Personal administrativo obra",monto:165},{concepto:"Instalaciones temporales",monto:125},{concepto:"Servicios (agua, luz temporal)",monto:95},{concepto:"Seguridad y vigilancia",monto:85}]),[Z,le]=x.useState([{concepto:"Direccin y gerencia",monto:425},{concepto:"Contabilidad y finanzas",monto:195},{concepto:"Alquiler oficina central",monto:285},{concepto:"Servicios bsicos oficina",monto:125},{concepto:"Depreciacin equipos",monto:95}]),Ce=xe=>xe.cantidad*xe.precio*(1+xe.desperdicio/100),Oe=tt.reduce((xe,ie)=>xe+Ce(ie),0),Le=xe=>xe.cantidad*xe.rendimiento*xe.costoHora,Ye=X.reduce((xe,ie)=>xe+Le(ie),0),Ze=ae.reduce((xe,ie)=>xe+ie.cantidad*ie.salario,0),Ot=Ze*(be.cargasSociales/100),dt=Ze*(be.seguros/100),Lt=Ze*(be.herramientas/100),br=Ze+Ot+dt+Lt,Xt=Oe+Ye+br,Ur=ve.reduce((xe,ie)=>xe+ie.monto,0),At=Z.reduce((xe,ie)=>xe+ie.monto,0),na=Ur+At,wa=Xt+na,xi=wa*(be.financiamiento/100),vi=wa*(be.imprevistos/100),_s=wa+xi+vi,yi=_s*(be.utilidad/100),Ga=_s+yi,oe=()=>{const xe=Math.max(...tt.map(ie=>ie.id),0)+1;Q([...tt,{id:xe,codigo:`MAT-${String(xe).padStart(3,"0")}`,descripcion:"",cantidad:0,unidad:"UND",desperdicio:0,precio:0}])},Ae=xe=>{Q(tt.filter(ie=>ie.id!==xe))},we=(xe,ie,yt)=>{Q(tt.map(jt=>jt.id===xe?{...jt,[ie]:yt}:jt))},$e=()=>{const xe=Math.max(...X.map(ie=>ie.id),0)+1;ne([...X,{id:xe,codigo:`EQ-${String(xe).padStart(3,"0")}`,descripcion:"",cantidad:0,unidad:"HM",rendimiento:0,costoHora:0}])},xt=xe=>{ne(X.filter(ie=>ie.id!==xe))},Je=(xe,ie,yt)=>{ne(X.map(jt=>jt.id===xe?{...jt,[ie]:yt}:jt))},Et=()=>{const xe=Math.max(...ae.map(ie=>ie.id),0)+1;ge([...ae,{id:xe,codigo:`MO-${String(xe).padStart(3,"0")}`,descripcion:"",cantidad:0,unidad:"HH",salario:0}])},ht=xe=>{ge(ae.filter(ie=>ie.id!==xe))},Kt=(xe,ie,yt)=>{ge(ae.map(jt=>jt.id===xe?{...jt,[ie]:yt}:jt))},[Zt,Bn]=x.useState(!1),[bi,jf]=x.useState(!1),[Vg,kl]=x.useState(!1),[wf,Pl]=x.useState(!1),[Nf,ad]=x.useState(!1),[qg,lr]=x.useState(!1),[Gg,ji]=x.useState(!1),[Sf,Co]=x.useState(!1),[sd,Cf]=x.useState(!0),[ko,Na]=x.useState(!0),[Hg,Vn]=x.useState([]),[Wg,kf]=x.useState([]),[Pf,Po]=x.useState(""),[El,Eo]=x.useState([]),[Al,Ef]=x.useState([]),[Kg,Il]=x.useState([]),[od,wi]=x.useState(""),[Ni,id]=x.useState(["Sin Grupo"]),[Si,Rt]=x.useState(""),[ld,Ci]=x.useState("Sin Grupo"),[cd,Af]=x.useState([]);x.useEffect(()=>{(async()=>{try{const ie=await go();We(ie);const[yt,jt,On,xs,Ao,Mf,Dl]=await Promise.all([jm(),Xy(),Jy(),za(),Qy(),kc(),Sm()]);Vn(yt),Eo(jt),Ef(On),Il(xs),kf(Ao),ki(Mf.map(rr=>rr.nombre));const vs=(Dl||[]).map(rr=>rr.nombre);vs.includes("Sin Grupo")||vs.unshift("Sin Grupo"),id(vs);let Sa={};try{Sa=await PD()}catch(rr){console.error("Error loading config",rr)}if(Sa.planDefecto){ue(Sa.planDefecto);const rr=ie.find(qn=>qn.planId===Sa.planDefecto);rr&&(se(rr.unidadBase),u(Sa.unidadMedidaDefecto||rr.unidadBase))}const $s=await kj();Af($s);const Ha=$s.filter(rr=>rr.activo),Ii=Ha.map(rr=>rr.grupo);if(Ii.includes("Sin Grupo")||Ii.unshift("Sin Grupo"),id(Ii),!n){const rr=Ha.find(qn=>qn.esDefecto);if(rr){if(Ci(rr.grupo),rr.planDefecto){ue(rr.planDefecto);const qn=ie.find(Ml=>Ml.planId===rr.planDefecto);qn&&(se(qn.unidadBase),u(rr.unidadMedidaDefecto||qn.unidadBase))}if(rr.grupo&&rr.grupo!=="Sin Grupo")try{const qn=await LC(rr.grupo);Rt(qn.numeroArticulo)}catch(qn){console.error(qn)}else Rt("(Auto)")}}}catch(ie){console.error("Error loading initial data:",ie)}})()},[]),x.useEffect(()=>{if(!n)return;(async()=>{try{const ie=await SD(t);Rt(ie.numeroArticulo||ie.NumeroArticulo),l(ie.codigoBarras||ie.CodigoBarras||""),s(ie.descripcion||ie.Descripcion),Ci(ie.grupoProducto||ie.GrupoProducto||"Sin Grupo"),f(ie.categoria||ie.Categoria||""),p(ie.marca||ie.Marca||""),j(ie.tipo||ie.Tipo||""),u(ie.unidadMedida||ie.UnidadMedida||"UND"),wi(ie.almacenPrincipal||ie.AlmacenPrincipal||""),b(ie.ubicacionAlmacen||ie.UbicacionAlmacen||""),Po(ie.grupoImpuesto||ie.GrupoImpuesto||"");const yt=ie.margenPorcentaje??ie.MargenPorcentaje;P(yt?.toString()||"");const jt=ie.costoUnitario??ie.CostoUnitario;k(jt?.toString()||"");const On=ie.precioUnitario??ie.PrecioUnitario;E(On?.toString()||""),C(ie.nivelPrecio||ie.NivelPrecio||"");const xs=ie.stockSeguridad??ie.StockSeguridad;F(xs?.toString()||"");const Ao=ie.puntoPedido??ie.PuntoPedido;T(Ao?.toString()||""),U(ie.proveedorPrincipal||ie.ProveedorPrincipal||""),q(ie.Proveedores||ie.proveedores||[]),H(ie.metodoCosteo||ie.MetodoCosteo||"Promedio");const Dl=(ie.costoEstandar??ie.CostoEstandar)?.toString()||"",Ol=jt?.toString()||"";ee(Dl);const vs=ie.metodoCosteo||ie.MetodoCosteo||"Promedio";De(vs==="Estndar"?Dl:Ol);const Sa=ie.planMedida||ie.PlanMedida;Sa&&ue(Sa);try{const $s=await CD(t);Te($s),Ie(ie.imagenUrl||ie.ImagenUrl||"")}catch($s){console.error("Could not load prices:",$s)}}catch(ie){console.error("Error loading article for edit:",ie),alert("Error al cargar el artculo para editar")}})()},[t,n]);const dd=async xe=>{if(!xe||xe==="Sin Grupo"){Rt("(Auto)");return}try{const ie=await LC(xe);Rt(ie.numeroArticulo)}catch(ie){console.error("Error generating article number:",ie),Rt("(Error al generar)")}},If=xe=>{const ie=xe.target.value;Ci(ie),n||dd(ie);const yt=cd.find(jt=>jt.grupo===ie);if(yt&&yt.planDefecto){ue(yt.planDefecto);const jt=Se.find(On=>On.planId===yt.planDefecto);jt&&(se(jt.unidadBase),u(yt.unidadMedidaDefecto||jt.unidadBase))}},[ud,ki]=x.useState([]),hs=async xe=>{try{await ID(xe);const ie=await jm();Vn(ie),f(xe.nombre),Bn(!1)}catch(ie){console.error(ie),alert("Error al guardar categora")}},ms=xe=>{console.log("Saving new unit:",xe)},ps=async xe=>{try{await kD(xe);const ie=await za();Il(ie),wi(xe.nombre),kl(!1)}catch(ie){console.error(ie),alert("Error al guardar almacn")}},Pi=async xe=>{try{await MD(xe);const ie=await Qy();kf(ie),Po(xe.codigo),Pl(!1)}catch(ie){console.error(ie),alert("Error al guardar impuesto")}},Ei=async xe=>{try{await DD(xe);const ie=await Xy();Eo(ie),p(xe.nombre),ad(!1)}catch(ie){console.error(ie),alert("Error al guardar marca")}},gs=async xe=>{try{await OD(xe);const ie=await Jy();Ef(ie),j(xe.nombre),lr(!1)}catch(ie){console.error(ie),alert("Error al guardar tipo")}},Yg=async xe=>{try{await TD(xe);const yt=(await Sm()).map(jt=>jt.nombre);yt.includes("Sin Grupo")||yt.unshift("Sin Grupo"),id(yt),Ci(xe.nombre),ji(!1),n||dd(xe.nombre)}catch(ie){console.error(ie),alert("Error al guardar grupo de producto")}},Df=async xe=>{try{await Sj(xe);const ie=await kc();ki(ie.map(yt=>yt.nombre)),C(xe.nombre),Co(!1)}catch(ie){console.error(ie),alert("Error al guardar nivel de precio")}},Ai=async xe=>{const ie=xe.target.files[0];if(ie){Xe(!0);try{const yt=await GF(ie);Ie(yt.url)}catch(yt){console.error("Error uploading image:",yt),alert("Error al subir la imagen: "+yt.message)}finally{Xe(!1)}}},Xg=()=>{Ie("")},Of="http://localhost:5006/api".replace("/api","")||"http://localhost:5006";return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/productos"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Artculo":"Maestro de Artculos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Creacin y configuracin de productos"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"outline",children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:_,children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar Producto"]})]})]}),r.jsx("div",{id:"header-message"}),r.jsxs(ED,{defaultValue:"general",className:"w-full",children:[r.jsxs(AD,{className:"mb-4",children:[r.jsx(hc,{value:"general",children:"Informacin General"}),r.jsx(hc,{value:"costos",children:"Estructura de Costos"})]}),r.jsx(mc,{value:"general",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"md:col-span-3 space-y-6",children:[r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Generales"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(ye,{label:r.jsxs("span",{children:["No. Artculo ",r.jsx("span",{className:"text-red-500",children:"*"})]}),value:Si||"(Auto)",disabled:!0,title:"Nmero nico de identificacin del artculo. Generado automticamente segn el grupo de producto."}),r.jsx(ye,{label:"Cdigo de Barras",placeholder:"",title:"Cdigo EAN/UPC para escaneo en caja."}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Grupo de producto segn clasificacin comercial.",children:"Grupo de Producto"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("select",{value:ld,onChange:If,className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Grupo de producto segn clasificacin comercial. El nmero de artculo se generar automticamente segn la configuracin del grupo.",children:Ni.map((xe,ie)=>r.jsx("option",{value:xe,children:xe},ie))}),r.jsx(Go,{onClick:()=>ji(!0)})]})]})]}),r.jsx(ye,{label:r.jsxs("span",{children:["Descripcin ",r.jsx("span",{className:"text-red-500",children:"*"})]}),value:a,onChange:xe=>s(xe.target.value),placeholder:"Descripcin del artculo...",title:"Nombre comercial o descripcin detallada del producto tal como aparecer en la factura."}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Agrupacin lgica para reportes y bsquedas.",children:"Categora Artculo"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:c,onChange:xe=>f(xe.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Agrupacin lgica para reportes y bsquedas.",children:[r.jsx("option",{value:"",children:"Seleccione Categora"}),Hg.map((xe,ie)=>r.jsx("option",{value:xe.nombre,children:xe.nombre},ie))]}),r.jsx(Go,{onClick:()=>Bn(!0)})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Marca del fabricante del producto.",children:"Marca"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:m,onChange:xe=>p(xe.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Marca del fabricante del producto.",children:[r.jsx("option",{value:"",children:"Seleccione Marca"}),El.map((xe,ie)=>r.jsx("option",{value:xe.nombre,children:xe.nombre},ie))]}),r.jsx(Go,{onClick:()=>ad(!0)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Tipo de producto segn su funcionamiento.",children:"Tipo"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:v,onChange:xe=>j(xe.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Tipo de producto segn su funcionamiento.",children:[r.jsx("option",{value:"",children:"Seleccione Tipo"}),Al.map((xe,ie)=>r.jsx("option",{value:xe.nombre,children:xe.nombre},ie))]}),r.jsx(Go,{onClick:()=>lr(!0)})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Ubicacin fsica donde se almacena el artculo.",children:"Almacn"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:od,onChange:xe=>wi(xe.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Ubicacin fsica donde se almacena el artculo.",children:[r.jsx("option",{value:"",children:"Seleccione Almacn"}),Kg.map((xe,ie)=>r.jsx("option",{value:xe.nombre,children:xe.nombre},ie))]}),r.jsx(Go,{onClick:()=>kl(!0)})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Ubicacin especfica dentro del almacn (pasillo, estante, nivel).",children:"Ubicacin en Almacn"}),r.jsx(ye,{value:y,onChange:xe=>b(xe.target.value),placeholder:"Ej: A-12-3",title:"Cdigo de ubicacin fsica: Pasillo-Estante-Nivel"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Grupo de impuestos aplicable al producto.",children:"Grupo Impto. Prod."}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:Pf,onChange:xe=>Po(xe.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Grupo de impuestos aplicable al producto.",children:[r.jsx("option",{value:"",children:"Seleccione Impuesto"}),Wg.map((xe,ie)=>r.jsx("option",{value:xe.codigo,children:xe.nombre},ie))]}),r.jsx(Go,{onClick:()=>Pl(!0)})]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsx("div",{children:r.jsx(ye,{label:"Margen %",type:"number",placeholder:"0.00",step:"0.01",title:"Porcentaje de margen de ganancia sobre el costo (estilo SalePad)"})})})]})]}),r.jsxs(Be,{children:[r.jsx(gt,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>Cf(!sd),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(vt,{children:"Facturacin"}),sd?r.jsx(Nr,{className:"h-5 w-5 text-gray-500"}):r.jsx(ar,{className:"h-5 w-5 text-gray-500"})]})}),sd&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Plan de Unidad de Medida que define la unidad base y conversiones.",children:"Plan de U. de M."}),r.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",value:pe,onChange:xe=>{const ie=xe.target.value;ue(ie);const yt=Se.find(jt=>jt.planId===ie);yt?(se(yt.unidadBase),u(yt.unidadBase)):se("")},children:[r.jsx("option",{value:"",children:"Seleccione Plan"}),Se.map((xe,ie)=>r.jsxs("option",{value:xe.planId,children:[xe.planId," - ",xe.descripcion]},ie))]})}),ke&&r.jsxs("div",{className:"flex items-center space-x-4 mt-2 px-1",children:[r.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:["Unidad Base: ",ke]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"U.M. Def:"}),r.jsx("select",{className:"h-6 text-xs rounded border-gray-300 bg-white px-1 py-0 focus:ring-hd-orange",value:h,onChange:xe=>{const ie=xe.target.value;if(u(ie),O){const yt=fe.find(jt=>jt.nivelPrecio===O&&jt.unidadMedida===ie);yt&&E(yt.precio.toFixed(2))}},children:(()=>{const xe=Se.find(yt=>yt.planId===pe);let ie=xe?[xe.unidadBase,...xe.detalles?xe.detalles.map(yt=>yt.unidadMedida):[]]:[ke];if(ie=[...new Set(ie)],O&&fe&&fe.length>0){const yt=fe.filter(jt=>(jt.nivelPrecio||jt.NivelPrecio)===O).map(jt=>jt.unidadMedida||jt.UnidadMedida);yt.length>0&&(ie=ie.filter(jt=>yt.includes(jt)))}return ie.map((yt,jt)=>r.jsx("option",{value:yt,children:yt},jt))})()})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Determina cmo se valora el inventario al salir.",children:"Mtodo de Costeo"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Determina cmo se valora el inventario al salir.",value:R,onChange:xe=>{const ie=xe.target.value;H(ie),De(ie==="Estndar"?Y:A)},children:[r.jsx("option",{value:"Promedio",children:"Promedio"}),r.jsx("option",{value:"Estndar",children:"Estndar"}),r.jsx("option",{value:"FIFO",children:"FIFO"}),r.jsx("option",{value:"LIFO",children:"LIFO"})]})]}),r.jsx(ye,{label:"Costo Unitario",type:"number",placeholder:"0.00",title:"Costo directo de adquisicin o produccin por unidad.",value:me,onChange:xe=>{const ie=xe.target.value;if(De(ie),R==="Estndar"?ee(ie):k(ie),N&&ie){const yt=parseFloat(ie),jt=parseFloat(N),On=yt*(1+jt/100);E(On.toFixed(2))}}}),r.jsx(ye,{label:"Margen %",type:"number",placeholder:"0.00",title:"Porcentaje de ganancia sobre el costo.",value:N,onChange:xe=>{const ie=xe.target.value;if(P(ie),me&&ie){const yt=parseFloat(me),jt=parseFloat(ie),On=yt*(1+jt/100);E(On.toFixed(2))}}})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Nivel de precio asignado para venta rpida.",children:"Nivel de Precio"}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("select",{value:O,onChange:xe=>{const ie=xe.target.value;C(ie);const yt=fe.find(jt=>jt.nivelPrecio===ie&&jt.unidadMedida===h);yt&&E(yt.precio.toFixed(2))},className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Nivel de precio asignado para venta rpida.",children:[r.jsx("option",{value:"",children:"Seleccione Nivel"}),ud.map((xe,ie)=>r.jsx("option",{value:xe,children:xe},ie))]}),r.jsx(Go,{onClick:()=>Co(!0)})]})]}),r.jsx(ye,{label:"Precio Unitario",type:"number",placeholder:"0.00",className:"font-bold text-green-700",title:"Precio de venta al pblico antes de descuentos.",value:I,onChange:xe=>E(xe.target.value)}),r.jsx("div",{})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Configuracin de impuestos aplicables al vender este artculo.",children:"Grupo Impto. Prod."}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Configuracin de impuestos aplicables al vender este artculo.",children:[r.jsx("option",{children:"ITBIS 18%"}),r.jsx("option",{children:"EXENTO"})]})]}),r.jsx("div",{className:"text-xs text-gray-500 pt-8 italic",children:"* El precio unitario incluye impuestos segn grupo."})]})]})]}),r.jsxs(Be,{children:[r.jsx(gt,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>Na(!ko),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(vt,{children:"Reposicin"}),ko?r.jsx(Nr,{className:"h-5 w-5 text-gray-500"}):r.jsx(ar,{className:"h-5 w-5 text-gray-500"})]})}),ko&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",title:"Cmo se reabastece este artculo habitualmente.",children:"Sistema Reposicin"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",title:"Cmo se reabastece este artculo habitualmente.",children:[r.jsx("option",{children:"Compra"}),r.jsx("option",{children:"Prod. Orden"})]})]}),r.jsx(ye,{label:"Stock Seguridad",type:"number",placeholder:"0",title:"Cantidad mnima a mantener para evitar quiebres de stock."}),r.jsx(ye,{label:"Punto de Pedido",type:"number",placeholder:"0",title:"Nivel de inventario que dispara una alerta de reorden."})]}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.jsx(ye,{label:"Proveedor Principal",placeholder:"Seleccionar...",title:"Proveedor predeterminado para generar rdenes de compra."})})]})]})]}),r.jsx("div",{className:"md:col-span-1 space-y-6",children:r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Imagen del Producto"})}),r.jsxs("div",{className:"p-6 flex flex-col items-center justify-center space-y-4",children:[r.jsxs("div",{className:`relative w-full aspect-square bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden transition-colors ${!Re&&"hover:bg-gray-50 cursor-pointer"}`,onClick:()=>!Re&&document.getElementById("imageInput").click(),children:[Re?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:`${Of}${Re}`,alt:"Producto",className:"w-full h-full object-cover"}),r.jsx("button",{onClick:xe=>{xe.stopPropagation(),Xg()},className:"absolute top-2 right-2 p-1 bg-white rounded-full shadow-md text-red-500 hover:bg-red-50 transition-colors",children:r.jsx(It,{className:"h-4 w-4"})})]}):r.jsx("div",{className:"text-center p-4",children:Qe?r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-hd-orange mx-auto"}):r.jsxs(r.Fragment,{children:[r.jsx(wD,{className:"mx-auto h-8 w-8 text-gray-400"}),r.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-600",children:"Subir foto"})]})}),r.jsx("input",{type:"file",id:"imageInput",className:"hidden",accept:"image/*",onChange:Ai})]}),r.jsx("div",{className:"w-full text-xs text-center text-gray-500 italic",children:"Formatos soportados: JPG, PNG. Mx 5MB."})]})]})})]})}),r.jsx(mc,{value:"costos",children:r.jsxs(Be,{children:[r.jsxs(gt,{children:[r.jsx(vt,{children:"Anlisis de Precios Unitarios (APU)"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Sistema de costeo basado en estndares de construccin y manufactura. Incluye costos directos, indirectos, y clculo de precio final."})]}),r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"border-2 border-orange-300 rounded-lg p-4 bg-orange-50/30",children:[r.jsxs("h2",{className:"text-xl font-bold text-orange-800 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"bg-orange-600 text-white px-3 py-1 rounded",children:"A"}),"COSTOS DIRECTOS"]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b-2 border-orange-200 inline-block",children:"1. MATERIALES"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Insumos que se incorporan fsicamente al producto final"})]}),r.jsxs(re,{onClick:oe,size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Agregar Material"]})]}),r.jsx("div",{className:"border rounded-sm overflow-hidden bg-white",children:r.jsxs(zt,{className:"border-0",children:[r.jsx(Ut,{children:r.jsxs(Me,{className:"bg-orange-100/70",children:[r.jsx(ce,{className:"w-24",children:"Cdigo"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{className:"w-24 text-right",children:"Cantidad"}),r.jsx(ce,{className:"w-20 text-center",children:"Unidad"}),r.jsx(ce,{className:"w-20 text-right",children:"Desp %"}),r.jsx(ce,{className:"w-28 text-right",children:"Precio Unit."}),r.jsx(ce,{className:"w-28 text-right",children:"Total"}),r.jsx(ce,{className:"w-16"})]})}),r.jsxs(Bt,{children:[tt.map(xe=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:r.jsx("input",{type:"text",value:xe.codigo,onChange:ie=>we(xe.id,"codigo",ie.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(G,{children:r.jsx("input",{type:"text",value:xe.descripcion,onChange:ie=>we(xe.id,"descripcion",ie.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",placeholder:"Descripcin del material..."})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.cantidad,onChange:ie=>we(xe.id,"cantidad",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(G,{className:"text-center",children:r.jsx("input",{type:"text",value:xe.unidad,onChange:ie=>we(xe.id,"unidad",ie.target.value),className:"w-full px-2 py-1 text-sm text-center border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.desperdicio,onChange:ie=>we(xe.id,"desperdicio",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.1"})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.precio,onChange:ie=>we(xe.id,"precio",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsxs(G,{className:"text-right font-medium",children:["$",Ce(xe).toFixed(2)]}),r.jsx(G,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>Ae(xe.id),className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600",children:r.jsx(Qt,{className:"h-4 w-4"})})})]},xe.id)),r.jsxs(Me,{className:"bg-orange-50 font-bold border-t-2 border-orange-300",children:[r.jsx(G,{colSpan:6,className:"text-right pr-4",children:"Subtotal Materiales (A1)"}),r.jsxs(G,{className:"text-right text-orange-700 text-lg",children:["$",Oe.toFixed(2)]}),r.jsx(G,{})]})]})]})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b-2 border-blue-200 inline-block",children:"2. EQUIPOS Y HERRAMIENTAS"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maquinaria y equipos necesarios para la ejecucin"})]}),r.jsxs(re,{onClick:$e,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Agregar Equipo"]})]}),r.jsx("div",{className:"border rounded-sm overflow-hidden bg-white",children:r.jsxs(zt,{className:"border-0",children:[r.jsx(Ut,{children:r.jsxs(Me,{className:"bg-blue-100/70",children:[r.jsx(ce,{className:"w-24",children:"Cdigo"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{className:"w-24 text-right",children:"Cantidad"}),r.jsx(ce,{className:"w-20 text-center",children:"Unidad"}),r.jsx(ce,{className:"w-24 text-right",children:"Rendimiento"}),r.jsx(ce,{className:"w-28 text-right",children:"Costo/Hora"}),r.jsx(ce,{className:"w-28 text-right",children:"Total"}),r.jsx(ce,{className:"w-16"})]})}),r.jsxs(Bt,{children:[X.map(xe=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:r.jsx("input",{type:"text",value:xe.codigo,onChange:ie=>Je(xe.id,"codigo",ie.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(G,{children:r.jsx("input",{type:"text",value:xe.descripcion,onChange:ie=>Je(xe.id,"descripcion",ie.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",placeholder:"Descripcin del equipo..."})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.cantidad,onChange:ie=>Je(xe.id,"cantidad",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(G,{className:"text-center",children:r.jsx("input",{type:"text",value:xe.unidad,onChange:ie=>Je(xe.id,"unidad",ie.target.value),className:"w-full px-2 py-1 text-sm text-center border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.rendimiento,onChange:ie=>Je(xe.id,"rendimiento",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.costoHora,onChange:ie=>Je(xe.id,"costoHora",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsxs(G,{className:"text-right font-medium",children:["$",Le(xe).toFixed(2)]}),r.jsx(G,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>xt(xe.id),className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600",children:r.jsx(Qt,{className:"h-4 w-4"})})})]},xe.id)),r.jsxs(Me,{className:"bg-blue-50 font-bold border-t-2 border-blue-300",children:[r.jsx(G,{colSpan:6,className:"text-right pr-4",children:"Subtotal Equipos (A2)"}),r.jsxs(G,{className:"text-right text-blue-700 text-lg",children:["$",Ye.toFixed(2)]}),r.jsx(G,{})]})]})]})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 border-b-2 border-green-200 inline-block",children:"3. MANO DE OBRA DIRECTA"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Personal que ejecuta directamente la actividad productiva"})]}),r.jsxs(re,{onClick:Et,size:"sm",className:"bg-green-600 hover:bg-green-700",children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Agregar Trabajador"]})]}),r.jsx("div",{className:"border rounded-sm overflow-hidden bg-white",children:r.jsxs(zt,{className:"border-0",children:[r.jsx(Ut,{children:r.jsxs(Me,{className:"bg-green-100/70",children:[r.jsx(ce,{className:"w-24",children:"Cdigo"}),r.jsx(ce,{children:"Descripcin / Categora"}),r.jsx(ce,{className:"w-24 text-right",children:"Cantidad"}),r.jsx(ce,{className:"w-20 text-center",children:"Unidad"}),r.jsx(ce,{className:"w-28 text-right",children:"Salario Base"}),r.jsx(ce,{className:"w-28 text-right",children:"Subtotal"}),r.jsx(ce,{className:"w-16"})]})}),r.jsxs(Bt,{children:[ae.map(xe=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:r.jsx("input",{type:"text",value:xe.codigo,onChange:ie=>Kt(xe.id,"codigo",ie.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(G,{children:r.jsx("input",{type:"text",value:xe.descripcion,onChange:ie=>Kt(xe.id,"descripcion",ie.target.value),className:"w-full px-2 py-1 text-sm border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",placeholder:"Categora del trabajador..."})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.cantidad,onChange:ie=>Kt(xe.id,"cantidad",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsx(G,{className:"text-center",children:r.jsx("input",{type:"text",value:xe.unidad,onChange:ie=>Kt(xe.id,"unidad",ie.target.value),className:"w-full px-2 py-1 text-sm text-center border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded"})}),r.jsx(G,{className:"text-right",children:r.jsx("input",{type:"number",value:xe.salario,onChange:ie=>Kt(xe.id,"salario",parseFloat(ie.target.value)||0),className:"w-full px-2 py-1 text-sm text-right border-0 bg-transparent focus:bg-white focus:ring-1 focus:ring-hd-orange rounded",step:"0.01"})}),r.jsxs(G,{className:"text-right font-medium",children:["$",(xe.cantidad*xe.salario).toFixed(2)]}),r.jsx(G,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>ht(xe.id),className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600",children:r.jsx(Qt,{className:"h-4 w-4"})})})]},xe.id)),r.jsxs(Me,{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[r.jsx(G,{colSpan:5,className:"text-right pr-4 text-sm",children:"Subtotal Salarios Base"}),r.jsxs(G,{className:"text-right",children:["$",Ze.toFixed(2)]}),r.jsx(G,{})]}),r.jsxs(Me,{className:"bg-green-50/50",children:[r.jsxs(G,{colSpan:5,className:"text-right pr-4 text-sm",children:["+ Cargas Sociales y Prestaciones (",be.cargasSociales,"%)*"]}),r.jsxs(G,{className:"text-right text-gray-700",children:["$",Ot.toFixed(2)]}),r.jsx(G,{})]}),r.jsxs(Me,{className:"bg-green-50/50",children:[r.jsxs(G,{colSpan:5,className:"text-right pr-4 text-sm",children:["+ Seguros y Riesgos Laborales (",be.seguros,"%)"]}),r.jsxs(G,{className:"text-right text-gray-700",children:["$",dt.toFixed(2)]}),r.jsx(G,{})]}),r.jsxs(Me,{className:"bg-green-50/50 border-b-2 border-green-300",children:[r.jsxs(G,{colSpan:5,className:"text-right pr-4 text-sm",children:["+ Herramientas y EPP (",be.herramientas,"%)"]}),r.jsxs(G,{className:"text-right text-gray-700",children:["$",Lt.toFixed(2)]}),r.jsx(G,{})]}),r.jsxs(Me,{className:"bg-green-100 font-bold",children:[r.jsxs(G,{colSpan:5,className:"text-right pr-4",children:["Subtotal Mano de Obra (A3)",r.jsx("span",{className:"block text-xs font-normal text-gray-500",children:"*Incluye: vacaciones, aguinaldo, cesanta, seguro social"})]}),r.jsxs(G,{className:"text-right text-green-700 text-lg",children:["$",br.toFixed(2)]}),r.jsx(G,{})]})]})]})})]}),r.jsxs("div",{className:"bg-orange-100 border-2 border-orange-400 rounded p-3 flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL COSTOS DIRECTOS (A = A1 + A2 + A3)"}),r.jsxs("span",{className:"text-2xl font-bold text-orange-700",children:["$",Xt.toFixed(2)]})]})]}),r.jsxs("div",{className:"border-2 border-purple-300 rounded-lg p-4 bg-purple-50/30",children:[r.jsxs("h2",{className:"text-xl font-bold text-purple-800 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"bg-purple-600 text-white px-3 py-1 rounded",children:"B"}),"COSTOS INDIRECTOS"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[r.jsx("h3",{className:"font-bold text-purple-700 mb-3 border-b pb-2",children:"B1. Indirectos de Campo"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Supervisin tcnica"}),r.jsx("span",{className:"font-medium",children:"$285.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Personal administrativo obra"}),r.jsx("span",{className:"font-medium",children:"$165.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Instalaciones temporales"}),r.jsx("span",{className:"font-medium",children:"$125.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Servicios (agua, luz temporal)"}),r.jsx("span",{className:"font-medium",children:"$95.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Seguridad y vigilancia"}),r.jsx("span",{className:"font-medium",children:"$85.00"})]}),r.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold text-purple-700",children:[r.jsx("span",{children:"Subtotal Campo (B1)"}),r.jsx("span",{children:"$755.00"})]})]})]}),r.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[r.jsx("h3",{className:"font-bold text-purple-700 mb-3 border-b pb-2",children:"B2. Indirectos de Oficina Central"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Direccin y gerencia"}),r.jsx("span",{className:"font-medium",children:"$425.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Contabilidad y finanzas"}),r.jsx("span",{className:"font-medium",children:"$195.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Alquiler oficina central"}),r.jsx("span",{className:"font-medium",children:"$285.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Servicios bsicos oficina"}),r.jsx("span",{className:"font-medium",children:"$125.00"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" Depreciacin equipos"}),r.jsx("span",{className:"font-medium",children:"$95.00"})]}),r.jsxs("div",{className:"flex justify-between border-t pt-2 font-bold text-purple-700",children:[r.jsx("span",{children:"Subtotal Oficina (B2)"}),r.jsx("span",{children:"$1,125.00"})]})]})]})]}),r.jsxs("div",{className:"bg-purple-100 border-2 border-purple-400 rounded p-3 flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL COSTOS INDIRECTOS (B = B1 + B2)"}),r.jsx("span",{className:"text-2xl font-bold text-purple-700",children:"$1,880.00"})]})]}),r.jsxs("div",{className:"border-2 border-gray-400 rounded-lg p-6 bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6 text-center border-b-2 pb-3",children:"CLCULO DE PRECIO UNITARIO FINAL"}),r.jsxs("div",{className:"space-y-3 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Costos Directos (A)"}),r.jsxs("span",{className:"font-bold text-lg",children:["$",Xt.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Costos Indirectos (B)"}),r.jsxs("span",{className:"font-bold text-lg",children:["$",na.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b-2 border-gray-400 bg-blue-50 px-3 rounded",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"Costo Total (C = A + B)"}),r.jsxs("span",{className:"font-bold text-xl text-blue-700",children:["$",wa.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["+ Financiamiento (",be.financiamiento,"% sobre C)",r.jsx("span",{className:"block text-xs text-gray-500",children:"Costo de oportunidad del capital"})]}),r.jsxs("span",{className:"font-bold",children:["$",xi.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["+ Imprevistos (",be.imprevistos,"% sobre C)",r.jsx("span",{className:"block text-xs text-gray-500",children:"Contingencias y variaciones"})]}),r.jsxs("span",{className:"font-bold",children:["$",vi.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b-2 border-gray-400",children:[r.jsx("span",{className:"font-bold text-gray-800",children:"Subtotal con Cargos (D)"}),r.jsxs("span",{className:"font-bold text-lg",children:["$",_s.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-2 border-b-2 border-orange-400 bg-orange-50 px-3 rounded",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["+ Utilidad (",be.utilidad,"% sobre D)",r.jsx("span",{className:"block text-xs text-gray-500",children:"Margen de ganancia del contratista"})]}),r.jsxs("span",{className:"font-bold text-orange-600",children:["$",yi.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center py-3 bg-gradient-to-r from-green-100 to-green-50 border-2 border-green-500 rounded-lg px-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block font-bold text-gray-800 text-lg",children:"PRECIO UNITARIO FINAL"}),r.jsx("span",{className:"block text-xs text-gray-600",children:"Por unidad de medida (M3, KG, etc.)"})]}),r.jsxs("span",{className:"text-3xl font-bold text-green-700",children:["$",Ga.toFixed(2)]})]}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:r.jsxs("p",{className:"text-xs text-gray-600",children:[r.jsx("strong",{children:"Nota:"})," Los porcentajes de indirectos, financiamiento, imprevistos y utilidad pueden variar segn el tipo de proyecto, ubicacin geogrfica, condiciones del mercado y polticas de la empresa. Los valores mostrados son referenciales basados en estndares de la industria."]})})]})]})]})]})})]}),r.jsx(om,{isOpen:Zt,onClose:()=>Bn(!1),onSave:hs,title:"Nueva Categora",type:"categoria"}),r.jsx(Yy,{isOpen:bi,onClose:()=>jf(!1),onSave:ms,title:"Nueva Unidad de Medida",fields:[{name:"codigo",label:"Cdigo",placeholder:"UND"},{name:"nombre",label:"Nombre",placeholder:"Unidad"},{name:"tipo",label:"Tipo",type:"select",options:[{value:"Cantidad",label:"Cantidad"},{value:"Longitud",label:"Longitud"},{value:"rea",label:"rea"},{value:"Volumen",label:"Volumen"},{value:"Peso",label:"Peso"}]},{name:"decimales",label:"Decimales",type:"number",placeholder:"0"}]}),r.jsx(RD,{isOpen:Vg,onClose:()=>kl(!1),onSave:ps}),r.jsx(_D,{isOpen:wf,onClose:()=>Pl(!1),onSave:Pi}),r.jsx(om,{isOpen:Nf,onClose:()=>ad(!1),onSave:Ei,title:"Nueva Marca",type:"marca"}),r.jsx(om,{isOpen:qg,onClose:()=>lr(!1),onSave:gs,title:"Nuevo Tipo",type:"tipo"}),r.jsx($D,{isOpen:Gg,onClose:()=>ji(!1),onSave:Yg}),r.jsx(Yy,{isOpen:Sf,onClose:()=>Co(!1),onSave:Df,title:"Nuevo Nivel de Precio",fields:[{name:"nombre",label:"Nombre del Nivel",placeholder:"Ej. Mayorista"},{name:"descripcion",label:"Descripcin",placeholder:"Descripcin opcional"}]})]})},BC="http://localhost:5006/api",VC=async e=>{const t=e?`${BC}/Kardex?almacenId=${e}`:`${BC}/Kardex`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to get kardex: ${n.status}`);return n.json()},sL=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(""),[l,c]=x.useState([]),[f,h]=x.useState("");x.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const v=await za();c(v);const j=await VC(f);t(j)}catch(v){console.error("Error loading kardex:",v)}finally{a(!1)}};x.useEffect(()=>{m()},[f]);const m=async()=>{try{a(!0);const v=await VC(f);t(v)}catch(v){console.error("Error loading kardex data:",v)}finally{a(!1)}},p=e.filter(v=>(v.producto||"").toLowerCase().includes(s.toLowerCase())||(v.documento||"").toLowerCase().includes(s.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Kardex de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Historial detallado de movimientos por producto."})]})}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Filtros"})}),r.jsxs("div",{className:"p-6 pt-0 grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ye,{label:"Buscar Producto",placeholder:"Cdigo o Nombre",value:s,onChange:v=>o(v.target.value)}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtrar por Almacn"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",value:f,onChange:v=>h(v.target.value),children:[r.jsx("option",{value:"",children:"Todos los Almacenes"}),l.map(v=>r.jsx("option",{value:v.id,children:v.nombre},v.id))]})]})]})]}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Movimientos Recientes"})}),r.jsx("div",{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{children:"Fecha"}),r.jsx(ce,{children:"Tipo"}),r.jsx(ce,{children:"Documento"}),r.jsx(ce,{children:"Producto"}),r.jsx(ce,{children:"Cant Adq"}),r.jsx(ce,{children:"U.M."}),r.jsx(ce,{className:"text-right text-green-700 bg-green-50",children:"Entrada"}),r.jsx(ce,{className:"text-right text-red-700 bg-red-50",children:"Salida"}),r.jsx(ce,{className:"text-right",children:"Costo"}),r.jsx(ce,{className:"text-right",children:"Total"}),r.jsx(ce,{className:"text-right text-xs text-gray-500",children:"Stock"})]})}),r.jsx(Bt,{children:n?r.jsx(Me,{children:r.jsx(G,{colSpan:12,className:"text-center py-8",children:"Cargando..."})}):p.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:12,className:"text-center py-8 text-gray-500",children:"No hay movimientos registrados."})}):p.map(v=>r.jsxs(Me,{children:[r.jsx(G,{className:"text-gray-600",children:new Date(v.fechaMovimiento).toLocaleDateString()}),r.jsx(G,{children:r.jsxs("span",{className:`inline-flex items-center space-x-1 font-medium ${v.tipoMovimiento==="Entrada"?"text-green-600":"text-red-600"}`,children:[v.tipoMovimiento==="Entrada"||v.cantidad>0?r.jsx(Ln,{size:14}):r.jsx(Kr,{size:14}),r.jsx("span",{children:v.tipoMovimiento})]})}),r.jsx(G,{className:"font-mono text-xs text-blue-600 font-medium",children:v.documento}),r.jsx(G,{className:"font-medium text-gray-800",children:v.producto}),r.jsx(G,{className:"font-medium text-orange-700",children:Math.abs(parseFloat(v.cantidadOriginal??v.cantidad)).toLocaleString()}),r.jsx(G,{className:"text-gray-500",children:v.unidadOriginal||v.unidadMedida}),r.jsx(G,{className:"text-right font-medium text-green-600 bg-green-50/30",children:v.cantidad>0?parseFloat(v.cantidad).toLocaleString():"-"}),r.jsx(G,{className:"text-right font-medium text-red-600 bg-red-50/30",children:v.cantidad<0?Math.abs(parseFloat(v.cantidad)).toLocaleString():"-"}),r.jsxs(G,{className:"text-right text-gray-600",children:["$",parseFloat(v.costoUnitario).toFixed(2)]}),r.jsxs(G,{className:"text-right font-medium",children:["$",parseFloat(v.total).toFixed(2)]}),r.jsxs(G,{className:"text-right text-xs text-gray-500",children:[v.stockAnterior?.toFixed(0)," ",r.jsx("span",{className:"mx-1",children:""})," ",r.jsx("strong",{children:v.stockNuevo?.toFixed(0)})]})]},v.id))})]})})]})]})},Ej="http://localhost:5006/api/Ajustes",FD=async e=>{const t=await fetch(Ej,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Error al guardar ajuste: ${t.status} ${n}`)}return t.json()},LD=async()=>{const e=await fetch(Ej,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.text();throw new Error(`Error al obtener ajustes: ${e.status} ${t}`)}return e.json()},zD=async e=>{const t=await fetch(`${Ej}/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Error fetching details: ${t.statusText}`);return t.json()},oL=Object.freeze(Object.defineProperty({__proto__:null,createAjuste:FD,getAjusteById:zD,getAjustes:LD},Symbol.toStringTag,{value:"Module"})),iL=({ajusteId:e,onClose:t})=>{const[n,a]=x.useState(null),[s,o]=x.useState(!0);return x.useEffect(()=>{e&&(o(!0),zD(e).then(l=>a(l)).catch(l=>console.error(l)).finally(()=>o(!1)))},[e]),e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Sr,{className:"text-hd-orange",size:24}),"Detalle de Ajuste ",n?console.log(n)||n.documento:""]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:t,children:r.jsx(It,{size:20})})]}),r.jsx("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:s?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"Cargando detalles..."}):n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Fecha"}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[r.jsx(ea,{size:16,className:"text-gray-400"}),new Date(n.fecha).toLocaleDateString()]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Tipo / Motivo"}),r.jsxs("div",{className:"text-gray-800 font-medium",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold mr-2 ${n.tipoAjuste==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:n.tipoAjuste==="in"?"ENTRADA":"SALIDA"}),n.motivoDescripcion]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Almacn"}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[r.jsx(An,{size:16,className:"text-gray-400"}),n.almacenNombre||"General"]})]}),n.observaciones&&r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Observaciones"}),r.jsx("div",{className:"text-gray-700 text-sm italic border-l-2 border-gray-300 pl-2 mt-1",children:n.observaciones})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-3 text-sm uppercase tracking-wide",children:"Artculos Ajustados"}),r.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Me,{children:[r.jsx(ce,{children:"Cdigo"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{children:"Plan"}),r.jsx(ce,{children:"Unidad"}),r.jsx(ce,{className:"text-right",children:"Cant."}),r.jsx(ce,{className:"text-right",children:"Costo"}),r.jsx(ce,{className:"text-right",children:"Total"})]})}),r.jsxs(Bt,{children:[n.detalles?.map((l,c)=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-mono text-xs text-gray-600",children:l.codigo}),r.jsx(G,{className:"font-medium text-gray-800",children:l.descripcion}),r.jsx(G,{className:"text-xs text-gray-500",children:l.planUoM||"-"}),r.jsx(G,{className:"text-xs",children:l.unidad}),r.jsx(G,{className:"text-right font-bold text-gray-800",children:parseFloat(l.cantidad).toLocaleString()}),r.jsx(G,{className:"text-right text-xs text-gray-600",children:parseFloat(l.costo).toLocaleString(void 0,{minimumFractionDigits:2})}),r.jsx(G,{className:"text-right text-sm font-semibold text-gray-900 bg-gray-50/50",children:(l.cantidad*l.costo).toLocaleString(void 0,{minimumFractionDigits:2})})]},c)),r.jsxs(Me,{className:"bg-gray-100 font-bold",children:[r.jsx(G,{colSpan:6,className:"text-right",children:"Total Ajuste:"}),r.jsx(G,{className:"text-right text-hd-orange",children:n.detalles?.reduce((l,c)=>l+c.cantidad*c.costo,0).toLocaleString(void 0,{minimumFractionDigits:2})})]})]})]})})]})]}):r.jsx("div",{className:"text-center text-red-500",children:"No se encontr el ajuste."})}),r.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 flex justify-end",children:r.jsx(re,{variant:"outline",onClick:t,children:"Cerrar"})})]})}):null},lL=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(""),[o,l]=x.useState(!0),[c,f]=x.useState(null);x.useEffect(()=>{LD().then(u=>n(u)).catch(u=>console.error("Error loading ajustes",u)).finally(()=>l(!1))},[]);const h=a?t.filter(u=>u.documento&&u.documento.toLowerCase().includes(a.toLowerCase())||u.motivo&&u.motivo.toLowerCase().includes(a.toLowerCase())||u.tipo&&u.tipo.toLowerCase().includes(a.toLowerCase())):t;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Ajustes de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Registre entradas y salidas manuales de mercanca."})]}),r.jsxs(re,{onClick:()=>e("/ajustes/nuevo"),className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Ajuste"]})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(vt,{children:"Historial de Ajustes"}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar ajuste...",className:"pl-9",value:a,onChange:u=>s(u.target.value)})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[120px]",children:"Documento"}),r.jsx(ce,{children:"Fecha"}),r.jsx(ce,{children:"Tipo"}),r.jsx(ce,{children:"Motivo"}),r.jsx(ce,{className:"text-right",children:"Acciones"})]})}),r.jsx(Bt,{children:o?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Cargando ajustes..."})}):h.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No hay ajustes registrados."})}):h.map(u=>r.jsxs(Me,{className:"group hover:bg-gray-50/50",children:[r.jsx(G,{className:"font-mono text-gray-700",children:u.documento}),r.jsx(G,{children:new Date(u.fecha).toLocaleDateString()}),r.jsx(G,{children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u.tipo==="Entrada"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:u.tipo})}),r.jsx(G,{children:u.motivo}),r.jsx(G,{className:"text-right",children:r.jsx(re,{variant:"ghost",size:"sm",className:"text-hd-orange hover:text-orange-700 hover:bg-orange-50",onClick:()=>f(u.id),children:"Ver Detalle"})})]},u.id||u.documento))})]})})]}),c&&r.jsx(iL,{ajusteId:c,onClose:()=>f(null)})]})},cL="modulepreload",dL=function(e){return"/"+e},qC={},D0=function(t,n,a){let s=Promise.resolve();if(n&&n.length>0){let h=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var l=h;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");s=h(n.map(u=>{if(u=dL(u),u in qC)return;qC[u]=!0;const m=u.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":cL,m||(v.as="script"),v.crossOrigin="",v.href=u,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((j,y)=>{v.addEventListener("load",j),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})},Cm="http://localhost:5006/api/MotivosAjuste",Aj=async()=>{const e=await fetch(Cm);if(!e.ok)throw new Error("Error al obtener motivos");return await e.json()},uL=async e=>{const t=!!e.id,n=t?`${Cm}/${e.id}`:Cm,s=await fetch(n,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const o=await s.json();throw new Error(o.message||"Error al guardar motivo")}return s.status===204?!0:await s.json()},fL=async e=>{if(!(await fetch(`${Cm}/${e}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar motivo");return!0};let hL=class extends bt.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error",t,n),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?r.jsxs("div",{className:"p-6 bg-red-100 text-red-800 rounded-md",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Algo sali mal"}),r.jsx("p",{children:"Por favor, recargue la pgina o contacte al soporte."}),!1]}):this.props.children}};const mL=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(Nr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ar,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},zd=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),pL=()=>{const e=Tt(),{hasPermission:t,loading:n}=jl();x.useEffect(()=>{!n&&!t("INVENTORY_ADJUSTMENT_CREATE")&&e("/ajustes")},[n,t,e]);const[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState(!0);if(n)return r.jsx("div",{className:"p-6",children:"Verificando permisos..."});const[h,u]=x.useState([]),[m,p]=x.useState(""),[v,j]=x.useState(!1),y=x.useRef(null),[b,N]=x.useState({fecha:new Date().toISOString().split("T")[0],tipoAjuste:"out",motivoId:"",almacenId:"",observaciones:""}),[P,A]=x.useState([]);x.useEffect(()=>{(async()=>{try{const[J,q,W]=await Promise.all([Aj(),dl(),za()]);Array.isArray(J)?s(J.filter(z=>z.activo)):J&&Array.isArray(J.data)?s(J.data.filter(z=>z.activo)):(console.error("Structure of motivosData unexpected",J),s([])),Array.isArray(W)?l(W):l([]),Array.isArray(q)?u(q):q&&Array.isArray(q.data)?u(q.data):(console.error("Structure of productosData unexpected",q),u([]))}catch(J){console.error("Error loading data",J),s([]),u([])}finally{f(!1)}})();const U=J=>{y.current&&!y.current.contains(J.target)&&j(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const k=a.reduce((L,U)=>(L[U.grupo]||(L[U.grupo]=[]),L[U.grupo].push(U),L),{}),I=x.useMemo(()=>{if(!m)return[];const L=m.toLowerCase();return h.filter(U=>U.descripcion&&U.descripcion.toLowerCase().includes(L)||U.codigo&&U.codigo.toLowerCase().includes(L)||U.referencia&&U.referencia.toLowerCase().includes(L)).slice(0,10)},[m,h]),[E,O]=x.useState(null);x.useEffect(()=>{(async()=>{try{const{getAjusteConfig:U}=await D0(async()=>{const{getAjusteConfig:q}=await Promise.resolve().then(()=>EU);return{getAjusteConfig:q}},void 0),J=await U();O(J)}catch(U){console.error(U)}})()},[]);const C=async L=>{if(P.find(ee=>ee.id===L.id)){alert("El artculo ya est en la lista. Ajuste la cantidad en la lnea existente.");return}let J=[],q=L.unidadMedida||"UND",W=1,z=E?.defaultPlanId||L.planMedida||L.PlanMedida,K="N/A";if(z)try{const{getPlan:ee}=await D0(async()=>{const{getPlan:Se}=await import("./unidades-B4EurSeR.js");return{getPlan:Se}},[]),me=await ee(z);K=me.descripcion||me.Descripcion||"Plan "+z;const De=me.detalles||me.Detalles;if(me&&De)if(J=De.map(Se=>({unidad:Se.unidadMedida||Se.UnidadMedida,equivalente:parseFloat(Se.cantidad||Se.Cantidad||1)})),E?.defaultUnit){const Se=J.find(We=>We.unidad===E.defaultUnit);Se?(q=Se.unidad,W=Se.equivalente):J.length>0&&(q=J[0].unidad,W=J[0].equivalente)}else J.length>0&&(q=J[0].unidad,W=J[0].equivalente)}catch(ee){console.error("Error fetching plan",ee)}else J.push({unidad:q,equivalente:1});const B=parseFloat(L.costoUnitario||L.costo||0)||0,R=parseFloat(W)||1,H=B*R,Y={id:L.id,codigo:L.numeroArticulo||L.codigoBarras||L.codigo,descripcion:L.descripcion,unidad:q,unidadesPosibles:J,equivalente:R,cantidad:1,costoBase:B,costo:H,stockActual:L.stockActual||0,planUoM:z,planName:K};A([...P,Y]),p(""),j(!1)},M=(L,U,J)=>{A(P.map(q=>{if(q.id===L){if(U==="unidad"){const W=q.unidadesPosibles.find(B=>B.unidad===J),z=W&&parseFloat(W.equivalente)||1,K=(parseFloat(q.costoBase)||0)*z;return{...q,unidad:J,equivalente:z,costo:K}}return{...q,[U]:J}}return q}))},F=L=>{A(P.filter(U=>U.id!==L))},V=P.reduce((L,U)=>L+U.cantidad*U.costo,0),T=async()=>{if(!b.motivoId){alert("Debe seleccionar un motivo.");return}if(P.length===0){alert("Debe agregar al menos un artculo.");return}const L=a.find(J=>J.id==b.motivoId)?.motivo||"N/A",U={...b,motivoDescripcion:L,motivoId:parseInt(b.motivoId),almacenId:parseInt(b.almacenId)||1,detalles:P.map(J=>({articuloId:J.id,codigo:J.codigo,descripcion:J.descripcion,unidad:J.unidad,cantidad:J.cantidad,equivalente:J.equivalente,costo:J.costo,planUoM:J.planUoM}))};try{const{createAjuste:J}=await D0(async()=>{const{createAjuste:W}=await Promise.resolve().then(()=>oL);return{createAjuste:W}},void 0),q=await J(U);alert(`Ajuste registrado con xito. Documento: ${q.documento}`),e("/ajustes")}catch(J){console.error(J),alert("Error al guardar el ajuste: "+J.message)}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/ajustes"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Inventario"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:"Nuevo Ajuste"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Hoja de Ajuste"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/ajustes"),className:"border-gray-300 text-gray-700",children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:T,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Registrar Ajuste"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(mL,{title:"General",children:[r.jsx(zd,{label:"No. Documento",children:r.jsx(ye,{placeholder:"(Auto)",disabled:!0,className:"bg-gray-50 border-gray-200"})}),r.jsx(zd,{label:"Fecha Registro",required:!0,children:r.jsx(ye,{type:"date",className:"font-medium",value:b.fecha,onChange:L=>N({...b,fecha:L.target.value})})}),r.jsx("div",{className:"col-span-1",children:r.jsx(zd,{label:"Tipo Ajuste",required:!0,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange cursor-help",value:b.tipoAjuste,title:"Seleccione si el ajuste aumenta o disminuye el inventario",onChange:L=>N({...b,tipoAjuste:L.target.value}),children:[r.jsx("option",{value:"in",title:"Aumenta la cantidad de artculos en el almacn",children:"Entrada (+) "}),r.jsx("option",{value:"out",title:"Disminuye la cantidad de artculos en el almacn",children:"Salida (-)"})]}),r.jsx("span",{className:`text-xs mt-1 font-medium ${b.tipoAjuste==="in"?"text-green-600":"text-red-500"}`,children:b.tipoAjuste==="in"?"Aumenta el Stock: Para sobrantes, devoluciones o ingresos manuales.":"Disminuye el Stock: Para mermas, daos, robos o consumo interno."})]})})}),r.jsx(zd,{label:"Almacn",children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:b.almacenId,onChange:L=>N({...b,almacenId:L.target.value}),children:[r.jsx("option",{value:"",children:"Seleccione Almacn"}),c?r.jsx("option",{disabled:!0,children:"Cargando almacenes..."}):o.map(L=>r.jsx("option",{value:L.id,children:L.nombre},L.id))]})}),r.jsx("div",{className:"col-span-1 md:col-span-2",children:r.jsx(zd,{label:"Motivo del Ajuste",required:!0,children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:b.motivoId,onChange:L=>N({...b,motivoId:L.target.value}),children:[r.jsx("option",{value:"",children:"-- Seleccione un Motivo --"}),c?r.jsx("option",{disabled:!0,children:"Cargando motivos..."}):Object.entries(k).map(([L,U])=>r.jsx("optgroup",{label:L,children:U.map(J=>r.jsxs("option",{value:J.id,children:[J.codigo," - ",J.motivo]},J.id))},L))]})})})]}),r.jsxs("div",{className:"mb-4 relative",ref:y,children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(ye,{placeholder:"Buscar artculo por cdigo o descripcin para agregar...",className:"pl-10 py-6 text-lg border-hd-orange/30 focus:border-hd-orange shadow-sm",value:m,onChange:L=>{p(L.target.value),j(!0)},onFocus:()=>j(!0)})]}),v&&m&&r.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 mt-1 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:I.length>0?I.map(L=>r.jsxs("div",{className:"px-4 py-3 hover:bg-orange-50 cursor-pointer border-b border-gray-50 last:border-0 flex justify-between items-center group",onClick:()=>C(L),children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800",children:L.descripcion}),r.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:[L.codigo,L.referencia&&` | Ref: ${L.referencia}`]})]}),r.jsxs("div",{className:"text-xs font-medium text-gray-500 group-hover:text-hd-orange",children:["Stock: ",L.stockActual||0]})]},L.id)):r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No se encontraron productos"})})]}),r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden flex flex-col",children:[r.jsx("div",{className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-100",children:r.jsxs("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:["Lneas de Ajuste - ",P.length," Items"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[120px]",children:"Cdigo"}),r.jsx(ce,{className:"w-[250px]",children:"Descripcin"}),r.jsx(ce,{className:"w-[100px]",children:"Plan"}),r.jsx(ce,{className:"w-[100px]",children:"Unidad"}),r.jsx(ce,{className:"w-[80px] text-right",children:"Cant. Unid."}),r.jsx(ce,{className:"w-[100px] text-right",children:"Cantidad"}),r.jsx(ce,{className:"w-[100px] text-right text-xs text-gray-500",children:"Total Unidades"}),r.jsx(ce,{className:"w-[100px] text-right",children:"Costo Unit."}),r.jsx(ce,{className:"w-[100px] text-right",children:"Total"}),r.jsx(ce,{className:"w-[50px]"})]})}),r.jsx(Bt,{children:P.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:8,className:"h-24 text-center text-gray-400 italic",children:"Busque y agregue productos arriba para comenzar"})}):P.map(L=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-mono text-xs",children:L.codigo}),r.jsx(G,{className:"text-sm",children:L.descripcion}),r.jsx(G,{className:"text-xs text-gray-500",children:L.planName||"N/A"}),r.jsx(G,{children:L.unidadesPosibles&&L.unidadesPosibles.length>1?r.jsx("select",{className:"h-8 text-xs border border-gray-300 rounded p-1 w-full",value:L.unidad,onChange:U=>M(L.id,"unidad",U.target.value),children:L.unidadesPosibles.map(U=>r.jsx("option",{value:U.unidad,children:U.unidad},U.unidad))}):r.jsx("span",{className:"text-xs",children:L.unidad})}),r.jsx(G,{className:"text-right text-xs text-gray-500",children:L.equivalente}),r.jsx(G,{children:r.jsx(ye,{type:"number",className:"h-8 text-right text-xs",value:isNaN(L.cantidad)?"":L.cantidad,onChange:U=>{const J=parseFloat(U.target.value);M(L.id,"cantidad",isNaN(J)?0:J)}})}),r.jsx(G,{className:"text-right text-xs font-semibold text-gray-600 bg-gray-50/50",children:((isNaN(L.cantidad)?0:L.cantidad)*(L.equivalente||1)).toLocaleString(void 0,{maximumFractionDigits:4})}),r.jsx(G,{children:r.jsx(ye,{type:"number",className:"h-8 text-right text-xs bg-gray-50",value:isNaN(L.costo)?"":L.costo,onChange:U=>{const J=parseFloat(U.target.value);M(L.id,"costo",isNaN(J)?0:J)}})}),r.jsx(G,{className:"text-right text-xs font-medium",children:(L.cantidad*L.costo).toLocaleString(void 0,{minimumFractionDigits:2})}),r.jsx(G,{children:r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:bg-red-50",onClick:()=>F(L.id),children:r.jsx(Qt,{size:14})})})]},L.id))})]})}),r.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex justify-end",children:r.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:["Total Valor Ajuste: ",r.jsxs("span",{className:"text-lg ml-2 text-hd-orange",children:["DOP ",V.toLocaleString(void 0,{minimumFractionDigits:2})]})]})})]})]})]})},gL=e=>r.jsx(hL,{children:r.jsx(pL,{...e})}),GC="http://localhost:5006/api",xL=()=>{const e=Tt(),[t,n]=x.useState(!0),[a,s]=x.useState([]),[o,l]=x.useState(""),c=async h=>{if(window.confirm("Est seguro que desea eliminar esta transferencia? Esta accin no se puede deshacer."))try{(await fetch(`${GC}/Transferencias/${h}`,{method:"DELETE"})).ok?s(m=>m.filter(p=>(p.id||p.Id)!==h)):alert("Error al eliminar la transferencia")}catch(u){console.error(u),alert("Error de conexin al eliminar")}};x.useEffect(()=>{(async()=>{try{n(!0);const u=await fetch(`${GC}/Transferencias`);if(!u.ok)throw new Error("Error loading transfers");const m=await u.json();s(m)}catch(u){console.error(u)}finally{n(!1)}})()},[]);const f=a.filter(h=>{const u=h.numeroTransferencia||h.NumeroTransferencia||"",m=h.almacenOrigen||h.AlmacenOrigen||"",p=h.almacenDestino||h.AlmacenDestino||"",v=o.toLowerCase();return u.toLowerCase().includes(v)||m.toLowerCase().includes(v)||p.toLowerCase().includes(v)});return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Transferencias de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione y rastree el movimiento de artculos entre ubicaciones."})]}),r.jsxs(re,{onClick:()=>e("/transferencias/nuevo"),className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nueva Transferencia"]})]}),r.jsxs(Be,{className:"border-none shadow-lg overflow-hidden",children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between space-y-0 pb-4 bg-gray-50/50",children:[r.jsx(vt,{className:"text-lg font-bold",children:"Historial de Movimientos"}),r.jsxs("div",{className:"relative w-72",children:[r.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ye,{placeholder:"Buscar por No. u Almacn...",className:"pl-10 h-10 border-gray-200 focus:border-hd-orange",value:o,onChange:h=>l(h.target.value)})]})]}),r.jsx("div",{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-100/50",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[140px] font-bold",children:"No. Documento"}),r.jsx(ce,{className:"w-[120px] font-bold",children:"Fecha"}),r.jsx(ce,{className:"font-bold",children:"Origen"}),r.jsx(ce,{className:"font-bold",children:"Destino"}),r.jsx(ce,{className:"w-[120px] text-center font-bold",children:"Estado"}),r.jsx(ce,{className:"w-[100px] text-right font-bold",children:"Acciones"})]})}),r.jsx(Bt,{children:t?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-20 text-gray-400",children:"Cargando transferencias..."})}):f.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-20 text-gray-500",children:"No se encontraron transferencias que coincidan con la bsqueda."})}):f.map(h=>r.jsxs(Me,{className:"hover:bg-gray-50 transition-colors",children:[r.jsx(G,{className:"font-mono text-xs font-bold text-hd-orange",children:h.numeroTransferencia||h.NumeroTransferencia}),r.jsx(G,{className:"text-xs",children:new Date(h.fecha||h.Fecha).toLocaleDateString("es-DO")}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center text-xs",children:[r.jsx("div",{className:"h-2 w-2 rounded-full bg-red-400 mr-2"}),h.almacenOrigen||h.AlmacenOrigen]})}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center text-xs",children:[r.jsx("div",{className:"h-2 w-2 rounded-full bg-green-400 mr-2"}),h.almacenDestino||h.AlmacenDestino]})}),r.jsx(G,{className:"text-center",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-[10px] font-bold bg-blue-100 text-blue-800 uppercase tracking-tighter",children:h.estado||h.Estado})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 hover:bg-orange-50 hover:text-hd-orange transition-colors",title:"Ver detalles",onClick:()=>e(`/transferencias/editar/${h.id||h.Id}`),children:r.jsx(oi,{size:20})}),r.jsx(re,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 hover:bg-red-50 hover:text-red-500 transition-colors",title:"Eliminar",onClick:u=>{u.stopPropagation(),c(h.id||h.Id)},children:r.jsx(Qt,{size:20})})]})})]},h.id||h.Id))})]})})]})]})},ul=({isOpen:e,onClose:t,onSelect:n,clientContext:a})=>{const[s,o]=x.useState(""),[l,c]=x.useState([]),[f,h]=x.useState(!1),[u,m]=x.useState(0),p=x.useRef(null),v=x.useRef(null);x.useEffect(()=>{e&&(j(),o(""),m(0),setTimeout(()=>p.current?.focus(),100))},[e]);const j=async()=>{try{h(!0);const N=await dl(),P=[],A=a?.moneda||"DOP";N.forEach(k=>{let I=!1;k.preciosList&&k.preciosList.length>0&&k.preciosList.forEach(E=>{const O=(E.moneda||"DOP").trim().toUpperCase(),C=(A||"DOP").trim().toUpperCase();E.activo&&O===C&&(P.push({...k,uniqueKey:`${k.id||k.Id}-lvl-${E.id||E.nivelPrecio}`,isVariant:!0,displayLevel:E.nivelPrecio,displayUnit:E.unidadMedida,displayPrice:E.precio,variantInfo:E}),I=!0)}),I||P.push({...k,uniqueKey:`${k.id||k.Id}-base`,isVariant:!1,displayLevel:"General",displayUnit:k.unidadMedida||"UND",displayPrice:k.precioVenta||k.precioUnitario||0,variantInfo:null})}),c(P)}catch(N){console.error("Error loading articles:",N)}finally{h(!1)}},y=x.useMemo(()=>{const N=s.toLowerCase();let P=[];return N?P=l.filter(A=>{const k=A.descripcion||A.Descripcion||"",I=A.numeroArticulo||A.NumeroArticulo||"",E=A.displayLevel||"",O=A.displayUnit||"";return k.toLowerCase().includes(N)||I.toLowerCase().includes(N)||E.toLowerCase().includes(N)||O.toLowerCase().includes(N)}).slice(0,100):P=l.slice(0,50),a?.nivelPrecio&&P.sort((A,k)=>{const I=A.displayLevel===a.nivelPrecio,E=k.displayLevel===a.nivelPrecio;return I&&!E?-1:!I&&E?1:0}),P},[l,s,a]);x.useEffect(()=>{m(0)},[y]),x.useEffect(()=>{const N=P=>{if(e)if(P.key==="ArrowDown")P.preventDefault(),m(A=>Math.min(A+1,y.length-1));else if(P.key==="ArrowUp")P.preventDefault(),m(A=>Math.max(A-1,0));else if(P.key==="Enter"){if(P.preventDefault(),y[u]){const A=y[u];n({...A,precio:A.displayPrice,precioVenta:A.displayPrice,unidad:A.displayUnit,unidadMedida:A.displayUnit,nivelPrecioApplied:A.displayLevel}),t()}}else P.key==="Escape"&&t()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[e,y,u,n,t]),x.useEffect(()=>{if(v.current){const N=v.current.children[u];N&&N.scrollIntoView({block:"nearest"})}},[u]);const b=(N,P=0)=>N<=0?"text-red-600 bg-red-50 border-red-100":N<=P?"text-orange-600 bg-orange-50 border-orange-100":"text-green-600 bg-green-50 border-green-100";return r.jsx(li,{open:e,onOpenChange:t,children:r.jsxs(ci,{className:"max-w-5xl p-0 overflow-hidden border-0 shadow-2xl bg-white rounded-xl h-[85vh] flex flex-col",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex flex-col gap-4 shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 tracking-tight",children:"Buscar Productos"}),r.jsx("p",{className:"text-xs text-gray-500",children:a?.moneda?`Lista de Precios: ${a.moneda}`:"Lista de Precios: DOP"})]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full h-8 w-8",children:r.jsx(It,{size:20})})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ht,{className:"h-4 w-4 text-gray-400 group-focus-within:text-blue-700"})}),r.jsx(ye,{ref:p,className:"w-full pl-9 pr-4 h-9 bg-white text-sm rounded-sm border border-gray-300 focus:border-blue-700 focus:ring-0 focus:outline-none placeholder:text-gray-400 transition-colors",placeholder:"Buscar por cdigo, descripcin, unidad o nivel...",value:s,onChange:N=>o(N.target.value)})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 pt-2 pb-2",style:{scrollBehavior:"smooth"},children:[r.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200 bg-gray-50/95 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsx("div",{className:"col-span-2",children:"Cdigo"}),r.jsx("div",{className:"col-span-4",children:"Descripcin"}),r.jsx("div",{className:"col-span-2",children:"Nivel Precio"}),r.jsx("div",{className:"col-span-1",children:"Unidad"}),r.jsx("div",{className:"col-span-2 text-right",children:"Existencia"}),r.jsx("div",{className:"col-span-1 text-right",children:"Precio"})]}),r.jsxs("div",{ref:v,className:"px-2",children:[f&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400 animate-pulse",children:[r.jsx("div",{className:"p-4 bg-gray-200 rounded-full mb-4"}),r.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded"})]}),!f&&y.length===0&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[r.jsx(An,{size:64,className:"mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No se encontraron productos"}),r.jsx("p",{className:"text-sm",children:"Verifique los filtros o el trmino de bsqueda"})]}),y.map((N,P)=>{const A=P===u,k=N.stockActual!==void 0?N.stockActual:N.StockActual!==void 0?N.StockActual:0,I=N.stockSeguridad!==void 0?N.stockSeguridad:N.StockSeguridad!==void 0?N.StockSeguridad:0,E=N.displayPrice||0,O=N.displayLevel||"General",C=N.displayUnit||"UND",M=a?.nivelPrecio&&O===a.nivelPrecio;return r.jsxs("div",{onClick:()=>{n({...N,precio:E,precioVenta:E,unidad:C,unidadMedida:C,nivelPrecioApplied:O}),t()},className:`
                                        group grid grid-cols-12 gap-4 px-4 py-3 mb-1 rounded-lg cursor-pointer transition-all duration-150 border items-center
                                        ${A?"bg-blue-50 border-blue-200 border-l-4 border-l-blue-600 shadow-sm z-10":"bg-white border-transparent border-l-4 border-l-transparent hover:border-gray-300 hover:shadow-sm"}
                                        ${M&&!A?"bg-blue-50 border-blue-200":""}
                                    `,children:[r.jsx("div",{className:`col-span-2 font-mono text-xs font-bold ${A?"text-blue-800":"text-gray-900"}`,children:N.numeroArticulo||N.NumeroArticulo}),r.jsxs("div",{className:"col-span-4 flex flex-col justify-center",children:[r.jsx("div",{className:`text-sm font-bold truncate ${A?"text-gray-900":"text-gray-800"}`,children:N.descripcion||N.Descripcion}),r.jsx("div",{className:`text-xs truncate flex items-center gap-2 ${A?"text-blue-600":"text-gray-400"}`,children:(N.marca||N.Marca)&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Nl,{size:10})," ",N.marca||N.Marca]})})]}),r.jsx("div",{className:"col-span-2",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase border
                                            ${A?"bg-blue-100 text-blue-800 border-blue-200":M?"bg-blue-100 text-blue-700 border-blue-200":"bg-gray-100 text-gray-600 border-gray-200"}
                                        `,children:O})}),r.jsx("div",{className:"col-span-1",children:r.jsx("span",{className:`text-xs font-bold ${A?"text-gray-800":"text-gray-700"}`,children:C})}),r.jsxs("div",{className:"col-span-2 text-right flex flex-col items-end",children:[r.jsx("span",{className:`
                                            inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold border
                                            ${A?"bg-white text-gray-800 border-transparent shadow-sm":b(k,I)}
                                        `,children:k}),I>0&&r.jsxs("span",{className:"text-[9px] text-gray-400 mt-0.5",children:["Min: ",I]})]}),r.jsxs("div",{className:"col-span-1 text-right font-black text-sm text-gray-900",children:["$",Number(E).toFixed(2)]})]},N.uniqueKey||P)})]})]}),r.jsxs("div",{className:"bg-gray-100 p-2 text-center text-xs text-gray-400 border-t border-gray-200",children:["Mostrando ",y.length," opciones"]})]})})},UD="http://localhost:5006/api/TransferenciaConfiguration",BD=async()=>{try{const e=await fetch(UD);if(!e.ok)throw new Error("Error fetching config");return await e.json()}catch(e){throw console.error("Error fetching transfer config:",e),e}},vL=async e=>{try{const t=await fetch(UD,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error updating config");return await t.json()}catch(t){throw console.error("Error updating transfer config:",t),t}},HC="http://localhost:5006/api",yL=({title:e,children:t,defaultExpanded:n=!0})=>{const[a,s]=x.useState(n);return r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(!a),className:"w-full flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors border-b border-gray-100",children:[a?r.jsx(Nr,{size:16,className:"text-gray-500 mr-2"}):r.jsx(ar,{size:16,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:e})]}),a&&r.jsx("div",{className:"p-6 bg-white",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-4",children:t})})]})},tc=({label:e,children:t,required:n=!1})=>r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("label",{className:"text-xs font-semibold text-gray-500 truncate flex items-center",children:[e,n&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t]}),WC=()=>{const e=Tt(),{id:t}=Ts(),n=!!t,[a,s]=x.useState(!1),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState([]),[m,p]=x.useState(""),[v,j]=x.useState(""),[y,b]=x.useState(!1),[N,P]=x.useState({numeroTransferencia:"(Auto)",fecha:new Date().toISOString().split("T")[0],almacenOrigenId:"",almacenDestinoId:"",observaciones:""}),A=(C,M)=>{P(F=>({...F,[C]:M}))},k=(C,M,F)=>{f(V=>V.map((T,L)=>{if(L!==C)return T;const U={...T,[M]:F};if(M==="planUoM"){const J=h.find(q=>q.planId===F);J&&J.detalles&&J.detalles.length>0?(U.unidadMedida=J.detalles[0].unidadMedida,U.cantidadUnidad=J.detalles[0].cantidad||1):(U.unidadMedida=T.unidadOriginal,U.cantidadUnidad=1)}if(M==="unidadMedida"){const J=h.find(q=>q.planId===T.planUoM);if(J){const q=J.detalles?.find(W=>W.unidadMedida===F);U.cantidadUnidad=q&&q.cantidad||1}else U.cantidadUnidad=1}return U}))},I=C=>{f(M=>M.filter((F,V)=>V!==C))},E=async()=>{for(const C of c){const M=(C.cantidad||0)*(C.cantidadUnidad||1);if(M<=0){alert(`La cantidad para el artculo "${C.descripcion}" debe ser mayor a cero.`),s(!1);return}if(M>C.existencia){alert(`Stock insuficiente para "${C.descripcion}". Disponible: ${C.existencia}, Solicitado: ${M}`),s(!1);return}}s(!0);try{const C={...N,almacenOrigenId:Number(N.almacenOrigenId),almacenDestinoId:Number(N.almacenDestinoId),items:c},M=t?"PUT":"POST",F=await fetch(`${HC}/Transferencias${t?"/"+t:""}`,{method:M,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),V=await F.json();if(!F.ok)throw new Error(V.message||"Failed to save transferencia");e("/transferencias")}catch(C){console.error(C),alert(C.message||"Error al guardar la transferencia")}finally{s(!1)}},O=async C=>{if(!N.almacenOrigenId){alert("Debe seleccionar el Almacn Origen antes de agregar artculos.");return}try{const M=await VF(C.id,Number(N.almacenOrigenId)),F=M.stock!==void 0?M.stock:M.Stock!==void 0?M.Stock:0;if(F<=0){alert(`El artculo "${C.descripcion}" no tiene existencia en el almacn de origen.`);return}const V={articuloId:C.id,numeroArticulo:C.numeroArticulo||C.NumeroArticulo||"",descripcion:C.descripcion||C.Descripcion||"",unidadMedida:C.unidadMedida||C.UnidadMedida||"UND",cantidad:0,existencia:F,stockSeguridad:M.stockSeguridad||M.StockSeguridad||0,unidadOriginal:C.unidadMedida||C.UnidadMedida||"UND",costoUnitario:C.costoUnitario||C.CostoUnitario||0,planUoM:"",cantidadUnidad:1},T=m||C.planUoM||C.PlanUoM||"";V.planUoM=T;let L=!1;if(T){const U=h.find(J=>J.planId===T);if(U&&U.detalles){if(v){const J=v.trim().toUpperCase(),q=U.detalles.find(W=>(W.unidadMedida||"").trim().toUpperCase()===J);q&&(V.unidadMedida=q.unidadMedida,V.cantidadUnidad=q.cantidad||1,L=!0)}!L&&U.detalles.length>0&&(V.unidadMedida=U.detalles[0].unidadMedida,V.cantidadUnidad=U.detalles[0].cantidad||1,L=!0)}}if(!L&&v){const U=v.trim().toUpperCase(),J=(V.unidadOriginal||"").trim().toUpperCase();(J===U||J==="")&&(V.unidadMedida=V.unidadOriginal,V.cantidadUnidad=1,L=!0)}f(U=>[...U,V]),b(!1)}catch(M){console.error("Error al validar stock:",M),alert("Error al verificar la existencia del artculo. Intente nuevamente.")}};return x.useEffect(()=>{(async()=>{try{const M=await za();l(M);try{const F=await go();u(F||[])}catch(F){console.error("Error loading UoM plans:",F)}try{const F=await BD();F&&(F.defaultPlanId&&p(F.defaultPlanId),F.defaultUnit&&j(F.defaultUnit))}catch(F){console.error("Error loading config:",F)}M.length>0&&!t&&P(F=>({...F,almacenOrigenId:M[0].id,almacenDestinoId:M[1]?M[1].id:M[0].id}))}catch(M){console.error("Error loading warehouses:",M)}})()},[t]),x.useEffect(()=>{t&&(async()=>{try{s(!0);const M=await fetch(`${HC}/Transferencias/${t}`);if(M.ok){const F=await M.json();console.log("API Response:",F);const V=F.Header||F.header||F.master||F,T=F.Items||F.items||F.detalles||[];T.length===0&&console.warn("No items found in response",F),P({numeroTransferencia:V.NumeroTransferencia||V.numeroTransferencia,fecha:(V.Fecha||V.fecha||"").split("T")[0],almacenOrigenId:V.AlmacenOrigenId||V.almacenOrigenId,almacenDestinoId:V.AlmacenDestinoId||V.almacenDestinoId,observaciones:V.Observaciones||V.observaciones||""}),f(T.map(L=>({articuloId:L.ArticuloId||L.articuloId,numeroArticulo:L.NumeroArticulo||L.numeroArticulo,descripcion:L.Descripcion||L.descripcion||L.ArticuloNombre,cantidad:L.Cantidad||L.cantidad,existencia:0,unidadMedida:L.UnidadMedida||L.unidadMedida||"UND",cantidadUnidad:L.CantidadUnidad||L.cantidadUnidad||1,planUoM:L.PlanUoM||L.planUoM||"",costoUnitario:L.CostoUnitario||L.costoUnitario})))}}catch(M){console.error(M),alert("Error cargando transferencia")}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/transferencias"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(on,{className:"h-5 w-5"})}),r.jsx("div",{className:"flex flex-col",children:r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:n?`Transferencia ${N.numeroTransferencia}`:"Orden de Transferencia"})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/transferencias"),className:"border-gray-300 text-gray-700",children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),!n&&r.jsxs(re,{size:"sm",onClick:E,disabled:a,className:"bg-hd-orange hover:bg-orange-600 text-white shadow-sm border border-transparent",children:[a?r.jsx(Dn,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Registrar Envo"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-6 max-w-7xl mx-auto w-full",children:[r.jsxs(yL,{title:"General",children:[r.jsx(tc,{label:"No. Transferencia",children:r.jsx(ye,{value:N.numeroTransferencia,disabled:!0,className:"bg-gray-50 border-gray-200"})}),r.jsx(tc,{label:"Fecha Envo",required:!0,children:r.jsx(ye,{type:"date",className:"font-medium",value:N.fecha,onChange:C=>A("fecha",C.target.value)})}),r.jsx(tc,{label:"Estado",children:r.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-bold uppercase",children:"Borrador"})}),r.jsx("div",{className:"col-span-1 md:col-span-3 h-px bg-gray-100 my-2"}),r.jsxs("div",{className:"flex items-end space-x-4 col-span-1 md:col-span-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(tc,{label:"Almacn Origen",required:!0,children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:N.almacenOrigenId,onChange:C=>A("almacenOrigenId",C.target.value),children:[r.jsx("option",{value:"",children:"Seleccione Origen"}),o.map(C=>r.jsx("option",{value:C.id,children:C.nombre},C.id))]})})}),r.jsx("div",{className:"pb-2 text-gray-400",children:r.jsx(Op,{size:20})}),r.jsx("div",{className:"flex-1",children:r.jsx(tc,{label:"Almacn Destino",required:!0,children:r.jsxs("select",{className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange focus:border-hd-orange",value:N.almacenDestinoId,onChange:C=>A("almacenDestinoId",C.target.value),children:[r.jsx("option",{value:"",children:"Seleccione Destino"}),o.map(C=>r.jsx("option",{value:C.id,children:C.nombre},C.id))]})})})]}),r.jsx(tc,{label:"Referencia / Chofer",children:r.jsx(ye,{placeholder:"Ej. Envo camin placa...",value:N.observaciones,onChange:C=>A("observaciones",C.target.value)})})]}),r.jsxs("div",{className:"border border-gray-200 bg-white rounded-sm mb-4 shadow-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 border-b border-gray-100",children:[r.jsx("span",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wide",children:"Artculos a Transferir"}),r.jsxs(re,{size:"sm",variant:"ghost",onClick:()=>b(!0),className:"text-hd-orange hover:text-orange-700 hover:bg-orange-50",children:[r.jsx(_t,{size:16,className:"mr-1"})," Agregar Lnea (F2)"]})]}),r.jsx("div",{className:"overflow-x-auto min-h-[300px]",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[150px]",children:"Cdigo"}),r.jsx(ce,{className:"",children:"Descripcin"}),r.jsx(ce,{className:"w-[120px]",children:"Plan"}),r.jsx(ce,{className:"w-[100px]",children:"Unidad"}),r.jsx(ce,{className:"w-[100px] text-right",children:"Cant. Unid."}),r.jsx(ce,{className:"w-[120px] text-right",children:"Existencia"}),r.jsx(ce,{className:"w-[120px] text-right",children:"Cantidad"}),r.jsx(ce,{className:"w-[120px] text-right",children:"Total"}),r.jsx(ce,{className:"w-[50px]"})]})}),r.jsx(Bt,{children:c.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:8,className:"text-center py-20 text-gray-500 italic",children:'No hay artculos en esta transferencia. Haga clic en "Agregar Lnea" para comenzar.'})}):c.map((C,M)=>{const F=(C.cantidad||0)*(C.cantidadUnidad||1),V=C.existencia-F,T=C.stockSeguridad>0&&V<C.stockSeguridad,L=F>C.existencia;return r.jsxs(Me,{className:L?"bg-red-50":T?"bg-orange-50":"",children:[r.jsx(G,{className:"font-mono text-xs",children:C.numeroArticulo}),r.jsxs(G,{className:"text-xs",children:[r.jsx("div",{children:C.descripcion}),T&&!L&&r.jsxs("div",{className:"text-[10px] text-orange-600 font-semibold italic",children:["Advertencia: Stock caer por debajo del mnimo (",C.stockSeguridad,")"]}),L&&r.jsxs("div",{className:"text-[10px] text-red-600 font-bold italic",children:["ERROR: No hay suficiente stock disponible (",C.existencia,")"]})]}),r.jsx(G,{className:"text-xs",children:r.jsxs("select",{className:"w-full text-xs border rounded p-1",value:C.planUoM||"",onChange:U=>k(M,"planUoM",U.target.value),children:[r.jsx("option",{value:"",children:"(Sin Plan)"}),h.map(U=>r.jsx("option",{value:U.planId,children:U.descripcion||U.planId},U.planId))]})}),r.jsx(G,{className:"text-xs",children:r.jsxs("select",{className:"w-full text-xs border rounded p-1",value:C.unidadMedida,onChange:U=>k(M,"unidadMedida",U.target.value),children:[r.jsx("option",{value:C.unidadOriginal,children:C.unidadOriginal}),h.find(U=>U.planId===C.planUoM)?.detalles?.filter(U=>U.unidadMedida!==C.unidadOriginal)?.map(U=>r.jsx("option",{value:U.unidadMedida,children:U.unidadMedida},U.unidadMedida))]})}),r.jsx(G,{className:"text-xs text-right",children:r.jsx(ye,{type:"number",className:"h-8 text-right text-xs bg-gray-100 text-gray-500",value:C.cantidadUnidad||1,disabled:!0})}),r.jsx(G,{className:`text-xs text-right font-medium ${C.existencia<=0?"text-red-500":"text-blue-600"}`,children:C.existencia!==void 0?C.existencia.toLocaleString():"-"}),r.jsx(G,{children:r.jsx(ye,{type:"number",className:`h-8 text-right text-xs ${L?"border-red-500 bg-red-50":""}`,value:C.cantidad||"",min:"0.0001",onChange:U=>{const J=parseFloat(U.target.value);k(M,"cantidad",isNaN(J)?0:J)}})}),r.jsx(G,{className:"text-xs text-right font-bold text-gray-800",children:((C.cantidad||0)*(C.cantidadUnidad||1)).toLocaleString()}),r.jsx(G,{children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>I(M),className:"h-9 w-9 p-0 text-red-500 hover:bg-red-50",children:r.jsx(Qt,{size:20})})})]},M)})})]})})]})]}),r.jsx(ul,{isOpen:y,onClose:()=>b(!1),onSelect:O})]})},bL=()=>{const e=Tt(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{c()},[]);const c=async()=>{try{const u=await fetch("http://localhost:5006/api/Sellers");if(u.ok){const m=await u.json();s(m)}else console.error("Failed to fetch sellers")}catch(u){console.error("Error fetching sellers:",u)}finally{l(!1)}},f=async u=>{if(window.confirm("Est seguro de eliminar este vendedor?"))try{(await fetch(`http://localhost:5006/api/Sellers/${u}`,{method:"DELETE"})).ok?c():alert("Error al eliminar")}catch(m){console.error("Error deleting seller:",m)}},h=a.filter(u=>u.name.toLowerCase().includes(t.toLowerCase())||u.code.toLowerCase().includes(t.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Vendedores"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin del equipo de ventas"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(re,{onClick:()=>e("/vendedores/nuevo"),className:"bg-hd-orange hover:bg-orange-600 text-white shadow-md",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Vendedor"]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex gap-4",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ye,{placeholder:"Buscar por nombre o cdigo...",className:"pl-9 bg-white",value:t,onChange:u=>n(u.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-100/80",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[100px] font-semibold text-gray-700",children:"Cdigo"}),r.jsx(ce,{className:"font-semibold text-gray-700",children:"Nombre"}),r.jsx(ce,{className:"font-semibold text-gray-700",children:"Telfono"}),r.jsx(ce,{className:"font-semibold text-gray-700",children:"Email"}),r.jsx(ce,{className:"font-semibold text-gray-700",children:"Estado"}),r.jsx(ce,{className:"text-right font-semibold text-gray-700",children:"Acciones"})]})}),r.jsx(Bt,{children:o?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Cargando vendedores..."})}):h.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No se encontraron vendedores"})}):h.map(u=>r.jsxs(Me,{className:"hover:bg-gray-50 transition-colors",children:[r.jsx(G,{className:"font-medium text-gray-900",children:u.code}),r.jsx(G,{className:"font-medium text-gray-800",children:u.name}),r.jsx(G,{className:"text-gray-600 text-sm",children:u.phone}),r.jsx(G,{className:"text-gray-600 text-sm",children:u.email}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.status==="Active"?"Activo":"Inactivo"})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(`/vendedores/editar/${u.id}`),className:"h-10 w-10 p-2 rounded-full text-blue-600 hover:text-blue-800 hover:bg-blue-100 transition-all border border-transparent hover:border-blue-200 shadow-sm",title:"Editar",children:r.jsx(Uc,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(u.id),className:"h-10 w-10 p-2 rounded-full text-red-600 hover:text-red-800 hover:bg-red-100 transition-all border border-transparent hover:border-red-200 shadow-sm",title:"Eliminar",children:r.jsx(Qt,{className:"h-6 w-6 stroke-[1.5]"})})]})})]},u.id))})]})})]})]})},KC=()=>{const e=Tt(),{id:t}=Ts(),[n,a]=x.useState(""),[s,o]=x.useState({code:"",name:"",phone:"",email:"",status:"Active"}),l=async h=>{try{const u=await fetch(`http://localhost:5006/api/Sellers/${h}`);if(u.ok){const m=await u.json();o(m)}else alert("No se pudo cargar el vendedor")}catch(u){console.error("Error:",u)}};x.useEffect(()=>{t&&l(t)},[t]);const c=h=>{const{name:u,value:m}=h.target;o(p=>({...p,[u]:m}))},f=async()=>{try{if(!s.name){alert("El nombre es obligatorio");return}const h=t?"PUT":"POST",u=t?`http://localhost:5006/api/Sellers/${t}`:"http://localhost:5006/api/Sellers",m={...s,code:s.code||`V${Math.floor(Math.random()*1e3)}`};(await fetch(u,{method:h,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok?a(t?"Vendedor actualizado correctamente.":"Vendedor registrado correctamente."):alert("Error al guardar")}catch(h){console.error("Error:",h),alert("Error de conexin")}};return r.jsxs("div",{className:"flex flex-col h-full bg-gray-100 min-h-screen",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/vendedores"),className:"text-gray-500 hover:text-gray-800",children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Vendedores"}),r.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),r.jsx("span",{className:"text-sm text-gray-800 font-bold",children:t?"Editar Vendedor":"Nuevo Vendedor"})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Tarjeta de Vendedor"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[n&&r.jsx("span",{className:"text-lg font-bold text-blue-400 animate-pulse",children:n}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/vendedores"),children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),r.jsxs(re,{size:"sm",onClick:f,className:"bg-hd-orange hover:bg-orange-600 text-white",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-6 max-w-4xl mx-auto w-full",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Cdigo"}),r.jsx(ye,{name:"code",value:s.code,onChange:c,placeholder:"(Auto)",className:"bg-gray-50"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Nombre *"}),r.jsx(ye,{name:"name",value:s.name,onChange:c,placeholder:"Nombre completo"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Telfono"}),r.jsx(ye,{name:"phone",value:s.phone,onChange:c,placeholder:"(809) 000-0000"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Email"}),r.jsx(ye,{name:"email",value:s.email,onChange:c,placeholder:"vendedor@empresa.com"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Estado"}),r.jsxs("select",{name:"status",value:s.status,onChange:c,className:"flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-hd-orange",children:[r.jsx("option",{value:"Active",children:"Activo"}),r.jsx("option",{value:"Inactive",children:"Inactivo"})]})]})]})})]})},Hu="http://localhost:5006/api",Wu="/Promotions",jL=async()=>{const e=await fetch(`${Hu}${Wu}`);if(!e.ok)throw new Error("Failed to fetch promotions");return e.json()},wL=async e=>{const t=await fetch(`${Hu}${Wu}/${e}`);if(!t.ok)throw new Error("Failed to fetch promotion");return t.json()},NL=async e=>{const t=await fetch(`${Hu}${Wu}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>null);console.error("Backend Error:",n);let a=n?.title||n?.message||"Failed to create promotion";if(n?.errors){const s=Object.entries(n.errors).map(([o,l])=>`${o}: ${l.join(", ")}`).join(`
`);a+=`
${s}`}throw new Error(a)}return t.json()},SL=async(e,t)=>{const n=await fetch(`${Hu}${Wu}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to update promotion");return n.status===204?!0:n.json()},VD=async e=>{const t=await fetch(`${Hu}${Wu}/Calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to calculate promotions");return t.json()},Ku="http://localhost:5006/api",CL=async()=>{const e=await fetch(`${Ku}/ReceiptTemplates`);if(!e.ok)throw new Error("Error al obtener plantillas");return e.json()},kL=async e=>{const t=await fetch(`${Ku}/ReceiptTemplates/${e}`);if(!t.ok)throw new Error("Error al obtener plantilla");return t.json()},PL=async(e="Venta")=>{const t=await fetch(`${Ku}/ReceiptTemplates/default/${e}`);if(!t.ok)throw new Error("Error al obtener plantilla por defecto");return t.json()},EL=async e=>{const t=await fetch(`${Ku}/ReceiptTemplates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error al crear plantilla");return t.json()},AL=async(e,t)=>{const n=await fetch(`${Ku}/ReceiptTemplates/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al actualizar plantilla");return n.status===204?null:n.json()},O0=e=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(e),IL=e=>e?new Date(e).toLocaleDateString():"",DL=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",OL=({template:e,data:t},n)=>{if(!e||!t)return null;const a=e.config&&typeof e.config=="object"?e.config:typeof e.configuracionJSON=="string"?JSON.parse(e.configuracionJSON):null;if(!a)return null;const o=(a.width||80)===80?"302px":"219px",l=h=>h?h.split(".").reduce((u,m)=>u&&u[m]!==void 0?u[m]:void 0,t):"",c=h=>h?h.replace(/\{([\w\.]+)\}/g,(u,m)=>{const p=l(m);return p??""}):"",f=(h,u)=>{const m={textAlign:h.alignment||"left",fontSize:`${h.fontSize||10}px`,fontWeight:h.bold?"bold":"normal",marginTop:`${h.marginTop||0}px`,marginBottom:`${h.marginBottom||0}px`,fontFamily:"monospace",whiteSpace:"pre-wrap",lineHeight:"1.2"};if(h.type==="line"){const v=h.style==="double"?"double":h.style==="dashed"?"dashed":"solid",j=h.style==="double"?"3px":"1px";return r.jsx("div",{style:{borderTop:`${j} ${v} black`,margin:"5px 0"}},u)}if(h.type==="space")return r.jsx("div",{style:{height:`${h.height||10}px`}},u);if(h.type==="image"&&h.source){const v=l(h.source);return v?r.jsx("div",{style:{textAlign:h.alignment||"center",marginBottom:m.marginBottom},children:r.jsx("img",{src:v,alt:"logo",style:{maxHeight:`${h.height||60}px`,maxWidth:"100%"}})},u):null}if(h.type==="table"){const v=t.items||t.receipt&&t.receipt.items||[],y=(h.columns||[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Precio",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}]).filter(k=>k.active!==!1),b=h.rowLayout||[{type:"columns"}],N=h.headerBorder||"dashed",P=N==="none"?"none":`1px ${N} black`,A=(k,I)=>k?k.replace(/{(\w+)}/g,(E,O)=>{let C=I[O];return C===void 0?"":typeof C=="number"&&(O==="price"||O==="total"||O==="tax"||O==="discount")?O0(C):C}):"";return r.jsxs("div",{style:{width:"100%",fontSize:m.fontSize,fontFamily:"monospace",marginBottom:m.marginBottom},children:[r.jsx("div",{style:{display:"flex",borderBottom:P,paddingBottom:"2px",marginBottom:"2px",fontWeight:"bold"},children:y.map((k,I)=>r.jsx("div",{style:{width:`${k.width}%`,textAlign:k.alignment||"left",fontSize:k.fontSize?`${k.fontSize}px`:"inherit",fontWeight:k.bold?"bold":"inherit"},children:k.label},I))}),v.map((k,I)=>r.jsx("div",{style:{marginBottom:"4px",borderBottom:"1px dotted #eee"},children:b.map((E,O)=>E.type==="columns"?r.jsx("div",{style:{display:"flex"},children:y.map((C,M)=>{let F=k[C.field];return F===void 0&&C.field==="qty"&&(F=k.quantity),F===void 0&&C.field==="quantity"&&(F=k.qty),F===void 0&&(F=""),C.format==="currency"&&(F=O0(F)),r.jsx("div",{style:{width:`${C.width}%`,textAlign:C.alignment||"left",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:C.fontSize?`${C.fontSize}px`:"inherit",fontWeight:C.bold?"bold":"normal"},children:F},M)})},O):E.type==="text"?r.jsx("div",{style:{textAlign:E.alignment||"left",fontWeight:E.bold?"bold":"normal",fontSize:E.fontSize?`${E.fontSize}px`:"inherit",whiteSpace:"pre-wrap",marginTop:"1px",marginBottom:"1px"},children:A(E.text,k)},O):E.type==="separator"?r.jsx("div",{style:{borderBottom:E.style==="solid"?"1px solid black":"1px dashed black",margin:"2px 0",width:"100%"}},O):null)},I))]},u)}let p="";return h.type==="composite"||h.text&&h.text.includes("{")?p=c(h.text):h.source?p=l(h.source):p=h.text||"",h.format==="currency"&&(p=O0(p)),h.format==="date"&&(p=IL(p)),h.format==="time"&&(p=DL(p)),h.label&&h.type!=="composite"&&(p=`${h.label} ${p}`),r.jsx("div",{style:m,children:p},u)};return r.jsx("div",{ref:n,className:"receipt-container",style:{width:o,backgroundColor:"white",padding:`${a.padding!==void 0?a.padding:10}px`,margin:"0 auto",color:"black"},children:a.sections.filter(h=>h.visible).sort((h,u)=>h.order-u.order).map(h=>r.jsx("div",{className:"receipt-section",children:h.type==="table"?f({type:"table",...h},0):h.fields&&h.fields.map((u,m)=>f(u,m))},h.id))})},qD=bt.forwardRef(OL),ML="http://localhost:5006/api",GD=async e=>{try{let t;try{const f=e.tipoRecibo||"Venta";t=await PL(f)}catch(f){console.warn("No se encontr plantilla por defecto, usando respaldo",f),t={config:{width:80,sections:[{id:"h",visible:!0,order:1,fields:[{type:"text",text:"RECIBO DE VENTA (RESPALDO)",alignment:"center",bold:!0}]},{id:"i",visible:!0,order:2,fields:[{type:"text",source:"receipt.total",label:"Total:",format:"currency",alignment:"right",fontSize:14}]}]}}}let n={};const a=typeof t.configuracionJSON=="string"?JSON.parse(t.configuracionJSON):t.configuracionJSON||t.config;if(a&&a.sections){const f=a.sections.filter(h=>h.viewBinding&&h.viewBinding.viewName);for(const h of f){const{viewName:u,mappingField:m}=h.viewBinding,p=m.split(".").reduce((v,j)=>v&&v[j]!==void 0?v[j]:null,e);if(p)try{const j=await fetch(`${ML}/SqlMetadata/Execute/${u}?filterField=Numero&filterValue=${p}`);if(j.ok){const y=await j.json();if(y){const b={};Object.keys(y).forEach(N=>b[N]=y[N]),Object.keys(y).forEach(N=>b[N.toLowerCase()]=y[N]),n={...n,...b}}}}catch(v){console.error(`Error cargando datos externos para vista ${u}:`,v)}}}const s={...e,ext:n,company:e.company||{name:"POS CRONO",address:"Calle Principal #1",rnc:"123456789",phone:"809-555-5555"}},o=document.createElement("iframe");o.style.position="absolute",o.style.width="350px",o.style.height="800px",o.style.border="none",o.style.visibility="hidden",document.body.appendChild(o);const l=o.contentWindow.document;l.open(),l.write(`
            <html>
            <head>
                <style>
                    body { margin: 0; padding: 0; font-family: monospace; }
                    @media print {
                        @page { margin: 0; size: auto; }
                        body { margin: 0; }
                    }
                    .receipt-container { margin: 0 !important; border: none !important; box-shadow: none !important; }
                </style>
            </head>
            <body>
                <div id="root"></div>
            </body>
            </html>
        `),l.close(),JI.createRoot(l.getElementById("root")).render(r.jsx(qD,{template:{...t,config:a},data:s})),setTimeout(()=>{o.contentWindow.focus(),o.contentWindow.print(),setTimeout(()=>{document.body.removeChild(o)},1e3)},500)}catch(t){console.error("Error al imprimir recibo:",t),alert("Error al imprimir recibo: Verifique la consola para ms detalles.")}},rc="http://localhost:5006/api",TL=({isOpen:e,onClose:t,cartData:n,onComplete:a,selectedWarehouseId:s=1,creditNote:o=null})=>{const l=o?Math.min(o.amount,n.grandTotal):0,c=Math.max(0,n.grandTotal-l),[f,h]=x.useState(!1),[u,m]=x.useState([]),[p,v]=x.useState(""),[j,y]=x.useState("Efectivo"),[b,N]=x.useState(n.grandTotal.toString()),[P,A]=x.useState(0),[k,I]=x.useState([]),[E,O]=x.useState({id:1,nombre:"CONSUMIDOR FINAL (GENRICO)"}),[C,M]=x.useState(null),[F,V]=x.useState([]),[T,L]=x.useState(null),[U,J]=x.useState(1);x.useEffect(()=>{if(e){q();const R=o?Math.min(o.amount,n.grandTotal):0,H=Math.max(0,n.grandTotal-R);N(H.toFixed(2))}},[e,o,n.grandTotal]);const q=async()=>{try{W();let R=null;try{const Y=await fetch(`${rc}/CompanyConfiguration`);Y.ok&&(R=await Y.json(),M(R))}catch(Y){console.error("Error fetching config:",Y)}const H=await fetch(`${rc}/Clients`);if(H.ok){const Y=await H.json(),ee=Array.isArray(Y)?Y:Y.value||[];I(ee);let me=null;R&&R.defaultClientId&&(me=ee.find(Se=>(Se.id||Se.Id)===R.defaultClientId)),me||(me=ee.find(Se=>(Se.name||Se.Name||"").toUpperCase().includes("CONSUMIDOR FINAL"))),me&&O({id:me.id||me.Id,nombre:me.name||me.Name,tipoNCF:me.tipoNCF||me.TipoNCF,moneda:me.moneda||me.Moneda||"DOP"});const De=await fetch(`${rc}/Monedas`);if(De.ok){const Se=await De.json();V(Se);const We=me?.moneda||me?.Moneda||"DOP",pe=Se.find(ue=>ue.codigo===We);if(pe)L(pe.id),z(pe.id);else{const ue=Se.find(ke=>ke.esFuncional);ue&&(L(ue.id),J(1))}}}}catch(R){console.error("Error loading checkout data:",R)}};x.useEffect(()=>{const R=parseFloat(b)||0,H=o?Math.min(o.amount,n.grandTotal):0,Y=Math.max(0,n.grandTotal-H);A(Math.max(0,R-Y))},[b,n.grandTotal,o]),x.useEffect(()=>{E&&E.tipoNCF&&u.some(H=>H.tipoNCF===E.tipoNCF)&&v(E.tipoNCF)},[E,u]);const W=async()=>{try{const R=await fetch(`${rc}/Ventas/NCF/Sequences`);if(R.ok){const H=await R.json();m(H),H.length>0&&v(H[0].tipoNCF)}}catch(R){console.error("Error loading NCF sequences:",R)}},z=async R=>{if(!R)return;const H=F.find(Y=>Y.id===parseInt(R));if(H&&H.esFuncional){J(1);return}try{const Y=await fetch(`${rc}/Monedas/tasas?monedaId=${R}`);if(Y.ok){const ee=await Y.json();J(ee.tasa||1)}else J(1)}catch(Y){console.error("Error fetching rate:",Y),J(1)}},K=async()=>{try{h(!0);const R={ClienteId:parseInt(E.id),TipoNCF:p,Fecha:new Date,Subtotal:parseFloat(n.total),ITBIS:parseFloat(n.tax),Total:parseFloat(n.grandTotal),AlmacenId:parseInt(s),Usuario:"Gabriel",MetodoPago:j,MontoRecibido:parseFloat(j==="Efectivo"?b:n.grandTotal),Cambio:j==="Efectivo"?P:0,MonedaId:T,TasaCambio:U,Detalles:n.items.map(ee=>{const me=parseFloat(ee.precioUnitario||ee.PrecioUnitario||ee.precio||0);return{ArticuloId:parseInt(ee.id||ee.Id),Cantidad:parseFloat(ee.qty),PrecioUnitario:me,ITBIS:parseFloat(me*ee.qty*.18),TotalLinea:parseFloat(me*ee.qty*1.18),AlmacenId:parseInt(s)}})};if(o){const ee=Math.min(o.amount,n.grandTotal);R.CreditNoteId=parseInt(o.id),R.MontoPagoCredito=ee,ee>=n.grandTotal&&(R.MetodoPago="NotaCredito",R.MontoRecibido=0,R.Cambio=0)}const H=await fetch(`${rc}/Ventas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!H.ok){const ee=await H.json();throw new Error(ee.message||"Error al procesar venta")}const Y=await H.json();try{const ee={receipt:{number:Y.factura||Y.numeroFactura||Y.NumeroFactura,NumeroRecibo:Y.numeroRecibo||Y.NumeroRecibo||Y.factura||Y.numeroFactura,NumeroFactura:Y.factura||Y.numeroFactura||Y.NumeroFactura,ncf:Y.ncf,tipoNCF:Y.tipoNCF,date:Y.fecha,time:Y.fecha,cashier:R.Usuario,client:E.name||E.nombre||Y.nombreCliente||"CONSUMIDOR FINAL",subtotal:Y.subTotal||Y.subtotal||R.Subtotal,tax:Y.itbis||Y.tax||R.ITBIS,total:Y.total||R.Total,paymentMethod:j,receivedAmount:R.MontoRecibido,change:R.Cambio},company:C||{name:"POS CRONO",address:"Calle Principal #1",rnc:"123456789",phone:"809-555-5555"},items:n.items.map(me=>({description:me.name||me.descripcion||me.Descripcion,qty:me.qty,price:parseFloat(me.precioUnitario||me.PrecioUnitario||me.precio||0),total:parseFloat(me.qty)*parseFloat(me.precioUnitario||me.PrecioUnitario||me.precio||0)}))};await GD(ee)}catch(ee){console.error("Error al imprimir recibo:",ee)}a(Y)}catch(R){alert(R.message)}finally{h(!1)}},B=R=>{const H=F.find(me=>me.id===parseInt(T)),Y=H?.simbolo||"$";return`${H?.codigo||"DOP"} ${Y}${R.toLocaleString("en-US",{minimumFractionDigits:2})}`};return r.jsx(li,{open:e,onOpenChange:t,children:r.jsxs(ci,{className:"max-w-3xl bg-white p-0 overflow-hidden border-none shadow-2xl max-h-[92vh] flex flex-col",children:[r.jsxs("div",{className:"bg-hd-black px-4 py-3 text-white flex justify-between items-center shrink-0",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-black italic tracking-tighter",children:"FINALIZAR VENTA"}),r.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest hidden sm:block",children:"Resumen de transaccin"})]}),r.jsx(re,{variant:"ghost",onClick:t,size:"sm",className:"text-white hover:bg-white/10 h-8 w-8 p-0",children:r.jsx(It,{size:18})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 overflow-y-auto",children:[r.jsx("div",{className:"p-5 bg-gray-50 space-y-3 border-b md:border-b-0 md:border-r border-gray-200",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Subtotal"}),r.jsx("span",{className:"text-xs font-bold text-gray-800",children:B(n.total)})]}),n.autoDiscountTotal>0&&r.jsxs("div",{className:"flex justify-between items-center text-hd-orange animate-in fade-in",children:[r.jsx("span",{className:"text-[10px] font-bold uppercase italic",children:"Ahorro Promos"}),r.jsxs("span",{className:"text-xs font-black italic",children:["-",B(n.autoDiscountTotal)]})]}),o&&r.jsxs("div",{className:"flex justify-between items-center text-green-600 animate-in fade-in",children:[r.jsx("span",{className:"text-[10px] font-bold uppercase italic",children:"Nota Crdito"}),r.jsxs("span",{className:"text-xs font-black italic",children:["-",B(Math.min(o.amount,n.grandTotal))]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-200 mb-2",children:[r.jsx("span",{className:"text-xs font-bold text-gray-500",children:"ITBIS (18%)"}),r.jsx("span",{className:"text-xs font-bold text-gray-800",children:B(n.tax)})]}),r.jsxs("div",{className:"flex justify-between items-end bg-white p-3 rounded-lg border border-gray-100 shadow-sm",children:[r.jsx("span",{className:"text-sm font-black text-gray-900 uppercase italic",children:"TOTAL A PAGAR"}),r.jsx("span",{className:"text-2xl font-black text-hd-orange leading-none",children:B(Math.max(0,n.grandTotal-(o?o.amount:0)))})]}),n.appliedPromotions?.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:n.appliedPromotions.map((R,H)=>r.jsxs("span",{className:"text-[8px] bg-hd-orange/10 text-hd-orange px-1.5 py-0.5 rounded-full font-bold border border-hd-orange/20",children:[" ",R]},H))}),U>1&&r.jsx("div",{className:"text-right pt-2",children:r.jsxs("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:["Eq. DOP: ",(n.grandTotal*U).toLocaleString("en-US",{style:"currency",currency:"DOP"})]})})]})}),r.jsxs("div",{className:"p-5 space-y-4 flex flex-col h-full bg-white",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Mtodo de Pago"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>y("Efectivo"),className:`flex flex-row items-center justify-center gap-2 p-3 rounded-lg border transition-all ${j==="Efectivo"?"border-green-500 bg-green-50 text-green-700":"border-gray-100 bg-gray-50 text-gray-400 hover:border-gray-200"}`,children:[r.jsx(xu,{size:18}),r.jsx("span",{className:"text-[10px] font-black uppercase",children:"Efectivo"})]}),r.jsxs("button",{onClick:()=>y("Tarjeta"),className:`flex flex-row items-center justify-center gap-2 p-3 rounded-lg border transition-all ${j==="Tarjeta"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-100 bg-gray-50 text-gray-400 hover:border-gray-200"}`,children:[r.jsx(si,{size:18}),r.jsx("span",{className:"text-[10px] font-black uppercase",children:"Tarjeta"})]})]})]}),j==="Efectivo"&&r.jsxs("div",{className:"space-y-2 animate-in fade-in zoom-in-95 duration-200",children:[r.jsx("div",{className:"grid grid-cols-5 gap-1",children:[100,200,500,1e3,2e3].map(R=>r.jsxs("button",{onClick:()=>N(R.toFixed(2)),className:"bg-gray-100 h-7 rounded text-[10px] font-bold hover:bg-hd-orange hover:text-white transition-all border border-gray-200",children:["$",R]},R))}),r.jsx("button",{onClick:()=>N(n.grandTotal.toFixed(2)),className:"w-full bg-orange-50 h-7 rounded text-[9px] font-black text-hd-orange hover:bg-hd-orange hover:text-white transition-all border border-orange-200 uppercase tracking-widest",children:"Pagar Exacto"}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold text-xs",children:"Recibido:"}),r.jsx(ye,{type:"number",className:"text-xl font-black h-10 text-right pr-3 focus:ring-green-500 border-2 pl-20",value:b,onChange:R=>N(R.target.value),autoFocus:!0})]})}),r.jsxs("div",{className:"flex justify-between items-center bg-green-50 px-3 py-2 rounded-lg border border-green-100",children:[r.jsx("span",{className:"text-[10px] font-bold text-green-800 uppercase tracking-widest",children:"Cambio:"}),r.jsx("span",{className:"text-xl font-black text-green-600",children:B(P)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-100",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Cliente"}),r.jsx("select",{className:"w-full h-8 bg-gray-50 border rounded px-2 text-xs font-bold truncate options:text-xs",value:E.id,onChange:R=>{const H=k.find(Y=>Y.id===parseInt(R.target.value));H&&O(H)},children:k.map((R,H)=>r.jsx("option",{value:R.id,children:R.name||R.Name||R.nombre||R.Nombre},R.id||H))})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Moneda"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("select",{className:"flex-1 h-8 bg-gray-50 border rounded px-2 text-xs font-bold",value:T||"",onChange:R=>{const H=parseInt(R.target.value);L(H),z(H)},children:F.map(R=>r.jsx("option",{value:R.id,children:R.codigo},R.id))}),r.jsx("div",{className:"w-14 h-8 bg-gray-100 border rounded flex items-center justify-center font-mono text-[9px] font-bold text-gray-600",children:U.toFixed(2)})]})]})]})]}),r.jsx(re,{className:`w-full h-12 text-sm font-black uppercase tracking-widest shadow-lg transition-all active:scale-[0.98] ${f?"bg-gray-400":"bg-hd-orange hover:bg-orange-600 shadow-orange-500/20"}`,disabled:f||j==="Efectivo"&&parseFloat(b)<c,onClick:K,children:f?r.jsx(Dn,{className:"animate-spin w-4 h-4"}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Mp,{size:16})," ",c===0?"CONFIRMAR":"COBRAR"]})})]})]})]})})},Ih="http://localhost:5006/api",RL="http://localhost:5006",_L=()=>{const e=ds(),[t,n]=x.useState(null),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState("Todas"),[h,u]=x.useState(!0),[m,p]=x.useState([]),[v,j]=x.useState(""),[y,b]=x.useState(!1),[N,P]=x.useState([]),[A,k]=x.useState(1),I=x.useRef(null),[E,O]=x.useState({}),[C,M]=x.useState({showStockBreakdown:!0,enableBeep:!0}),[F,V]=x.useState([]),[T,L]=x.useState([]),[U,J]=x.useState(0);x.useEffect(()=>{e.state?.creditNoteId&&(n({id:e.state.creditNoteId,amount:e.state.creditAmount}),window.history.replaceState({},document.title))},[e]),x.useEffect(()=>{const fe=()=>{const Ie=localStorage.getItem("pos_config");if(Ie)try{M(JSON.parse(Ie))}catch{}};fe();const Te=()=>fe();window.addEventListener("pos_config_changed",Te),H(),R(),K(),q(),B();const Re=Ie=>{Ie.key==="F2"&&(Ie.preventDefault(),I.current?.focus()),Ie.key===" "&&m.length>0&&!y&&(Ie.preventDefault(),b(!0))};return window.addEventListener("keydown",Re),()=>{window.removeEventListener("keydown",Re),window.removeEventListener("pos_config_changed",Te)}},[m.length,y]);const q=async()=>{try{const fe=await fetch(`${Ih}/Articulos/StockGlobal`);if(fe.ok){const Te=await fe.json(),Re={};Te.forEach(Ie=>{const Qe=(_,X)=>_[X]||_[X.toLowerCase()]||_[X.charAt(0).toUpperCase()+X.slice(1)],Xe=Qe(Ie,"ArticuloId"),tt=Qe(Ie,"AlmacenId"),Q=Qe(Ie,"Cantidad");if(Xe){const _={articuloId:Xe,almacenId:tt,cantidad:Q};Re[Xe]||(Re[Xe]=[]),Re[Xe].push(_)}}),O(Re)}}catch(fe){console.error("Error loading stock breakdown",fe)}},[W,z]=x.useState(null),K=async()=>{try{const fe=await za();P(fe);let Te=null;try{const Re=localStorage.getItem("pos_config");Re&&(Te=JSON.parse(Re).defaultWarehouseId)}catch{}Te&&fe.some(Re=>(Re.id||Re.Id)==Te)?k(parseInt(Te)):fe.length>0&&k(fe[0].id||fe[0].Id)}catch(fe){console.error("Error fetching warehouses:",fe)}};x.useEffect(()=>{(async()=>{try{const Te=await fetch(`${Ih}/CompanyConfiguration`);if(Te.ok){const Ie=(await Te.json()).defaultClientId||1,Qe=await fetch(`${Ih}/Clients/${Ie}`);if(Qe.ok){const Xe=await Qe.json();z(Xe)}}}catch(Te){console.error("Error loading default client:",Te)}})()},[]);const B=async()=>{try{const fe=await go();V(fe)}catch(fe){console.error("Error fetching UoM planes",fe)}},R=async()=>{try{const fe=await fetch(`${Ih}/Categorias`);if(fe.ok){const Te=await fe.json();l([{id:0,nombre:"Todas"},...Te])}}catch(fe){console.error("Error fetching categories:",fe)}},H=async()=>{try{u(!0);const fe=await dl();s(fe)}catch(fe){console.error("Error fetching products:",fe)}finally{u(!1)}};x.useEffect(()=>{const Te=setTimeout(async()=>{if(m.length===0){J(0),L([]);return}try{const Ie={Total:m.reduce((Xe,tt)=>{const Q=tt.precioUnitario||tt.PrecioUnitario||0;return Xe+Q*tt.qty},0),ClientId:W?W.id||W.Id:null,ApplyTo:"POS",Items:m.map(Xe=>({ProductId:Xe.id||Xe.Id,Quantity:Xe.qty||0,Price:Xe.precioUnitario||Xe.PrecioUnitario||0,Category:Xe.categoria||Xe.Categoria||null}))},Qe=await VD(Ie);J(Qe.discountTotal),L(Qe.appliedPromotions||[])}catch(Re){console.error("Promotion calculation failed:",Re)}},500);return()=>clearTimeout(Te)},[m,W]);const Y=a.filter(fe=>{const Te=(fe.descripcion||fe.Descripcion||"").toLowerCase().includes(v.toLowerCase())||(fe.numeroArticulo||fe.NumeroArticulo||"").toLowerCase().includes(v.toLowerCase())||(fe.codigoBarras||fe.CodigoBarras||"").toLowerCase().includes(v.toLowerCase()),Re=c==="Todas"||(fe.categoria||fe.Categoria)===c,Ie=C.filterByCurrency,Qe=tt=>{if(!tt)return"DOP";const Q=tt.toString().trim().toUpperCase();return Q==="RD$"||Q==="PESO"||Q==="DOP"?"DOP":Q==="US$"||Q==="USD"?"USD":Q==="EU"||Q==="EUR"?"EUR":Q};let Xe=!0;if(Ie){const tt=W?.moneda||W?.Moneda||"DOP",Q=Qe(tt);let X=(fe.preciosList||fe.PreciosList||[]).map(ne=>Qe(ne.moneda||ne.Moneda));X.length===0&&(X=(fe.monedasDisponibles||fe.MonedasDisponibles||[]).map(ae=>Qe(ae))),X.length===0&&(X=["DOP"]),X.includes(Q)||(Xe=!1)}return Te&&Re&&Xe}),ee=()=>{if(C.enableBeep!==!1)try{const fe=new(window.AudioContext||window.webkitAudioContext),Te=fe.createOscillator(),Re=fe.createGain();Te.connect(Re),Re.connect(fe.destination),Te.type="sine",Te.frequency.setValueAtTime(880,fe.currentTime),Re.gain.setValueAtTime(.1,fe.currentTime),Re.gain.exponentialRampToValueAtTime(.01,fe.currentTime+.1),Te.start(),Te.stop(fe.currentTime+.1)}catch(fe){console.error("Audio error:",fe)}},me=async fe=>{ee();const Te=fe.id||fe.Id;p(Re=>{if(Re.find(tt=>(tt.id||tt.Id)===Te))return Re.map(tt=>(tt.id||tt.Id)===Te?{...tt,qty:tt.qty+1}:tt);const Qe=fe.UnidadVenta||fe.unidadMedida||"UND";let Xe=fe.NivelPrecio||fe.nivelPrecio||"Precio al Detalle";return C.filterByPriceLevel&&C.selectedPriceLevel&&(Xe=C.selectedPriceLevel),[...Re,{...fe,qty:1,selectedUnit:Qe,selectedLevel:Xe}]});try{const Re=await CD(Te).catch(()=>[]);p(Ie=>Ie.map(Qe=>{if((Qe.id||Qe.Id)===Te){const Xe=fe.PlanMedida||fe.planMedida,tt=F.find(be=>be.planId===Xe),Q=Qe.selectedLevel||"Precio al Detalle",_=Qe.selectedUnit,X=W?.moneda;let ne=null;X&&(ne=Re.find(be=>{const Fe=be.nivelPrecio||be.NivelPrecio||"",ve=be.unidadMedida||be.UnidadMedida||"",qe=be.moneda||be.Moneda||"";return Fe.toUpperCase()===Q.toUpperCase()&&ve.toUpperCase()===_.toUpperCase()&&qe===X}),ne||(ne=Re.find(be=>{const Fe=be.unidadMedida||be.UnidadMedida||"",ve=be.moneda||be.Moneda||"";return Fe.toUpperCase()===_.toUpperCase()&&ve===X}))),ne||(ne=Re.find(be=>{const Fe=be.nivelPrecio||be.NivelPrecio||"",ve=be.unidadMedida||be.UnidadMedida||"";return Fe.toUpperCase()===Q.toUpperCase()&&ve.toUpperCase()===_.toUpperCase()}));let ae=Qe.precioUnitario||Qe.PrecioUnitario,ge=Qe.Moneda||Qe.moneda||"DOP";return ne&&(ae=ne.precio,ge=ne.Moneda||ne.moneda||"DOP"),{...Qe,precios:Re,planObj:tt,precioUnitario:ae,PrecioUnitario:ae,moneda:ge}}return Qe}))}catch(Re){console.error("Error fetching prices for cart item",Re)}},De=(fe,Te)=>{ee(),p(Re=>Re.map(Ie=>{if((Ie.id||Ie.Id)===fe){const Xe=Ie.selectedLevel||"Precio al Detalle",tt=W?.moneda;let Q=null;tt&&(Q=(Ie.precios||[]).find(ne=>{const ae=ne.nivelPrecio||ne.NivelPrecio||"",ge=ne.unidadMedida||ne.UnidadMedida||"",be=ne.moneda||ne.Moneda||"";return ae.toUpperCase()===Xe.toUpperCase()&&ge.toUpperCase()===Te.toUpperCase()&&be===tt}),Q||(Q=(Ie.precios||[]).find(ne=>{const ae=ne.unidadMedida||ne.UnidadMedida||"",ge=ne.moneda||ne.Moneda||"";return ae.toUpperCase()===Te.toUpperCase()&&ge===tt}))),Q||(Q=(Ie.precios||[]).find(ne=>{const ae=ne.nivelPrecio||ne.NivelPrecio||"",ge=ne.unidadMedida||ne.UnidadMedida||"";return ae.toUpperCase()===Xe.toUpperCase()&&ge.toUpperCase()===Te.toUpperCase()}));let _=Ie.precioUnitario||Ie.PrecioUnitario,X=Ie.moneda||"DOP";return Q&&(_=Q.precio,X=Q.Moneda||Q.moneda||"DOP"),{...Ie,selectedUnit:Te,precioUnitario:_,PrecioUnitario:_,moneda:X}}return Ie}))},Se=(fe,Te)=>{Te>0&&ee(),p(Re=>Re.map(Ie=>{if((Ie.id||Ie.Id)===fe){const Xe=Math.max(1,Ie.qty+Te);return{...Ie,qty:Xe}}return Ie}))},We=fe=>{p(Te=>Te.filter(Re=>(Re.id||Re.Id)!==fe))},pe=m.reduce((fe,Te)=>fe+(Te.precioUnitario||Te.PrecioUnitario||0)*Te.qty,0),ue=(pe-U)*.18,ke=pe-U+ue,se=fe=>{alert(`Venta registrada: ${fe.factura}
NCF: ${fe.ncf}`),p([]),b(!1),H(),q()};return r.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-64px)] overflow-hidden bg-gray-100 -m-6 animate-in fade-in duration-500 relative",children:[r.jsx(TL,{isOpen:y,onClose:()=>b(!1),cartData:{items:m,total:pe,tax:ue,grandTotal:ke,autoDiscountTotal:U,appliedPromotions:T},onComplete:se,selectedWarehouseId:A,creditNote:t}),t&&r.jsxs("div",{className:"absolute top-0 left-0 right-0 h-10 bg-green-600 text-white z-50 flex items-center justify-between px-6 font-bold text-sm shadow-md animate-in slide-in-from-top",children:[r.jsxs("span",{children:[" NOTA DE CRDITO APLICADA: $",t.amount.toLocaleString()]}),r.jsx("button",{onClick:()=>n(null),className:"hover:bg-green-700 px-2 rounded",children:r.jsx(It,{size:16})})]}),r.jsxs("div",{className:"flex-1 flex flex-col border-r border-gray-200 h-full overflow-hidden",children:[r.jsxs("div",{className:"bg-white shadow-sm z-10",children:[r.jsx("div",{className:"p-4 lg:p-6 pb-2",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative group flex-1",children:[r.jsx(Ht,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-hd-orange transition-colors",size:20}),r.jsx("input",{ref:I,type:"text",placeholder:"Escanee o busque [F2]",className:"w-full pl-12 pr-4 py-3 bg-gray-100 rounded-xl border-2 border-transparent focus:border-hd-orange focus:bg-white transition-all text-base lg:text-lg font-bold placeholder:text-gray-400",value:v,onChange:fe=>j(fe.target.value),autoFocus:!0})]}),r.jsxs("div",{className:"flex flex-row lg:flex-col gap-2 lg:gap-1 w-full lg:w-48 items-center lg:items-stretch",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest pl-1 whitespace-nowrap lg:whitespace-normal",children:"Almacn Origen"}),r.jsx("select",{className:"flex-1 lg:flex-none h-[52px] px-4 rounded-xl border-2 border-gray-100 bg-gray-50 font-bold text-gray-700 focus:border-hd-orange transition-all outline-none appearance-none",value:A,onChange:fe=>k(parseInt(fe.target.value)),children:N.map(fe=>r.jsx("option",{value:fe.id,children:fe.nombre},fe.id))})]})]})}),r.jsx("div",{className:"flex gap-2 overflow-x-auto p-4 pt-0 no-scrollbar",children:o.map(fe=>r.jsx("button",{onClick:()=>f(fe.nombre),className:`px-4 py-2 rounded-full text-xs font-black uppercase whitespace-nowrap transition-all ${c===fe.nombre?"bg-hd-orange text-white shadow-lg":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:fe.nombre},fe.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 content-start custom-scrollbar pb-24 lg:pb-6",children:h?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 space-y-4",children:[r.jsx(Dn,{className:"animate-spin",size:48}),r.jsx("p",{className:"font-bold uppercase tracking-widest text-xs",children:"Cargando Inventario..."})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3 lg:gap-4",children:Y.map(fe=>{const Te=fe.id||fe.Id,Re=fe.descripcion||fe.Descripcion,Ie=fe.numeroArticulo||fe.NumeroArticulo;let Qe=fe.precioUnitario||fe.PrecioUnitario||0,Xe="DOP";const tt=fe.preciosList||fe.PreciosList||[];if(W&&W.moneda){const ne=W.moneda,ae=W.nivelPrecio||"General";let ge=tt.find(be=>(be.moneda===ne||be.Moneda===ne)&&(be.nivelPrecio===ae||be.NivelPrecio===ae));ge||(ge=tt.find(be=>be.moneda===ne||be.Moneda===ne)),ge&&(Qe=ge.precio||ge.Precio,Xe=ge.moneda||ge.Moneda)}const Q=E[Te]||[],X=Q.filter(ne=>(ne.almacenId||ne.AlmacenId)==A).reduce((ne,ae)=>ne+(ae.cantidad||ae.Cantidad||0),0);return r.jsxs("div",{onClick:()=>X>0&&me(fe),className:`bg-white rounded-2xl shadow-sm hover:shadow-2xl cursor-pointer transition-all hover:-translate-y-1 border-2 overflow-hidden select-none group flex flex-col h-auto ${X<=0?"opacity-60 grayscale cursor-not-allowed":"hover:border-hd-orange border-transparent"}`,children:[r.jsxs("div",{className:"h-40 bg-gray-100 relative overflow-hidden flex items-center justify-center",children:[fe.imagenUrl||fe.ImagenUrl?r.jsx("img",{src:(fe.imagenUrl||fe.ImagenUrl).startsWith("http")?fe.imagenUrl||fe.ImagenUrl:`${RL}${fe.imagenUrl||fe.imagenUrl}`,alt:Re,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-300",children:[r.jsx(hF,{size:40,strokeWidth:1}),r.jsx("span",{className:"text-[10px] font-bold mt-2",children:"SIN IMAGEN"})]}),r.jsx("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:r.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg shadow-sm ${X>0?"bg-white text-green-600":"bg-red-500 text-white"}`,children:X>0?`${X} UD`:"AGOTADO"})}),C.showStockBreakdown&&Q.length>0&&r.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-black/80 backdrop-blur-sm p-2 text-[10px] text-white flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-20 pointer-events-none",children:[r.jsx("div",{className:"text-[8px] uppercase tracking-widest text-gray-400 border-b border-gray-600 mb-1 pb-0.5",children:"Stock x Almacn"}),Q.map((ne,ae)=>{const ge=ne.almacenId,be=N.find(Z=>(Z.id||Z.Id)==ge),Fe=be?be.nombre||be.Nombre:`Alm ${ge}`,ve=ne.cantidad,qe=ge==A;return r.jsxs("div",{className:`flex justify-between items-center px-1 ${qe?"text-hd-orange font-bold":"text-gray-300"}`,children:[r.jsx("span",{className:"truncate max-w-[70%] text-[9px]",children:Fe}),r.jsx("span",{className:"font-mono font-bold",children:ve})]},ae)})]})]}),r.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] font-black text-gray-300 uppercase truncate tracking-widest mb-1",children:Ie}),r.jsx("h3",{className:"font-bold text-gray-800 text-xs leading-tight line-clamp-2 group-hover:text-hd-orange transition-colors",children:Re})]}),r.jsxs("div",{className:"flex items-end justify-between mt-2",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase",children:"Neto"}),r.jsxs("span",{className:"text-lg font-black text-gray-900 leading-none",children:[Xe," $",Qe.toLocaleString("en-US",{minimumFractionDigits:1})]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-hd-orange group-hover:bg-hd-orange group-hover:text-white transition-all transform group-hover:rotate-90",children:r.jsx(_t,{size:20,strokeWidth:3})})]})]})]},Te)})})})]}),r.jsxs("div",{className:`
                w-full lg:w-[450px] flex flex-col bg-white shadow-2xl z-20 border-l border-gray-100
                fixed lg:relative bottom-0 left-0 right-0 lg:bottom-auto lg:left-auto lg:right-auto
                h-[50vh] lg:h-auto rounded-t-3xl lg:rounded-none transition-all duration-300
                ${m.length>0?"translate-y-0":"translate-y-[90%] lg:translate-y-0"}
            `,children:[r.jsx("div",{className:"lg:hidden w-full flex justify-center py-2 bg-hd-black rounded-t-3xl border-b border-gray-700/50 cursor-pointer",onClick:()=>{},children:r.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full"})}),r.jsx("div",{className:"p-4 lg:p-6 border-b bg-hd-black text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-hd-orange rounded-lg",children:r.jsx(oo,{size:24,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-black text-lg lg:text-xl italic tracking-tighter",children:" BILLING TICKET"}),r.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest truncate max-w-[150px]",children:W?W.name||W.Name:"Cliente General"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"lg:hidden font-mono font-bold text-green-400 text-lg",children:["$",pe.toLocaleString()]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>p([]),className:"text-gray-500 hover:text-red-500 hover:bg-white/10",disabled:m.length===0,children:r.jsx(Qt,{size:20})})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-4 custom-scrollbar bg-gray-50/30",children:m.length===0?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-300 space-y-6 opacity-30 select-none py-10",children:[r.jsx(oo,{size:80,strokeWidth:1}),r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-xl font-black italic",children:"VACO"})})]}):m.map((fe,Te)=>{const Re=fe.id||fe.Id,Ie=fe.descripcion||fe.Descripcion,Qe=fe.precioUnitario||fe.PrecioUnitario||0;return r.jsxs("div",{className:"bg-white p-3 lg:p-4 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4 group animate-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs lg:text-sm font-black text-gray-800 line-clamp-2 leading-tight mb-1",children:Ie}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:"text-xs font-bold text-hd-orange",children:[fe.moneda||"DOP"," $",Qe.toLocaleString()]}),fe.planObj&&r.jsx("select",{className:"text-[10px] h-5 border rounded bg-gray-50 max-w-[80px]",value:fe.selectedUnit||fe.unidadMedida||"UND",onChange:Xe=>De(Re,Xe.target.value),onClick:Xe=>Xe.stopPropagation(),children:(()=>{const Xe=fe.planObj;let tt=[Xe.unidadBase,...Xe.detalles?Xe.detalles.map(ne=>ne.unidadMedida):[]];tt=[...new Set(tt)];const Q=fe.selectedLevel||"Precio al Detalle",X=(fe.precios||[]).filter(ne=>(ne.nivelPrecio||ne.NivelPrecio||"").toUpperCase()===Q.toUpperCase()).map(ne=>(ne.unidadMedida||ne.UnidadMedida||"").toUpperCase());return X.length>0&&(tt=tt.filter(ne=>X.includes(ne.toUpperCase()))),tt.map((ne,ae)=>r.jsx("option",{value:ne,children:ne},ae))})()})]})]}),r.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1 border",children:[r.jsx("button",{onClick:()=>Se(Re,-1),className:"w-8 h-8 flex items-center justify-center hover:bg-white hover:shadow-sm rounded-md transition-all text-gray-500",children:r.jsx(yF,{size:14})}),r.jsx("span",{className:"w-8 lg:w-10 text-center text-xs lg:text-sm font-black text-gray-800",children:fe.qty}),r.jsx("button",{onClick:()=>Se(Re,1),className:"w-8 h-8 flex items-center justify-center hover:bg-white hover:shadow-sm rounded-md transition-all text-gray-500",children:r.jsx(_t,{size:14})})]}),r.jsx("div",{className:"text-right min-w-[60px] lg:min-w-[80px]",children:r.jsxs("p",{className:"text-xs lg:text-sm font-black text-gray-900",children:["$",(Qe*fe.qty).toLocaleString()]})}),r.jsx(_C,{permission:"POS_DELETE_LINE",behavior:"disable",children:r.jsx(re,{onClick:()=>We(Re),className:"text-gray-200 hover:text-red-500 transition-colors",variant:"ghost",size:"icon",children:r.jsx(It,{size:18})})})]},Re+"_"+Te)})}),r.jsxs("div",{className:"p-4 lg:p-8 bg-white border-t space-y-3 lg:space-y-4 shadow-[0_-10px_20px_rgba(0,0,0,0.02)] pb-safe",children:[r.jsx("div",{className:"flex gap-2 mb-2 lg:mb-4 overflow-x-auto pb-2",children:r.jsx(_C,{permission:"POS_APPLY_DISCOUNT",behavior:"disable",children:r.jsxs(re,{variant:"outline",size:"sm",className:"text-xs font-bold uppercase tracking-widest text-hd-orange border-hd-orange/30 hover:bg-hd-orange hover:text-white transition-colors flex items-center gap-2 whitespace-nowrap",children:[r.jsx(Nl,{size:14})," Aplicar Descuento"]})})}),r.jsxs("div",{className:"space-y-1 lg:space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center text-gray-500 font-bold text-[10px] lg:text-xs uppercase tracking-widest",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["$",pe.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),U>0&&r.jsxs("div",{className:"flex justify-between items-center text-hd-orange font-bold text-[10px] lg:text-xs uppercase tracking-widest",children:[r.jsx("span",{children:"Ahorro Promociones"}),r.jsxs("span",{children:["-$",U.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center text-gray-500 font-bold text-[10px] lg:text-xs uppercase tracking-widest",children:[r.jsx("span",{children:"ITBIS (18%)"}),r.jsxs("span",{children:["$",ue.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-end pt-2 border-t-2 border-dashed border-gray-100",children:[r.jsx("span",{className:"text-lg lg:text-xl font-black italic tracking-tighter text-gray-900",children:"NETO A PAGAR"}),r.jsxs("span",{className:"text-3xl lg:text-4xl font-black text-hd-orange tracking-tight",children:["$",ke.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),T.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:T.map((fe,Te)=>r.jsxs("span",{className:"text-[9px] bg-hd-orange/10 text-hd-orange px-2 py-0.5 rounded-full font-bold",children:[" ",fe]},Te))})]}),r.jsxs(re,{onClick:()=>b(!0),disabled:m.length===0,className:"w-full h-14 lg:h-20 bg-hd-black hover:bg-gray-900 text-white rounded-xl lg:rounded-2xl flex flex-col items-center justify-center shadow-2xl shadow-gray-400/20 active:scale-[0.98] transition-all group",children:[r.jsxs("span",{className:"text-xl lg:text-2xl font-black flex items-center gap-3",children:["COBRAR ",r.jsx(si,{className:"group-hover:rotate-12 transition-transform"})]}),r.jsx("span",{className:"text-[9px] lg:text-[10px] font-bold text-gray-400 tracking-[0.3em] uppercase mt-0 lg:mt-1 hidden lg:block",children:"Presione SPACE"})]})]})]})]})},HD="http://localhost:5006/api/Clients",WD=async()=>{const e=await fetch(HD);if(!e.ok)throw new Error("Error al obtener clientes");return await e.json()},$L=async(e,t)=>{const n=await fetch(`${HD}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al actualizar cliente");return n.status===204?!0:await n.json()},$p="http://localhost:5006/api",FL=async()=>{const e=await fetch(`${$p}/Ventas/UnifiedHistory`);if(!e.ok)throw new Error("Error al obtener historial");return e.json()},LL=async e=>{const t=await fetch(`${$p}/Ventas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.message||"Error al crear venta")}return t.json()},KD=async e=>{const t=await fetch(`${$p}/Ventas/${e}`);if(!t.ok)throw new Error("Error al obtener detalle de venta");return t.json()},zL=async()=>{const e=await fetch(`${$p}/Ventas/NCF/Sequences`);if(!e.ok)throw new Error("Error al obtener secuencias NCF");return e.json()},UL=zL,Fp="http://localhost:5006/api",BL=async()=>{const e=await fetch(`${Fp}/Cotizaciones`);if(!e.ok)throw new Error("Error al cargar cotizaciones");return await e.json()},YC=async e=>{const t=await fetch(`${Fp}/Cotizaciones/${e}`);if(!t.ok)throw new Error("Error al cargar detalle de cotizacin");return await t.json()},VL=async e=>{const t=await fetch(`${Fp}/Cotizaciones`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.message||"Error al guardar cotizacin")}return await t.json()},qL=async(e,t)=>{const n=await fetch(`${Fp}/Cotizaciones/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Error al actualizar cotizacin")}return await n.json()},XC="http://localhost:5006/api",YD=({onSelect:e,onCancel:t})=>{const[n,a]=x.useState([]),[s,o]=x.useState(null),[l,c]=x.useState([]),[f,h]=x.useState(!1),[u,m]=x.useState(!1),[p,v]=x.useState("");x.useEffect(()=>{(async()=>{h(!0);try{const b=await fetch(`${XC}/Clients`);if(b.ok){const N=await b.json();a(N)}}catch(b){console.error("Error fetching clients",b)}finally{h(!1)}})()},[]),x.useEffect(()=>{if(!s){c([]);return}(async()=>{m(!0);try{console.log("Fetching invoices for client:",s);const b=await fetch(`${XC}/Ventas/ByClient/${s.id}`);if(b.ok){const N=await b.json();console.log("Invoices loaded:",N),c(N)}else console.error("Failed to fetch invoices:",b.status)}catch(b){console.error("Error fetching invoices",b)}finally{m(!1)}})()},[s]);const j=n.filter(y=>(y.name||"").toLowerCase().includes(p.toLowerCase())||(y.code||"").toLowerCase().includes(p.toLowerCase()));return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-[#F96302] text-white rounded-t-lg",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Seleccionar Factura"}),r.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl",children:""})]}),r.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[r.jsxs("div",{className:"w-1/3 border-r flex flex-col bg-gray-50",children:[r.jsx("div",{className:"p-3 border-b",children:r.jsx("input",{type:"text",placeholder:"Buscar Cliente...",className:"w-full p-2 border rounded",value:p,onChange:y=>v(y.target.value)})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:f?r.jsx("p",{className:"p-4 text-center text-gray-500",children:"Cargando..."}):r.jsx("ul",{children:j.map(y=>r.jsxs("li",{onClick:()=>o(y),className:`p-3 border-b cursor-pointer hover:bg-orange-50 transition ${s?.id===y.id?"bg-orange-100 border-l-4 border-l-[#F96302]":""}`,children:[r.jsx("div",{className:"font-semibold text-gray-700 text-sm",children:y.name}),r.jsx("div",{className:"text-xs text-gray-500",children:y.code})]},y.id))})})]}),r.jsxs("div",{className:"w-2/3 flex flex-col bg-white",children:[r.jsx("div",{className:"p-4 border-b bg-gray-50 h-16 flex items-center",children:s?r.jsxs("h3",{className:"font-bold text-lg",children:["Facturas de: ",r.jsx("span",{className:"text-[#F96302]",children:s.name})]}):r.jsx("p",{className:"text-gray-400 italic",children:"Seleccione un cliente para ver sus facturas"})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?r.jsx("p",{className:"text-center text-gray-500 mt-10",children:"Cargando facturas..."}):l.length>0?r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 text-left text-sm text-gray-600",children:[r.jsx("th",{className:"p-2 border-b",children:"Factura"}),r.jsx("th",{className:"p-2 border-b",children:"Fecha"}),r.jsx("th",{className:"p-2 border-b",children:"NCF"}),r.jsx("th",{className:"p-2 border-b text-right",children:"Total"}),r.jsx("th",{className:"p-2 border-b text-right",children:"Saldo"}),r.jsx("th",{className:"p-2 border-b"})]})}),r.jsx("tbody",{children:l.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[r.jsx("td",{className:"p-2 font-semibold text-gray-700 text-sm",children:y.numeroFactura||y.NumeroFactura}),r.jsx("td",{className:"p-2 text-sm",children:new Date(y.fecha||y.Fecha).toLocaleDateString()}),r.jsx("td",{className:"p-2 text-xs text-gray-500",children:y.ncf||y.NCF}),r.jsxs("td",{className:"p-2 text-right font-mono",children:["$",(y.total||y.Total)?.toFixed(2)]}),r.jsxs("td",{className:"p-2 text-right font-mono text-red-600",children:["$",(y.saldo||y.Saldo)?.toFixed(2)]}),r.jsx("td",{className:"p-2 text-right",children:r.jsx("button",{onClick:()=>e(y),className:"bg-[#F96302] text-white px-3 py-1 rounded text-sm hover:bg-[#d85502] transition",children:"Seleccionar"})})]},y.id||y.Id))})]}):s?r.jsx("p",{className:"text-center text-gray-500 mt-10",children:"No hay facturas registradas para este cliente."}):null})]})]})]})})},GL=({onSelect:e,onCancel:t,clientContextId:n})=>{const[a,s]=x.useState([]),[o,l]=x.useState(!1),[c,f]=x.useState("");x.useEffect(()=>{(async()=>{l(!0);try{const m=await BL();s(m)}catch(m){console.error("Error fetching quotations",m)}finally{l(!1)}})()},[]);const h=a.filter(u=>{const m=n?u.clienteId===n||u.ClienteId===n:!0,p=c.toLowerCase(),v=u.id?.toString().includes(p)||u.clienteNombre?.toLowerCase().includes(p)||u.observaciones?.toLowerCase().includes(p);return m&&v});return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[80vh] flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-blue-600 text-white rounded-t-lg",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Importar Cotizacin"}),r.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl",children:""})]}),r.jsx("div",{className:"p-4 bg-gray-50 border-b",children:r.jsx("input",{type:"text",placeholder:"Buscar por ID o Cliente...",className:"w-full p-2 border rounded",value:c,onChange:u=>f(u.target.value),autoFocus:!0})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o?r.jsx("p",{className:"text-center text-gray-500",children:"Cargando cotizaciones..."}):h.length===0?r.jsxs("p",{className:"text-center text-gray-500",children:["No se encontraron cotizaciones ",n?"para este cliente":"","."]}):r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 text-left text-sm text-gray-600",children:[r.jsx("th",{className:"p-2 border-b",children:"ID"}),r.jsx("th",{className:"p-2 border-b",children:"Fecha"}),r.jsx("th",{className:"p-2 border-b",children:"Cliente"}),r.jsx("th",{className:"p-2 border-b text-right",children:"Total"}),r.jsx("th",{className:"p-2 border-b"})]})}),r.jsx("tbody",{children:h.map(u=>r.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[r.jsx("td",{className:"p-2 font-bold text-blue-600",children:u.id||u.Id}),r.jsx("td",{className:"p-2 text-sm",children:new Date(u.fecha||u.Fecha).toLocaleDateString()}),r.jsx("td",{className:"p-2 text-sm",children:u.clienteNombre||"Sin Nombre"}),r.jsxs("td",{className:"p-2 text-right font-mono font-bold",children:["$",(u.total||u.Total)?.toFixed(2)]}),r.jsx("td",{className:"p-2 text-right",children:r.jsx("button",{onClick:()=>e(u),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition",children:"Importar"})})]},u.id||u.Id))})]})})]})})},HL=({articuloId:e,warehouses:t=[]})=>{const[n,a]=x.useState([]),[s,o]=x.useState(!0),[l,c]=x.useState(t);x.useEffect(()=>{let u=!0;return e&&(async()=>{o(!0);try{const p=await qF(e);if(l.length===0){const v=await za();u&&c(v)}u&&a(p)}catch(p){console.error("Error fetching stock tooltip:",p)}finally{u&&o(!1)}})(),()=>{u=!1}},[e]);const f=l.map(u=>{const m=u.id||u.Id,p=n.find(v=>{const j=v.almacenId||v.AlmacenId;return String(j)===String(m)});return{name:u.nombre||u.Nombre,qty:p?p.cantidad||p.Cantidad:0,id:m}}).filter(u=>u.qty!==0),h=n.reduce((u,m)=>u+(m.cantidad||m.Cantidad||0),0);return r.jsxs("div",{className:"absolute left-0 bottom-full mb-1 z-[9999] bg-black/90 backdrop-blur-md border border-gray-700 shadow-2xl rounded-md p-2 min-w-[200px] text-xs text-white animate-in fade-in zoom-in duration-200 pointer-events-none",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-600 pb-1 mb-1",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] uppercase tracking-widest text-gray-400",children:"Existencias"}),r.jsxs("span",{className:"text-[8px] text-gray-500 font-mono",children:["ID: ",e]})]}),r.jsx("span",{className:`font-bold text-sm ${h>0?"text-green-400":"text-red-400"}`,children:h})]}),s?r.jsx("div",{className:"text-gray-500 text-[10px] italic py-1",children:"Cargando datos..."}):f.length===0?r.jsx("div",{className:"text-gray-500 text-[10px] text-center py-1",children:"Sin existencia registrada"}):r.jsx("div",{className:"space-y-1",children:f.map((u,m)=>r.jsxs("div",{className:"flex justify-between items-center px-1 hover:bg-white/5 rounded",children:[r.jsx("span",{className:"truncate max-w-[70%] text-gray-300 text-[10px]",children:u.name}),r.jsx("span",{className:"font-mono font-bold text-hd-orange",children:u.qty})]},m))}),r.jsx("div",{className:"absolute -bottom-1 left-4 w-2 h-2 bg-black/90 border-r border-b border-gray-700 transform rotate-45"})]})},Lp="http://localhost:5006/api",XD=async e=>{try{const t=await fetch(`${Lp}/Returns/Create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||"Error creating return")}return await t.json()}catch(t){throw t}},WL=async e=>{try{const t=await fetch(`${Lp}/Returns/Report/${e}`);if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||"Error fetching return report")}return await t.json()}catch(t){throw t}},KL=async(e,t)=>{try{const n=new URLSearchParams;e&&n.append("start",e),t&&n.append("end",t);const a=await fetch(`${Lp}/Returns?${n.toString()}`);if(!a.ok)throw new Error("Error fetching returns history");return await a.json()}catch(n){throw n}},YL=async(e,t)=>{try{const n=new URLSearchParams;e&&n.append("start",e),t&&n.append("end",t);const a=await fetch(`${Lp}/CreditNotes?${n.toString()}`);if(!a.ok)throw new Error("Error fetching credit notes history");return await a.json()}catch(n){throw n}},XL=()=>{const e=Tt(),t=ds();x.useEffect(()=>{t.state?.mode==="edit_quotation"&&t.state?.id&&(n(t.state.id),window.history.replaceState({},document.title))},[t]);const n=async oe=>{try{j(!0);const Ae=await YC(oe),we=Ae.header||Ae.Header||Ae,$e=Ae.details||Ae.Details||[];R(oe);let xt=we.almacenId||we.AlmacenId;!xt&&c.length>0&&(xt=c[0].id);const Je=we.monedaId||we.MonedaId,Et=we.tasaCambio||we.TasaCambio||1;if(E(Zt=>({...Zt,clienteId:we.clienteId||we.ClienteId,fecha:new Date().toISOString().split("T")[0],almacenId:xt,monedaId:Je,tasaCambio:Et,condicionPago:we.terminosPago||we.TerminosPago||"Contado",referencia:`Editando Cotizacin #${we.numeroCotizacion||we.NumeroCotizacion}`})),Je&&Et===1&&m.length>0){const Zt=m.find(Bn=>Bn.id===parseInt(Je));Zt&&!Zt.esFuncional&&le(Je)}const ht=$e.map(Zt=>({id:Date.now()+Math.random(),articuloId:Zt.articuloId||Zt.ArticuloId,codigo:Zt.articuloCodigo||Zt.ArticuloCodigo||"N/A",descripcion:Zt.articuloDescripcion||Zt.ArticuloDescripcion||"Producto",unidad:Zt.unidadMedidaId||Zt.UnidadMedidaId||"UND",cantidad:Zt.cantidad||Zt.Cantidad,precio:Zt.precioUnitario||Zt.PrecioUnitario,descuento:Zt.descuentoMonto||Zt.DescuentoMonto||0,taxRate:.18,total:Zt.totalLinea||Zt.TotalLinea,availablePrices:[]}));K(ht),F(!0),C(!1),Fe(oe);const Kt={clienteId:we.clienteId||we.ClienteId,fecha:new Date().toISOString().split("T")[0],almacenId:xt,monedaId:we.monedaId||we.MonedaId,tasaCambio:Number(we.tasaCambio||we.TasaCambio||1),condicionPago:we.terminosPago||we.TerminosPago||"Contado",referencia:`Editando Cotizacin #${we.numeroCotizacion||we.NumeroCotizacion}`};qe(Zt=>({...Zt,quotation:{header:Kt,items:ht,appliedPromotions:[],lastTransactionId:oe,successMsg:""}})),k(`Cotizacin #${we.numeroCotizacion||we.NumeroCotizacion} cargada para edicin`)}catch(Ae){console.error(Ae),P("Error al cargar la cotizacin.")}finally{j(!1)}},[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState([]),[m,p]=x.useState([]),[v,j]=x.useState(!0),[y,b]=x.useState(!1),[N,P]=x.useState(""),[A,k]=x.useState(""),[I,E]=x.useState({clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1}),[O,C]=x.useState(!1),[M,F]=x.useState(!1),[V,T]=x.useState(!1),[L,U]=x.useState(!1),[J,q]=x.useState(""),W=x.useMemo(()=>{if(!J)return[];const oe=J.toLowerCase();return o.filter(Ae=>Ae.descripcion?.toLowerCase().includes(oe)||Ae.numeroArticulo?.toLowerCase().includes(oe)||Ae.codigoBarras?.toLowerCase().includes(oe)).slice(0,8)},[o,J]),[z,K]=x.useState([]),[B,R]=x.useState(null),[H,Y]=x.useState(!1),[ee,me]=x.useState({taxId:"",address:"",phone:""}),[De,Se]=x.useState("UND"),[We,pe]=x.useState(null),[ue,ke]=x.useState([]),[se,fe]=x.useState(0),[Te,Re]=x.useState(!1),[Ie,Qe]=x.useState(!1),[Xe,tt]=x.useState(null),[Q,_]=x.useState(!1),[X,ne]=x.useState(null),[ae,ge]=x.useState(!1),[be,Fe]=x.useState(null);x.useEffect(()=>{const oe=localStorage.getItem("pos_config");if(oe)try{const Ae=JSON.parse(oe);Ae.distributionDefaultUnit&&Se(Ae.distributionDefaultUnit),ge(!!Ae.enableStockTooltip)}catch(Ae){console.error("Error loading config",Ae)}},[]),x.useEffect(()=>{We&&(setTimeout(()=>{const oe=document.getElementById(`qty-${We}`);oe&&(oe.focus(),oe.select())},100),pe(null))},[We,z]);const[ve,qe]=x.useState({sale:{header:{clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1},items:[],appliedPromotions:[],lastTransactionId:null,successMsg:""},quotation:{header:{clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1},items:[],appliedPromotions:[],lastTransactionId:null,successMsg:""},return:{header:{clienteId:"",fecha:new Date().toISOString().split("T")[0],condicionPago:"Contado",referencia:"",almacenId:"",tipoNCF:"",monedaId:"",tasaCambio:1},items:[],appliedPromotions:[],lastTransactionId:null,successMsg:""}}),Z=oe=>{let Ae="sale";if(M?Ae="quotation":O&&(Ae="return"),Ae===oe)return;qe($e=>({...$e,[Ae]:{header:{...I},items:[...z],appliedPromotions:[...ue],lastTransactionId:be,successMsg:A}}));const we=ve[oe];E({...we.header}),K([...we.items]),ke([...we.appliedPromotions]),Fe(we.lastTransactionId),k(we.successMsg),oe==="quotation"?(F(!0),C(!1)):oe==="return"?(F(!1),C(!0)):(F(!1),C(!1))};x.useEffect(()=>{(async()=>{try{const[Ae,we,$e,xt,Je]=await Promise.all([WD(),dl(),za(),UL(),fetch("http://localhost:5006/api/Monedas").then(ht=>ht.json())]);s(Ae),l(we),f($e),u(xt),p(Je);const Et=t.state?.id||B;if($e.length>0&&!Et){const ht=$e[0].id;E(Kt=>({...Kt,almacenId:ht})),qe(Kt=>({sale:{...Kt.sale,header:{...Kt.sale.header,almacenId:ht}},quotation:{...Kt.quotation,header:{...Kt.quotation.header,almacenId:ht}},return:{...Kt.return,header:{...Kt.return.header,almacenId:ht}}}))}if(xt.length>0,Je.length>0&&!Et){const ht=Je.find(Kt=>Kt.esFuncional);ht&&E(Kt=>({...Kt,monedaId:ht.id,tasaCambio:1}))}}catch(Ae){console.error(Ae),P("Error cargando datos iniciales.")}finally{j(!1)}})()},[]),x.useEffect(()=>{const Ae=setTimeout(async()=>{if(z.length===0){fe(0),ke([]);return}try{const $e={Total:z.reduce((Je,Et)=>{const ht=parseFloat(Et.precio)||0,Kt=parseFloat(Et.cantidad)||0;return Je+ht*Kt},0),ClientId:I.clienteId?parseInt(I.clienteId):null,ApplyTo:"Distribution",Items:z.map(Je=>{const Et=o.find(ht=>ht.id===Je.articuloId);return{ProductId:Je.articuloId,Quantity:parseFloat(Je.cantidad)||0,Price:parseFloat(Je.precio)||0,Category:Et?.categoria||null}})},xt=await VD($e);fe(xt.discountTotal),ke(xt.appliedPromotions||[])}catch(we){console.error("Promotion calculation failed:",we)}},500);return()=>clearTimeout(Ae)},[z,I.clienteId,o]),x.useEffect(()=>{if(m.length>0&&(B||t.state?.id)){const oe=I.monedaId,Ae=I.tasaCambio;if(oe&&Ae===1){const we=m.find($e=>$e.id===parseInt(oe));we&&!we.esFuncional&&le(oe)}}},[m,B,I.monedaId]);const le=async oe=>{if(!oe)return;const Ae=m.find(we=>we.id===parseInt(oe));if(Ae&&Ae.esFuncional){E(we=>({...we,tasaCambio:1}));return}try{const $e=await fetch(`http://localhost:5006/api/Monedas/tasas?monedaId=${oe}`);if($e.ok){const xt=await $e.json();E(Je=>({...Je,tasaCambio:xt.tasa||1}))}}catch(we){console.error("Error fetching rate:",we)}},Ce=x.useMemo(()=>{let oe=0,Ae=0;z.forEach(Et=>{const ht=parseFloat(Et.cantidad)||0,Kt=parseFloat(Et.precio)||0,Zt=parseFloat(Et.descuento)||0,bi=ht*Kt-Zt;oe+=bi,Ae+=bi*(Et.taxRate||0)});const we=oe,$e=(parseFloat(I.descuentoGlobalMonto)||0)+se;let xt=we-$e;xt<0&&(xt=0);let Je=Ae;if(we>0){const Et=xt/we;Je=Ae*Et}else Je=0,xt=0;return{rawSubtotal:we,globalDiscount:$e,subtotal:xt,impuestos:Je,total:xt+Je}},[z,I.descuentoGlobalMonto]),[Oe,Le]=x.useState(null),Ye=(oe,Ae)=>{K(we=>we.map($e=>$e.id!==oe?$e:{...$e,articuloId:Ae.id,codigo:Ae.numeroArticulo||Ae.codigo,descripcion:Ae.descripcion||Ae.nombre,unidad:Ae.unidad||Ae.unidadMedidaId||De,precio:Ae.precio||Ae.precioVenta||0,availablePrices:Ae.preciosList||[],total:0})),Le(null),T(!1)},Ze=oe=>{if(!I.clienteId){alert(" Seleccione un cliente para continuar.");return}const Ae=z.find($e=>$e.articuloId===oe.id);if(Ae){dt(Ae.id,{cantidad:Ae.cantidad+1});return}const we={id:`temp-${Date.now()}-${Math.floor(Math.random()*1e3)}`,articuloId:oe.id||oe.Id,codigo:oe.numeroArticulo||oe.NumeroArticulo||oe.codigo||oe.Codigo,descripcion:oe.descripcion||oe.Descripcion||oe.nombre||oe.Nombre,unidad:oe.unidad||oe.unidadMedida||oe.UnidadMedida||oe.unidadMedidaId||De,cantidad:1,precio:oe.precio||oe.precioVenta||oe.PrecioVenta||0,descuento:0,taxRate:.18,total:0,availablePrices:oe.preciosList||[]};K([...z,we]),pe(we.id),U(!1),q("")},Ot=(oe,Ae)=>{const we=z.find(Et=>Et.id===oe);if(!we)return;let $e=we.precio;const xt=m.find(Et=>Et.id==I.monedaId)?.codigo||"DOP",Je=we.availablePrices.filter(Et=>Et.unidadMedida===Ae&&Et.activo&&Et.moneda===xt);if(Je.length>0&&($e=Je[0].precio,At?.nivelPrecioId)){const Et=Je.find(ht=>ht.nivelPrecioId===At.nivelPrecioId);Et&&($e=Et.precio)}dt(oe,{unidad:Ae,precio:$e})},dt=(oe,Ae)=>{K(we=>we.map($e=>$e.id!==oe?$e:{...$e,...Ae}))},Lt=oe=>{K(Ae=>Ae.filter(we=>we.id!==oe))},br=async()=>{if(!I.clienteId){P("Seleccione un cliente");return}let oe=I.almacenId;if(!oe&&c.length>0&&(oe=c[0].id,E(Ae=>({...Ae,almacenId:oe}))),!oe){P("Seleccione un almacn");return}if(z.length===0){P("Agregue al menos un producto");return}b(!0),P(""),k("");try{if(M){const Ae={Fecha:I.fecha,ClienteId:Number(I.clienteId),AlmacenId:Number(I.almacenId),Usuario:"Admin",Subtotal:Ce.subtotal,ITBIS:Ce.impuestos,Total:Ce.total,DescuentoMonto:Ce.globalDiscount,MonedaId:I.monedaId?Number(I.monedaId):null,TasaCambio:Number(I.tasaCambio),Referencia:I.referencia,TerminosPago:I.condicionPago,Detalles:z.map(we=>({ArticuloId:Number(we.articuloId),Cantidad:Number(we.cantidad),PrecioUnitario:Number(we.precio),ITBIS:(Number(we.cantidad)*Number(we.precio)-(we.descuento||0))*(we.taxRate||0),TotalLinea:Number(we.cantidad)*Number(we.precio)-(we.descuento||0),AlmacenId:Number(I.almacenId),DescuentoMonto:Number(we.descuento||0),UnidadMedidaId:we.unidad}))};if(B)await qL(B,Ae),k("Cotizacin modificada con xito!");else{const we=await VL(Ae);Fe(we.id||we.Id),k(`Cotizacin creada con xito! #${we.numero}`)}}else if(O){const Ae=I.referencia.match(/#(\d+)/),we=Ae?parseInt(Ae[1]):0;if(!we)throw new Error("No se pudo identificar la factura de origen. Asegrese de que la referencia diga 'Factura #...'");const $e={VentaId:we,Razon:I.referencia,TipoAccion:I.condicionPago,TotalReembolsado:Ce.total,Usuario:"Admin",Detalles:z.map(Je=>({ArticuloId:Number(Je.articuloId),Cantidad:Math.abs(Number(Je.cantidad)),PrecioUnitario:Number(Je.precio),RetornarAlStock:!0}))},xt=await XD($e);Fe(xt),k(`Devolucin creada con xito! #${xt}`)}else{const Ae={Fecha:I.fecha,ClienteId:Number(I.clienteId),TipoNCF:I.tipoNCF,AlmacenId:Number(I.almacenId),Usuario:"Admin",Subtotal:Ce.subtotal,ITBIS:Ce.impuestos,Total:Ce.total,MonedaId:I.monedaId?Number(I.monedaId):null,TasaCambio:Number(I.tasaCambio),Referencia:I.referencia,TerminosPago:I.condicionPago,Detalles:z.map($e=>({ArticuloId:Number($e.articuloId),Cantidad:Number($e.cantidad),PrecioUnitario:Number($e.precio),ITBIS:(Number($e.cantidad)*Number($e.precio)-($e.descuento||0))*($e.taxRate||0),TotalLinea:Number($e.cantidad)*Number($e.precio)-($e.descuento||0),AlmacenId:Number(I.almacenId),DescuentoMonto:Number($e.descuento||0),UnidadMedidaId:$e.unidad}))},we=await LL(Ae);Fe(we.id||we.Id),k(`Venta creada con xito! Factura: ${we.factura}`)}}catch(Ae){console.error(Ae),P(Ae.message)}finally{b(!1)}},Xt=async()=>{if(I.clienteId)try{b(!0);const oe=a.find(we=>we.id==I.clienteId);if(!oe)return;const Ae={...oe,taxId:ee.taxId,address:ee.address,phone:ee.phone};await $L(oe.id,Ae),s(we=>we.map($e=>$e.id===oe.id?Ae:$e)),Y(!1),k("Datos del cliente actualizados"),setTimeout(()=>k(""),3e3)}catch(oe){console.error(oe),P("Error al actualizar cliente")}finally{b(!1)}},Ur=()=>{At&&(me({taxId:At.taxId||"",address:At.address||"",phone:At.phone||""}),Y(!0))};x.useEffect(()=>{if(!I.clienteId)return;const oe=a.find(Ae=>Ae.id==I.clienteId);if(oe&&(oe.terminosPago&&E(Ae=>({...Ae,condicionPago:oe.terminosPago})),oe.tipoNCF&&E(Ae=>({...Ae,tipoNCF:oe.tipoNCF})),oe.moneda&&m.length>0)){const Ae=m.find(we=>we.codigo===oe.moneda);Ae&&E(we=>({...we,monedaId:Ae.id,tasaCambio:1}))}},[I.clienteId,a,m]);const At=a.find(oe=>oe.id==I.clienteId),na=At?.tipoNCF&&At.tipoNCF.trim()!=="";x.useEffect(()=>{if(h.length)if(O){const oe=h.find(Ae=>Ae.tipoNCF==="04");oe&&E(Ae=>({...Ae,tipoNCF:oe.tipoNCF}))}else if(na)At?.tipoNCF&&E(oe=>({...oe,tipoNCF:At.tipoNCF}));else{const oe=h.find(Ae=>Ae.tipoNCF==="02")||h[0];oe&&E(Ae=>({...Ae,tipoNCF:oe.tipoNCF}))}},[O,h,na,At]);const wa=async oe=>{if(Re(!1),!!oe){j(!0);try{const Ae=await KD(oe.id||oe.Id);E($e=>({...$e,clienteId:Ae.clienteId||Ae.ClienteId,referencia:`Devolucin Factura #${Ae.numeroFactura||Ae.NumeroFactura}`,monedaId:Ae.monedaId,tipoNCF:"04"}));const we=(Ae.detalles||Ae.Detalles||[]).map($e=>({id:Date.now()+Math.random(),articuloId:$e.articuloId||$e.ArticuloId,codigo:$e.articuloCodigo||"N/A",descripcion:$e.descripcion||$e.Descripcion,unidad:$e.unidadMedida||"UND",cantidad:$e.cantidad||$e.Cantidad,precio:$e.precioUnitario||$e.PrecioUnitario,taxRate:.18,descuento:0,stockActual:0}));K(we),O||C(!0)}catch(Ae){console.error(Ae),alert("Error al importar la factura")}finally{j(!1)}}},xi=async oe=>{if(_(!1),!!oe){j(!0);try{const Ae=await YC(oe.id||oe.Id),we=Ae.header||Ae.Header||Ae,$e=Ae.details||Ae.Details||[],xt=we.monedaId||we.MonedaId,Je=we.tasaCambio||we.TasaCambio||1;if(E(ht=>({...ht,clienteId:we.clienteId||we.ClienteId,monedaId:xt,tasaCambio:Je,referencia:`Desde Cotizacin #${we.numeroCotizacion||we.NumeroCotizacion||we.id||we.Id}`})),xt&&Je===1&&m.length>0){const ht=m.find(Kt=>Kt.id===parseInt(xt));ht&&!ht.esFuncional&&le(xt)}const Et=$e.map(ht=>({id:Date.now()+Math.random(),articuloId:ht.articuloId||ht.ArticuloId,codigo:ht.articuloCodigo||ht.ArticuloCodigo||ht.codigo||"N/A",descripcion:ht.articuloDescripcion||ht.ArticuloDescripcion||ht.descripcion||"Producto",unidad:ht.unidadMedidaId||ht.UnidadMedidaId||ht.unidadMedida||"UND",cantidad:ht.cantidad||ht.Cantidad,precio:ht.precioUnitario||ht.PrecioUnitario,taxRate:ht.itbisPorcentaje?ht.itbisPorcentaje/100:.18,descuento:ht.descuentoMonto||ht.DescuentoMonto||ht.descuento||ht.Descuento||0,stockActual:0}));K(Et),M&&F(!1)}catch(Ae){console.error(Ae),alert("Error al importar la cotizacin")}finally{j(!1)}}};if(v)return r.jsx("div",{className:"p-10 text-center",children:"Cargando datos..."});const vi=()=>{if(!be)return;const Ae="http://localhost:5006/api".replace("/api","");let we="";M?we=`${Ae}/Reports/Cotizacion?id=${be}`:O?we=`${Ae}/Reports/Devolucion?id=${be}`:we=`${Ae}/Reports/Factura?id=${be}`,window.open(we,"_blank")},_s=()=>{if(!M||!be)return;const oe=`Desde Cotizacin #${be}`;Fe(null),k(""),E(Ae=>({...Ae,referencia:oe})),F(!1),C(!1)},yi=()=>{M||O||!be||Qe(!0)},Ga=oe=>{Qe(!1);const Ae=`Devolucin Factura #${be}`;Fe(null),k(""),C(!0),F(!1);const we=h.find($e=>$e.tipoNCF==="04");E($e=>({...$e,referencia:Ae,tipoNCF:we?.tipoNCF||"04",condicionPago:oe}))};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto pb-20 p-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-center justify-between sticky top-0 bg-gray-50/95 backdrop-blur z-20 py-4 lg:py-4 border-b border-gray-200 -mx-6 px-6 gap-4",children:[r.jsxs("div",{className:"w-full lg:w-auto text-center lg:text-left",children:[r.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 flex items-center justify-center lg:justify-start gap-2 whitespace-nowrap",children:M?r.jsx("span",{className:"text-blue-600",children:"Cotizacin"}):O?r.jsx("span",{className:"text-red-500",children:"Devolucin / Nota Crdito"}):"Orden de Venta"}),r.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:M?"Crear nueva cotizacin para cliente":O?"Procesar reembolso o cambio":"Nueva transaccin de venta"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full lg:w-auto",children:[r.jsxs("div",{className:"flex items-center gap-1 lg:gap-2 px-2 lg:px-3 py-1 lg:py-1.5 rounded-full border border-gray-300 shadow-sm bg-gray-50 scale-90 lg:scale-100",children:[r.jsx("button",{onClick:()=>Z("quotation"),className:`px-2 lg:px-3 py-1 rounded-full text-[10px] lg:text-xs font-bold transition-all ${M?"bg-blue-600 text-white shadow":"text-gray-500 hover:bg-gray-200"}`,children:"COTIZACIN"}),r.jsx("button",{onClick:()=>Z("sale"),className:`px-2 lg:px-3 py-1 rounded-full text-[10px] lg:text-xs font-bold transition-all ${!M&&!O?"bg-hd-orange text-white shadow":"text-gray-500 hover:bg-gray-200"}`,children:"VENTA"}),r.jsx("button",{onClick:()=>Z("return"),className:`px-2 lg:px-3 py-1 rounded-full text-[10px] lg:text-xs font-bold transition-all ${O?"bg-red-600 text-white shadow":"text-gray-500 hover:bg-gray-200"}`,children:"DEVOLUCIN"})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center lg:justify-end gap-2 lg:space-x-3 w-full lg:w-auto",children:[!O&&!M&&r.jsxs(re,{variant:"outline",size:"sm",onClick:yi,disabled:!be,className:`border-red-600 text-red-600 hover:bg-red-50 ${be?"":"opacity-50 cursor-not-allowed"} text-xs`,title:be?"Convertir esta venta en una devolucin":"Guarde la venta primero para convertirla",children:[r.jsx(nl,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," ",r.jsx("span",{className:"hidden sm:inline",children:"Convertir a"})," Devolucin"]}),M&&r.jsxs(re,{variant:"outline",size:"sm",onClick:_s,disabled:!be,className:`border-green-600 text-green-600 hover:bg-green-50 ${be?"":"opacity-50 cursor-not-allowed"} text-xs`,title:be?"Convertir esta cotizacin a factura":"Guarde la cotizacin primero para facturarla",children:[r.jsx(gu,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," Facturar ",r.jsx("span",{className:"hidden sm:inline",children:"Cotizacin"})]}),O&&z.length===0&&r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>Re(!0),className:"border-red-600 text-red-600 hover:bg-red-50 text-xs",title:"Importar una factura para devolucin",children:[r.jsx(Ra,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," Importar Factura"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:vi,disabled:!be,className:`border-blue-600 text-blue-600 hover:bg-blue-50 ${be?"":"opacity-50 cursor-not-allowed"} text-xs`,title:be?"Imprimir Documento":"Guarde la transaccin primero para imprimir",children:[r.jsx(La,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," ",r.jsx("span",{className:"hidden sm:inline",children:"Imprimir"})]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e("/ventas/historial"),className:"text-xs",children:[r.jsx(It,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," ",r.jsx("span",{className:"hidden sm:inline",children:"Cancelar"})]}),r.jsx(re,{disabled:y,size:"sm",onClick:br,className:"bg-hd-orange hover:bg-orange-600 text-xs px-2 lg:px-4",children:y?"...":r.jsxs(r.Fragment,{children:[r.jsx(Ft,{className:"mr-1 h-3 w-3 lg:h-4 lg:w-4"})," Guardar"]})})]})]})]}),N&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded flex items-center",children:[r.jsx(zc,{className:"mr-2 h-5 w-5"})," ",N]}),A&&r.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded flex items-center",children:[r.jsx(Ft,{className:"mr-2 h-5 w-5"})," ",A]}),r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs(Be,{className:"mb-4 shadow-sm border-t-4 border-t-hd-orange bg-white",children:[r.jsxs("div",{className:"p-3 grid grid-cols-1 lg:grid-cols-12 gap-4 items-start",children:[r.jsxs("div",{className:"lg:col-span-4 space-y-1",children:[r.jsxs("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide flex justify-between",children:[r.jsx("span",{children:"Cliente"}),At&&r.jsxs("span",{onClick:Ur,className:"text-blue-600 cursor-pointer hover:underline flex items-center gap-1",children:[r.jsx(wF,{size:10})," Editar"]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("select",{className:"flex-1 h-9 rounded-md border border-gray-300 bg-white px-3 text-sm focus:outline-none focus:ring-1 focus:ring-blue-600 font-medium",value:I.clienteId,onChange:oe=>{const Ae=oe.target.value,we=a.find(Je=>Je.id==Ae),$e=we?.tipoNCF||we?.TipoNCF||"";let xt=I.monedaId;if(we?.moneda){const Je=m.find(Et=>Et.codigo===we.moneda);Je&&(xt=Je.id)}E(Je=>({...Je,clienteId:Ae,tipoNCF:$e||Je.tipoNCF,monedaId:xt})),xt!=I.monedaId&&le(xt)},children:[r.jsx("option",{value:"",children:"-- Buscar Cliente --"}),a.map(oe=>r.jsx("option",{value:oe.id,children:oe.name},oe.id))]})}),At&&r.jsxs("div",{className:"flex gap-3 text-[11px] text-gray-600 pt-1",children:[r.jsx("span",{title:"RNC/Cdula",className:"font-mono bg-gray-100 px-1 rounded",children:At.taxId||"N/A"}),r.jsxs("span",{title:"Balance Actual",className:`font-semibold ${At.balance>0?"text-red-600":"text-green-600"}`,children:["Bal: $",At.balance?.toFixed(2)]}),r.jsx("span",{className:"text-gray-400",children:"|"}),r.jsx("span",{title:"Nivel Precio",children:At.nivelPrecio})]})]}),r.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Tipo NCF"}),r.jsxs("select",{className:`w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600 ${na?"bg-gray-50 text-gray-500":""}`,value:I.tipoNCF,onChange:oe=>E({...I,tipoNCF:oe.target.value}),disabled:na||M,children:[r.jsx("option",{value:"",children:M?"-- No Aplica --":"-- Seleccionar --"}),h.map(oe=>r.jsx("option",{value:oe.tipoNCF,children:oe.nombre},oe.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Condicin"}),r.jsx("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600",value:I.condicionPago,onChange:oe=>E({...I,condicionPago:oe.target.value}),children:O?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"Efectivo",children:"Devolucin Efectivo"}),r.jsx("option",{value:"NotaCredito",children:"Nota de Crdito"}),r.jsx("option",{value:"Cambio",children:"Cambio de Mercanca"})]}):r.jsxs(r.Fragment,{children:[r.jsx("option",{children:"Contado"}),r.jsx("option",{children:"Crdito 15 das"}),r.jsx("option",{children:"Crdito 30 das"})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Fecha"}),r.jsx(ye,{type:"date",className:"h-8 text-xs px-2",value:I.fecha,onChange:oe=>E({...I,fecha:oe.target.value})})]})]}),r.jsxs("div",{className:"lg:col-span-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Almacn"}),r.jsx("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600",value:I.almacenId,onChange:oe=>E({...I,almacenId:oe.target.value}),children:c.map(oe=>r.jsx("option",{value:oe.id,children:oe.nombre},oe.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Moneda"}),r.jsxs("select",{className:"w-full h-8 rounded border border-gray-300 bg-white px-2 text-xs focus:ring-1 focus:ring-blue-600",value:I.monedaId,onChange:oe=>{const Ae=oe.target.value;E(we=>({...we,monedaId:Ae})),le(Ae)},children:[r.jsx("option",{value:"",children:"--"}),m.map(oe=>r.jsx("option",{value:oe.id,children:oe.codigo},oe.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Tasa"}),r.jsx(ye,{className:"h-8 text-xs text-right bg-gray-50",value:I.tasaCambio,readOnly:!0})]})]}),r.jsx("div",{className:"lg:col-span-2 space-y-2",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-[11px] font-bold text-gray-500 uppercase tracking-wide",children:"Referencia"}),r.jsx(ye,{className:"h-8 text-xs",placeholder:"Opcional...",value:I.referencia,onChange:oe=>E({...I,referencia:oe.target.value})})]})})]}),At&&r.jsxs("div",{className:"bg-gray-50/80 px-4 py-2 border-t border-gray-100 grid grid-cols-2 md:grid-cols-5 gap-4 text-xs",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Direccin:"}),r.jsx("span",{className:"font-medium text-gray-700",children:At.address||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Telfono:"}),r.jsx("span",{className:"font-medium text-gray-700",children:At.phone||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Vendedor:"}),r.jsx("span",{className:"font-medium text-gray-700",children:At.vendedorId||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 font-bold uppercase mr-2",children:"Lmite:"}),r.jsxs("span",{className:"font-medium text-gray-700",children:["$",(At.creditLimit||0).toLocaleString()]})]})]})]}),r.jsx("div",{className:"flex flex-col lg:flex-row gap-6",children:r.jsxs(Be,{className:"flex-1 shadow-md flex flex-col min-h-[500px]",children:[r.jsxs("div",{className:"bg-[#f0f0f0] border-b border-[#e1e1e1] flex items-center gap-2 px-2 py-1 h-10",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-600 px-2 border-r border-gray-300 mr-2",children:"LNEAS DE VENTA"}),r.jsxs("div",{className:"relative w-64 md:w-80 group",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2 h-4 w-4 text-gray-500 group-focus-within:text-blue-700"}),r.jsx("input",{type:"text",placeholder:"Escriba para buscar...",className:"w-full h-8 pl-9 pr-2 text-sm bg-white border border-gray-300 focus:border-blue-700 hover:border-gray-500 focus:ring-0 focus:outline-none transition-colors placeholder:text-gray-500",value:J,onChange:oe=>{q(oe.target.value),U(!0)},onFocus:()=>U(!0),onKeyDown:oe=>{if(oe.key==="Enter"){if(!I.clienteId){alert(" Seleccione un cliente para buscar productos.");return}W.length>0?(Ze(W[0]),q("")):T(!0)}}}),L&&J&&r.jsx("div",{className:"absolute top-8 left-0 w-[500px] bg-white border border-gray-400 shadow-[0_4px_12px_rgba(0,0,0,0.15)] max-h-80 overflow-y-auto z-50 rounded-sm",children:W.length===0?r.jsxs("div",{className:"p-3 text-center text-gray-500 text-xs cursor-pointer hover:bg-gray-100",onClick:()=>T(!0),children:["Sin resultados. ",r.jsx("span",{className:"text-blue-700 font-semibold hover:underline",children:"Abrir Catlogo Avanzado (F4)"})]}):W.map(oe=>r.jsxs("div",{className:"px-3 py-2 hover:bg-[#EDEBE9] cursor-pointer border-b border-gray-100 grid grid-cols-[1fr,auto] gap-4 items-center group/item transition-colors",onClick:()=>Ze(oe),children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800 text-sm group-hover/item:text-black",children:oe.descripcion}),r.jsxs("div",{className:"text-[11px] text-gray-500 font-mono flex gap-2",children:[r.jsx("span",{className:"text-gray-600",children:oe.numeroArticulo}),oe.codigoBarras&&r.jsxs("span",{className:"text-gray-400",children:["| ",oe.codigoBarras]}),r.jsxs("span",{className:"bg-gray-100 text-gray-600 px-1 rounded border border-gray-200",children:["Disp: ",oe.stockActual||0]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold text-gray-800 text-sm",children:["$",(oe.precioVenta||oe.precioUnitario||0).toFixed(2)]}),r.jsx("div",{className:"text-[10px] text-gray-400",children:oe.unidadMedidaId||"UND"})]})]},oe.id))})]}),r.jsxs("button",{onClick:()=>{if(!I.clienteId){alert(" Seleccione un cliente para abrir el catlogo.");return}T(!0)},className:"flex items-center gap-2 px-3 py-2 text-sm font-bold text-white bg-hd-orange hover:bg-orange-600 transition-colors rounded-md shadow-sm",title:"Abrir catlogo avanzado de productos",children:[r.jsx(_t,{className:"h-4 w-4 text-white"}),r.jsx("span",{children:"Agregar Productos"})]}),r.jsx("div",{className:"flex-grow"})]}),r.jsx("div",{className:"hidden"}),r.jsx(ul,{isOpen:V,onClose:()=>{T(!1),Le(null)},onSelect:oe=>{Oe?Ye(Oe,oe):Ze(oe)},clientContext:{nivelPrecio:At?.nivelPrecio,moneda:m.find(oe=>oe.id==I.monedaId)?.codigo||"DOP"}}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500 ml-auto hidden md:flex px-4 py-2 border-b border-gray-100",children:[r.jsxs("span",{className:"mr-2",children:["Items: ",r.jsx("strong",{children:z.length})]}),r.jsxs("span",{children:["Total Qty: ",r.jsx("strong",{children:z.reduce((oe,Ae)=>oe+Ae.cantidad,0)})]})]}),r.jsx("div",{className:"flex-1 overflow-auto bg-white min-h-[300px]",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-100 sticky top-0 z-10 shadow-sm",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[50px] text-center",children:"#"}),r.jsx(ce,{className:"w-[120px]",children:"Cdigo"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{className:"w-[80px]",children:"Unidad"}),r.jsx(ce,{className:"w-[80px] text-right",children:"Cant."}),r.jsx(ce,{className:"w-[100px] text-right",children:"Precio"}),r.jsx(ce,{className:"w-[80px] text-right",children:"Desc. (%)"}),r.jsx(ce,{className:"w-[90px] text-right",children:"Desc. ($)"}),r.jsx(ce,{className:"w-[90px] text-right",children:"Impuesto"}),r.jsx(ce,{className:"w-[100px] text-right",children:"Total"}),r.jsx(ce,{className:"w-[50px]"})]})}),r.jsxs(Bt,{children:[z.map((oe,Ae)=>r.jsxs(Me,{className:"hover:bg-gray-50 group border-b border-gray-100 last:border-0 transition-colors",children:[r.jsx(G,{className:"text-center text-xs text-gray-400 font-normal",children:Ae+1}),r.jsxs(G,{className:"font-mono text-xs font-semibold text-gray-700 relative",children:[oe.codigo,r.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1 text-gray-400 hover:text-hd-orange",onClick:()=>{Le(oe.id),T(!0)},title:"Editar Artculo",children:r.jsx(Ht,{size:14})})]}),r.jsxs(G,{className:"font-medium text-gray-700 relative",onMouseEnter:()=>ae&&ne(oe.articuloId),onMouseLeave:()=>ae&&ne(null),children:[oe.descripcion,ae&&X===oe.articuloId&&r.jsx(HL,{articuloId:oe.articuloId,warehouses:c})]}),r.jsx(G,{children:(()=>{const we=m.find(Je=>Je.id==I.monedaId)?.codigo||"DOP",$e=(oe.availablePrices||[]).filter(Je=>Je.activo&&(!Je.moneda||Je.moneda===we)),xt=[...new Set($e.map(Je=>Je.unidadMedida))];return oe.unidad&&!xt.includes(oe.unidad)&&xt.unshift(oe.unidad),xt.length>0?r.jsx("div",{className:"relative group",children:r.jsx("select",{className:"w-full bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-xs font-medium text-gray-700",value:oe.unidad,onChange:Je=>Ot(oe.id,Je.target.value),children:xt.map(Je=>r.jsx("option",{value:Je,children:Je},Je))})}):r.jsx("input",{type:"text",className:"w-full bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-xs font-medium text-gray-600 uppercase",value:oe.unidad||De,readOnly:!0})})()}),r.jsx(G,{children:r.jsx("input",{id:`qty-${oe.id}`,type:"number",className:"w-full text-right bg-gray-50 border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 focus:bg-white p-1 h-8 rounded text-sm font-bold",value:oe.cantidad,onChange:we=>{const $e=parseInt(we.target.value);dt(oe.id,{cantidad:isNaN($e)?0:$e})},min:"1",onKeyDown:we=>{we.key==="Enter"&&(we.preventDefault(),we.target.blur())}})}),r.jsx(G,{children:r.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-sm text-gray-600",value:oe.precio,onChange:we=>dt(oe.id,{precio:we.target.value}),onBlur:we=>dt(oe.id,{precio:parseFloat(we.target.value)||0})})}),r.jsx(G,{children:r.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-sm text-gray-600",value:oe.descuentoPorcentaje||"",placeholder:"0%",onChange:we=>{const $e=we.target.value,xt=parseFloat(oe.cantidad)||0,Je=parseFloat(oe.precio)||0,ht=xt*Je*((parseFloat($e)||0)/100);dt(oe.id,{descuentoPorcentaje:$e,descuento:ht.toFixed(2)})},onBlur:we=>{let $e=parseFloat(we.target.value)||0;$e>100&&($e=100),$e<0&&($e=0);const xt=parseFloat(oe.cantidad)||0,Je=parseFloat(oe.precio)||0,ht=xt*Je*($e/100);dt(oe.id,{descuentoPorcentaje:$e,descuento:ht})}})}),r.jsx(G,{children:r.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-0 border-b border-gray-100 focus:border-hd-orange focus:ring-0 p-1 h-8 text-sm text-gray-600",value:oe.descuento||"",placeholder:"0.00",onChange:we=>{const $e=we.target.value,xt=parseFloat($e)||0,Je=parseFloat(oe.cantidad)||0,Et=parseFloat(oe.precio)||0,ht=Je*Et;let Kt=0;ht>0&&(Kt=xt/ht*100),dt(oe.id,{descuento:$e,descuentoPorcentaje:Kt.toFixed(2)})},onBlur:we=>{let $e=parseFloat(we.target.value)||0;const xt=oe.cantidad*oe.precio;$e>xt&&(alert("El descuento no puede ser mayor al monto de la lnea."),$e=0);let Je=0;xt>0&&(Je=$e/xt*100),dt(oe.id,{descuento:$e,descuentoPorcentaje:Je})}})}),r.jsxs(G,{className:"text-right text-xs text-gray-500",children:["$",((oe.cantidad*oe.precio-(oe.descuento||0))*(oe.taxRate||0)).toFixed(2)]}),r.jsxs(G,{className:"text-right font-bold text-gray-900 bg-gray-50/50",children:["$",((oe.cantidad*oe.precio-(oe.descuento||0))*(1+(oe.taxRate||0))).toFixed(2)]}),r.jsx(G,{children:r.jsx("button",{onClick:()=>Lt(oe.id),className:"text-gray-300 hover:text-red-500 transition-colors p-2",children:r.jsx(Qt,{size:16})})})]},oe.id)),z.length===0&&r.jsx(Me,{children:r.jsx(G,{colSpan:8,className:"text-center py-20",children:r.jsxs("div",{className:"flex flex-col items-center opacity-30",children:[r.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-3",children:r.jsx(_t,{className:"h-8 w-8 text-gray-400"})}),r.jsx("div",{className:"text-lg font-medium text-gray-600",children:"Lista Vacia"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Use la barra de bsqueda para agregar productos"})]})})})]})]})}),r.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-b-lg",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[r.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[r.jsx("p",{children:"Usuario: Admin"}),r.jsx("p",{children:"Terminal: POS-01"})]}),r.jsxs("div",{className:"flex gap-8 items-end",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-gray-400 text-xs uppercase mb-1",children:"Subtotal"}),r.jsxs("div",{className:"text-xl font-medium",children:["$",Ce.rawSubtotal.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"text-right flex flex-col items-end",children:[r.jsx("div",{className:"text-gray-400 text-xs uppercase mb-1",children:"Desc. General"}),r.jsxs("div",{className:"flex gap-2 w-48",children:[r.jsxs("div",{className:"relative w-1/2",children:[r.jsx("input",{type:"number",className:"w-full bg-gray-800 border border-gray-700 rounded text-right p-1 text-sm text-white focus:border-hd-orange focus:outline-none",placeholder:"%",value:I.descuentoGlobalPorcentaje||"",onChange:oe=>{const Ae=parseFloat(oe.target.value)||0,we=Ce.rawSubtotal*(Ae/100);E($e=>({...$e,descuentoGlobalPorcentaje:oe.target.value,descuentoGlobalMonto:we.toFixed(2)}))}}),r.jsx("span",{className:"absolute left-1 top-1 text-xs text-gray-500",children:"%"})]}),r.jsx("div",{className:"relative w-1/2",children:r.jsx("input",{type:"number",className:"w-full bg-gray-800 border border-gray-700 rounded text-right p-1 text-sm text-white focus:border-hd-orange focus:outline-none",placeholder:"$",value:I.descuentoGlobalMonto||"",onChange:oe=>{const Ae=parseFloat(oe.target.value)||0;let we=0;Ce.rawSubtotal>0&&(we=Ae/Ce.rawSubtotal*100),E($e=>({...$e,descuentoGlobalMonto:oe.target.value,descuentoGlobalPorcentaje:we.toFixed(2)}))}})})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-gray-400 text-xs uppercase mb-1",children:"Impuestos"}),r.jsxs("div",{className:"text-xl font-medium",children:["$",Ce.impuestos.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"text-right pl-8 border-l border-gray-700",children:[r.jsx("div",{className:`text-sm uppercase font-bold mb-1 ${O?"text-red-500":"text-hd-orange"}`,children:O?"Total a Devolver":"Total General"}),r.jsxs("div",{className:"text-4xl font-bold tracking-tight",children:["$",Ce.total.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),ue.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex flex-wrap gap-2",children:[r.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-500 flex items-center gap-1 w-full mb-1",children:[r.jsx(hD,{size:12,className:"text-hd-orange"})," Promociones Aplicadas:"]}),ue.map((oe,Ae)=>r.jsx("div",{className:"bg-hd-orange/10 border border-hd-orange/30 text-hd-orange px-2 py-0.5 rounded text-[11px] font-bold flex items-center gap-1 animate-in fade-in zoom-in duration-300",children:oe},Ae)),r.jsxs("div",{className:"ml-auto text-hd-orange text-xs font-bold",children:["Ahorro total: -$",se.toFixed(2)]})]})]})]})})]}),r.jsx(li,{open:H,onOpenChange:Y,children:r.jsxs(ci,{className:"sm:max-w-fit",children:[r.jsx(zC,{children:r.jsx(Ky,{children:"Editar Datos del Cliente"})}),r.jsxs("div",{className:"grid gap-4 py-4 px-2",children:[r.jsxs("div",{className:"grid grid-cols-[100px_auto] items-center gap-4",children:[r.jsx("label",{htmlFor:"taxId",className:"text-right text-sm font-bold text-gray-700",children:"RNC/Cdula"}),r.jsx(ye,{id:"taxId",value:ee.taxId,onChange:oe=>me({...ee,taxId:oe.target.value}),className:"h-9 w-[300px]"})]}),r.jsxs("div",{className:"grid grid-cols-[100px_auto] items-center gap-4",children:[r.jsx("label",{htmlFor:"address",className:"text-right text-sm font-bold text-gray-700",children:"Direccin"}),r.jsx(ye,{id:"address",value:ee.address,onChange:oe=>me({...ee,address:oe.target.value}),className:"h-9 w-[300px]"})]}),r.jsxs("div",{className:"grid grid-cols-[100px_auto] items-center gap-4",children:[r.jsx("label",{htmlFor:"phone",className:"text-right text-sm font-bold text-gray-700",children:"Telfono"}),r.jsx(ye,{id:"phone",value:ee.phone,onChange:oe=>me({...ee,phone:oe.target.value}),className:"h-9 w-[300px]"})]})]}),r.jsxs(YF,{children:[r.jsx(re,{variant:"outline",onClick:()=>Y(!1),children:"Cancelar"}),r.jsx(re,{onClick:Xt,className:"bg-hd-orange hover:bg-orange-600 font-bold",children:"Guardar Cambios"})]})]})}),V&&r.jsx(ul,{isOpen:V,onClose:()=>T(!1),onSelect:oe=>{Oe?Ye(Oe,oe):Ze(oe),T(!1)}}),Te&&r.jsx(YD,{isOpen:Te,onClose:()=>Re(!1),onSelect:oe=>{wa(oe),Re(!1)}}),Q&&r.jsx(GL,{isOpen:Q,onClose:()=>_(!1),onSelect:oe=>{xi(oe),_(!1)}}),r.jsx(li,{open:Ie,onOpenChange:Qe,children:r.jsxs(ci,{className:"sm:max-w-3xl",children:[r.jsx(zC,{children:r.jsx(Ky,{className:"text-center text-xl font-bold",children:"Seleccione Mtodo de Devolucin"})}),r.jsxs("div",{className:"grid grid-cols-2 gap-6 py-4",children:[r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(re,{onClick:()=>Ga("Inventario"),onMouseEnter:()=>tt("Inventario"),onMouseLeave:()=>tt(null),className:"bg-slate-800 hover:bg-slate-700 text-white h-16 text-lg font-semibold shadow-md justify-start px-6",children:[r.jsx(Ji,{className:"mr-3 h-6 w-6"})," Solo Devolucin (Inv)"]}),r.jsxs(re,{onClick:()=>Ga("Efectivo"),onMouseEnter:()=>tt("Efectivo"),onMouseLeave:()=>tt(null),className:"bg-red-600 hover:bg-red-700 text-white h-16 text-lg font-semibold shadow-md justify-start px-6",children:[r.jsx(xu,{className:"mr-3 h-6 w-6"})," Reembolso (Efectivo)"]}),r.jsxs(re,{onClick:()=>Ga("NotaCredito"),onMouseEnter:()=>tt("NotaCredito"),onMouseLeave:()=>tt(null),className:"bg-green-600 hover:bg-green-700 text-white h-16 text-lg font-semibold shadow-md justify-start px-6",children:[r.jsx(Sr,{className:"mr-3 h-6 w-6"})," Cambio (Nota Crdito)"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 flex flex-col justify-center items-center text-center",children:[!Xe&&r.jsx("p",{className:"text-gray-400 italic",children:"Pase el mouse sobre una opcin para ver detalles."}),Xe==="Inventario"&&r.jsxs("div",{className:"space-y-3 animate-in fade-in zoom-in duration-200",children:[r.jsx(Ji,{className:"h-12 w-12 text-slate-800 mx-auto"}),r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Solo Devolucin"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 text-left bg-white p-4 rounded shadow-sm",children:[r.jsxs("li",{children:[" ",r.jsx("b",{children:"Inventario:"})," Aumenta (regresa el producto)."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Cliente:"})," No afecta su saldo (movimiento interno)."]}),r.jsx("li",{children:" ideal para correcciones de inventario."})]})]}),Xe==="Efectivo"&&r.jsxs("div",{className:"space-y-3 animate-in fade-in zoom-in duration-200",children:[r.jsx(xu,{className:"h-12 w-12 text-red-600 mx-auto"}),r.jsx("h3",{className:"font-bold text-lg text-red-600",children:"Reembolso Efectivo"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 text-left bg-white p-4 rounded shadow-sm",children:[r.jsxs("li",{children:[" ",r.jsx("b",{children:"Inventario:"})," Aumenta."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Caja:"})," Sale dinero inmediatamente."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Cliente:"})," No afecta su saldo (se liquid la deuda)."]})]})]}),Xe==="NotaCredito"&&r.jsxs("div",{className:"space-y-3 animate-in fade-in zoom-in duration-200",children:[r.jsx(Sr,{className:"h-12 w-12 text-green-600 mx-auto"}),r.jsx("h3",{className:"font-bold text-lg text-green-600",children:"Nota de Crdito"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-2 text-left bg-white p-4 rounded shadow-sm",children:[r.jsxs("li",{children:[" ",r.jsx("b",{children:"Inventario:"})," Aumenta."]}),r.jsxs("li",{children:[" ",r.jsx("b",{children:"Cliente:"})," ",r.jsx("span",{className:"text-green-600 font-bold",children:"Disminuye su deuda"})," o crea saldo a favor."]}),r.jsx("li",{children:" selo para cambios futuros."})]})]})]})]})]})})]})},JL=({isOpen:e,onClose:t,sale:n})=>{if(!n)return null;const a=o=>new Intl.NumberFormat("es-DO",{style:"currency",currency:n.monedaCodigo||"DOP"}).format(o||0),s=async()=>{const o={receipt:{number:n.numeroFactura,NumeroRecibo:n.numeroFactura,NumeroFactura:n.numeroFactura,ncf:n.ncf,tipoNCF:n.tipoNCF,date:n.fecha,time:n.fecha,cashier:n.usuario||"Sistema",client:n.clienteNombre,subtotal:n.subtotal,tax:n.itbis,total:n.total,paymentMethod:n.metodoPago,receivedAmount:n.montoRecibido,change:n.cambio},company:{name:"POS CRONO",address:"Calle Principal #1",rnc:"123456789",phone:"809-555-5555"},items:(n.detalles||[]).map(l=>({description:l.descripcion||"Artculo",qty:l.cantidad,price:l.precioUnitario,total:l.totalLinea}))};await GD(o)};return r.jsx(li,{open:e,onOpenChange:t,children:r.jsxs(ci,{className:"max-w-4xl bg-white p-0 overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex justify-between items-center text-white",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:"Detalle de Venta"}),r.jsx("p",{className:"text-sm text-gray-400 font-mono",children:n.numeroFactura})]}),r.jsx(re,{variant:"ghost",className:"text-white hover:bg-white/10",onClick:t,children:r.jsx(It,{})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Fecha"}),r.jsx("span",{className:"font-semibold text-gray-800",children:new Date(n.fecha).toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Cliente"}),r.jsx("span",{className:"font-semibold text-gray-800",children:n.clienteNombre})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"NCF"}),r.jsx("span",{className:"font-mono font-semibold text-blue-700",children:n.ncf||"N/A"})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Mtodo Pago"}),r.jsx("span",{className:"font-semibold text-gray-800",children:n.metodoPago})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-100 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-gray-600",children:"Cdigo"}),r.jsx("th",{className:"px-4 py-2 text-left text-gray-600",children:"Descripcin"}),r.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Cant"}),r.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Precio"}),r.jsx("th",{className:"px-4 py-2 text-right text-gray-600",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y",children:n.detalles?.map((o,l)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2 font-mono text-xs text-gray-500",children:o.codigo}),r.jsx("td",{className:"px-4 py-2 font-medium text-gray-800",children:o.descripcion}),r.jsx("td",{className:"px-4 py-2 text-right",children:o.cantidad}),r.jsx("td",{className:"px-4 py-2 text-right",children:a(o.precioUnitario)}),r.jsx("td",{className:"px-4 py-2 text-right font-bold",children:a(o.totalLinea)})]},l))})]})}),r.jsxs("div",{className:"flex justify-between items-end border-t pt-4",children:[r.jsx("div",{children:r.jsxs(re,{variant:"outline",onClick:s,className:"flex gap-2 items-center",children:[r.jsx(La,{size:16})," Imprimir Recibo"]})}),r.jsxs("div",{className:"w-64 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:a(n.subtotal)})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"ITBIS:"}),r.jsx("span",{children:a(n.itbis)})]}),r.jsxs("div",{className:"flex justify-between text-xl font-black text-hd-orange border-t pt-2 border-gray-200",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:a(n.total)})]})]})]})]})]})})};function Zo(e,t){return typeof e=="function"?e(t):e}function ya(e,t){return n=>{t.setState(a=>({...a,[e]:Zo(n,a[e])}))}}function zp(e){return e instanceof Function}function QL(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function ZL(e,t){const n=[],a=s=>{s.forEach(o=>{n.push(o);const l=t(o);l!=null&&l.length&&a(l)})};return a(e),n}function St(e,t,n){let a=[],s;return o=>{let l;n.key&&n.debug&&(l=Date.now());const c=e(o);if(!(c.length!==a.length||c.some((u,m)=>a[m]!==u)))return s;a=c;let h;if(n.key&&n.debug&&(h=Date.now()),s=t(...c),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-l)*100)/100,m=Math.round((Date.now()-h)*100)/100,p=m/16,v=(j,y)=>{for(j=String(j);j.length<y;)j=" "+j;return j};console.info(`%c ${v(m,5)} /${v(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return s}}function Ct(e,t,n,a){return{debug:()=>{var s;return(s=e?.debugAll)!=null?s:e[t]},key:!1,onChange:a}}function ez(e,t,n,a){const s=()=>{var l;return(l=o.getValue())!=null?l:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(a),renderValue:s,getContext:St(()=>[e,n,t,o],(l,c,f,h)=>({table:l,column:c,row:f,cell:h,getValue:h.getValue,renderValue:h.renderValue}),Ct(e.options,"debugCells"))};return e._features.forEach(l=>{l.createCell==null||l.createCell(o,n,t,e)},{}),o}function tz(e,t,n,a){var s,o;const c={...e._getDefaultColumnDef(),...t},f=c.accessorKey;let h=(s=(o=c.id)!=null?o:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?s:typeof c.header=="string"?c.header:void 0,u;if(c.accessorFn?u=c.accessorFn:f&&(f.includes(".")?u=p=>{let v=p;for(const y of f.split(".")){var j;v=(j=v)==null?void 0:j[y]}return v}:u=p=>p[c.accessorKey]),!h)throw new Error;let m={id:`${String(h)}`,accessorFn:u,parent:a,depth:n,columnDef:c,columns:[],getFlatColumns:St(()=>[!0],()=>{var p;return[m,...(p=m.columns)==null?void 0:p.flatMap(v=>v.getFlatColumns())]},Ct(e.options,"debugColumns")),getLeafColumns:St(()=>[e._getOrderColumnsFn()],p=>{var v;if((v=m.columns)!=null&&v.length){let j=m.columns.flatMap(y=>y.getLeafColumns());return p(j)}return[m]},Ct(e.options,"debugColumns"))};for(const p of e._features)p.createColumn==null||p.createColumn(m,e);return m}const kn="debugHeaders";function JC(e,t,n){var a;let o={id:(a=n.id)!=null?a:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(o),l},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(l=>{l.createHeader==null||l.createHeader(o,e)}),o}const rz={createTable:e=>{e.getHeaderGroups=St(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a,s)=>{var o,l;const c=(o=a?.map(m=>n.find(p=>p.id===m)).filter(Boolean))!=null?o:[],f=(l=s?.map(m=>n.find(p=>p.id===m)).filter(Boolean))!=null?l:[],h=n.filter(m=>!(a!=null&&a.includes(m.id))&&!(s!=null&&s.includes(m.id)));return Dh(t,[...c,...h,...f],e)},Ct(e.options,kn)),e.getCenterHeaderGroups=St(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a,s)=>(n=n.filter(o=>!(a!=null&&a.includes(o.id))&&!(s!=null&&s.includes(o.id))),Dh(t,n,e,"center")),Ct(e.options,kn)),e.getLeftHeaderGroups=St(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,a)=>{var s;const o=(s=a?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return Dh(t,o,e,"left")},Ct(e.options,kn)),e.getRightHeaderGroups=St(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,a)=>{var s;const o=(s=a?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return Dh(t,o,e,"right")},Ct(e.options,kn)),e.getFooterGroups=St(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Ct(e.options,kn)),e.getLeftFooterGroups=St(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Ct(e.options,kn)),e.getCenterFooterGroups=St(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Ct(e.options,kn)),e.getRightFooterGroups=St(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Ct(e.options,kn)),e.getFlatHeaders=St(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ct(e.options,kn)),e.getLeftFlatHeaders=St(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ct(e.options,kn)),e.getCenterFlatHeaders=St(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ct(e.options,kn)),e.getRightFlatHeaders=St(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ct(e.options,kn)),e.getCenterLeafHeaders=St(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),Ct(e.options,kn)),e.getLeftLeafHeaders=St(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),Ct(e.options,kn)),e.getRightLeafHeaders=St(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),Ct(e.options,kn)),e.getLeafHeaders=St(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,a)=>{var s,o,l,c,f,h;return[...(s=(o=t[0])==null?void 0:o.headers)!=null?s:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(h=a[0])==null?void 0:h.headers)!=null?f:[]].map(u=>u.getLeafHeaders()).flat()},Ct(e.options,kn))}};function Dh(e,t,n,a){var s,o;let l=0;const c=function(p,v){v===void 0&&(v=1),l=Math.max(l,v),p.filter(j=>j.getIsVisible()).forEach(j=>{var y;(y=j.columns)!=null&&y.length&&c(j.columns,v+1)},0)};c(e);let f=[];const h=(p,v)=>{const j={depth:v,id:[a,`${v}`].filter(Boolean).join("_"),headers:[]},y=[];p.forEach(b=>{const N=[...y].reverse()[0],P=b.column.depth===j.depth;let A,k=!1;if(P&&b.column.parent?A=b.column.parent:(A=b.column,k=!0),N&&N?.column===A)N.subHeaders.push(b);else{const I=JC(n,A,{id:[a,v,A.id,b?.id].filter(Boolean).join("_"),isPlaceholder:k,placeholderId:k?`${y.filter(E=>E.column===A).length}`:void 0,depth:v,index:y.length});I.subHeaders.push(b),y.push(I)}j.headers.push(b),b.headerGroup=j}),f.push(j),v>0&&h(y,v-1)},u=t.map((p,v)=>JC(n,p,{depth:l,index:v}));h(u,l-1),f.reverse();const m=p=>p.filter(j=>j.column.getIsVisible()).map(j=>{let y=0,b=0,N=[0];j.subHeaders&&j.subHeaders.length?(N=[],m(j.subHeaders).forEach(A=>{let{colSpan:k,rowSpan:I}=A;y+=k,N.push(I)})):y=1;const P=Math.min(...N);return b=b+P,j.colSpan=y,j.rowSpan=b,{colSpan:y,rowSpan:b}});return m((s=(o=f[0])==null?void 0:o.headers)!=null?s:[]),f}const Ij=(e,t,n,a,s,o,l)=>{let c={id:t,index:a,original:n,depth:s,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const h=e.getColumn(f);if(h!=null&&h.accessorFn)return c._valuesCache[f]=h.accessorFn(c.original,a),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const h=e.getColumn(f);if(h!=null&&h.accessorFn)return h.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=h.columnDef.getUniqueValues(c.original,a),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var h;return(h=c.getValue(f))!=null?h:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>ZL(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?e.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],h=c;for(;;){const u=h.getParentRow();if(!u)break;f.push(u),h=u}return f.reverse()},getAllCells:St(()=>[e.getAllLeafColumns()],f=>f.map(h=>ez(e,c,h,h.id)),Ct(e.options,"debugRows")),_getAllCellsByColumnId:St(()=>[c.getAllCells()],f=>f.reduce((h,u)=>(h[u.column.id]=u,h),{}),Ct(e.options,"debugRows"))};for(let f=0;f<e._features.length;f++){const h=e._features[f];h==null||h.createRow==null||h.createRow(c,e)}return c},nz={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},JD=(e,t,n)=>{var a,s;const o=n==null||(a=n.toString())==null?void 0:a.toLowerCase();return!!(!((s=e.getValue(t))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(o))};JD.autoRemove=e=>os(e);const QD=(e,t,n)=>{var a;return!!(!((a=e.getValue(t))==null||(a=a.toString())==null)&&a.includes(n))};QD.autoRemove=e=>os(e);const ZD=(e,t,n)=>{var a;return((a=e.getValue(t))==null||(a=a.toString())==null?void 0:a.toLowerCase())===n?.toLowerCase()};ZD.autoRemove=e=>os(e);const eO=(e,t,n)=>{var a;return(a=e.getValue(t))==null?void 0:a.includes(n)};eO.autoRemove=e=>os(e);const tO=(e,t,n)=>!n.some(a=>{var s;return!((s=e.getValue(t))!=null&&s.includes(a))});tO.autoRemove=e=>os(e)||!(e!=null&&e.length);const rO=(e,t,n)=>n.some(a=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(a)});rO.autoRemove=e=>os(e)||!(e!=null&&e.length);const nO=(e,t,n)=>e.getValue(t)===n;nO.autoRemove=e=>os(e);const aO=(e,t,n)=>e.getValue(t)==n;aO.autoRemove=e=>os(e);const Dj=(e,t,n)=>{let[a,s]=n;const o=e.getValue(t);return o>=a&&o<=s};Dj.resolveFilterValue=e=>{let[t,n]=e,a=typeof t!="number"?parseFloat(t):t,s=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(a)?-1/0:a,l=n===null||Number.isNaN(s)?1/0:s;if(o>l){const c=o;o=l,l=c}return[o,l]};Dj.autoRemove=e=>os(e)||os(e[0])&&os(e[1]);const Xs={includesString:JD,includesStringSensitive:QD,equalsString:ZD,arrIncludes:eO,arrIncludesAll:tO,arrIncludesSome:rO,equals:nO,weakEquals:aO,inNumberRange:Dj};function os(e){return e==null||e===""}const az={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ya("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],a=n?.getValue(e.id);return typeof a=="string"?Xs.includesString:typeof a=="number"?Xs.inNumberRange:typeof a=="boolean"||a!==null&&typeof a=="object"?Xs.equals:Array.isArray(a)?Xs.arrIncludes:Xs.weakEquals},e.getFilterFn=()=>{var n,a;return zp(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(a=t.options.filterFns)==null?void 0:a[e.columnDef.filterFn])!=null?n:Xs[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,a,s;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((a=t.options.enableColumnFilters)!=null?a:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(a=>a.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,a;return(n=(a=t.getState().columnFilters)==null?void 0:a.findIndex(s=>s.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(a=>{const s=e.getFilterFn(),o=a?.find(u=>u.id===e.id),l=Zo(n,o?o.value:void 0);if(QC(s,l,e)){var c;return(c=a?.filter(u=>u.id!==e.id))!=null?c:[]}const f={id:e.id,value:l};if(o){var h;return(h=a?.map(u=>u.id===e.id?f:u))!=null?h:[]}return a!=null&&a.length?[...a,f]:[f]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),a=s=>{var o;return(o=Zo(t,s))==null?void 0:o.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(QC(f,l.value,c))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(a)},e.resetColumnFilters=t=>{var n,a;e.setColumnFilters(t?[]:(n=(a=e.initialState)==null?void 0:a.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function QC(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const sz=(e,t,n)=>n.reduce((a,s)=>{const o=s.getValue(e);return a+(typeof o=="number"?o:0)},0),oz=(e,t,n)=>{let a;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(a>o||a===void 0&&o>=o)&&(a=o)}),a},iz=(e,t,n)=>{let a;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(a<o||a===void 0&&o>=o)&&(a=o)}),a},lz=(e,t,n)=>{let a,s;return n.forEach(o=>{const l=o.getValue(e);l!=null&&(a===void 0?l>=l&&(a=s=l):(a>l&&(a=l),s<l&&(s=l)))}),[a,s]},cz=(e,t)=>{let n=0,a=0;if(t.forEach(s=>{let o=s.getValue(e);o!=null&&(o=+o)>=o&&(++n,a+=o)}),n)return a/n},dz=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!QL(n))return;if(n.length===1)return n[0];const a=Math.floor(n.length/2),s=n.sort((o,l)=>o-l);return n.length%2!==0?s[a]:(s[a-1]+s[a])/2},uz=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),fz=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,hz=(e,t)=>t.length,M0={sum:sz,min:oz,max:iz,extent:lz,mean:cz,median:dz,unique:uz,uniqueCount:fz,count:hz},mz={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ya("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(a=>a!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,a;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((a=t.options.enableGrouping)!=null?a:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],a=n?.getValue(e.id);if(typeof a=="number")return M0.sum;if(Object.prototype.toString.call(a)==="[object Date]")return M0.extent},e.getAggregationFn=()=>{var n,a;if(!e)throw new Error;return zp(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(a=t.options.aggregationFns)==null?void 0:a[e.columnDef.aggregationFn])!=null?n:M0[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,a;e.setGrouping(t?[]:(n=(a=e.initialState)==null?void 0:a.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const a=t.getColumn(n);return a!=null&&a.columnDef.getGroupingValue?(e._groupingValuesCache[n]=a.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,a)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function pz(e,t,n){if(!(t!=null&&t.length)||!n)return e;const a=e.filter(o=>!t.includes(o.id));return n==="remove"?a:[...t.map(o=>e.find(l=>l.id===o)).filter(Boolean),...a]}const gz={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ya("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=St(n=>[iu(t,n)],n=>n.findIndex(a=>a.id===e.id),Ct(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var a;return((a=iu(t,n)[0])==null?void 0:a.id)===e.id},e.getIsLastColumn=n=>{var a;const s=iu(t,n);return((a=s[s.length-1])==null?void 0:a.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=St(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,a)=>s=>{let o=[];if(!(t!=null&&t.length))o=s;else{const l=[...t],c=[...s];for(;c.length&&l.length;){const f=l.shift(),h=c.findIndex(u=>u.id===f);h>-1&&o.push(c.splice(h,1)[0])}o=[...o,...c]}return pz(o,n,a)},Ct(e.options,"debugTable"))}},T0=()=>({left:[],right:[]}),xz={getInitialState:e=>({columnPinning:T0(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ya("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const a=e.getLeafColumns().map(s=>s.id).filter(Boolean);t.setColumnPinning(s=>{var o,l;if(n==="right"){var c,f;return{left:((c=s?.left)!=null?c:[]).filter(m=>!(a!=null&&a.includes(m))),right:[...((f=s?.right)!=null?f:[]).filter(m=>!(a!=null&&a.includes(m))),...a]}}if(n==="left"){var h,u;return{left:[...((h=s?.left)!=null?h:[]).filter(m=>!(a!=null&&a.includes(m))),...a],right:((u=s?.right)!=null?u:[]).filter(m=>!(a!=null&&a.includes(m)))}}return{left:((o=s?.left)!=null?o:[]).filter(m=>!(a!=null&&a.includes(m))),right:((l=s?.right)!=null?l:[]).filter(m=>!(a!=null&&a.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(a=>{var s,o,l;return((s=a.columnDef.enablePinning)!=null?s:!0)&&((o=(l=t.options.enableColumnPinning)!=null?l:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(c=>c.id),{left:a,right:s}=t.getState().columnPinning,o=n.some(c=>a?.includes(c)),l=n.some(c=>s?.includes(c));return o?"left":l?"right":!1},e.getPinnedIndex=()=>{var n,a;const s=e.getIsPinned();return s?(n=(a=t.getState().columnPinning)==null||(a=a[s])==null?void 0:a.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=St(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,a,s)=>{const o=[...a??[],...s??[]];return n.filter(l=>!o.includes(l.column.id))},Ct(t.options,"debugRows")),e.getLeftVisibleCells=St(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,a)=>(a??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Ct(t.options,"debugRows")),e.getRightVisibleCells=St(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,a)=>(a??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Ct(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,a;return e.setColumnPinning(t?T0():(n=(a=e.initialState)==null?void 0:a.columnPinning)!=null?n:T0())},e.getIsSomeColumnsPinned=t=>{var n;const a=e.getState().columnPinning;if(!t){var s,o;return!!((s=a.left)!=null&&s.length||(o=a.right)!=null&&o.length)}return!!((n=a[t])!=null&&n.length)},e.getLeftLeafColumns=St(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(a=>t.find(s=>s.id===a)).filter(Boolean),Ct(e.options,"debugColumns")),e.getRightLeafColumns=St(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(a=>t.find(s=>s.id===a)).filter(Boolean),Ct(e.options,"debugColumns")),e.getCenterLeafColumns=St(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,a)=>{const s=[...n??[],...a??[]];return t.filter(o=>!s.includes(o.id))},Ct(e.options,"debugColumns"))}};function vz(e){return e||(typeof document<"u"?document:null)}const Oh={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},R0=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),yz={getDefaultColumnDef:()=>Oh,getInitialState:e=>({columnSizing:{},columnSizingInfo:R0(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ya("columnSizing",e),onColumnSizingInfoChange:ya("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,a,s;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Oh.minSize,(a=o??e.columnDef.size)!=null?a:Oh.size),(s=e.columnDef.maxSize)!=null?s:Oh.maxSize)},e.getStart=St(n=>[n,iu(t,n),t.getState().columnSizing],(n,a)=>a.slice(0,e.getIndex(n)).reduce((s,o)=>s+o.getSize(),0),Ct(t.options,"debugColumns")),e.getAfter=St(n=>[n,iu(t,n),t.getState().columnSizing],(n,a)=>a.slice(e.getIndex(n)+1).reduce((s,o)=>s+o.getSize(),0),Ct(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:a,...s}=n;return s})},e.getCanResize=()=>{var n,a;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((a=t.options.enableColumnResizing)!=null?a:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const a=s=>{if(s.subHeaders.length)s.subHeaders.forEach(a);else{var o;n+=(o=s.column.getSize())!=null?o:0}};return a(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const a=t.getColumn(e.column.id),s=a?.getCanResize();return o=>{if(!a||!s||(o.persist==null||o.persist(),_0(o)&&o.touches&&o.touches.length>1))return;const l=e.getSize(),c=e?e.getLeafHeaders().map(N=>[N.column.id,N.column.getSize()]):[[a.id,a.getSize()]],f=_0(o)?Math.round(o.touches[0].clientX):o.clientX,h={},u=(N,P)=>{typeof P=="number"&&(t.setColumnSizingInfo(A=>{var k,I;const E=t.options.columnResizeDirection==="rtl"?-1:1,O=(P-((k=A?.startOffset)!=null?k:0))*E,C=Math.max(O/((I=A?.startSize)!=null?I:0),-.999999);return A.columnSizingStart.forEach(M=>{let[F,V]=M;h[F]=Math.round(Math.max(V+V*C,0)*100)/100}),{...A,deltaOffset:O,deltaPercentage:C}}),(t.options.columnResizeMode==="onChange"||N==="end")&&t.setColumnSizing(A=>({...A,...h})))},m=N=>u("move",N),p=N=>{u("end",N),t.setColumnSizingInfo(P=>({...P,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},v=vz(n),j={moveHandler:N=>m(N.clientX),upHandler:N=>{v?.removeEventListener("mousemove",j.moveHandler),v?.removeEventListener("mouseup",j.upHandler),p(N.clientX)}},y={moveHandler:N=>(N.cancelable&&(N.preventDefault(),N.stopPropagation()),m(N.touches[0].clientX),!1),upHandler:N=>{var P;v?.removeEventListener("touchmove",y.moveHandler),v?.removeEventListener("touchend",y.upHandler),N.cancelable&&(N.preventDefault(),N.stopPropagation()),p((P=N.touches[0])==null?void 0:P.clientX)}},b=bz()?{passive:!1}:!1;_0(o)?(v?.addEventListener("touchmove",y.moveHandler,b),v?.addEventListener("touchend",y.upHandler,b)):(v?.addEventListener("mousemove",j.moveHandler,b),v?.addEventListener("mouseup",j.upHandler,b)),t.setColumnSizingInfo(N=>({...N,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:a.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?R0():(n=e.initialState.columnSizingInfo)!=null?n:R0())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((a,s)=>a+s.getSize(),0))!=null?t:0}}};let Mh=null;function bz(){if(typeof Mh=="boolean")return Mh;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return Mh=e,Mh}function _0(e){return e.type==="touchstart"}const jz={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ya("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(a=>({...a,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,a;const s=e.columns;return(n=s.length?s.some(o=>o.getIsVisible()):(a=t.getState().columnVisibility)==null?void 0:a[e.id])!=null?n:!0},e.getCanHide=()=>{var n,a;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((a=t.options.enableHiding)!=null?a:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=St(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(a=>a.column.getIsVisible()),Ct(t.options,"debugRows")),e.getVisibleCells=St(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,a,s)=>[...n,...a,...s],Ct(t.options,"debugRows"))},createTable:e=>{const t=(n,a)=>St(()=>[a(),a().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Ct(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var a;e.setColumnVisibility(n?{}:(a=e.initialState.columnVisibility)!=null?a:{})},e.toggleAllColumnsVisible=n=>{var a;n=(a=n)!=null?a:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,o)=>({...s,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var a;e.toggleAllColumnsVisible((a=n.target)==null?void 0:a.checked)}}};function iu(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const wz={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Nz={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ya("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const a=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof a=="string"||typeof a=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,a,s,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((a=t.options.enableGlobalFilter)!=null?a:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Xs.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:a}=e.options;return zp(a)?a:a==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[a])!=null?t:Xs[a]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Sz={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ya("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var a,s;if(!t){e._queue(()=>{t=!0});return}if((a=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?a:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=a=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(a),e.toggleAllRowsExpanded=a=>{a??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=a=>{var s,o;e.setExpanded(a?{}:(s=(o=e.initialState)==null?void 0:o.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>a=>{a.persist==null||a.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const a=e.getState().expanded;return a===!0||Object.values(a).some(Boolean)},e.getIsAllRowsExpanded=()=>{const a=e.getState().expanded;return typeof a=="boolean"?a===!0:!(!Object.keys(a).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let a=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const l=o.split(".");a=Math.max(a,l.length)}),a},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(a=>{var s;const o=a===!0?!0:!!(a!=null&&a[e.id]);let l={};if(a===!0?Object.keys(t.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=a,n=(s=n)!=null?s:!o,!o&&n)return{...l,[e.id]:!0};if(o&&!n){const{[e.id]:c,...f}=l;return f}return a})},e.getIsExpanded=()=>{var n;const a=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:a===!0||a?.[e.id])},e.getCanExpand=()=>{var n,a,s;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((a=t.options.enableExpanding)!=null?a:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,a=e;for(;n&&a.parentId;)a=t.getRow(a.parentId,!0),n=a.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Zy=0,eb=10,$0=()=>({pageIndex:Zy,pageSize:eb}),Cz={getInitialState:e=>({...e,pagination:{...$0(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:ya("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var a,s;if(!t){e._queue(()=>{t=!0});return}if((a=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?a:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=a=>{const s=o=>Zo(a,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=a=>{var s;e.setPagination(a?$0():(s=e.initialState.pagination)!=null?s:$0())},e.setPageIndex=a=>{e.setPagination(s=>{let o=Zo(a,s.pageIndex);const l=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...s,pageIndex:o}})},e.resetPageIndex=a=>{var s,o;e.setPageIndex(a?Zy:(s=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?s:Zy)},e.resetPageSize=a=>{var s,o;e.setPageSize(a?eb:(s=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?s:eb)},e.setPageSize=a=>{e.setPagination(s=>{const o=Math.max(1,Zo(a,s.pageSize)),l=s.pageSize*s.pageIndex,c=Math.floor(l/o);return{...s,pageIndex:c,pageSize:o}})},e.setPageCount=a=>e.setPagination(s=>{var o;let l=Zo(a,(o=e.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...s,pageCount:l}}),e.getPageOptions=St(()=>[e.getPageCount()],a=>{let s=[];return a&&a>0&&(s=[...new Array(a)].fill(null).map((o,l)=>l)),s},Ct(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:a}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:a<s-1},e.previousPage=()=>e.setPageIndex(a=>a-1),e.nextPage=()=>e.setPageIndex(a=>a+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var a;return(a=e.options.pageCount)!=null?a:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var a;return(a=e.options.rowCount)!=null?a:e.getPrePaginationRowModel().rows.length}}},F0=()=>({top:[],bottom:[]}),kz={getInitialState:e=>({rowPinning:F0(),...e}),getDefaultOptions:e=>({onRowPinningChange:ya("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,a,s)=>{const o=a?e.getLeafRows().map(f=>{let{id:h}=f;return h}):[],l=s?e.getParentRows().map(f=>{let{id:h}=f;return h}):[],c=new Set([...l,e.id,...o]);t.setRowPinning(f=>{var h,u;if(n==="bottom"){var m,p;return{top:((m=f?.top)!=null?m:[]).filter(y=>!(c!=null&&c.has(y))),bottom:[...((p=f?.bottom)!=null?p:[]).filter(y=>!(c!=null&&c.has(y))),...Array.from(c)]}}if(n==="top"){var v,j;return{top:[...((v=f?.top)!=null?v:[]).filter(y=>!(c!=null&&c.has(y))),...Array.from(c)],bottom:((j=f?.bottom)!=null?j:[]).filter(y=>!(c!=null&&c.has(y)))}}return{top:((h=f?.top)!=null?h:[]).filter(y=>!(c!=null&&c.has(y))),bottom:((u=f?.bottom)!=null?u:[]).filter(y=>!(c!=null&&c.has(y)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:a,enablePinning:s}=t.options;return typeof a=="function"?a(e):(n=a??s)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:a,bottom:s}=t.getState().rowPinning,o=n.some(c=>a?.includes(c)),l=n.some(c=>s?.includes(c));return o?"top":l?"bottom":!1},e.getPinnedIndex=()=>{var n,a;const s=e.getIsPinned();if(!s)return-1;const o=(n=s==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(a=o?.indexOf(e.id))!=null?a:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,a;return e.setRowPinning(t?F0():(n=(a=e.initialState)==null?void 0:a.rowPinning)!=null?n:F0())},e.getIsSomeRowsPinned=t=>{var n;const a=e.getState().rowPinning;if(!t){var s,o;return!!((s=a.top)!=null&&s.length||(o=a.bottom)!=null&&o.length)}return!!((n=a[t])!=null&&n.length)},e._getPinnedRows=(t,n,a)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(n??[]).map(l=>{const c=e.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(l=>t.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:a}))},e.getTopRows=St(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Ct(e.options,"debugRows")),e.getBottomRows=St(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Ct(e.options,"debugRows")),e.getCenterRows=St(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,a)=>{const s=new Set([...n??[],...a??[]]);return t.filter(o=>!s.has(o.id))},Ct(e.options,"debugRows"))}},Pz={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ya("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const a={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(o=>{o.getCanSelect()&&(a[o.id]=!0)}):s.forEach(o=>{delete a[o.id]}),a})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const a=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(o=>{tb(s,o.id,a,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=St(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?L0(e,n):{rows:[],flatRows:[],rowsById:{}},Ct(e.options,"debugTable")),e.getFilteredSelectedRowModel=St(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?L0(e,n):{rows:[],flatRows:[],rowsById:{}},Ct(e.options,"debugTable")),e.getGroupedSelectedRowModel=St(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?L0(e,n):{rows:[],flatRows:[],rowsById:{}},Ct(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let a=!!(t.length&&Object.keys(n).length);return a&&t.some(s=>s.getCanSelect()&&!n[s.id])&&(a=!1),a},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=e.getState();let a=!!t.length;return a&&t.some(s=>!n[s.id])&&(a=!1),a},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,a)=>{const s=e.getIsSelected();t.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!s,e.getCanSelect()&&s===n)return o;const c={...o};return tb(c,e.id,n,(l=a?.selectChildren)!=null?l:!0,t),c})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Oj(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return rb(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return rb(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return a=>{var s;n&&e.toggleSelected((s=a.target)==null?void 0:s.checked)}}}},tb=(e,t,n,a,s)=>{var o;const l=s.getRow(t,!0);n?(l.getCanMultiSelect()||Object.keys(e).forEach(c=>delete e[c]),l.getCanSelect()&&(e[t]=!0)):delete e[t],a&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>tb(e,c.id,n,a,s))};function L0(e,t){const n=e.getState().rowSelection,a=[],s={},o=function(l,c){return l.map(f=>{var h;const u=Oj(f,n);if(u&&(a.push(f),s[f.id]=f),(h=f.subRows)!=null&&h.length&&(f={...f,subRows:o(f.subRows)}),u)return f}).filter(Boolean)};return{rows:o(t.rows),flatRows:a,rowsById:s}}function Oj(e,t){var n;return(n=t[e.id])!=null?n:!1}function rb(e,t,n){var a;if(!((a=e.subRows)!=null&&a.length))return!1;let s=!0,o=!1;return e.subRows.forEach(l=>{if(!(o&&!s)&&(l.getCanSelect()&&(Oj(l,t)?o=!0:s=!1),l.subRows&&l.subRows.length)){const c=rb(l,t);c==="all"?o=!0:(c==="some"&&(o=!0),s=!1)}}),s?"all":o?"some":!1}const nb=/([0-9]+)/gm,Ez=(e,t,n)=>sO(di(e.getValue(n)).toLowerCase(),di(t.getValue(n)).toLowerCase()),Az=(e,t,n)=>sO(di(e.getValue(n)),di(t.getValue(n))),Iz=(e,t,n)=>Mj(di(e.getValue(n)).toLowerCase(),di(t.getValue(n)).toLowerCase()),Dz=(e,t,n)=>Mj(di(e.getValue(n)),di(t.getValue(n))),Oz=(e,t,n)=>{const a=e.getValue(n),s=t.getValue(n);return a>s?1:a<s?-1:0},Mz=(e,t,n)=>Mj(e.getValue(n),t.getValue(n));function Mj(e,t){return e===t?0:e>t?1:-1}function di(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function sO(e,t){const n=e.split(nb).filter(Boolean),a=t.split(nb).filter(Boolean);for(;n.length&&a.length;){const s=n.shift(),o=a.shift(),l=parseInt(s,10),c=parseInt(o,10),f=[l,c].sort();if(isNaN(f[0])){if(s>o)return 1;if(o>s)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-a.length}const Ud={alphanumeric:Ez,alphanumericCaseSensitive:Az,text:Iz,textCaseSensitive:Dz,datetime:Oz,basic:Mz},Tz={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ya("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let a=!1;for(const s of n){const o=s?.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return Ud.datetime;if(typeof o=="string"&&(a=!0,o.split(nb).length>1))return Ud.alphanumeric}return a?Ud.text:Ud.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof n?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,a;if(!e)throw new Error;return zp(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(a=t.options.sortingFns)==null?void 0:a[e.columnDef.sortingFn])!=null?n:Ud[e.columnDef.sortingFn]},e.toggleSorting=(n,a)=>{const s=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(l=>{const c=l?.find(v=>v.id===e.id),f=l?.findIndex(v=>v.id===e.id);let h=[],u,m=o?n:s==="desc";if(l!=null&&l.length&&e.getCanMultiSort()&&a?c?u="toggle":u="add":l!=null&&l.length&&f!==l.length-1?u="replace":c?u="toggle":u="replace",u==="toggle"&&(o||s||(u="remove")),u==="add"){var p;h=[...l,{id:e.id,desc:m}],h.splice(0,h.length-((p=t.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else u==="toggle"?h=l.map(v=>v.id===e.id?{...v,desc:m}:v):u==="remove"?h=l.filter(v=>v.id!==e.id):h=[{id:e.id,desc:m}];return h})},e.getFirstSortDir=()=>{var n,a;return((n=(a=e.columnDef.sortDescFirst)!=null?a:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var a,s;const o=e.getFirstSortDir(),l=e.getIsSorted();return l?l!==o&&((a=t.options.enableSortingRemoval)==null||a)&&(!(n&&(s=t.options.enableMultiRemove)!=null)||s)?!1:l==="desc"?"asc":"desc":o},e.getCanSort=()=>{var n,a;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((a=t.options.enableSorting)!=null?a:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,a;return(n=(a=e.columnDef.enableMultiSort)!=null?a:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const a=(n=t.getState().sorting)==null?void 0:n.find(s=>s.id===e.id);return a?a.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,a;return(n=(a=t.getState().sorting)==null?void 0:a.findIndex(s=>s.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(a=>a.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return a=>{n&&(a.persist==null||a.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(a):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,a;e.setSorting(t?[]:(n=(a=e.initialState)==null?void 0:a.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Rz=[rz,jz,gz,xz,nz,az,wz,Nz,Tz,mz,Sz,Cz,kz,Pz,yz];function _z(e){var t,n;const a=[...Rz,...(t=e._features)!=null?t:[]];let s={_features:a};const o=s._features.reduce((p,v)=>Object.assign(p,v.getDefaultOptions==null?void 0:v.getDefaultOptions(s)),{}),l=p=>s.options.mergeOptions?s.options.mergeOptions(o,p):{...o,...p};let f={...{},...(n=e.initialState)!=null?n:{}};s._features.forEach(p=>{var v;f=(v=p.getInitialState==null?void 0:p.getInitialState(f))!=null?v:f});const h=[];let u=!1;const m={_features:a,options:{...o,...e},initialState:f,_queue:p=>{h.push(p),u||(u=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();u=!1}).catch(v=>setTimeout(()=>{throw v})))},reset:()=>{s.setState(s.initialState)},setOptions:p=>{const v=Zo(p,s.options);s.options=l(v)},getState:()=>s.options.state,setState:p=>{s.options.onStateChange==null||s.options.onStateChange(p)},_getRowId:(p,v,j)=>{var y;return(y=s.options.getRowId==null?void 0:s.options.getRowId(p,v,j))!=null?y:`${j?[j.id,v].join("."):v}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(p,v)=>{let j=(v?s.getPrePaginationRowModel():s.getRowModel()).rowsById[p];if(!j&&(j=s.getCoreRowModel().rowsById[p],!j))throw new Error;return j},_getDefaultColumnDef:St(()=>[s.options.defaultColumn],p=>{var v;return p=(v=p)!=null?v:{},{header:j=>{const y=j.header.column.columnDef;return y.accessorKey?y.accessorKey:y.accessorFn?y.id:null},cell:j=>{var y,b;return(y=(b=j.renderValue())==null||b.toString==null?void 0:b.toString())!=null?y:null},...s._features.reduce((j,y)=>Object.assign(j,y.getDefaultColumnDef==null?void 0:y.getDefaultColumnDef()),{}),...p}},Ct(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:St(()=>[s._getColumnDefs()],p=>{const v=function(j,y,b){return b===void 0&&(b=0),j.map(N=>{const P=tz(s,N,b,y),A=N;return P.columns=A.columns?v(A.columns,P,b+1):[],P})};return v(p)},Ct(e,"debugColumns")),getAllFlatColumns:St(()=>[s.getAllColumns()],p=>p.flatMap(v=>v.getFlatColumns()),Ct(e,"debugColumns")),_getAllFlatColumnsById:St(()=>[s.getAllFlatColumns()],p=>p.reduce((v,j)=>(v[j.id]=j,v),{}),Ct(e,"debugColumns")),getAllLeafColumns:St(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(p,v)=>{let j=p.flatMap(y=>y.getLeafColumns());return v(j)},Ct(e,"debugColumns")),getColumn:p=>s._getAllFlatColumnsById()[p]};Object.assign(s,m);for(let p=0;p<s._features.length;p++){const v=s._features[p];v==null||v.createTable==null||v.createTable(s)}return s}function $z(){return e=>St(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},a=function(s,o,l){o===void 0&&(o=0);const c=[];for(let h=0;h<s.length;h++){const u=Ij(e,e._getRowId(s[h],h,l),s[h],h,o,void 0,l?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,c.push(u),e.options.getSubRows){var f;u.originalSubRows=e.options.getSubRows(s[h],h),(f=u.originalSubRows)!=null&&f.length&&(u.subRows=a(u.originalSubRows,o+1,u))}}return c};return n.rows=a(t),n},Ct(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Fz(e,t,n){return n.options.filterFromLeafRows?Lz(e,t,n):zz(e,t,n)}function Lz(e,t,n){var a;const s=[],o={},l=(a=n.options.maxLeafRowFilterDepth)!=null?a:100,c=function(f,h){h===void 0&&(h=0);const u=[];for(let p=0;p<f.length;p++){var m;let v=f[p];const j=Ij(n,v.id,v.original,v.index,v.depth,void 0,v.parentId);if(j.columnFilters=v.columnFilters,(m=v.subRows)!=null&&m.length&&h<l){if(j.subRows=c(v.subRows,h+1),v=j,t(v)&&!j.subRows.length){u.push(v),o[v.id]=v,s.push(v);continue}if(t(v)||j.subRows.length){u.push(v),o[v.id]=v,s.push(v);continue}}else v=j,t(v)&&(u.push(v),o[v.id]=v,s.push(v))}return u};return{rows:c(e),flatRows:s,rowsById:o}}function zz(e,t,n){var a;const s=[],o={},l=(a=n.options.maxLeafRowFilterDepth)!=null?a:100,c=function(f,h){h===void 0&&(h=0);const u=[];for(let p=0;p<f.length;p++){let v=f[p];if(t(v)){var m;if((m=v.subRows)!=null&&m.length&&h<l){const y=Ij(n,v.id,v.original,v.index,v.depth,void 0,v.parentId);y.subRows=c(v.subRows,h+1),v=y}u.push(v),s.push(v),o[v.id]=v}}return u};return{rows:c(e),flatRows:s,rowsById:o}}function Uz(){return e=>St(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,a)=>{if(!t.rows.length||!(n!=null&&n.length)&&!a){for(let p=0;p<t.flatRows.length;p++)t.flatRows[p].columnFilters={},t.flatRows[p].columnFiltersMeta={};return t}const s=[],o=[];(n??[]).forEach(p=>{var v;const j=e.getColumn(p.id);if(!j)return;const y=j.getFilterFn();y&&s.push({id:p.id,filterFn:y,resolvedValue:(v=y.resolveFilterValue==null?void 0:y.resolveFilterValue(p.value))!=null?v:p.value})});const l=(n??[]).map(p=>p.id),c=e.getGlobalFilterFn(),f=e.getAllLeafColumns().filter(p=>p.getCanGlobalFilter());a&&c&&f.length&&(l.push("__global__"),f.forEach(p=>{var v;o.push({id:p.id,filterFn:c,resolvedValue:(v=c.resolveFilterValue==null?void 0:c.resolveFilterValue(a))!=null?v:a})}));let h,u;for(let p=0;p<t.flatRows.length;p++){const v=t.flatRows[p];if(v.columnFilters={},s.length)for(let j=0;j<s.length;j++){h=s[j];const y=h.id;v.columnFilters[y]=h.filterFn(v,y,h.resolvedValue,b=>{v.columnFiltersMeta[y]=b})}if(o.length){for(let j=0;j<o.length;j++){u=o[j];const y=u.id;if(u.filterFn(v,y,u.resolvedValue,b=>{v.columnFiltersMeta[y]=b})){v.columnFilters.__global__=!0;break}}v.columnFilters.__global__!==!0&&(v.columnFilters.__global__=!1)}}const m=p=>{for(let v=0;v<l.length;v++)if(p.columnFilters[l[v]]===!1)return!1;return!0};return Fz(t.rows,m,e)},Ct(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Bz(){return e=>St(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const a=e.getState().sorting,s=[],o=a.filter(f=>{var h;return(h=e.getColumn(f.id))==null?void 0:h.getCanSort()}),l={};o.forEach(f=>{const h=e.getColumn(f.id);h&&(l[f.id]={sortUndefined:h.columnDef.sortUndefined,invertSorting:h.columnDef.invertSorting,sortingFn:h.getSortingFn()})});const c=f=>{const h=f.map(u=>({...u}));return h.sort((u,m)=>{for(let v=0;v<o.length;v+=1){var p;const j=o[v],y=l[j.id],b=y.sortUndefined,N=(p=j?.desc)!=null?p:!1;let P=0;if(b){const A=u.getValue(j.id),k=m.getValue(j.id),I=A===void 0,E=k===void 0;if(I||E){if(b==="first")return I?-1:1;if(b==="last")return I?1:-1;P=I&&E?0:I?b:-b}}if(P===0&&(P=y.sortingFn(u,m,j.id)),P!==0)return N&&(P*=-1),y.invertSorting&&(P*=-1),P}return u.index-m.index}),h.forEach(u=>{var m;s.push(u),(m=u.subRows)!=null&&m.length&&(u.subRows=c(u.subRows))}),h};return{rows:c(n.rows),flatRows:s,rowsById:n.rowsById}},Ct(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}function ZC(e,t){return e?Vz(e)?x.createElement(e,t):e:null}function Vz(e){return qz(e)||typeof e=="function"||Gz(e)}function qz(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function Gz(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function Hz(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=x.useState(()=>({current:_z(t)})),[a,s]=x.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...e,state:{...a,...e.state},onStateChange:l=>{s(l),e.onStateChange==null||e.onStateChange(l)}})),n.current}function oO(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=oO(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Yt(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=oO(e))&&(a&&(a+=" "),a+=t);return a}const Wz=(e,t)=>{const n=new Array(e.length+t.length);for(let a=0;a<e.length;a++)n[a]=e[a];for(let a=0;a<t.length;a++)n[e.length+a]=t[a];return n},Kz=(e,t)=>({classGroupId:e,validator:t}),iO=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),km="-",e2=[],Yz="arbitrary..",Xz=e=>{const t=Qz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return Jz(l);const c=l.split(km),f=c[0]===""&&c.length>1?1:0;return lO(c,f,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const f=a[l],h=n[l];return f?h?Wz(h,f):f:h||e2}return n[l]||e2}}},lO=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],o=n.nextPart.get(s);if(o){const h=lO(e,t+1,o);if(h)return h}const l=n.validators;if(l===null)return;const c=t===0?e.join(km):e.slice(t).join(km),f=l.length;for(let h=0;h<f;h++){const u=l[h];if(u.validator(c))return u.classGroupId}},Jz=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),a=t.slice(0,n);return a?Yz+a:void 0})(),Qz=e=>{const{theme:t,classGroups:n}=e;return Zz(n,t)},Zz=(e,t)=>{const n=iO();for(const a in e){const s=e[a];Tj(s,n,a,t)}return n},Tj=(e,t,n,a)=>{const s=e.length;for(let o=0;o<s;o++){const l=e[o];e8(l,t,n,a)}},e8=(e,t,n,a)=>{if(typeof e=="string"){t8(e,t,n);return}if(typeof e=="function"){r8(e,t,n,a);return}n8(e,t,n,a)},t8=(e,t,n)=>{const a=e===""?t:cO(t,e);a.classGroupId=n},r8=(e,t,n,a)=>{if(a8(e)){Tj(e(a),t,n,a);return}t.validators===null&&(t.validators=[]),t.validators.push(Kz(n,e))},n8=(e,t,n,a)=>{const s=Object.entries(e),o=s.length;for(let l=0;l<o;l++){const[c,f]=s[l];Tj(f,cO(t,c),n,a)}},cO=(e,t)=>{let n=e;const a=t.split(km),s=a.length;for(let o=0;o<s;o++){const l=a[o];let c=n.nextPart.get(l);c||(c=iO(),n.nextPart.set(l,c)),n=c}return n},a8=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,s8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),a=Object.create(null);const s=(o,l)=>{n[o]=l,t++,t>e&&(t=0,a=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=a[o])!==void 0)return s(o,l),l},set(o,l){o in n?n[o]=l:s(o,l)}}},ab="!",t2=":",o8=[],r2=(e,t,n,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:a,isExternal:s}),i8=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=s=>{const o=[];let l=0,c=0,f=0,h;const u=s.length;for(let y=0;y<u;y++){const b=s[y];if(l===0&&c===0){if(b===t2){o.push(s.slice(f,y)),f=y+1;continue}if(b==="/"){h=y;continue}}b==="["?l++:b==="]"?l--:b==="("?c++:b===")"&&c--}const m=o.length===0?s:s.slice(f);let p=m,v=!1;m.endsWith(ab)?(p=m.slice(0,-1),v=!0):m.startsWith(ab)&&(p=m.slice(1),v=!0);const j=h&&h>f?h-f:void 0;return r2(o,v,p,j)};if(t){const s=t+t2,o=a;a=l=>l.startsWith(s)?o(l.slice(s.length)):r2(o8,!1,l,void 0,!0)}if(n){const s=a;a=o=>n({className:o,parseClassName:s})}return a},l8=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,a)=>{t.set(n,1e6+a)}),n=>{const a=[];let s=[];for(let o=0;o<n.length;o++){const l=n[o],c=l[0]==="[",f=t.has(l);c||f?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(l)):s.push(l)}return s.length>0&&(s.sort(),a.push(...s)),a}},c8=e=>({cache:s8(e.cacheSize),parseClassName:i8(e),sortModifiers:l8(e),...Xz(e)}),d8=/\s+/,u8=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:o}=t,l=[],c=e.trim().split(d8);let f="";for(let h=c.length-1;h>=0;h-=1){const u=c[h],{isExternal:m,modifiers:p,hasImportantModifier:v,baseClassName:j,maybePostfixModifierPosition:y}=n(u);if(m){f=u+(f.length>0?" "+f:f);continue}let b=!!y,N=a(b?j.substring(0,y):j);if(!N){if(!b){f=u+(f.length>0?" "+f:f);continue}if(N=a(j),!N){f=u+(f.length>0?" "+f:f);continue}b=!1}const P=p.length===0?"":p.length===1?p[0]:o(p).join(":"),A=v?P+ab:P,k=A+N;if(l.indexOf(k)>-1)continue;l.push(k);const I=s(N,b);for(let E=0;E<I.length;++E){const O=I[E];l.push(A+O)}f=u+(f.length>0?" "+f:f)}return f},f8=(...e)=>{let t=0,n,a,s="";for(;t<e.length;)(n=e[t++])&&(a=dO(n))&&(s&&(s+=" "),s+=a);return s},dO=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=dO(e[a]))&&(n&&(n+=" "),n+=t);return n},h8=(e,...t)=>{let n,a,s,o;const l=f=>{const h=t.reduce((u,m)=>m(u),e());return n=c8(h),a=n.cache.get,s=n.cache.set,o=c,c(f)},c=f=>{const h=a(f);if(h)return h;const u=u8(f,n);return s(f,u),u};return o=l,(...f)=>o(f8(...f))},m8=[],qr=e=>{const t=n=>n[e]||m8;return t.isThemeGetter=!0,t},uO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,p8=/^\d+\/\d+$/,g8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,x8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,y8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,b8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nc=e=>p8.test(e),Dt=e=>!!e&&!Number.isNaN(Number(e)),qo=e=>!!e&&Number.isInteger(Number(e)),z0=e=>e.endsWith("%")&&Dt(e.slice(0,-1)),Hs=e=>g8.test(e),j8=()=>!0,w8=e=>x8.test(e)&&!v8.test(e),hO=()=>!1,N8=e=>y8.test(e),S8=e=>b8.test(e),C8=e=>!ot(e)&&!it(e),k8=e=>Bc(e,gO,hO),ot=e=>uO.test(e),Vi=e=>Bc(e,xO,w8),U0=e=>Bc(e,D8,Dt),n2=e=>Bc(e,mO,hO),P8=e=>Bc(e,pO,S8),Th=e=>Bc(e,vO,N8),it=e=>fO.test(e),Bd=e=>Vc(e,xO),E8=e=>Vc(e,O8),a2=e=>Vc(e,mO),A8=e=>Vc(e,gO),I8=e=>Vc(e,pO),Rh=e=>Vc(e,vO,!0),Bc=(e,t,n)=>{const a=uO.exec(e);return a?a[1]?t(a[1]):n(a[2]):!1},Vc=(e,t,n=!1)=>{const a=fO.exec(e);return a?a[1]?t(a[1]):n:!1},mO=e=>e==="position"||e==="percentage",pO=e=>e==="image"||e==="url",gO=e=>e==="length"||e==="size"||e==="bg-size",xO=e=>e==="length",D8=e=>e==="number",O8=e=>e==="family-name",vO=e=>e==="shadow",M8=()=>{const e=qr("color"),t=qr("font"),n=qr("text"),a=qr("font-weight"),s=qr("tracking"),o=qr("leading"),l=qr("breakpoint"),c=qr("container"),f=qr("spacing"),h=qr("radius"),u=qr("shadow"),m=qr("inset-shadow"),p=qr("text-shadow"),v=qr("drop-shadow"),j=qr("blur"),y=qr("perspective"),b=qr("aspect"),N=qr("ease"),P=qr("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...k(),it,ot],E=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],C=()=>[it,ot,f],M=()=>[nc,"full","auto",...C()],F=()=>[qo,"none","subgrid",it,ot],V=()=>["auto",{span:["full",qo,it,ot]},qo,it,ot],T=()=>[qo,"auto",it,ot],L=()=>["auto","min","max","fr",it,ot],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...C()],W=()=>[nc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[e,it,ot],K=()=>[...k(),a2,n2,{position:[it,ot]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],R=()=>["auto","cover","contain",A8,k8,{size:[it,ot]}],H=()=>[z0,Bd,Vi],Y=()=>["","none","full",h,it,ot],ee=()=>["",Dt,Bd,Vi],me=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[Dt,z0,a2,n2],We=()=>["","none",j,it,ot],pe=()=>["none",Dt,it,ot],ue=()=>["none",Dt,it,ot],ke=()=>[Dt,it,ot],se=()=>[nc,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hs],breakpoint:[Hs],color:[j8],container:[Hs],"drop-shadow":[Hs],ease:["in","out","in-out"],font:[C8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hs],shadow:[Hs],spacing:["px",Dt],text:[Hs],"text-shadow":[Hs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nc,ot,it,b]}],container:["container"],columns:[{columns:[Dt,ot,it,c]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[qo,"auto",it,ot]}],basis:[{basis:[nc,"full","auto",c,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Dt,nc,"auto","initial","none",ot]}],grow:[{grow:["",Dt,it,ot]}],shrink:[{shrink:["",Dt,it,ot]}],order:[{order:[qo,"first","last","none",it,ot]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[c,"screen",...W()]}],"min-w":[{"min-w":[c,"screen","none",...W()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",n,Bd,Vi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,it,U0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",z0,ot]}],"font-family":[{font:[E8,ot,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,it,ot]}],"line-clamp":[{"line-clamp":[Dt,"none",it,U0]}],leading:[{leading:[o,...C()]}],"list-image":[{"list-image":["none",it,ot]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",it,ot]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[Dt,"from-font","auto",it,Vi]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Dt,"auto",it,ot]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it,ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it,ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:R()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qo,it,ot],radial:["",it,ot],conic:[qo,it,ot]},I8,P8]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Dt,it,ot]}],"outline-w":[{outline:["",Dt,Bd,Vi]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,Rh,Th]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",m,Rh,Th]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Dt,Vi]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",p,Rh,Th]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Dt,it,ot]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Dt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[it,ot]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[Dt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:R()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",it,ot]}],filter:[{filter:["","none",it,ot]}],blur:[{blur:We()}],brightness:[{brightness:[Dt,it,ot]}],contrast:[{contrast:[Dt,it,ot]}],"drop-shadow":[{"drop-shadow":["","none",v,Rh,Th]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Dt,it,ot]}],"hue-rotate":[{"hue-rotate":[Dt,it,ot]}],invert:[{invert:["",Dt,it,ot]}],saturate:[{saturate:[Dt,it,ot]}],sepia:[{sepia:["",Dt,it,ot]}],"backdrop-filter":[{"backdrop-filter":["","none",it,ot]}],"backdrop-blur":[{"backdrop-blur":We()}],"backdrop-brightness":[{"backdrop-brightness":[Dt,it,ot]}],"backdrop-contrast":[{"backdrop-contrast":[Dt,it,ot]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Dt,it,ot]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Dt,it,ot]}],"backdrop-invert":[{"backdrop-invert":["",Dt,it,ot]}],"backdrop-opacity":[{"backdrop-opacity":[Dt,it,ot]}],"backdrop-saturate":[{"backdrop-saturate":[Dt,it,ot]}],"backdrop-sepia":[{"backdrop-sepia":["",Dt,it,ot]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",it,ot]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Dt,"initial",it,ot]}],ease:[{ease:["linear","initial",N,it,ot]}],delay:[{delay:[Dt,it,ot]}],animate:[{animate:["none",P,it,ot]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,it,ot]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:ue()}],"scale-x":[{"scale-x":ue()}],"scale-y":[{"scale-y":ue()}],"scale-z":[{"scale-z":ue()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[it,ot,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it,ot]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it,ot]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Dt,Bd,Vi,U0]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},T8=h8(M8);function s2(...e){return T8(Yt(e))}const yO=({columns:e,data:t,storageKey:n,showGlobalFilter:a=!0})=>{const s=(j,y)=>{if(!n)return y;try{const b=localStorage.getItem(`pos_datatable_${n}_${j}`);return b?JSON.parse(b):y}catch(b){return console.warn("Failed to load table state",b),y}},[o,l]=x.useState(()=>s("sorting",[])),[c,f]=x.useState(()=>s("visibility",{})),[h,u]=x.useState(()=>s("sizing",{})),[m,p]=x.useState("");x.useEffect(()=>{n&&(localStorage.setItem(`pos_datatable_${n}_sorting`,JSON.stringify(o)),localStorage.setItem(`pos_datatable_${n}_visibility`,JSON.stringify(c)),localStorage.setItem(`pos_datatable_${n}_sizing`,JSON.stringify(h)))},[o,c,h,n]);const v=Hz({data:t,columns:e,state:{sorting:o,columnVisibility:c,columnSizing:h,globalFilter:m},onSortingChange:l,onColumnVisibilityChange:f,onColumnSizingChange:u,onGlobalFilterChange:p,getCoreRowModel:$z(),getSortedRowModel:Bz(),getFilteredRowModel:Uz(),columnResizeMode:"onChange",enableColumnResizing:!0});return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a&&r.jsxs("div",{className:"relative max-w-sm w-full",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx("input",{placeholder:"Buscar en todas las columnas...",value:m??"",onChange:j=>p(j.target.value),className:"h-9 w-full rounded-md border border-gray-300 bg-white pl-9 pr-3 text-sm outline-none focus:border-hd-orange focus:ring-1 focus:ring-hd-orange"})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:"flex items-center gap-2 h-9 px-3 rounded-md border border-gray-300 bg-white text-sm font-medium hover:bg-gray-50",children:[r.jsx(By,{size:16}),"Columnas"]}),r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border border-gray-200 rounded-md shadow-lg p-2 hidden group-hover:block z-20",children:[r.jsx("div",{className:"text-xs font-bold text-gray-500 mb-2 px-2",children:"Mostrar/Ocultar"}),v.getAllLeafColumns().map(j=>r.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:j.getIsVisible(),onChange:j.getToggleVisibilityHandler(),className:"rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"text-sm text-gray-700",children:j.id})]},j.id))]})]})]}),r.jsx("div",{className:"rounded-md border border-gray-200 overflow-hidden bg-white shadow-sm overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",style:{minWidth:v.getTotalSize()},children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200 text-gray-600 font-bold uppercase text-xs",children:v.getHeaderGroups().map(j=>r.jsx("tr",{children:j.headers.map(y=>r.jsxs("th",{colSpan:y.colSpan,style:{width:y.getSize()},className:"relative px-4 py-3 group select-none border-r border-transparent hover:border-gray-300 transition-colors",children:[r.jsx("div",{className:"flex items-center justify-between gap-2",children:r.jsxs("div",{className:s2("flex items-center gap-1 cursor-pointer hover:text-gray-900",y.column.getCanSort()?"cursor-pointer":""),onClick:y.column.getToggleSortingHandler(),children:[ZC(y.column.columnDef.header,y.getContext()),{asc:r.jsx(fD,{size:14}),desc:r.jsx(Nr,{size:14})}[y.column.getIsSorted()]??(y.column.getCanSort()?r.jsx(uF,{size:14,className:"text-gray-300 group-hover:text-gray-500"}):null)]})}),r.jsx("div",{onMouseDown:y.getResizeHandler(),onTouchStart:y.getResizeHandler(),className:s2("absolute right-0 top-0 h-full w-1 cursor-col-resize touch-none select-none bg-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",y.column.getIsResizing()?"bg-hd-orange opacity-100 w-1.5":"")})]},y.id))},j.id))}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:v.getRowModel().rows.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:e.length,className:"h-24 text-center text-gray-500",children:"No hay resultados."})}):v.getRowModel().rows.map(j=>r.jsx("tr",{className:"hover:bg-gray-50 transition-colors",children:j.getVisibleCells().map(y=>r.jsx("td",{style:{width:y.column.getSize()},className:"px-4 py-3",children:ZC(y.column.columnDef.cell,y.getContext())},y.id))},j.id))})]})}),r.jsx("div",{className:"flex items-center justify-between px-2 text-xs text-gray-500",children:r.jsxs("div",{children:["Total: ",v.getFilteredRowModel().rows.length," registros"]})})]})},R8=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(""),[l,c]=x.useState(null),[f,h]=x.useState(!1),u=Tt();x.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const N=await FL();t(N)}catch(N){o("Error al cargar el historial"),console.error(N)}finally{a(!1)}},p=async N=>{if(N.Tipo==="Factura")try{a(!0);const P=await KD(N.Id);c(P),h(!0)}catch(P){console.error(P),o("Error al cargar detalle de venta")}finally{a(!1)}else N.Tipo==="Cotizacin"?u("/ventas/distribucion",{state:{mode:"edit_quotation",id:N.Id}}):v(N)},v=N=>{const A="http://localhost:5006/api".replace("/api","");let k="Factura";N.Tipo==="Cotizacin"&&(k="Cotizacion"),N.Tipo==="Devolucin"&&(k="Devolucion");const I=`${A}/Reports/${k}?id=${N.Id}`;window.open(I,"_blank")},j=(N,P="DOP",A="RD$")=>`${P} ${A}${(N||0).toLocaleString("en-US",{minimumFractionDigits:2})}`,y=N=>new Date(N).toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=x.useMemo(()=>[{header:"Tipo",accessorKey:"Tipo",cell:N=>{const P=N.getValue();let A=r.jsx(Sr,{size:16,className:"text-blue-500"}),k="text-blue-700 bg-blue-50";return P==="Cotizacin"?(A=r.jsx(Ra,{size:16,className:"text-amber-500"}),k="text-amber-700 bg-amber-50"):P==="Devolucin"&&(A=r.jsx(E0,{size:16,className:"text-red-500"}),k="text-red-700 bg-red-50"),r.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded-md font-bold text-xs ${k}`,children:[A,P]})},size:120},{header:"Nmero",accessorKey:"Numero",accessorFn:N=>N.Numero||N.numero||N.NumeroFactura||N.numeroFactura,cell:N=>r.jsx("div",{className:"flex items-center gap-2 font-black text-gray-900 mono",children:N.getValue()}),size:140},{header:"Fecha",accessorKey:"Fecha",accessorFn:N=>N.Fecha||N.fecha,cell:N=>r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[r.jsx(ea,{size:14,className:"text-gray-400"}),y(N.getValue())]}),size:150},{header:"Cliente",accessorKey:"ClienteNombre",accessorFn:N=>N.ClienteNombre||N.clienteNombre||"N/A",cell:N=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nj,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"font-semibold text-gray-900 text-sm truncate max-w-[150px]",children:N.getValue()})]}),size:200},{header:"NCF",accessorFn:N=>N.NCF||N.ncf||"N/A",cell:N=>r.jsx("span",{className:"text-[10px] font-mono bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded border border-gray-200",children:N.getValue()||"N/A"}),size:130},{header:"Total",accessorFn:N=>N.Total||N.total,cell:N=>{const P=N.getValue(),k=N.row.original.Tipo==="Devolucin"?"text-red-600":"text-green-600";return r.jsx("div",{className:`text-right font-black ${k}`,children:j(P,N.row.original.MonedaCodigo,N.row.original.MonedaSimbolo)})},size:120},{header:"Estado",accessorFn:N=>N.Estado||N.estado,cell:N=>{if(N.row.original.Tipo==="Cotizacin")return r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-amber-100 text-amber-800 uppercase",children:"Cotizacin"});if(N.row.original.Tipo==="Devolucin")return r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-gray-100 text-gray-800 uppercase",children:"Procesada"});const A=parseFloat(N.row.original.Saldo||N.row.original.saldo||0)<=.01,k=A?"Pagada":"Pendiente";let I="bg-yellow-100 text-yellow-800";return A&&(I="bg-green-100 text-green-800"),N.getValue()==="Anulado"?r.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold bg-red-100 text-red-800 uppercase",children:"Anulado"}):r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${I} uppercase`,children:k})},size:100},{id:"actions",header:"Acciones",cell:N=>r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("button",{onClick:()=>p(N.row.original),className:"text-gray-600 hover:text-blue-600 hover:bg-blue-50 p-1.5 rounded-lg transition-all",title:"Ver Detalle",children:r.jsx(oi,{size:18})}),r.jsx("button",{onClick:()=>v(N.row.original),className:"text-gray-600 hover:text-hd-orange hover:bg-orange-50 p-1.5 rounded-lg transition-all",title:"Imprimir (Pro)",children:r.jsx(La,{size:18})}),N.row.original.Tipo==="Factura"&&r.jsx("button",{onClick:()=>u(`/ventas/devoluciones?invoice=${N.row.original.Numero||N.row.original.NumeroFactura}`),className:"text-gray-600 hover:text-red-600 hover:bg-red-50 p-1.5 rounded-lg transition-all",title:"Devolver",children:r.jsx(E0,{size:18})})]}),size:120,enableSorting:!1,enableResizing:!1}],[y,j]);return n&&e.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Dn,{className:"animate-spin text-hd-orange",size:48})}):r.jsxs("div",{className:"p-6 space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Historial Unificado"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Consulta Ventas, Devoluciones y Cotizaciones"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>u("/ventas/pos"),className:"px-4 py-2 bg-hd-orange text-white rounded-lg font-bold hover:bg-orange-600 transition-shadow shadow-sm active:scale-95",children:"Punto de Venta"}),r.jsx("button",{onClick:()=>u("/ventas/distribucion"),className:"px-4 py-2 bg-gray-800 text-white rounded-lg font-bold hover:bg-black transition-shadow shadow-sm active:scale-95",children:"Distribucin"})]})]}),s&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600 animate-pulse"}),s]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-hd-orange transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Total Registros"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-gray-900",children:e.length}),r.jsx(Sr,{className:"text-hd-orange opacity-20",size:32})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-green-500 transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Monto Total Estimado"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-green-600",children:j(e.filter(N=>N.Tipo!=="Devolucin").reduce((N,P)=>N+(P.Total||0)*(P.TasaCambio||1),0),"DOP","RD$")}),r.jsx(Wr,{className:"text-green-600 opacity-20",size:32})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-amber-500 transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Cotizaciones"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-amber-600",children:e.filter(N=>N.Tipo==="Cotizacin").length}),r.jsx(Ra,{className:"text-amber-600 opacity-20",size:32})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:border-red-500 transition-colors",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Devoluciones"}),r.jsxs("div",{className:"flex items-end justify-between mt-1",children:[r.jsx("p",{className:"text-2xl font-black text-red-600",children:e.filter(N=>N.Tipo==="Devolucin").length}),r.jsx(E0,{className:"text-red-600 opacity-20",size:32})]})]})]}),r.jsx(yO,{columns:b,data:e,storageKey:"ventas_historial_unified"}),r.jsx(JL,{isOpen:f,onClose:()=>h(!1),sale:l})]})},_8=({isOpen:e,onClose:t})=>e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 animate-in fade-in zoom-in duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:" Gua de Procesos de Devolucin"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx("span",{className:"text-2xl",children:""})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"bg-gray-100 p-3 rounded-lg flex items-center justify-center h-12 w-12 min-w-[3rem]",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 border-l-4 border-gray-600 pl-2",children:"Solo Devolucin (Inventario)"}),r.jsxs("p",{className:"text-gray-600 mt-1 text-sm leading-relaxed",children:["Este proceso reingresa los artculos seleccionados al inventario fsico ",r.jsx("strong",{children:"sin generar ningn reembolso monetario inmediato"}),". til para correcciones de inventario o cuando el cliente deja el producto pendiente de otra accin futura."]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"bg-red-100 p-3 rounded-lg flex items-center justify-center h-12 w-12 min-w-[3rem]",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 border-l-4 border-red-600 pl-2",children:"Reembolso (Efectivo)"}),r.jsxs("p",{className:"text-gray-600 mt-1 text-sm leading-relaxed",children:["Use esta opcin cuando se le devuelve el dinero en efectivo al cliente. El sistema reingresa los artculos al inventario y ",r.jsx("strong",{children:"registra una salida de caja"})," por el monto total devuelto, emitiendo una Nota de Crdito interna para fines fiscales."]})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"bg-green-100 p-3 rounded-lg flex items-center justify-center h-12 w-12 min-w-[3rem]",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 border-l-4 border-green-600 pl-2",children:"Cambio (Nota de Crdito)"}),r.jsxs("p",{className:"text-gray-600 mt-1 text-sm leading-relaxed",children:["Ideal para cambios de mercanca. El sistema genera una ",r.jsx("strong",{children:"Nota de Crdito"})," con un saldo a favor que se puede aplicar inmediatamente en una nueva factura (POS). No implica salida de efectivo de la caja."]})]})]})]}),r.jsx("div",{className:"mt-8 text-right",children:r.jsx("button",{onClick:t,className:"bg-[#F96302] text-white px-6 py-2 rounded font-bold hover:bg-[#d85502] transition",children:"Entendido"})})]})}):null,$8=()=>{const e=Tt(),[t]=eF(),[n,a]=x.useState(""),[s,o]=x.useState(null),[l,c]=x.useState([]),[f,h]=x.useState({}),[u,m]=x.useState(!1),[p,v]=x.useState(""),[j,y]=x.useState(!1),[b,N]=x.useState(!1),[P,A]=x.useState(null),[k,I]=x.useState("Damaged");x.useEffect(()=>{const F=t.get("invoice");F&&(a(F),E(F))},[t]);const E=async(F=n)=>{if(!F||!F.trim()){v("Ingrese un nmero de factura"),m(!1);return}m(!0),v(""),o(null),c([]),h({});try{const T=await fetch(`http://localhost:5006/api/Returns/Search/${F.trim()}`);if(T.ok){const L=await T.json();o(L.venta||L.Venta),c(L.detalles||L.Detalles||[])}else v("Factura no encontrada o no elegible para devolucin."),o(null)}catch(V){console.error(V),v("Error de conexin con el servidor."),o(null)}finally{m(!1)}},O=F=>{console.log("Invoice Selected:",F),y(!1);const V=F.numeroFactura||F.NumeroFactura;console.log("Extracted Invoice Number:",V),F&&V?(a(V),E(V)):console.error("Could not extract invoice number from selection")},C=(F,V)=>{h(T=>{const L=T[F]||{returnToStock:!0};if(V<=0){const{[F]:U,...J}=T;return J}return{...T,[F]:{...L,quantity:V}}})},M=async F=>{if(!Object.keys(f).length){alert(" Por favor, ingrese la cantidad a devolver en al menos un artculo.");return}m(!0);try{const V=Object.keys(f).map(q=>{const W=l.find(K=>K.articuloId===parseInt(q)||K.id===parseInt(q)),z=l.find(K=>K.articuloId==q);return{articuloId:parseInt(q),cantidad:f[q].quantity,precioUnitario:z.precioUnitario,retornarAlStock:!0}}),T=V.reduce((q,W)=>q+W.cantidad*W.precioUnitario,0),L={VentaId:s.id||s.Id,TipoAccion:F,Razon:"Solicitado por cliente",TotalReembolsado:T,Usuario:"Admin",Detalles:V};console.log("Sending Return Payload:",L);const U=await XD(L);console.log("Create return result:",U);const J=U.returnId||U.ReturnId;if(J)try{const q=await WL(J);console.log("Report fetched:",q),A(q)}catch(q){console.error("Error fetching return report:",q)}F==="Cambio"?e("/ventas/pos",{state:{creditNoteId:U.creditNoteId,creditAmount:T}}):(alert(`Proceso Completado. ${U.message}`),o(null),a(""),c([]))}catch(V){console.error(V),v("Error procesando la devolucin.")}finally{m(!1)}};return r.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen font-sans animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-[#F96302]",children:"Devoluciones y Notas de Crdito"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>e("/ventas/historial-devoluciones"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded font-bold hover:bg-gray-300 transition flex items-center gap-2",children:[r.jsx(Qn,{size:18}),"Historial"]}),r.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 text-gray-500 hover:text-[#F96302] transition font-bold",title:"Ver Gua de Ayuda",children:[r.jsx("span",{className:"bg-white h-8 w-8 rounded-full shadow flex items-center justify-center text-lg",children:"?"}),r.jsx("span",{className:"hidden md:inline",children:"Ayuda"})]})]})]}),r.jsx(_8,{isOpen:b,onClose:()=>N(!1)}),j&&r.jsx(YD,{onSelect:O,onCancel:()=>y(!1)}),r.jsxs("div",{className:"bg-white p-6 rounded shadow-md mb-6",children:[r.jsxs("div",{className:"flex gap-4 items-end",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Nmero de Factura"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:n,onChange:F=>a(F.target.value),className:"w-full border p-2 rounded text-lg uppercase",placeholder:"FACT-000000"}),r.jsx("button",{onClick:()=>y(!0),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded font-bold hover:bg-gray-300 transition flex items-center gap-2",title:"Buscar Factura",children:""})]})]}),r.jsx("button",{onClick:()=>E(),disabled:u,className:"bg-[#F96302] text-white px-6 py-2 rounded font-bold hover:bg-[#d85502] transition h-[46px]",children:u?"Buscando...":"Buscar"})]}),p&&r.jsx("p",{className:"text-red-600 mt-2 font-bold",children:p})]}),s&&r.jsxs("div",{className:"bg-white p-6 rounded shadow-md animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-end mb-4 border-b pb-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Cliente"}),r.jsx("p",{className:"font-bold text-xl text-gray-900",children:s.clienteId||s.ClienteId})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Factura"}),r.jsx("p",{className:"font-bold text-xl text-gray-900",children:s.numeroFactura||s.NumeroFactura||n})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Fecha"}),r.jsx("p",{className:"font-bold text-xl text-gray-900",children:new Date(s.fecha||s.Fecha).toLocaleDateString()})]}),(s.ncf||s.NCF)&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"NCF"}),r.jsx("p",{className:"font-bold text-xl text-blue-600",children:s.ncf||s.NCF})]}),r.jsxs("div",{className:"text-right space-y-1",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Total Factura"}),r.jsxs("p",{className:"font-black text-3xl text-green-600",children:["$",(s.total||s.Total)?.toFixed(2)]})]})]}),r.jsxs("table",{className:"w-full mb-6 border border-gray-300",children:[r.jsx("thead",{className:"bg-gray-800 text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left",children:"Artculo"}),r.jsx("th",{className:"p-3 text-center",children:"Cant. Comprada"}),r.jsx("th",{className:"p-3 text-center",children:"Precio"}),r.jsx("th",{className:"p-3 text-center bg-[#F96302]",children:"Cant. a Devolver"})]})}),r.jsx("tbody",{children:l.map(F=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-3 font-medium text-black",children:F.articuloDescripcion||F.ArticuloDescripcion||F.Descripcion||F.descripcion}),r.jsx("td",{className:"p-3 text-center text-black",children:F.cantidad||F.Cantidad}),r.jsxs("td",{className:"p-3 text-center text-black",children:["$",(F.precioUnitario||F.PrecioUnitario)?.toFixed(2)]}),r.jsx("td",{className:"p-3 text-center bg-orange-50",children:r.jsx("input",{type:"number",min:"0",max:F.cantidad||F.Cantidad,className:"border-2 border-gray-400 p-2 w-24 text-center text-lg font-bold rounded focus:border-[#F96302] focus:outline-none",placeholder:"0",onChange:V=>C(F.articuloId||F.ArticuloId,parseFloat(V.target.value))})})]},F.articuloId||F.ArticuloId))})]}),r.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[r.jsx("button",{onClick:()=>M("SoloDevolucion"),className:"bg-gray-700 text-white px-6 py-3 rounded font-bold hover:bg-gray-800 shadow-lg text-lg",title:"Regresa los artculos al inventario sin generar reembolso. selo para correcciones.",children:"Solo Devolucin (Inv)"}),r.jsx("button",{onClick:()=>M("Reembolso"),className:"bg-red-600 text-white px-6 py-3 rounded font-bold hover:bg-red-700 shadow-lg text-lg",title:"Devuelve dinero en efectivo y regresa artculos al inventario.",children:"Reembolso (Efectivo)"}),r.jsx("button",{onClick:()=>M("Cambio"),className:"bg-green-600 text-white px-6 py-3 rounded font-bold hover:bg-green-700 shadow-lg text-lg",title:"Genera una Nota de Crdito para usar en una nueva compra futura.",children:"Cambio (Nota Crdito)"})]})]}),P&&r.jsxs("div",{className:"mt-8 p-4 bg-white rounded shadow",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Reporte de Devolucin (ID: ",(P.Master||P.master)?.Id,")"]}),r.jsxs("table",{className:"w-full border",children:[r.jsx("thead",{className:"bg-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-left",children:"Artculo"}),r.jsx("th",{className:"p-2 text-center",children:"Cantidad"}),r.jsx("th",{className:"p-2 text-center",children:"Precio Unitario"}),r.jsx("th",{className:"p-2 text-center",children:"Subtotal"})]})}),r.jsx("tbody",{children:(P.Detalles||P.detalles||[]).map((F,V)=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"p-2",children:F.ArticuloDescripcion||F.Descripcion||F.ArticuloId}),r.jsx("td",{className:"p-2 text-center",children:F.Cantidad||F.cantidad}),r.jsxs("td",{className:"p-2 text-center",children:["$",(F.PrecioUnitario||F.precioUnitario).toFixed(2)]}),r.jsxs("td",{className:"p-2 text-center",children:["$",((F.Cantidad||F.cantidad)*(F.PrecioUnitario||F.precioUnitario)).toFixed(2)]})]},V))})]}),r.jsxs("div",{className:"mt-4 text-right font-bold",children:["Total Calculado: $",(P.TotalCalculado||P.totalCalculado)?.toFixed(2),(P.TotalesCoinciden!==void 0?P.TotalesCoinciden:P.totalesCoinciden)?r.jsx("span",{className:"text-green-600 ml-2",children:"(Coinciden)"}):r.jsx("span",{className:"text-red-600 ml-2",children:"(Discrepancia)"})]})]})]})},F8=()=>{const e=Tt(),[t,n]=x.useState("returns"),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState(!1),[h,u]=x.useState({start:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});x.useEffect(()=>{m()},[t,h]);const m=async()=>{f(!0);try{if(t==="returns"){const b=await KL(h.start,h.end);s(b)}else{const b=await YL(h.start,h.end);l(b)}}catch(b){console.error("Error fetching history:",b)}finally{f(!1)}},p=b=>new Date(b).toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=b=>`RD$ ${(b||0).toLocaleString("en-US",{minimumFractionDigits:2})}`,j=x.useMemo(()=>[{header:"Retorno #",accessorKey:"id",accessorFn:b=>b.id||b.Id,size:80},{header:"Fecha",accessorFn:b=>p(b.fecha||b.Fecha),size:140},{header:"Factura Orig.",accessorFn:b=>b.numeroFactura||b.NumeroFactura,cell:b=>r.jsx("span",{className:"font-bold text-gray-700",children:b.getValue()}),size:120},{header:"Cliente",accessorFn:b=>b.clienteNombre||b.ClienteNombre||"Cliente General",size:200},{header:"Tipo Accin",accessorFn:b=>b.tipoAccion||b.TipoAccion,cell:b=>r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${b.getValue()==="Reembolso"?"bg-red-100 text-red-800":b.getValue()==="Cambio"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:b.getValue()}),size:120},{header:"Total",accessorFn:b=>b.totalReembolsado||b.TotalReembolsado,cell:b=>r.jsx("div",{className:"text-right font-bold text-green-700",children:v(b.getValue())}),size:120},{header:"Usuario",accessorFn:b=>b.usuario||b.Usuario,size:100}],[]),y=x.useMemo(()=>[{header:"NCF",accessorFn:b=>b.ncf||b.NCF,cell:b=>r.jsx("span",{className:"font-mono text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:b.getValue()}),size:140},{header:"Fecha",accessorFn:b=>p(b.fecha||b.Fecha),size:140},{header:"Cliente",accessorFn:b=>b.clienteNombre||b.ClienteNombre,size:200},{header:"Factura Orig.",accessorFn:b=>b.numeroFactura||b.NumeroFactura,size:120},{header:"Monto Original",accessorFn:b=>b.monto||b.Monto,cell:b=>r.jsx("div",{className:"text-right",children:v(b.getValue())}),size:120},{header:"Saldo",accessorFn:b=>b.saldo||b.Saldo,cell:b=>{const N=b.getValue();return r.jsx("div",{className:`text-right font-bold ${N>0?"text-green-600":"text-gray-400"}`,children:v(N)})},size:120},{header:"Estado",accessorFn:b=>b.estado||b.Estado,cell:b=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:b.getValue()}),size:100}],[]);return r.jsxs("div",{className:"p-6 space-y-6 animate-in fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Historial de Devoluciones"}),r.jsx("p",{className:"text-gray-500",children:"Consulta de devoluciones y notas de crdito generadas."})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>e("/ventas/devoluciones"),className:"bg-hd-orange text-white px-4 py-2 rounded-lg font-bold hover:bg-orange-600 transition",children:"Nueva Devolucin"})})]}),r.jsx(Be,{className:"bg-gray-50 border-none shadow-none",children:r.jsxs("div",{className:"p-4 flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Desde"}),r.jsx("input",{type:"date",value:h.start,onChange:b=>u(N=>({...N,start:b.target.value})),className:"border p-2 rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Hasta"}),r.jsx("input",{type:"date",value:h.end,onChange:b=>u(N=>({...N,end:b.target.value})),className:"border p-2 rounded"})]})]})}),r.jsxs("div",{className:"flex space-x-1 bg-gray-200 p-1 rounded-lg w-fit",children:[r.jsx("button",{onClick:()=>n("returns"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${t==="returns"?"bg-white shadow text-hd-orange":"text-gray-600 hover:text-gray-900"}`,children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Qn,{size:16})," Devoluciones"]})}),r.jsx("button",{onClick:()=>n("creditNotes"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${t==="creditNotes"?"bg-white shadow text-hd-orange":"text-gray-600 hover:text-gray-900"}`,children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(si,{size:16})," Notas de Crdito"]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 min-h-[400px]",children:c?r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:"Cargando..."}):r.jsx(yO,{columns:t==="returns"?j:y,data:t==="returns"?a:o,storageKey:`history_${t}`})})]})},L8="http://localhost:5006/api",z8=()=>{const[e,t]=x.useState(new Date().toISOString().split("T")[0]),[n,a]=x.useState(!1),[s,o]=x.useState({detalles:[],resumen:{}});x.useEffect(()=>{l()},[e]);const l=async()=>{try{a(!0);const m=await fetch(`${L8}/Ventas/CorteCaja?fecha=${e}`);if(m.ok){const p=await m.json();o(p)}}catch(m){console.error("Error loading corte:",m)}finally{a(!1)}},c=(m,p="DOP",v="RD$")=>`${p} ${v}${(m||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,f=()=>{window.print()},h=s.resumen||{totalDOP:0,totalTransacciones:0},u=s.detalles||[];return u.filter(m=>m.metodoPago==="Efectivo").reduce((m,p)=>m+p.total*(p.moneda==="USD"?60.5:1),0),r.jsxs("div",{className:"p-6 space-y-6 max-w-6xl mx-auto print:p-0",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 border-b pb-6 print:hidden",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tighter uppercase italic",children:"Corte de Caja"}),r.jsxs("p",{className:"text-sm text-gray-500 font-bold uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Qo,{size:14,className:"text-hd-orange"})," Resumen Diario de Operaciones"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ea,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ye,{type:"date",className:"pl-9 font-bold",value:e,onChange:m=>t(m.target.value)})]}),r.jsx(re,{variant:"outline",onClick:l,disabled:n,children:r.jsx(Qn,{className:`h-4 w-4 ${n?"animate-spin":""}`})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600 font-bold",onClick:f,children:[r.jsx(La,{className:"mr-2 h-4 w-4"})," Imprimir Reporte"]})]})]}),r.jsxs("div",{className:"hidden print:block text-center space-y-2 mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold uppercase text-black",children:"POS CRONO - REPORTE DE CIERRE"}),r.jsxs("p",{className:"text-sm font-mono",children:["FECHA DE CORTE: ",e]}),r.jsx("div",{className:"border-b-2 border-black w-full"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(Be,{className:"border-l-4 border-l-hd-orange shadow-sm",children:r.jsx(Pt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Ventas Totales (Consolidado)"}),r.jsx("h3",{className:"text-3xl font-black text-gray-900 tracking-tight",children:c(h.totalDOP,"DOP","RD$")})]}),r.jsx("div",{className:"h-12 w-12 bg-orange-50 rounded-xl flex items-center justify-center text-hd-orange",children:r.jsx(Wr,{size:24})})]})})}),r.jsx(Be,{className:"border-l-4 border-l-blue-500 shadow-sm",children:r.jsx(Pt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Transacciones"}),r.jsxs("h3",{className:"text-3xl font-black text-gray-900 tracking-tight",children:[h.totalTransacciones," ",r.jsx("span",{className:"text-sm font-bold text-gray-400 italic",children:"Ventas"})]})]}),r.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-xl flex items-center justify-center text-blue-500",children:r.jsx(Sr,{size:24})})]})})}),r.jsx(Be,{className:"border-l-4 border-l-green-500 shadow-sm",children:r.jsx(Pt,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Fecha del Reporte"}),r.jsx("h3",{className:"text-2xl font-black text-gray-900 tracking-tight",children:new Date(e+"T12:00:00").toLocaleDateString("es-DO",{weekday:"long",day:"numeric",month:"long"})})]}),r.jsx("div",{className:"h-12 w-12 bg-green-50 rounded-xl flex items-center justify-center text-green-500",children:r.jsx(ea,{size:24})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Be,{className:"shadow-sm border-none bg-white",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b",children:r.jsx(vt,{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Desglose por Moneda y Mtodo"})}),r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"font-black uppercase text-[10px]",children:"Moneda"}),r.jsx(ce,{className:"font-black uppercase text-[10px]",children:"Mtodo"}),r.jsx(ce,{className:"font-black uppercase text-[10px] text-center",children:"Trans."}),r.jsx(ce,{className:"font-black uppercase text-[10px] text-right",children:"Total Bruto"})]})}),r.jsx(Bt,{children:u.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:4,className:"text-center py-8 text-gray-400 italic",children:"No hay operaciones registradas este da"})}):u.map((m,p)=>r.jsxs(Me,{className:"hover:bg-gray-50",children:[r.jsx(G,{className:"font-black text-gray-700",children:m.moneda}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[m.metodoPago==="Efectivo"?r.jsx(xu,{size:14,className:"text-green-500"}):r.jsx(si,{size:14,className:"text-blue-500"}),r.jsx("span",{className:"font-bold text-gray-600",children:m.metodoPago})]})}),r.jsx(G,{className:"text-center font-bold text-gray-500",children:m.transacciones}),r.jsx(G,{className:"text-right font-black text-gray-900",children:c(m.total,m.moneda,m.simbolo)})]},p))})]})]}),r.jsxs(Be,{className:"shadow-sm border-none bg-gray-900 text-white",children:[r.jsx(gt,{className:"border-b border-white/10",children:r.jsx(vt,{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Consolidado en DOP (Pesos)"})}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 bg-white/10 rounded-lg flex items-center justify-center",children:r.jsx(xu,{className:"text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Total Efectivo"}),r.jsxs("p",{className:"text-xl font-bold",children:["RD$ ",u.filter(m=>m.metodoPago==="Efectivo").reduce((m,p)=>m+p.total*(p.moneda==="USD"?60.5:1),0).toLocaleString()]})]})]})}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 bg-white/10 rounded-lg flex items-center justify-center",children:r.jsx(si,{className:"text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Total Tarjeta"}),r.jsxs("p",{className:"text-xl font-bold",children:["RD$ ",u.filter(m=>m.metodoPago==="Tarjeta").reduce((m,p)=>m+p.total*(p.moneda==="USD"?60.5:1),0).toLocaleString()]})]})]})}),r.jsx("div",{className:"pt-6 border-t border-white/10",children:r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-hd-orange uppercase tracking-widest italic",children:"Gran Total Neto"}),r.jsxs("p",{className:"text-4xl font-black text-hd-orange tracking-tighter italic",children:["RD$ ",h.totalDOP?.toLocaleString()||0]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Firma del Cajero"}),r.jsx("div",{className:"w-32 h-px bg-gray-700 mt-6"})]})]})})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-start gap-3 print:hidden",children:[r.jsx(Sr,{className:"text-blue-500 mt-0.5",size:18}),r.jsx("p",{className:"text-xs text-blue-700 font-medium leading-relaxed",children:"Este reporte consolida todas las ventas facturadas hasta el momento para la fecha seleccionada. Los montos en USD son convertidos a DOP utilizando la tasa histrica grabada en cada transaccin para asegurar la precisin contable."})]})]})},Up="http://localhost:5006/api",U8=async()=>{const e=await fetch(`${Up}/Compras`);if(!e.ok)throw new Error(`Failed to get purchases: ${e.status}`);return e.json()},sb=async e=>{const t=await fetch(`${Up}/Compras/${e}`);if(!t.ok)throw new Error(`Failed to get purchase: ${t.status}`);return t.json()},B8=async e=>{const t=await fetch(`${Up}/Compras`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.text();throw new Error(`Failed to save purchase: ${t.status} ${n}`)}return t.json()},bO=async e=>{const t=await fetch(`${Up}/Compras/${e}/anular`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.text();throw new Error(`Failed to annul purchase: ${t.status} ${n}`)}return t.json()},jO=({isOpen:e,onClose:t,onConfirm:n,title:a,message:s,confirmLabel:o="Confirmar",cancelLabel:l="Cancelar",variant:c="danger"})=>{const[f,h]=bt.useState(!1);bt.useEffect(()=>{e&&h(!1)},[e]);const u=async()=>{h(!0);try{await n()}finally{h(!1)}};return r.jsx(li,{open:e,onOpenChange:t,className:"max-w-sm",children:r.jsxs(ci,{className:"p-0",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 text-left",children:[r.jsx("div",{className:`p-2 rounded-full flex-shrink-0 ${c==="danger"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:r.jsx(zc,{size:24})}),r.jsx(Ky,{children:a})]}),r.jsx("div",{className:"mt-4 text-sm text-gray-600 leading-relaxed",children:s})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 gap-2 sm:gap-0 border-t border-gray-100",children:[r.jsx("button",{type:"button",disabled:f,onClick:t,className:"inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 disabled:opacity-50 transition-colors",children:l}),r.jsxs("button",{type:"button",disabled:f,onClick:u,className:`inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 transition-colors ${c==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-hd-orange hover:bg-orange-600 focus:ring-orange-500"}`,children:[f&&r.jsx(Dn,{className:"mr-2 h-4 w-4 animate-spin"}),o]})]})]})})},V8=()=>{const e=Tt(),[t,n]=x.useState(""),[a,s]=x.useState([]),[o,l]=x.useState(!0),[c,f]=x.useState({isOpen:!1,id:null,numero:""}),h=async()=>{const{id:Y,numero:ee}=c;try{l(!0),await bO(Y),f(me=>({...me,isOpen:!1})),await E()}catch(me){console.error("Error anular compra:",me)}finally{l(!1),f(me=>({...me,isOpen:!1}))}},[u,m]=x.useState({key:"fechaCompra",direction:"desc"}),[p,v]=x.useState({}),[j,y]=x.useState({}),[b,N]=x.useState({}),[P,A]=x.useState(null),[k,I]=x.useState(!1);x.useEffect(()=>{E()},[]);const E=async()=>{try{l(!0);const Y=await U8();s(Array.isArray(Y)?Y:[])}catch(Y){console.error("Error loading purchases:",Y),s([])}finally{l(!1)}},O=Y=>{let ee="asc";u.key===Y&&u.direction==="asc"&&(ee="desc"),m({key:Y,direction:ee})},C=(Y,ee)=>{ee.stopPropagation(),A(P===Y?null:Y)},M=(Y,ee)=>{v(me=>({...me,[Y]:ee}))},F=(Y,ee,me)=>{N(De=>({...De,[Y]:{...De[Y]||{min:"",max:""},[ee]:me}}))},V=(Y,ee)=>{y(me=>{const De=me[Y]||[];return De.includes(ee)?{...me,[Y]:De.filter(Se=>Se!==ee)}:{...me,[Y]:[...De,ee]}})},T=(Y,ee,me)=>{y(De=>{let We=[...De[Y]||[]];const pe=R(),ue=[],ke=(Te,Re)=>{if(!Te.children){ue.push(Re);return}Object.keys(Te.children).forEach(Ie=>{ke(Te.children[Ie],Re?`${Re}/${Ie}`:Ie)})};if(ee==="")return me?{...De,[Y]:[]}:(ke(pe,""),{...De,[Y]:ue});const se=ee.split("/").filter(Boolean);let fe=pe;for(const Te of se)if(fe=fe.children?.[Te],!fe)break;if(fe){const Te=[],Re=(Ie,Qe)=>{if(!Ie.children){Te.push(Qe);return}Object.keys(Ie.children).forEach(Xe=>{Re(Ie.children[Xe],`${Qe}/${Xe}`)})};Re(fe,ee),me?We=We.filter(Ie=>!Te.includes(Ie)):Te.forEach(Ie=>{We.includes(Ie)||We.push(Ie)})}return{...De,[Y]:We}})},L=()=>{v({}),y({}),N({}),n("")},U=Y=>Y?new Date(Y).toLocaleString("es-DO",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):"",J=Y=>Y?new Date(Y).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",W=(()=>{let Y=Array.isArray(a)?[...a]:[];return t&&(Y=Y.filter(ee=>Object.keys(ee).some(me=>(me==="fechaCompra"?J(ee[me]):String(ee[me])).toLowerCase().includes(t.toLowerCase())))),Object.keys(p).forEach(ee=>{p[ee]&&(Y=Y.filter(me=>{if(ee==="fechaCompra"){const Se=new Date(me[ee]);return`${Se.getFullYear()} ${Se.toLocaleDateString("es-DO",{month:"long"})} ${Se.getDate()}`.toLowerCase().includes(p[ee].toLowerCase())}return String(me[ee]||"").toLowerCase().includes(p[ee].toLowerCase())}))}),Object.keys(j).forEach(ee=>{j[ee]&&j[ee].length>0&&(Y=Y.filter(me=>{if(ee==="fechaCompra"){const De=new Date(me[ee]),Se=`${De.getFullYear()}/${De.toLocaleDateString("es-DO",{month:"long"})}/${De.getDate()}`;return j[ee].includes(Se)}return j[ee].includes(String(me[ee]))}))}),Object.keys(b).forEach(ee=>{const{min:me,max:De}=b[ee];me!==""&&(Y=Y.filter(Se=>(Se[ee]||0)>=parseFloat(me))),De!==""&&(Y=Y.filter(Se=>(Se[ee]||0)<=parseFloat(De)))}),u.key&&Y.sort((ee,me)=>{const De=ee[u.key],Se=me[u.key];return De<Se?u.direction==="asc"?-1:1:De>Se?u.direction==="asc"?1:-1:0}),Y})(),K=(()=>{if(!k)return null;const Y={},ee=me=>{let De=a.find(We=>We.id===me);if(!De)return null;let Se=0;for(;De.documentoReferenciaId&&Se<20;){const We=a.find(pe=>pe.id===De.documentoReferenciaId);if(We)De=We;else break;Se++}return De};return W.forEach(me=>{if(!me)return;const De=ee(me.id);if(De){const Se=De.id;Y[Se]||(Y[Se]={root:De,items:[]}),Y[Se].items.push(me)}else Y[me.id]?Y[me.id].items.push(me):Y[me.id]={root:me,items:[me]}}),Object.values(Y).forEach(me=>{me.items.sort((De,Se)=>new Date(De.fechaCompra)-new Date(Se.fechaCompra))}),Object.values(Y).sort((me,De)=>new Date(De.root.fechaCompra)-new Date(me.root.fechaCompra))})(),B=Y=>{const ee=a.map(me=>String(me[Y]||""));return[...new Set(ee)].sort()},R=()=>{const Y={children:{}};return a.forEach(ee=>{const me=new Date(ee.fechaCompra),De=String(me.getFullYear()),Se=me.toLocaleDateString("es-DO",{month:"long"}),We=String(me.getDate());Y.children[De]||(Y.children[De]={children:{}}),Y.children[De].children[Se]||(Y.children[De].children[Se]={children:{}}),Y.children[De].children[Se].children[We]||(Y.children[De].children[Se].children[We]={count:0}),Y.children[De].children[Se].children[We].count++}),Y},H=Y=>Y.map(ee=>r.jsxs(Me,{className:`cursor-pointer hover:bg-gray-50 ${k&&ee.id!==ee.documentoReferenciaId?"bg-gray-50/50":""}`,onClick:()=>e(`/compras/editar/${ee.id}`),children:[r.jsx(G,{className:"font-mono text-sm font-medium text-blue-600 pl-4",children:ee.numeroCompra}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center",children:[k&&ee.documentoReferenciaId&&r.jsx("div",{className:"w-4 h-4 mr-2 border-l-2 border-b-2 border-gray-300 rounded-bl-none",style:{marginLeft:"10px"}}),r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${ee.tipoDocumento==="Recepcion"?"bg-purple-50 text-purple-700 border-purple-200":ee.tipoDocumento==="OrdenCompra"?"bg-blue-50 text-blue-700 border-blue-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:ee.tipoDocumento==="OrdenCompra"?"Orden":ee.tipoDocumento||"Factura"})]})}),r.jsx(G,{children:ee.documentoReferenciaNumero?r.jsxs("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded",children:["ref: ",ee.documentoReferenciaNumero]}):r.jsx("span",{className:"text-xs text-gray-300",children:"-"})}),r.jsxs(G,{children:[r.jsx("div",{className:"font-medium text-gray-900",children:ee.proveedorNombre}),r.jsx("div",{className:"text-xs text-gray-500",children:ee.codigoProveedor})]}),r.jsx(G,{className:"text-gray-600",children:U(ee.fechaCompra)}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee.estado==="Completado"?"bg-green-100 text-green-800":ee.estado==="Pendiente"?"bg-yellow-100 text-yellow-800":ee.estado==="Anulado"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:ee.estado})}),r.jsx(G,{className:"text-right font-medium",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{children:[ee.monedaSimbolo||"RD$"," ",ee.total?.toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2})]}),ee.monedaCodigo&&ee.monedaCodigo!=="DOP"&&r.jsxs("span",{className:"text-[10px] text-gray-500 font-normal italic",children:["(Equiv. DOP ",(ee.total*(ee.tasaCambio||1)).toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2}),")"]})]})}),r.jsx(G,{className:"text-right",onClick:me=>me.stopPropagation(),children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[ee.estado!=="Anulado"&&ee.tipoDocumento==="OrdenCompra"&&!ee.yaTransferido&&r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-purple-600 hover:text-purple-800 hover:bg-purple-50 transition-all border border-transparent hover:border-purple-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Convertir a Recepcin",onClick:me=>{me.stopPropagation(),e("/compras/nuevo",{state:{transferFrom:ee,targetType:"Recepcion"}})},children:r.jsx(Op,{className:"h-6 w-6 stroke-[1.5]"})}),ee.estado!=="Anulado"&&ee.tipoDocumento==="Recepcion"&&!ee.yaTransferido&&r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-green-600 hover:text-green-800 hover:bg-green-50 transition-all border border-transparent hover:border-green-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Crear Factura",onClick:me=>{me.stopPropagation(),e("/compras/nuevo",{state:{transferFrom:ee,targetType:"Factura"}})},children:r.jsx(Sr,{className:"h-6 w-6 stroke-[1.5]"})}),r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition-all border border-transparent hover:border-gray-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Ver Detalle",onClick:()=>e(`/compras/editar/${ee.id}`),children:r.jsx(oi,{className:"h-6 w-6 stroke-[1.5]"})}),ee.estado!=="Anulado"&&r.jsx("button",{type:"button",className:"h-10 w-10 p-2 rounded-full text-red-500 hover:text-red-700 hover:bg-red-50 transition-all border border-transparent hover:border-red-200 shadow-sm flex items-center justify-center cursor-pointer",title:"Anular Compra",onClick:()=>f({isOpen:!0,id:ee.id,numero:ee.numeroCompra}),children:r.jsx(It,{className:"h-6 w-6 stroke-[2]"})})]})})]},ee.id));return r.jsxs("div",{className:"space-y-6",children:[r.jsx(jO,{isOpen:c.isOpen,onClose:()=>f(Y=>({...Y,isOpen:!1})),onConfirm:h,title:"Anular Compra",message:`Est seguro que desea anular la compra ${c.numero}? Esta accin no se puede deshacer y reversar el inventario.`,confirmLabel:"Confirmar Anulacin"}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Compras e Ingresos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione sus rdenes de compra y recepcin de mercanca."})]}),r.jsxs(re,{onClick:()=>e("/compras/nuevo"),className:"bg-gray-800 hover:bg-gray-900 shadow-lg",children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nueva Compra"]})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(vt,{children:"Historial de Compras"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center mr-4",children:[r.jsx("span",{className:"text-sm text-gray-600 mr-2 font-medium",children:"Agrupar por Flujo"}),r.jsx("button",{onClick:()=>I(!k),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ${k?"bg-hd-orange":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${k?"translate-x-6":"translate-x-1"}`})})]}),(Object.keys(p).length>0||Object.keys(j).some(Y=>Array.isArray(j[Y])&&j[Y].length>0)||Object.keys(b).some(Y=>b[Y].min!==""||b[Y].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:L,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(It,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar compra...",className:"pl-9",value:t,onChange:Y=>n(Y.target.value)})]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ac,{label:"Nmero",field:"numeroCompra",sortConfig:u,onSort:O,onFilter:C,showFilter:P==="numeroCompra",filterValue:p.numeroCompra,onFilterChange:M,uniqueValues:B("numeroCompra"),selectedValues:j.numeroCompra,onValueToggle:V,className:"w-[140px]"}),r.jsx(ac,{label:"Tipo",field:"tipoDocumento",sortConfig:u,onSort:O,onFilter:C,showFilter:P==="tipoDocumento",filterValue:p.tipoDocumento,onFilterChange:M,uniqueValues:B("tipoDocumento"),selectedValues:j.tipoDocumento,onValueToggle:V,className:"w-[120px]"}),r.jsx(ce,{className:"w-[100px] text-gray-700 font-bold",children:"Ref."}),r.jsx(ac,{label:"Proveedor",field:"proveedorNombre",sortConfig:u,onSort:O,onFilter:C,showFilter:P==="proveedorNombre",filterValue:p.proveedorNombre,onFilterChange:M,uniqueValues:B("proveedorNombre"),selectedValues:j.proveedorNombre,onValueToggle:V}),r.jsx(ac,{label:"Fecha",field:"fechaCompra",sortConfig:u,onSort:O,onFilter:C,showFilter:P==="fechaCompra",filterValue:p.fechaCompra,onFilterChange:M,dateTree:R(),selectedValues:j.fechaCompra,onTreeToggle:T}),r.jsx(ac,{label:"Estado",field:"estado",sortConfig:u,onSort:O,onFilter:C,showFilter:P==="estado",filterValue:p.estado,onFilterChange:M,uniqueValues:B("estado"),selectedValues:j.estado,onValueToggle:V}),r.jsx(ac,{label:"Total",field:"total",sortConfig:u,onSort:O,onFilter:C,showFilter:P==="total",numericValue:b.total,onNumericFilterChange:F,className:"text-right"}),r.jsx(ce,{className:"text-right",children:"Acciones"})]})}),r.jsx(Bt,{children:o?r.jsx(Me,{children:r.jsx(G,{colSpan:8,className:"text-center py-8",children:"Cargando compras..."})}):W.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:8,className:"text-center py-8 text-gray-500",children:"No se encontraron compras."})}):k?K.map(Y=>r.jsxs(bt.Fragment,{children:[Y.items.length>1&&r.jsx(Me,{children:r.jsxs(G,{colSpan:8,className:"bg-gray-100 py-1 px-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:["Flujo: ",Y.root.numeroCompra," (",Y.items.length," documentos)"]})},Y.root.id+"_sep"),H(Y.items)]},Y.root.id+"_group")):H(W)})]})})]})]})},ac=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y=""})=>{const b=n.key===t,N=h!==void 0,P=v!==void 0,A=l||m&&m.length>0||N&&(f.min!==""||f.max!==""),k=t==="fechaCompra"?"Ms antiguo a ms reciente":"De A a Z",I=t==="fechaCompra"?"Ms reciente a ms antiguo":"De Z a A";return r.jsxs(ce,{className:`relative group p-0 ${y}`,children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>a(t),children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"font-bold text-gray-700",children:e}),b?n.direction==="asc"?r.jsx(Ln,{size:14,className:"text-hd-orange"}):r.jsx(Kr,{size:14,className:"text-hd-orange"}):r.jsx(Bu,{size:14,className:"text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s&&r.jsx("button",{onClick:E=>s(t,E),className:`p-1 rounded-sm hover:bg-gray-300 transition-colors ${A?"text-hd-orange":"text-gray-400"}`,children:r.jsx(Vu,{size:14,fill:A?"currentColor":"none"})})]}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Ln,{size:14,className:"mr-2 text-gray-400"})," ",k]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Kr,{size:14,className:"mr-2 text-gray-400"})," ",I]})]}),r.jsxs("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:[r.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:["Filtrar ",e]}),N?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:["Mayor que ",">"]}),r.jsx(ye,{type:"number",placeholder:"0.00",value:f.min,onChange:E=>h(t,"min",E.target.value),className:"h-8 text-xs font-mono",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:["Menor que ","<"]}),r.jsx(ye,{type:"number",placeholder:"0.00",value:f.max,onChange:E=>h(t,"max",E.target.value),className:"h-8 text-xs font-mono"})]})]}):r.jsx(ye,{placeholder:"Buscar...",value:l,onChange:E=>c(t,E.target.value),className:"h-8 text-xs",autoFocus:!0})]}),r.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:P?r.jsx(wO,{tree:v,selectedPaths:m,onToggle:(E,O)=>j(t,E,O),allLeafPaths:(()=>{const E=[],O=(C,M)=>{if(!C.children){E.push(M);return}Object.keys(C.children).forEach(F=>O(C.children[F],M?`${M}/${F}`:F))};return O(v,""),E})()}):u.length>0?r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group sticky top-0 bg-white z-10 border-b border-gray-100 mb-1",onClick:()=>{const E=u.every(O=>m.includes(O));u.forEach(O=>{E?m.includes(O)&&p(t,O):m.includes(O)||p(t,O)})},children:[r.jsx("input",{type:"checkbox",checked:u.length>0&&u.every(E=>m.includes(E)),ref:E=>{if(E){const O=u.some(M=>m.includes(M)),C=u.every(M=>m.includes(M));E.indeterminate=O&&!C}},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs font-bold text-gray-700",children:"(Seleccionar todo)"})]}),u.map(E=>r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group",onClick:()=>p(t,E),children:[r.jsx("input",{type:"checkbox",checked:m.includes(E),readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs text-gray-600 truncate",children:E})]},E))]}):null}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border-t border-gray-100",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px]",onClick:()=>s(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] text-hd-orange",onClick:()=>{N?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(P?m.forEach(E=>j(t,E,!0)):m.forEach(E=>p(t,E))))},children:"Limpiar"})]})]})]})},wO=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s="",allLeafPaths:o=[]})=>{const[l,c]=x.useState(!0),f=Object.keys(e.children||{}).sort((u,m)=>m.localeCompare(u)),h=(u,m)=>{const p=[],v=(j,y)=>{if(!j.children){p.push(y);return}Object.keys(j.children).forEach(b=>v(j.children[b],`${y}/${b}`))};return v(u,m),p};return r.jsxs("div",{className:a>0?"ml-4 pt-1":"",children:[a===0&&r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-100 rounded cursor-pointer group sticky top-0 bg-white z-10 border-b border-gray-100 mb-1",onClick:u=>{u.stopPropagation();const m=o.length>0&&o.every(p=>t.includes(p));n("",m)},children:[r.jsx("div",{className:"w-4 h-4 mr-1"}),r.jsx("input",{type:"checkbox",checked:o.length>0&&o.every(u=>t.includes(u)),ref:u=>{if(u){const m=o.some(v=>t.includes(v)),p=o.every(v=>t.includes(v));u.indeterminate=m&&!p}},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-[11px] font-bold text-gray-700",children:"(Seleccionar todo)"})]}),f.map(u=>{const m=s?`${s}/${u}`:u,p=e.children[u],v=!p.children,j=v?[m]:h(p,m),y=j.every(N=>t.includes(N)),b=j.some(N=>t.includes(N));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-50 rounded cursor-pointer group",onClick:()=>n(m,y),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",onClick:N=>{N.stopPropagation(),c(!l)},children:!v&&(l?r.jsx(Kr,{size:10}):r.jsx(Op,{size:10}))}),r.jsx("input",{type:"checkbox",checked:y,ref:N=>{N&&(N.indeterminate=b&&!y)},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",onClick:N=>N.stopPropagation()}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-700 select-none",children:u})]}),l&&!v&&r.jsx(wO,{tree:p,selectedPaths:t,onToggle:n,depth:a+1,path:m})]},u)})]})},o2=()=>{const e=Tt(),t=ds(),{id:n}=Ts(),a=!!n,s=t.state?.transferFrom,o=t.state?.targetType,[l,c]=x.useState(!1),[f,h]=x.useState([]),[u,m]=x.useState(""),[p,v]=x.useState(new Date().toISOString().split("T")[0]),[j,y]=x.useState(""),[b,N]=x.useState("Contado"),[P,A]=x.useState("Borrador"),[k,I]=x.useState("(Auto)"),[E,O]=x.useState("OrdenCompra"),[C,M]=x.useState(null),[F,V]=x.useState([]),[T,L]=x.useState(""),[U,J]=x.useState(1),[q,W]=x.useState(!0),[z,K]=x.useState([]),[B,R]=x.useState(""),[H,Y]=x.useState([]),[ee,me]=x.useState([]),[De,Se]=x.useState(!1),[We,pe]=x.useState(!1),[ue,ke]=x.useState({habilitarFacturas:!0});x.useEffect(()=>{Re(),se()},[]);const se=async()=>{try{const qe=await fetch("http://localhost:5006/api/ProveedorConfiguration");if(qe.ok){const Z=await qe.json();ke(Z)}}catch(ve){console.error("Error loading config:",ve)}};x.useEffect(()=>{a?Xe():s&&fe()},[n,s]);const fe=()=>{s&&(o&&O(o),M(s.id),m(s.proveedorId),y(s.referenciaProveedor||""),N(s.terminosPago||"Contado"),L(s.monedaId),J(s.tasaCambio),R(s.almacenId),Te(s.id))},Te=async ve=>{try{c(!0);const qe=await sb(ve),Z=qe.detalles.map(le=>({id:le.articuloId,articuloId:le.articuloId,codigo:le.numeroArticulo,descripcion:le.descripcion,cantidad:le.cantidad,costo:le.costoUnitario,unidad:le.unidadMedida,total:le.totalLinea,impuesto:le.montoImpuesto,planMedida:le.planMedida||""}));Y(Z),m(qe.proveedorId),L(qe.monedaId),J(qe.tasaCambio)}catch(qe){console.error("Error fetching source details:",qe)}finally{c(!1)}},Re=async()=>{try{const ve="http://localhost:5006/api",[qe,Z,le,Ce]=await Promise.all([Cj(),za(),fetch(`${ve}/Monedas`).then(Oe=>Oe.json()),go()]);if(h(Array.isArray(qe)?qe:[]),K(Array.isArray(Z)?Z:[]),V(Array.isArray(le)?le:[]),me(Array.isArray(Ce)?Ce:[]),Z.length>0&&!B&&R(Z[0].id),!a&&!s){const Oe=le.find(Le=>Le.esFuncional);Oe&&(L(Oe.id),J(1),W(!0))}}catch(ve){console.error("Error loading catalogs:",ve)}},Ie=async ve=>{if(m(ve),ue.habilitarFacturas&&ve){const qe=f.find(Z=>Z.id===parseInt(ve));qe&&qe.tipoComprobante&&(j||y(qe.tipoComprobante))}},Qe=async(ve,qe)=>{if(!ve)return;const Z=F.find(le=>le.id===parseInt(ve));if(Z&&Z.esFuncional){J(1),W(!0);return}try{const Ce=await fetch(`http://localhost:5006/api/Monedas/tasas?monedaId=${ve}&fecha=${qe}`);if(Ce.ok){const Oe=await Ce.json();J(Oe.tasa||1),W(!1)}else J(1),W(!1)}catch(le){console.error("Error fetching rate:",le)}},Xe=async()=>{try{c(!0);const ve=await sb(n);I(ve.numeroCompra),m(ve.proveedorId),v(ve.fechaCompra.split("T")[0]),y(ve.referenciaProveedor||""),N(ve.terminosPago||"Contado"),A(ve.estado),L(ve.monedaId||""),J(ve.tasaCambio||1),O(ve.tipoDocumento||"Factura"),M(ve.documentoReferenciaId);const qe=ve.detalles.map(Z=>({id:Z.articuloId,articuloId:Z.articuloId,codigo:Z.numeroArticulo,descripcion:Z.descripcion,cantidad:Z.cantidad,costo:Z.costoUnitario,unidad:Z.unidadMedida,total:Z.totalLinea,impuesto:Z.montoImpuesto,planMedida:Z.planMedida||"",cantTotal:Z.cantTotal}));Y(qe)}catch(ve){console.error("Error loading purchase:",ve)}finally{c(!1)}},tt=H.reduce((ve,qe)=>ve+qe.cantidad*qe.costo,0),Q=H.reduce((ve,qe)=>ve+(parseFloat(qe.cantidad)||0),0),_=ue.habilitarFacturas?tt*.18:0,X=tt+_,ne=async ve=>{let qe=[];try{const le=await fetch(`http://localhost:5006/api/Articulos/${ve.id}/Precios`);le.ok&&(qe=await le.json())}catch(Z){console.error("Error fetching product prices",Z)}Y(Z=>{const le=ve.unidadMedida||"UND";if(Z.find(dt=>dt.articuloId===ve.id&&dt.unidad===le))return Z.map(dt=>dt.articuloId===ve.id&&dt.unidad===le?{...dt,cantidad:dt.cantidad+1,total:(dt.cantidad+1)*dt.costo}:dt);const Oe=F.find(dt=>dt.id===parseInt(T)),Le=Oe?Oe.codigo:"DOP",Ye=qe.find(dt=>dt.moneda===Le&&dt.unidadMedida===le),Ze=ve.costoUnitario||0;let Ot=Ze;return Ye?Ot=Ye.precio:Le!=="DOP"&&U>0&&(Ot=Ze/U),[...Z,{articuloId:ve.id,codigo:ve.numeroArticulo,descripcion:ve.descripcion,cantidad:1,costo:Ot,unidad:le,total:Ot*1,planMedida:ve.planMedida||"",costoOriginalDOP:Ze,prices:qe}]}),Se(!1)},ae=(ve,qe,Z)=>{const le=[...H],Ce=le[ve];if(qe==="cantidad"){const Oe=parseFloat(Z)||0;Ce.cantidad=Oe,Ce.total=Oe*Ce.costo,Ce.cantTotal=void 0}else if(qe==="costo"){const Oe=parseFloat(Z)||0;Ce.costo=Oe,Ce.total=Ce.cantidad*Oe}else if(qe==="planMedida"){Ce.planMedida=Z;const Oe=ee.find(Le=>Le.planId===Z);Oe&&([Oe.unidadBase,...(Oe.detalles||[]).map(Ye=>Ye.unidadMedida)].includes(Ce.unidad)||(Ce.unidad=Oe.unidadBase)),Ce.cantTotal=void 0}else if(qe==="unidad"){Ce.unidad=Z;const Oe=F.find(Ze=>Ze.id===parseInt(T)),Le=Oe?Oe.codigo:"DOP",Ye=(Ce.prices||[]).find(Ze=>Ze.moneda===Le&&Ze.unidadMedida===Z);Ye&&(Ce.costo=Ye.precio,Ce.total=Ce.cantidad*Ce.costo),Ce.cantTotal=void 0}Y(le)},ge=ve=>{Y(qe=>qe.filter((Z,le)=>le!==ve))};x.useEffect(()=>{if(!T||H.length===0)return;const ve=F.find(Z=>Z.id===parseInt(T)),qe=ve?ve.codigo:"DOP";Y(Z=>Z.map(le=>{const Ce=(le.prices||[]).find(Le=>Le.moneda===qe&&Le.unidadMedida===le.unidad);let Oe=le.costo;if(Ce)Oe=Ce.precio;else{const Le=le.costoOriginalDOP||le.costo;qe==="DOP"?Oe=Le:U>0&&(Oe=Le/U)}return{...le,costo:Oe,total:le.cantidad*Oe}}))},[T,U]);const be=async()=>{if(!u){alert("Debe seleccionar un proveedor");return}if(H.length===0){alert("Debe agregar al menos un artculo");return}const[ve,qe,Z]=p.split("-").map(Number),le=new Date(ve,qe-1,Z),Ce=new Date;le.setHours(Ce.getHours(),Ce.getMinutes(),Ce.getSeconds());const Oe=`${p}T${String(Ce.getHours()).padStart(2,"0")}:${String(Ce.getMinutes()).padStart(2,"0")}:${String(Ce.getSeconds()).padStart(2,"0")}`,Le={ProveedorId:parseInt(u),FechaCompra:Oe,TerminosPago:b,ReferenciaProveedor:j,Estado:P,Subtotal:tt,Impuestos:_,Total:X,AlmacenId:B?parseInt(B):null,MonedaId:T?parseInt(T):null,TasaCambio:parseFloat(U),TipoDocumento:E,DocumentoReferenciaId:C,Detalles:H.map(Ye=>{let Ze=1;if(Ye.planMedida&&Ye.unidad){const dt=ee.find(Lt=>Lt.planId===Ye.planMedida);if(dt)if(dt.unidadBase===Ye.unidad)Ze=1;else{const Lt=(dt.detalles||[]).find(br=>br.unidadMedida===Ye.unidad);Lt&&(Ze=Lt.cantidad!==void 0?Lt.cantidad:Lt.Cantidad!==void 0?Lt.Cantidad:1)}}const Ot=Ye.cantTotal!==void 0?Ye.cantTotal:(parseFloat(Ye.cantidad)||0)*Ze;return{ArticuloId:Ye.articuloId,NumeroArticulo:Ye.codigo,Descripcion:Ye.descripcion,Cantidad:Ye.cantidad,UnidadMedida:Ye.unidad,CostoUnitario:Ye.costo,TotalLinea:Ye.total,PlanMedida:Ye.planMedida,CantTotal:Ot,CantAdq:parseFloat(Ye.cantidad)||0,PorcentajeImpuesto:18,MontoImpuesto:Ye.total*.18}})};try{await B8(Le),alert("Compra guardada exitosamente"),e("/compras")}catch(Ye){console.error("Error saving purchase:",Ye),alert("Error al guardar la compra")}},Fe=async()=>{try{c(!0),await bO(n),pe(!1),e("/compras")}catch(ve){console.error("Error anular compra:",ve)}finally{c(!1),pe(!1)}};return r.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto pb-10",children:[r.jsx(ul,{isOpen:De,onClose:()=>Se(!1),onSelect:ne}),r.jsx(jO,{isOpen:We,onClose:()=>pe(!1),onConfirm:Fe,title:"Anular Compra",message:`Est seguro que desea anular la compra ${k}? Esta accin no se puede deshacer y reversar el inventario.`,confirmLabel:"Confirmar Anulacin"}),r.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-gray-50/95 backdrop-blur z-10 py-4 border-b border-gray-200 -mx-6 px-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Orden de Compra"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Documento #",k,"  ",r.jsx("span",{className:"text-orange-600 font-medium",children:P})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(re,{variant:"outline",onClick:()=>e("/compras"),children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Cancelar"]}),a&&r.jsxs(re,{variant:"outline",onClick:()=>window.open(`/compras/imprimir/${n}`,"_blank"),children:[r.jsx(La,{className:"mr-2 h-4 w-4"})," Imprimir"]}),!a&&r.jsxs(re,{className:"bg-gray-800 hover:bg-gray-900",onClick:be,children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar Compra"]}),a&&P!=="Anulado"&&r.jsxs("button",{type:"button",className:"flex items-center px-4 py-2 rounded-md transition-colors text-red-500 hover:text-red-700 hover:bg-red-50 border border-red-200 cursor-pointer text-sm font-medium shadow-sm bg-white",onClick:()=>pe(!0),children:[r.jsx(It,{className:"mr-2 h-4 w-4"})," Anular Compra"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{className:"text-sm uppercase tracking-wider text-gray-500",children:"Datos Generales"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Tipo de Documento"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:E,onChange:ve=>O(ve.target.value),disabled:a||s||C,children:[r.jsx("option",{value:"Factura",children:"Factura Directa"}),r.jsx("option",{value:"OrdenCompra",children:"Orden de Compra"}),r.jsx("option",{value:"Recepcion",disabled:!0,children:"Recepcin (Requiere OC)"})]}),C&&r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Vinculado al documento anterior ID: ",C]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Proveedor"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white pl-3 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:u,onChange:ve=>Ie(ve.target.value),disabled:a,children:[r.jsx("option",{value:"",children:"Seleccionar..."}),f.map(ve=>r.jsx("option",{value:ve.id,children:ve.razonSocial},ve.id))]}),r.jsx(yc,{className:"absolute right-2.5 top-2.5 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Moneda"}),r.jsx("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:T,onChange:ve=>{L(ve.target.value),Qe(ve.target.value,p)},disabled:a,children:F.map(ve=>r.jsxs("option",{value:ve.id,children:[ve.codigo," - ",ve.nombre]},ve.id))})]}),!q&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Tasa de Cambio"}),r.jsx(ye,{type:"number",value:U,onChange:ve=>J(parseFloat(ve.target.value)||1),disabled:a})]})]})]}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{className:"text-sm uppercase tracking-wider text-gray-500",children:"Detalles Factura"})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Tipo de Documento"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:E,onChange:ve=>O(ve.target.value),disabled:a||s,children:[r.jsx("option",{value:"OrdenCompra",children:"Orden de Compra"}),r.jsx("option",{value:"Recepcion",children:"Recepcin de Mercanca"}),ue.habilitarFacturas&&r.jsx("option",{value:"Factura",children:"Factura de Compra"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Fecha Documento"}),r.jsx(ye,{type:"date",value:p,onChange:ve=>{v(ve.target.value),Qe(T,ve.target.value)},disabled:a})]}),ue.habilitarFacturas&&r.jsx("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-100 mb-4",children:r.jsx(ye,{label:"NCF / No. Factura",placeholder:"ej: B0100000001",title:"Nmero de Comprobante Fiscal (NCF) del proveedor",value:j,onChange:ve=>y(ve.target.value),disabled:a,className:"border-blue-300 focus:border-blue-500 focus:ring-blue-500 font-mono"})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Condicin de Pago"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:bg-gray-100",value:b,onChange:ve=>N(ve.target.value),disabled:a,children:[r.jsx("option",{children:"Contado"}),r.jsx("option",{children:"Crdito 15 das"}),r.jsx("option",{children:"Crdito 30 das"}),r.jsx("option",{children:"Crdito 60 das"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Almacn de Recepcin"}),r.jsxs("select",{value:B,onChange:ve=>R(ve.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange disabled:cursor-not-allowed disabled:bg-gray-100",disabled:a,children:[r.jsx("option",{value:"",children:"Seleccione Almacn"}),z.map(ve=>r.jsx("option",{value:ve.id,children:ve.nombre},ve.id))]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-3 space-y-4",children:r.jsxs(Be,{className:"min-h-[500px] flex flex-col",children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between py-3",children:[r.jsx(vt,{className:"text-sm uppercase tracking-wider text-gray-500",children:"Artculos a Ingresar"}),!a&&r.jsxs(re,{size:"sm",variant:"ghost",className:"text-hd-orange hover:bg-orange-50 hover:text-orange-700",onClick:()=>Se(!0),children:[r.jsx(_t,{className:"mr-1 h-4 w-4"})," Agregar Producto"]})]}),r.jsx("div",{className:"flex-1 p-0 overflow-hidden",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-50",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-[120px]",children:"Cdigo"}),r.jsx(ce,{children:"Producto"}),r.jsx(ce,{className:"w-[120px]",children:"Plan"}),r.jsx(ce,{className:"w-[100px]",children:"U.M."}),r.jsx(ce,{className:"w-[100px] text-right",children:"Cantidad"}),r.jsx(ce,{className:"w-[100px] text-right text-purple-600",children:"Cant. Total"}),r.jsx(ce,{className:"w-[120px] text-right",children:"Costo Unit."}),r.jsx(ce,{className:"w-[120px] text-right",children:"Total"}),r.jsx(ce,{className:"w-[50px]"})]})}),r.jsxs(Bt,{children:[H.map((ve,qe)=>{let Z=1;if(ve.planMedida&&ve.unidad){const Ce=ee.find(Oe=>Oe.planId===ve.planMedida);if(Ce)if(Ce.unidadBase===ve.unidad)Z=1;else{const Oe=(Ce.detalles||[]).find(Le=>Le.unidadMedida===ve.unidad);Oe&&(Z=Oe.cantidad!==void 0?Oe.cantidad:Oe.Cantidad!==void 0?Oe.Cantidad:1)}}const le=ve.cantTotal!==void 0?ve.cantTotal:(parseFloat(ve.cantidad)||0)*Z;return r.jsxs(Me,{children:[r.jsx(G,{className:"font-mono text-xs text-gray-500",children:ve.codigo}),r.jsx(G,{className:"font-medium text-gray-800",children:ve.descripcion}),r.jsx(G,{children:r.jsxs("select",{className:"w-full text-xs border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ve.planMedida,onChange:Ce=>ae(qe,"planMedida",Ce.target.value),disabled:a,children:[r.jsx("option",{value:"",children:"--"}),ee.map(Ce=>r.jsx("option",{value:Ce.planId,children:Ce.planId},Ce.planId))]})}),r.jsx(G,{children:r.jsx("select",{className:"w-full text-xs border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ve.unidad,onChange:Ce=>ae(qe,"unidad",Ce.target.value),disabled:a,children:(()=>{const Ce=ee.find(Ze=>Ze.planId===ve.planMedida),Oe=Ce?[Ce.unidadBase,...(Ce.detalles||[]).map(Ze=>Ze.unidadMedida)]:[ve.unidad],Le=Oe.length>0&&Oe[0]!==""?Oe:(ve.prices||[]).map(Ze=>Ze.unidadMedida);return[...new Set(Le)].map(Ze=>r.jsx("option",{value:Ze,children:Ze},Ze))})()})}),r.jsx(G,{children:r.jsx("input",{type:"number",className:"w-full text-right border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ve.cantidad,onChange:Ce=>ae(qe,"cantidad",Ce.target.value),disabled:a})}),r.jsx(G,{className:"text-right font-mono text-purple-600",children:le.toFixed(2)}),r.jsx(G,{children:r.jsx("input",{type:"number",className:"w-full text-right border-0 border-b border-transparent focus:border-hd-orange focus:ring-0 bg-transparent p-1 h-8",value:ve.costo,onChange:Ce=>ae(qe,"costo",Ce.target.value),disabled:a})}),r.jsxs(G,{className:"text-right font-semibold text-gray-900",children:["$",ve.total.toFixed(2)]}),r.jsx(G,{children:!a&&r.jsx("button",{onClick:()=>ge(qe),className:"text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(Qt,{size:16})})})]},qe)}),H.length>0&&r.jsxs(Me,{className:"bg-gray-50 font-bold border-t-2 border-gray-200",children:[r.jsx(G,{colSpan:5,className:"text-right",children:"Total Cantidad ENTRADA:"}),r.jsx(G,{className:"text-right",children:Q.toFixed(2)}),r.jsx(G,{colSpan:3})]}),H.length===0&&r.jsx(Me,{className:"bg-gray-50/30 border-dashed border-b-2",children:r.jsx(G,{colSpan:6,className:"text-center py-4 text-gray-400 italic text-xs",children:r.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[r.jsx("p",{children:"No hay artculos agregados an."}),r.jsxs(re,{variant:"outline",className:"text-hd-orange border-hd-orange hover:bg-orange-50",onClick:()=>Se(!0),children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Agregar Producto"]})]})})})]})]})}),r.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6",children:r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"w-64 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["$",tt.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["$",tt.toFixed(2)]})]}),ue.habilitarFacturas&&r.jsxs("div",{className:"flex justify-between text-sm text-gray-600",title:"Impuestos calculados (Modo Fiscal Activo)",children:[r.jsx("span",{children:"Impuestos (Est. 18%):"}),r.jsxs("span",{children:["$",_.toFixed(2)]})]}),r.jsx("div",{className:"h-px bg-gray-300 my-2"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[r.jsx("span",{children:"Total Compra:"}),r.jsxs("span",{children:["$",X.toFixed(2)]})]})]})})})]})})]})]})},NO="http://localhost:5006/api",q8=async()=>{const e=await fetch(`${NO}/Ncf`);if(!e.ok)throw new Error("Error al obtener NCFs");return e.json()},G8=async(e,t)=>{if(!(await fetch(`${NO}/Ncf/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Error al actualizar NCF");return!0},H8=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(!1),[l,c]=x.useState(null);x.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const m=await q8();t(m),c(null)}catch(m){console.error(m),c("Error al cargar la configuracin de NCF. Verifique la conexin con el servidor.")}finally{a(!1)}},h=(m,p,v)=>{t(j=>j.map(y=>y.id===m?{...y,[p]:v}:y))},u=async()=>{try{o(!0);const m=e.map(p=>G8(p.id,p));await Promise.all(m),alert("Configuracin de NCF guardada correctamente.")}catch(m){console.error(m),alert("Error al guardar cambios. Revise la consola.")}finally{o(!1)}};return n?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx(Dn,{className:"animate-spin text-hd-orange",size:48})}):l?r.jsxs("div",{className:"p-8 text-center bg-red-50 rounded-lg",children:[r.jsx(zc,{className:"mx-auto text-red-500 mb-4",size:48}),r.jsx("h3",{className:"text-xl font-bold text-red-700 mb-2",children:"Error de Carga"}),r.jsx("p",{className:"text-red-600 mb-4",children:l}),r.jsx(re,{onClick:f,variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:"Reintentar"})]}):r.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg text-gray-600",children:r.jsx(ii,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Comprobantes Fiscales (NCF)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Configuracin de secuencias para Repblica Dominicana (DGII)"})]})]}),r.jsxs(re,{onClick:u,disabled:s,className:"bg-hd-orange hover:bg-orange-600 shadow-md",children:[s?r.jsx(Dn,{className:"animate-spin mr-2 h-4 w-4"}):r.jsx(Ft,{className:"mr-2 h-4 w-4"}),s?"Guardando...":"Guardar Cambios"]})]}),r.jsx("div",{className:"grid gap-6",children:e.sort((m,p)=>m.tipoNCF.localeCompare(p.tipoNCF)).map(m=>r.jsxs(Be,{className:`overflow-hidden border-l-4 ${m.activo?"border-l-hd-orange":"border-l-gray-300 opacity-75"}`,children:[r.jsx(gt,{className:"bg-gray-50/50 pb-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(vt,{className:"text-lg font-medium text-gray-800 flex items-center",children:[r.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-mono px-2 py-1 rounded mr-3",children:m.prefijo||m.tipoNCF}),m.nombre]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.activo,onChange:p=>h(m.id,"activo",p.target.checked),className:"mr-2 rounded text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"text-xs font-bold text-gray-500",children:"ACTIVO"})]}),r.jsx(jj,{size:16,className:"text-gray-400 cursor-help",title:"Configuracin de secuencia DGII"})]})]})}),r.jsx(Pt,{className:"pt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Prefijo Serie"}),r.jsx(ye,{value:m.prefijo||"",onChange:p=>h(m.id,"prefijo",p.target.value),className:"font-mono uppercase",placeholder:"Ej: B01"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Secuencia Inicial"}),r.jsx(ye,{type:"number",value:m.desde,onChange:p=>h(m.id,"desde",parseInt(p.target.value)),className:"font-mono text-right"}),r.jsx("p",{className:"text-[10px] text-gray-400",children:"Inicio del rango"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Secuencia Actual / Siguiente"}),r.jsxs("div",{className:"relative",children:[r.jsx(ye,{type:"number",value:m.actual+1,onChange:p=>h(m.id,"actual",parseInt(p.target.value)-1),className:"font-mono text-right font-bold text-gray-900 border-hd-orange/50 focus:border-hd-orange ring-hd-orange/20"}),r.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Sig:"})]}),r.jsxs("p",{className:"text-[10px] text-blue-600 font-medium",children:["NCF a generar: ",m.prefijo||m.tipoNCF,String((m.actual||0)+1).padStart(8,"0")]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Lmite / Vencimiento"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ye,{type:"number",value:m.hasta,onChange:p=>h(m.id,"hasta",parseInt(p.target.value)),className:"font-mono text-right flex-1",placeholder:"Lmite"}),r.jsx(ye,{type:"date",value:m.fechaVencimiento?m.fechaVencimiento.split("T")[0]:"",onChange:p=>h(m.id,"fechaVencimiento",p.target.value),className:"font-mono flex-1"})]}),r.jsx("p",{className:"text-[10px] text-gray-400",children:"Lmite Secuencia / Fecha Vencimiento"})]})]})})]},m.id))})]})},i2=({title:e,children:t})=>r.jsxs("div",{className:"border border-gray-200 bg-white rounded-lg mb-6 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e})}),r.jsx("div",{className:"p-6",children:t})]}),_h=({label:e,children:t,description:n})=>r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),n&&r.jsx("span",{className:"text-xs text-gray-500",children:n})]}),t]}),W8=()=>{const[e,t]=x.useState({useAutoSequence:!0,useInitials:!1,initials:"CL",sequenceLength:4,currentValue:1,separator:"-",nameCase:"words"}),[n,a]=x.useState(!0),[s,o]=x.useState("");x.useEffect(()=>{l()},[]);const l=async()=>{try{const u=await fetch("http://localhost:5006/api/ClientConfiguration");if(u.ok){const m=await u.json();t(m)}}catch(u){console.error("Error fetching config:",u)}finally{a(!1)}},c=u=>{const{name:m,value:p,type:v,checked:j}=u.target;t(y=>({...y,[m]:v==="checkbox"?j:p}))},f=async()=>{try{(await fetch("http://localhost:5006/api/ClientConfiguration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(o("Configuracin guardada correctamente"),setTimeout(()=>o(""),3e3)):alert("Error al guardar configuracin")}catch(u){console.error("Error saving config:",u),alert("Error de conexin")}},h=()=>{const u=String(e.currentValue).padStart(e.sequenceLength,"0");return e.useInitials?`${e.initials}${e.separator}${u}`:u};return n?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando configuracin..."}):r.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuracin de Cliente"}),r.jsx("p",{className:"text-gray-500",children:"Defina cmo se generan los cdigos de cliente automticamente."})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[s&&r.jsx("span",{className:"text-green-600 font-medium animate-pulse",children:s}),r.jsxs(re,{onClick:f,className:"bg-hd-orange hover:bg-orange-600 text-white",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar Cambios"]})]})]}),r.jsx(i2,{title:"Secuencia Numrica",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-100",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-blue-900",children:"Usar Secuencia Automtica"}),r.jsx("p",{className:"text-xs text-blue-700",children:"El sistema generar el cdigo al guardar."})]}),r.jsx("input",{type:"checkbox",name:"useAutoSequence",checked:e.useAutoSequence,onChange:c,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Usar Iniciales"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Prefijo antes del nmero (ej. CL)."})]}),r.jsx("input",{type:"checkbox",name:"useInitials",checked:e.useInitials,onChange:c,disabled:!e.useAutoSequence,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),r.jsx(_h,{label:"Separador",children:r.jsx(ye,{name:"separator",value:e.separator,onChange:c,disabled:!e.useAutoSequence||!e.useInitials,maxLength:1,className:"w-20 text-center font-bold"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(_h,{label:"Iniciales",description:"Texto al inicio del cdigo.",children:r.jsx(ye,{name:"initials",value:e.initials,onChange:c,disabled:!e.useAutoSequence||!e.useInitials,className:"uppercase font-mono"})}),r.jsx(_h,{label:"Valor Inicial / Prximo",description:"El prximo nmero a utilizar.",children:r.jsx(ye,{type:"number",name:"currentValue",value:e.currentValue,onChange:c,disabled:!e.useAutoSequence,className:"font-mono"})}),r.jsx(_h,{label:"Longitud de Secuencia",description:"Cantidad de ceros a la izquierda.",children:r.jsx(ye,{type:"number",name:"sequenceLength",value:e.sequenceLength,onChange:c,disabled:!e.useAutoSequence,min:1,max:10,className:"font-mono"})}),r.jsxs("div",{className:"mt-6 p-4 border border-dashed border-gray-300 rounded-lg text-center",children:[r.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:"Vista Previa"}),r.jsx("span",{className:"text-2xl font-bold text-gray-800 font-mono tracking-wider",children:h()})]})]})]})}),r.jsx(i2,{title:"Formato del Nombre",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Formato del Nombre"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Define cmo se capitaliza el nombre del cliente."})]}),r.jsxs("select",{name:"nameCase",value:e.nameCase,onChange:c,className:"h-8 w-40 p-1 border rounded bg-white",children:[r.jsx("option",{value:"words",children:"Cada palabra (Palabras)"}),r.jsx("option",{value:"first",children:"Primera letra"}),r.jsx("option",{value:"normal",children:"Sin cambios"})]})]})})})})]})},K8="http://localhost:5006/api",Y8=()=>{const e=Tt(),[t,n]=x.useState(null),[a,s]=x.useState(null),[o,l]=x.useState("");x.useEffect(()=>{n(document.getElementById("header-actions")),s(document.getElementById("header-message"))},[]);const[c,f]=x.useState({usarSecuenciaPorGrupo:!0,prefijo:"",siguienteNumero:"00001",longitudMinima:5,permitirEdicion:!1,requiereCodBarras:!1,activarPorDefecto:!0,categoriaDefecto:"",rutaImagenesDefecto:""}),[h,u]=x.useState([]),[m,p]=x.useState([]),[v,j]=x.useState(!1),[y,b]=x.useState([{id:1,grupo:"Profesional",prefijo:"PROF-",siguienteNumero:"00001",longitudMinima:5,activo:!0},{id:2,grupo:"Industrial",prefijo:"IND-",siguienteNumero:"00001",longitudMinima:5,activo:!0},{id:3,grupo:"Hogar",prefijo:"HOG-",siguienteNumero:"00001",longitudMinima:5,activo:!0},{id:4,grupo:"Comercial",prefijo:"COM-",siguienteNumero:"00001",longitudMinima:5,activo:!1}]),[N,P]=x.useState(!1),A=(T,L)=>{f(U=>{const J={...U,[T]:L};if(T==="prefijo"||T==="longitudMinima"){const q="1".padStart(J.longitudMinima,"0");J.formatoEjemplo=`${J.prefijo}${q}`}return J})},k=(T,L,U)=>{b(J=>J.map(q=>{if(q.id!==T)return q;const W={...q,[L]:U};if(L==="planDefecto")if(U){const z=h.find(K=>K.planId===U);z&&(W.unidadMedidaDefecto=z.unidadBase)}else W.unidadMedidaDefecto="";return W}))},I=()=>{const T={id:null,grupo:"",prefijo:"",siguienteNumero:"00001",longitudMinima:5,activo:!0,esDefecto:!1,planDefecto:"",unidadMedidaDefecto:""};b([...y,T])},E=T=>{b(y.map(L=>({...L,esDefecto:L.id===T})))},O=T=>{b(y.filter(L=>L.id!==T))},C=async()=>{j(!0);try{const T=await PD();f(T)}catch(T){console.error("Error loading config:",T),alert("No se pudo cargar la configuracin")}finally{j(!1)}},M=async()=>{try{const L=(await kj()).map(U=>({id:U.id,grupo:U.grupo,prefijo:U.prefijo||"",siguienteNumero:U.siguienteNumero||"",longitudMinima:U.longitudMinima,activo:U.activo,esDefecto:U.esDefecto||!1,planDefecto:U.planDefecto||"",unidadMedidaDefecto:U.unidadMedidaDefecto||""}));b(L)}catch(T){console.error("Error loading sequences:",T),alert("No se pudieron cargar las secuencias")}};x.useEffect(()=>{(async()=>{try{const L=await go();u(L)}catch(L){console.error(L)}try{const L=await Sm();p(L)}catch(L){console.error("Error loading groups in config",L)}await C(),M()})()},[]);const F=async()=>{if(!N){P(!0);try{const T=await fetch(`${K8}/FileSystem/NativeBrowse`);if(T.status===200){const L=await T.json();L.path&&A("rutaImagenesDefecto",L.path)}else if(T.status===204)console.log("User cancelled the dialog");else if(T.status===408)alert("Tiempo de espera agotado. Por favor, intente de nuevo.");else{const L=await T.json();alert("Error: "+L.message)}}catch(T){console.error("Error opening native explorer:",T),alert("No se pudo abrir el explorador del sistema")}finally{P(!1)}}},V=async()=>{if(y.filter(J=>!J.grupo||J.grupo.trim()==="").length>0){alert("No se pueden guardar grupos sin nombre. Por favor, asigne un nombre a todos los grupos o elimnelos.");return}const L=y.map(J=>J.grupo.trim().toLowerCase());if(L.filter((J,q)=>L.indexOf(J)!==q).length>0){alert("Existen grupos con nombres duplicados. Cada grupo debe ser nico.");return}try{await WF(c),await KF(y),l("Cambios guardados correctamente"),setTimeout(()=>l(""),3e3),await M()}catch(J){console.error("Error al guardar:",J),alert("Error al guardar la configuracin")}};return r.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[t&&so.createPortal(r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),className:"mr-2",children:r.jsx("span",{className:"text-gray-600",children:"Cancelar"})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:V,children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Guardar Cambios"]})]}),t),a&&o&&so.createPortal(r.jsx("div",{className:"text-green-600 text-sm font-medium",children:o}),a),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Secuencia Numrica General"})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("input",{type:"checkbox",id:"usarSecuenciaPorGrupo",checked:c.usarSecuenciaPorGrupo,onChange:T=>A("usarSecuenciaPorGrupo",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"usarSecuenciaPorGrupo",className:"text-sm font-semibold text-blue-900",children:"Usar Secuencia por Grupo de Producto"}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Cada grupo de producto tendr su propia secuencia numrica independiente"})]})]}),!c.usarSecuenciaPorGrupo&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Prefijo"}),r.jsx(ye,{value:c.prefijo,onChange:T=>A("prefijo",T.target.value),placeholder:"Ej: ART-, PROD-, ITM-"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Prefijo que se agregar antes del nmero de artculo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Siguiente Nmero"}),r.jsx(ye,{value:c.siguienteNumero,onChange:T=>A("siguienteNumero",T.target.value),placeholder:"00001"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Prximo nmero que se asignar a un nuevo artculo"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Longitud Mnima"}),r.jsx(ye,{type:"number",min:"1",max:"10",value:c.longitudMinima,onChange:T=>A("longitudMinima",parseInt(T.target.value))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cantidad de dgitos mnimos (se rellenar con ceros a la izquierda)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Formato de Ejemplo"}),r.jsx("div",{className:"h-10 px-3 py-2 bg-gray-100 border border-gray-300 rounded-md flex items-center",children:r.jsx("span",{className:"font-mono text-sm font-semibold text-gray-700",children:c.formatoEjemplo})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vista previa del formato del nmero de artculo"})]})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"permitirEdicion",checked:c.permitirEdicion,onChange:T=>A("permitirEdicion",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"permitirEdicion",className:"text-sm font-medium text-gray-700",children:"Permitir edicin manual del nmero de artculo"})]})})]})]}),c.usarSecuenciaPorGrupo&&r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(vt,{children:"Secuencias por Grupo de Producto"}),r.jsxs(re,{variant:"outline",size:"sm",onClick:I,children:[r.jsx(_t,{className:"mr-2 h-4 w-4"}),"Agregar Grupo"]})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-12 text-center text-xs text-gray-500",children:"Activo"}),r.jsx(ce,{className:"w-20 text-center text-xs font-bold text-blue-600",children:"Por Defecto"}),r.jsx(ce,{children:"Grupo de Producto"}),r.jsx(ce,{className:"w-24",children:"Plan Def."}),r.jsx(ce,{className:"w-20",children:"U.M. Def."}),r.jsx(ce,{className:"w-32",children:"Prefijo"}),r.jsx(ce,{className:"w-32",children:"Siguiente #"}),r.jsx(ce,{className:"w-24",children:"Longitud"}),r.jsx(ce,{className:"w-48",children:"Ejemplo"}),r.jsx(ce,{className:"w-16"})]})}),r.jsx(Bt,{children:y.map(T=>r.jsxs(Me,{children:[r.jsx(G,{className:"text-center",children:r.jsx("input",{type:"checkbox",checked:T.activo,onChange:L=>k(T.id,"activo",L.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",title:"Activar/Desactivar grupo"})}),r.jsx(G,{className:"text-center bg-blue-50/50",children:r.jsx("input",{type:"radio",name:"defaultGroup",checked:T.esDefecto,onChange:()=>E(T.id),className:"h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500",title:"Marcar como grupo por defecto"})}),r.jsx(G,{children:r.jsxs("select",{value:T.grupo,onChange:L=>k(T.id,"grupo",L.target.value),className:"w-full h-8 px-2 text-sm border border-gray-300 rounded focus:ring-hd-orange focus:border-hd-orange bg-white",children:[r.jsx("option",{value:"",children:"Seleccione Grupo"}),m.map(L=>r.jsx("option",{value:L.nombre,children:L.nombre},L.id)),T.grupo&&!m.some(L=>L.nombre===T.grupo)&&r.jsxs("option",{value:T.grupo,children:[T.grupo," (Legacy)"]})]})}),r.jsx(G,{children:r.jsxs("select",{value:T.planDefecto||"",onChange:L=>k(T.id,"planDefecto",L.target.value),className:"w-full text-xs border-0 bg-transparent p-1 h-8 focus:ring-0",children:[r.jsx("option",{value:"",children:"--"}),h.map((L,U)=>r.jsx("option",{value:L.planId,children:L.planId},U))]})}),r.jsx(G,{children:(()=>{const L=h.find(q=>q.planId===T.planDefecto);T.planDefecto&&!L&&console.warn("Plan not found:",T.planDefecto),L&&console.log("Plan UoMs:",L);const U=L?[L.unidadBase,...L.detalles?L.detalles.map(q=>q.unidadMedida):[]]:[],J=[...new Set(U)];return r.jsxs("select",{value:T.unidadMedidaDefecto||"",onChange:q=>k(T.id,"unidadMedidaDefecto",q.target.value),className:"w-full text-xs border-0 bg-transparent p-1 h-8 focus:ring-0",disabled:!T.planDefecto,title:T.planDefecto?"Unidad por defecto":"Seleccione un plan primero",children:[J.length===0&&r.jsx("option",{value:"",children:"--"}),J.map((q,W)=>r.jsx("option",{value:q,children:q},W))]})})()}),r.jsx(G,{children:r.jsx(ye,{value:T.prefijo,onChange:L=>k(T.id,"prefijo",L.target.value),placeholder:"PROF-",className:"border-0 bg-transparent p-1 h-8"})}),r.jsx(G,{children:r.jsx(ye,{value:T.siguienteNumero,onChange:L=>k(T.id,"siguienteNumero",L.target.value),placeholder:"00001",className:"border-0 bg-transparent p-1 h-8"})}),r.jsx(G,{children:r.jsx(ye,{type:"number",min:"1",max:"10",value:T.longitudMinima,onChange:L=>k(T.id,"longitudMinima",parseInt(L.target.value)),className:"border-0 bg-transparent p-1 h-8"})}),r.jsx(G,{children:r.jsxs("span",{className:"font-mono text-sm font-semibold text-gray-700",children:[T.prefijo,String(1).padStart(T.longitudMinima,"0")]})}),r.jsx(G,{className:"text-center",children:r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600",onClick:()=>O(T.id),children:r.jsx(Qt,{className:"h-3 w-3"})})})]},T.id))})]}),r.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:" Importante"}),r.jsx("p",{className:"text-xs text-yellow-800",children:"Al crear un artculo, el sistema usar la secuencia del grupo de producto seleccionado. Asegrese de que cada grupo tenga una secuencia configurada."})]})]})]}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Configuracin Adicional"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"grid grid-cols-2 gap-6",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Categora por Defecto"}),r.jsxs("select",{value:c.categoriaDefecto||"",onChange:T=>A("categoriaDefecto",T.target.value),className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",children:[r.jsx("option",{value:"",children:"Sin categora"}),r.jsx("option",{children:"Herramientas Manuales"}),r.jsx("option",{children:"Herramientas Elctricas"}),r.jsx("option",{children:"Plomera"}),r.jsx("option",{children:"Electricidad"}),r.jsx("option",{children:"Pintura"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Categora que se asignar por defecto a nuevos artculos"})]})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"requiereCodBarras",checked:c.requiereCodBarras,onChange:T=>A("requiereCodBarras",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"requiereCodBarras",className:"text-sm font-medium text-gray-700",children:"Requerir cdigo de barras al crear artculo"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"activarPorDefecto",checked:c.activarPorDefecto,onChange:T=>A("activarPorDefecto",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"activarPorDefecto",className:"text-sm font-medium text-gray-700",children:"Activar artculos por defecto al crearlos"})]}),r.jsxs("div",{className:"pt-4 border-t",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Ruta por Defecto para Imgenes de Productos"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ye,{value:c.rutaImagenesDefecto||"",onChange:T=>A("rutaImagenesDefecto",T.target.value),placeholder:"Ej: C:\\POS\\Imagenes\\Productos",className:"flex-1"}),r.jsxs(re,{variant:"outline",onClick:F,title:"Explorar carpetas",disabled:N,children:[r.jsx(Ht,{className:`h-4 w-4 mr-2 ${N?"animate-spin":""}`}),N?"Abriendo...":"Explorar"]})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Directorio en el servidor donde se almacenarn las fotos de los artculos."})]})]})]})]})};var Yu=e=>e.type==="checkbox",Qi=e=>e instanceof Date,Jn=e=>e==null;const SO=e=>typeof e=="object";var Lr=e=>!Jn(e)&&!Array.isArray(e)&&SO(e)&&!Qi(e),X8=e=>Lr(e)&&e.target?Yu(e.target)?e.target.checked:e.target.value:e,J8=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Q8=(e,t)=>e.has(J8(t)),Z8=e=>{const t=e.constructor&&e.constructor.prototype;return Lr(t)&&t.hasOwnProperty("isPrototypeOf")},Rj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function tn(e){let t;const n=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Rj&&(e instanceof Blob||a))&&(n||Lr(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!Z8(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=tn(e[s]));else return e;return t}var Bp=e=>/^\w*$/.test(e),Mr=e=>e===void 0,_j=e=>Array.isArray(e)?e.filter(Boolean):[],$j=e=>_j(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ut=(e,t,n)=>{if(!t||!Lr(e))return n;const a=(Bp(t)?[t]:$j(t)).reduce((s,o)=>Jn(s)?s:s[o],e);return Mr(a)||a===e?Mr(e[t])?n:e[t]:a},ks=e=>typeof e=="boolean",mr=(e,t,n)=>{let a=-1;const s=Bp(t)?[t]:$j(t),o=s.length,l=o-1;for(;++a<o;){const c=s[a];let f=n;if(a!==l){const h=e[c];f=Lr(h)||Array.isArray(h)?h:isNaN(+s[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=f,e=e[c]}};const l2={BLUR:"blur",FOCUS_OUT:"focusout"},Za={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ws={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eU=bt.createContext(null);eU.displayName="HookFormContext";var tU=(e,t,n,a=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const l=o;return t._proxyFormState[l]!==Za.all&&(t._proxyFormState[l]=!a||Za.all),e[l]}});return s};const rU=typeof window<"u"?bt.useLayoutEffect:bt.useEffect;var da=e=>typeof e=="string",nU=(e,t,n,a,s)=>da(e)?(a&&t.watch.add(e),ut(n,e,s)):Array.isArray(e)?e.map(o=>(a&&t.watch.add(o),ut(n,o))):(a&&(t.watchAll=!0),n),ob=e=>Jn(e)||!SO(e);function Ko(e,t,n=new WeakSet){if(ob(e)||ob(t))return Object.is(e,t);if(Qi(e)&&Qi(t))return e.getTime()===t.getTime();const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of a){const l=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const c=t[o];if(Qi(l)&&Qi(c)||Lr(l)&&Lr(c)||Array.isArray(l)&&Array.isArray(c)?!Ko(l,c,n):!Object.is(l,c))return!1}}return!0}var aU=(e,t,n,a,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[a]:s||!0}}:{},lu=e=>Array.isArray(e)?e:[e],c2=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}};function CO(e,t){const n={};for(const a in e)if(e.hasOwnProperty(a)){const s=e[a],o=t[a];if(s&&Lr(s)&&o){const l=CO(s,o);Lr(l)&&(n[a]=l)}else e[a]&&(n[a]=o)}return n}var $n=e=>Lr(e)&&!Object.keys(e).length,Fj=e=>e.type==="file",es=e=>typeof e=="function",Pm=e=>{if(!Rj)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},kO=e=>e.type==="select-multiple",Lj=e=>e.type==="radio",sU=e=>Lj(e)||Yu(e),B0=e=>Pm(e)&&e.isConnected;function oU(e,t){const n=t.slice(0,-1).length;let a=0;for(;a<n;)e=Mr(e)?a++:e[t[a++]];return e}function iU(e){for(const t in e)if(e.hasOwnProperty(t)&&!Mr(e[t]))return!1;return!0}function Rr(e,t){const n=Array.isArray(t)?t:Bp(t)?[t]:$j(t),a=n.length===1?e:oU(e,n),s=n.length-1,o=n[s];return a&&delete a[o],s!==0&&(Lr(a)&&$n(a)||Array.isArray(a)&&iU(a))&&Rr(e,n.slice(0,-1)),e}var lU=e=>{for(const t in e)if(es(e[t]))return!0;return!1};function PO(e){return Array.isArray(e)||Lr(e)&&!lU(e)}function ib(e,t={}){for(const n in e){const a=e[n];PO(a)?(t[n]=Array.isArray(a)?[]:{},ib(a,t[n])):Mr(a)||(t[n]=!0)}return t}function uc(e,t,n){n||(n=ib(t));for(const a in e){const s=e[a];if(PO(s))Mr(t)||ob(n[a])?n[a]=ib(s,Array.isArray(s)?[]:{}):uc(s,Jn(t)?{}:t[a],n[a]);else{const o=t[a];n[a]=!Ko(s,o)}}return n}const d2={value:!1,isValid:!1},u2={value:!0,isValid:!0};var EO=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Mr(e[0].attributes.value)?Mr(e[0].value)||e[0].value===""?u2:{value:e[0].value,isValid:!0}:u2:d2}return d2},AO=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:a})=>Mr(e)?e:t?e===""?NaN:e&&+e:n&&da(e)?new Date(e):a?a(e):e;const f2={isValid:!1,value:null};var IO=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,f2):f2;function h2(e){const t=e.ref;return Fj(t)?t.files:Lj(t)?IO(e.refs).value:kO(t)?[...t.selectedOptions].map(({value:n})=>n):Yu(t)?EO(e.refs).value:AO(Mr(t.value)?e.ref.value:t.value,e)}var cU=(e,t,n,a)=>{const s={};for(const o of e){const l=ut(t,o);l&&mr(s,o,l._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:a}},Em=e=>e instanceof RegExp,Vd=e=>Mr(e)?e:Em(e)?e.source:Lr(e)?Em(e.value)?e.value.source:e.value:e,m2=e=>({isOnSubmit:!e||e===Za.onSubmit,isOnBlur:e===Za.onBlur,isOnChange:e===Za.onChange,isOnAll:e===Za.all,isOnTouch:e===Za.onTouched});const p2="AsyncFunction";var dU=e=>!!e&&!!e.validate&&!!(es(e.validate)&&e.validate.constructor.name===p2||Lr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===p2)),uU=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),g2=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const cu=(e,t,n,a)=>{for(const s of n||Object.keys(e)){const o=ut(e,s);if(o){const{_f:l,...c}=o;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!a)return!0;if(l.ref&&t(l.ref,l.name)&&!a)return!0;if(cu(c,t))break}else if(Lr(c)&&cu(c,t))break}}};function x2(e,t,n){const a=ut(e,n);if(a||Bp(n))return{error:a,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),l=ut(t,o),c=ut(e,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};s.pop()}return{name:n}}var fU=(e,t,n,a)=>{n(e);const{name:s,...o}=e;return $n(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(l=>t[l]===(!a||Za.all))},hU=(e,t,n)=>!e||!t||e===t||lu(e).some(a=>a&&(n?a===t:a.startsWith(t)||t.startsWith(a))),mU=(e,t,n,a,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?a.isOnBlur:s.isOnBlur)?!e:(n?a.isOnChange:s.isOnChange)?e:!0,pU=(e,t)=>!_j(ut(e,t)).length&&Rr(e,t),gU=(e,t,n)=>{const a=lu(ut(e,n));return mr(a,"root",t[n]),mr(e,n,a),e};function v2(e,t,n="validate"){if(da(e)||Array.isArray(e)&&e.every(da)||ks(e)&&!e)return{type:n,message:da(e)?e:"",ref:t}}var sc=e=>Lr(e)&&!Em(e)?e:{value:e,message:""},y2=async(e,t,n,a,s,o)=>{const{ref:l,refs:c,required:f,maxLength:h,minLength:u,min:m,max:p,pattern:v,validate:j,name:y,valueAsNumber:b,mount:N}=e._f,P=ut(n,y);if(!N||t.has(y))return{};const A=c?c[0]:l,k=T=>{s&&A.reportValidity&&(A.setCustomValidity(ks(T)?"":T||""),A.reportValidity())},I={},E=Lj(l),O=Yu(l),C=E||O,M=(b||Fj(l))&&Mr(l.value)&&Mr(P)||Pm(l)&&l.value===""||P===""||Array.isArray(P)&&!P.length,F=aU.bind(null,y,a,I),V=(T,L,U,J=Ws.maxLength,q=Ws.minLength)=>{const W=T?L:U;I[y]={type:T?J:q,message:W,ref:l,...F(T?J:q,W)}};if(o?!Array.isArray(P)||!P.length:f&&(!C&&(M||Jn(P))||ks(P)&&!P||O&&!EO(c).isValid||E&&!IO(c).isValid)){const{value:T,message:L}=da(f)?{value:!!f,message:f}:sc(f);if(T&&(I[y]={type:Ws.required,message:L,ref:A,...F(Ws.required,L)},!a))return k(L),I}if(!M&&(!Jn(m)||!Jn(p))){let T,L;const U=sc(p),J=sc(m);if(!Jn(P)&&!isNaN(P)){const q=l.valueAsNumber||P&&+P;Jn(U.value)||(T=q>U.value),Jn(J.value)||(L=q<J.value)}else{const q=l.valueAsDate||new Date(P),W=B=>new Date(new Date().toDateString()+" "+B),z=l.type=="time",K=l.type=="week";da(U.value)&&P&&(T=z?W(P)>W(U.value):K?P>U.value:q>new Date(U.value)),da(J.value)&&P&&(L=z?W(P)<W(J.value):K?P<J.value:q<new Date(J.value))}if((T||L)&&(V(!!T,U.message,J.message,Ws.max,Ws.min),!a))return k(I[y].message),I}if((h||u)&&!M&&(da(P)||o&&Array.isArray(P))){const T=sc(h),L=sc(u),U=!Jn(T.value)&&P.length>+T.value,J=!Jn(L.value)&&P.length<+L.value;if((U||J)&&(V(U,T.message,L.message),!a))return k(I[y].message),I}if(v&&!M&&da(P)){const{value:T,message:L}=sc(v);if(Em(T)&&!P.match(T)&&(I[y]={type:Ws.pattern,message:L,ref:l,...F(Ws.pattern,L)},!a))return k(L),I}if(j){if(es(j)){const T=await j(P,n),L=v2(T,A);if(L&&(I[y]={...L,...F(Ws.validate,L.message)},!a))return k(L.message),I}else if(Lr(j)){let T={};for(const L in j){if(!$n(T)&&!a)break;const U=v2(await j[L](P,n),A,L);U&&(T={...U,...F(L,U.message)},k(U.message),a&&(I[y]=T))}if(!$n(T)&&(I[y]={ref:A,...T},!a))return I}}return k(!0),I};const xU={mode:Za.onSubmit,reValidateMode:Za.onChange,shouldFocusError:!0};function vU(e={}){let t={...xU,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:es(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},s=Lr(t.defaultValues)||Lr(t.values)?tn(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:tn(s),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,h=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const p={array:c2(),state:c2()},v=t.criteriaMode===Za.all,j=Q=>_=>{clearTimeout(h),h=setTimeout(Q,_)},y=async Q=>{if(!t.disabled&&(u.isValid||m.isValid||Q)){const _=t.resolver?$n((await O()).errors):await M(a,!0);_!==n.isValid&&p.state.next({isValid:_})}},b=(Q,_)=>{!t.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((Q||Array.from(c.mount)).forEach(X=>{X&&(_?mr(n.validatingFields,X,_):Rr(n.validatingFields,X))}),p.state.next({validatingFields:n.validatingFields,isValidating:!$n(n.validatingFields)}))},N=(Q,_=[],X,ne,ae=!0,ge=!0)=>{if(ne&&X&&!t.disabled){if(l.action=!0,ge&&Array.isArray(ut(a,Q))){const be=X(ut(a,Q),ne.argA,ne.argB);ae&&mr(a,Q,be)}if(ge&&Array.isArray(ut(n.errors,Q))){const be=X(ut(n.errors,Q),ne.argA,ne.argB);ae&&mr(n.errors,Q,be),pU(n.errors,Q)}if((u.touchedFields||m.touchedFields)&&ge&&Array.isArray(ut(n.touchedFields,Q))){const be=X(ut(n.touchedFields,Q),ne.argA,ne.argB);ae&&mr(n.touchedFields,Q,be)}(u.dirtyFields||m.dirtyFields)&&(n.dirtyFields=uc(s,o)),p.state.next({name:Q,isDirty:V(Q,_),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else mr(o,Q,_)},P=(Q,_)=>{mr(n.errors,Q,_),p.state.next({errors:n.errors})},A=Q=>{n.errors=Q,p.state.next({errors:n.errors,isValid:!1})},k=(Q,_,X,ne)=>{const ae=ut(a,Q);if(ae){const ge=ut(o,Q,Mr(X)?ut(s,Q):X);Mr(ge)||ne&&ne.defaultChecked||_?mr(o,Q,_?ge:h2(ae._f)):U(Q,ge),l.mount&&!l.action&&y()}},I=(Q,_,X,ne,ae)=>{let ge=!1,be=!1;const Fe={name:Q};if(!t.disabled){if(!X||ne){(u.isDirty||m.isDirty)&&(be=n.isDirty,n.isDirty=Fe.isDirty=V(),ge=be!==Fe.isDirty);const ve=Ko(ut(s,Q),_);be=!!ut(n.dirtyFields,Q),ve?Rr(n.dirtyFields,Q):mr(n.dirtyFields,Q,!0),Fe.dirtyFields=n.dirtyFields,ge=ge||(u.dirtyFields||m.dirtyFields)&&be!==!ve}if(X){const ve=ut(n.touchedFields,Q);ve||(mr(n.touchedFields,Q,X),Fe.touchedFields=n.touchedFields,ge=ge||(u.touchedFields||m.touchedFields)&&ve!==X)}ge&&ae&&p.state.next(Fe)}return ge?Fe:{}},E=(Q,_,X,ne)=>{const ae=ut(n.errors,Q),ge=(u.isValid||m.isValid)&&ks(_)&&n.isValid!==_;if(t.delayError&&X?(f=j(()=>P(Q,X)),f(t.delayError)):(clearTimeout(h),f=null,X?mr(n.errors,Q,X):Rr(n.errors,Q)),(X?!Ko(ae,X):ae)||!$n(ne)||ge){const be={...ne,...ge&&ks(_)?{isValid:_}:{},errors:n.errors,name:Q};n={...n,...be},p.state.next(be)}},O=async Q=>{b(Q,!0);const _=await t.resolver(o,t.context,cU(Q||c.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return b(Q),_},C=async Q=>{const{errors:_}=await O(Q);if(Q)for(const X of Q){const ne=ut(_,X);ne?mr(n.errors,X,ne):Rr(n.errors,X)}else n.errors=_;return _},M=async(Q,_,X={valid:!0})=>{for(const ne in Q){const ae=Q[ne];if(ae){const{_f:ge,...be}=ae;if(ge){const Fe=c.array.has(ge.name),ve=ae._f&&dU(ae._f);ve&&u.validatingFields&&b([ge.name],!0);const qe=await y2(ae,c.disabled,o,v,t.shouldUseNativeValidation&&!_,Fe);if(ve&&u.validatingFields&&b([ge.name]),qe[ge.name]&&(X.valid=!1,_))break;!_&&(ut(qe,ge.name)?Fe?gU(n.errors,qe,ge.name):mr(n.errors,ge.name,qe[ge.name]):Rr(n.errors,ge.name))}!$n(be)&&await M(be,_,X)}}return X.valid},F=()=>{for(const Q of c.unMount){const _=ut(a,Q);_&&(_._f.refs?_._f.refs.every(X=>!B0(X)):!B0(_._f.ref))&&Se(Q)}c.unMount=new Set},V=(Q,_)=>!t.disabled&&(Q&&_&&mr(o,Q,_),!Ko(B(),s)),T=(Q,_,X)=>nU(Q,c,{...l.mount?o:Mr(_)?s:da(Q)?{[Q]:_}:_},X,_),L=Q=>_j(ut(l.mount?o:s,Q,t.shouldUnregister?ut(s,Q,[]):[])),U=(Q,_,X={})=>{const ne=ut(a,Q);let ae=_;if(ne){const ge=ne._f;ge&&(!ge.disabled&&mr(o,Q,AO(_,ge)),ae=Pm(ge.ref)&&Jn(_)?"":_,kO(ge.ref)?[...ge.ref.options].forEach(be=>be.selected=ae.includes(be.value)):ge.refs?Yu(ge.ref)?ge.refs.forEach(be=>{(!be.defaultChecked||!be.disabled)&&(Array.isArray(ae)?be.checked=!!ae.find(Fe=>Fe===be.value):be.checked=ae===be.value||!!ae)}):ge.refs.forEach(be=>be.checked=be.value===ae):Fj(ge.ref)?ge.ref.value="":(ge.ref.value=ae,ge.ref.type||p.state.next({name:Q,values:tn(o)})))}(X.shouldDirty||X.shouldTouch)&&I(Q,ae,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&K(Q)},J=(Q,_,X)=>{for(const ne in _){if(!_.hasOwnProperty(ne))return;const ae=_[ne],ge=Q+"."+ne,be=ut(a,ge);(c.array.has(Q)||Lr(ae)||be&&!be._f)&&!Qi(ae)?J(ge,ae,X):U(ge,ae,X)}},q=(Q,_,X={})=>{const ne=ut(a,Q),ae=c.array.has(Q),ge=tn(_);mr(o,Q,ge),ae?(p.array.next({name:Q,values:tn(o)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&X.shouldDirty&&p.state.next({name:Q,dirtyFields:uc(s,o),isDirty:V(Q,ge)})):ne&&!ne._f&&!Jn(ge)?J(Q,ge,X):U(Q,ge,X),g2(Q,c)&&p.state.next({...n,name:Q}),p.state.next({name:l.mount?Q:void 0,values:tn(o)})},W=async Q=>{l.mount=!0;const _=Q.target;let X=_.name,ne=!0;const ae=ut(a,X),ge=ve=>{ne=Number.isNaN(ve)||Qi(ve)&&isNaN(ve.getTime())||Ko(ve,ut(o,X,ve))},be=m2(t.mode),Fe=m2(t.reValidateMode);if(ae){let ve,qe;const Z=_.type?h2(ae._f):X8(Q),le=Q.type===l2.BLUR||Q.type===l2.FOCUS_OUT,Ce=!uU(ae._f)&&!t.resolver&&!ut(n.errors,X)&&!ae._f.deps||mU(le,ut(n.touchedFields,X),n.isSubmitted,Fe,be),Oe=g2(X,c,le);mr(o,X,Z),le?(!_||!_.readOnly)&&(ae._f.onBlur&&ae._f.onBlur(Q),f&&f(0)):ae._f.onChange&&ae._f.onChange(Q);const Le=I(X,Z,le),Ye=!$n(Le)||Oe;if(!le&&p.state.next({name:X,type:Q.type,values:tn(o)}),Ce)return(u.isValid||m.isValid)&&(t.mode==="onBlur"?le&&y():le||y()),Ye&&p.state.next({name:X,...Oe?{}:Le});if(!le&&Oe&&p.state.next({...n}),t.resolver){const{errors:Ze}=await O([X]);if(ge(Z),ne){const Ot=x2(n.errors,a,X),dt=x2(Ze,a,Ot.name||X);ve=dt.error,X=dt.name,qe=$n(Ze)}}else b([X],!0),ve=(await y2(ae,c.disabled,o,v,t.shouldUseNativeValidation))[X],b([X]),ge(Z),ne&&(ve?qe=!1:(u.isValid||m.isValid)&&(qe=await M(a,!0)));ne&&(ae._f.deps&&(!Array.isArray(ae._f.deps)||ae._f.deps.length>0)&&K(ae._f.deps),E(X,qe,ve,Le))}},z=(Q,_)=>{if(ut(n.errors,_)&&Q.focus)return Q.focus(),1},K=async(Q,_={})=>{let X,ne;const ae=lu(Q);if(t.resolver){const ge=await C(Mr(Q)?Q:ae);X=$n(ge),ne=Q?!ae.some(be=>ut(ge,be)):X}else Q?(ne=(await Promise.all(ae.map(async ge=>{const be=ut(a,ge);return await M(be&&be._f?{[ge]:be}:be)}))).every(Boolean),!(!ne&&!n.isValid)&&y()):ne=X=await M(a);return p.state.next({...!da(Q)||(u.isValid||m.isValid)&&X!==n.isValid?{}:{name:Q},...t.resolver||!Q?{isValid:X}:{},errors:n.errors}),_.shouldFocus&&!ne&&cu(a,z,Q?ae:c.mount),ne},B=(Q,_)=>{let X={...l.mount?o:s};return _&&(X=CO(_.dirtyFields?n.dirtyFields:n.touchedFields,X)),Mr(Q)?X:da(Q)?ut(X,Q):Q.map(ne=>ut(X,ne))},R=(Q,_)=>({invalid:!!ut((_||n).errors,Q),isDirty:!!ut((_||n).dirtyFields,Q),error:ut((_||n).errors,Q),isValidating:!!ut(n.validatingFields,Q),isTouched:!!ut((_||n).touchedFields,Q)}),H=Q=>{Q&&lu(Q).forEach(_=>Rr(n.errors,_)),p.state.next({errors:Q?n.errors:{}})},Y=(Q,_,X)=>{const ne=(ut(a,Q,{_f:{}})._f||{}).ref,ae=ut(n.errors,Q)||{},{ref:ge,message:be,type:Fe,...ve}=ae;mr(n.errors,Q,{...ve,..._,ref:ne}),p.state.next({name:Q,errors:n.errors,isValid:!1}),X&&X.shouldFocus&&ne&&ne.focus&&ne.focus()},ee=(Q,_)=>es(Q)?p.state.subscribe({next:X=>"values"in X&&Q(T(void 0,_),X)}):T(Q,_,!0),me=Q=>p.state.subscribe({next:_=>{hU(Q.name,_.name,Q.exact)&&fU(_,Q.formState||u,Qe,Q.reRenderRoot)&&Q.callback({values:{...o},...n,..._,defaultValues:s})}}).unsubscribe,De=Q=>(l.mount=!0,m={...m,...Q.formState},me({...Q,formState:m})),Se=(Q,_={})=>{for(const X of Q?lu(Q):c.mount)c.mount.delete(X),c.array.delete(X),_.keepValue||(Rr(a,X),Rr(o,X)),!_.keepError&&Rr(n.errors,X),!_.keepDirty&&Rr(n.dirtyFields,X),!_.keepTouched&&Rr(n.touchedFields,X),!_.keepIsValidating&&Rr(n.validatingFields,X),!t.shouldUnregister&&!_.keepDefaultValue&&Rr(s,X);p.state.next({values:tn(o)}),p.state.next({...n,..._.keepDirty?{isDirty:V()}:{}}),!_.keepIsValid&&y()},We=({disabled:Q,name:_})=>{(ks(Q)&&l.mount||Q||c.disabled.has(_))&&(Q?c.disabled.add(_):c.disabled.delete(_))},pe=(Q,_={})=>{let X=ut(a,Q);const ne=ks(_.disabled)||ks(t.disabled);return mr(a,Q,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:Q}},name:Q,mount:!0,..._}}),c.mount.add(Q),X?We({disabled:ks(_.disabled)?_.disabled:t.disabled,name:Q}):k(Q,!0,_.value),{...ne?{disabled:_.disabled||t.disabled}:{},...t.progressive?{required:!!_.required,min:Vd(_.min),max:Vd(_.max),minLength:Vd(_.minLength),maxLength:Vd(_.maxLength),pattern:Vd(_.pattern)}:{},name:Q,onChange:W,onBlur:W,ref:ae=>{if(ae){pe(Q,_),X=ut(a,Q);const ge=Mr(ae.value)&&ae.querySelectorAll&&ae.querySelectorAll("input,select,textarea")[0]||ae,be=sU(ge),Fe=X._f.refs||[];if(be?Fe.find(ve=>ve===ge):ge===X._f.ref)return;mr(a,Q,{_f:{...X._f,...be?{refs:[...Fe.filter(B0),ge,...Array.isArray(ut(s,Q))?[{}]:[]],ref:{type:ge.type,name:Q}}:{ref:ge}}}),k(Q,!1,void 0,ge)}else X=ut(a,Q,{}),X._f&&(X._f.mount=!1),(t.shouldUnregister||_.shouldUnregister)&&!(Q8(c.array,Q)&&l.action)&&c.unMount.add(Q)}}},ue=()=>t.shouldFocusError&&cu(a,z,c.mount),ke=Q=>{ks(Q)&&(p.state.next({disabled:Q}),cu(a,(_,X)=>{const ne=ut(a,X);ne&&(_.disabled=ne._f.disabled||Q,Array.isArray(ne._f.refs)&&ne._f.refs.forEach(ae=>{ae.disabled=ne._f.disabled||Q}))},0,!1))},se=(Q,_)=>async X=>{let ne;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let ae=tn(o);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:ge,values:be}=await O();n.errors=ge,ae=tn(be)}else await M(a);if(c.disabled.size)for(const ge of c.disabled)Rr(ae,ge);if(Rr(n.errors,"root"),$n(n.errors)){p.state.next({errors:{}});try{await Q(ae,X)}catch(ge){ne=ge}}else _&&await _({...n.errors},X),ue(),setTimeout(ue);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$n(n.errors)&&!ne,submitCount:n.submitCount+1,errors:n.errors}),ne)throw ne},fe=(Q,_={})=>{ut(a,Q)&&(Mr(_.defaultValue)?q(Q,tn(ut(s,Q))):(q(Q,_.defaultValue),mr(s,Q,tn(_.defaultValue))),_.keepTouched||Rr(n.touchedFields,Q),_.keepDirty||(Rr(n.dirtyFields,Q),n.isDirty=_.defaultValue?V(Q,tn(ut(s,Q))):V()),_.keepError||(Rr(n.errors,Q),u.isValid&&y()),p.state.next({...n}))},Te=(Q,_={})=>{const X=Q?tn(Q):s,ne=tn(X),ae=$n(Q),ge=ae?s:ne;if(_.keepDefaultValues||(s=X),!_.keepValues){if(_.keepDirtyValues){const be=new Set([...c.mount,...Object.keys(uc(s,o))]);for(const Fe of Array.from(be))ut(n.dirtyFields,Fe)?mr(ge,Fe,ut(o,Fe)):q(Fe,ut(ge,Fe))}else{if(Rj&&Mr(Q))for(const be of c.mount){const Fe=ut(a,be);if(Fe&&Fe._f){const ve=Array.isArray(Fe._f.refs)?Fe._f.refs[0]:Fe._f.ref;if(Pm(ve)){const qe=ve.closest("form");if(qe){qe.reset();break}}}}if(_.keepFieldsRef)for(const be of c.mount)q(be,ut(ge,be));else a={}}o=t.shouldUnregister?_.keepDefaultValues?tn(s):{}:tn(ge),p.array.next({values:{...ge}}),p.state.next({values:{...ge}})}c={mount:_.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!_.keepIsValid||!!_.keepDirtyValues||!t.shouldUnregister&&!$n(ge),l.watch=!!t.shouldUnregister,l.action=!1,_.keepErrors||(n.errors={}),p.state.next({submitCount:_.keepSubmitCount?n.submitCount:0,isDirty:ae?!1:_.keepDirty?n.isDirty:!!(_.keepDefaultValues&&!Ko(Q,s)),isSubmitted:_.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ae?{}:_.keepDirtyValues?_.keepDefaultValues&&o?uc(s,o):n.dirtyFields:_.keepDefaultValues&&Q?uc(s,Q):_.keepDirty?n.dirtyFields:{},touchedFields:_.keepTouched?n.touchedFields:{},errors:_.keepErrors?n.errors:{},isSubmitSuccessful:_.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Re=(Q,_)=>Te(es(Q)?Q(o):Q,_),Ie=(Q,_={})=>{const X=ut(a,Q),ne=X&&X._f;if(ne){const ae=ne.refs?ne.refs[0]:ne.ref;ae.focus&&(ae.focus(),_.shouldSelect&&es(ae.select)&&ae.select())}},Qe=Q=>{n={...n,...Q}},tt={control:{register:pe,unregister:Se,getFieldState:R,handleSubmit:se,setError:Y,_subscribe:me,_runSchema:O,_focusError:ue,_getWatch:T,_getDirty:V,_setValid:y,_setFieldArray:N,_setDisabledField:We,_setErrors:A,_getFieldArray:L,_reset:Te,_resetDefaultValues:()=>es(t.defaultValues)&&t.defaultValues().then(Q=>{Re(Q,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:ke,_subjects:p,_proxyFormState:u,get _fields(){return a},get _formValues(){return o},get _state(){return l},set _state(Q){l=Q},get _defaultValues(){return s},get _names(){return c},set _names(Q){c=Q},get _formState(){return n},get _options(){return t},set _options(Q){t={...t,...Q}}},subscribe:De,trigger:K,register:pe,handleSubmit:se,watch:ee,setValue:q,getValues:B,reset:Re,resetField:fe,clearErrors:H,unregister:Se,setError:Y,setFocus:Ie,getFieldState:R};return{...tt,formControl:tt}}function yU(e={}){const t=bt.useRef(void 0),n=bt.useRef(void 0),[a,s]=bt.useState({isDirty:!1,isValidating:!1,isLoading:es(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:es(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!es(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...c}=vU(e);t.current={...c,formState:a}}const o=t.current.control;return o._options=e,rU(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(c=>({...c,isReady:!0})),o._formState.isReady=!0,l},[o]),bt.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),bt.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),bt.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),bt.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),bt.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==a.isDirty&&o._subjects.state.next({isDirty:l})}},[o,a.isDirty]),bt.useEffect(()=>{var l;e.values&&!Ko(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((l=o._options.resetOptions)===null||l===void 0)&&l.keepIsValid||o._setValid(),n.current=e.values,s(c=>({...c}))):o._resetDefaultValues()},[o,e.values]),bt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=tU(a,o),t.current}const qd="http://localhost:5006/api",bU=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState([]),[f,h]=x.useState(null);x.useEffect(()=>{u()},[]),x.useEffect(()=>{s&&!s.esFuncional&&(m(s.id),h(null))},[s]);const u=async()=>{try{a(!0);const y=await fetch(`${qd}/Monedas`);if(y.ok){const b=await y.json();t(b),b.length>0&&!s&&o(b.find(N=>!N.esFuncional)||b[0])}}catch(y){console.error("Error loading monedas:",y)}finally{a(!1)}},m=async y=>{try{const b=await fetch(`${qd}/Monedas/${y}/historial`);b.ok&&c(await b.json())}catch(b){console.error(b)}},p=async y=>{const b={Id:f?.id||0,MonedaId:s.id,Tasa:parseFloat(y.tasa),FechaInicio:y.fechaInicio,FechaFin:y.fechaFin||null};try{const N=f?`${qd}/Monedas/tasas/${f.id}`:`${qd}/Monedas/tasas`,P=await fetch(N,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(P.ok)return alert(f?"Tasa actualizada":"Tasa guardada"),m(s.id),u(),h(null),!0;{const A=await P.text();return alert("Error al guardar tasa: "+A),!1}}catch(N){return console.error(N),alert("Error de red al guardar tasa"),!1}},v=async y=>{if(window.confirm("Est seguro de eliminar esta tasa?"))try{(await fetch(`${qd}/Monedas/tasas/${y}`,{method:"DELETE"})).ok&&(alert("Tasa eliminada"),m(s.id),u())}catch(b){console.error(b)}},j=y=>{const b=new Date;b.setHours(0,0,0,0);const N=y.fechaFin?new Date(y.fechaFin):null;return N&&N<b?{label:"Histrico",color:"bg-gray-100 text-gray-600"}:{label:"Abierto",color:"bg-green-100 text-green-700"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Configuracin de Monedas y Tasas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Monedas Disponibles"})}),r.jsx("div",{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{children:"Cdigo"}),r.jsx(ce,{children:"Nombre"}),r.jsx(ce,{children:"Tasa Actual"}),r.jsx(ce,{children:"Funcional"})]})}),r.jsx(Bt,{children:e.map(y=>r.jsxs(Me,{className:s?.id===y.id?"bg-orange-50 cursor-pointer":"cursor-pointer",onClick:()=>o(y),children:[r.jsx(G,{className:"font-bold",children:y.codigo}),r.jsx(G,{children:y.nombre}),r.jsx(G,{children:y.esFuncional?"1.00":"Ver Historial"}),r.jsx(G,{children:y.esFuncional?"S":"No"})]},y.id))})]})})]}),r.jsxs(Be,{children:[r.jsx(gt,{className:"flex flex-row justify-between items-center",children:r.jsxs(vt,{children:["Historial de Tasas: ",s?.nombre," (",s?.codigo,")"]})}),r.jsx("div",{className:"p-6",children:s?.esFuncional?r.jsx("p",{className:"text-gray-500 italic",children:"La moneda funcional tiene una tasa fija de 1.00"}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded-md p-4 bg-gray-50",children:[r.jsx("h3",{className:"font-medium mb-2",children:f?"Modificar Tasa":"Registrar Nueva Tasa"}),r.jsx(jU,{onSubmit:p,initialData:f,onCancel:f?()=>h(null):null})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"font-bold mb-2",children:"Historial de Tasas"}),r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{children:"Tasa"}),r.jsx(ce,{children:"Desde"}),r.jsx(ce,{children:"Hasta"}),r.jsx(ce,{children:"Estado"}),r.jsx(ce,{className:"text-right",children:"Acciones"})]})}),r.jsxs(Bt,{children:[l.map(y=>{const b=j(y);return r.jsxs(Me,{children:[r.jsx(G,{className:"font-bold",children:y.tasa.toFixed(4)}),r.jsx(G,{children:new Date(y.fechaInicio).toLocaleDateString()}),r.jsx(G,{children:y.fechaFin?new Date(y.fechaFin).toLocaleDateString():"Vigente"}),r.jsx(G,{children:r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase ${b.color}`,children:b.label})}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>h(y),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:r.jsx(ea,{size:14})}),r.jsx("button",{onClick:()=>v(y.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:r.jsx(Qt,{size:14})})]})})]},y.id)}),l.length===0&&r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center text-gray-400",children:"No hay tasas registradas"})})]})]})]})]})})]})]})]})},jU=({onSubmit:e,initialData:t,onCancel:n})=>{const{register:a,handleSubmit:s,reset:o,setValue:l}=yU();x.useEffect(()=>{t?(l("tasa",t.tasa),l("fechaInicio",new Date(t.fechaInicio).toISOString().split("T")[0]),l("fechaFin",t.fechaFin?new Date(t.fechaFin).toISOString().split("T")[0]:"")):o({tasa:"",fechaInicio:new Date().toISOString().split("T")[0],fechaFin:""})},[t,o,l]);const c=async f=>{await e(f)&&o()};return r.jsxs("form",{onSubmit:s(c),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ye,{label:"Tasa de Cambio",...a("tasa",{required:!0}),placeholder:"Ej: 58.50"}),r.jsx(ye,{label:"Fecha Inicio",type:"date",...a("fechaInicio",{required:!0})}),r.jsx(ye,{label:"Fecha Fin (Opcional)",type:"date",...a("fechaFin")})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(re,{type:"submit",size:"sm",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{size:16,className:"mr-2"})," ",t?"Actualizar":"Guardar"," Tasa"]}),n&&r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:n,children:"Cancelar"})]})]})},V0=({title:e,children:t,description:n})=>r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden mb-6",children:[r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),n&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n})]}),r.jsx("div",{className:"p-6",children:t})]}),wU=({label:e,description:t,checked:n,onChange:a,disabled:s,tooltip:o})=>r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${n?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"} ${s?"opacity-50":""}`,title:o||t,children:[r.jsxs("div",{children:[r.jsx("span",{className:`font-medium ${n?"text-blue-900":"text-gray-900"}`,children:e}),t&&r.jsx("p",{className:`text-xs ${n?"text-blue-700":"text-gray-500"}`,children:t})]}),r.jsxs("div",{className:"relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in",children:[r.jsx("input",{type:"checkbox",checked:n,onChange:a,disabled:s,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer peer checked:right-0 right-6",style:{top:0,transition:"right 0.2s"}}),r.jsx("div",{className:`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${n?"bg-hd-orange":"bg-gray-300"}`})]}),r.jsx("input",{type:"checkbox",checked:n,onChange:a,disabled:s,className:"h-6 w-6 text-hd-orange rounded border-gray-300 focus:ring-hd-orange ml-4"})]}),NU=()=>{const[e,t]=x.useState({useAutoSequence:!0,useInitials:!0,initials:"PROV",currentValue:1,sequenceLength:4,separator:"-",habilitarFacturas:!0,habilitarPagoRecurrente:!1,habilitarFrecuenciaSemanal:!1,habilitarFrecuenciaQuincenal:!1,habilitarFrecuenciaMensual:!0,habilitarFechasEspecificas:!1}),[n,a]=x.useState(!0),[s,o]=x.useState(null);x.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const u=await fetch("http://localhost:5006/api/ProveedorConfiguration");if(u.ok){const m=await u.json();t(m)}}catch(u){console.error(u)}finally{a(!1)}},c=(u,m)=>{t(p=>({...p,[u]:m}))},f=async()=>{try{(await fetch("http://localhost:5006/api/ProveedorConfiguration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(o({type:"success",text:"Configuracin guardada correctamente"}),setTimeout(()=>o(null),3e3)):o({type:"error",text:"Error al guardar la configuracin"})}catch{o({type:"error",text:"Error de conexin"})}},h=()=>{const u=String(e.currentValue).padStart(e.sequenceLength||0,"0");return e.useInitials&&e.initials?`${e.initials}${e.separator}${u}`:u};return n?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando configuracin..."}):r.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuracin de Proveedores"}),r.jsx("p",{className:"text-gray-500",children:"Gestione reglas de negocio, secuencias y opciones de pago."})]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600 text-white",onClick:f,children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar Cambios"]})]}),s&&r.jsx("div",{className:`p-4 rounded-lg mb-4 ${s.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.text}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(V0,{title:"Opciones Generales",description:"Funcionalidades habilitadas para el mdulo.",children:r.jsx("div",{className:"space-y-4",children:r.jsx(wU,{label:"Gestin de Facturas",description:"Habilitar registro y seguimiento detallado de facturas de compra.",tooltip:"Active para Modo Fiscal: Exige NCF, Impuestos y RNC. Desactive para Modo Simple.",checked:e.habilitarFacturas,onChange:u=>c("habilitarFacturas",u.target.checked)})})}),r.jsx(V0,{title:"Secuencia de Cdigo",description:"Formato automtico para nuevos proveedores.",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("input",{type:"checkbox",checked:e.useAutoSequence,onChange:u=>c("useAutoSequence",u.target.checked),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Activar Secuencia Automtica"})]}),r.jsxs("div",{className:`grid grid-cols-2 gap-4 ${e.useAutoSequence?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Iniciales"}),r.jsx(ye,{value:e.initials,onChange:u=>c("initials",u.target.value),className:"uppercase"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Separador"}),r.jsx(ye,{value:e.separator,onChange:u=>c("separator",u.target.value),className:"text-center",maxLength:1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud (# ceros)"}),r.jsx(ye,{type:"number",value:e.sequenceLength,onChange:u=>c("sequenceLength",parseInt(u.target.value)),min:1,max:10})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Siguiente Valor"}),r.jsx(ye,{type:"number",value:e.currentValue,onChange:u=>c("currentValue",parseInt(u.target.value))})]})]}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg text-center border border-gray-200",children:[r.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-widest block mb-1",children:"Vista Previa"}),r.jsx("span",{className:"text-xl font-mono font-bold text-gray-800 tracking-wider",children:h()})]})]})})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs(V0,{title:"Pagos Recurrentes",description:"Configuracin de automatizacin de pagos regulares.",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200 mb-6",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-orange-900",children:"Habilitar Pagos Recurrentes"}),r.jsx("p",{className:"text-xs text-orange-800",children:"Permitir configurar ciclos de pago automticos en la ficha del proveedor."})]}),r.jsxs("div",{className:"relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarPagoRecurrente,onChange:u=>c("habilitarPagoRecurrente",u.target.checked),className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer peer checked:right-0 right-6"}),r.jsx("div",{className:`block overflow-hidden h-6 rounded-full cursor-pointer ${e.habilitarPagoRecurrente?"bg-hd-orange":"bg-gray-300"}`})]}),r.jsx("input",{type:"checkbox",checked:e.habilitarPagoRecurrente,onChange:u=>c("habilitarPagoRecurrente",u.target.checked),className:"h-6 w-6 text-hd-orange rounded border-gray-300 focus:ring-hd-orange ml-4"})]}),r.jsxs("div",{className:`space-y-4 transition-all duration-300 ${e.habilitarPagoRecurrente?"":"opacity-40 pointer-events-none grayscale"}`,children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2 border-b pb-2",children:"Frecuencias Permitidas"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFrecuenciaSemanal,onChange:u=>c("habilitarFrecuenciaSemanal",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Semanal"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Pagos cada 7 das (ej. Todos los viernes)."})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFrecuenciaQuincenal,onChange:u=>c("habilitarFrecuenciaQuincenal",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Quincenal"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Pagos cada 15 das."})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFrecuenciaMensual,onChange:u=>c("habilitarFrecuenciaMensual",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Mensual"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Pagos una vez al mes (ej. da 15 o fin de mes)."})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.habilitarFechasEspecificas,onChange:u=>c("habilitarFechasEspecificas",u.target.checked),className:"h-5 w-5 text-hd-orange focus:ring-hd-orange border-gray-300 rounded mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"block font-medium text-gray-900",children:"Fechas Especficas"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Permitir seleccionar das puntuales (ej. das 5 y 20)."})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-md flex items-start mt-4",children:[r.jsx(jj,{className:"h-5 w-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Al habilitar estas opciones, aparecern los selectores correspondientes en la ficha de creacin y edicin de proveedores."})]})]})]})})]})]})},oc="http://localhost:5006/api",SU=()=>{const[e,t]=x.useState("general"),[n,a]=x.useState({nombreEmpresa:"",rnc:"",direccion:"",telefono:"",correo:"",sitioWeb:"",logoPath:"",impuestoDefault:18,monedaPrincipal:"DOP"}),[s,o]=x.useState({smtpHost:"",smtpPort:587,smtpUser:"",smtpPass:"",fromEmail:"",adminEmail:"",enableSSL:!0}),[l,c]=x.useState(!0),[f,h]=x.useState(null),[u,m]=x.useState(null),[p,v]=x.useState(null),j=E=>E??"";x.useEffect(()=>{y()},[]);const y=async()=>{c(!0);try{const[E,O]=await Promise.all([fetch(`${oc}/CompanyConfiguration`),fetch(`${oc}/EmailConfig`)]);if(E.ok){const C=await E.json();a(C),C.logoPath&&v(`${oc.replace("/api","")}${C.logoPath}`)}if(O.ok){const C=await O.json();o(C)}}catch(E){console.error("Error loading configuration:",E)}finally{c(!1)}},b=E=>{const O=E.target.files[0];O&&(m(O),v(URL.createObjectURL(O)))},N=async E=>{E.preventDefault(),h(null);try{let O=n.logoPath;if(u){const M=new FormData;M.append("file",u);const F=await fetch(`${oc}/CompanyConfiguration/upload-logo`,{method:"POST",body:M});F.ok&&(O=(await F.json()).path)}(await fetch(`${oc}/CompanyConfiguration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,logoPath:O})})).ok?h({type:"success",text:"Informacin de empresa guardada."}):h({type:"error",text:"Error al guardar informacin."})}catch{h({type:"error",text:"Error de conexin."})}setTimeout(()=>h(null),3e3)},P=async E=>{E.preventDefault(),h(null);try{(await fetch(`${oc}/EmailConfig`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?h({type:"success",text:"Configuracin de correo guardada."}):h({type:"error",text:"Error al guardar configuracin de correo."})}catch{h({type:"error",text:"Error de conexin."})}setTimeout(()=>h(null),3e3)},A=E=>{const{name:O,value:C}=E.target;a(M=>({...M,[O]:C}))},k=E=>{const{name:O,value:C,type:M,checked:F}=E.target;o(V=>({...V,[O]:M==="checkbox"?F:M==="number"?parseInt(C):C}))};if(l)return r.jsx("div",{className:"p-8 text-center",children:"Cargando configuracin..."});const I=({id:E,label:O,icon:C})=>r.jsxs("button",{onClick:()=>t(E),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium transition-all border-b-2 
                ${e===E?"border-hd-orange text-hd-orange bg-orange-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(C,{size:18}),O]});return r.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Configuracin de Compaa"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Administra la identidad de tu empresa y servicios de notificacin."})]}),f&&r.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-3 animate-in fade-in slide-in-from-top-4 duration-300 ${f.type==="success"?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"}`,children:[f.type==="success"?r.jsx(Cc,{size:20}):r.jsx(zc,{size:20}),r.jsx("span",{className:"font-medium",children:f.text})]}),r.jsxs("div",{className:"bg-white shadow-xl shadow-gray-200/50 rounded-xl overflow-hidden border border-gray-100",children:[r.jsxs("div",{className:"flex bg-gray-50/50 border-b border-gray-200",children:[r.jsx(I,{id:"general",label:"Informacin General",icon:MC}),r.jsx(I,{id:"email",label:"Configuracin de Correo",icon:ou})]}),r.jsxs("div",{className:"p-8",children:[e==="general"&&r.jsxs("form",{onSubmit:N,className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[r.jsxs("div",{className:"md:col-span-1 flex flex-col items-center space-y-4",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700 self-start",children:"Logo Corporativo"}),r.jsxs("div",{className:"w-56 h-56 bg-gray-50 rounded-2xl flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-200 relative group hover:border-hd-orange transition-all duration-300",children:[p?r.jsx("img",{src:p,alt:"Logo Preview",className:"w-full h-full object-contain p-4"}):r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx(pF,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("span",{className:"text-xs",children:"Sin Logo"})]}),r.jsxs("label",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/60 text-white opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer backdrop-blur-[2px]",children:[r.jsx(wD,{size:24,className:"mb-2"}),r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Subir Imagen"}),r.jsx("input",{type:"file",onChange:b,accept:"image/*",className:"hidden"})]})]}),r.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold",children:"PNG o JPG  Mx 2MB"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:[r.jsx(MC,{size:12})," Nombre Legal"]}),r.jsx("input",{type:"text",name:"nombreEmpresa",value:j(n.nombreEmpresa),onChange:A,className:"w-full h-11 bg-gray-50/50 border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20 transition-all font-medium",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:[r.jsx(vu,{size:12})," RNC / ID Fiscal"]}),r.jsx("input",{type:"text",name:"rnc",value:j(n.rnc),onChange:A,className:"w-full h-11 bg-gray-50/50 border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:[r.jsx(bD,{size:12})," Telfono"]}),r.jsx("input",{type:"text",name:"telefono",value:j(n.telefono),onChange:A,className:"w-full h-11 bg-gray-50/50 border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20 transition-all"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:[r.jsx(xD,{size:12})," Direccin Fsica"]}),r.jsx("textarea",{name:"direccion",value:j(n.direccion),onChange:A,rows:2,className:"w-full bg-gray-50/50 border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20 transition-all"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:[r.jsx(ou,{size:12})," Correo de Contacto"]}),r.jsx("input",{type:"email",name:"correo",value:j(n.correo),onChange:A,className:"w-full h-11 bg-gray-50/50 border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-1",children:[r.jsx(mD,{size:12})," Sitio Web"]}),r.jsx("input",{type:"text",name:"sitioWeb",value:j(n.sitioWeb),onChange:A,className:"w-full h-11 bg-gray-50/50 border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20 transition-all"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6 border-t border-gray-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Moneda del Sistema"}),r.jsxs("select",{name:"monedaPrincipal",value:j(n.monedaPrincipal),onChange:A,className:"w-full h-11 bg-gray-50 border-gray-200 rounded-lg text-sm font-bold focus:border-hd-orange focus:ring-hd-orange/20",children:[r.jsx("option",{value:"DOP",children:"RD$ - Peso Dominicano"}),r.jsx("option",{value:"USD",children:"US$ - Dlar Americano"}),r.jsx("option",{value:"EUR",children:" - Euro"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"ITBIS / Impuesto General (%)"}),r.jsx("input",{type:"number",step:"0.01",name:"impuestoDefault",value:j(n.impuestoDefault),onChange:A,className:"w-full h-11 bg-gray-50 border-gray-200 rounded-lg text-sm font-bold focus:border-hd-orange focus:ring-hd-orange/20"})]})]})]})]}),r.jsx("div",{className:"flex justify-end gap-3 pt-6 border-t",children:r.jsxs(re,{type:"submit",className:"bg-gray-800 hover:bg-black text-white px-8 rounded-lg h-11 font-bold transition-all shadow-lg hover:shadow-gray-300",children:[r.jsx(Ft,{size:18,className:"mr-2"})," Guardar Compaa"]})})]}),e==="email"&&r.jsx("form",{onSubmit:P,className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[r.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-4 rounded-xl flex gap-4",children:[r.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm self-start",children:r.jsx(vF,{className:"text-hd-orange",size:24})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-orange-800",children:"Servicio de Notificacin"}),r.jsx("p",{className:"text-xs text-orange-700 leading-relaxed",children:"Configure su servidor SMTP para que el sistema pueda enviar alertas automticas de bajo stock y otros avisos importantes a su correo."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(SF,{size:14})," Servidor SMTP"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1 tracking-wide",children:"Host del Servidor"}),r.jsx("input",{type:"text",name:"smtpHost",placeholder:"ej. smtp.gmail.com",value:s.smtpHost,onChange:k,className:"w-full h-11 bg-white border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Puerto"}),r.jsx("input",{type:"number",name:"smtpPort",value:s.smtpPort,onChange:k,className:"w-full h-11 bg-white border-gray-200 rounded-lg text-sm font-medium"})]}),r.jsx("div",{className:"col-span-2 flex items-end",children:r.jsxs("label",{className:"flex items-center gap-3 p-2.5 bg-gray-50 rounded-lg border border-gray-100 cursor-pointer hover:bg-gray-100 transition-all w-full select-none",children:[r.jsx("input",{type:"checkbox",name:"enableSSL",checked:s.enableSSL,onChange:k,className:"w-4 h-4 rounded text-hd-orange focus:ring-hd-orange"}),r.jsxs("span",{className:"text-xs font-bold text-gray-700 flex items-center gap-1 uppercase",children:[r.jsx(Vy,{size:14,className:"text-green-600"})," SSL / TLS"]})]})})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Vy,{size:14})," Credenciales"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Usuario / Email"}),r.jsx("input",{type:"text",name:"smtpUser",value:s.smtpUser,onChange:k,className:"w-full h-11 bg-white border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Contrasea"}),r.jsx("input",{type:"password",name:"smtpPass",value:s.smtpPass,onChange:k,placeholder:"",className:"w-full h-11 bg-white border-gray-200 rounded-lg text-sm focus:border-hd-orange focus:ring-hd-orange/20"})]})]})]})]}),r.jsxs("div",{className:"space-y-6 pt-6 border-t border-gray-100",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(ou,{size:14})," Destinatarios y Envo"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Remitente (Aparece en el correo)"}),r.jsx("input",{type:"email",name:"fromEmail",placeholder:"ej. notificacion@miempresa.com",value:s.fromEmail,onChange:k,className:"w-full h-11 bg-white border-gray-200 rounded-lg text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1 font-mono",children:"Admin Email (Recibe Alertas)"}),r.jsx("input",{type:"email",name:"adminEmail",placeholder:"ej. gerencia@miempresa.com",value:s.adminEmail,onChange:k,className:"w-full h-11 bg-white border-gray-200 rounded-lg text-sm font-bold text-hd-orange border-hd-orange/20",required:!0})]})]})]}),r.jsx("div",{className:"flex justify-end gap-3 pt-6 border-t",children:r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600 text-white px-8 rounded-lg h-11 font-bold transition-all shadow-lg shadow-orange-200",children:[r.jsx(Ft,{size:18,className:"mr-2"})," Guardar Configuracin de Correo"]})})]})})]})]})]})},b2="http://localhost:5006/api",CU=()=>{const[e,t]=x.useState({useAutoSequence:!0,prefix:"PAGO-",sequenceLength:6,currentValue:0,separator:"-"}),[n,a]=x.useState(!0),[s,o]=x.useState(null),l=m=>m??"";x.useEffect(()=>{c()},[]);const c=async()=>{a(!0);try{const m=await fetch(`${b2}/PaymentConfiguration`);if(m.ok){const p=await m.json();t(p)}}catch(m){console.error("Error loading CXP config:",m)}finally{a(!1)}},f=async m=>{m.preventDefault();try{(await fetch(`${b2}/PaymentConfiguration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?o({type:"success",text:"Configuracin guardada exitosamente."}):o({type:"error",text:"Error al guardar configuracin."})}catch{o({type:"error",text:"Error de conexin."})}setTimeout(()=>o(null),3e3)},h=m=>{const{name:p,value:v,type:j,checked:y}=m.target;t(b=>({...b,[p]:j==="checkbox"?y:j==="number"?parseInt(v)||0:v}))},u=()=>{const m=(e.currentValue+1).toString().padStart(e.sequenceLength||6,"0");return`${e.prefix}${m}`};return n?r.jsx("div",{className:"p-8 text-center",children:"Cargando configuracin..."}):r.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Cuentas por Pagar / Secuencia de Pagos"}),s&&r.jsxs("div",{className:`p-4 rounded-md flex items-center gap-2 ${s.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[s.type==="success"?r.jsx(Cc,{size:20}):r.jsx(zc,{size:20}),s.text]}),r.jsxs("form",{onSubmit:f,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4 border-b pb-2",children:"Secuencia de Pagos"}),r.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx("input",{type:"checkbox",id:"useAutoSequence",name:"useAutoSequence",checked:e.useAutoSequence,onChange:h,className:"rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"useAutoSequence",className:"text-sm font-medium text-gray-700 select-none cursor-pointer",children:"Generar cdigos de pago automticamente"})]}),e.useAutoSequence&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",name:"prefix",value:l(e.prefix),onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange sm:text-sm",placeholder:"Ej: PAGO-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud de Secuencia"}),r.jsx("input",{type:"number",name:"sequenceLength",value:e.sequenceLength,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange sm:text-sm",min:"3",max:"20"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Actual (ltimo usado)"}),r.jsx("input",{type:"number",name:"currentValue",value:e.currentValue,onChange:h,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-hd-orange sm:text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Modificar solo si es necesario reiniciar la secuencia."})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 flex flex-col justify-center items-center",children:[r.jsx("span",{className:"text-sm text-gray-500 font-medium mb-2",children:"Vista Previa Prximo Cdigo"}),r.jsx("span",{className:"text-2xl font-mono font-bold text-gray-800 tracking-wider",children:u()})]})]})]}),r.jsx("div",{className:"pt-4 border-t flex justify-end",children:r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600 text-white flex items-center gap-2",children:[r.jsx(Ft,{size:18}),"Guardar Cambios"]})})]})]})},q0="http://localhost:5006/api",kU=()=>{const[e,t]=x.useState("resumen"),[n,a]=x.useState({desde:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],hasta:new Date().toISOString().split("T")[0],numero:"",proveedor:"",estado:""}),[s,o]=x.useState([]),[l,c]=x.useState(!1),[f,h]=x.useState(null),[u,m]=x.useState(null),[p,v]=x.useState(!1),[j,y]=x.useState(!1),b=[{id:"resumen",title:"Resumen",icon:r.jsx(as,{size:18})},{id:"proveedor",title:"Por Proveedor",icon:r.jsx(_r,{size:18})},{id:"articulo",title:"Por Artculo",icon:r.jsx(An,{size:18})},{id:"antiguedad",title:"Antigedad (Aging)",icon:r.jsx(gm,{size:18})},{id:"almacen",title:"Por Almacn",icon:r.jsx(An,{size:18})},{id:"pendientes",title:"Facturas Pendientes",icon:r.jsx(Sr,{size:18})},{id:"historico",title:"Histrico Facturas",icon:r.jsx(Ht,{size:18})}];x.useEffect(()=>{N()},[e]);const N=async()=>{c(!0);let C="";const M=`?desde=${n.desde}&hasta=${n.hasta}`,F=new URLSearchParams;switch(Object.entries(n).forEach(([V,T])=>{T!=null&&T!==""&&F.append(V,T)}),e){case"resumen":C="/ReportesCompras/Resumen"+M;break;case"proveedor":C="/ReportesCompras/PorProveedor"+M;break;case"articulo":C="/ReportesCompras/PorArticulo"+M;break;case"antiguedad":C="/ReportesCompras/AntiguedadSaldos";break;case"almacen":C="/ReportesCompras/PorAlmacen"+M;break;case"pendientes":C="/ReportesCompras/FacturasPendientes";break;case"historico":C="/ReportesCompras/BuscarFacturas?"+F.toString();break;default:C="/ReportesCompras/Resumen"+M}try{const V=await fetch(`${q0}${C}`);if(V.ok){const T=await V.json();o(T)}}catch(V){console.error("Error fetching report data:",V)}finally{c(!1)}},P=async C=>{v(!0),h(C),y(!0);try{const M=await fetch(`${q0}/ReportesCompras/Factura/${C}`);if(!M.ok){const L=await M.text();throw new Error(`Failed to fetch invoice details: ${M.status} ${L}`)}const F=await M.json(),V=await fetch(`${q0}/ReportesCompras/PagosPorFactura/${C}`);if(!V.ok){const L=await V.text();throw new Error(`Failed to fetch payments: ${V.status} ${L}`)}const T=await V.json();m({...F,pagos:T})}catch(M){console.error("Error fetching invoice detail:",M),m(null)}finally{v(!1)}},A=C=>{const{name:M,value:F}=C.target;a(V=>({...V,[M]:F}))},k=()=>{if(!s||s.length===0)return;const C=Object.keys(s[0]),M=[C.join(","),...s.map(L=>C.map(U=>{let J=L[U];return typeof J=="string"?`"${J.replace(/"/g,'""')}"`:J}).join(","))].join(`
`),F=new Blob(["\uFEFF"+M],{type:"text/csv;charset=utf-8;"}),V=document.createElement("a"),T=URL.createObjectURL(F);V.setAttribute("href",T),V.setAttribute("download",`Reporte_${e}_${new Date().toISOString().split("T")[0]}.csv`),V.style.visibility="hidden",document.body.appendChild(V),V.click(),document.body.removeChild(V)},I=(C,M="RD$")=>M==="USD"||M==="DOP"?new Intl.NumberFormat("es-DO",{style:"currency",currency:M}).format(C||0):`${M||"RD$"} ${new Intl.NumberFormat("es-DO",{minimumFractionDigits:2}).format(C||0)}`,E=C=>C?new Date(C).toLocaleDateString("es-DO"):"-",O=()=>{if(l)return r.jsx("div",{className:"py-20 text-center text-gray-400",children:"Generando reporte..."});if(s.length===0)return r.jsx("div",{className:"py-20 text-center text-gray-400",children:"No hay datos para este periodo."});switch(e){case"resumen":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Moneda"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Compras"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"SubTotal"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Impuesto"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total DOP"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase text-blue-600",children:"Total USD"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((C,M)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:C.moneda||C.Moneda}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:C.cantidadCompras||C.CantidadCompras}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C.subTotal||C.SubTotal,C.monedaSimbolo||C.moneda||C.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-hd-orange",children:I(C.impuesto||C.Impuesto||C.Impuestos,C.monedaSimbolo||C.moneda||C.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold",children:I(C.total||C.Total,C.monedaSimbolo||C.moneda||C.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-hd-orange",children:I(C.totalDOP||C.TotalDOP,"RD$")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-blue-600",children:I(C.totalUSD||C.TotalUSD,"USD")})]},M))})]});case"proveedor":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Facturas"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total DOP"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total USD"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((C,M)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:C.proveedor||C.Proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:C.facturas||C.Facturas}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-hd-orange font-bold",children:I(C.totalDOP||C.TotalDOP,"DOP")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-blue-600 font-bold",children:I(C.totalUSD||C.TotalUSD,"USD")})]},M))})]});case"historico":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nmero"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Moneda"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Saldo"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((C,M)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900 font-medium",children:C.numeroCompra||C.NumeroCompra}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(C.fechaCompra||C.FechaCompra)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.proveedor||C.Proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.moneda||C.Moneda}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:I(C.total||C.Total,C.monedaSimbolo||C.moneda||C.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-red-600 font-bold",children:I(C.saldo||C.Saldo,C.monedaSimbolo||C.moneda||C.Moneda)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-left",children:r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${C.estado==="Pagado"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:(C.estado||"Pendiente").toUpperCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("button",{onClick:()=>P(C.numeroCompra||C.NumeroCompra),className:"text-hd-orange hover:text-orange-700 transition-colors",title:"Ver Detalle",children:r.jsx(ar,{size:20})})})]},M))})]});case"articulo":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Artculo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Cant."}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Costo Prom."}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((C,M)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500 text-sm font-mono",children:C.numeroArticulo||C.NumeroArticulo}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:C.articulo||C.Articulo||C.descripcion||C.Descripcion}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-medium",children:C.cantidadComprada||C.CantidadComprada}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C.costoPromedio||C.CostoPromedio)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C.totalSinImpuestos||C.TotalSinImpuestos)})]},M))})]});case"antiguedad":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"0-30 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"31-60 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"61-90 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"+90 Das"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase font-bold",children:"Total"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((C,M)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:C.proveedor||C.Proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C["0_30_Dias"]||C["0_30_dias"])}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C["31_60_Dias"]||C["31_60_dias"])}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C["61_90_Dias"]||C["61_90_dias"])}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-red-600",children:I(C.Mas_90_Dias||C.mas_90_dias)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-hd-orange",children:I(C.saldoTotal||C.SaldoTotal)})]},M))})]});case"pendientes":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Referencia"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Moneda"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Saldo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Das"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((C,M)=>r.jsxs("tr",{className:C.diasVencimiento>30?"bg-red-50":"",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:C.numeroCompra}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(C.fechaCompra)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:C.proveedor}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-xs text-gray-400",children:C.moneda}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:I(C.total,C.monedaSimbolo)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-red-600",children:I(C.saldo,C.monedaSimbolo)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsxs("span",{className:`px-2 py-1 rounded-full text-[10px] font-bold ${C.diasVencimiento>30?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[C.diasVencimiento," das"]})})]},M))})]});case"almacen":return r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Almacn"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Operaciones"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total Valor (RD$)"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200 uppercase text-[11px]",children:s.map((C,M)=>r.jsxs("tr",{className:"hover:bg-orange-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-bold text-gray-800 border-l-2 border-hd-orange",children:C.almacen}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-medium",children:C.cantidadCompras}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-black text-hd-orange",children:I(C.totalDOP,"RD$")})]},M))})]})}};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(as,{className:"text-hd-orange"}),"Reportes de Compras"]}),r.jsxs(re,{onClick:k,disabled:s.length===0||l,className:"bg-green-600 hover:bg-green-700 text-white flex items-center gap-2",children:[r.jsx(yj,{size:18}),"Exportar a Excel (CSV)"]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"flex border-b overflow-x-auto",children:b.map(C=>r.jsxs("button",{onClick:()=>t(C.id),className:`px-6 py-3 flex items-center gap-2 text-sm font-medium transition-colors whitespace-nowrap ${e===C.id?"border-b-2 border-hd-orange text-hd-orange bg-orange-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[C.icon,C.title]},C.id))}),(e==="resumen"||e==="proveedor"||e==="articulo"||e==="historico")&&r.jsxs("div",{className:"p-4 bg-gray-50 border-b flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Desde"}),r.jsx("input",{type:"date",name:"desde",value:n.desde,onChange:A,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Hasta"}),r.jsx("input",{type:"date",name:"hasta",value:n.hasta,onChange:A,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange"})]}),e==="historico"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Nmero"}),r.jsx("input",{type:"text",name:"numero",placeholder:"Buscar nmero...",onChange:A,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:"Estado"}),r.jsxs("select",{name:"estado",onChange:A,className:"rounded-md border-gray-300 text-sm focus:ring-hd-orange focus:border-hd-orange",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"Pendiente",children:"Pendiente"}),r.jsx("option",{value:"Pagado",children:"Pagado"})]})]})]}),r.jsxs(re,{onClick:N,className:"bg-hd-orange hover:bg-orange-600 text-white flex items-center gap-2",children:[r.jsx(Ht,{size:16}),"Actualizar"]})]}),r.jsx("div",{className:"overflow-x-auto",children:O()})]}),j&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Detalle de Factura: ",f]}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx("span",{className:"text-2xl",children:""})})]}),r.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:p?r.jsx("div",{className:"py-10 text-center text-gray-400 font-medium",children:"Buscando detalles..."}):u?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 bg-orange-50 p-4 rounded-lg border border-orange-100 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Proveedor:"})," ",r.jsx("span",{className:"font-bold",children:u.header.proveedor})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Fecha:"})," ",r.jsx("span",{className:"font-bold",children:E(u.header.fechaCompra)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Almacn:"})," ",r.jsx("span",{className:"font-bold text-blue-600",children:u.header.almacenNombre||"No definido"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Total:"})," ",r.jsx("span",{className:"font-bold",children:I(u.header.total,u.header.monedaSimbolo)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 block",children:"Saldo Actual:"})," ",r.jsx("span",{className:"font-black text-red-600",children:I(u.header.saldo,u.header.monedaSimbolo)})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-bold text-gray-700 mb-2 border-l-4 border-hd-orange pl-2 uppercase tracking-wide",children:"Artculos"}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Articulo"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Cant."}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Almacn"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Costo"}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Subtotal"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.items.map((C,M)=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-4 py-2",children:[r.jsx("span",{className:"text-gray-400 font-mono text-xs mr-2",children:C.numeroArticulo}),C.descripcion]}),r.jsx("td",{className:"px-4 py-2 text-right font-medium",children:C.cantidad}),r.jsx("td",{className:"px-4 py-2 text-left text-[10px] text-gray-500 font-medium italic",children:C.almacenLinea||u.header.almacenNombre}),r.jsx("td",{className:"px-4 py-2 text-right",children:I(C.costoUnitario,u.header.monedaSimbolo)}),r.jsx("td",{className:"px-4 py-2 text-right font-bold",children:I(C.totalLinea,u.header.monedaSimbolo)})]},M))})]})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-bold text-gray-700 mb-2 border-l-4 border-yellow-500 pl-2 uppercase tracking-wide",children:"Notas de Crdito / Dbito"}),u.notas&&u.notas.length>0?r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[r.jsx("thead",{className:"bg-yellow-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Fecha"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Tipo"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-500 uppercase",children:"Ref."}),r.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-500 uppercase",children:"Monto Aplicado"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.notas.map((C,M)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2",children:E(C.fecha)}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${C.tipo==="Credito"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:C.tipo.toUpperCase()})}),r.jsx("td",{className:"px-4 py-2 text-xs text-gray-500",children:C.referencia}),r.jsxs("td",{className:`px-4 py-2 text-right font-bold ${C.tipo==="Credito"?"text-blue-600":"text-red-600"}`,children:[C.tipo==="Credito"?"-":"+",I(C.monto,u.header.monedaSimbolo)]})]},M))})]})}):r.jsx("p",{className:"text-sm text-gray-500 italic p-4 bg-gray-50 rounded-lg",children:"No hay notas aplicadas a esta factura."})]})]}):r.jsx("div",{className:"py-10 text-center text-red-500 font-medium",children:"No se pudo cargar la informacin."})}),r.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:r.jsx(re,{onClick:()=>y(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800",children:"Cerrar"})})]})})]})},DO="http://localhost:5006/api/Sequences",OO=async()=>{try{const e=await fetch(DO);if(!e.ok)throw new Error(`Error fetching sequences: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching sequences:",e),e}},MO=async(e,t)=>{try{const n=await fetch(`${DO}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){if(n.status===204)return null;throw new Error(`Error updating sequence: ${n.statusText}`)}const a=await n.text();return a?JSON.parse(a):null}catch(n){throw console.error(`Error updating sequence ${e}:`,n),n}},PU=()=>{const[e,t]=x.useState(null),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(!0),[f,h]=x.useState(!1),[u,m]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const N=(await OO()).find(k=>k.code==="TRANSFER")||{id:0,code:"TRANSFER",name:"Transferencia de Inventario",prefix:"TR-",currentValue:0,length:6};t(N);const[P,A]=await Promise.all([go(),BD()]);o(P||[]),a(A||{defaultPlanId:"",defaultUnit:""}),m(null)}catch(b){console.error(b),m("Error al cargar la secuencia. Verifique la conexin.")}finally{c(!1)}},v=(b,N)=>{t(P=>({...P,[b]:N}))},j=(b,N)=>{a(P=>({...P,[b]:N}))},y=async()=>{if(!e||!e.id){alert("No hay una secuencia vlida para guardar (ID 0). Asegrese de que el backend la haya inicializado.");return}try{h(!0),h(!0),await Promise.all([MO(e.id,e),vL(n)]),alert("Configuracin guardada correctamente.")}catch(b){console.error(b),alert("Error al guardar cambios.")}finally{h(!1)}};return l?r.jsx("div",{className:"p-8 text-center",children:r.jsx(Dn,{className:"animate-spin mx-auto text-hd-orange"})}):u?r.jsx("div",{className:"p-8 text-red-600 font-bold text-center",children:u}):r.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg text-gray-600",children:r.jsx(ii,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Confg. Transferencias"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Secuencia de documentos"})]})]}),r.jsxs(re,{onClick:y,disabled:f,className:"bg-hd-orange hover:bg-orange-600",children:[f?r.jsx(Dn,{className:"animate-spin mr-2 h-4 w-4"}):r.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Guardar"]})]}),r.jsxs(Be,{className:"border-l-4 border-l-hd-orange",children:[r.jsx(gt,{className:"bg-gray-50/50",children:r.jsxs(vt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(Qn,{size:18}),"Secuencia de Transferencias"]})}),r.jsx(Pt,{className:"pt-6 space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Prefijo"}),r.jsx(ye,{value:e.prefix||"",onChange:b=>v("prefix",b.target.value),className:"font-mono uppercase",placeholder:"TR-"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Longitud Numrica"}),r.jsx(ye,{type:"number",value:e.length,onChange:b=>v("length",parseInt(b.target.value)),className:"font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"ltimo Nmero Usado"}),r.jsx(ye,{type:"number",value:e.currentValue,onChange:b=>v("currentValue",parseInt(b.target.value)),className:"font-mono text-right font-bold"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Siguiente Nmero"}),r.jsxs("div",{className:"p-2 bg-gray-100 rounded border border-gray-200 text-right font-mono text-gray-700",children:[e.prefix,String(e.currentValue+1).padStart(e.length,"0")]})]})]})})]}),r.jsxs(Be,{className:"border-l-4 border-l-blue-500",children:[r.jsx(gt,{className:"bg-gray-50/50",children:r.jsxs(vt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(ma,{size:18}),"Plan de Medida por Defecto"]})}),r.jsxs(Pt,{className:"pt-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Plan de Medida"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:n?.defaultPlanId||"",onChange:b=>j("defaultPlanId",b.target.value),children:[r.jsx("option",{value:"",children:"(Ninguno / Usar del Artculo)"}),s.map(b=>r.jsx("option",{value:b.planId,children:b.descripcion||b.planId},b.planId))]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Este plan se asignar automticamente a las nuevas lneas en la Transferencia si es compatible."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Unidad por Defecto"}),r.jsx(ye,{className:"bg-white",placeholder:"Ej. CAJA, UND...",value:n?.defaultUnit||"",onChange:b=>j("defaultUnit",b.target.value)}),r.jsx("p",{className:"text-sm text-gray-500",children:"Si el artculo o su plan tienen esta unidad, se seleccionar automticamente."})]})]})]})]})},TO="http://localhost:5006/api/AjusteConfiguration",RO=async()=>{try{const e=await fetch(TO);if(!e.ok)throw new Error(`Error fetching ajuste config: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching ajuste config:",e),e}},_O=async e=>{try{const t=await fetch(TO,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Error updating ajuste config: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error updating ajuste config:",t),t}},EU=Object.freeze(Object.defineProperty({__proto__:null,getAjusteConfig:RO,updateAjusteConfig:_O},Symbol.toStringTag,{value:"Module"})),AU=()=>{const[e,t]=x.useState(null),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(!0),[f,h]=x.useState(!1),[u,m]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const N=(await OO()).find(k=>(k.code||k.Code||"").toUpperCase()==="AJUSTE")||{id:0,code:"AJUSTE",name:"Ajuste de Inventario",prefix:"AJ-",currentValue:0,length:6};t(N);const[P,A]=await Promise.all([go(),RO()]);o(P||[]),a(A||{defaultPlanId:"",defaultUnit:""}),m(null)}catch(b){console.error(b),m("Error al cargar la secuencia o configuracin. Verifique la conexin.")}finally{c(!1)}},v=(b,N)=>{t(P=>({...P,[b]:N}))},j=(b,N)=>{a(P=>({...P,[b]:N}))},y=async()=>{if(e)try{if(h(!0),e.id>0)await Promise.all([MO(e.id,e),_O(n)]);else{alert("Secuencia no inicializada en base de datos. Guarde un ajuste primero o contacte soporte.");return}alert("Configuracin guardada correctamente.")}catch(b){console.error(b),alert("Error al guardar cambios.")}finally{h(!1)}};return l?r.jsx("div",{className:"p-8 text-center",children:r.jsx(Dn,{className:"animate-spin mx-auto text-hd-orange"})}):u?r.jsx("div",{className:"p-8 text-red-600 font-bold text-center",children:u}):r.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg text-gray-600",children:r.jsx(ii,{size:24})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Conf. Ajustes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Secuencia y preferencias"})]})]}),r.jsxs(re,{onClick:y,disabled:f,className:"bg-hd-orange hover:bg-orange-600",children:[f?r.jsx(Dn,{className:"animate-spin mr-2 h-4 w-4"}):r.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Guardar"]})]}),r.jsxs(Be,{className:"border-l-4 border-l-hd-orange",children:[r.jsx(gt,{className:"bg-gray-50/50",children:r.jsxs(vt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(Qn,{size:18}),"Secuencia de Ajustes"]})}),r.jsx(Pt,{className:"pt-6 space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Prefijo"}),r.jsx(ye,{value:e.prefix||"",onChange:b=>v("prefix",b.target.value),className:"font-mono uppercase",placeholder:"AJ-"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Longitud Numrica"}),r.jsx(ye,{type:"number",value:e.length,onChange:b=>v("length",parseInt(b.target.value)),className:"font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"ltimo Nmero Usado"}),r.jsx(ye,{type:"number",value:e.currentValue,onChange:b=>v("currentValue",parseInt(b.target.value)),className:"font-mono text-right font-bold"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Siguiente Nmero"}),r.jsxs("div",{className:"p-2 bg-gray-100 rounded border border-gray-200 text-right font-mono text-gray-700",children:[e.prefix,String(e.currentValue+1).padStart(e.length,"0")]})]})]})})]}),r.jsxs(Be,{className:"border-l-4 border-l-blue-500",children:[r.jsx(gt,{className:"bg-gray-50/50",children:r.jsxs(vt,{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[r.jsx(ma,{size:18}),"Plan de Medida por Defecto"]})}),r.jsxs(Pt,{className:"pt-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Plan de Medida"}),r.jsxs("select",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:n?.defaultPlanId||"",onChange:b=>j("defaultPlanId",b.target.value),children:[r.jsx("option",{value:"",children:"(Ninguno / Usar del Artculo)"}),s.map(b=>r.jsx("option",{value:b.planId,children:b.descripcion||b.planId},b.planId))]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Este plan se asignar a las nuevas lneas en el Ajuste si es compatible con la unidad base del artculo o si se fuerza su uso."})]}),r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Unidad por Defecto"}),r.jsx(ye,{className:"bg-white",placeholder:"Ej. CAJA, UND...",value:n?.defaultUnit||"",onChange:b=>j("defaultUnit",b.target.value)}),r.jsx("p",{className:"text-sm text-gray-500",children:"Si el artculo o su plan tienen esta unidad, se seleccionar automticamente."})]})]})]})]})},IU=()=>{const e=Tt(),[t,n]=x.useState(null),[a,s]=x.useState(null),[o,l]=x.useState(""),[c,f]=x.useState([]),[h,u]=x.useState(!1),[m,p]=x.useState({id:0,planId:"",descripcion:"",unidadBase:"UND",decimales:0,detalles:[]}),[v,j]=x.useState(!0);x.useEffect(()=>{n(document.getElementById("header-actions")),s(document.getElementById("header-message")),y()},[]);const y=async()=>{u(!0);try{const C=await go();f(C)}catch(C){console.error(C)}finally{u(!1)}},b=async C=>{u(!0);try{const M=await JF(C);p({...M,detalles:M.detalles||[]}),j(!1)}catch(M){console.error(M)}finally{u(!1)}},N=()=>{p({id:0,planId:"",descripcion:"",unidadBase:"UND",decimales:0,detalles:[]}),j(!0)},P=(C,M)=>{p(F=>({...F,[C]:M}))},A=(C,M,F)=>{p(V=>{const T=[...V.detalles];return T[C]={...T[C],[M]:F},{...V,detalles:T}})},k=()=>{p(C=>({...C,detalles:[...C.detalles,{id:0,unidadMedida:"",cantidad:1,equivalente:C.unidadBase,orden:C.detalles.length+1}]}))},I=C=>{p(M=>{const F=M.detalles.filter((V,T)=>T!==C);return{...M,detalles:F}})},E=async()=>{if(!m.planId){alert("El ID del plan es obligatorio");return}try{const C={...m,detalles:m.detalles.map((M,F)=>({...M,planId:m.planId,equivalente:m.unidadBase,orden:F+1}))};await QF(C),l("Plan guardado correctamente"),setTimeout(()=>l(""),3e3),y(),v&&j(!1)}catch(C){console.error(C),alert("Error al guardar el plan")}},O=async()=>{if(confirm("Est seguro de eliminar este plan de unidades de medida?"))try{await ZF(m.planId),l("Plan eliminado"),setTimeout(()=>l(""),3e3),y(),N()}catch(C){console.error(C),alert("Error al eliminar el plan")}};return x.useEffect(()=>{p(C=>({...C,detalles:C.detalles.map(M=>({...M,equivalente:C.unidadBase}))}))},[m.unidadBase]),r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t&&so.createPortal(r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),className:"mr-2",children:r.jsx("span",{className:"text-gray-600",children:"Cancelar"})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:E,children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Guardar"]}),!v&&r.jsxs(re,{variant:"ghost",onClick:O,className:"text-red-600 hover:bg-red-50",children:[r.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]}),t),a&&o&&so.createPortal(r.jsx("div",{className:"text-green-600 text-sm font-medium",children:o}),a),r.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[r.jsx("div",{className:"col-span-12 md:col-span-4 h-full",children:r.jsxs(Be,{className:"h-full flex flex-col",children:[r.jsx(gt,{className:"py-4 px-4 border-b",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(vt,{className:"text-md",children:"Planes Existentes"}),r.jsxs(re,{size:"sm",variant:"outline",onClick:N,children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Nuevo"]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 max-h-[600px]",children:h?r.jsx("p",{className:"text-center text-gray-400 py-4",children:"Cargando..."}):c.map(C=>r.jsxs("div",{onClick:()=>b(C.planId),className:`p-3 rounded-md cursor-pointer border transition-colors ${m.planId===C.planId?"bg-orange-50 border-orange-200 text-hd-orange":"bg-white border-transparent hover:bg-gray-50 hover:border-gray-200"}`,children:[r.jsx("div",{className:"font-semibold",children:C.planId}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:C.descripcion})]},C.planId))})]})}),r.jsx("div",{className:"col-span-12 md:col-span-8",children:r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:v?"Nuevo Plan de U de M":`Editando: ${m.planId}`})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg border",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Id. de plan de U de M"}),r.jsx(ye,{value:m.planId,onChange:C=>P("planId",C.target.value),disabled:!v,placeholder:"EJ: CAJAS",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Descripcin"}),r.jsx(ye,{value:m.descripcion,onChange:C=>P("descripcion",C.target.value),placeholder:"Descripcin del plan",className:"mt-1"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"U de M Base"}),r.jsx(ye,{value:m.unidadBase,onChange:C=>P("unidadBase",C.target.value),placeholder:"UND",className:"mt-1 bg-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Posiciones decimales"}),r.jsx("select",{value:m.decimales,onChange:C=>P("decimales",parseInt(C.target.value)),className:"mt-1 flex h-9 w-full rounded-md border border-gray-300 bg-white px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",children:[0,1,2,3,4,5].map(C=>r.jsx("option",{value:C,children:C},C))})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-sm font-semibold",children:"Conversiones"}),r.jsxs(re,{size:"sm",variant:"outline",onClick:k,children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Agregar Unidad"]})]}),r.jsx("div",{className:"border rounded-md overflow-hidden",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-100",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-1/3",children:"U de M"}),r.jsx(ce,{className:"w-1/3",children:"Cantidad"}),r.jsx(ce,{className:"w-1/4",children:"Equivalente"}),r.jsx(ce,{className:"w-10"})]})}),r.jsxs(Bt,{children:[r.jsxs(Me,{className:"bg-gray-50/50",children:[r.jsx(G,{className:"font-bold",children:m.unidadBase}),r.jsx(G,{className:"font-mono",children:"1.00000"}),r.jsx(G,{className:"text-gray-500",children:m.unidadBase}),r.jsx(G,{})]}),m.detalles.map((C,M)=>r.jsxs(Me,{children:[r.jsx(G,{children:r.jsx(ye,{value:C.unidadMedida,onChange:F=>A(M,"unidadMedida",F.target.value),placeholder:"Ej: CAJA",className:"h-8"})}),r.jsx(G,{children:r.jsx(ye,{type:"number",value:C.cantidad,onChange:F=>A(M,"cantidad",parseFloat(F.target.value)),className:"h-8 font-mono",step:"0.00001"})}),r.jsx(G,{className:"text-gray-500 text-sm",children:C.equivalente}),r.jsx(G,{children:r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-red-500",onClick:()=>I(M),children:r.jsx(Qt,{className:"h-3 w-3"})})})]},M)),m.detalles.length===0&&r.jsx(Me,{children:r.jsx(G,{colSpan:4,className:"text-center text-gray-400 py-8",children:"No hay conversiones adicionales definidas"})})]})]})})]})]})]})})]})]})},DU=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState(""),v=async()=>{s(!0);try{const P=await za();n(P)}catch(P){console.error(P)}finally{s(!1)}};x.useEffect(()=>{v()},[]);const j=t.filter(P=>(P.nombre||P.Nombre||"").toLowerCase().includes(o.toLowerCase())||(P.codigo||P.Codigo||"").toLowerCase().includes(o.toLowerCase())),y=(P=null)=>{u(P),f(!0),p("")},b=async P=>{await kD(P),await v(),f(!1)},N=async P=>{if(window.confirm("Est seguro de eliminar este almacn?"))try{await HF(P),v()}catch(A){console.error(A),alert("Error al eliminar")}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Almacenes"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de ubicaciones de inventario"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{variant:"outline",onClick:v,title:"Recargar",children:r.jsx(ro,{className:`h-4 w-4 ${a?"animate-spin":""}`})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:()=>y(),children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Almacn"]})]})]}),r.jsx(Be,{children:r.jsx("div",{className:"p-4",children:r.jsx(ye,{placeholder:"Buscar por cdigo o nombre...",value:o,onChange:P=>l(P.target.value)})})}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsxs(vt,{children:["Almacenes Registrados (",j.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-32",children:"Cdigo"}),r.jsx(ce,{children:"Nombre"}),r.jsx(ce,{children:"Direccin"}),r.jsx(ce,{className:"w-40",children:"Ciudad"}),r.jsx(ce,{className:"w-24 text-center",children:"Estado"}),r.jsx(ce,{className:"w-32 text-center",children:"Acciones"})]})}),r.jsx(Bt,{children:a?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8",children:"Cargando..."})}):j.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No hay registros"})}):j.map(P=>{const A=P.id||P.Id,k=P.codigo||P.Codigo,I=P.nombre||P.Nombre,E=P.direccion||P.Direccion,O=P.ciudad||P.Ciudad,C=P.activo!==void 0?P.activo:P.Activo;return r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:k}),r.jsx(G,{className:"font-semibold",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xD,{className:"h-4 w-4 text-gray-400"}),I]})}),r.jsx(G,{className:"text-gray-600",children:E}),r.jsx(G,{children:O}),r.jsx(G,{className:"text-center",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C?"Activo":"Inactivo"})}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>y(P),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>N(A),className:"hover:bg-red-100 hover:text-red-600",children:r.jsx(Qt,{className:"h-4 w-4"})})]})})]},A)})})]})})]}),r.jsx(RD,{isOpen:c,onClose:()=>f(!1),onSave:b,initialData:h,error:m})]})},OU=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(""),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState(""),v=async()=>{s(!0);try{const P=await Qy();n(P)}catch(P){console.error(P)}finally{s(!1)}};x.useEffect(()=>{v()},[]);const j=t.filter(P=>P.nombre.toLowerCase().includes(o.toLowerCase())||P.codigo.toLowerCase().includes(o.toLowerCase())),y=(P=null)=>{u(P),f(!0),p("")},b=async P=>{await MD(P),await v(),f(!1)},N=async P=>{if(window.confirm("Est seguro de eliminar este grupo?"))try{await nL(P),v()}catch(A){console.error(A),alert("Error al eliminar")}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grupos de Impuestos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de tasas impositivas para productos"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{variant:"outline",onClick:v,title:"Recargar",children:r.jsx(ro,{className:`h-4 w-4 ${a?"animate-spin":""}`})}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:()=>y(),children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Grupo"]})]})]}),r.jsx(Be,{children:r.jsx("div",{className:"p-4",children:r.jsx(ye,{placeholder:"Buscar por cdigo o nombre...",value:o,onChange:P=>l(P.target.value)})})}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsxs(vt,{children:["Grupos Registrados (",j.length,")"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-32",children:"Cdigo"}),r.jsx(ce,{children:"Nombre"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{className:"w-32 text-right",children:"Tasa (%)"}),r.jsx(ce,{className:"w-24 text-center",children:"Estado"}),r.jsx(ce,{className:"w-32 text-center",children:"Acciones"})]})}),r.jsx(Bt,{children:a?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8",children:"Cargando..."})}):j.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No hay registros"})}):j.map(P=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:P.codigo}),r.jsx(G,{className:"font-semibold",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(NF,{className:"h-4 w-4 text-gray-400"}),P.nombre]})}),r.jsx(G,{className:"text-gray-600",children:P.descripcion}),r.jsx(G,{className:"text-right",children:r.jsxs("span",{className:"inline-flex px-2 py-1 text-sm font-semibold rounded bg-purple-100 text-purple-800",children:[P.tasa.toFixed(2),"%"]})}),r.jsx(G,{className:"text-center",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:P.activo?"Activo":"Inactivo"})}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>y(P),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>N(P.id),className:"hover:bg-red-100 hover:text-red-600",children:r.jsx(Qt,{className:"h-4 w-4"})})]})})]},P.id))})]})})]}),r.jsx(_D,{isOpen:c,onClose:()=>f(!1),onSave:b,initialData:h,error:m})]})},MU=()=>{Tt();const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState(""),[l,c]=x.useState(!1),[f,h]=x.useState(null);x.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const b=await Sm();t(b)}catch(b){console.error("Error loading product groups:",b)}finally{a(!1)}},m=async b=>{try{await TD(b),c(!1),u()}catch(N){console.error("Error saving group:",N),alert("Error al guardar el grupo")}},p=async b=>{if(window.confirm("Est seguro de que desea eliminar este grupo?"))try{await aL(b),u()}catch(N){console.error("Error deleting group:",N),alert("Error al eliminar el grupo")}},v=b=>{h(b),c(!0)},j=()=>{h(null),c(!0)},y=e.filter(b=>b.nombre.toLowerCase().includes(s.toLowerCase())||b.codigo.toLowerCase().includes(s.toLowerCase()));return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-hd-orange/10 rounded-lg",children:r.jsx(An,{className:"h-6 w-6 text-hd-orange"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grupos de Producto"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Categorizacin y agrupacin tcnica de artculos."})]})]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-700 text-white shadow-lg",onClick:j,children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Grupo"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"bg-orange-50 border-orange-100",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-xs font-semibold text-hd-orange uppercase",children:"Total Grupos"}),r.jsx("p",{className:"text-3xl font-bold text-hd-black",children:e.length})]})}),r.jsx(Be,{className:"bg-green-50 border-green-100",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase",children:"Activos"}),r.jsx("p",{className:"text-3xl font-bold text-green-700",children:e.filter(b=>b.activo).length})]})})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between pb-4",children:[r.jsx(vt,{children:"Catlogo de Grupos"}),r.jsxs("div",{className:"relative w-64 text-sm",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar grupo...",className:"pl-9 h-9",value:s,onChange:b=>o(b.target.value)})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{className:"bg-gray-50/50",children:[r.jsx(ce,{className:"w-32 font-bold",children:"Cdigo"}),r.jsx(ce,{className:"font-bold",children:"Nombre"}),r.jsx(ce,{className:"font-bold",children:"Descripcin"}),r.jsx(ce,{className:"w-24 text-center font-bold",children:"Estado"}),r.jsx(ce,{className:"w-32 text-center font-bold",children:"Acciones"})]})}),r.jsx(Bt,{children:n?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8",children:"Cargando grupos..."})}):y.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8 text-gray-500 font-medium",children:"No se encontraron grupos registrados."})}):y.map(b=>r.jsxs(Me,{className:"hover:bg-gray-50 transition-colors group",children:[r.jsx(G,{className:"font-mono text-hd-orange font-bold text-sm tracking-widest",children:b.codigo}),r.jsx(G,{className:"font-bold text-hd-black",children:b.nombre}),r.jsx(G,{className:"text-gray-500 text-sm italic",children:b.descripcion||"Sin descripcin"}),r.jsx(G,{className:"text-center",children:r.jsx("span",{className:`inline-flex px-2.5 py-0.5 text-[10px] font-bold uppercase rounded-full tracking-wider ${b.activo?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.activo?"Activo":"Inactivo"})}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-50",onClick:()=>v(b),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:bg-red-50",onClick:()=>p(b.id),children:r.jsx(Qt,{className:"h-4 w-4"})})]})})]},b.id))})]})})]}),r.jsx($D,{isOpen:l,onClose:()=>c(!1),onSave:m,grupo:f})]})},TU=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(""),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState({grupo:"",codigo:"",motivo:"",activo:!0}),[v,j]=x.useState(""),y=async()=>{s(!0);try{const E=await Aj();n(E)}catch(E){console.error(E)}finally{s(!1)}};x.useEffect(()=>{y()},[]);const b=t.reduce((E,O)=>{const C=O.grupo||"Sin Grupo";return E[C]||(E[C]=[]),E[C].push(O),E},{}),N=Object.entries(b).reduce((E,[O,C])=>{const M=C.filter(F=>F.motivo.toLowerCase().includes(o.toLowerCase())||F.codigo.toLowerCase().includes(o.toLowerCase()));return M.length>0&&(E[O]=M),E},{}),P=(E=null)=>{j(""),E?(u(E),p({...E})):(u(null),p({grupo:"Conteo Fsico",codigo:"",motivo:"",activo:!0})),f(!0)},A=async E=>{E.preventDefault(),j("");try{await uL(m),await y(),f(!1)}catch(O){j(O.message)}},k=async E=>{if(window.confirm("Est seguro de eliminar este motivo? Esta accin no se puede deshacer si ya ha sido utilizado."))try{await fL(E),y()}catch(O){console.error(O),alert("Error al eliminar")}},I=["Conteo Fsico","Dao / Merma","Prdida / Robo","Errores Operativos","Produccin / Proceso","Conversin de Unidades","Reclasificacin Interna","Obsolescencia","Ajuste Inicial / Migracin"];return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Motivos de Ajuste"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Catlogo de razones para movimientos de inventario"})]})]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-600",onClick:()=>P(),children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Motivo"]})]}),r.jsx(Be,{className:"mb-6",children:r.jsx("div",{className:"p-4",children:r.jsx(ye,{placeholder:"Buscar por cdigo o descripcin...",value:o,onChange:E=>l(E.target.value)})})}),r.jsxs("div",{className:"space-y-6",children:[Object.keys(N).length===0&&!a&&r.jsx("div",{className:"text-center py-10 text-gray-500",children:"No se encontraron resultados"}),Object.entries(N).map(([E,O])=>r.jsxs(Be,{className:"overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center gap-2",children:[r.jsx(fF,{className:"h-4 w-4 text-gray-500"}),r.jsx("h3",{className:"font-semibold text-gray-700",children:E}),r.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:O.length})]}),r.jsx("div",{className:"divide-y divide-gray-100",children:O.map(C=>r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-orange-50 text-orange-700 font-mono text-sm px-3 py-1 rounded border border-orange-100 min-w-[80px] text-center",children:C.codigo}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:C.motivo}),!C.activo&&r.jsx("span",{className:"text-xs text-red-500 font-medium",children:"Inactivo"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>P(C),children:r.jsx(wl,{className:"h-4 w-4 text-gray-500 hover:text-blue-600"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>k(C.id),children:r.jsx(Qt,{className:"h-4 w-4 text-gray-500 hover:text-red-600"})})]})]},C.id))})]},E))]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-in fade-in zoom-in duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-800",children:h?"Editar Motivo":"Nuevo Motivo"}),r.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{size:20})})]}),r.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[v&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded text-sm flex items-center gap-2",children:[r.jsx(pu,{size:16}),v]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grupo"}),r.jsx("select",{className:"w-full h-10 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-hd-orange",value:m.grupo,onChange:E=>p({...m,grupo:E.target.value}),children:I.map(E=>r.jsx("option",{value:E,children:E},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),r.jsxs("div",{className:"relative",children:[r.jsx(ye,{value:m.codigo,onChange:E=>p({...m,codigo:E.target.value}),disabled:!!h,placeholder:"Ej. CF-01",maxLength:10,className:h?"bg-gray-100 pr-8":""}),h&&r.jsx(xm,{className:"absolute right-2.5 top-2.5 h-4 w-4 text-gray-400"})]}),h&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El cdigo no se puede modificar."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo / Descripcin"}),r.jsx(ye,{value:m.motivo,onChange:E=>p({...m,motivo:E.target.value}),placeholder:"Descripcin del motivo",required:!0})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx("input",{type:"checkbox",id:"activo",checked:m.activo,onChange:E=>p({...m,activo:E.target.checked}),className:"h-4 w-4 text-hd-orange focus:ring-hd-orange border-gray-300 rounded"}),r.jsx("label",{htmlFor:"activo",className:"text-sm text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[r.jsx(re,{type:"button",variant:"ghost",onClick:()=>f(!1),children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]})]})})]})},G0=({title:e,icon:t,data:n,loading:a,onAdd:s,onEdit:o,onDelete:l})=>{const[c,f]=x.useState(""),h=n.filter(u=>u.nombre.toLowerCase().includes(c.toLowerCase())||u.codigo.toLowerCase().includes(c.toLowerCase()));return r.jsxs(Be,{className:"mb-8",children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 bg-hd-orange/10 rounded-lg",children:r.jsx(t,{className:"h-5 w-5 text-hd-orange"})}),r.jsxs("div",{children:[r.jsx(vt,{children:e}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Gestin de ",e.toLowerCase()]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ht,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ye,{value:c,onChange:u=>f(u.target.value),placeholder:"Buscar...",className:"pl-8 w-64 h-9"})]}),r.jsxs(re,{size:"sm",className:"bg-hd-orange hover:bg-orange-600",onClick:s,children:[r.jsx(_t,{className:"h-4 w-4 mr-1"}),"Nuevo"]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{className:"w-32",children:"Cdigo"}),r.jsx(ce,{children:"Nombre"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{className:"w-24 text-center",children:"Estado"}),r.jsx(ce,{className:"w-24 text-center",children:"Acciones"})]})}),r.jsx(Bt,{children:a?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8",children:"Cargando..."})}):h.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No hay registros"})}):h.map(u=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:u.codigo}),r.jsx(G,{className:"font-semibold",children:u.nombre}),r.jsx(G,{className:"text-gray-600",children:u.descripcion}),r.jsx(G,{className:"text-center",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.activo?"Activo":"Inactivo"})}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>o(u),children:r.jsx(wl,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>l(u.id),className:"hover:bg-red-100 hover:text-red-600",children:r.jsx(Qt,{className:"h-4 w-4"})})]})})]},u.id))})]})})]})},RU=()=>{const e=Tt(),[t,n]=x.useState(!1),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(!1),[m,p]=x.useState({title:"",type:""}),[v,j]=x.useState(null),[y,b]=x.useState(""),N={categoria:ID,marca:DD,tipo:OD},P={categoria:eL,marca:tL,tipo:rL},A=async()=>{n(!0);try{const[O,C,M]=await Promise.all([jm(),Xy(),Jy()]);s(O),l(C),f(M)}catch(O){console.error(O)}finally{n(!1)}};x.useEffect(()=>{A()},[]);const k=(O,C=null)=>{p({title:{categoria:"Categora",marca:"Marca",tipo:"Tipo"}[O],type:O}),j(C),u(!0),b("")},I=async O=>{await N[m.type](O),await A(),u(!1)},E=async(O,C)=>{if(window.confirm("Est seguro de eliminar este registro?"))try{await P[O](C),A()}catch(M){console.error(M),alert("Error al eliminar")}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/configuracion"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Atributos de Artculos"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin centralizada de Categoras, Marcas y Tipos"})]})]}),r.jsx(re,{variant:"outline",onClick:A,title:"Recargar Todo",children:r.jsx(ro,{className:`h-4 w-4 ${t?"animate-spin":""}`})})]}),r.jsx(G0,{title:"Categoras",icon:ma,data:a,loading:t,onAdd:()=>k("categoria"),onEdit:O=>k("categoria",O),onDelete:O=>E("categoria",O)}),r.jsx(G0,{title:"Marcas",icon:Nl,data:o,loading:t,onAdd:()=>k("marca"),onEdit:O=>k("marca",O),onDelete:O=>E("marca",O)}),r.jsx(G0,{title:"Tipos",icon:iF,data:c,loading:t,onAdd:()=>k("tipo"),onEdit:O=>k("tipo",O),onDelete:O=>E("tipo",O)}),r.jsx(om,{isOpen:h,onClose:()=>u(!1),onSave:I,title:m.title,type:m.type,initialData:v,error:y})]})},Vp="http://localhost:5006/api",_U=async e=>{const t=await fetch(`${Vp}/Articulos/${e}/Precios`);if(!t.ok)throw new Error("Error al obtener precios");return t.json()},$U=async(e,t)=>{const n=await fetch(`${Vp}/Articulos/${e}/Precios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error al guardar precios");return n.json()},FU=async(e,t)=>{const n=await fetch(`${Vp}/Articulos/CopyPrecios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceArticuloId:e,targetArticuloId:t})});if(!n.ok){const a=await n.text();throw new Error(`Error al copiar precios: ${a}`)}return n.json()},LU=async()=>{const e=await fetch(`${Vp}/Articulos/ReportePrecios`);if(!e.ok)throw new Error("Error al obtener reporte de precios");return e.json()},zU=()=>{const e=Tt(),[t,n]=x.useState(null),[a,s]=x.useState(!1),[o,l]=x.useState(!1),[c,f]=x.useState(!1),[h,u]=x.useState(""),[m,p]=x.useState("all"),[v,j]=x.useState([]),[y,b]=x.useState(!1),[N,P]=x.useState(2),[A,k]=x.useState(["UND"]),[I,E]=x.useState([]),[O,C]=x.useState([]),[M,F]=x.useState(-1),[V,T]=x.useState(!1);x.useEffect(()=>{U(),J(),L()},[]);const L=async()=>{try{const ue=await BF();C(ue||[])}catch(ue){console.error(ue)}},U=async()=>{try{const ue=await go(),ke=new Set(["UND"]);ue.forEach(se=>{ke.add(se.unidadBase),se.detalles&&se.detalles.forEach(fe=>ke.add(fe.unidadMedida))}),k(Array.from(ke))}catch(ue){console.error(ue)}},J=async()=>{try{const ue=await kc();E(ue)}catch(ue){console.error(ue)}},q=async ue=>{try{const ke=await Sj({nombre:ue.nombre,descripcion:ue.descripcion});await J(),alert("Nivel de precio creado exitosamente.")}catch(ke){console.error(ke),alert("Error al crear nivel de precio")}};x.useEffect(()=>{t?.id&&W(t.id)},[t]);const W=async ue=>{b(!0);try{const ke=await _U(ue);ke&&ke.length>0?j(ke):j([])}catch(ke){console.error("Error loading prices:",ke),alert("Error al cargar lista de precios")}finally{b(!1)}},z=ue=>[{id:1,nivelPrecio:"Precio al Detalle",unidadMedida:ue?.unidadMedida||"UND",cantidadInicial:0,porcentaje:0,precio:ue?.precioUnitario||0,moneda:"USD",activo:!0},{id:2,nivelPrecio:"Precio al Mayoreo",unidadMedida:ue?.unidadMedida||"UND",cantidadInicial:10,porcentaje:0,precio:0,moneda:"USD",activo:!0},{id:3,nivelPrecio:"Precio Distribuidor",unidadMedida:ue?.unidadMedida||"UND",cantidadInicial:50,porcentaje:0,precio:0,moneda:"USD",activo:!0}],K=async()=>{if(t)try{const ue=v.map(se=>({...se,id:0}));await $U(t.id,ue);const ke=document.getElementById("header-message");ke&&(ke.innerHTML='<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded flex items-center gap-2">Precios guardados correctamente</div>',setTimeout(()=>ke.innerHTML="",3e3))}catch(ue){console.error(ue),alert("Error al guardar precios")}},B=async ue=>{if(!(!t||!ue))try{await FU(t.id,ue.id),l(!1);const ke=document.getElementById("header-message");ke&&(ke.innerHTML=`<div class="bg-blue-100 border border-blue-400 text-blue-700 px-4 py-2 rounded flex items-center gap-2">Precios copiados exitosamente a ${ue.descripcion}</div>`,setTimeout(()=>ke.innerHTML="",4e3))}catch(ke){console.error(ke),alert("Error al copiar precios")}};x.useEffect(()=>{if(t&&O.length>0){const ue=O.findIndex(ke=>ke.id===t.id||ke.Id===t.id);F(ue)}},[t,O]);const R=ue=>{if(ue<0||ue>=O.length)return;const ke=O[ue];H(ke.id||ke.Id)},H=async ue=>{try{const ke=await SD(ue);ke&&n(ke)}catch(ke){console.error("Nav Error",ke)}},Y=()=>{const ue={id:Date.now(),nivelPrecio:"",unidadMedida:t?.unidadMedida||"UND",cantidadInicial:0,porcentaje:0,precio:0,moneda:"USD",activo:!0};j([...v,ue])},ee=ue=>{const ke=[...v];ke.splice(ue,1),j(ke)},me=(ue,ke,se)=>{const fe=[...v];fe[ue]={...fe[ue],[ke]:se};const Te=fe[ue],Re=parseFloat(t.costoUnitario)||parseFloat(t.costoEstandar)||0,Ie=parseFloat(Te.cantidadInicial)||1;if((ke==="porcentaje"||ke==="cantidadInicial")&&t){const Qe=parseFloat(Te.porcentaje)||0,Xe=Re*Ie*(1+Qe/100);fe[ue].precio=parseFloat(Xe.toFixed(2))}if(ke==="precio"&&t){const Qe=parseFloat(se)||0,Xe=Re*Ie;if(Xe>0){const tt=(Qe/Xe-1)*100;fe[ue].porcentaje=parseFloat(tt.toFixed(2))}else Qe>0&&(fe[ue].porcentaje=100)}j(fe)},De=()=>{if(!h||isNaN(parseFloat(h))){alert("Por favor ingrese un margen vlido.");return}if(!t)return;const ue=parseFloat(t.costoUnitario)||parseFloat(t.costoEstandar)||0,ke=parseFloat(h),se=v.map(fe=>{if(m!=="all"&&fe.nivelPrecio!==m)return fe;const Te=parseFloat(fe.cantidadInicial)||1,Re=ue*Te*(1+ke/100);return{...fe,porcentaje:ke,precio:parseFloat(Re.toFixed(2))}});j(se),f(!1),u("")},Se=(ue,ke)=>{const se=[...v];ke==="up"&&ue>0?[se[ue],se[ue-1]]=[se[ue-1],se[ue]]:ke==="down"&&ue<se.length-1&&([se[ue],se[ue+1]]=[se[ue+1],se[ue]]),j(se)},We=async()=>{try{const ue=await LU(),ke={};ue.forEach(Te=>{const Re=Te.numeroArticulo;ke[Re]||(ke[Re]={info:Te,precios:[]}),Te.nivelPrecio&&ke[Re].precios.push(Te)});let se=`
    < html >
                <head>
                    <title>Reporte de Listas de Precios</title>
                    <style>
                        body { font-family: sans-serif; padding: 20px; font-size: 12px; }
                        h1 { text-align: center; color: #333; margin-bottom: 20px; }
                        .article-card { border: 1px solid #ccc; margin-bottom: 15px; page-break-inside: avoid; border-radius: 4px; overflow: hidden; }
                        .article-header { background: #f0f0f0; padding: 8px; font-weight: bold; display: flex; justify-content: space-between; border-bottom: 1px solid #ccc; }
                        .article-details { padding: 8px; font-size: 11px; color: #555; background: #fafafa; border-bottom: 1px solid #eee; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
                        table { width: 100%; border-collapse: collapse; font-size: 11px; }
                        th, td { padding: 6px; text-align: left; border-bottom: 1px solid #eee; }
                        th { background: #fff; border-bottom: 2px solid #ddd; font-weight: 600; }
                        .price-row:nth-child(even) { background-color: #f9f9f9; }
                        @media print {
                            body { -webkit-print-color-adjust: exact; }
                            .article-header { background: #e0e0e0 !important; }
                        }
                    </style>
                </head>
                <body>
                    <h1>Listado General de Precios</h1>
            `;for(const Te in ke){const Re=ke[Te];se+=`
                    <div class="article-card">
                        <div class="article-header">
                            <span>${Re.info.numeroArticulo} - ${Re.info.descripcion}</span>
                            <span>UND: ${Re.info.unidadMedida}</span>
                        </div>
                        <div class="article-details">
                            <div><strong>Costo Estndar:</strong> ${Re.info.costoEstandar?.toFixed(2)}</div>
                            <div><strong>Costo ltimo:</strong> ${Re.info.costoUnitario?.toFixed(2)}</div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Nivel de Precio</th>
                                    <th>Unidad</th>
                                    <th>Precio</th>
                                    <th>Moneda</th>
                                </tr>
                            </thead>
                            <tbody>
                `,Re.precios.length>0?Re.precios.forEach(Ie=>{se+=`
                            <tr class="price-row">
                                <td>${Ie.nivelPrecio}</td>
                                <td>${Ie.unidadPrecio}</td>
                                <td><strong>${Ie.precio?.toFixed(2)}</strong></td>
                                <td>${Ie.moneda}</td>
                            </tr>
                        `}):se+='<tr><td colspan="4" style="text-align:center; color: #999; font-style: italic;">Sin precios configurados</td></tr>',se+="</tbody></table></div>"}se+="</body></html > ";const fe=window.open("","_blank");fe.document.write(se),fe.document.close(),fe.print()}catch(ue){console.error(ue),alert("Error al generar el reporte")}},pe=()=>{if(t)try{let ue=`
                <html>
                <head>
                    <title>Reporte de Artculo - ${t.descripcion}</title>
                    <style>
                        body { font-family: sans-serif; padding: 20px; font-size: 14px; }
                        h1 { text-align: center; color: #333; margin-bottom: 5px; }
                        h3 { text-align: center; color: #666; margin-top: 0; margin-bottom: 25px; }
                        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; border-radius: 8px; background: #f9f9f9; }
                        .info-item { margin-bottom: 5px; }
                        .label { font-weight: bold; color: #555; }
                        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
                        th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #eee; }
                        th { background: #f0f0f0; border-bottom: 2px solid #ccc; font-weight: bold; }
                        .price-val { font-weight: bold; font-family: monospace; font-size: 1.1em; }
                    </style>
                </head>
                <body>
                    <h1>${t.descripcion}</h1>
                    <h3>${t.numeroArticulo}</h3>

                    <div class="info-grid">
                        <div class="col">
                            <div class="info-item"><span class="label">Unidad Base:</span> ${t.unidadMedida}</div>
                            <div class="info-item"><span class="label">Categora:</span> ${t.categoria||"-"}</div>
                            <div class="info-item"><span class="label">Marca:</span> ${t.marca||"-"}</div>
                        </div>
                        <div class="col">
                            <div class="info-item"><span class="label">Costo Estndar:</span> $${Number(t.costoEstandar||0).toFixed(2)}</div>
                            <div class="info-item"><span class="label">Costo Actual:</span> $${Number(t.costoUnitario||0).toFixed(2)}</div>
                        </div>
                    </div>

                    <h2>Niveles de Precio</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Nivel</th>
                                <th>Unidad</th>
                                <th>Cant. Inicial</th>
                                <th>Margen %</th>
                                <th>Precio Final</th>
                            </tr>
                        </thead>
                        <tbody>
            `;v.length>0?v.forEach(se=>{se.activo&&(ue+=`
                        <tr>
                            <td>${se.nivelPrecio}</td>
                            <td>${se.unidadMedida}</td>
                            <td>${se.cantidadInicial}</td>
                            <td>${se.porcentaje}%</td>
                            <td class="price-val">${se.precio?.toFixed(2)} <small>${se.moneda}</small></td>
                        </tr>
                    `)}):ue+='<tr><td colspan="5" style="text-align:center; padding: 20px; color: #999;">Sin precios configurados</td></tr>',ue+="</tbody></table></body></html>";const ke=window.open("","_blank");ke.document.write(ue),ke.document.close(),ke.print()}catch(ue){console.error(ue),alert("Error al imprimir artculo")}};return r.jsxs("div",{className:"min-h-screen bg-gray-50/50 p-6 space-y-6",children:[r.jsx("div",{id:"header-message"}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/productos"),className:"hover:bg-gray-100 rounded-full h-10 w-10",children:r.jsx(on,{className:"h-6 w-6 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Lista de Precios"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione y configure los niveles de precios por artculo"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(re,{variant:"outline",onClick:We,className:"bg-white hover:bg-gray-50 text-gray-700 border-gray-200 shadow-sm",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(La,{className:"h-4 w-4"}),r.jsx("span",{children:"Reporte Global"})]})}),r.jsx(re,{variant:"outline",onClick:pe,disabled:!t,className:"bg-white hover:bg-blue-50 text-blue-700 border-blue-200 shadow-sm",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(La,{className:"h-4 w-4"}),r.jsx("span",{children:"Imprimir Artculo"})]})}),r.jsx(re,{variant:"outline",onClick:()=>l(!0),disabled:!t,className:"bg-white hover:bg-orange-50 text-gray-700 border-gray-200 hover:border-orange-200 hover:text-orange-600 transition-all duration-200 shadow-sm",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Ft,{className:"h-4 w-4"}),r.jsx("span",{children:"Copiar a..."})]})}),r.jsx(re,{onClick:K,disabled:!t,className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white border-0 shadow-md hover:shadow-lg transition-all duration-200 px-6",children:r.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[r.jsx(Ft,{className:"h-5 w-5"}),r.jsx("span",{children:"Guardar Cambios"})]})})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50/80 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Informacin del Artculo"}),r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-md border border-gray-200 p-1 shadow-sm",children:[r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>R(0),disabled:M<=0,title:"Primero",children:r.jsx(lF,{size:16})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>R(M-1),disabled:M<=0,title:"Anterior",children:r.jsx(dF,{size:16})}),r.jsx("div",{className:"px-3 py-0.5 bg-gray-50 rounded border border-gray-100 text-xs font-bold min-w-[80px] text-center text-gray-600",children:O.length>0&&M>=0?`${M+1} / ${O.length}`:"0 / 0"}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>R(M+1),disabled:M>=O.length-1,title:"Siguiente",children:r.jsx(ar,{size:16})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>R(O.length-1),disabled:M>=O.length-1,title:"ltimo",children:r.jsx(cF,{size:16})})]})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx("div",{className:"space-y-5",children:r.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-lg border border-blue-100 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-blue-900 uppercase tracking-wide mb-1.5",children:"Artculo Seleccionado"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ye,{value:t?.numeroArticulo||"",className:"bg-white border-blue-200 text-black placeholder:text-gray-500 font-bold h-11",readOnly:!0,placeholder:"Busque un artculo..."}),!t&&r.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-xs text-blue-400 italic",children:"Requerido"})})]}),r.jsx(re,{onClick:()=>s(!0),className:"h-11 w-11 bg-white border border-blue-200 text-blue-600 hover:bg-blue-50 hover:border-blue-300 shadow-sm",children:r.jsx(Ht,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Descripcin"}),r.jsx(ye,{value:t?.descripcion||"",className:"bg-transparent border-0 border-b border-blue-200 rounded-none px-0 h-8 font-medium text-gray-900 focus:ring-0",readOnly:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Mtodo de Precio"}),r.jsx("div",{className:"h-8 flex items-center text-sm font-medium text-gray-700 border-b border-blue-200",children:"Monto Monetario"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-2",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100 text-center",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Unidad Base"}),r.jsx("div",{className:"text-lg font-bold text-gray-900",children:t?.unidadMedida||"-"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100 text-center",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-2",children:"Costo Estndar"}),r.jsx("div",{className:"text-lg font-mono text-gray-600",children:Number(t?.costoEstandar||0).toFixed(2)})]}),r.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-100 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 bg-orange-100 rounded-bl-full"}),r.jsx("label",{className:"block text-xs font-bold text-orange-800 mb-2",children:"Costo Actual"}),r.jsx("div",{className:"text-xl font-mono font-bold text-orange-600",children:Number(t?.costoUnitario||0).toFixed(2)})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden min-h-[400px] flex flex-col",children:[r.jsxs("div",{className:"bg-gray-50/80 px-6 py-4 border-b border-gray-200 flex justify-between items-center sticky top-0 z-10",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Niveles de Precio"]}),r.jsxs("div",{className:"flex items-center gap-4 bg-white p-1.5 rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center px-3 border-r border-gray-200",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500 mr-3",children:"Decimales"}),r.jsx("input",{type:"number",value:N,onChange:ue=>P(parseInt(ue.target.value)),className:"w-12 text-center text-sm font-bold text-gray-900 border-0 focus:ring-0 p-0"})]}),r.jsxs("div",{className:"flex gap-2 p-1",children:[r.jsxs(re,{size:"sm",variant:"outline",onClick:()=>f(!0),disabled:!t||v.length===0,className:"h-8 px-3 text-purple-600 border-purple-200 hover:bg-purple-50",title:"Aplicar Margen Masivo",children:[r.jsx(TC,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs",children:"Aplicar Margen"})]}),v.length===0&&r.jsxs(re,{size:"sm",variant:"ghost",onClick:()=>j(z(t)),disabled:!t,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 font-medium h-8",children:[r.jsx(_t,{className:"h-4 w-4 mr-1.5"}),"Cargar Sugerencias"]}),r.jsxs(re,{size:"sm",onClick:Y,disabled:!t,className:"bg-gray-900 text-white hover:bg-black h-8 px-4",children:[r.jsx(_t,{className:"h-4 w-4 mr-1.5"}),"Agregar Nivel"]})]})]})]}),r.jsx("div",{className:"overflow-x-auto flex-1 p-0",children:r.jsxs(zt,{className:"w-full",children:[r.jsx(Ut,{className:"bg-gray-50/50",children:r.jsxs(Me,{className:"border-b border-gray-200",children:[r.jsx(ce,{className:"w-16 text-center py-4 font-semibold text-gray-600",children:"Activo"}),r.jsx(ce,{className:"py-4 font-semibold text-gray-600 pl-4",children:"Nivel de Precio"}),r.jsx(ce,{className:"w-32 py-4 font-semibold text-gray-600",children:"Unidad"}),r.jsx(ce,{className:"w-32 text-center py-4 font-semibold text-gray-600",children:"Cant. Inicial"}),r.jsx(ce,{className:"w-32 text-center py-4 font-semibold text-gray-600",children:"Margen %"}),r.jsx(ce,{className:"w-40 text-right py-4 font-semibold text-gray-600 pr-6",children:"Precio Final"}),r.jsx(ce,{className:"w-24 text-center py-4 font-semibold text-gray-600",children:"Moneda"}),r.jsx(ce,{className:"w-16"})]})}),r.jsx(Bt,{children:t?v.map((ue,ke)=>r.jsxs(Me,{className:"group hover:bg-orange-50/30 transition-colors border-b border-gray-100 last:border-0",children:[r.jsx(G,{className:"text-center py-3",children:r.jsx("div",{className:"flex justify-center",children:r.jsx("input",{type:"checkbox",checked:ue.activo,onChange:se=>me(ke,"activo",se.target.checked),className:"w-5 h-5 rounded border-gray-300 text-orange-600 focus:ring-orange-500 cursor-pointer"})})}),r.jsx(G,{className:"p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:ue.nivelPrecio,onChange:se=>me(ke,"nivelPrecio",se.target.value),className:"w-full bg-transparent border-0 font-medium text-gray-900 focus:ring-0 cursor-pointer hover:bg-gray-100/50 rounded px-2 py-1.5 transition-colors",children:[r.jsx("option",{value:"",children:"Seleccionar Nivel..."}),I.map(se=>r.jsx("option",{value:se.nombre,children:se.nombre},se.id))]}),r.jsx(Go,{onClick:()=>T(!0),className:"opacity-0 group-hover:opacity-100 transition-opacity"})]})}),r.jsx(G,{className:"p-2",children:r.jsx("select",{value:ue.unidadMedida,onChange:se=>me(ke,"unidadMedida",se.target.value),className:"w-full text-sm bg-gray-50 border-0 rounded-md text-gray-600 focus:ring-0 py-1.5 cursor-pointer",children:A.map(se=>r.jsx("option",{value:se,children:se},se))})}),r.jsx(G,{className:"p-2",children:r.jsx(ye,{type:"number",value:ue.cantidadInicial,onChange:se=>me(ke,"cantidadInicial",se.target.value===""?0:parseFloat(se.target.value)),className:"text-center border-0 bg-transparent hover:bg-gray-100/50 focus:bg-white focus:ring-1 focus:ring-orange-200 rounded font-mono text-sm"})}),r.jsx(G,{className:"p-2",children:r.jsxs("div",{className:"relative",children:[r.jsx(ye,{type:"number",value:ue.porcentaje,onChange:se=>me(ke,"porcentaje",se.target.value===""?0:parseFloat(se.target.value)),className:"text-center border-0 bg-transparent hover:bg-gray-100/50 focus:bg-white focus:ring-1 focus:ring-orange-200 rounded font-mono text-sm pr-6"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-bold",children:"%"})]})}),r.jsx(G,{className:"p-2",children:r.jsx(ye,{type:"number",value:ue.precio,onChange:se=>me(ke,"precio",se.target.value===""?0:parseFloat(se.target.value)),className:"text-right border border-transparent bg-orange-50/50 text-orange-700 font-bold shadow-sm rounded focus:bg-white focus:border-orange-300 focus:ring-2 focus:ring-orange-100 text-base"})}),r.jsx(G,{className:"p-2 text-center",children:r.jsxs("select",{value:ue.moneda,onChange:se=>me(ke,"moneda",se.target.value),className:"text-xs font-bold text-gray-700 bg-gray-100 border-0 rounded px-1 py-1 cursor-pointer focus:ring-2 focus:ring-orange-200",children:[r.jsx("option",{value:"DOP",children:"DOP"}),r.jsx("option",{value:"USD",children:"USD"})]})}),r.jsx(G,{className:"text-center p-2",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-100 group-hover:opacity-100 transition-opacity",children:[r.jsxs("div",{className:"flex flex-col gap-0.5 mr-2",children:[r.jsx("button",{onClick:()=>Se(ke,"up"),disabled:ke===0,className:"text-gray-400 hover:text-blue-600 disabled:opacity-20 disabled:cursor-not-allowed hover:bg-gray-100 rounded",children:r.jsx(Ln,{className:"h-3 w-3"})}),r.jsx("button",{onClick:()=>Se(ke,"down"),disabled:ke===v.length-1,className:"text-gray-400 hover:text-blue-600 disabled:opacity-20 disabled:cursor-not-allowed hover:bg-gray-100 rounded",children:r.jsx(Kr,{className:"h-3 w-3"})})]}),r.jsx("button",{className:"p-1.5 rounded-md text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors",onClick:()=>ee(ke),title:"Eliminar fila",children:r.jsx(Qt,{className:"h-4 w-4"})})]})})]},ke)):r.jsx(Me,{children:r.jsx(G,{colSpan:8,className:"h-64 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ht,{className:"h-8 w-8 text-gray-300"})}),r.jsx("p",{className:"text-lg font-medium text-gray-600",children:"No hay artculo seleccionado"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Utilice el buscador para cargar un producto y ver sus precios"}),r.jsx(re,{variant:"outline",className:"mt-6 border-orange-200 text-orange-600 hover:bg-orange-50",onClick:()=>s(!0),children:"Buscar Artculo Ahora"})]})})})})]})})]}),r.jsx(ul,{isOpen:a,onClose:()=>s(!1),onSelect:ue=>{n(ue),s(!1)}}),r.jsx(ul,{isOpen:o,onClose:()=>l(!1),onSelect:B}),r.jsx(Yy,{isOpen:V,onClose:()=>T(!1),onSave:q,title:"Nuevo Nivel de Precio",fields:[{name:"nombre",label:"Nombre del Nivel",placeholder:"Ej. Mayorista"},{name:"descripcion",label:"Descripcin",placeholder:"Descripcin opcional"}]}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200",children:[r.jsxs("div",{className:"bg-purple-600 text-white p-4 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[r.jsx(TC,{size:20}),"Aplicar Margen"]}),r.jsx("button",{onClick:()=>f(!1),className:"text-white/80 hover:text-white",children:r.jsx(It,{size:20})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margen de Ganancia (%)"}),r.jsx(ye,{type:"number",autoFocus:!0,placeholder:"Ej: 30",value:h,onChange:ue=>u(ue.target.value),className:"text-lg font-bold text-center"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aplicar a"}),r.jsxs("select",{className:"w-full h-10 rounded-md border-gray-300 bg-gray-50 text-sm focus:ring-purple-500 focus:border-purple-500",value:m,onChange:ue=>p(ue.target.value),children:[r.jsx("option",{value:"all",children:"Todo (Todos los Niveles)"}),[...new Set(v.map(ue=>ue.nivelPrecio))].filter(Boolean).map((ue,ke)=>r.jsx("option",{value:ue,children:ue},ke))]})]}),r.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[r.jsx(re,{variant:"ghost",onClick:()=>f(!1),children:"Cancelar"}),r.jsx(re,{onClick:De,className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Aplicar"})]})]})]})})]})};let UU={data:""},BU=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||UU},VU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qU=/\/\*[^]*?\*\/|  +/g,j2=/\n+/g,Yo=(e,t)=>{let n="",a="",s="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":a+=o[1]=="f"?Yo(l,o):o+"{"+Yo(l,o[1]=="k"?"":t)+"}":typeof l=="object"?a+=Yo(l,t?t.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,f=>/&/.test(f)?f.replace(/&/g,c):c?c+" "+f:f)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Yo.p?Yo.p(o,l):o+":"+l+";")}return n+(t&&s?t+"{"+s+"}":s)+a},Ks={},$O=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+$O(e[n]);return t}return e},GU=(e,t,n,a,s)=>{let o=$O(e),l=Ks[o]||(Ks[o]=(f=>{let h=0,u=11;for(;h<f.length;)u=101*u+f.charCodeAt(h++)>>>0;return"go"+u})(o));if(!Ks[l]){let f=o!==e?e:(h=>{let u,m,p=[{}];for(;u=VU.exec(h.replace(qU,""));)u[4]?p.shift():u[3]?(m=u[3].replace(j2," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][u[1]]=u[2].replace(j2," ").trim();return p[0]})(e);Ks[l]=Yo(s?{["@keyframes "+l]:f}:f,n?"":"."+l)}let c=n&&Ks.g?Ks.g:null;return n&&(Ks.g=Ks[l]),((f,h,u,m)=>{m?h.data=h.data.replace(m,f):h.data.indexOf(f)===-1&&(h.data=u?f+h.data:h.data+f)})(Ks[l],t,a,c),l},HU=(e,t,n)=>e.reduce((a,s,o)=>{let l=t[o];if(l&&l.call){let c=l(n),f=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=f?"."+f:c&&typeof c=="object"?c.props?"":Yo(c,""):c===!1?"":c}return a+s+(l??"")},"");function qp(e){let t=this||{},n=e.call?e(t.p):e;return GU(n.unshift?n.raw?HU(n,[].slice.call(arguments,1),t.p):n.reduce((a,s)=>Object.assign(a,s&&s.call?s(t.p):s),{}):n,BU(t.target),t.g,t.o,t.k)}let FO,lb,cb;qp.bind({g:1});let io=qp.bind({k:1});function WU(e,t,n,a){Yo.p=t,FO=e,lb=n,cb=a}function mi(e,t){let n=this||{};return function(){let a=arguments;function s(o,l){let c=Object.assign({},o),f=c.className||s.className;n.p=Object.assign({theme:lb&&lb()},c),n.o=/ *go\d+/.test(f),c.className=qp.apply(n,a)+(f?" "+f:"");let h=e;return e[0]&&(h=c.as||e,delete c.as),cb&&h[0]&&cb(c),FO(h,c)}return s}}var KU=e=>typeof e=="function",db=(e,t)=>KU(e)?e(t):e,YU=(()=>{let e=0;return()=>(++e).toString()})(),XU=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),JU=20,LO="default",zO=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:a}=t;return zO(e,{type:e.toasts.find(l=>l.id===a.id)?1:0,toast:a});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},QU=[],ZU={toasts:[],pausedAt:void 0,settings:{toastLimit:JU}},bc={},UO=(e,t=LO)=>{bc[t]=zO(bc[t]||ZU,e),QU.forEach(([n,a])=>{n===t&&a(bc[t])})},BO=e=>Object.keys(bc).forEach(t=>UO(e,t)),eB=e=>Object.keys(bc).find(t=>bc[t].toasts.some(n=>n.id===e)),zj=(e=LO)=>t=>{UO(t,e)},tB=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||YU()}),Xu=e=>(t,n)=>{let a=tB(t,e,n);return zj(a.toasterId||eB(a.id))({type:2,toast:a}),a.id},gn=(e,t)=>Xu("blank")(e,t);gn.error=Xu("error");gn.success=Xu("success");gn.loading=Xu("loading");gn.custom=Xu("custom");gn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?zj(t)(n):BO(n)};gn.dismissAll=e=>gn.dismiss(void 0,e);gn.remove=(e,t)=>{let n={type:4,toastId:e};t?zj(t)(n):BO(n)};gn.removeAll=e=>gn.remove(void 0,e);gn.promise=(e,t,n)=>{let a=gn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let o=t.success?db(t.success,s):void 0;return o?gn.success(o,{id:a,...n,...n?.success}):gn.dismiss(a),s}).catch(s=>{let o=t.error?db(t.error,s):void 0;o?gn.error(o,{id:a,...n,...n?.error}):gn.dismiss(a)}),e};var rB=io`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,nB=io`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,aB=io`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,sB=mi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${rB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${nB} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${aB} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,oB=io`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,iB=mi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${oB} 1s linear infinite;
`,lB=io`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,cB=io`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,dB=mi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${cB} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,uB=mi("div")`
  position: absolute;
`,fB=mi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,hB=io`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mB=mi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${hB} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pB=({toast:e})=>{let{icon:t,type:n,iconTheme:a}=e;return t!==void 0?typeof t=="string"?x.createElement(mB,null,t):t:n==="blank"?null:x.createElement(fB,null,x.createElement(iB,{...a}),n!=="loading"&&x.createElement(uB,null,n==="error"?x.createElement(sB,{...a}):x.createElement(dB,{...a})))},gB=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xB=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,vB="0%{opacity:0;} 100%{opacity:1;}",yB="0%{opacity:1;} 100%{opacity:0;}",bB=mi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jB=mi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,wB=(e,t)=>{let n=e.includes("top")?1:-1,[a,s]=XU()?[vB,yB]:[gB(n),xB(n)];return{animation:t?`${io(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${io(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};x.memo(({toast:e,position:t,style:n,children:a})=>{let s=e.height?wB(e.position||t||"top-center",e.visible):{opacity:0},o=x.createElement(pB,{toast:e}),l=x.createElement(jB,{...e.ariaProps},db(e.message,e));return x.createElement(bB,{className:e.className,style:{...s,...n,...e.style}},typeof a=="function"?a({icon:o,message:l}):x.createElement(x.Fragment,null,o,l))});WU(x.createElement);qp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Ns=gn;const w2="http://localhost:5006/api",N2=e=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(e),$t=e=>new Intl.NumberFormat("es-DO").format(e),S2=()=>{const{articuloId:e}=Ts(),t=Tt(),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState({fechaInicio:"",fechaFin:"",tipoMovimiento:""}),[f,h]=x.useState(""),[u,m]=x.useState([]),[p,v]=x.useState(!e),[j,y]=x.useState(!1),[b,N]=x.useState(!1),[P,A]=x.useState(""),[k,I]=x.useState([]),[E,O]=x.useState(""),[C,M]=x.useState(""),F=bt.useMemo(()=>{const B=s?.movimientos||[];return j?B.reduce((R,H)=>{const Y=H.almacenNombre||"Sin Almacn";return R[Y]||(R[Y]=[]),R[Y].push(H),R},{}):null},[s,j]);x.useEffect(()=>{e?v(!1):(v(!0),a(!1))},[e]);const V=async B=>{if(!B){m([]);return}try{const H=(await dl()).filter(Y=>Y.descripcion.toLowerCase().includes(B.toLowerCase())||Y.numeroArticulo.toLowerCase().includes(B.toLowerCase())).slice(0,10);m(H)}catch{Ns.error("Error buscando artculos")}},T=B=>{const R=B.target.value;h(R),V(R)},L=({title:B,value:R,icon:H,colorClass:Y,subtext:ee})=>r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500 mb-1",children:B}),r.jsx("h3",{className:`text-2xl font-bold ${Y}`,children:R}),ee&&r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:ee})]}),r.jsx("div",{className:`p-3 rounded-full ${Y.replace("text-","bg-").replace("600","100")}`,children:r.jsx(H,{className:`w-6 h-6 ${Y}`})})]}),U=async()=>{try{console.log("[Historial] Fetching data for ID:",e),a(!0);const B=new URLSearchParams;l.fechaInicio&&B.append("fechaInicio",l.fechaInicio),l.fechaFin&&B.append("fechaFin",l.fechaFin),l.tipoMovimiento&&B.append("tipoMovimiento",l.tipoMovimiento);const R=await fetch(`${w2}/ArticuloHistorial/${e}?${B.toString()}`);if(console.log("[Historial] Fetch Status:",R.status,R.statusText),!R.ok){const Y=await R.text();throw console.error("[Historial] Fetch Error Body:",Y),new Error("Error al cargar historial: "+R.status)}const H=await R.json();console.log("[Historial] Data Received:",H),o(H)}catch(B){console.error("[Historial] Catch Error:",B),Ns.error(B.message)}finally{a(!1)}},J=async()=>{N(!0),A(z?.existenciaActual||0);try{const B=await Aj();console.log("Motivos loaded:",B);const H=(Array.isArray(B)?B:B.data||[]).filter(Y=>Y.activo);I(H),H.length>0&&O(H[0].id)}catch(B){console.error("Error loading motivos:",B),Ns.error("Error cargando motivos")}},q=async()=>{if(P==="")return;const B=z.existenciaActual,H=parseFloat(P)-B;if(H===0){Ns("El stock es idntico, no se requiere ajuste."),N(!1);return}if(!E){Ns.error("Seleccione un motivo");return}const Y=H>0?"in":"out",ee=Math.abs(H),me={fecha:new Date().toISOString().split("T")[0],tipoAjuste:Y,motivoId:parseInt(E),motivoDescripcion:k.find(De=>De.id==E)?.motivo,almacenId:1,observaciones:`Ajuste Rpido desde Historial: ${C}`,detalles:[{articuloId:W.id,codigo:W.codigo,descripcion:W.descripcion,unidad:W.unidadMedida,cantidad:ee,equivalente:1,costo:W.costoUnitario,planUoM:W.planMedida||"N/A"}]};try{console.log("Sending payload:",me);const De=await FD(me);console.log("Response:",De),Ns.success(`Ajuste ${De.documento} creado. Stock actualizado.`),N(!1),U()}catch(De){console.error("Error creating adjustment:",De),Ns.error("Error al crear ajuste: "+De.message)}};if(x.useEffect(()=>{e&&U()},[e,l]),n&&!s)return r.jsx("div",{className:"p-8 text-center",children:"Cargando historial..."});if(!s)return r.jsx("div",{className:"p-8 text-center text-red-500",children:"No se encontraron datos."});const{encabezado:W,kpis:z,movimientos:K}=s||{encabezado:{},kpis:{},movimientos:[]};return p?r.jsx("div",{className:"p-6 bg-slate-50 min-h-screen flex flex-col items-center pt-20",children:r.jsxs("div",{className:"w-full max-w-2xl text-center space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-800 tracking-tight mb-2",children:"Historial de Artculos"}),r.jsx("p",{className:"text-slate-500",children:"Busca un producto para ver su kardex detallado"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ht,{className:"absolute left-4 top-4 text-slate-400 w-6 h-6"}),r.jsx("input",{type:"text",className:"w-full h-14 pl-14 pr-4 rounded-2xl border-2 border-slate-200 focus:border-indigo-500 focus:ring-0 text-lg shadow-sm transition-all",placeholder:"Buscar por cdigo o descripcin...",value:f,onChange:T,autoFocus:!0})]}),r.jsxs("div",{className:"space-y-3",children:[u.map(B=>r.jsxs("button",{onClick:()=>t(`/inventario/historial/${B.id}`),className:"w-full bg-white p-4 rounded-xl shadow-sm border border-slate-100 hover:border-indigo-300 hover:shadow-md transition-all flex items-center justify-between group",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"font-bold text-slate-800 group-hover:text-indigo-600",children:B.descripcion}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Code: ",B.numeroArticulo]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-sm font-bold text-slate-700 block",children:["Stock: ",B.stockActual]}),r.jsx("span",{className:"text-xs text-slate-400",children:B.unidadMedida})]})]},B.id)),f&&u.length===0&&r.jsx("div",{className:"text-slate-400 py-4",children:"No se encontraron productos"})]})]})}):r.jsxs("div",{className:"p-6 bg-slate-50 min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-white rounded-full transition-colors",children:r.jsx(on,{className:"w-6 h-6 text-slate-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[W?.descripcion||"Artculo sin nombre",r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${W?.estado==="Activo"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:W?.estado||"N/A"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mt-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Nl,{className:"w-4 h-4"})," ",W.codigo]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ji,{className:"w-4 h-4"})," ",W.categoria]}),r.jsxs("span",{children:["U.M: ",W.unidadMedida]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:async()=>{if(confirm("Ests seguro de conciliar el stock basndose en el historial completo de todos los almacenes?"))try{const B=await fetch(`${w2}/Articulos/${e}/RecalculateStock`,{method:"POST"}),R=await B.json();if(B.ok){Ns.success(`Stock conciliado: ${R.nuevoStock}`);const H=`
                                    <html>
                                    <head>
                                        <title>Reporte de Conciliacin - ${W.descripcion}</title>
                                        <style>
                                            body { font-family: 'Segoe UI', sans-serif; padding: 20px; font-size: 12px; }
                                            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
                                            .title { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
                                            .subtitle { color: #555; }
                                            .section { margin-bottom: 20px; page-break-inside: avoid; }
                                            .section-title { font-size: 16px; font-weight: bold; color: #4338ca; border-bottom: 1px solid #e5e7eb; padding-bottom: 5px; margin-bottom: 10px; }
                                            
                                            .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
                                            .kpi-card { border: 1px solid #ddd; padding: 10px; border-radius: 6px; background: #f9fafb; text-align: center; }
                                            .kpi-label { color: #666; font-size: 11px; text-transform: uppercase; }
                                            .kpi-value { font-size: 18px; font-weight: bold; color: #111; }
                                            
                                            .table { width: 100%; border-collapse: collapse; font-size: 11px; }
                                            .table th, .table td { border: 1px solid #e5e7eb; padding: 6px; text-align: left; }
                                            .table th { background-color: #f3f4f6; font-weight: bold; color: #374151; }
                                            .text-right { text-align: right; }
                                            
                                            .footer { margin-top: 30px; font-size: 10px; color: #999; text-align: center; border-top: 1px solid #eee; padding-top: 10px; }
                                        </style>
                                    </head>
                                    <body>
                                        <div class="header">
                                            <div class="title">Reporte de Conciliacin de Inventario</div>
                                            <div class="subtitle">${new Date().toLocaleString()} - Generado tras Reclculo</div>
                                        </div>

                                        <div class="info" style="display: flex; justify-content: space-between; margin-bottom: 20px; background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0;">
                                            <div>
                                                <p><strong>Artculo:</strong> ${W.descripcion}</p>
                                                <p><strong>Cdigo:</strong> ${W.codigo}</p>
                                            </div>
                                            <div class="text-right">
                                                <p><strong>Categora:</strong> ${W.categoria}</p>
                                                <p><strong>Unidad:</strong> ${W.unidadMedida}</p>
                                            </div>
                                        </div>

                                        <!-- KPIs Conciliados -->
                                        <div class="section">
                                            <div class="section-title">Resultados de la Conciliacin</div>
                                            <div class="kpi-grid">
                                                <div class="kpi-card">
                                                    <div class="kpi-label">Stock Anterior</div>
                                                    <div class="kpi-value">${$t(R.stockAnterior!==void 0?R.stockAnterior:0)}</div>
                                                </div>
                                                <div class="kpi-card">
                                                    <div class="kpi-label">Stock Nuevo</div>
                                                    <div class="kpi-value">${$t(R.nuevoStock||0)}</div>
                                                </div>
                                                <div class="kpi-card">
                                                    <div class="kpi-label">Total Entradas</div>
                                                    <div class="kpi-value text-green-600">+${$t(R.totalEntradas||0)}</div>
                                                </div>
                                                <div class="kpi-card">
                                                    <div class="kpi-label">Total Salidas</div>
                                                    <div class="kpi-value text-red-600">-${$t(R.totalSalidas||0)}</div>
                                                </div>
                                                <div className="kpi-card">
                                                    <div className="kpi-label">Total Compras</div>
                                                    <div className="kpi-value text-blue-600">+${$t(R.totalCompras||R.TotalCompras||0)}</div>
                                                </div>
                                                <div className="kpi-card">
                                                    <div className="kpi-label">Entradas por Recepcin</div>
                                                    <div className="kpi-value text-green-600">+${$t(R.entradasRecepcion||R.EntradasRecepcion||0)}</div>
                                                </div>
                                            </div>
                                            <div style="font-size: 14px; text-align: center; padding: 10px; background: ${R.diferencia===0?"#f0fdf4":"#fef2f2"}; color: ${R.diferencia===0?"#15803d":"#b91c1c"}; border-radius: 6px; border: 1px solid currentColor;">
                                                <strong>Ajuste Realizado: ${R.diferencia>0?"+":""}${$t(R.diferencia)}</strong>
                                                ${R.diferencia===0?"(El inventario ya estaba correcto)":"(Se corrigi el inventario re-sumando historial)"}
                                            </div>
                                        </div>

                                        <!-- Movements Table -->
                                        <div class="section">
                                            <div class="section-title">Historial Completo Utilizado para Clculo</div>
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Fecha</th>
                                                        <th>Tipo</th>
                                                        <th>Doc</th>
                                                        <th class="text-right">Ctd</th>
                                                        <th class="text-right">Costo</th>
                                                        <th>Almacn</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    ${(R.movimientos||s?.movimientos||[]).map(ee=>`
                                                        <tr>
                                                            <td>${new Date(ee.fechaMovimiento||ee.FechaMovimiento).toLocaleString()}</td>
                                                            <td>${ee.tipoMovimiento||ee.TipoMovimiento}</td>
                                                            <td>${ee.referencia||ee.Referencia||ee.documento||"-"}</td>
                                                            <td class="text-right" style="color: ${(ee.cantidad||ee.Cantidad)>0?"#16a34a":"#dc2626"}">
                                                                ${$t(ee.cantidad||ee.Cantidad)}
                                                            </td>
                                                            <td class="text-right">${N2(ee.costo||ee.Costo||0)}</td>
                                                            <td>${ee.almacenNombre||ee.AlmacenId||"-"}</td>
                                                        </tr>
                                                    `).join("")}
                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="footer">
                                            Generado por Sistema Crono POS - Auditora de Inventario
                                        </div>
                                    </body>
                                    </html>
                                `,Y=window.open("","","width=800,height=600");Y.document.write(H),Y.document.close(),Y.focus(),setTimeout(()=>{Y.print(),Y.close(),window.location.reload()},500)}else Ns.error(R.message)}catch(B){console.error(B),Ns.error("Error al conciliar")}},className:"flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-lg shadow-sm text-slate-600 hover:bg-slate-200 font-medium border border-slate-200 text-xs",children:[r.jsx(ro,{className:"w-3 h-3"})," Auditar (Reclculo)"]}),r.jsxs("button",{onClick:J,className:"flex items-center gap-2 bg-hd-orange px-4 py-2 rounded-lg shadow-sm text-white hover:bg-orange-600 font-medium border border-transparent",children:[r.jsx(ro,{className:"w-4 h-4"})," Ajustar Stock"]}),r.jsxs("button",{onClick:U,className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm text-indigo-600 hover:bg-indigo-50 font-medium border border-slate-200",children:[r.jsx(ro,{className:"w-4 h-4"})," Actualizar"]})]})]}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ajuste Rpido de Inventario"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100 flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Stock Sistema:"}),r.jsx("span",{className:"font-mono font-bold text-lg",children:z.existenciaActual})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Fsico Real"}),r.jsx("input",{type:"number",autoFocus:!0,className:"w-full text-2xl font-bold text-center border-2 border-indigo-100 focus:border-indigo-500 rounded-lg py-2",value:P,onChange:B=>A(B.target.value)})]}),P!==""&&r.jsxs("div",{className:`text-center text-sm font-medium py-2 rounded ${parseFloat(P)-z.existenciaActual>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:["Diferencia: ",parseFloat(P)-z.existenciaActual>0?"+":"",(parseFloat(P)-z.existenciaActual).toFixed(2)]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),r.jsx("select",{className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500",value:E,onChange:B=>O(B.target.value),children:k.map(B=>r.jsx("option",{value:B.id,children:B.motivo},B.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota"}),r.jsx("input",{className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500",placeholder:"Opcional...",value:C,onChange:B=>M(B.target.value)})]})]}),r.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Cancelar"}),r.jsx("button",{onClick:q,className:"px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg font-medium shadow-sm transition-colors",children:"Confirmar Ajuste"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(L,{title:"Existencia Actual",value:$t(z.existenciaActual),icon:Ji,colorClass:"text-blue-600",subtext:`Costo uni: ${N2(W.costoUnitario)}`}),r.jsx(L,{title:"Total Compras",value:$t(z.totalCompras),icon:oo,colorClass:"text-emerald-600",subtext:"Entradas por Recepcin"}),r.jsx(L,{title:"Total Ventas",value:$t(z.totalVentas),icon:Qo,colorClass:"text-rose-500",subtext:"Salidas por Facturacin"}),r.jsx(L,{title:"Entradas Totales",value:$t(z.entradasTotales),icon:Ln,colorClass:"text-green-600"}),r.jsx(L,{title:"Salidas Totales",value:$t(z.salidasTotales),icon:Kr,colorClass:"text-red-600"}),r.jsx(L,{title:"Balance Neto",value:$t(z.balanceNeto),icon:jj,colorClass:z.balanceNeto>=0?"text-slate-600":"text-amber-600",subtext:"En periodo seleccionado"})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-100 mb-6 flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Desde"}),r.jsx("input",{type:"date",className:"input-field-sm",value:l.fechaInicio,onChange:B=>c({...l,fechaInicio:B.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Hasta"}),r.jsx("input",{type:"date",className:"input-field-sm",value:l.fechaFin,onChange:B=>c({...l,fechaFin:B.target.value})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(Ji,{className:"w-5 h-5"})," Distribucin de Stock por Almacn"]}),r.jsxs("button",{onClick:()=>{const B=`
                                <html>
                                <head>
                                    <title>Reporte de Articulo - ${W.descripcion}</title>
                                    <style>
                                        body { font-family: 'Segoe UI', sans-serif; padding: 20px; font-size: 12px; }
                                        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
                                        .title { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
                                        .subtitle { color: #555; }
                                        .section { margin-bottom: 20px; page-break-inside: avoid; }
                                        .section-title { font-size: 16px; font-weight: bold; color: #4338ca; border-bottom: 1px solid #e5e7eb; padding-bottom: 5px; margin-bottom: 10px; }
                                        
                                        .kpi-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
                                        .kpi-card { border: 1px solid #ddd; padding: 10px; border-radius: 6px; background: #f9fafb; text-align: center; }
                                        .kpi-label { color: #666; font-size: 11px; text-transform: uppercase; }
                                        .kpi-value { font-size: 18px; font-weight: bold; color: #111; }
                                        
                                        .table { width: 100%; border-collapse: collapse; font-size: 11px; }
                                        .table th, .table td { border: 1px solid #e5e7eb; padding: 6px; text-align: left; }
                                        .table th { background-color: #f3f4f6; font-weight: bold; color: #374151; }
                                        .text-right { text-align: right; }
                                        .total-row { font-weight: bold; background-color: #f3f4f6; }
                                        
                                        .dist-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
                                        .dist-item { border: 1px solid #eee; padding: 8px; border-radius: 4px; }
                                        .dist-bar-bg { height: 8px; background: #eee; border-radius: 4px; margin-top: 4px; overflow: hidden; }
                                        .dist-bar { height: 100%; background: #4f46e5; }
                                        
                                        .footer { margin-top: 30px; font-size: 10px; color: #999; text-align: center; border-top: 1px solid #eee; padding-top: 10px; }
                                        
                                        @media print {
                                            body { padding: 0; }
                                            .info { display: flex; justify-content: space-between; margin-bottom: 20px; }
                                            table { page-break-inside: auto; }
                                            tr { page-break-inside: avoid; page-break-after: auto; }
                                        }
                                    </style>
                                </head>
                                <body>
                                    <div class="header">
                                        <div class="title">Reporte Detallado de Artculo</div>
                                        <div class="subtitle">${new Date().toLocaleString()}</div>
                                    </div>

                                    <div class="info" style="display: flex; justify-content: space-between; margin-bottom: 20px; background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0;">
                                        <div>
                                            <p><strong>Artculo:</strong> ${W.descripcion}</p>
                                            <p><strong>Cdigo:</strong> ${W.codigo}</p>
                                        </div>
                                        <div class="text-right">
                                            <p><strong>Categora:</strong> ${W.categoria}</p>
                                            <p><strong>Unidad:</strong> ${W.unidadMedida}</p>
                                        </div>
                                    </div>

                                    <!-- KPIs -->
                                    <div class="section">
                                        <dvi class="section-title">Resumen de Inventario</div>
                                        <div class="kpi-grid">
                                            <div class="kpi-card">
                                                <div class="kpi-label">Existencia Actual</div>
                                                <div class="kpi-value">${$t(z.existenciaActual)}</div>
                                            </div>
                                            <div class="kpi-card">
                                                <div class="kpi-label">Total Entradas</div>
                                                <div class="kpi-value text-green-600">+${$t(z.entradasTotales)}</div>
                                            </div>
                                            <div class="kpi-card">
                                                <div class="kpi-label">Total Salidas</div>
                                                <div class="kpi-value text-red-600">-${$t(z.salidasTotales)}</div>
                                            </div>
                                             <div class="kpi-card">
                                                <div class="kpi-label">Compras (Periodo)</div>
                                                <div class="kpi-value" style="color: #4f46e5;">+${$t(z.totalCompras)}</div>
                                            </div>
                                             <div class="kpi-card">
                                                <div class="kpi-label">Ventas (Periodo)</div>
                                                <div class="kpi-value" style="color: #ea580c;">-${$t(z.totalVentas)}</div>
                                            </div>
                                            <div class="kpi-card">
                                                <div class="kpi-label">Balance Neto</div>
                                                <div class="kpi-value">${$t(z.balanceNeto)}</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Distribution -->
                                    <div class="section">
                                        <div class="section-title">Distribucin por Almacn</div>
                                        <div class="dist-grid">
                                            ${s.stockDistribucion.map(H=>{const Y=z.existenciaActual>0?z.existenciaActual:1,ee=Math.max(0,Math.min(100,H.stock/Y*100));return`
                                                <div class="dist-item">
                                                    <div style="display:flex; justify-content:space-between; margin-bottom:2px;">
                                                        <strong>${H.almacen}</strong>
                                                        <span>${$t(H.stock)}</span>
                                                    </div>
                                                    <div class="dist-bar-bg">
                                                        <div class="dist-bar" style="width: ${ee}%"></div>
                                                    </div>
                                                </div>
                                                `}).join("")}
                                        </div>
                                    </div>

                                    <!-- Movements Table -->
                                    <div class="section">
                                        <div class="section-title">Historial de Movimientos</div>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Fecha</th>
                                                    <th>Tipo</th>
                                                    <th>Doc</th>
                                                    <th class="text-right">Entrada</th>
                                                    <th class="text-right">Salida</th>
                                                    <th class="text-right">Balance</th>
                                                    <th>Almacn</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                ${(s?.movimientos||[]).map(H=>`
                                                    <tr>
                                                        <td>${new Date(H.fechaMovimiento).toLocaleString()}</td>
                                                        <td>${H.tipoMovimiento}</td>
                                                        <td>${H.referencia||H.documento||"-"}</td>
                                                        <td class="text-right" style="color: ${H.entrada>0?"#16a34a":"inherit"}">
                                                            ${H.entrada>0?$t(H.entrada):"-"}
                                                        </td>
                                                        <td class="text-right" style="color: ${H.salida>0?"#dc2626":"inherit"}">
                                                            ${H.salida>0?$t(H.salida):"-"}
                                                        </td>
                                                        <td class="text-right"><b>${$t(H.balance)}</b></td>
                                                        <td>${H.almacenNombre}</td>
                                                    </tr>
                                                `).join("")}
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="footer">
                                        Generado por Sistema Crono POS - Documento Interno
                                    </div>
                                </body>
                                </html>
                            `,R=window.open("","","width=800,height=600");R.document.write(B),R.document.close(),R.focus(),setTimeout(()=>{R.print(),R.close()},500)},className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 bg-indigo-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[r.jsx(La,{className:"w-4 h-4"}),"Imprimir Reporte"]})]}),s.stockDistribucion&&s.stockDistribucion.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.stockDistribucion.map((B,R)=>{const H=s.kpis.existenciaActual>0?s.kpis.existenciaActual:1,Y=Math.max(0,Math.min(100,B.stock/H*100));return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-600 mb-1",children:[r.jsx("span",{children:B.almacen}),r.jsx("span",{className:"text-slate-900 font-bold",children:$t(B.stock)})]}),r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:r.jsx("div",{className:`h-2.5 rounded-full ${B.stock>0?"bg-indigo-500":"bg-red-400"}`,style:{width:`${Y}%`}})})]},R)})}):r.jsx("p",{className:"text-slate-500 italic text-sm",children:"No hay informacin de distribucin por almacn."})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(ea,{className:"w-5 h-5 text-indigo-500"}),"Historial de Movimientos"]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("button",{onClick:()=>y(!j),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${j?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-white text-slate-600 border border-slate-300 hover:bg-slate-50"}`,children:[r.jsx(Ji,{className:"w-4 h-4"}),j?"Desagrupar":"Agrupar por Almacn"]})})]}),n?r.jsxs("div",{className:"p-12 text-center text-slate-500 flex flex-col items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500 mb-4"}),r.jsx("p",{children:"Cargando historial..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3",children:"Fecha / Hora"}),r.jsx("th",{className:"px-6 py-3",children:"Tipo"}),r.jsx("th",{className:"px-6 py-3",children:"Documento"}),r.jsx("th",{className:"px-6 py-3 text-right text-green-700 bg-green-50",children:"Entrada"}),r.jsx("th",{className:"px-6 py-3 text-right text-red-700 bg-red-50",children:"Salida"}),r.jsx("th",{className:"px-6 py-3 text-right",children:"Stock"}),r.jsx("th",{className:"px-6 py-3",children:"Almacn"}),r.jsx("th",{className:"px-6 py-3",children:"Usuario"}),r.jsx("th",{className:"px-6 py-3",children:"Info"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:j&&F?Object.entries(F).map(([B,R])=>r.jsxs(bt.Fragment,{children:[r.jsx("tr",{className:"bg-slate-50/80",children:r.jsx("td",{colSpan:"9",className:"px-6 py-2 font-semibold text-slate-700 border-t border-b border-slate-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ji,{className:"w-4 h-4 text-indigo-500"}),B,r.jsxs("span",{className:"text-xs font-normal text-slate-500 ml-2",children:["(",R.length," movimientos)"]})]})})}),R.map(H=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-slate-600",children:new Date(H.fechaMovimiento).toLocaleString()}),r.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H.entrada>0?"bg-emerald-100 text-emerald-800":H.salida>0?"bg-rose-100 text-rose-800":"bg-slate-100 text-slate-800"}`,children:H.tipoMovimiento})}),r.jsx("td",{className:"px-6 py-3 text-slate-500 font-mono text-xs",children:H.numeroDocumento||H.referencia||"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-emerald-600 bg-green-50/30",children:H.entrada>0?`+${$t(H.entrada)}`:"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-rose-600 bg-red-50/30",children:H.salida>0?`-${$t(H.salida)}`:"-"}),r.jsx("td",{className:"px-6 py-3 text-right text-xs text-slate-500 bg-slate-50/50",children:H.stockAnterior!==void 0&&H.stockAnterior!==null?r.jsxs(r.Fragment,{children:[$t(H.stockAnterior)," ",r.jsx("span",{className:"mx-1",children:""})," ",r.jsx("strong",{className:"text-slate-700 text-sm",children:$t(H.balance||0)})]}):r.jsx("strong",{className:"text-slate-700 text-sm",children:$t(H.balance||0)})}),r.jsx("td",{className:"px-6 py-3 text-slate-600",children:H.almacenNombre}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs",children:H.usuario}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs font-mono",children:H.referencia||"-"})]},H.id))]},B)):K.length>0?K.map(B=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-slate-600",children:new Date(B.fechaMovimiento).toLocaleString()}),r.jsx("td",{className:"px-6 py-3 font-medium text-slate-700",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B.entrada>0?"bg-emerald-100 text-emerald-800":B.salida>0?"bg-rose-100 text-rose-800":"bg-slate-100 text-slate-800"}`,children:B.tipoMovimiento})}),r.jsx("td",{className:"px-6 py-3 text-slate-500 font-mono text-xs",children:B.numeroDocumento||B.referencia||"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-emerald-600 bg-green-50/30",children:B.entrada>0?`+${$t(B.entrada)}`:"-"}),r.jsx("td",{className:"px-6 py-3 text-right font-medium text-rose-600 bg-red-50/30",children:B.salida>0?`-${$t(B.salida)}`:"-"}),r.jsx("td",{className:"px-6 py-3 text-right text-xs text-slate-500 bg-slate-50/50",children:B.stockAnterior!==void 0&&B.stockAnterior!==null?r.jsxs(r.Fragment,{children:[$t(B.stockAnterior)," ",r.jsx("span",{className:"mx-1",children:""})," ",r.jsx("strong",{className:"text-slate-700 text-sm",children:$t(B.balance||0)})]}):r.jsx("strong",{className:"text-slate-700 text-sm",children:$t(B.balance||0)})}),r.jsx("td",{className:"px-6 py-3 text-slate-600",children:B.almacenNombre}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs",children:B.usuario}),r.jsx("td",{className:"px-6 py-3 text-slate-500 text-xs font-mono",children:B.referencia||"-"})]},B.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center text-slate-500",children:"No se encontraron movimientos para el rango seleccionado"})})})]})})]})]})},NB=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(!1),[o,l]=x.useState(!1),[c,f]=x.useState({id:0,nombre:"",descripcion:"",activo:!0});x.useEffect(()=>{h()},[]);const h=async()=>{s(!0);try{const j=await kc();n(j)}catch(j){console.error(j)}finally{s(!1)}},u=j=>{f(j),l(!0)},m=()=>{f({id:0,nombre:"",descripcion:"",activo:!0}),l(!0)},p=async j=>{if(window.confirm("Est seguro de eliminar este nivel de precio?"))try{await OF(j),h()}catch(y){console.error(y),alert("Error al eliminar")}},v=async j=>{j.preventDefault();try{c.id?await DF(c.id,c):await Sj(c),l(!1),h()}catch(y){console.error(y),alert("Error al guardar")}};return r.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",onClick:()=>e("/inventario/lista-precios"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Niveles de Precio"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"Administre los niveles de precios disponibles para los artculos."})]})]}),r.jsxs(re,{onClick:m,className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(_t,{className:"h-4 w-4 mr-2"}),"Nuevo Nivel"]})]}),r.jsx(Be,{children:r.jsx(Pt,{className:"p-0",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(ce,{children:"Nombre"}),r.jsx(ce,{children:"Descripcin"}),r.jsx(ce,{className:"w-24 text-center",children:"Activo"}),r.jsx(ce,{className:"w-32 text-center",children:"Acciones"})]})}),r.jsx(Bt,{children:a?r.jsx(Me,{children:r.jsx(G,{colSpan:4,className:"text-center py-8",children:"Cargando..."})}):t.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:4,className:"text-center py-8 text-gray-500",children:"No hay niveles configurados"})}):t.map(j=>r.jsxs(Me,{children:[r.jsx(G,{className:"font-medium",children:j.nombre}),r.jsx(G,{children:j.descripcion}),r.jsx(G,{className:"text-center",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${j.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.activo?"Activo":"Inactivo"})}),r.jsx(G,{className:"text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>u(j),children:r.jsx(wl,{className:"h-4 w-4 text-blue-600"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>p(j.id),children:r.jsx(Qt,{className:"h-4 w-4 text-red-600"})})]})})]},j.id))})]})})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold",children:c.id?"Editar Nivel":"Nuevo Nivel"}),r.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(It,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx(ye,{value:c.nombre,onChange:j=>f({...c,nombre:j.target.value}),placeholder:"Ej: Mayorista",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),r.jsx(ye,{value:c.descripcion||"",onChange:j=>f({...c,descripcion:j.target.value}),placeholder:"Opcional"})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx("input",{type:"checkbox",id:"activeCheck",checked:c.activo,onChange:j=>f({...c,activo:j.target.checked}),className:"h-4 w-4 text-hd-orange border-gray-300 rounded focus:ring-hd-orange"}),r.jsx("label",{htmlFor:"activeCheck",className:"text-sm font-medium text-gray-700",children:"Activo"})]}),r.jsxs("div",{className:"pt-4 flex justify-end gap-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),r.jsx(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600",children:"Guardar"})]})]})]})})]})},SB="http://localhost:5006/api",CB=async()=>{const e=await fetch(`${SB}/ReportesInventario/Valoracion`);if(!e.ok)throw new Error(`Failed to get valuation: ${e.status}`);return e.json()},kB=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState("");x.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const u=await CB();t(u)}catch(u){console.error("Error loading valuation:",u)}finally{a(!1)}},c=e.filter(u=>(u.numeroArticulo||"").toLowerCase().includes(s.toLowerCase())||(u.descripcion||"").toLowerCase().includes(s.toLowerCase())),f=c.reduce((u,m)=>({promedio:u.promedio+m.totalPromedio,fifo:u.fifo+m.totalFIFO,lifo:u.lifo+m.totalLIFO,estandar:u.estandar+m.totalEstandar}),{promedio:0,fifo:0,lifo:0,estandar:0}),h=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Valoracin de Inventario"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Comparativa de mtodos de valuacin (Promedio, FIFO, LIFO, Estndar)."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"bg-blue-50 border-blue-200",children:r.jsx(Pt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Costo Promedio"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h(f.promedio)})]}),r.jsx(as,{className:"text-blue-400",size:24})]})})}),r.jsx(Be,{className:"bg-green-50 border-green-200",children:r.jsx(Pt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"FIFO (PEPS)"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:h(f.fifo)})]}),r.jsx(Qo,{className:"text-green-400",size:24})]})})}),r.jsx(Be,{className:"bg-orange-50 border-orange-200",children:r.jsx(Pt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-600",children:"LIFO (UEPS)"}),r.jsx("p",{className:"text-2xl font-bold text-orange-900",children:h(f.lifo)})]}),r.jsx(kF,{className:"text-orange-400",size:24})]})})}),r.jsx(Be,{className:"bg-gray-50 border-gray-200",children:r.jsx(Pt,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Costo Estndar"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h(f.estandar)})]}),r.jsx(Wr,{className:"text-gray-400",size:24})]})})})]}),r.jsxs(Be,{children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx(ye,{placeholder:"Buscar por cdigo o descripcin...",value:s,onChange:u=>o(u.target.value),className:"max-w-md"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsxs(Ut,{children:[r.jsxs(Me,{children:[r.jsx(ce,{rowSpan:2,children:"Artculo"}),r.jsx(ce,{rowSpan:2,className:"text-right",children:"Stock"}),r.jsx(ce,{colSpan:2,className:"text-center bg-blue-50/50",children:"Promedio"}),r.jsx(ce,{colSpan:2,className:"text-center bg-green-50/50",children:"FIFO"}),r.jsx(ce,{colSpan:2,className:"text-center bg-orange-50/50",children:"LIFO"}),r.jsx(ce,{colSpan:2,className:"text-center bg-gray-50/50",children:"Estndar"})]}),r.jsxs(Me,{children:[r.jsx(ce,{className:"text-right bg-blue-50/30 text-xs",children:"Costo"}),r.jsx(ce,{className:"text-right bg-blue-50/30 text-xs font-bold",children:"Total"}),r.jsx(ce,{className:"text-right bg-green-50/30 text-xs",children:"Costo"}),r.jsx(ce,{className:"text-right bg-green-50/30 text-xs font-bold",children:"Total"}),r.jsx(ce,{className:"text-right bg-orange-50/30 text-xs",children:"Costo"}),r.jsx(ce,{className:"text-right bg-orange-50/30 text-xs font-bold",children:"Total"}),r.jsx(ce,{className:"text-right bg-gray-50/30 text-xs",children:"Costo"}),r.jsx(ce,{className:"text-right bg-gray-50/30 text-xs font-bold",children:"Total"})]})]}),r.jsx(Bt,{children:n?r.jsx(Me,{children:r.jsx(G,{colSpan:10,className:"text-center py-8",children:"Cargando valoracin..."})}):c.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:10,className:"text-center py-8 text-gray-500",children:"No se encontraron artculos con existencia."})}):c.map(u=>r.jsxs(Me,{children:[r.jsxs(G,{children:[r.jsx("div",{className:"font-medium",children:u.numeroArticulo}),r.jsx("div",{className:"text-xs text-gray-500",children:u.descripcion})]}),r.jsx(G,{className:"text-right font-medium",children:u.stockActual.toFixed(2)}),r.jsx(G,{className:"text-right bg-blue-50/10 text-xs",children:h(u.costoPromedio)}),r.jsx(G,{className:"text-right bg-blue-50/10 font-medium text-blue-700",children:h(u.totalPromedio)}),r.jsx(G,{className:"text-right bg-green-50/10 text-xs",children:h(u.costoFIFO)}),r.jsx(G,{className:"text-right bg-green-50/10 font-medium text-green-700",children:h(u.totalFIFO)}),r.jsx(G,{className:"text-right bg-orange-50/10 text-xs",children:h(u.costoLIFO)}),r.jsx(G,{className:"text-right bg-orange-50/10 font-medium text-orange-700",children:h(u.totalLIFO)}),r.jsx(G,{className:"text-right bg-gray-50/10 text-xs",children:h(u.costoEstandar)}),r.jsx(G,{className:"text-right bg-gray-50/10 font-medium text-gray-700",children:h(u.totalEstandar)})]},u.id))})]})})]})]})},PB="http://localhost:5006/api",EB=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const B=await fetch(`${PB}/ReportesInventario/Transacciones`);if(!B.ok)throw new Error("Error fetching report");const R=await B.json();t(R)}catch(B){console.error(B)}finally{a(!1)}})()},[]);const s=e.reduce((K,B)=>K+B.montoDOP,0),o=e.reduce((K,B)=>K+B.montoUSD,0),[l,c]=x.useState({key:"fecha",direction:"desc"}),[f,h]=x.useState({}),[u,m]=x.useState({}),[p,v]=x.useState({}),[j,y]=x.useState(null),[b,N]=x.useState(""),[P,A]=x.useState({fecha:150,documento:120,proveedor:250,monedaOriginal:90,montoOriginal:120,montoDOP:120,montoUSD:120}),k=Object.values(P).reduce((K,B)=>K+B,0),I=(K,B)=>{A(R=>({...R,[K]:B}))},E=K=>{let B="asc";l.key===K&&l.direction==="asc"&&(B="desc"),c({key:K,direction:B})},O=(K,B)=>{B.stopPropagation(),y(j===K?null:K)},C=(K,B)=>{h(R=>({...R,[K]:B}))},M=(K,B,R)=>{v(H=>({...H,[K]:{...H[K]||{min:"",max:""},[B]:R}}))},F=(K,B)=>{m(R=>{const H=R[K]||[];return H.includes(B)?{...R,[K]:H.filter(Y=>Y!==B)}:{...R,[K]:[...H,B]}})},V=(K,B,R)=>{m(H=>{let ee=[...H[K]||[]];const me=T(),De=(ue,ke)=>{if(!ue.children){Se.push(ke);return}Object.keys(ue.children).forEach(se=>{De(ue.children[se],ke?`${ke}/${se}`:se)})},Se=[];if(B==="")return R?{...H,[K]:[]}:(De(me,""),{...H,[K]:Se});const We=B.split("/").filter(Boolean);let pe=me;for(const ue of We)if(pe=pe?.children?.[ue],!pe)break;if(pe){const ue=[],ke=(se,fe)=>{if(!se.children){ue.push(fe);return}Object.keys(se.children).forEach(Te=>{ke(se.children[Te],`${fe}/${Te}`)})};ke(pe,B),R?ee=ee.filter(se=>!ue.includes(se)):ue.forEach(se=>{ee.includes(se)||ee.push(se)})}return{...H,[K]:ee}})},T=()=>{const K={children:{}};return e.forEach(B=>{const R=new Date(B.fecha),H=String(R.getFullYear()),Y=R.toLocaleDateString("es-DO",{month:"long"}),ee=String(R.getDate());K.children[H]||(K.children[H]={children:{}}),K.children[H].children[Y]||(K.children[H].children[Y]={children:{}}),K.children[H].children[Y].children[ee]||(K.children[H].children[Y].children[ee]={count:0}),K.children[H].children[Y].children[ee].count++}),K},L=K=>{const B=e.map(R=>String(R[K]||""));return[...new Set(B)].sort()},U=K=>K?new Date(K).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",q=(()=>{let K=[...e];return b&&(K=K.filter(B=>Object.keys(B).some(R=>(R==="fecha"?U(B[R]):String(B[R])).toLowerCase().includes(b.toLowerCase())))),Object.keys(f).forEach(B=>{f[B]&&(K=K.filter(R=>{if(B==="fecha"){const H=new Date(R[B]);return`${H.getFullYear()} ${H.toLocaleDateString("es-DO",{month:"long"})} ${H.getDate()}`.toLowerCase().includes(f[B].toLowerCase())}return String(R[B]||"").toLowerCase().includes(f[B].toLowerCase())}))}),Object.keys(u).forEach(B=>{u[B]&&u[B].length>0&&(K=K.filter(R=>{if(B==="fecha"){const H=new Date(R[B]),Y=`${H.getFullYear()}/${H.toLocaleDateString("es-DO",{month:"long"})}/${H.getDate()}`;return u[B].includes(Y)}return u[B].includes(String(R[B]))}))}),Object.keys(p).forEach(B=>{const{min:R,max:H}=p[B];R!==""&&(K=K.filter(Y=>(Y[B]||0)>=parseFloat(R))),H!==""&&(K=K.filter(Y=>(Y[B]||0)<=parseFloat(H)))}),l.key&&K.sort((B,R)=>{const H=B[l.key],Y=R[l.key];return H<Y?l.direction==="asc"?-1:1:H>Y?l.direction==="asc"?1:-1:0}),K})(),W=T(),z=()=>{h({}),m({}),v({}),N("")};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Reporte de Compras Multi-Moneda"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Visualizacin de compras en Pesos y Dlares con filtros avanzados."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Be,{className:"bg-blue-50 border-blue-100",children:r.jsxs("div",{className:"p-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total en Pesos (DOP)"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["RD$ ",s.toLocaleString("es-DO",{minimumFractionDigits:2})]})]})}),r.jsx(Be,{className:"bg-green-50 border-green-100",children:r.jsxs("div",{className:"p-4",children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total en Dlares (USD)"}),r.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["US$ ",o.toLocaleString("en-US",{minimumFractionDigits:2})]})]})})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row justify-between items-center pb-4",children:[r.jsx(vt,{children:"Detalle de Transacciones"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(Object.keys(f).length>0||Object.keys(u).some(K=>Array.isArray(u[K])&&u[K].length>0)||Object.keys(p).some(K=>p[K].min!==""||p[K].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:z,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(It,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar...",className:"pl-9",value:b,onChange:K=>N(K.target.value)})]}),r.jsxs(re,{variant:"outline",size:"sm",children:[r.jsx(yj,{className:"mr-2 h-4 w-4"})," Exportar"]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(zt,{className:"table-fixed",style:{width:k},children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(qi,{label:"Fecha",field:"fecha",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="fecha",filterValue:f.fecha,onFilterChange:C,dateTree:W,selectedValues:u.fecha,onTreeToggle:V,width:P.fecha,onResize:I}),r.jsx(qi,{label:"Documento",field:"documento",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="documento",filterValue:f.documento,onFilterChange:C,width:P.documento,onResize:I}),r.jsx(qi,{label:"Proveedor",field:"proveedor",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="proveedor",filterValue:f.proveedor,onFilterChange:C,uniqueValues:L("proveedor"),selectedValues:u.proveedor,onValueToggle:F,width:P.proveedor,onResize:I}),r.jsx(qi,{label:"Moneda Orig",field:"monedaOriginal",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="monedaOriginal",filterValue:f.monedaOriginal,onFilterChange:C,uniqueValues:L("monedaOriginal"),selectedValues:u.monedaOriginal,onValueToggle:F,width:P.monedaOriginal,onResize:I}),r.jsx(qi,{label:"Monto Orig",field:"montoOriginal",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="montoOriginal",numericValue:p.montoOriginal,onNumericFilterChange:M,width:P.montoOriginal,onResize:I,className:"text-right"}),r.jsx(qi,{label:"Monto DOP",field:"montoDOP",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="montoDOP",numericValue:p.montoDOP,onNumericFilterChange:M,width:P.montoDOP,onResize:I,className:"text-right bg-blue-50/50 text-blue-800"}),r.jsx(qi,{label:"Monto USD",field:"montoUSD",sortConfig:l,onSort:E,onFilter:O,showFilter:j==="montoUSD",numericValue:p.montoUSD,onNumericFilterChange:M,width:P.montoUSD,onResize:I,className:"text-right bg-green-50/50 text-green-800"})]})}),r.jsx(Bt,{children:n?r.jsx(Me,{children:r.jsx(G,{colSpan:7,className:"text-center py-8",children:"Cargando..."})}):q.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No hay transacciones."})}):q.map(K=>r.jsxs(Me,{className:"hover:bg-gray-50",children:[r.jsx(G,{children:new Date(K.fecha).toLocaleDateString()}),r.jsx(G,{className:"font-mono text-xs",children:K.documento}),r.jsx(G,{className:"font-medium text-gray-700",children:K.proveedor}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${K.monedaOriginal==="USD"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:K.monedaOriginal})}),r.jsxs(G,{style:{width:P.montoOriginal},className:"text-right font-medium",children:[K.monedaOriginal==="USD"?"$":"RD$"," ",K.montoOriginal?.toLocaleString(void 0,{minimumFractionDigits:2})]}),r.jsx(G,{style:{width:P.montoDOP},className:"text-right font-bold text-blue-700 bg-blue-50/30",children:K.montoDOP?.toLocaleString("es-DO",{minimumFractionDigits:2})}),r.jsx(G,{style:{width:P.montoUSD},className:"text-right font-bold text-green-700 bg-green-50/30",children:K.montoUSD?.toLocaleString("en-US",{minimumFractionDigits:2})})]},K.id))})]})})]})]})},qi=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y="",width:b,onResize:N})=>{const P=n.key===t,A=h!==void 0,k=v!==void 0;l||m&&m.length>0||A&&(f.min!==""||f.max);const I=E=>{E.preventDefault(),E.stopPropagation();const O=E.pageX,C=b,M=V=>{const T=Math.max(50,C+(V.pageX-O));N(t,T)},F=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",F)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",F)};return r.jsxs(ce,{className:`relative group p-0 ${y}`,style:b?{width:`${b}px`,minWidth:`${b}px`,maxWidth:`${b}px`}:{},children:[r.jsx("div",{className:`flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors ${N?"pr-2":""}`,onClick:()=>a(t),children:r.jsxs("div",{className:"flex items-center space-x-1 overflow-hidden",children:[r.jsx("span",{className:"font-bold text-gray-700 truncate",children:e}),P?n.direction==="asc"?r.jsx(Ln,{size:14,className:"text-hd-orange"}):r.jsx(Kr,{size:14,className:"text-hd-orange"}):r.jsx(Bu,{size:14,className:"text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),N&&r.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-hd-orange z-10",onMouseDown:I,onClick:E=>E.stopPropagation()}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Ln,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms antiguo":"Ascendente"]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Kr,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms reciente":"Descendente"]})]}),r.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:A?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ye,{type:"number",placeholder:"Min",value:f.min,onChange:E=>h(t,"min",E.target.value),className:"h-8 text-xs font-mono",autoFocus:!0}),r.jsx(ye,{type:"number",placeholder:"Max",value:f.max,onChange:E=>h(t,"max",E.target.value),className:"h-8 text-xs font-mono"})]}):r.jsx(ye,{placeholder:"Buscar...",value:l,onChange:E=>c(t,E.target.value),className:"h-8 text-xs",autoFocus:!0})}),r.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:k?r.jsx(VO,{tree:v,selectedPaths:m,onToggle:(E,O)=>j(t,E,O),allLeafPaths:(()=>{const E=[],O=(C,M)=>{if(!C.children){E.push(M);return}Object.keys(C.children).forEach(F=>O(C.children[F],M?`${M}/${F}`:F))};return O(v,""),E})()}):u.length>0?r.jsx("div",{className:"space-y-1",children:u.map(E=>r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group",onClick:()=>p(t,E),children:[r.jsx("input",{type:"checkbox",checked:m.includes(E),readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs text-gray-600 truncate",children:E})]},E))}):null}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border-t border-gray-100",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px]",onClick:()=>s(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] text-hd-orange",onClick:()=>{A?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(k?m.forEach(E=>j(t,E,!0)):m.forEach(E=>p(t,E))))},children:"Limpiar"})]})]})]})},VO=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s="",allLeafPaths:o=[]})=>{const[l,c]=x.useState(!0),f=Object.keys(e.children||{}).sort((u,m)=>m.localeCompare(u)),h=(u,m)=>{const p=[],v=(j,y)=>{if(!j.children){p.push(y);return}Object.keys(j.children).forEach(b=>v(j.children[b],`${y}/${b}`))};return v(u,m),p};return r.jsx("div",{className:a>0?"ml-4 pt-1":"",children:f.map(u=>{const m=s?`${s}/${u}`:u,p=e.children[u],v=!p.children,j=v?[m]:h(p,m),y=j.every(N=>t.includes(N)),b=j.some(N=>t.includes(N));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-50 rounded cursor-pointer group",onClick:()=>n(m,y),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",onClick:N=>{N.stopPropagation(),c(!l)},children:!v&&(l?r.jsx(Kr,{size:10}):r.jsx(ArrowRight,{size:10}))}),r.jsx("input",{type:"checkbox",checked:y,ref:N=>{N&&(N.indeterminate=b&&!y)},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",onClick:N=>N.stopPropagation()}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-700 select-none",children:u})]}),l&&!v&&r.jsx(VO,{tree:p,selectedPaths:t,onToggle:n,depth:a+1,path:m})]},u)})})},AB=()=>{const{id:e}=Ts(),[t,n]=x.useState(null),[a,s]=x.useState(!0);if(x.useEffect(()=>{e&&(async()=>{try{const f=await sb(e);n(f)}catch(f){console.error("Error loading purchase for print:",f)}finally{s(!1)}})()},[e]),a)return r.jsx("div",{className:"p-8 text-center",children:"Cargando documento..."});if(!t)return r.jsx("div",{className:"p-8 text-center text-red-600",children:"No se encontr el documento."});const o=(c,f="DOP")=>new Intl.NumberFormat("es-DO",{style:"currency",currency:f}).format(c),l=c=>{switch(c){case"OrdenCompra":return"ORDEN DE COMPRA";case"Recepcion":return"RECEPCIN DE MERCANCA";case"Factura":return"FACTURA DE COMPRA";default:return"DOCUMENTO DE COMPRA"}};return r.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-8 print:p-0 text-gray-900 font-sans",children:[r.jsx("div",{className:"mb-6 flex justify-end print:hidden",children:r.jsx("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 font-medium",children:" Imprimir Documento"})}),r.jsxs("div",{className:"border-b-2 border-gray-800 pb-4 mb-6 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:l(t.tipoDocumento)}),r.jsx("p",{className:"text-lg text-gray-600 font-medium mt-1",children:t.numeroCompra}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[r.jsxs("p",{children:["Estado: ",r.jsx("span",{className:"font-semibold uppercase",children:t.estado})]}),t.documentoReferenciaNumero&&r.jsxs("p",{children:["Ref: ",t.documentoReferenciaNumero]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"CRONO POS"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Av. Principal #123"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Santo Domingo, SD"}),r.jsx("p",{className:"text-sm text-gray-600",children:"RNC: 1-01-00000-0"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Tel: (809) 555-0123"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Proveedor"}),r.jsx("p",{className:"font-bold text-lg",children:t.proveedorNombre}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ID: ",t.proveedorId]})]}),r.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Detalles"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsx("div",{className:"text-gray-600",children:"Fecha Emisin:"}),r.jsx("div",{className:"font-medium text-right",children:new Date(t.fechaCompra).toLocaleDateString()}),r.jsx("div",{className:"text-gray-600",children:"Trminos Pago:"}),r.jsx("div",{className:"font-medium text-right",children:t.terminosPago||"Contado"}),r.jsx("div",{className:"text-gray-600",children:"Referencia Prov:"}),r.jsx("div",{className:"font-medium text-right",children:t.referenciaProveedor||"-"}),r.jsx("div",{className:"text-gray-600",children:"Moneda:"}),r.jsx("div",{className:"font-medium text-right",children:t.monedaCodigo||"DOP"})]})]})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-gray-800",children:[r.jsx("th",{className:"py-2 text-left font-bold text-sm text-gray-700",children:"CDIGO"}),r.jsx("th",{className:"py-2 text-left font-bold text-sm text-gray-700",children:"DESCRIPCIN"}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"CANT."}),r.jsx("th",{className:"py-2 text-center font-bold text-sm text-gray-700",children:"U.M."}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"PRECIO"}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"TOTAL"})]})}),r.jsx("tbody",{children:t.detalles.map((c,f)=>r.jsxs("tr",{className:"border-b border-gray-200 text-sm",children:[r.jsx("td",{className:"py-2 font-mono text-gray-600",children:c.numeroArticulo}),r.jsx("td",{className:"py-2",children:c.descripcion}),r.jsx("td",{className:"py-2 text-right font-medium",children:c.cantidad}),r.jsx("td",{className:"py-2 text-center text-gray-500 text-xs",children:c.unidadMedida}),r.jsx("td",{className:"py-2 text-right",children:o(c.costoUnitario)}),r.jsx("td",{className:"py-2 text-right font-bold",children:o(c.totalLinea)})]},f))})]})}),r.jsx("div",{className:"flex justify-end mb-12",children:r.jsxs("div",{className:"w-64",children:[r.jsxs("div",{className:"flex justify-between py-1 text-gray-600 text-sm",children:[r.jsx("span",{children:"Subtotal:"}),r.jsx("span",{children:o(t.subtotal)})]}),r.jsxs("div",{className:"flex justify-between py-1 text-gray-600 text-sm",children:[r.jsx("span",{children:"Impuestos:"}),r.jsx("span",{children:o(t.impuestos)})]}),r.jsx("div",{className:"border-t border-gray-400 my-2"}),r.jsxs("div",{className:"flex justify-between py-1 text-xl font-bold text-gray-900",children:[r.jsx("span",{children:"TOTAL:"}),r.jsx("span",{children:o(t.total)})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-20 pt-12 mt-12 border-t border-gray-100 print:mt-24",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Autorizado Por"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Recibido Conforme"})]})]})]})},IB=()=>{const[e,t]=x.useState({ventasHoy:12500,ventasMes:458e3,comprasMes:215e3,inventarioValor:125e4,topProductos:[{nombre:"Cemento Gris 42.5kg",cantidad:450,total:225e3},{nombre:"Varilla Corrugada 3/8",cantidad:1200,total:36e4},{nombre:'Block 6"',cantidad:3e3,total:105e3},{nombre:"Pintura Blanca 5gal",cantidad:85,total:34e4},{nombre:"Arena Lavada (m3)",cantidad:120,total:18e4}],ventasPorDia:[{dia:"Lun",valor:45e3},{dia:"Mar",valor:52e3},{dia:"Mie",valor:38e3},{dia:"Jue",valor:65e3},{dia:"Vie",valor:89e3},{dia:"Sab",valor:95e3},{dia:"Dom",valor:25e3}]}),[n,a]=x.useState([]),[s,o]=x.useState(!0);x.useEffect(()=>{setTimeout(()=>{const q=Array.from({length:50},(W,z)=>({id:z+1,fecha:new Date(2025,Math.floor(Math.random()*12),Math.floor(Math.random()*28)+1).toISOString(),tipo:Math.random()>.5?"Venta":"Compra",entidad:Math.random()>.5?`Cliente ${z}`:`Proveedor ${z}`,monto:Math.floor(Math.random()*5e4)+1e3,estado:Math.random()>.8?"Pendiente":"Completado"}));a(q),o(!1)},1e3)},[]);const l=q=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:0}).format(q),[c,f]=x.useState({key:"fecha",direction:"desc"}),[h,u]=x.useState({}),[m,p]=x.useState({}),[v,j]=x.useState({}),[y,b]=x.useState(null),[N,P]=x.useState(""),A=q=>{let W="asc";c.key===q&&c.direction==="asc"&&(W="desc"),f({key:q,direction:W})},k=(q,W)=>{W.stopPropagation(),b(y===q?null:q)},I=(q,W)=>{u(z=>({...z,[q]:W}))},E=(q,W,z)=>{j(K=>({...K,[q]:{...K[q]||{min:"",max:""},[W]:z}}))},O=(q,W)=>{p(z=>{const K=z[q]||[];return K.includes(W)?{...z,[q]:K.filter(B=>B!==W)}:{...z,[q]:[...K,W]}})},C=(q,W,z)=>{p(K=>{let R=[...K[q]||[]];const H=M(),Y=(Se,We)=>{if(!Se.children){ee.push(We);return}Object.keys(Se.children).forEach(pe=>{Y(Se.children[pe],We?`${We}/${pe}`:pe)})},ee=[];if(W==="")return z?{...K,[q]:[]}:(Y(H,""),{...K,[q]:ee});const me=W.split("/").filter(Boolean);let De=H;for(const Se of me)if(De=De?.children?.[Se],!De)break;if(De){const Se=[],We=(pe,ue)=>{if(!pe.children){Se.push(ue);return}Object.keys(pe.children).forEach(ke=>{We(pe.children[ke],`${ue}/${ke}`)})};We(De,W),z?R=R.filter(pe=>!Se.includes(pe)):Se.forEach(pe=>{R.includes(pe)||R.push(pe)})}return{...K,[q]:R}})},M=()=>{const q={children:{}};return n.forEach(W=>{const z=new Date(W.fecha),K=String(z.getFullYear()),B=z.toLocaleDateString("es-DO",{month:"long"}),R=String(z.getDate());q.children[K]||(q.children[K]={children:{}}),q.children[K].children[B]||(q.children[K].children[B]={children:{}}),q.children[K].children[B].children[R]||(q.children[K].children[B].children[R]={count:0}),q.children[K].children[B].children[R].count++}),q},F=q=>{const W=n.map(z=>String(z[q]||""));return[...new Set(W)].sort()},V=q=>q?new Date(q).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",L=(()=>{let q=[...n];return N&&(q=q.filter(W=>Object.keys(W).some(z=>(z==="fecha"?V(W[z]):String(W[z])).toLowerCase().includes(N.toLowerCase())))),Object.keys(h).forEach(W=>{h[W]&&(q=q.filter(z=>{if(W==="fecha"){const K=new Date(z[W]);return`${K.getFullYear()} ${K.toLocaleDateString("es-DO",{month:"long"})} ${K.getDate()}`.toLowerCase().includes(h[W].toLowerCase())}return String(z[W]||"").toLowerCase().includes(h[W].toLowerCase())}))}),Object.keys(m).forEach(W=>{m[W]&&m[W].length>0&&(q=q.filter(z=>{if(W==="fecha"){const K=new Date(z[W]),B=`${K.getFullYear()}/${K.toLocaleDateString("es-DO",{month:"long"})}/${K.getDate()}`;return m[W].includes(B)}return m[W].includes(String(z[W]))}))}),Object.keys(v).forEach(W=>{const{min:z,max:K}=v[W];z!==""&&(q=q.filter(B=>(B[W]||0)>=parseFloat(z))),K!==""&&(q=q.filter(B=>(B[W]||0)<=parseFloat(K)))}),c.key&&q.sort((W,z)=>{const K=W[c.key],B=z[c.key];return K<B?c.direction==="asc"?-1:1:K>B?c.direction==="asc"?1:-1:0}),q})(),U=M(),J=()=>{u({}),p({}),j({}),P("")};return r.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Manager Dashboard"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Visin general del rendimiento del negocio."})]}),r.jsxs("div",{className:"flex bg-white rounded-lg border p-1 shadow-sm",children:[r.jsx("button",{className:"px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded",children:"Hoy"}),r.jsx("button",{className:"px-3 py-1 text-sm font-medium bg-gray-100 text-gray-900 rounded shadow-sm",children:"Este Mes"}),r.jsx("button",{className:"px-3 py-1 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded",children:"Ao"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx($h,{title:"Ventas del Mes",value:l(e.ventasMes),icon:Wr,trend:"+12.5%",trendUp:!0,color:"green"}),r.jsx($h,{title:"Compras del Mes",value:l(e.comprasMes),icon:oo,trend:"+5.2%",trendUp:!0,color:"blue"}),r.jsx($h,{title:"Valor Inventario",value:l(e.inventarioValor),icon:An,trend:"-2.1%",trendUp:!1,color:"orange"}),r.jsx($h,{title:"Nuevos Clientes",value:"24",icon:_r,trend:"+4",trendUp:!0,color:"purple"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(Be,{className:"lg:col-span-2",children:[r.jsx(gt,{children:r.jsx(vt,{children:"Comportamiento de Ventas (Semana Actual)"})}),r.jsx(Pt,{children:r.jsx("div",{className:"h-64 flex items-end justify-between space-x-2 pt-6",children:e.ventasPorDia.map((q,W)=>{const z=q.valor/1e5*100;return r.jsxs("div",{className:"flex flex-col items-center flex-1 group relative",children:[r.jsx("div",{className:"absolute bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-bold bg-gray-800 text-white px-2 py-1 rounded",children:l(q.valor)}),r.jsx("div",{className:"w-full bg-blue-500 rounded-t-md hover:bg-blue-600 transition-all duration-300",style:{height:`${z}%`,opacity:.7+W*.05}}),r.jsx("span",{className:"text-xs font-medium text-gray-500 mt-2",children:q.dia})]},W)})})})]}),r.jsxs(Be,{children:[r.jsx(gt,{children:r.jsx(vt,{children:"Top Productos"})}),r.jsx(Pt,{children:r.jsx("div",{className:"space-y-4",children:e.topProductos.map((q,W)=>r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 last:border-0 pb-3 last:pb-0",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-500 text-xs",children:W+1}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate max-w-[150px]",children:q.nombre}),r.jsxs("p",{className:"text-xs text-gray-500",children:[q.cantidad," unidades"]})]})]}),r.jsx("span",{className:"text-sm font-bold text-gray-700",children:l(q.total)})]},W))})})]})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[r.jsx(vt,{children:"Transacciones Recientes"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(Object.keys(h).length>0||Object.keys(m).some(q=>Array.isArray(m[q])&&m[q].length>0)||Object.keys(v).some(q=>v[q].min!==""||v[q].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:J,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(It,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar transaccin...",className:"pl-9",value:N,onChange:q=>P(q.target.value)})]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[r.jsx(Gd,{label:"Fecha",field:"fecha",sortConfig:c,onSort:A,onFilter:k,showFilter:y==="fecha",filterValue:h.fecha,onFilterChange:I,dateTree:U,selectedValues:m.fecha,onTreeToggle:C}),r.jsx(Gd,{label:"Tipo",field:"tipo",sortConfig:c,onSort:A,onFilter:k,showFilter:y==="tipo",filterValue:h.tipo,onFilterChange:I,uniqueValues:F("tipo"),selectedValues:m.tipo,onValueToggle:O}),r.jsx(Gd,{label:"Entidad",field:"entidad",sortConfig:c,onSort:A,onFilter:k,showFilter:y==="entidad",filterValue:h.entidad,onFilterChange:I,uniqueValues:F("entidad"),selectedValues:m.entidad,onValueToggle:O}),r.jsx(Gd,{label:"Monto",field:"monto",sortConfig:c,onSort:A,onFilter:k,showFilter:y==="monto",numericValue:v.monto,onNumericFilterChange:E,className:"text-right"}),r.jsx(Gd,{label:"Estado",field:"estado",sortConfig:c,onSort:A,onFilter:k,showFilter:y==="estado",filterValue:h.estado,onFilterChange:I,uniqueValues:F("estado"),selectedValues:m.estado,onValueToggle:O})]})}),r.jsx(Bt,{children:s?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8",children:"Cargando..."})}):L.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No se encontraron registros."})}):L.map(q=>r.jsxs(Me,{className:"hover:bg-gray-50",children:[r.jsx(G,{className:"text-gray-600",children:new Date(q.fecha).toLocaleDateString("es-DO")}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${q.tipo==="Venta"?"bg-green-50 text-green-700":"bg-blue-50 text-blue-700"}`,children:q.tipo})}),r.jsx(G,{className:"font-medium text-gray-900",children:q.entidad}),r.jsx(G,{className:"text-right font-medium",children:l(q.monto)}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.estado==="Completado"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:q.estado})})]},q.id))})]})})]})]})},$h=({title:e,value:t,icon:n,trend:a,trendUp:s,color:o})=>{const l={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600"};return r.jsx(Be,{className:"transform transition-all hover:-translate-y-1 duration-200 shadow-sm hover:shadow-md",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-2",children:t})]}),r.jsx("div",{className:`p-2 rounded-lg ${l[o]}`,children:r.jsx(n,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[s?r.jsx(gu,{className:"h-4 w-4 text-green-500 mr-1"}):r.jsx(dD,{className:"h-4 w-4 text-red-500 mr-1"}),r.jsx("span",{className:s?"text-green-500 font-medium":"text-red-500 font-medium",children:a}),r.jsx("span",{className:"text-gray-400 ml-2",children:"vs mes anterior"})]})]})})},Gd=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y=""})=>{const b=n.key===t,N=h!==void 0,P=v!==void 0,A=l||m&&m.length>0||N&&(f.min!==""||f.max!=="");return r.jsxs(ce,{className:`relative group p-0 ${y}`,children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>a(t),children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"font-bold text-gray-700",children:e}),b?n.direction==="asc"?r.jsx(Ln,{size:14,className:"text-hd-orange"}):r.jsx(Kr,{size:14,className:"text-hd-orange"}):r.jsx(Bu,{size:14,className:"text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s&&r.jsx("button",{onClick:k=>s(t,k),className:`p-1 rounded-sm hover:bg-gray-300 transition-colors ${A?"text-hd-orange":"text-gray-400"}`,children:r.jsx(Vu,{size:14,fill:A?"currentColor":"none"})})]}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:k=>k.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Ln,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms antiguo":"Ascendente"]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-medium",onClick:()=>{a(t),s(t,{stopPropagation:()=>{}})},children:[r.jsx(Kr,{size:14,className:"mr-2 text-gray-400"})," ",t==="fecha"?"Ms reciente":"Descendente"]})]}),r.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:N?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ye,{type:"number",placeholder:"Min",value:f.min,onChange:k=>h(t,"min",k.target.value),className:"h-8 text-xs font-mono",autoFocus:!0}),r.jsx(ye,{type:"number",placeholder:"Max",value:f.max,onChange:k=>h(t,"max",k.target.value),className:"h-8 text-xs font-mono"})]}):r.jsx(ye,{placeholder:"Buscar...",value:l,onChange:k=>c(t,k.target.value),className:"h-8 text-xs",autoFocus:!0})}),r.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:P?r.jsx(qO,{tree:v,selectedPaths:m,onToggle:(k,I)=>j(t,k,I),allLeafPaths:(()=>{const k=[],I=(E,O)=>{if(!E.children){k.push(O);return}Object.keys(E.children).forEach(C=>I(E.children[C],O?`${O}/${C}`:C))};return I(v,""),k})()}):u.length>0?r.jsx("div",{className:"space-y-1",children:u.map(k=>r.jsxs("div",{className:"flex items-center px-2 py-1 hover:bg-gray-100 rounded cursor-pointer group",onClick:()=>p(t,k),children:[r.jsx("input",{type:"checkbox",checked:m.includes(k),readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-xs text-gray-600 truncate",children:k})]},k))}):null}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border-t border-gray-100",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px]",onClick:()=>s(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] text-hd-orange",onClick:()=>{N?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(P?m.forEach(k=>j(t,k,!0)):m.forEach(k=>p(t,k))))},children:"Limpiar"})]})]})]})},qO=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s="",allLeafPaths:o=[]})=>{const[l,c]=x.useState(!0),f=Object.keys(e.children||{}).sort((u,m)=>m.localeCompare(u)),h=(u,m)=>{const p=[],v=(j,y)=>{if(!j.children){p.push(y);return}Object.keys(j.children).forEach(b=>v(j.children[b],`${y}/${b}`))};return v(u,m),p};return r.jsx("div",{className:a>0?"ml-4 pt-1":"",children:f.map(u=>{const m=s?`${s}/${u}`:u,p=e.children[u],v=!p.children,j=v?[m]:h(p,m),y=j.every(N=>t.includes(N)),b=j.some(N=>t.includes(N));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-1 hover:bg-gray-50 rounded cursor-pointer group",onClick:()=>n(m,y),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",onClick:N=>{N.stopPropagation(),c(!l)},children:!v&&(l?r.jsx(Kr,{size:10}):r.jsx(ArrowRight,{size:10}))}),r.jsx("input",{type:"checkbox",checked:y,ref:N=>{N&&(N.indeterminate=b&&!y)},readOnly:!0,className:"h-3 w-3 rounded border-gray-300 text-hd-orange focus:ring-hd-orange",onClick:N=>N.stopPropagation()}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-700 select-none",children:u})]}),l&&!v&&r.jsx(qO,{tree:p,selectedPaths:t,onToggle:n,depth:a+1,path:m})]},u)})})},Hd="http://localhost:5006/api",DB=({onClose:e,onSuccess:t,initialProveedorId:n})=>{const[a,s]=x.useState([]),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(!1),[m,p]=x.useState({proveedorId:n||"",tipo:"Credito",fecha:new Date().toISOString().split("T")[0],monedaId:"",tasaCambio:1,monto:0,referencia:"",comentario:"",allocations:{}});x.useEffect(()=>{v()},[]),x.useEffect(()=>{m.proveedorId&&j(m.proveedorId)},[m.proveedorId]);const v=async()=>{try{const[A,k]=await Promise.all([fetch(`${Hd}/Proveedores`),fetch(`${Hd}/Monedas`)]);if(A.ok&&s(await A.json()),k.ok){const I=await k.json();l(I);const E=I.find(O=>O.esFuncional);E&&!m.monedaId&&p(O=>({...O,monedaId:E.id}))}}catch(A){console.error("Error loading initial data:",A)}},j=async A=>{try{const k=await fetch(`${Hd}/Pagos/FacturasPendientes/${A}`);k.ok&&f(await k.json())}catch(k){console.error("Error loading invoices:",k)}},y=async(A,k)=>{if(A==="monedaId"){const I=parseInt(k),E=o.find(C=>C.id===I);let O=1;if(E&&!E.esFuncional)try{const C=new Date().toISOString().split("T")[0],M=await fetch(`${Hd}/Monedas/tasas?monedaId=${I}&fecha=${C}`);M.ok&&(O=(await M.json()).tasa||1)}catch(C){console.error("Error fetching rate:",C)}p(C=>({...C,monedaId:k,tasaCambio:O,allocations:{},monto:0}))}else p(I=>({...I,[A]:k}))},b=(A,k,I)=>{let E=parseFloat(k)||0;m.tipo==="Credito"&&E>I&&(E=I),E<0&&(E=0);const O={...m.allocations,[A]:E};E===0&&delete O[A];const C=()=>{let M=0;return Object.keys(O).forEach(F=>{M+=O[F]}),M};p(M=>({...M,allocations:O,monto:C()}))},N=c.filter(A=>A.monedaId===parseInt(m.monedaId)),P=async A=>{if(A.preventDefault(),m.monto<=0)return alert("El monto debe ser mayor a 0");if(!m.referencia)return alert("Debe ingresar una referencia");u(!0);try{const k={proveedorId:parseInt(m.proveedorId),tipo:m.tipo,monedaId:parseInt(m.monedaId),tasaCambio:parseFloat(m.tasaCambio),monto:m.monto,referencia:m.referencia,comentario:m.comentario,allocations:Object.keys(m.allocations).map(E=>{const O=parseInt(E),C=m.allocations[E];var M=C;return o.find(V=>V.id===parseInt(m.monedaId))?.esFuncional||(M=C*m.tasaCambio),{invoiceId:O,monto:C,montoFuncional:M}})},I=await fetch(`${Hd}/Notas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(I.ok)t(),e();else{const E=await I.json();alert(E.message||"Error al crear la nota")}}catch(k){console.error("Error creating note:",k),alert("Error de conexin")}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:`p-4 flex justify-between items-center text-white ${m.tipo==="Credito"?"bg-blue-600":"bg-red-600"}`,children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[r.jsx(Sr,{className:"mr-2",size:20}),"Nueva Nota de ",m.tipo]}),r.jsx("button",{onClick:e,className:"hover:opacity-80 p-1 rounded transition-colors",children:r.jsx(It,{size:20})})]}),r.jsxs("form",{onSubmit:P,className:"p-6 space-y-4 max-h-[85vh] overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor"}),r.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:ring-blue-500 focus:border-blue-500",value:m.proveedorId,onChange:A=>y("proveedorId",A.target.value),required:!0,disabled:!!n,children:[r.jsx("option",{value:"",children:"Seleccione un proveedor"}),a.map(A=>r.jsx("option",{value:A.id,children:A.razonSocial},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Nota"}),r.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-md",children:[r.jsx("button",{type:"button",className:`flex-1 py-1 text-sm font-medium rounded ${m.tipo==="Credito"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p(A=>({...A,tipo:"Credito"})),children:"Crdito (-)"}),r.jsx("button",{type:"button",className:`flex-1 py-1 text-sm font-medium rounded ${m.tipo==="Debito"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p(A=>({...A,tipo:"Debito"})),children:"Dbito (+)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia / Factura"}),r.jsx(ye,{placeholder:"NC-001",value:m.referencia,onChange:A=>y("referencia",A.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),r.jsx("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:ring-blue-500 focus:border-blue-500",value:m.monedaId,onChange:A=>y("monedaId",A.target.value),children:o.map(A=>r.jsx("option",{value:A.id,children:A.codigo},A.id))})]}),o.find(A=>A.id===parseInt(m.monedaId))?.esFuncional===!1&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa"}),r.jsx(ye,{type:"number",step:"0.01",value:m.tasaCambio,onChange:A=>y("tasaCambio",A.target.value)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentario"}),r.jsx(ye,{placeholder:"Motivo de la nota...",value:m.comentario,onChange:A=>y("comentario",A.target.value)})]}),r.jsxs("div",{className:"border rounded-md overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b flex justify-between items-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:[r.jsx("span",{children:"Facturas Pendientes"}),r.jsx("span",{children:"Monto a Aplicar"})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto divide-y",children:N.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm italic",children:"No hay facturas pendientes en esta moneda para este proveedor."}):N.map(A=>r.jsxs("div",{className:"p-3 flex justify-between items-center hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-gray-800",children:A.numeroCompra}),r.jsxs("span",{className:"text-[10px] text-gray-500",children:["Saldo: ",A.monedaSimbolo," ",A.saldo.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ye,{type:"number",className:"w-32 h-8 text-right text-sm",placeholder:"0.00",value:m.allocations[A.id]||"",onChange:k=>b(A.id,k.target.value,A.saldo)}),r.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"h-8 px-2 text-[10px] text-blue-600 hover:text-blue-700 font-bold",onClick:()=>b(A.id,A.saldo,A.saldo),children:"TODO"})]})]},A.id))})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md flex justify-between items-center border border-gray-200",children:[r.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total de la Nota:"}),r.jsxs("div",{className:`text-xl font-bold ${m.tipo==="Credito"?"text-blue-600":"text-red-600"}`,children:[o.find(A=>A.id===parseInt(m.monedaId))?.simbolo||"$"," ",m.monto.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:e,disabled:h,children:"Cancelar"}),r.jsxs(re,{type:"submit",className:`${m.tipo==="Credito"?"bg-blue-600 hover:bg-blue-700":"bg-red-600 hover:bg-red-700"} text-white shadow-md`,disabled:h||m.monto<=0,children:[h?r.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Registrar Nota"]})]})]})]})})},H0="http://localhost:5006/api",OB=({proveedor:e,proveedorId:t})=>{const[n,a]=x.useState("pendientes"),[s,o]=x.useState({pendientes:[],historial:[],pagos:[],notas:[]}),[l,c]=x.useState(!0),[f,h]=x.useState(!1);x.useEffect(()=>{t&&u()},[t]);const u=async()=>{c(!0);try{const y=await fetch(`${H0}/EstadoCuenta/${t}`);if(y.ok){const b=await y.json();o({pendientes:b.pendientes||b.Pendientes||[],historial:b.historial||b.Historial||[],pagos:b.pagos||b.Pagos||[],notas:b.notas||b.Notas||[]})}}catch(y){console.error(y)}finally{c(!1)}};if(l)return r.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"Cargando detalles de cuenta..."});const m=y=>y?new Date(y).toLocaleDateString():"-",p=y=>y==null?"0.00":y.toLocaleString("es-DO",{minimumFractionDigits:2}),v=async y=>{if(confirm("Ests seguro de que deseas ANULAR este pago? Esta accin reversar los saldos de las facturas afectadas."))try{const b=await fetch(`${H0}/Pagos/${y}/anular`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(b.ok)alert("Pago anulado exitosamente"),u();else{const N=await b.json();alert("Error al anular: "+(N.message||"Error desconocido"))}}catch(b){console.error(b),alert("Error de conexin")}},j=async y=>{if(confirm("Ests seguro de que deseas ANULAR esta nota? Esta accin reversar los ajustes de saldo en las facturas."))try{const b=await fetch(`${H0}/Notas/${y}/anular`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(b.ok)alert("Nota anulada exitosamente"),u();else{const N=await b.json();alert("Error al anular: "+(N.message||"Error desconocido"))}}catch(b){console.error(b),alert("Error de conexin")}};return r.jsxs("div",{className:"p-4 bg-gray-50/80 animate-in slide-in-from-top-2 duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-200",children:[r.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[r.jsxs("button",{onClick:()=>a("pendientes"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${n==="pendientes"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pagar (",s.pendientes.length,")"]}),r.jsx("button",{onClick:()=>a("historial"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${n==="historial"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Historial Facturas"}),r.jsx("button",{onClick:()=>a("pagos"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${n==="pagos"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Pagos"}),r.jsxs("button",{onClick:()=>a("notas"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${n==="notas"?"border-hd-orange text-hd-orange":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Notas (",s.notas.length,")"]})]}),n==="notas"&&r.jsxs(re,{size:"xs",className:"mb-2 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>h(!0),children:[r.jsx(_t,{size:14,className:"mr-1"})," Nueva Nota"]})]}),r.jsxs("div",{className:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden",children:[n==="pendientes"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-red-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-red-800",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-red-800",children:"Nmero de Documento"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800",children:"Pagado"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800",children:"Pendiente"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-red-800 text-[10px]",children:"DOP Equiv."})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:s.pendientes.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-400 italic",children:"Todo al da! No hay facturas pendientes."})}):s.pendientes.map(y=>r.jsxs("tr",{className:"hover:bg-red-50/20",children:[r.jsx("td",{className:"px-3 py-2 text-gray-600",children:m(y.FechaCompra)}),r.jsx("td",{className:"px-3 py-2 font-bold text-gray-800",children:y.ReferenciaProveedor||y.NumeroCompra}),r.jsxs("td",{className:"px-3 py-2 text-right font-medium",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Total)]}),r.jsxs("td",{className:"px-3 py-2 text-right text-green-600",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Total-(y.Saldo||0))]}),r.jsxs("td",{className:"px-3 py-2 text-right font-bold text-red-600",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Saldo)]}),r.jsxs("td",{className:"px-3 py-2 text-right text-[10px] text-gray-400 italic",children:["RD$ ",p((y.Saldo||0)*(y.TasaCambio||y.tasaCambio||1))]})]},y.Id))})]}),n==="historial"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Nmero de Documento"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Estado"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.historial.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:m(y.FechaCompra)}),r.jsx("td",{className:"px-3 py-2 font-mono text-gray-600",children:y.ReferenciaProveedor||y.NumeroCompra}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] ${y.Estado==="Completado"?"bg-green-100 text-green-800":y.Estado==="Anulado"?"bg-gray-100 text-gray-500":"bg-yellow-100 text-yellow-800"}`,children:y.Estado||"Abierta"})}),r.jsxs("td",{className:"px-3 py-2 text-right font-medium",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.Total)]})]},y.Id))})]}),n==="pagos"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-blue-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Referencia"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Facturas Pagadas"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-blue-800",children:"Mtodo"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-blue-800",children:"Monto"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-blue-800",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.pagos.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-400 italic",children:"No hay pagos registrados."})}):s.pagos.map(y=>{const b=(y.estado||y.Estado)==="Anulado";return r.jsxs("tr",{className:`hover:bg-blue-50/20 ${b?"opacity-50 line-through bg-gray-50":""}`,children:[r.jsx("td",{className:"px-3 py-2",children:m(y.fecha||y.Fecha)}),r.jsx("td",{className:"px-3 py-2 font-mono text-blue-600",children:y.referencia||y.Referencia}),r.jsx("td",{className:"px-3 py-2",children:(y.facturasAfectadas||y.FacturasAfectadas)&&(y.facturasAfectadas||y.FacturasAfectadas).length>0?r.jsx("div",{className:"flex flex-col space-y-1",children:(y.facturasAfectadas||y.FacturasAfectadas).map((N,P)=>r.jsxs("span",{className:"bg-blue-100 text-blue-800 text-[10px] px-1.5 py-0.5 rounded w-fit",children:[N.Numero||N.numero," ",r.jsxs("span",{className:"text-blue-500 opacity-75 ml-1",children:["($",p(N.Monto||N.monto),")"]})]},P))}):r.jsx("span",{className:"text-gray-400 italic text-[10px]",children:"Sin detalle"})}),r.jsx("td",{className:"px-3 py-2",children:y.metodo||y.Metodo}),r.jsxs("td",{className:"px-3 py-2 text-right font-bold text-gray-800 text-nowrap",children:[y.MonedaSimbolo||y.monedaSimbolo||"RD$"," ",p(y.monto||y.Monto)]}),r.jsxs("td",{className:"px-3 py-2 text-center",children:[!b&&r.jsx("button",{onClick:()=>v(y.id||y.Id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Anular Pago",children:r.jsx(OC,{size:14})}),b&&r.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:"ANULADO"})]})]},y.id||y.Id)})})]}),n==="notas"&&r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{className:"bg-indigo-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Fecha"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Tipo"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Referencia"}),r.jsx("th",{className:"px-3 py-2 text-left font-medium text-indigo-800",children:"Facturas Afectadas"}),r.jsx("th",{className:"px-3 py-2 text-right font-medium text-indigo-800",children:"Monto"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-indigo-800",children:"Estado"}),r.jsx("th",{className:"px-3 py-2 text-center font-medium text-indigo-800",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s.notas.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-400 italic",children:"No hay notas registradas."})}):s.notas.map(y=>{const b=(y.estado||y.Estado)==="Anulada";return r.jsxs("tr",{className:`hover:bg-indigo-50/20 ${b?"opacity-50 line-through":""}`,children:[r.jsx("td",{className:"px-3 py-2",children:m(y.fecha||y.Fecha)}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:`font-bold ${y.tipo==="Credito"?"text-blue-600":"text-red-600"}`,children:y.tipo==="Credito"?"CRDITO":"DBITO"})}),r.jsx("td",{className:"px-3 py-2 font-mono",children:y.referencia||y.Referencia}),r.jsx("td",{className:"px-3 py-2",children:(y.facturasAfectadas||y.FacturasAfectadas)?.map((N,P)=>r.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-[10px] px-1.5 py-0.5 rounded mr-1",children:N.Numero||N.numero},P))}),r.jsxs("td",{className:"px-3 py-2 text-right font-bold",children:[y.monedaSimbolo||y.MonedaSimbolo||"RD$"," ",p(y.monto||y.Monto)]}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] ${b?"bg-gray-100 text-gray-500":"bg-green-100 text-green-800"}`,children:y.estado||"Completada"})}),r.jsx("td",{className:"px-3 py-2 text-center",children:!b&&r.jsx("button",{onClick:()=>j(y.id||y.Id),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Anular Nota",children:r.jsx(OC,{size:14})})})]},y.id||y.Id)})})]})]}),r.jsx("div",{className:"mt-2 text-right",children:r.jsx(re,{size:"xs",variant:"outline",className:"text-gray-500",onClick:()=>a("pendientes"),children:"Ver todo..."})}),f&&r.jsx(DB,{initialProveedorId:t,onClose:()=>h(!1),onSuccess:()=>{u(),h(!1)}})]})},Gi="http://localhost:5006/api",MB=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!0),[s,o]=x.useState([]),[l,c]=x.useState({deudaPendiente:0,pagadoMes:0,vencido:0,deudaTotal:0,cantidadFacturas:0}),[f,h]=x.useState({}),[u,m]=x.useState([]),[p,v]=x.useState([]);x.useEffect(()=>{j()},[]);const j=async()=>{try{a(!0);const Z=await Cj();o(Z),await N(),await b(),await y()}catch(Z){console.error("Error loading initial data:",Z)}finally{a(!1)}},y=async()=>{try{const Z=await fetch(`${Gi}/Monedas`);if(Z.ok){const le=await Z.json();m(le)}}catch(Z){console.error("Error loading currencies:",Z)}},b=async()=>{try{const Z=await fetch(`${Gi}/Pagos/DeudaTotal`);if(Z.ok){const le=await Z.json();c(Oe=>({...Oe,deudaTotal:le.totalDeuda||le.TotalDeuda||0,cantidadFacturas:le.cantidadFacturas||le.CantidadFacturas||0}));const Ce={};le.porProveedor.forEach(Oe=>{const Le=Oe.proveedorNombre||Oe.ProveedorNombre,Ye=Oe.saldoTotal||Oe.SaldoTotal||0;Le&&(Ce[Le]=Ye)}),h(Ce)}}catch(Z){console.error("Error loading total debt:",Z)}},N=async()=>{try{const Z=await fetch(`${Gi}/Pagos`);if(Z.ok){const le=await Z.json();t(le);const Ce=le.filter(Le=>Le.estado==="Completado").reduce((Le,Ye)=>Le+Ye.monto,0),Oe=le.filter(Le=>Le.estado==="Pendiente").reduce((Le,Ye)=>Le+Ye.monto,0);c(Le=>({...Le,pagadoMes:Ce,deudaPendiente:Oe}))}}catch(Z){console.error("Error loading payments:",Z)}},P=async Z=>{if(!Z){v([]);return}try{const le=await fetch(`${Gi}/Pagos/FacturasPendientes/${Z}`);if(le.ok){const Ce=await le.json();v(Ce)}}catch(le){console.error("Error loading pending invoices:",le)}},[A,k]=x.useState({key:"fecha",direction:"desc"}),[I,E]=x.useState({}),[O,C]=x.useState({}),[M,F]=x.useState({}),[V,T]=x.useState(null),[L,U]=x.useState(""),[J,q]=x.useState(!1),[W,z]=x.useState(new Set),K=Z=>{let le="asc";A.key===Z&&A.direction==="asc"&&(le="desc"),k({key:Z,direction:le})},B=(Z,le)=>{le&&le.stopPropagation(),T(V===Z?null:Z)},R=(Z,le)=>{E(Ce=>({...Ce,[Z]:le}))},H=(Z,le,Ce)=>{F(Oe=>({...Oe,[Z]:{...Oe[Z]||{min:"",max:""},[le]:Ce}}))},Y=(Z,le)=>{C(Ce=>{const Oe=Ce[Z]||[];return Oe.includes(le)?{...Ce,[Z]:Oe.filter(Le=>Le!==le)}:{...Ce,[Z]:[...Oe,le]}})},ee=(Z,le,Ce)=>{C(Oe=>{let Ye=[...Oe[Z]||[]];const Ze=me(),Ot=(Xt,Ur)=>{if(!Xt.children){dt.push(Ur);return}Object.keys(Xt.children).forEach(At=>{Ot(Xt.children[At],Ur?`${Ur}/${At}`:At)})},dt=[];if(le==="")return Ce?{...Oe,[Z]:[]}:(Ot(Ze,""),{...Oe,[Z]:dt});const Lt=le.split("/").filter(Boolean);let br=Ze;for(const Xt of Lt)if(br=br?.children?.[Xt],!br)break;if(br){const Xt=[],Ur=(At,na)=>{if(!At.children){Xt.push(na);return}Object.keys(At.children).forEach(wa=>{Ur(At.children[wa],`${na}/${wa}`)})};Ur(br,le),Ce?Ye=Ye.filter(At=>!Xt.includes(At)):Xt.forEach(At=>{Ye.includes(At)||Ye.push(At)})}return{...Oe,[Z]:Ye}})},me=()=>{const Z={children:{}};return e.forEach(le=>{const Ce=new Date(le.fecha),Oe=String(Ce.getFullYear()),Le=Ce.toLocaleDateString("es-DO",{month:"long"}),Ye=String(Ce.getDate());Z.children[Oe]||(Z.children[Oe]={children:{}}),Z.children[Oe].children[Le]||(Z.children[Oe].children[Le]={children:{}}),Z.children[Oe].children[Le].children[Ye]||(Z.children[Oe].children[Le].children[Ye]={count:0}),Z.children[Oe].children[Le].children[Ye].count++}),Z},De=Z=>{const le=e.map(Ce=>String(Ce[Z]||""));return[...new Set(le)].sort()},Se=Z=>Z?new Date(Z).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"2-digit"}):"",We=()=>{E({}),C({}),F({})},ue=(()=>{let Z=[...e];return L&&(Z=Z.filter(le=>Object.keys(le).some(Ce=>Ce==="facturasAfectadas"?!1:(Ce==="fecha"?Se(le[Ce]):String(le[Ce])).toLowerCase().includes(L.toLowerCase())))),Object.keys(I).forEach(le=>{I[le]&&(Z=Z.filter(Ce=>{if(le==="fecha"){const Oe=new Date(Ce[le]);return`${Oe.getFullYear()} ${Oe.toLocaleDateString("es-DO",{month:"long"})} ${Oe.getDate()}`.toLowerCase().includes(I[le].toLowerCase())}return String(Ce[le]||"").toLowerCase().includes(I[le].toLowerCase())}))}),Object.keys(O).forEach(le=>{O[le]&&O[le].length>0&&(Z=Z.filter(Ce=>{if(le==="fecha"){const Oe=new Date(Ce[le]),Le=`${Oe.getFullYear()}/${Oe.toLocaleDateString("es-DO",{month:"long"})}/${Oe.getDate()}`;return O[le].includes(Le)}return O[le].includes(String(Ce[le]))}))}),Object.keys(M).forEach(le=>{const{min:Ce,max:Oe}=M[le];Ce!==""&&(Z=Z.filter(Le=>(Le[le]||0)>=parseFloat(Ce))),Oe!==""&&(Z=Z.filter(Le=>(Le[le]||0)<=parseFloat(Oe)))}),A.key&&Z.sort((le,Ce)=>{const Oe=le[A.key],Le=Ce[A.key];return Oe<Le?A.direction==="asc"?-1:1:Oe>Le?A.direction==="asc"?1:-1:0}),Z})(),ke=me(),se=x.useMemo(()=>{if(!J)return null;const Z={};return ue.forEach(le=>{Z[le.proveedorNombre]||(Z[le.proveedorNombre]={proveedor:le.proveedorNombre,pagos:[],totalCompletado:0,totalPendiente:0,deudaActual:0}),Z[le.proveedorNombre].pagos.push(le);const Ce=le.montoFuncional||(le.monedaCodigo==="DOP"?le.monto:le.monto*(le.tasaCambio||1));le.estado==="Completado"&&(Z[le.proveedorNombre].totalCompletado+=Ce),le.estado==="Pendiente"&&(Z[le.proveedorNombre].totalPendiente+=Ce)}),Object.keys(f).forEach(le=>{(!L||le.toLowerCase().includes(L.toLowerCase()))&&(!Z[le]&&f[le]>0?Z[le]={proveedor:le,pagos:[],totalCompletado:0,totalPendiente:0,deudaActual:f[le]}:Z[le]&&(Z[le].deudaActual=f[le]))}),Object.values(Z).sort((le,Ce)=>le.proveedor.localeCompare(Ce.proveedor))},[ue,J,f]),fe=Z=>{const le=new Set(W);le.has(Z)?le.delete(Z):le.add(Z),z(le)},[Te,Re]=x.useState(!1),[Ie,Qe]=x.useState({proveedorId:"",fecha:new Date().toISOString().split("T")[0],metodo:"Transferencia",monto:0,nota:"",monedaId:"",tasaCambio:1,allocations:{}});x.useEffect(()=>{if(Te&&u.length>0&&!Ie.monedaId){const Z=u.find(le=>le.esFuncional);Z&&Qe(le=>({...le,monedaId:Z.id,tasaCambio:1}))}},[Te,u]);const Xe=async(Z,le)=>{if(Z==="proveedorId")Qe(Ce=>({...Ce,proveedorId:le,allocations:{},monto:0})),P(le);else if(Z==="monedaId"){const Ce=parseInt(le),Oe=u.find(Ye=>Ye.id===Ce);let Le=1;if(Oe&&!Oe.esFuncional)try{const Ye=new Date().toISOString().split("T")[0],Ze=await fetch(`${Gi}/Monedas/tasas?monedaId=${Ce}&fecha=${Ye}`);Ze.ok&&(Le=(await Ze.json()).tasa||1)}catch(Ye){console.error("Error fetching rate:",Ye)}Qe(Ye=>({...Ye,monedaId:le,tasaCambio:Le,allocations:{},monto:0,tasaOficial:Le}))}else Qe(Ce=>({...Ce,[Z]:le}))},tt=(Z,le,Ce)=>{let Oe=parseFloat(le)||0;Oe>Ce&&(Oe=Ce),Oe<0&&(Oe=0);const Le={...Ie.allocations,[Z]:Oe};Oe===0&&delete Le[Z];const Ye=()=>{let Ze=0;const Ot=parseInt(Ie.monedaId),dt=u.find(Lt=>Lt.id===Ot);return Object.keys(Le).forEach(Lt=>{const br=p.find(Ur=>Ur.id===parseInt(Lt)),Xt=Le[Lt];br&&(br.monedaId===Ot?Ze+=Xt:dt?.esFuncional?Ze+=Xt*Ie.tasaCambio:Ze+=Xt/Ie.tasaCambio)}),Ze};Qe(Ze=>({...Ze,allocations:Le,monto:Ye()}))},Q=(Z,le)=>{tt(Z,le,le)},_=async Z=>{if(Z.preventDefault(),Ie.monto<=0)return alert("El monto del pago debe ser mayor a 0");try{const le={proveedorId:parseInt(Ie.proveedorId),fecha:Ie.fecha,metodo:Ie.metodo,monto:Ie.monto,nota:Ie.nota,monedaId:parseInt(Ie.monedaId),tasaCambio:parseFloat(Ie.tasaCambio),allocations:Object.keys(Ie.allocations).map(Oe=>{const Le=parseInt(Oe),Ye=p.find(Xt=>Xt.id===Le),Ze=Ie.allocations[Oe],Ot=u.find(Xt=>Xt.id===Ye.monedaId),dt=Ze*(Ye.tasaFactura||1);let Lt=Ze;Ot?.esFuncional||(Lt=Ze*Ie.tasaCambio);const br=Lt-dt;return{invoiceId:Le,monto:Ze,montoFuncional:Lt,diferenciaCambiaria:br}})},Ce=await fetch(`${Gi}/Pagos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});if(Ce.ok)Re(!1),Qe({proveedorId:"",fecha:new Date().toISOString().split("T")[0],metodo:"Transferencia",monto:0,nota:"",allocations:{}}),N();else{const Oe=await Ce.json();alert(Oe.message||"Error al registrar pago")}}catch(le){console.error("Error creating payment:",le),alert("Error de conexin")}},[X,ne]=x.useState(null),[ae,ge]=x.useState(null),[be,Fe]=x.useState(""),ve=Z=>{ne(Z),Fe("")},qe=async Z=>{if(Z&&Z.preventDefault(),!be&&X.metodo!=="Efectivo")return alert("Debe ingresar el nmero de referencia");try{const le=await fetch(`${Gi}/Pagos/${X.id}/confirmar`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referencia:be||"PAGADO"})});if(le.ok){const Ce=X.id;ne(null),N(),window.open(`/cuentas-por-pagar/pagos/imprimir/${Ce}`,"_blank")}else{const Ce=await le.json();alert(Ce.message||"Error al confirmar pago")}}catch(le){console.error("Error confirming payment:",le),alert("Error de conexin")}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 relative",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Pagos a Proveedores"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestin de histrico y nuevos pagos."})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(re,{variant:"outline",className:`${J?"bg-orange-50 text-hd-orange border-hd-orange":"text-gray-500"}`,onClick:()=>q(!J),children:[J?r.jsx(cl,{size:18,className:"mr-2"}):r.jsx(ma,{size:18,className:"mr-2"}),J?"Vista Lista":"Agrupar por Proveedor"]}),r.jsxs(re,{className:"bg-hd-orange hover:bg-orange-700 text-white",onClick:()=>Re(!0),children:[r.jsx(_t,{className:"mr-2 h-4 w-4"})," Nuevo Pago"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Be,{className:"bg-red-50 border-red-100",children:r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-600",children:"Deuda en Pagos Pendientes"}),r.jsxs("p",{className:"text-2xl font-bold text-red-900",children:["RD$ ",l.deudaPendiente.toLocaleString("es-DO",{minimumFractionDigits:2})]})]}),r.jsx("div",{className:"p-2 bg-red-100 rounded-full text-red-600",children:r.jsx(Wr,{size:24})})]})}),r.jsx(Be,{className:"bg-blue-50 border-blue-100",children:r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Pagado"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["RD$ ",l.pagadoMes.toLocaleString("es-DO",{minimumFractionDigits:2})]})]}),r.jsx("div",{className:"p-2 bg-blue-100 rounded-full text-blue-600",children:r.jsx(Cc,{size:24})})]})}),r.jsx(Be,{className:"bg-hd-black border-hd-orange border-l-4 shadow-md",children:r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-hd-orange uppercase tracking-wider text-[10px]",children:"Deuda Total Consolidada"}),r.jsxs("p",{className:"text-2xl font-bold text-white",children:["RD$ ",l.deudaTotal.toLocaleString("es-DO",{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-[10px] text-gray-400",children:[l.cantidadFacturas," Facturas (Valores en Pesos)"]})]}),r.jsx("div",{className:"p-2 bg-hd-orange/20 rounded-full text-hd-orange",children:r.jsx(ma,{size:24})})]})})]}),r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row justify-between items-center pb-4",children:[r.jsx(vt,{children:J?"Resumen por Proveedor":"Historial de Pagos"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(Object.keys(I).length>0||Object.keys(O).some(Z=>Array.isArray(O[Z])&&O[Z].length>0)||Object.keys(M).some(Z=>M[Z].min!==""||M[Z].max!==""))&&r.jsxs(re,{variant:"ghost",size:"sm",onClick:We,className:"text-xs text-hd-orange hover:text-orange-700",children:[r.jsx(It,{size:14,className:"mr-1"})," Limpiar Filtros"]}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(Ht,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),r.jsx(ye,{placeholder:"Buscar pago...",className:"pl-9",value:L,onChange:Z=>U(Z.target.value)})]})]})]}),r.jsx("div",{className:"p-0 overflow-visible relative min-h-[500px]",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{children:[J&&r.jsx(ce,{className:"w-10"}),r.jsx(ic,{label:"Fecha",field:"fecha",sortConfig:A,onSort:K,onFilter:B,showFilter:V==="fecha",filterValue:I.fecha,onFilterChange:R,dateTree:ke,selectedValues:O.fecha,onTreeToggle:ee}),r.jsx(ic,{label:"Referencia",field:"referencia",sortConfig:A,onSort:K,onFilter:B,showFilter:V==="referencia",filterValue:I.referencia,onFilterChange:R,className:"font-mono text-xs"}),r.jsx(ic,{label:"Proveedor",field:"proveedorNombre",sortConfig:A,onSort:K,onFilter:B,showFilter:V==="proveedorNombre",filterValue:I.proveedorNombre,onFilterChange:R,uniqueValues:De("proveedorNombre"),selectedValues:O.proveedorNombre,onValueToggle:Y}),r.jsx(ic,{label:"Mtodo",field:"metodo",sortConfig:A,onSort:K,onFilter:B,showFilter:V==="metodo",filterValue:I.metodo,onFilterChange:R,uniqueValues:De("metodo"),selectedValues:O.metodo,onValueToggle:Y}),r.jsx(ic,{label:"Monto",field:"monto",sortConfig:A,onSort:K,onFilter:B,showFilter:V==="monto",numericValue:M.monto,onNumericFilterChange:H,className:"text-right"}),r.jsx(ic,{label:"Estado",field:"estado",sortConfig:A,onSort:K,onFilter:B,showFilter:V==="estado",filterValue:I.estado,onFilterChange:R,uniqueValues:De("estado"),selectedValues:O.estado,onValueToggle:Y}),r.jsx(ce,{children:"Acciones"})]})}),r.jsx(Bt,{children:n?r.jsx(Me,{children:r.jsx(G,{colSpan:J?8:7,className:"text-center py-8",children:"Cargando..."})}):J?se.map(Z=>r.jsxs(bt.Fragment,{children:[r.jsxs(Me,{className:"bg-gray-50/50 hover:bg-gray-50 cursor-pointer font-medium",onClick:()=>fe(Z.proveedor),children:[r.jsx(G,{children:W.has(Z.proveedor)?r.jsx(Nr,{size:14,className:"text-hd-orange"}):r.jsx(ar,{size:14})}),r.jsx(G,{className:"text-gray-400 font-sans italic text-[10px]",children:"Mltiples fechas"}),r.jsx(G,{className:"text-blue-600 font-mono text-[10px]",children:"GRUPO"}),r.jsx(G,{className:"font-bold text-gray-800",children:Z.proveedor}),r.jsx(G,{className:"text-gray-400 font-sans italic text-[10px]",children:"Mltiples"}),r.jsx(G,{className:"text-right",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("span",{className:"text-green-600 font-bold",children:["Pagado: RD$ ",Z.totalCompletado.toLocaleString(void 0,{minimumFractionDigits:2})]}),Z.totalPendiente>0&&r.jsxs("span",{className:"text-yellow-600 text-[10px]",children:["Programado: RD$ ",Z.totalPendiente.toLocaleString()]})]})}),r.jsx(G,{children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("span",{className:"text-gray-900 font-bold text-[11px]",children:["Deuda: RD$ ",Z.deudaActual.toLocaleString()]}),r.jsxs("span",{className:"text-[10px] text-blue-600",children:[Z.pagos.length," Pagos"]})]})}),r.jsx(G,{})]}),W.has(Z.proveedor)&&r.jsx(Me,{className:"bg-white border-l-4 border-hd-orange",children:r.jsx(G,{colSpan:8,className:"p-0",children:r.jsx(OB,{proveedor:Z.proveedor,proveedorId:Z.pagos[0]?.proveedorId})})})]},Z.proveedor)):ue.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No se encontraron pagos."})}):ue.map(Z=>r.jsxs(Me,{className:"hover:bg-gray-50 group text-xs font-sans",children:[r.jsx(G,{className:"font-sans",children:new Date(Z.fecha).toLocaleDateString()}),r.jsx(G,{children:r.jsxs("div",{className:"flex flex-col text-[11px]",children:[r.jsx("span",{className:`font-mono ${Z.referencia==="PENDIENTE"?"text-orange-400 italic":"text-blue-600"}`,children:Z.referencia}),Z.facturasAfectadas?.length>0&&r.jsx("span",{className:"text-[10px] text-gray-400",children:Z.facturasAfectadas.map(le=>le.numero).join(", ")})]})}),r.jsx(G,{className:"font-medium text-gray-700",children:Z.proveedorNombre}),r.jsx(G,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(si,{size:14,className:"text-gray-400"}),r.jsx("span",{children:Z.metodo})]})}),r.jsxs(G,{className:"text-right font-medium",children:[Z.monedaSimbolo||"RD$"," ",Z.monto.toLocaleString("es-DO",{minimumFractionDigits:2})]}),r.jsx(G,{children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium ${Z.estado==="Completado"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Z.estado})}),r.jsx(G,{children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"h-7 w-7 p-0 text-gray-500 hover:text-hd-orange hover:bg-orange-50",onClick:()=>ge(Z),title:"Ver detalles",children:r.jsx(oi,{size:16})}),r.jsx(re,{size:"xs",variant:"ghost",className:"h-7 w-7 p-0 text-gray-500 hover:text-blue-600 hover:bg-blue-50",onClick:()=>window.open(`/cuentas-por-pagar/pagos/imprimir/${Z.id}`,"_blank"),title:"Imprimir comprobante",children:r.jsx(La,{size:16})}),Z.estado==="Pendiente"&&r.jsx(re,{size:"xs",className:"h-7 text-[10px] bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>ve(Z),children:"Confirmar"})]})})]},Z.id))})]})})]}),Te&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-hd-orange p-4 flex justify-between items-center text-white",children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[r.jsx(Wr,{className:"mr-2",size:20})," Programar Pago a Proveedor"]}),r.jsx("button",{onClick:()=>Re(!1),className:"hover:bg-orange-700 p-1 rounded transition-colors",children:r.jsx(It,{size:20})})]}),r.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Proveedor"}),r.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-hd-orange focus:ring-hd-orange",value:Ie.proveedorId,onChange:Z=>Xe("proveedorId",Z.target.value),required:!0,children:[r.jsx("option",{value:"",children:"Seleccione un proveedor"}),s.map(Z=>r.jsx("option",{value:Z.id,children:Z.razonSocial},Z.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Programada"}),r.jsx(ye,{type:"date",value:Ie.fecha,onChange:Z=>Xe("fecha",Z.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mtodo"}),r.jsxs("select",{className:"w-full rounded-md border border-gray-300 p-2 text-sm focus:border-hd-orange focus:ring-hd-orange",value:Ie.metodo,onChange:Z=>Xe("metodo",Z.target.value),children:[r.jsx("option",{value:"Transferencia",children:"Transferencia"}),r.jsx("option",{value:"Cheque",children:"Cheque"}),r.jsx("option",{value:"Efectivo",children:"Efectivo"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-orange-50/50 p-3 rounded-md border border-orange-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-orange-800 uppercase mb-1 tracking-wider",children:"Moneda de Pago"}),r.jsx("select",{className:"w-full rounded-md border border-orange-200 p-2 text-sm focus:ring-hd-orange focus:border-hd-orange bg-white shadow-sm",value:Ie.monedaId,onChange:Z=>Xe("monedaId",Z.target.value),children:u.map(Z=>r.jsxs("option",{value:Z.id,children:[Z.codigo," - ",Z.nombre]},Z.id))})]}),u.find(Z=>Z.id===parseInt(Ie.monedaId))?.esFuncional===!1&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-xs font-bold text-orange-800 uppercase tracking-wider",children:"Tasa de Cambio"}),Ie.tasaOficial>0&&Math.abs(Ie.tasaCambio-Ie.tasaOficial)/Ie.tasaOficial>.05&&r.jsx("span",{className:"text-[9px] bg-red-100 text-red-600 px-1 rounded animate-pulse font-bold",children:"Variacin Inusual"})]}),r.jsx(ye,{type:"number",step:"0.01",value:Ie.tasaCambio,onChange:Z=>Xe("tasaCambio",Z.target.value),className:`border-orange-200 bg-white ${Math.abs(Ie.tasaCambio-Ie.tasaOficial)/Ie.tasaOficial>.05?"ring-1 ring-red-400 border-red-400":""}`})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-md p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center",children:[r.jsx(ea,{className:"mr-2",size:16})," Facturas Pendientes",Ie.proveedorId&&r.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-hd-orange/10 text-hd-orange rounded-full text-[10px]",children:[p.length," totales"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"showAllCurrencies",className:"rounded border-gray-300 text-hd-orange focus:ring-hd-orange h-3 w-3",checked:Ie.showAllCurrencies||!1,onChange:Z=>Qe(le=>({...le,showAllCurrencies:Z.target.checked}))}),r.jsx("label",{htmlFor:"showAllCurrencies",className:"text-xs text-gray-600 cursor-pointer select-none",children:"Mostrar todas las monedas"})]})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-sm bg-white",children:r.jsxs("table",{className:"w-full text-xs text-left",children:[r.jsx("thead",{className:"bg-gray-100 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:"Factura #"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Saldo Original"}),r.jsx("th",{className:"px-3 py-2 text-right w-32",children:"Monto a Aplicar"}),r.jsx("th",{className:"px-3 py-2 text-center w-24",children:"Accin"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 font-mono",children:Ie.proveedorId?(()=>{const Z=p.filter(le=>Ie.showAllCurrencies||!Ie.monedaId||le.monedaId===parseInt(Ie.monedaId));return Z.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-400 font-sans",children:"No hay facturas pendientes en esta moneda."})}):Z.map(le=>r.jsxs("tr",{className:"hover:bg-blue-50/30",children:[r.jsx("td",{className:"px-3 py-1 font-medium text-[10px]",children:le.numero}),r.jsxs("td",{className:"px-3 py-1 text-right text-gray-500 font-sans",children:[le.monedaSimbolo||"RD$"," ",le.saldo.toLocaleString()]}),r.jsx("td",{className:"px-3 py-1 text-right",children:r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx("span",{className:"text-[10px] text-gray-400 mr-1",children:le.monedaCodigo}),r.jsx(ye,{type:"number",step:"0.01",className:"h-6 w-24 text-right text-[10px]",value:Ie.allocations[le.id]||"",onChange:Ce=>tt(le.id,Ce.target.value,le.saldo)})]})}),r.jsx("td",{className:"px-3 py-1 text-center font-sans",children:r.jsx(re,{type:"button",size:"xs",variant:"ghost",className:"text-[9px] h-6 text-blue-600 font-bold",onClick:()=>Q(le.id,le.saldo),children:"Saldar"})})]},le.id))})():r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-400",children:"Seleccione un proveedor."})})})]})})]}),r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsxs("div",{className:"flex-1 mr-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota / Comentario"}),r.jsx(ye,{placeholder:"Opcional...",value:Ie.nota,onChange:Z=>Xe("nota",Z.target.value)})]}),r.jsx("div",{className:"flex flex-col space-y-2",children:(()=>{let Z=0,le=0;return Object.keys(Ie.allocations).forEach(Ce=>{const Oe=p.find(dt=>dt.id===parseInt(Ce)),Le=Ie.allocations[Ce],Ye=Le*(Oe.tasaFactura||1),Ze=u.find(dt=>dt.id===parseInt(Ie.monedaId));let Ot=Le;Ze?.esFuncional?Ot=Oe.monedaId!==Ze.id?Le*Ie.tasaCambio:Le:Ot=Le*Ie.tasaCambio,Z+=Ot-Ye,le+=Ot}),r.jsxs(r.Fragment,{children:[Math.abs(Z)>.01&&r.jsxs("div",{className:`text-[10px] px-2 py-1 rounded border ${Z>0?"bg-red-50 text-red-700 border-red-100":"bg-green-50 text-green-700 border-green-100"}`,children:[r.jsx("span",{className:"font-bold",children:"Diferencia Cambiaria:"})," RD$ ",Z.toLocaleString(void 0,{minimumFractionDigits:2}),r.jsx("p",{className:"opacity-70",children:Z>0?" Prdida por tasa":" Ganancia por tasa"})]}),r.jsxs("div",{className:"w-48 bg-gray-900 shadow-inner text-white p-3 rounded-md text-right border-l-4 border-hd-orange",children:[r.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Total a Pagar"}),r.jsxs("p",{className:"text-xl font-bold font-mono",children:[u.find(Ce=>Ce.id===parseInt(Ie.monedaId))?.simbolo||"RD$"," ",Ie.monto.toLocaleString(void 0,{minimumFractionDigits:2})]}),r.jsxs("p",{className:"text-[9px] text-gray-500 mt-1 italic",children:["Equivalente: RD$ ",le.toLocaleString()]})]})]})})()})]}),r.jsxs("div",{className:"pt-4 flex justify-end space-x-2 border-t border-gray-100",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>Re(!1),children:"Cerrar"}),r.jsx(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-700 text-white shadow-lg",children:"Registrar como Pendiente"})]})]})]})}),X&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 border-t-4 border-blue-600",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-blue-50",children:[r.jsxs("h2",{className:"text-blue-900 font-bold flex items-center",children:[r.jsx(Cc,{className:"mr-2",size:20})," Confirmar Ejecucin de Pago"]}),r.jsx("button",{onClick:()=>ne(null),children:r.jsx(It,{size:20,className:"text-gray-400 hover:text-gray-600"})})]}),r.jsxs("form",{onSubmit:qe,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Proveedor:"}),r.jsx("span",{className:"font-bold",children:X.proveedorNombre})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Monto:"}),r.jsxs("span",{className:"font-bold text-blue-700",children:[X.monedaSimbolo||"RD$"," ",X.monto.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-500",children:"Mtodo:"}),r.jsxs("span",{className:"font-bold flex items-center",children:[r.jsx(si,{size:12,className:"mr-1"})," ",X.metodo]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:X.metodo==="Cheque"?"Nmero de Cheque":X.metodo==="Transferencia"?"Nmero de Transferencia":"Referencia de Pago"}),r.jsx(ye,{className:"border-blue-200 focus:ring-blue-500 focus:border-blue-500",placeholder:X.metodo==="Efectivo"?"Referencia opcional...":`Ingrese ${X.metodo==="Cheque"?"No. Cheque":"No. Transferencia"}...`,value:be,onChange:Z=>Fe(Z.target.value),required:X.metodo!=="Efectivo",autoFocus:!0}),X.metodo!=="Efectivo"&&r.jsx("p",{className:"text-[10px] text-orange-600 mt-1",children:"* Este dato es obligatorio para cerrar el pago."})]}),r.jsxs("div",{className:"pt-2 flex justify-end space-x-2",children:[r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>ne(null),children:"Volver"}),r.jsx(re,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-md",children:"Marcar como Pagado"})]})]})]})}),ae&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-gray-100 p-4 flex justify-between items-center border-b border-gray-200",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center",children:[r.jsx(Sr,{className:"mr-2",size:20})," Detalle de Pago"]}),r.jsx("button",{onClick:()=>ge(null),className:"hover:bg-gray-200 p-1 rounded transition-colors",children:r.jsx(It,{size:20})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Proveedor"}),r.jsx("p",{className:"font-bold text-gray-800",children:ae.proveedorNombre})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Fecha"}),r.jsx("p",{className:"font-bold text-gray-800",children:new Date(ae.fecha).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Referencia / Mtodo"}),r.jsxs("p",{className:"font-bold text-gray-800",children:[ae.referencia," ",r.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",ae.metodo,")"]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Monto Total"}),r.jsxs("p",{className:"font-bold text-blue-600 text-lg",children:[ae.monedaSimbolo||"RD$"," ",ae.monto.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),r.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-2 border-b pb-1",children:"Facturas Afectadas"}),r.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{children:r.jsxs(Me,{className:"bg-gray-50",children:[r.jsx(ce,{className:"py-2 h-8 text-xs",children:"Factura"}),r.jsx(ce,{className:"py-2 h-8 text-xs text-right",children:"Monto Aplicado"})]})}),r.jsx(Bt,{children:ae.facturasAfectadas&&ae.facturasAfectadas.length>0?ae.facturasAfectadas.map((Z,le)=>r.jsxs(Me,{className:"hover:bg-gray-50",children:[r.jsx(G,{className:"py-2 text-xs font-mono",children:Z.numero}),r.jsxs(G,{className:"py-2 text-xs text-right font-medium",children:[ae.monedaSimbolo||"RD$"," ",(Z.monto||0).toLocaleString(void 0,{minimumFractionDigits:2})]})]},le)):r.jsx(Me,{children:r.jsx(G,{colSpan:2,className:"text-center py-4 text-gray-400 text-xs",children:"No hay detalles de facturas."})})})]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 border-t border-gray-200 flex justify-end space-x-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>window.open(`/cuentas-por-pagar/pagos/imprimir/${ae.id}`,"_blank"),children:[r.jsx(La,{className:"mr-2 h-4 w-4"})," Reimprimir Recibo"]}),r.jsx(re,{size:"sm",onClick:()=>ge(null),children:"Cerrar"})]})]})})]})},ic=({label:e,field:t,sortConfig:n,onSort:a,onFilter:s,showFilter:o,filterValue:l="",onFilterChange:c,numericValue:f={min:"",max:""},onNumericFilterChange:h,uniqueValues:u=[],selectedValues:m=[],onValueToggle:p,dateTree:v,onTreeToggle:j,className:y=""})=>{const b=n.key===t,N=h!==void 0,P=v!==void 0,A=l||m&&m.length>0||N&&(f.min!==""||f.max!=="");return r.jsxs(ce,{className:`relative group p-0 ${y}`,children:[r.jsxs("div",{className:"flex items-center justify-between h-full px-4 py-2 hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>a(t),children:[r.jsxs("div",{className:"flex items-center space-x-1 text-[11px]",children:[r.jsx("span",{className:"font-bold text-gray-700",children:e}),b?n.direction==="asc"?r.jsx(Ln,{size:12,className:"text-hd-orange"}):r.jsx(Kr,{size:12,className:"text-hd-orange"}):r.jsx(Bu,{size:12,className:"text-gray-400 opacity-0 group-hover:opacity-100"})]}),s&&r.jsx("button",{onClick:k=>s(t,k),className:`p-1 rounded-sm ${A?"text-hd-orange":"text-gray-400"}`,children:r.jsx(Vu,{size:12,fill:A?"currentColor":"none"})})]}),o&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] text-[11px]",onClick:k=>k.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer",onClick:()=>{a(t),s(t)},children:[r.jsx(Ln,{size:12,className:"mr-2"})," ",t==="fecha"?"Antiguo":"Ascendente"]}),r.jsxs("div",{className:"flex items-center px-3 py-2 hover:bg-hd-orange/10 cursor-pointer",onClick:()=>{a(t),s(t)},children:[r.jsx(Kr,{size:12,className:"mr-2"})," ",t==="fecha"?"Reciente":"Descendente"]})]}),r.jsx("div",{className:"p-3 bg-gray-50 border-b border-gray-100",children:N?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ye,{type:"number",placeholder:"Min",value:f.min,onChange:k=>h(t,"min",k.target.value),className:"h-7 text-[10px]"}),r.jsx(ye,{type:"number",placeholder:"Max",value:f.max,onChange:k=>h(t,"max",k.target.value),className:"h-7 text-[10px]"})]}):r.jsx(ye,{placeholder:"Buscar...",value:l,onChange:k=>c(t,k.target.value),className:"h-7 text-[10px]"})}),r.jsx("div",{className:"max-h-56 overflow-y-auto p-2",children:P?r.jsx(GO,{tree:v,selectedPaths:m,onToggle:(k,I)=>j(t,k,I)}):u.length>0?r.jsx("div",{className:"space-y-0.5",children:u.map(k=>r.jsxs("div",{className:"flex items-center px-2 py-0.5 hover:bg-gray-100 rounded cursor-pointer",onClick:()=>p(t,k),children:[r.jsx("input",{type:"checkbox",checked:m.includes(k),readOnly:!0,className:"h-3 w-3"}),r.jsx("span",{className:"ml-2 truncate",children:k})]},k))}):null}),r.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 border-t",children:[r.jsx(re,{size:"xs",variant:"ghost",onClick:()=>s(t),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-hd-orange",onClick:()=>{N?(h(t,"min",""),h(t,"max","")):(c(t,""),m.length>0&&(P?m.forEach(k=>j(t,k,!0)):m.forEach(k=>p(t,k))))},children:"Limpiar"})]})]})]})},GO=({tree:e,selectedPaths:t,onToggle:n,depth:a=0,path:s=""})=>{const[o,l]=x.useState(a<1),c=Object.keys(e.children||{}).sort((h,u)=>u.localeCompare(h)),f=(h,u)=>{const m=[],p=(v,j)=>{if(!v.children){m.push(j);return}Object.keys(v.children).forEach(y=>p(v.children[y],`${j}/${y}`))};return p(h,u),m};return r.jsx("div",{className:a>0?"ml-3":"",children:c.map(h=>{const u=s?`${s}/${h}`:h,m=e.children[h],p=!m.children,v=p?[u]:f(m,u),j=v.every(b=>t.includes(b)),y=v.some(b=>t.includes(b));return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center py-0.5 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>n(u,j),children:[r.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-0.5",onClick:b=>{b.stopPropagation(),l(!o)},children:!p&&(o?r.jsx(Kr,{size:8}):r.jsx(Op,{size:8}))}),r.jsx("input",{type:"checkbox",checked:j,ref:b=>{b&&(b.indeterminate=y&&!j)},readOnly:!0,className:"h-3 w-3"}),r.jsx("span",{className:"ml-1.5",children:h})]}),o&&!p&&r.jsx(GO,{tree:m,selectedPaths:t,onToggle:n,depth:a+1,path:u})]},h)})})},TB="http://localhost:5006/api",RB=()=>{const{id:e}=Ts(),[t,n]=x.useState(null),[a,s]=x.useState(!0);if(x.useEffect(()=>{e&&(async()=>{try{const c=await fetch(`${TB}/Pagos/${e}`);if(c.ok){const f=await c.json();n(f)}}catch(c){console.error("Error loading payment for print:",c)}finally{s(!1)}})()},[e]),a)return r.jsx("div",{className:"p-8 text-center",children:"Cargando documento..."});if(!t)return r.jsx("div",{className:"p-8 text-center text-red-600",children:"No se encontr el comprobante de pago."});const o=(l,c="DOP")=>new Intl.NumberFormat("es-DO",{style:"currency",currency:c}).format(l);return r.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-8 print:p-0 text-gray-900 font-sans",children:[r.jsx("div",{className:"mb-6 flex justify-end print:hidden",children:r.jsx("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 font-medium",children:" Imprimir Comprobante"})}),r.jsxs("div",{className:"border-b-2 border-gray-800 pb-4 mb-6 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:"COMPROBANTE DE PAGO"}),r.jsxs("p",{className:"text-lg text-gray-600 font-medium mt-1",children:["N ",t.id]}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[r.jsxs("p",{children:["Estado: ",r.jsx("span",{className:"font-semibold uppercase",children:t.estado})]}),r.jsxs("p",{children:["Referencia: ",r.jsx("span",{className:"font-semibold uppercase",children:t.referencia})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"CRONO POS"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Av. Principal #123"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Santo Domingo, SD"}),r.jsx("p",{className:"text-sm text-gray-600",children:"RNC: 1-01-00000-0"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Tel: (809) 555-0123"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Proveedor"}),r.jsx("p",{className:"font-bold text-lg",children:t.proveedorNombre}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["ID: ",t.proveedorId]})]}),r.jsxs("div",{className:"border border-gray-200 rounded p-4 bg-gray-50",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Detalles del Pago"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsx("div",{className:"text-gray-600",children:"Fecha:"}),r.jsx("div",{className:"font-medium text-right",children:new Date(t.fecha).toLocaleDateString()}),r.jsx("div",{className:"text-gray-600",children:"Mtodo:"}),r.jsx("div",{className:"font-medium text-right",children:t.metodo}),r.jsx("div",{className:"text-gray-600",children:"Moneda:"}),r.jsx("div",{className:"font-medium text-right",children:t.monedaCodigo||"DOP"}),t.tasaCambio>1&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-gray-600",children:"Tasa:"}),r.jsx("div",{className:"font-medium text-right",children:t.tasaCambio.toFixed(2)})]})]})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-700 uppercase mb-4",children:"Facturas Aplicadas"}),r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-gray-800",children:[r.jsx("th",{className:"py-2 text-left font-bold text-sm text-gray-700",children:"FACTURA N"}),r.jsx("th",{className:"py-2 text-right font-bold text-sm text-gray-700",children:"MONTO APLICADO"})]})}),r.jsx("tbody",{children:t.facturasAfectadas&&t.facturasAfectadas.map((l,c)=>r.jsxs("tr",{className:"border-b border-gray-200 text-sm",children:[r.jsx("td",{className:"py-2 font-mono text-gray-600",children:l.numero}),r.jsx("td",{className:"py-2 text-right font-bold",children:o(l.monto,t.monedaCodigo)})]},c))})]})]}),r.jsx("div",{className:"flex justify-end mb-12",children:r.jsx("div",{className:"w-64 border-t-2 border-gray-800 pt-2",children:r.jsxs("div",{className:"flex justify-between py-1 text-xl font-bold text-gray-900",children:[r.jsx("span",{children:"TOTAL PAGADO:"}),r.jsx("span",{children:o(t.monto,t.monedaCodigo)})]})})}),t.nota&&r.jsxs("div",{className:"mb-12 p-4 bg-gray-50 border border-gray-200 rounded",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nota"}),r.jsx("p",{className:"text-sm text-gray-700",children:t.nota})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-20 pt-12 mt-12 border-t border-gray-100 print:mt-24",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Emitido Por"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"border-t border-gray-400 w-3/4 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Recibido Conforme (Firma Proveedor)"})]})]})]})},Fh="http://localhost:5006/api",_B=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(!0),[f,h]=x.useState([]),[u,m]=x.useState({amount:0,date:new Date().toISOString().split("T")[0],method:"Efectivo",reference:"",monedaId:"",tasaCambio:1,allocations:{}}),[p,v]=x.useState(!1),[j,y]=x.useState(""),[b,N]=x.useState(!1);x.useEffect(()=>{c(!0),Promise.all([WD(),fetch(`${Fh}/Monedas`).then(k=>{if(!k.ok)throw new Error("Err Monedas: "+k.status);return k.json()})]).then(([k,I])=>{console.log("Data loaded:",k.length,I.length),t(k),h(I);const E=I.find(O=>O.esFuncional);E&&m(O=>({...O,monedaId:E.id,tasaCambio:1}))}).catch(k=>{console.error("Init Error:",k),y("Error carga: "+k.message)}).finally(()=>c(!1))},[]),x.useEffect(()=>{if(!n){o([]);return}o([]),fetch(`${Fh}/Cobros/Pendientes/${n.id}`).then(k=>k.json()).then(k=>o(k)).catch(k=>console.error("Error loading invoices",k))},[n]);const P=k=>{const I=parseFloat(k)||0;m(F=>({...F,amount:I}));let E=I;const O={},C=(F,V)=>F[V]===void 0?F[V.charAt(0).toUpperCase()+V.slice(1)]:F[V];s.filter(F=>{const V=C(F,"monedaId");return!u.monedaId||V==u.monedaId}).sort((F,V)=>{const T=new Date(C(F,"fecha")),L=new Date(C(V,"fecha"));return T-L}).forEach(F=>{if(E<=0)return;const V=C(F,"id"),T=parseFloat(C(F,"saldo")||0),L=Math.min(E,T);O[V]=L,E-=L}),m(F=>({...F,amount:I,allocations:O}))},A=async k=>{if(k.preventDefault(),!!n&&!(u.amount<=0)){v(!0);try{const I=parseInt(u.monedaId),E={ClienteId:n.id,Fecha:u.date,Monto:u.amount,MetodoPago:u.method,Referencia:u.reference||"",MonedaId:isNaN(I)?null:I,TasaCambio:parseFloat(u.tasaCambio)||1,Observaciones:"",Detalles:Object.keys(u.allocations).map(M=>({VentaId:parseInt(M)||0,MontoAplicado:parseFloat(u.allocations[M])||0})).filter(M=>M.VentaId>0&&M.MontoAplicado>0)};console.log("Submitting Payload:",E);const O=await fetch(`${Fh}/Cobros`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!O.ok){const M=await O.json().catch(()=>({}));throw console.error("Server Error:",M),new Error(M.message||"Error al guardar (Server 400/500)")}const C=await O.json();y(`Cobro Registrado: ${C.numero}`),m(M=>({...M,amount:0,reference:"",allocations:{}})),fetch(`${Fh}/Cobros/Pendientes/${n.id}`).then(M=>M.json()).then(M=>o(M)),setTimeout(()=>y(""),3e3)}catch(I){console.error(I),alert("Error al guardar cobro")}finally{v(!1)}}};return x.useMemo(()=>s.filter(k=>b||!u.monedaId||k.monedaId==u.monedaId).reduce((k,I)=>k+(parseFloat(I.saldo)||0),0),[s,u.monedaId,b]),r.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[r.jsx(Wr,{className:"mr-2 text-hd-orange"})," Cuentas por Cobrar"]}),r.jsxs("div",{className:"mb-2 text-[10px] text-gray-400",children:["DEBUG: Clients:",e.length," Monedas:",f.length," Loading:",l.toString()," Amount:",u.amount," InvCount:",s.length," Saving:",p.toString()]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs(Be,{children:[r.jsx(gt,{className:"bg-gray-50 pb-2",children:r.jsx(vt,{className:"text-sm uppercase text-gray-500",children:"Seleccionar Cliente"})}),r.jsxs("div",{className:"p-4",children:[r.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:n?.id||"",onChange:k=>{const I=e.find(E=>E.id==k.target.value);a(I)},children:[r.jsx("option",{value:"",children:"-- Seleccionar --"}),e.map(k=>r.jsxs("option",{value:k.id,children:[k.name," - ",k.rnc]},k.id))]}),n&&r.jsxs("div",{className:"mt-4 bg-orange-50 p-4 rounded border border-orange-100",children:[r.jsx("p",{className:"font-bold text-gray-800",children:n.name}),r.jsx("p",{className:"text-xs text-gray-500",children:n.address}),r.jsxs("div",{className:"mt-2 pt-2 border-t border-orange-200",children:[r.jsx("span",{className:"text-sm font-semibold",children:"Deuda Total:"}),r.jsx("div",{className:"flex flex-col mt-1 space-y-1",children:(()=>{const k=(E,O)=>E[O]||E[O.charAt(0).toUpperCase()+O.slice(1)],I=s.reduce((E,O)=>{const C=k(O,"monedaCodigo")||"DOP",M=parseFloat(k(O,"saldo"))||0;return E[C]=(E[C]||0)+M,E},{});return Object.keys(I).length===0?r.jsx("span",{className:"text-xs text-gray-500",children:"Sin deudas pendientes"}):Object.entries(I).map(([E,O])=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:E}),r.jsxs("span",{className:"font-bold text-red-600",children:[E==="USD"?"$":"RD$"," ",O.toLocaleString("en-US",{minimumFractionDigits:2})]})]},E))})()})]})]})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:n?r.jsxs(Be,{children:[r.jsxs(gt,{className:"flex flex-row justify-between items-center py-3 bg-gray-50",children:[r.jsxs(vt,{className:"text-gray-700 flex items-center gap-2",children:[r.jsx(si,{size:18})," Registrar Cobro"]}),j&&r.jsxs("span",{className:"text-green-600 text-sm flex items-center font-bold",children:[r.jsx(Cc,{size:14,className:"mr-1"})," ",j]})]}),r.jsx("div",{className:"p-6",children:r.jsxs("form",{onSubmit:A,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fecha"}),r.jsxs("div",{className:"relative",children:[r.jsx(ea,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ye,{type:"date",className:"pl-8",value:u.date,onChange:k=>m({...u,date:k.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mtodo Pago"}),r.jsxs("select",{className:"w-full border rounded p-2 h-10 bg-white",value:u.method,onChange:k=>m({...u,method:k.target.value}),children:[r.jsx("option",{children:"Efectivo"}),r.jsx("option",{children:"Cheque"}),r.jsx("option",{children:"Transferencia"}),r.jsx("option",{children:"Tarjeta"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Moneda Pago"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("select",{className:"w-full border rounded p-2 h-10 bg-white text-sm",value:u.monedaId,onChange:k=>{const I=k.target.value,E=f.find(O=>O.id==I);m(O=>({...O,monedaId:I,tasaCambio:E?E.tasa:1,allocations:{}}))},children:f.map(k=>r.jsxs("option",{value:k.id,children:[k.codigo," - ",k.nombre]},k.id))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"chkShowAll",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:b,onChange:k=>N(k.target.checked)}),r.jsx("label",{htmlFor:"chkShowAll",className:"text-xs text-gray-500 cursor-pointer select-none",children:"Ver facturas de todas las monedas"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Referencia"}),r.jsx(ye,{placeholder:"Ref transaccin/cheque...",value:u.reference,onChange:k=>m({...u,reference:k.target.value})})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-hd-orange font-bold",children:"Monto a Cobrar"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-400",children:"$"}),r.jsx(ye,{type:"number",className:"pl-7 font-bold text-lg",value:u.amount,onChange:k=>P(k.target.value)})]})]})]}),r.jsxs("div",{className:"border rounded-md overflow-hidden bg-gray-50 min-h-[300px] flex flex-col",children:[r.jsxs("div",{className:"bg-gray-100 px-4 py-2 text-xs font-bold text-gray-500 uppercase flex justify-between items-center border-b",children:[r.jsx("span",{children:"Facturas Pendientes"}),r.jsxs("span",{className:"text-gray-400",children:[s.length," FACTURAS"]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:(()=>{const k=(E,O)=>E[O]===void 0?E[O.charAt(0).toUpperCase()+O.slice(1)]:E[O],I=s.filter(E=>{const O=k(E,"monedaId");return b?!0:!u.monedaId||O==u.monedaId});return I.length===0?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 opacity-60 text-center p-8",children:[r.jsx(Cc,{className:"h-10 w-10 mb-2"}),r.jsx("p",{className:"text-sm",children:"No se encontraron facturas pendientes."})]}):I.map(E=>{const O=k(E,"id"),C=parseFloat(k(E,"saldo")||0),M=u.allocations[O]||0,F=M>=C,V=k(E,"monedaId"),T=k(E,"monedaCodigo"),L=k(E,"monedaSimbolo"),U=k(E,"numeroFactura"),J=k(E,"fecha"),q=k(E,"fechaVencimiento"),W=k(E,"ncf")||k(E,"NCF"),z=!u.monedaId||V==u.monedaId,K=J?new Date(J).toLocaleDateString():"N/A",B=q?new Date(q).toLocaleDateString():"N/A";return r.jsxs("div",{className:`bg-white border rounded p-3 flex justify-between items-center shadow-sm hover:border-hd-orange transition-all cursor-pointer ${F?"border-green-200 ring-1 ring-green-100":""} ${z?"":"bg-gray-50 opacity-90"}`,onClick:()=>{const R=u.allocations[O]||0,H=C-R;let Y={...u.allocations},ee=u.amount;H>.01?(Y[O]=C,ee+=H):(ee-=R,delete Y[O]),m(me=>({...me,amount:parseFloat(ee.toFixed(2)),allocations:Y}))},children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-bold text-gray-800",children:U}),!z&&r.jsx("span",{className:"text-[10px] bg-yellow-100 text-yellow-800 px-1 rounded border border-yellow-200 font-bold",children:T})]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[K," - Vence: ",B]}),r.jsxs("span",{className:"text-xs text-gray-400",children:["NCF: ",W||"N/A"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Saldo: ",r.jsxs("span",{className:"font-bold text-gray-900",children:[L," ",C.toLocaleString()]})]}),M>0&&r.jsxs("div",{className:"text-xs text-white bg-green-500 px-2 py-0.5 rounded-full inline-block font-bold shadow-sm",children:["Abono: $",M.toLocaleString()]})]})]},O)})})()})]}),r.jsxs("div",{className:"flex justify-end pt-4 border-t",children:[r.jsx(re,{type:"submit",disabled:p||u.amount<=0||s.length===0,className:"bg-hd-orange hover:bg-orange-600 text-white w-full md:w-auto md:px-8",children:p?"Procesando...":"Registrar Cobro"}),(p||u.amount<=0||s.length===0)&&r.jsxs("div",{className:"text-[10px] text-red-400 text-center mt-1",children:["Disabled Reason: ",p?"Saving ":""," ",u.amount<=0?"Amount<=0 ":""," ",s.length===0?"NoInv ":""]})]})]})})]}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-10 bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg text-gray-400",children:[r.jsx(Nj,{className:"h-12 w-12 mb-2 opacity-50"}),r.jsx("span",{className:"font-medium",children:"Seleccione un cliente para ver su estado de cuenta"})]})})]})]})},$B=[{id:1,nombre:"Juan Prez",empresa:"Ferretera Central",interes:"Equipos POS",origen:"Web",estado:"Nuevo",fecha:"2025-12-19"},{id:2,nombre:"Mara Garca",empresa:"Inmobiliaria S.A.",interes:"Software Contable",origen:"Referido",estado:"Contactado",fecha:"2025-12-18"},{id:3,nombre:"Roberto Soto",empresa:"Comercial Robert",interes:"Mantenimiento",origen:"Llamada Fra",estado:"Calificado",fecha:"2025-12-15"},{id:4,nombre:"Laura Luna",empresa:"Tienda El Sol",interes:"Equipos POS",origen:"Expo Feria",estado:"Perdido",fecha:"2025-12-10"}],FB=()=>{const[e,t]=x.useState($B),[n,a]=x.useState(""),[s,o]=x.useState(!1),[l,c]=x.useState({nombre:"",empresa:"",interes:"Equipos POS",origen:"Web",estado:"Nuevo"}),f=m=>{m.preventDefault();const p=e.length+1,v=new Date().toISOString().split("T")[0];t([{...l,id:p,fecha:v},...e]),o(!1),c({nombre:"",empresa:"",interes:"Equipos POS",origen:"Web",estado:"Nuevo"})},h=e.filter(m=>m.nombre.toLowerCase().includes(n.toLowerCase())||m.empresa.toLowerCase().includes(n.toLowerCase())),u=m=>{switch(m){case"Nuevo":return"bg-blue-100 text-blue-700 border-blue-200";case"Contactado":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"Calificado":return"bg-green-100 text-green-700 border-green-200";case"Perdido":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Prospectos (Leads)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Clientes potenciales que an no son compradores"})]}),r.jsxs(re,{onClick:()=>o(!0),className:"bg-hd-orange hover:bg-orange-600 text-white shadow-lg",children:[r.jsx(Gy,{className:"mr-2 h-4 w-4"})," Nuevo Prospecto"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"bg-blue-50/50 border-blue-100",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase tracking-wider",children:"Nuevos"}),r.jsx("h3",{className:"text-2xl font-black text-blue-900",children:e.filter(m=>m.estado==="Nuevo").length})]})}),r.jsx(Be,{className:"bg-yellow-50/50 border-yellow-100",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-yellow-600 font-bold uppercase tracking-wider",children:"En Seguimiento"}),r.jsx("h3",{className:"text-2xl font-black text-yellow-900",children:e.filter(m=>m.estado==="Contactado").length})]})}),r.jsx(Be,{className:"bg-green-50/50 border-green-100",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-green-600 font-bold uppercase tracking-wider",children:"Calificados"}),r.jsx("h3",{className:"text-2xl font-black text-green-900",children:e.filter(m=>m.estado==="Calificado").length})]})}),r.jsx(Be,{className:"bg-orange-50/50 border-orange-100",children:r.jsxs(Pt,{className:"p-4",children:[r.jsx("p",{className:"text-xs text-orange-600 font-bold uppercase tracking-wider",children:"Origen: Web"}),r.jsx("h3",{className:"text-2xl font-black text-orange-900",children:e.filter(m=>m.origen==="Web").length})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 flex items-center justify-between",children:r.jsxs("div",{className:"relative w-full max-w-xs",children:[r.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ye,{placeholder:"Buscar prospecto...",className:"pl-9 bg-white border-gray-200 focus:ring-hd-orange",value:n,onChange:m=>a(m.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(zt,{children:[r.jsx(Ut,{className:"bg-gray-50 uppercase text-[10px] font-bold text-gray-500 tracking-widest",children:r.jsxs(Me,{children:[r.jsx(ce,{className:"px-6 py-4",children:"Nombre / Empresa"}),r.jsx(ce,{className:"px-6 py-4 text-center",children:"Inters"}),r.jsx(ce,{className:"px-6 py-4 text-center",children:"Estado"}),r.jsx(ce,{className:"px-6 py-4 text-center",children:"Origen"}),r.jsx(ce,{className:"px-6 py-4 text-center",children:"Fecha"}),r.jsx(ce,{className:"px-6 py-4 text-right",children:"Acciones"})]})}),r.jsx(Bt,{children:h.map(m=>r.jsxs(Me,{className:"hover:bg-orange-50/30 transition-colors group",children:[r.jsx(G,{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-bold text-gray-900",children:m.nombre}),r.jsx("span",{className:"text-xs text-gray-500",children:m.empresa})]})}),r.jsx(G,{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-xs font-medium text-gray-600",children:m.interes})}),r.jsx(G,{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold border ${u(m.estado)}`,children:m.estado.toUpperCase()})}),r.jsx(G,{className:"px-6 py-4 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500",children:[r.jsx(Nl,{size:12,className:"text-orange-400"}),m.origen]})}),r.jsx(G,{className:"px-6 py-4 text-center text-xs text-gray-400",children:new Date(m.fecha).toLocaleDateString()}),r.jsx(G,{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-1 opacity-10 sm:opacity-100 group-hover:opacity-100 transition-opacity",children:[r.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:bg-blue-50",children:r.jsx(Uc,{size:16})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:bg-red-50",children:r.jsx(Qt,{size:16})})]})})]},m.id))})]})})]}),s&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border border-gray-100",children:[r.jsxs("div",{className:"p-4 bg-hd-orange text-white flex justify-between items-center bg-gradient-to-r from-hd-orange to-orange-500",children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[r.jsx(Gy,{className:"mr-2",size:20}),"Nuevo Prospecto"]}),r.jsx("button",{onClick:()=>o(!1),className:"hover:bg-white/20 p-1 rounded-full transition-colors",children:r.jsx(It,{size:20})})]}),r.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Nombre Completo"}),r.jsx(ye,{required:!0,className:"focus:ring-hd-orange",value:l.nombre,onChange:m=>c({...l,nombre:m.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Empresa / Negocio"}),r.jsx(ye,{required:!0,className:"focus:ring-hd-orange",value:l.empresa,onChange:m=>c({...l,empresa:m.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Inters"}),r.jsxs("select",{className:"w-full text-sm rounded-md border border-gray-300 p-2 focus:ring-hd-orange focus:border-hd-orange",value:l.interes,onChange:m=>c({...l,interes:m.target.value}),children:[r.jsx("option",{children:"Equipos POS"}),r.jsx("option",{children:"Software"}),r.jsx("option",{children:"Mantenimiento"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Origen"}),r.jsxs("select",{className:"w-full text-sm rounded-md border border-gray-300 p-2 focus:ring-hd-orange focus:border-hd-orange",value:l.origen,onChange:m=>c({...l,origen:m.target.value}),children:[r.jsx("option",{children:"Web"}),r.jsx("option",{children:"Referido"}),r.jsx("option",{children:"Llamada"}),r.jsx("option",{children:"Publicidad"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>o(!1),className:"text-gray-500 border-gray-200",children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-hd-orange hover:bg-orange-600 text-white shadow-md",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar Prospecto"]})]})]})]})})]})},LB=()=>r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Dashboard CRM"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Resumen de actividad y rendimiento comercial"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Be,{className:"border-none shadow-sm bg-gradient-to-br from-blue-600 to-blue-700 text-white",children:r.jsxs(Pt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Valor Pipeline"}),r.jsx("h3",{className:"text-2xl font-black",children:"$45,200.00"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-blue-200",children:[r.jsx(gu,{size:12,className:"mr-1"})," +12% vs mes anterior"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(wj,{size:24})})]})}),r.jsx(Be,{className:"border-none shadow-sm bg-gradient-to-br from-hd-orange to-orange-600 text-white",children:r.jsxs(Pt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-orange-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Prospectos Nuevos"}),r.jsx("h3",{className:"text-2xl font-black",children:"24"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-orange-200",children:[r.jsx(gu,{size:12,className:"mr-1"})," +8 esta semana"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(_r,{size:24})})]})}),r.jsx(Be,{className:"border-none shadow-sm bg-gradient-to-br from-green-600 to-green-700 text-white",children:r.jsxs(Pt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-green-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Tasa Conversin"}),r.jsx("h3",{className:"text-2xl font-black",children:"18.5%"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-green-200",children:[r.jsx(Qo,{size:12,className:"mr-1"})," Meta: 20%"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(ll,{size:24})})]})}),r.jsx(Be,{className:"border-none shadow-sm bg-gradient-to-br from-purple-600 to-purple-700 text-white",children:r.jsxs(Pt,{className:"p-5 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Citas Pendientes"}),r.jsx("h3",{className:"text-2xl font-black",children:"12"}),r.jsxs("div",{className:"flex items-center mt-2 text-[10px] text-purple-200",children:[r.jsx(ea,{size:12,className:"mr-1"})," 4 para hoy"]})]}),r.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-md",children:r.jsx(ea,{size:24})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Be,{children:[r.jsx(gt,{className:"border-b bg-gray-50/50",children:r.jsx(vt,{className:"text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Estado del Pipeline"})}),r.jsx(Pt,{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:[{label:"Prospeccin",count:15,value:"$12,000",color:"bg-blue-500",width:"75%"},{label:"Calificacin",count:8,value:"$8,500",color:"bg-yellow-500",width:"40%"},{label:"Propuesta",count:5,value:"$15,200",color:"bg-hd-orange",width:"25%"},{label:"Negociacin",count:3,value:"$9,500",color:"bg-green-500",width:"15%"}].map((e,t)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[r.jsxs("span",{className:"text-gray-600",children:[e.label," (",e.count,")"]}),r.jsx("span",{className:"text-gray-900",children:e.value})]}),r.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`${e.color} h-full rounded-full`,style:{width:e.width}})})]},t))})})]}),r.jsxs(Be,{children:[r.jsx(gt,{className:"border-b bg-gray-50/50",children:r.jsx(vt,{className:"text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Actividad Reciente"})}),r.jsx(Pt,{className:"p-0",children:r.jsx("div",{className:"divide-y max-h-[300px] overflow-y-auto",children:[{user:"Admin",action:"Nuevo prospecto creado",target:"Ferretera Central",time:"Hace 10 min"},{user:"Vendedor 1",action:"Tarea completada",target:"Llamada a Mara Garca",time:"Hace 1 hora"},{user:"Vendedor 2",action:"Oportunidad ganada",target:"Tienda El Sol",time:"Hace 3 horas"},{user:"Admin",action:"Email enviado",target:"Roberto Soto",time:"Hace 5 horas"},{user:"Vendedor 1",action:"Cita agendada",target:"Inmobiliaria S.A.",time:"Ayer"}].map((e,t)=>r.jsxs("div",{className:"p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-[10px] font-bold text-gray-500",children:e.user[0]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-xs text-gray-900",children:[r.jsx("span",{className:"font-bold",children:e.user})," ",e.action," para ",r.jsx("span",{className:"text-hd-orange font-medium",children:e.target})]}),r.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:e.time})]})]},t))})})]})]})]}),zB="http://localhost:5006/api",qc=({endpoint:e,title:t,columns:n})=>{const[a,s]=x.useState([]),[o,l]=x.useState(!0),[c,f]=x.useState(""),[h,u]=x.useState({key:"",direction:"asc"}),[m,p]=x.useState({}),[v,j]=x.useState({}),[y,b]=x.useState({}),[N,P]=x.useState(null),[A,k]=x.useState(n.reduce((W,z)=>({...W,[z.field]:z.width||150}),{}));x.useEffect(()=>{(async()=>{try{l(!0);const z=await fetch(`${zB}${e}`);if(!z.ok)throw new Error("Error fetching data");const K=await z.json();s(K)}catch(z){console.error(z)}finally{l(!1)}})()},[e]);const I=(W,z)=>{k(K=>({...K,[W]:z}))},E=W=>{let z="asc";h.key===W&&h.direction==="asc"&&(z="desc"),u({key:W,direction:z})},O=(W,z)=>{z.stopPropagation(),P(N===W?null:W)},C=(W,z)=>{p(K=>({...K,[W]:z}))},M=(W,z,K)=>{b(B=>({...B,[W]:{...B[W]||{min:"",max:""},[z]:K}}))},F=(W,z)=>{j(K=>{const B=K[W]||[];return B.includes(z)?{...K,[W]:B.filter(R=>R!==z)}:{...K,[W]:[...B,z]}})},V=W=>{const z=a.map(K=>String(K[W]||""));return[...new Set(z)].sort()},L=(()=>{let W=[...a];return c&&(W=W.filter(z=>Object.keys(z).some(K=>String(z[K]||"").toLowerCase().includes(c.toLowerCase())))),Object.keys(m).forEach(z=>{m[z]&&(W=W.filter(K=>String(K[z]||"").toLowerCase().includes(m[z].toLowerCase())))}),Object.keys(v).forEach(z=>{v[z]&&v[z].length>0&&(W=W.filter(K=>v[z].includes(String(K[z]))))}),Object.keys(y).forEach(z=>{const{min:K,max:B}=y[z];K!==""&&(W=W.filter(R=>(R[z]||0)>=parseFloat(K))),B!==""&&(W=W.filter(R=>(R[z]||0)<=parseFloat(B)))}),h.key&&W.sort((z,K)=>{const B=z[h.key],R=K[h.key];return B<R?h.direction==="asc"?-1:1:B>R?h.direction==="asc"?1:-1:0}),W})(),U=Object.values(A).reduce((W,z)=>W+z,0),J=()=>{if(L.length===0)return;const W=n.map(Y=>Y.label).join(","),z=L.map(Y=>n.map(ee=>`"${String(Y[ee.field]||"").replace(/"/g,'""')}"`).join(",")).join(`
`),K=`${W}
${z}`,B=new Blob(["\uFEFF"+K],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(B),H=document.createElement("a");H.setAttribute("href",R),H.setAttribute("download",`${t.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(H),H.click(),document.body.removeChild(H)},q=()=>{p({}),j({}),b({}),f("")};return r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500 p-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(cl,{className:"text-hd-orange",size:24}),t]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Vista tipo SmartList con filtros avanzados y exportacin."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:J,className:"border-green-600 text-green-700 hover:bg-green-50",children:[r.jsx(yj,{size:16,className:"mr-2"})," Exportar CSV"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:q,className:"text-gray-500",children:[r.jsx(It,{size:16,className:"mr-2"})," Limpiar"]})]})]}),r.jsxs(Be,{className:"overflow-hidden border-none shadow-lg",children:[r.jsxs(gt,{className:"bg-gray-50 border-b py-3 flex flex-row justify-between items-center",children:[r.jsx("div",{className:"flex items-center gap-4 text-xs font-medium text-gray-500",children:r.jsxs("span",{children:["Total Filas: ",r.jsx("span",{className:"text-hd-orange font-bold text-sm tracking-tight",children:L.length})]})}),r.jsxs("div",{className:"relative w-72",children:[r.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ye,{placeholder:"Bsqueda rpida...",className:"h-9 pl-10 border-gray-200 focus:border-hd-orange shadow-sm text-sm",value:c,onChange:W=>f(W.target.value)})]})]}),r.jsx("div",{className:"overflow-x-auto overflow-y-visible relative min-h-[600px] bg-white",children:r.jsxs(zt,{className:"table-fixed border-collapse",style:{width:U},children:[r.jsx(Ut,{children:r.jsx(Me,{className:"bg-white hover:bg-white border-b-2 border-gray-100",children:n.map(W=>r.jsx(UB,{label:W.label,field:W.field,type:W.type,sortConfig:h,onSort:E,onFilter:O,showFilter:N===W.field,filterValue:m[W.field],onFilterChange:C,numericValue:y[W.field],onNumericFilterChange:M,uniqueValues:V(W.field),selectedValues:v[W.field],onValueToggle:F,width:A[W.field],onResize:I},W.field))})}),r.jsx(Bt,{children:o?r.jsx(Me,{children:r.jsx(G,{colSpan:n.length,className:"text-center py-20 text-gray-400",children:"Cargando SmartList..."})}):L.length===0?r.jsx(Me,{children:r.jsx(G,{colSpan:n.length,className:"text-center py-20 text-gray-500 font-medium italic",children:"No se encontraron registros con los filtros aplicados."})}):L.map((W,z)=>r.jsx(Me,{className:"hover:bg-orange-50/50 transition-colors group",children:n.map(K=>r.jsx(G,{className:`text-xs py-2.5 border-r border-gray-50 last:border-r-0 ${K.type==="number"||K.type==="currency"?"text-right font-mono":""}`,children:BB(W[K.field],K.type,W.Simbolo||W.Symbol)},K.field))},z))})]})})]})]})},UB=({label:e,field:t,type:n,sortConfig:a,onSort:s,onFilter:o,showFilter:l,filterValue:c="",onFilterChange:f,numericValue:h={min:"",max:""},onNumericFilterChange:u,uniqueValues:m=[],selectedValues:p=[],onValueToggle:v,width:j,onResize:y})=>{const b=a.key===t,N=n==="number"||n==="currency",P=A=>{A.preventDefault(),A.stopPropagation();const k=A.pageX,I=j,E=C=>{const M=Math.max(80,I+(C.pageX-k));y(t,M)},O=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",O)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",O)};return r.jsxs(ce,{className:"relative p-0 h-10 border-r border-gray-100 last:border-r-0 group/head",style:{width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`},children:[r.jsxs("div",{className:`flex items-center justify-between h-full px-3 py-2 cursor-pointer hover:bg-gray-100 transition-colors ${b?"bg-orange-50":""}`,onClick:()=>s(t),children:[r.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[r.jsx("span",{className:`text-[11px] font-black uppercase tracking-wider truncate ${b?"text-hd-orange":"text-gray-500"}`,children:e}),b?a.direction==="asc"?r.jsx(Ln,{size:12,className:"text-hd-orange"}):r.jsx(Kr,{size:12,className:"text-hd-orange"}):r.jsx(Bu,{size:12,className:"text-gray-300 opacity-0 group-hover/head:opacity-100 transition-opacity"})]}),r.jsx("button",{onClick:A=>o(t,A),className:`p-1 rounded hover:bg-gray-200 transition-colors ${c||p&&p.length>0?"text-hd-orange":"text-gray-400"}`,children:r.jsx(Vu,{size:12})})]}),r.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-hd-orange opacity-0 hover:opacity-100 z-10 transition-opacity",onMouseDown:P,onClick:A=>A.stopPropagation()}),l&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 shadow-2xl rounded-sm z-[100] animate-in fade-in zoom-in duration-200 overflow-hidden text-xs",onClick:A=>A.stopPropagation(),children:[r.jsxs("div",{className:"p-1 border-b bg-gray-50",children:[r.jsxs("div",{className:"flex items-center px-4 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-bold",onClick:()=>{s(t),o(t,{stopPropagation:()=>{}})},children:[r.jsx(Ln,{size:14,className:"mr-2 text-gray-400"})," Orden Ascendente"]}),r.jsxs("div",{className:"flex items-center px-4 py-2 hover:bg-hd-orange/10 cursor-pointer text-gray-700 font-bold",onClick:()=>{s(t),o(t,{stopPropagation:()=>{}})},children:[r.jsx(Kr,{size:14,className:"mr-2 text-gray-400"})," Orden Descendente"]})]}),r.jsx("div",{className:"p-3 border-b",children:N?r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ye,{type:"number",placeholder:"Min",value:h.min,onChange:A=>u(t,"min",A.target.value),className:"h-8 text-xs font-mono"}),r.jsx(ye,{type:"number",placeholder:"Max",value:h.max,onChange:A=>u(t,"max",A.target.value),className:"h-8 text-xs font-mono"})]}):r.jsxs("div",{className:"relative",children:[r.jsx(Ht,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",size:14}),r.jsx(ye,{placeholder:"Buscar...",value:c,onChange:A=>f(t,A.target.value),className:"h-8 pl-8 text-xs border-gray-200 shadow-inner",autoFocus:!0})]})}),r.jsx("div",{className:"max-h-56 overflow-y-auto p-1 bg-gray-50",children:r.jsxs("div",{className:"space-y-0.5",children:[m.slice(0,100).map(A=>r.jsxs("label",{className:"flex items-center px-3 py-1.5 hover:bg-white rounded cursor-pointer transition-colors group/item",children:[r.jsx("input",{type:"checkbox",checked:p.includes(A),onChange:()=>v(t,A),className:"h-3.5 w-3.5 rounded border-gray-300 text-hd-orange focus:ring-hd-orange"}),r.jsx("span",{className:"ml-2 text-[11px] text-gray-600 truncate group-hover/item:text-black",children:A})]},A)),m.length>100&&r.jsx("div",{className:"p-2 text-[10px] text-gray-400 text-center",children:"Mostrando primeros 100..."})]})}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 border-t",children:[r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] h-7",onClick:()=>o(t,{stopPropagation:()=>{}}),children:"Cerrar"}),r.jsx(re,{size:"xs",variant:"ghost",className:"text-[10px] h-7 text-hd-orange font-bold uppercase",onClick:()=>{N?(u(t,"min",""),u(t,"max","")):(f(t,""),p.forEach(A=>v(t,A)))},children:"Limpiar"})]})]})]})},BB=(e,t,n="RD$")=>e==null?"-":t==="date"?new Date(e).toLocaleDateString("es-DO",{year:"numeric",month:"2-digit",day:"2-digit"}):t==="currency"?`${n||"RD$"} ${new Intl.NumberFormat("es-DO",{minimumFractionDigits:2}).format(e)}`:t==="number"?new Intl.NumberFormat("es-DO").format(e):String(e),VB=()=>{const e=[{field:"Numero",label:"No. Factura",type:"text",width:120},{field:"Fecha",label:"Fecha",type:"date",width:100},{field:"Proveedor",label:"Proveedor",type:"text",width:250},{field:"Moneda",label:"Moneda",type:"text",width:80},{field:"Total",label:"Total",type:"currency",width:120},{field:"Saldo",label:"Saldo Pend.",type:"currency",width:120},{field:"Estado",label:"Estado",type:"text",width:100},{field:"Almacen",label:"Almacn Dest.",type:"text",width:150},{field:"Antiguedad",label:"Antigedad (das)",type:"number",width:100}];return r.jsx(qc,{endpoint:"/SmartList/Facturas",title:"SmartList: Facturas de Compra",columns:e})},qB=()=>{const e=[{field:"Fecha",label:"Fecha",type:"date",width:100},{field:"Factura",label:"No. Factura",type:"text",width:120},{field:"Proveedor",label:"Proveedor",type:"text",width:220},{field:"Cod_Articulo",label:"Cdigo",type:"text",width:100},{field:"Articulo",label:"Descripcin Artculo",type:"text",width:300},{field:"Cantidad",label:"Cant.",type:"number",width:80},{field:"Unidad",label:"UM",type:"text",width:60},{field:"Costo",label:"Costo Unit.",type:"currency",width:110},{field:"Total_Linea",label:"Total Lnea",type:"currency",width:130},{field:"Almacen",label:"Almacn",type:"text",width:140}];return r.jsx(qc,{endpoint:"/SmartList/Articulos",title:"SmartList: Detalle de Compras por Artculo",columns:e})},GB=()=>{const e=[{field:"Codigo",label:"Cdigo",type:"text",width:100},{field:"Proveedor",label:"Razn Social",type:"text",width:280},{field:"RNC",label:"RNC/Cdula",type:"text",width:120},{field:"Total_Comprado",label:"Total Comprado (RD$)",type:"currency",width:150},{field:"Saldo_Pendiente",label:"Saldo Actual (RD$)",type:"currency",width:150},{field:"Cant_Facturas",label:"Facturas",type:"number",width:100},{field:"Telefono",label:"Telfono",type:"text",width:120},{field:"Email",label:"Correo Electrnico",type:"text",width:200}];return r.jsx(qc,{endpoint:"/SmartList/Proveedores",title:"SmartList: Maestro de Proveedores y Balances",columns:e})},HB=()=>{const e=[{field:"Fecha",label:"Fecha Pago",type:"date",width:110},{field:"No_Pago",label:"No. Recibo",type:"text",width:120},{field:"Proveedor",label:"Proveedor",type:"text",width:250},{field:"Monto_A_Factura",label:"Monto Aplicado",type:"currency",width:130},{field:"Factura_Afectada",label:"Factura Pagada",type:"text",width:130},{field:"Metodo",label:"Mtodo",type:"text",width:100},{field:"Referencia",label:"Referencia",type:"text",width:180},{field:"Estado_Pago",label:"Estado",type:"text",width:100}];return r.jsx(qc,{endpoint:"/SmartList/Pagos",title:"SmartList: Histrico de Pagos Aplicados",columns:e})},WB=()=>{const e=[{field:"Almacen",label:"Ubicacin / Almacn",type:"text",width:200},{field:"Codigo",label:"Cdigo Art.",type:"text",width:120},{field:"Articulo",label:"Descripcin del Artculo",type:"text",width:350},{field:"Unidad",label:"Unidad",type:"text",width:80},{field:"Stock_Total",label:"Existencia",type:"number",width:100},{field:"Costo_Ultimo",label:"Costo Unit.",type:"currency",width:120},{field:"Valor_Inventario",label:"Valor Total",type:"currency",width:140}];return r.jsx(qc,{endpoint:"/SmartList/StockAlmacen",title:"SmartList: Inventario y Valoracin por Almacn",columns:e})},KB=()=>{const e=[{field:"Fecha",label:"Fecha",type:"date",width:110},{field:"No_Factura",label:"No. Factura",type:"text",width:130},{field:"Cliente",label:"Cliente",type:"text",width:200},{field:"NCF",label:"NCF",type:"text",width:140},{field:"Metodo_Pago",label:"Mtodo de Pago",type:"text",width:130},{field:"Monto_Recibido",label:"Monto Recibido",type:"currency",width:130},{field:"Cambio",label:"Cambio",type:"currency",width:100},{field:"Total",label:"Total",type:"currency",width:120},{field:"Estado",label:"Estado",type:"text",width:100}];return r.jsx(qc,{endpoint:"/SmartList/Cobros",title:"SmartList: Cobros y Mtodos de Pago",columns:e})};var YB=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Uj(e){if(typeof e!="string")return!1;var t=YB;return t.includes(e)}var XB=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],JB=new Set(XB);function HO(e){return typeof e!="string"?!1:JB.has(e)}function WO(e){return typeof e=="string"&&e.startsWith("data-")}function ba(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(HO(n)||WO(n))&&(t[n]=e[n]);return t}function Pc(e){if(e==null)return null;if(x.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ba(t)}return typeof e=="object"&&!Array.isArray(e)?ba(e):null}function zn(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(HO(n)||WO(n)||Uj(n))&&(t[n]=e[n]);return t}function QB(e){return e==null?null:x.isValidElement(e)?zn(e.props):typeof e=="object"&&!Array.isArray(e)?zn(e):null}var ZB=["children","width","height","viewBox","className","style","title","desc"];function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ub.apply(null,arguments)}function e7(e,t){if(e==null)return{};var n,a,s=t7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function t7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var KO=x.forwardRef((e,t)=>{var{children:n,width:a,height:s,viewBox:o,className:l,style:c,title:f,desc:h}=e,u=e7(e,ZB),m=o||{width:a,height:s,x:0,y:0},p=Yt("recharts-surface",l);return x.createElement("svg",ub({},zn(u),{className:p,width:a,height:s,style:c,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),x.createElement("title",null,f),x.createElement("desc",null,h),n)}),r7=["children","className"];function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fb.apply(null,arguments)}function n7(e,t){if(e==null)return{};var n,a,s=a7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var bn=x.forwardRef((e,t)=>{var{children:n,className:a}=e,s=n7(e,r7),o=Yt("recharts-layer",a);return x.createElement("g",fb({className:o},zn(s),{ref:t}),n)}),s7=x.createContext(null);function ir(e){return function(){return e}}const YO=Math.cos,Am=Math.sin,us=Math.sqrt,Im=Math.PI,Gp=2*Im,hb=Math.PI,mb=2*hb,Wi=1e-6,o7=mb-Wi;function XO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function i7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return XO;const n=10**t;return function(a){this._+=a[0];for(let s=1,o=a.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class l7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?XO:i7(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,o,l){this._append`C${+t},${+n},${+a},${+s},${this._x1=+o},${this._y1=+l}`}arcTo(t,n,a,s,o){if(t=+t,n=+n,a=+a,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,c=this._y1,f=a-t,h=s-n,u=l-t,m=c-n,p=u*u+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Wi)if(!(Math.abs(m*f-h*u)>Wi)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let v=a-l,j=s-c,y=f*f+h*h,b=v*v+j*j,N=Math.sqrt(y),P=Math.sqrt(p),A=o*Math.tan((hb-Math.acos((y+p-b)/(2*N*P)))/2),k=A/P,I=A/N;Math.abs(k-1)>Wi&&this._append`L${t+k*u},${n+k*m}`,this._append`A${o},${o},0,0,${+(m*v>u*j)},${this._x1=t+I*f},${this._y1=n+I*h}`}}arc(t,n,a,s,o,l){if(t=+t,n=+n,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(s),f=a*Math.sin(s),h=t+c,u=n+f,m=1^l,p=l?s-o:o-s;this._x1===null?this._append`M${h},${u}`:(Math.abs(this._x1-h)>Wi||Math.abs(this._y1-u)>Wi)&&this._append`L${h},${u}`,a&&(p<0&&(p=p%mb+mb),p>o7?this._append`A${a},${a},0,1,${m},${t-c},${n-f}A${a},${a},0,1,${m},${this._x1=h},${this._y1=u}`:p>Wi&&this._append`A${a},${a},0,${+(p>=hb)},${m},${this._x1=t+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function Bj(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new l7(t)}function Vj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JO(e){this._context=e}JO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Hp(e){return new JO(e)}function QO(e){return e[0]}function ZO(e){return e[1]}function e5(e,t){var n=ir(!0),a=null,s=Hp,o=null,l=Bj(c);e=typeof e=="function"?e:e===void 0?QO:ir(e),t=typeof t=="function"?t:t===void 0?ZO:ir(t);function c(f){var h,u=(f=Vj(f)).length,m,p=!1,v;for(a==null&&(o=s(v=l())),h=0;h<=u;++h)!(h<u&&n(m=f[h],h,f))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(m,h,f),+t(m,h,f));if(v)return o=null,v+""||null}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:ir(+f),c):e},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:ir(+f),c):t},c.defined=function(f){return arguments.length?(n=typeof f=="function"?f:ir(!!f),c):n},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}function Lh(e,t,n){var a=null,s=ir(!0),o=null,l=Hp,c=null,f=Bj(h);e=typeof e=="function"?e:e===void 0?QO:ir(+e),t=typeof t=="function"?t:ir(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ZO:ir(+n);function h(m){var p,v,j,y=(m=Vj(m)).length,b,N=!1,P,A=new Array(y),k=new Array(y);for(o==null&&(c=l(P=f())),p=0;p<=y;++p){if(!(p<y&&s(b=m[p],p,m))===N)if(N=!N)v=p,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),j=p-1;j>=v;--j)c.point(A[j],k[j]);c.lineEnd(),c.areaEnd()}N&&(A[p]=+e(b,p,m),k[p]=+t(b,p,m),c.point(a?+a(b,p,m):A[p],n?+n(b,p,m):k[p]))}if(P)return c=null,P+""||null}function u(){return e5().defined(s).curve(l).context(o)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:ir(+m),a=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ir(+m),h):e},h.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:ir(+m),h):a},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:ir(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ir(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ir(+m),h):n},h.lineX0=h.lineY0=function(){return u().x(e).y(t)},h.lineY1=function(){return u().x(e).y(n)},h.lineX1=function(){return u().x(a).y(t)},h.defined=function(m){return arguments.length?(s=typeof m=="function"?m:ir(!!m),h):s},h.curve=function(m){return arguments.length?(l=m,o!=null&&(c=l(o)),h):l},h.context=function(m){return arguments.length?(m==null?o=c=null:c=l(o=m),h):o},h}class t5{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function c7(e){return new t5(e,!0)}function d7(e){return new t5(e,!1)}const qj={draw(e,t){const n=us(t/Im);e.moveTo(n,0),e.arc(0,0,n,0,Gp)}},u7={draw(e,t){const n=us(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},r5=us(1/3),f7=r5*2,h7={draw(e,t){const n=us(t/f7),a=n*r5;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},m7={draw(e,t){const n=us(t),a=-n/2;e.rect(a,a,n,n)}},p7=.8908130915292852,n5=Am(Im/10)/Am(7*Im/10),g7=Am(Gp/10)*n5,x7=-YO(Gp/10)*n5,v7={draw(e,t){const n=us(t*p7),a=g7*n,s=x7*n;e.moveTo(0,-n),e.lineTo(a,s);for(let o=1;o<5;++o){const l=Gp*o/5,c=YO(l),f=Am(l);e.lineTo(f*n,-c*n),e.lineTo(c*a-f*s,f*a+c*s)}e.closePath()}},W0=us(3),y7={draw(e,t){const n=-us(t/(W0*3));e.moveTo(0,n*2),e.lineTo(-W0*n,-n),e.lineTo(W0*n,-n),e.closePath()}},Da=-.5,Oa=us(3)/2,pb=1/us(12),b7=(pb/2+1)*3,j7={draw(e,t){const n=us(t/b7),a=n/2,s=n*pb,o=a,l=n*pb+n,c=-o,f=l;e.moveTo(a,s),e.lineTo(o,l),e.lineTo(c,f),e.lineTo(Da*a-Oa*s,Oa*a+Da*s),e.lineTo(Da*o-Oa*l,Oa*o+Da*l),e.lineTo(Da*c-Oa*f,Oa*c+Da*f),e.lineTo(Da*a+Oa*s,Da*s-Oa*a),e.lineTo(Da*o+Oa*l,Da*l-Oa*o),e.lineTo(Da*c+Oa*f,Da*f-Oa*c),e.closePath()}};function w7(e,t){let n=null,a=Bj(s);e=typeof e=="function"?e:ir(e||qj),t=typeof t=="function"?t:ir(t===void 0?64:+t);function s(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return s.type=function(o){return arguments.length?(e=typeof o=="function"?o:ir(o),s):e},s.size=function(o){return arguments.length?(t=typeof o=="function"?o:ir(+o),s):t},s.context=function(o){return arguments.length?(n=o??null,s):n},s}function Dm(){}function Om(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function a5(e){this._context=e}a5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Om(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Om(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N7(e){return new a5(e)}function s5(e){this._context=e}s5.prototype={areaStart:Dm,areaEnd:Dm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Om(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S7(e){return new s5(e)}function o5(e){this._context=e}o5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Om(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C7(e){return new o5(e)}function i5(e){this._context=e}i5.prototype={areaStart:Dm,areaEnd:Dm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function k7(e){return new i5(e)}function C2(e){return e<0?-1:1}function k2(e,t,n){var a=e._x1-e._x0,s=t-e._x1,o=(e._y1-e._y0)/(a||s<0&&-0),l=(n-e._y1)/(s||a<0&&-0),c=(o*s+l*a)/(a+s);return(C2(o)+C2(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(c))||0}function P2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function K0(e,t,n){var a=e._x0,s=e._y0,o=e._x1,l=e._y1,c=(o-a)/3;e._context.bezierCurveTo(a+c,s+c*t,o-c,l-c*n,o,l)}function Mm(e){this._context=e}Mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K0(this,this._t0,P2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,K0(this,P2(this,n=k2(this,e,t)),n);break;default:K0(this,this._t0,n=k2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function l5(e){this._context=new c5(e)}(l5.prototype=Object.create(Mm.prototype)).point=function(e,t){Mm.prototype.point.call(this,t,e)};function c5(e){this._context=e}c5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,o){this._context.bezierCurveTo(t,e,a,n,o,s)}};function P7(e){return new Mm(e)}function E7(e){return new l5(e)}function d5(e){this._context=e}d5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=E2(e),s=E2(t),o=0,l=1;l<n;++o,++l)this._context.bezierCurveTo(a[0][o],s[0][o],a[1][o],s[1][o],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function E2(e){var t,n=e.length-1,a,s=new Array(n),o=new Array(n),l=new Array(n);for(s[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,o[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/o[t-1],o[t]-=a,l[t]-=a*l[t-1];for(s[n-1]=l[n-1]/o[n-1],t=n-2;t>=0;--t)s[t]=(l[t]-s[t+1])/o[t];for(o[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function A7(e){return new d5(e)}function Wp(e,t){this._context=e,this._t=t}Wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function I7(e){return new Wp(e,.5)}function D7(e){return new Wp(e,0)}function O7(e){return new Wp(e,1)}function fl(e,t){if((l=e.length)>1)for(var n=1,a,s,o=e[t[0]],l,c=o.length;n<l;++n)for(s=o,o=e[t[n]],a=0;a<c;++a)o[a][1]+=o[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function gb(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function M7(e,t){return e[t]}function T7(e){const t=[];return t.key=e,t}function R7(){var e=ir([]),t=gb,n=fl,a=M7;function s(o){var l=Array.from(e.apply(this,arguments),T7),c,f=l.length,h=-1,u;for(const m of o)for(c=0,++h;c<f;++c)(l[c][h]=[0,+a(m,l[c].key,h,o)]).data=m;for(c=0,u=Vj(t(l));c<f;++c)l[u[c]].index=c;return n(l,u),l}return s.keys=function(o){return arguments.length?(e=typeof o=="function"?o:ir(Array.from(o)),s):e},s.value=function(o){return arguments.length?(a=typeof o=="function"?o:ir(+o),s):a},s.order=function(o){return arguments.length?(t=o==null?gb:typeof o=="function"?o:ir(Array.from(o)),s):t},s.offset=function(o){return arguments.length?(n=o??fl,s):n},s}function _7(e,t){if((a=e.length)>0){for(var n,a,s=0,o=e[0].length,l;s<o;++s){for(l=n=0;n<a;++n)l+=e[n][s][1]||0;if(l)for(n=0;n<a;++n)e[n][s][1]/=l}fl(e,t)}}function $7(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,o=a.length;n<o;++n){for(var l=0,c=0;l<s;++l)c+=e[l][n][1]||0;a[n][1]+=a[n][0]=-c/2}fl(e,t)}}function F7(e,t){if(!(!((l=e.length)>0)||!((o=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,o,l;a<o;++a){for(var c=0,f=0,h=0;c<l;++c){for(var u=e[t[c]],m=u[a][1]||0,p=u[a-1][1]||0,v=(m-p)/2,j=0;j<c;++j){var y=e[t[j]],b=y[a][1]||0,N=y[a-1][1]||0;v+=b-N}f+=m,h+=v*m}s[a-1][1]+=s[a-1][0]=n,f&&(n-=h/f)}s[a-1][1]+=s[a-1][0]=n,fl(e,t)}}var Y0={},X0={},A2;function L7(){return A2||(A2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(X0)),X0}var J0={},I2;function u5(){return I2||(I2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(J0)),J0}var Q0={},D2;function Gj(){return D2||(D2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Q0)),Q0}var Z0={},ev={},O2;function z7(){return O2||(O2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(ev)),ev}var M2;function Hj(){return M2||(M2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z7(),n=Gj();function a(s){if(Array.isArray(s))return s.map(n.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const o=[],l=s.length;if(l===0)return o;let c=0,f="",h="",u=!1;for(s.charCodeAt(0)===46&&(o.push(""),c++);c<l;){const m=s[c];h?m==="\\"&&c+1<l?(c++,f+=s[c]):m===h?h="":f+=m:u?m==='"'||m==="'"?h=m:m==="]"?(u=!1,o.push(f),f=""):f+=m:m==="["?(u=!0,f&&(o.push(f),f="")):m==="."?f&&(o.push(f),f=""):f+=m,c++}return f&&o.push(f),o}e.toPath=a})(Z0)),Z0}var T2;function Wj(){return T2||(T2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L7(),n=u5(),a=Gj(),s=Hj();function o(c,f,h){if(c==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const u=c[f];return u===void 0?n.isDeepKey(f)?o(c,s.toPath(f),h):h:u}case"number":case"symbol":{typeof f=="number"&&(f=a.toKey(f));const u=c[f];return u===void 0?h:u}default:{if(Array.isArray(f))return l(c,f,h);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const u=c[f];return u===void 0?h:u}}}function l(c,f,h){if(f.length===0)return h;let u=c;for(let m=0;m<f.length;m++){if(u==null||t.isUnsafeProperty(f[m]))return h;u=u[f[m]]}return u===void 0?h:u}e.get=o})(Y0)),Y0}var tv,R2;function U7(){return R2||(R2=1,tv=Wj().get),tv}var B7=U7();const hl=Os(B7);var V7=4;function ei(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V7,n=10**t,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function Er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((s,o,l)=>{var c=n[l-1];return typeof c=="string"?s+c+o:c!==void 0?s+ei(c)+o:s+o},"")}var In=e=>e===0?0:e>0?1:-1,ls=e=>typeof e=="number"&&e!=+e,lo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,lt=e=>(typeof e=="number"||e instanceof Number)&&!ls(e),As=e=>lt(e)||typeof e=="string",q7=0,yu=e=>{var t=++q7;return"".concat(e||"").concat(t)},pa=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&typeof t!="string")return a;var o;if(lo(t)){if(n==null)return a;var l=t.indexOf("%");o=n*parseFloat(t.slice(0,l))/100}else o=+t;return ls(o)&&(o=a),s&&n!=null&&o>n&&(o=n),o},f5=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function xn(e,t,n){return lt(e)&&lt(t)?ei(e+n*(t-e)):t}function h5(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):hl(a,t))===n)}var ln=e=>e===null||typeof e>"u",Ju=e=>ln(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function G7(e){return e!=null}function Qu(){}var H7=["type","size","sizeType"];function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xb.apply(null,arguments)}function _2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(n),!0).forEach(function(a){W7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function W7(e,t,n){return(t=K7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K7(e){var t=Y7(e,"string");return typeof t=="symbol"?t:t+""}function Y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X7(e,t){if(e==null)return{};var n,a,s=J7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function J7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var m5={symbolCircle:qj,symbolCross:u7,symbolDiamond:h7,symbolSquare:m7,symbolStar:v7,symbolTriangle:y7,symbolWye:j7},Q7=Math.PI/180,Z7=e=>{var t="symbol".concat(Ju(e));return m5[t]||qj},eV=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Q7;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},tV=(e,t)=>{m5["symbol".concat(Ju(e))]=t},p5=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,s=X7(e,H7),o=$2($2({},s),{},{type:t,size:n,sizeType:a}),l="circle";typeof t=="string"&&(l=t);var c=()=>{var p=Z7(l),v=w7().type(p).size(eV(n,a,l)),j=v();if(j!==null)return j},{className:f,cx:h,cy:u}=o,m=zn(o);return lt(h)&&lt(u)&&lt(n)?x.createElement("path",xb({},m,{className:Yt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(u,")"),d:c()})):null};p5.registerSymbol=tV;var g5=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Kj=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{Uj(s)&&(a[s]=(o=>n[s](n,o)))}),a},rV=(e,t,n)=>a=>(e(t,n,a),null),x5=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var o=e[s];Uj(s)&&typeof o=="function"&&(a||(a={}),a[s]=rV(o,t,n))}),a};function F2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function nV(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F2(Object(n),!0).forEach(function(a){aV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aV(e,t,n){return(t=sV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sV(e){var t=oV(e,"string");return typeof t=="symbol"?t:t+""}function oV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jn(e,t){var n=nV({},e),a=t,s=Object.keys(t),o=s.reduce((l,c)=>(l[c]===void 0&&a[c]!==void 0&&(l[c]=a[c]),l),n);return o}var rv={},nv={},L2;function iV(){return L2||(L2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const s=new Map;for(let o=0;o<n.length;o++){const l=n[o],c=a(l);s.has(c)||s.set(c,l)}return Array.from(s.values())}e.uniqBy=t})(nv)),nv}var av={},z2;function v5(){return z2||(z2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(av)),av}var sv={},ov={},iv={},U2;function lV(){return U2||(U2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(iv)),iv}var B2;function Yj(){return B2||(B2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lV();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(ov)),ov}var lv={},V2;function cV(){return V2||(V2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(lv)),lv}var q2;function dV(){return q2||(q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yj(),n=cV();function a(s){return n.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a})(sv)),sv}var cv={},dv={},G2;function uV(){return G2||(G2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wj();function n(a){return function(s){return t.get(s,a)}}e.property=n})(dv)),dv}var uv={},fv={},hv={},mv={},H2;function y5(){return H2||(H2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(mv)),mv}var pv={},W2;function b5(){return W2||(W2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(pv)),pv}var gv={},K2;function j5(){return K2||(K2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=t})(gv)),gv}var Y2;function fV(){return Y2||(Y2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y5(),n=b5(),a=j5();function s(u,m,p){return typeof p!="function"?s(u,m,()=>{}):o(u,m,function v(j,y,b,N,P,A){const k=p(j,y,b,N,P,A);return k!==void 0?!!k:o(j,y,v,A)},new Map)}function o(u,m,p,v){if(m===u)return!0;switch(typeof m){case"object":return l(u,m,p,v);case"function":return Object.keys(m).length>0?o(u,{...m},p,v):a.eq(u,m);default:return t.isObject(u)?typeof m=="string"?m==="":!0:a.eq(u,m)}}function l(u,m,p,v){if(m==null)return!0;if(Array.isArray(m))return f(u,m,p,v);if(m instanceof Map)return c(u,m,p,v);if(m instanceof Set)return h(u,m,p,v);const j=Object.keys(m);if(u==null||n.isPrimitive(u))return j.length===0;if(j.length===0)return!0;if(v?.has(m))return v.get(m)===u;v?.set(m,u);try{for(let y=0;y<j.length;y++){const b=j[y];if(!n.isPrimitive(u)&&!(b in u)||m[b]===void 0&&u[b]!==void 0||m[b]===null&&u[b]!==null||!p(u[b],m[b],b,u,m,v))return!1}return!0}finally{v?.delete(m)}}function c(u,m,p,v){if(m.size===0)return!0;if(!(u instanceof Map))return!1;for(const[j,y]of m.entries()){const b=u.get(j);if(p(b,y,j,u,m,v)===!1)return!1}return!0}function f(u,m,p,v){if(m.length===0)return!0;if(!Array.isArray(u))return!1;const j=new Set;for(let y=0;y<m.length;y++){const b=m[y];let N=!1;for(let P=0;P<u.length;P++){if(j.has(P))continue;const A=u[P];let k=!1;if(p(A,b,y,u,m,v)&&(k=!0),k){j.add(P),N=!0;break}}if(!N)return!1}return!0}function h(u,m,p,v){return m.size===0?!0:u instanceof Set?f([...u],[...m],p,v):!1}e.isMatchWith=s,e.isSetMatch=h})(hv)),hv}var X2;function w5(){return X2||(X2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fV();function n(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=n})(fv)),fv}var xv={},vv={},yv={},J2;function hV(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(yv)),yv}var bv={},Q2;function N5(){return Q2||(Q2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(bv)),bv}var jv={},Z2;function S5(){return Z2||(Z2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",s="[object Boolean]",o="[object Arguments]",l="[object Symbol]",c="[object Date]",f="[object Map]",h="[object Set]",u="[object Array]",m="[object Function]",p="[object ArrayBuffer]",v="[object Object]",j="[object Error]",y="[object DataView]",b="[object Uint8Array]",N="[object Uint8ClampedArray]",P="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",I="[object Int8Array]",E="[object Int16Array]",O="[object Int32Array]",C="[object BigInt64Array]",M="[object Float32Array]",F="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=k,e.booleanTag=s,e.dataViewTag=y,e.dateTag=c,e.errorTag=j,e.float32ArrayTag=M,e.float64ArrayTag=F,e.functionTag=m,e.int16ArrayTag=E,e.int32ArrayTag=O,e.int8ArrayTag=I,e.mapTag=f,e.numberTag=a,e.objectTag=v,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=P,e.uint32ArrayTag=A,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=N})(jv)),jv}var wv={},ek;function mV(){return ek||(ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(wv)),wv}var tk;function C5(){return tk||(tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hV(),n=N5(),a=S5(),s=b5(),o=mV();function l(u,m){return c(u,void 0,u,new Map,m)}function c(u,m,p,v=new Map,j=void 0){const y=j?.(u,m,p,v);if(y!==void 0)return y;if(s.isPrimitive(u))return u;if(v.has(u))return v.get(u);if(Array.isArray(u)){const b=new Array(u.length);v.set(u,b);for(let N=0;N<u.length;N++)b[N]=c(u[N],N,p,v,j);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;v.set(u,b);for(const[N,P]of u)b.set(N,c(P,N,p,v,j));return b}if(u instanceof Set){const b=new Set;v.set(u,b);for(const N of u)b.add(c(N,void 0,p,v,j));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(o.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);v.set(u,b);for(let N=0;N<u.length;N++)b[N]=c(u[N],N,p,v,j);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return v.set(u,b),f(b,u,p,v,j),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return v.set(u,b),f(b,u,p,v,j),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return v.set(u,b),f(b,u,p,v,j),b}if(u instanceof Error){const b=new u.constructor;return v.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,f(b,u,p,v,j),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return v.set(u,b),f(b,u,p,v,j),b}if(u instanceof Number){const b=new Number(u.valueOf());return v.set(u,b),f(b,u,p,v,j),b}if(u instanceof String){const b=new String(u.valueOf());return v.set(u,b),f(b,u,p,v,j),b}if(typeof u=="object"&&h(u)){const b=Object.create(Object.getPrototypeOf(u));return v.set(u,b),f(b,u,p,v,j),b}return u}function f(u,m,p=u,v,j){const y=[...Object.keys(m),...t.getSymbols(m)];for(let b=0;b<y.length;b++){const N=y[b],P=Object.getOwnPropertyDescriptor(u,N);(P==null||P.writable)&&(u[N]=c(m[N],N,p,v,j))}}function h(u){switch(n.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=c,e.copyProperties=f})(vv)),vv}var rk;function pV(){return rk||(rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(xv)),xv}var nk;function gV(){return nk||(nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w5(),n=pV();function a(s){return s=n.cloneDeep(s),o=>t.isMatch(o,s)}e.matches=a})(uv)),uv}var Nv={},Sv={},Cv={},ak;function xV(){return ak||(ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5(),n=S5();function a(s,o){return t.cloneDeepWith(s,(l,c,f,h)=>{const u=o?.(l,c,f,h);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new s.constructor(s?.valueOf());return t.copyProperties(m,s),m}case n.argumentsTag:{const m={};return t.copyProperties(m,s),m.length=s.length,m[Symbol.iterator]=s[Symbol.iterator],m}default:return}})}e.cloneDeepWith=a})(Cv)),Cv}var sk;function vV(){return sk||(sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xV();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(Sv)),Sv}var kv={},Pv={},ok;function k5(){return ok||(ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(Pv)),Pv}var Ev={},ik;function yV(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(Ev)),Ev}var lk;function bV(){return lk||(lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u5(),n=k5(),a=yV(),s=Hj();function o(l,c){let f;if(Array.isArray(c)?f=c:typeof c=="string"&&t.isDeepKey(c)&&l?.[c]==null?f=s.toPath(c):f=[c],f.length===0)return!1;let h=l;for(let u=0;u<f.length;u++){const m=f[u];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||a.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=o})(kv)),kv}var ck;function jV(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w5(),n=Gj(),a=vV(),s=Wj(),o=bV();function l(c,f){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return f=a.cloneDeep(f),function(h){const u=s.get(h,c);return u===void 0?o.has(h,c):f===void 0?u===void 0:t.isMatch(u,f)}}e.matchesProperty=l})(Nv)),Nv}var dk;function wV(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v5(),n=uV(),a=gV(),s=jV();function o(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):a.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=o})(cv)),cv}var uk;function NV(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iV(),n=v5(),a=dV(),s=wV();function o(l,c=n.identity){return a.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(c)):[]}e.uniqBy=o})(rv)),rv}var Av,fk;function SV(){return fk||(fk=1,Av=NV().uniqBy),Av}var CV=SV();const hk=Os(CV);function kV(e,t,n){return t===!0?hk(e,n):typeof t=="function"?hk(e,t):e}var Iv={exports:{}},Dv={},Ov={exports:{}},Mv={};var mk;function PV(){if(mk)return Mv;mk=1;var e=$c();function t(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(m,p){var v=p(),j=a({inst:{value:v,getSnapshot:p}}),y=j[0].inst,b=j[1];return o(function(){y.value=v,y.getSnapshot=p,f(y)&&b({inst:y})},[m,v,p]),s(function(){return f(y)&&b({inst:y}),m(function(){f(y)&&b({inst:y})})},[m]),l(v),v}function f(m){var p=m.getSnapshot;m=m.value;try{var v=p();return!n(m,v)}catch{return!0}}function h(m,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Mv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Mv}var pk;function EV(){return pk||(pk=1,Ov.exports=PV()),Ov.exports}var gk;function AV(){if(gk)return Dv;gk=1;var e=$c(),t=EV();function n(h,u){return h===u&&(h!==0||1/h===1/u)||h!==h&&u!==u}var a=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,c=e.useMemo,f=e.useDebugValue;return Dv.useSyncExternalStoreWithSelector=function(h,u,m,p,v){var j=o(null);if(j.current===null){var y={hasValue:!1,value:null};j.current=y}else y=j.current;j=c(function(){function N(E){if(!P){if(P=!0,A=E,E=p(E),v!==void 0&&y.hasValue){var O=y.value;if(v(O,E))return k=O}return k=E}if(O=k,a(A,E))return O;var C=p(E);return v!==void 0&&v(O,C)?(A=E,O):(A=E,k=C)}var P=!1,A,k,I=m===void 0?null:m;return[function(){return N(u())},I===null?void 0:function(){return N(I())}]},[u,m,p,v]);var b=s(h,j[0],j[1]);return l(function(){y.hasValue=!0,y.value=b},[b]),f(b),b},Dv}var xk;function IV(){return xk||(xk=1,Iv.exports=AV()),Iv.exports}var DV=IV(),Xj=x.createContext(null),OV=e=>e,vr=()=>{var e=x.useContext(Xj);return e?e.store.dispatch:OV},im=()=>{},MV=()=>im,TV=(e,t)=>e===t;function mt(e){var t=x.useContext(Xj);return DV.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:MV,t?t.store.getState:im,t?t.store.getState:im,t?e:im,TV)}function RV(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _V(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function $V(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var vk=e=>Array.isArray(e)?e:[e];function FV(e){const t=Array.isArray(e[0])?e[0]:e;return $V(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function LV(e,t){const n=[],{length:a}=e;for(let s=0;s<a;s++)n.push(e[s].apply(null,t));return n}var zV=class{constructor(e){this.value=e}deref(){return this.value}},UV=typeof WeakRef<"u"?WeakRef:zV,BV=0,yk=1;function zh(){return{s:BV,v:void 0,o:null,p:null}}function P5(e,t={}){let n=zh();const{resultEqualityCheck:a}=t;let s,o=0;function l(){let c=n;const{length:f}=arguments;for(let m=0,p=f;m<p;m++){const v=arguments[m];if(typeof v=="function"||typeof v=="object"&&v!==null){let j=c.o;j===null&&(c.o=j=new WeakMap);const y=j.get(v);y===void 0?(c=zh(),j.set(v,c)):c=y}else{let j=c.p;j===null&&(c.p=j=new Map);const y=j.get(v);y===void 0?(c=zh(),j.set(v,c)):c=y}}const h=c;let u;if(c.s===yk)u=c.v;else if(u=e.apply(null,arguments),o++,a){const m=s?.deref?.()??s;m!=null&&a(m,u)&&(u=m,o!==0&&o--),s=typeof u=="object"&&u!==null||typeof u=="function"?new UV(u):u}return h.s=yk,h.v=u,u}return l.clearCache=()=>{n=zh(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function VV(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let o=0,l=0,c,f={},h=s.pop();typeof h=="object"&&(f=h,h=s.pop()),RV(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const u={...n,...f},{memoize:m,memoizeOptions:p=[],argsMemoize:v=P5,argsMemoizeOptions:j=[]}=u,y=vk(p),b=vk(j),N=FV(s),P=m(function(){return o++,h.apply(null,arguments)},...y),A=v(function(){l++;const I=LV(N,arguments);return c=P.apply(null,I),c},...b);return Object.assign(A,{resultFunc:h,memoizedResultFunc:P,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:m,argsMemoize:v})};return Object.assign(a,{withTypes:()=>a}),a}var Pe=VV(P5),qV=Object.assign((e,t=Pe)=>{_V(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((l,c,f)=>(l[n[f]]=c,l),{}))},{withTypes:()=>qV}),Tv={},Rv={},_v={},bk;function GV(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,s,o)=>{if(a!==s){const l=t(a),c=t(s);if(l===c&&l===0){if(a<s)return o==="desc"?1:-1;if(a>s)return o==="desc"?-1:1}return o==="desc"?c-l:l-c}return 0};e.compareValues=n})(_v)),_v}var $v={},Fv={},jk;function E5(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Fv)),Fv}var wk;function HV(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(o,l){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||l!=null&&Object.hasOwn(l,o)}e.isKey=s})($v)),$v}var Nk;function WV(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GV(),n=HV(),a=Hj();function s(o,l,c,f){if(o==null)return[];c=f?void 0:c,Array.isArray(o)||(o=Object.values(o)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(v=>String(v));const h=(v,j)=>{let y=v;for(let b=0;b<j.length&&y!=null;++b)y=y[j[b]];return y},u=(v,j)=>j==null||v==null?j:typeof v=="object"&&"key"in v?Object.hasOwn(j,v.key)?j[v.key]:h(j,v.path):typeof v=="function"?v(j):Array.isArray(v)?h(j,v):typeof j=="object"?j[v]:j,m=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:a.toPath(v)}));return o.map(v=>({original:v,criteria:m.map(j=>u(j,v))})).slice().sort((v,j)=>{for(let y=0;y<m.length;y++){const b=t.compareValues(v.criteria[y],j.criteria[y],c[y]);if(b!==0)return b}return 0}).map(v=>v.original)}e.orderBy=s})(Rv)),Rv}var Lv={},Sk;function KV(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const s=[],o=Math.floor(a),l=(c,f)=>{for(let h=0;h<c.length;h++){const u=c[h];Array.isArray(u)&&f<o?l(u,f+1):s.push(u)}};return l(n,0),s}e.flatten=t})(Lv)),Lv}var zv={},Ck;function A5(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5(),n=Yj(),a=y5(),s=j5();function o(l,c,f){return a.isObject(f)&&(typeof c=="number"&&n.isArrayLike(f)&&t.isIndex(c)&&c<f.length||typeof c=="string"&&c in f)?s.eq(f[c],l):!1}e.isIterateeCall=o})(zv)),zv}var kk;function YV(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WV(),n=KV(),a=A5();function s(o,...l){const c=l.length;return c>1&&a.isIterateeCall(o,l[0],l[1])?l=[]:c>2&&a.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(o,n.flatten(l),["asc"])}e.sortBy=s})(Tv)),Tv}var Uv,Pk;function XV(){return Pk||(Pk=1,Uv=YV().sortBy),Uv}var JV=XV();const Kp=Os(JV);var I5=e=>e.legend.settings,QV=e=>e.legend.size,ZV=e=>e.legend.payload;Pe([ZV,I5],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?Kp(a,n):a});var Uh=1;function e9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=x.useState({height:0,left:0,top:0,width:0}),a=x.useCallback(s=>{if(s!=null){var o=s.getBoundingClientRect(),l={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(l.height-t.height)>Uh||Math.abs(l.left-t.left)>Uh||Math.abs(l.top-t.top)>Uh||Math.abs(l.width-t.width)>Uh)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function an(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var t9=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ek=t9,Bv=()=>Math.random().toString(36).substring(7).split("").join("."),r9={INIT:`@@redux/INIT${Bv()}`,REPLACE:`@@redux/REPLACE${Bv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Bv()}`},Tm=r9;function Jj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Qj(e,t,n){if(typeof e!="function")throw new Error(an(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(an(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(an(1));return n(Qj)(e,t)}let a=e,s=t,o=new Map,l=o,c=0,f=!1;function h(){l===o&&(l=new Map,o.forEach((b,N)=>{l.set(N,b)}))}function u(){if(f)throw new Error(an(3));return s}function m(b){if(typeof b!="function")throw new Error(an(4));if(f)throw new Error(an(5));let N=!0;h();const P=c++;return l.set(P,b),function(){if(N){if(f)throw new Error(an(6));N=!1,h(),l.delete(P),o=null}}}function p(b){if(!Jj(b))throw new Error(an(7));if(typeof b.type>"u")throw new Error(an(8));if(typeof b.type!="string")throw new Error(an(17));if(f)throw new Error(an(9));try{f=!0,s=a(s,b)}finally{f=!1}return(o=l).forEach(P=>{P()}),b}function v(b){if(typeof b!="function")throw new Error(an(10));a=b,p({type:Tm.REPLACE})}function j(){const b=m;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(an(11));function P(){const k=N;k.next&&k.next(u())}return P(),{unsubscribe:b(P)}},[Ek](){return this}}}return p({type:Tm.INIT}),{dispatch:p,subscribe:m,getState:u,replaceReducer:v,[Ek]:j}}function n9(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Tm.INIT})>"u")throw new Error(an(12));if(typeof n(void 0,{type:Tm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(an(13))})}function D5(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const l=t[o];typeof e[l]=="function"&&(n[l]=e[l])}const a=Object.keys(n);let s;try{n9(n)}catch(o){s=o}return function(l={},c){if(s)throw s;let f=!1;const h={};for(let u=0;u<a.length;u++){const m=a[u],p=n[m],v=l[m],j=p(v,c);if(typeof j>"u")throw c&&c.type,new Error(an(14));h[m]=j,f=f||j!==v}return f=f||a.length!==Object.keys(l).length,f?h:l}}function Ak(e,t){return function(...n){return t(e.apply(this,n))}}function Ik(e,t){if(typeof e=="function")return Ak(e,t);if(typeof e!="object"||e===null)throw new Error(an(16));const n={};for(const a in e){const s=e[a];typeof s=="function"&&(n[a]=Ak(s,t))}return n}function bu(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function O5(...e){return t=>(n,a)=>{const s=t(n,a);let o=()=>{throw new Error(an(15))};const l={getState:s.getState,dispatch:(f,...h)=>o(f,...h)},c=e.map(f=>f(l));return o=bu(...c)(s.dispatch),{...s,dispatch:o}}}function M5(e){return Jj(e)&&"type"in e&&typeof e.type=="string"}var T5=Symbol.for("immer-nothing"),Dk=Symbol.for("immer-draftable"),Un=Symbol.for("immer-state");function ts(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fa=Object,Ec=fa.getPrototypeOf,Rm="constructor",Yp="prototype",vb="configurable",_m="enumerable",lm="writable",ju="value",co=e=>!!e&&!!e[Un];function cs(e){return e?R5(e)||Xp(e)||!!e[Dk]||!!e[Rm]?.[Dk]||Jp(e)||Qp(e):!1}var a9=fa[Yp][Rm].toString(),Ok=new WeakMap;function R5(e){if(!e||!Zj(e))return!1;const t=Ec(e);if(t===null||t===fa[Yp])return!0;const n=fa.hasOwnProperty.call(t,Rm)&&t[Rm];if(n===Object)return!0;if(!fc(n))return!1;let a=Ok.get(n);return a===void 0&&(a=Function.toString.call(n),Ok.set(n,a)),a===a9}function Zu(e,t,n=!0){ef(e)===0?(n?Reflect.ownKeys(e):fa.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((a,s)=>t(s,a,e))}function ef(e){const t=e[Un];return t?t.type_:Xp(e)?1:Jp(e)?2:Qp(e)?3:0}var Mk=(e,t,n=ef(e))=>n===2?e.has(t):fa[Yp].hasOwnProperty.call(e,t),yb=(e,t,n=ef(e))=>n===2?e.get(t):e[t],$m=(e,t,n,a=ef(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function s9(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Xp=Array.isArray,Jp=e=>e instanceof Map,Qp=e=>e instanceof Set,Zj=e=>typeof e=="object",fc=e=>typeof e=="function",Vv=e=>typeof e=="boolean";function o9(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Js=e=>e.copy_||e.base_,ew=e=>e.modified_?e.copy_:e.base_;function bb(e,t){if(Jp(e))return new Map(e);if(Qp(e))return new Set(e);if(Xp(e))return Array[Yp].slice.call(e);const n=R5(e);if(t===!0||t==="class_only"&&!n){const a=fa.getOwnPropertyDescriptors(e);delete a[Un];let s=Reflect.ownKeys(a);for(let o=0;o<s.length;o++){const l=s[o],c=a[l];c[lm]===!1&&(c[lm]=!0,c[vb]=!0),(c.get||c.set)&&(a[l]={[vb]:!0,[lm]:!0,[_m]:c[_m],[ju]:e[l]})}return fa.create(Ec(e),a)}else{const a=Ec(e);if(a!==null&&n)return{...e};const s=fa.create(a);return fa.assign(s,e)}}function tw(e,t=!1){return Zp(e)||co(e)||!cs(e)||(ef(e)>1&&fa.defineProperties(e,{set:Bh,add:Bh,clear:Bh,delete:Bh}),fa.freeze(e),t&&Zu(e,(n,a)=>{tw(a,!0)},!1)),e}function i9(){ts(2)}var Bh={[ju]:i9};function Zp(e){return e===null||!Zj(e)?!0:fa.isFrozen(e)}var Fm="MapSet",jb="Patches",Tk="ArrayMethods",_5={};function ml(e){const t=_5[e];return t||ts(0,e),t}var Rk=e=>!!_5[e],wu,$5=()=>wu,l9=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Rk(Fm)?ml(Fm):void 0,arrayMethodsPlugin_:Rk(Tk)?ml(Tk):void 0});function _k(e,t){t&&(e.patchPlugin_=ml(jb),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function wb(e){Nb(e),e.drafts_.forEach(c9),e.drafts_=null}function Nb(e){e===wu&&(wu=e.parent_)}var $k=e=>wu=l9(wu,e);function c9(e){const t=e[Un];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Un].modified_&&(wb(t),ts(4)),cs(e)&&(e=Lk(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[Un].base_,e,t)}else e=Lk(t,n);return d9(t,e,!0),wb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==T5?e:void 0}function Lk(e,t){if(Zp(t))return t;const n=t[Un];if(!n)return rw(t,e.handledSet_,e);if(!eg(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);z5(n,e)}return n.copy_}function d9(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&tw(t,n)}function F5(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var eg=(e,t)=>e.scope_===t,u9=[];function L5(e,t,n,a){const s=Js(e),o=e.type_;if(a!==void 0&&yb(s,a,o)===t){$m(s,a,n,o);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Zu(s,(f,h)=>{if(co(h)){const u=c.get(h)||[];u.push(f),c.set(h,u)}})}const l=e.draftLocations_.get(t)??u9;for(const c of l)$m(s,c,n,o)}function f9(e,t,n){e.callbacks_.push(function(s){const o=t;if(!o||!eg(o,s))return;s.mapSetPlugin_?.fixSetContents(o);const l=ew(o);L5(e,o.draft_??o,l,n),z5(o,s)})}function z5(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}F5(e)}}function h9(e,t,n){const{scope_:a}=e;if(co(n)){const s=n[Un];eg(s,a)&&s.callbacks_.push(function(){cm(e);const l=ew(s);L5(e,n,l,t)})}else cs(n)&&e.callbacks_.push(function(){const o=Js(e);yb(o,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&rw(yb(e.copy_,t,e.type_),a.handledSet_,a)})}function rw(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||co(e)||t.has(e)||!cs(e)||Zp(e)||(t.add(e),Zu(e,(a,s)=>{if(co(s)){const o=s[Un];if(eg(o,n)){const l=ew(o);$m(e,a,l,e.type_),F5(o)}}else cs(s)&&rw(s,t,n)})),e}function m9(e,t){const n=Xp(e),a={type_:n?1:0,scope_:t?t.scope_:$5(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,o=nw;n&&(s=[a],o=Nu);const{revoke:l,proxy:c}=Proxy.revocable(s,o);return a.draft_=c,a.revoke_=l,[c,a]}var nw={get(e,t){if(t===Un)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const s=Js(e);if(!Mk(s,t,e.type_))return p9(e,s,t);const o=s[t];if(e.finalized_||!cs(o)||a&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&o9(t))return o;if(o===qv(e.base_,t)){cm(e);const l=e.type_===1?+t:t,c=Cb(e.scope_,o,e,l);return e.copy_[l]=c}return o},has(e,t){return t in Js(e)},ownKeys(e){return Reflect.ownKeys(Js(e))},set(e,t,n){const a=U5(Js(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const s=qv(Js(e),t),o=s?.[Un];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(s9(n,s)&&(n!==void 0||Mk(e.base_,t,e.type_)))return!0;cm(e),Sb(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),h9(e,t,n)),!0},deleteProperty(e,t){return cm(e),qv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Sb(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Js(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[lm]:!0,[vb]:e.type_!==1||t!=="length",[_m]:a[_m],[ju]:n[t]}},defineProperty(){ts(11)},getPrototypeOf(e){return Ec(e.base_)},setPrototypeOf(){ts(12)}},Nu={};Zu(nw,(e,t)=>{Nu[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Nu.deleteProperty=function(e,t){return Nu.set.call(this,e,t,void 0)};Nu.set=function(e,t,n){return nw.set.call(this,e[0],t,n,e[0])};function qv(e,t){const n=e[Un];return(n?Js(n):e)[t]}function p9(e,t,n){const a=U5(t,n);return a?ju in a?a[ju]:a.get?.call(e.draft_):void 0}function U5(e,t){if(!(t in e))return;let n=Ec(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Ec(n)}}function Sb(e){e.modified_||(e.modified_=!0,e.parent_&&Sb(e.parent_))}function cm(e){e.copy_||(e.assigned_=new Map,e.copy_=bb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var g9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,s)=>{if(fc(n)&&!fc(a)){const l=a;a=n;const c=this;return function(h=l,...u){return c.produce(h,m=>a.call(this,m,...u))}}fc(a)||ts(6),s!==void 0&&!fc(s)&&ts(7);let o;if(cs(n)){const l=$k(this),c=Cb(l,n,void 0);let f=!0;try{o=a(c),f=!1}finally{f?wb(l):Nb(l)}return _k(l,s),Fk(o,l)}else if(!n||!Zj(n)){if(o=a(n),o===void 0&&(o=n),o===T5&&(o=void 0),this.autoFreeze_&&tw(o,!0),s){const l=[],c=[];ml(jb).generateReplacementPatches_(n,o,{patches_:l,inversePatches_:c}),s(l,c)}return o}else ts(1,n)},this.produceWithPatches=(n,a)=>{if(fc(n))return(c,...f)=>this.produceWithPatches(c,h=>n(h,...f));let s,o;return[this.produce(n,a,(c,f)=>{s=c,o=f}),s,o]},Vv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Vv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Vv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){cs(t)||ts(8),co(t)&&(t=is(t));const n=$k(this),a=Cb(n,t,void 0);return a[Un].isManual_=!0,Nb(n),a}finishDraft(t,n){const a=t&&t[Un];(!a||!a.isManual_)&&ts(9);const{scope_:s}=a;return _k(s,n),Fk(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(n=n.slice(a+1));const s=ml(jb).applyPatches_;return co(t)?s(t,n):this.produce(t,o=>s(o,n))}};function Cb(e,t,n,a){const[s,o]=Jp(t)?ml(Fm).proxyMap_(t,n):Qp(t)?ml(Fm).proxySet_(t,n):m9(t,n);return(n?.scope_??$5()).drafts_.push(s),o.callbacks_=n?.callbacks_??[],o.key_=a,n&&a!==void 0?f9(n,o,a):o.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:h}=f;o.modified_&&h&&h.generatePatches_(o,[],f)}),s}function is(e){return co(e)||ts(10,e),B5(e)}function B5(e){if(!cs(e)||Zp(e))return e;const t=e[Un];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=bb(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=bb(e,!0);return Zu(n,(s,o)=>{$m(n,s,B5(o))},a),t&&(t.finalized_=!1),n}var x9=new g9,V5=x9.produce;function q5(e){return({dispatch:n,getState:a})=>s=>o=>typeof o=="function"?o(n,a,e):s(o)}var v9=q5(),y9=q5,b9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bu:bu.apply(null,arguments)};function Ba(e,t){function n(...a){if(t){let s=t(...a);if(!s)throw new Error(ga(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>M5(a)&&a.type===e,n}var G5=class au extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,au.prototype)}static get[Symbol.species](){return au}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new au(...t[0].concat(this)):new au(...t.concat(this))}};function zk(e){return cs(e)?V5(e,()=>{}):e}function Vh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function j9(e){return typeof e=="boolean"}var w9=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=t??{};let l=new G5;return n&&(j9(n)?l.push(v9):l.push(y9(n.extraArgument))),l},H5="RTK_autoBatch",pr=()=>e=>({payload:e,meta:{[H5]:!0}}),Uk=e=>t=>{setTimeout(t,e)},W5=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let s=!0,o=!1,l=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Uk(10):e.type==="callback"?e.queueNotification:Uk(e.timeout),h=()=>{l=!1,o&&(o=!1,c.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const m=()=>s&&u(),p=a.subscribe(m);return c.add(u),()=>{p(),c.delete(u)}},dispatch(u){try{return s=!u?.meta?.[H5],o=!s,o&&(l||(l=!0,f(h))),a.dispatch(u)}finally{s=!0}}})},N9=e=>function(n){const{autoBatch:a=!0}=n??{};let s=new G5(e);return a&&s.push(W5(typeof a=="object"?a:void 0)),s};function S9(e){const t=w9(),{reducer:n=void 0,middleware:a,devTools:s=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Jj(n))c=D5(n);else throw new Error(ga(1));let f;typeof a=="function"?f=a(t):f=t();let h=bu;s&&(h=b9({trace:!1,...typeof s=="object"&&s}));const u=O5(...f),m=N9(u);let p=typeof l=="function"?l(m):m();const v=h(...p);return Qj(c,o,v)}function K5(e){const t={},n=[];let a;const s={addCase(o,l){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(ga(28));if(c in t)throw new Error(ga(29));return t[c]=l,s},addAsyncThunk(o,l){return l.pending&&(t[o.pending.type]=l.pending),l.rejected&&(t[o.rejected.type]=l.rejected),l.fulfilled&&(t[o.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:o.settled,reducer:l.settled}),s},addMatcher(o,l){return n.push({matcher:o,reducer:l}),s},addDefaultCase(o){return a=o,s}};return e(s),[t,n,a]}function C9(e){return typeof e=="function"}function k9(e,t){let[n,a,s]=K5(t),o;if(C9(e))o=()=>zk(e());else{const c=zk(e);o=()=>c}function l(c=o(),f){let h=[n[f.type],...a.filter(({matcher:u})=>u(f)).map(({reducer:u})=>u)];return h.filter(u=>!!u).length===0&&(h=[s]),h.reduce((u,m)=>{if(m)if(co(u)){const v=m(u,f);return v===void 0?u:v}else{if(cs(u))return V5(u,p=>m(p,f));{const p=m(u,f);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},c)}return l.getInitialState=o,l}var P9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",E9=(e=21)=>{let t="",n=e;for(;n--;)t+=P9[Math.random()*64|0];return t},A9=Symbol.for("rtk-slice-createasyncthunk");function I9(e,t){return`${e}/${t}`}function D9({creators:e}={}){const t=e?.asyncThunk?.[A9];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(ga(11));const l=(typeof a.reducers=="function"?a.reducers(M9()):a.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const I=typeof A=="string"?A:A.type;if(!I)throw new Error(ga(12));if(I in f.sliceCaseReducersByType)throw new Error(ga(13));return f.sliceCaseReducersByType[I]=k,h},addMatcher(A,k){return f.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return f.actionCreators[A]=k,h},exposeCaseReducer(A,k){return f.sliceCaseReducersByName[A]=k,h}};c.forEach(A=>{const k=l[A],I={reducerName:A,type:I9(s,A),createNotation:typeof a.reducers=="function"};R9(k)?$9(I,k,h,t):T9(I,k,h)});function u(){const[A={},k=[],I=void 0]=typeof a.extraReducers=="function"?K5(a.extraReducers):[a.extraReducers],E={...A,...f.sliceCaseReducersByType};return k9(a.initialState,O=>{for(let C in E)O.addCase(C,E[C]);for(let C of f.sliceMatchers)O.addMatcher(C.matcher,C.reducer);for(let C of k)O.addMatcher(C.matcher,C.reducer);I&&O.addDefaultCase(I)})}const m=A=>A,p=new Map,v=new WeakMap;let j;function y(A,k){return j||(j=u()),j(A,k)}function b(){return j||(j=u()),j.getInitialState()}function N(A,k=!1){function I(O){let C=O[A];return typeof C>"u"&&k&&(C=Vh(v,I,b)),C}function E(O=m){const C=Vh(p,k,()=>new WeakMap);return Vh(C,O,()=>{const M={};for(const[F,V]of Object.entries(a.selectors??{}))M[F]=O9(V,O,()=>Vh(v,O,b),k);return M})}return{reducerPath:A,getSelectors:E,get selectors(){return E(I)},selectSlice:I}}const P={name:s,reducer:y,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:b,...N(o),injectInto(A,{reducerPath:k,...I}={}){const E=k??o;return A.inject({reducerPath:E,reducer:y},I),{...P,...N(E,!0)}}};return P}}function O9(e,t,n,a){function s(o,...l){let c=t(o);return typeof c>"u"&&a&&(c=n()),e(c,...l)}return s.unwrapped=e,s}var ta=D9();function M9(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function T9({type:e,reducerName:t,createNotation:n},a,s){let o,l;if("reducer"in a){if(n&&!_9(a))throw new Error(ga(17));o=a.reducer,l=a.prepare}else o=a;s.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,l?Ba(e,l):Ba(e))}function R9(e){return e._reducerDefinitionType==="asyncThunk"}function _9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function $9({type:e,reducerName:t},n,a,s){if(!s)throw new Error(ga(18));const{payloadCreator:o,fulfilled:l,pending:c,rejected:f,settled:h,options:u}=n,m=s(e,o,u);a.exposeAction(t,m),l&&a.addCase(m.fulfilled,l),c&&a.addCase(m.pending,c),f&&a.addCase(m.rejected,f),h&&a.addMatcher(m.settled,h),a.exposeCaseReducer(t,{fulfilled:l||qh,pending:c||qh,rejected:f||qh,settled:h||qh})}function qh(){}var F9="task",Y5="listener",X5="completed",aw="cancelled",L9=`task-${aw}`,z9=`task-${X5}`,kb=`${Y5}-${aw}`,U9=`${Y5}-${X5}`,tg=class{constructor(e){this.code=e,this.message=`${F9} ${aw} (reason: ${e})`}name="TaskAbortError";message},sw=(e,t)=>{if(typeof e!="function")throw new TypeError(ga(32))},Lm=()=>{},J5=(e,t=Lm)=>(e.catch(t),e),Q5=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),al=e=>{if(e.aborted)throw new tg(e.reason)};function Z5(e,t){let n=Lm;return new Promise((a,s)=>{const o=()=>s(new tg(e.reason));if(e.aborted){o();return}n=Q5(e,o),t.finally(()=>n()).then(a,s)}).finally(()=>{n=Lm})}var B9=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof tg?"cancelled":"rejected",error:n}}finally{t?.()}},zm=e=>t=>J5(Z5(e,t).then(n=>(al(e),n))),e4=e=>{const t=zm(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:jc}=Object,Bk={},rg="listenerMiddleware",V9=(e,t)=>{const n=a=>Q5(e,()=>a.abort(e.reason));return(a,s)=>{sw(a);const o=new AbortController;n(o);const l=B9(async()=>{al(e),al(o.signal);const c=await a({pause:zm(o.signal),delay:e4(o.signal),signal:o.signal});return al(o.signal),c},()=>o.abort(z9));return s?.autoJoin&&t.push(l.catch(Lm)),{result:zm(e)(l),cancel(){o.abort(L9)}}}},q9=(e,t)=>{const n=async(a,s)=>{al(t);let o=()=>{};const c=[new Promise((f,h)=>{let u=e({predicate:a,effect:(m,p)=>{p.unsubscribe(),f([m,p.getState(),p.getOriginalState()])}});o=()=>{u(),h()}})];s!=null&&c.push(new Promise(f=>setTimeout(f,s,null)));try{const f=await Z5(t,Promise.race(c));return al(t),f}finally{o()}};return(a,s)=>J5(n(a,s))},t4=e=>{let{type:t,actionCreator:n,matcher:a,predicate:s,effect:o}=e;if(t)s=Ba(t).match;else if(n)t=n.type,s=n.match;else if(a)s=a;else if(!s)throw new Error(ga(21));return sw(o),{predicate:s,type:t,effect:o}},r4=jc(e=>{const{type:t,predicate:n,effect:a}=t4(e);return{id:E9(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ga(22))}}},{withTypes:()=>r4}),Vk=(e,t)=>{const{type:n,effect:a,predicate:s}=t4(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===s)&&o.effect===a)},Pb=e=>{e.pending.forEach(t=>{t.abort(kb)})},G9=(e,t)=>()=>{for(const n of t.keys())Pb(n);e.clear()},qk=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},n4=jc(Ba(`${rg}/add`),{withTypes:()=>n4}),H9=Ba(`${rg}/removeAll`),a4=jc(Ba(`${rg}/remove`),{withTypes:()=>a4}),W9=(...e)=>{console.error(`${rg}/error`,...e)},tf=(e={})=>{const t=new Map,n=new Map,a=v=>{const j=n.get(v)??0;n.set(v,j+1)},s=v=>{const j=n.get(v)??1;j===1?n.delete(v):n.set(v,j-1)},{extra:o,onError:l=W9}=e;sw(l);const c=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),j=>{v.unsubscribe(),j?.cancelActive&&Pb(v)}),f=v=>{const j=Vk(t,v)??r4(v);return c(j)};jc(f,{withTypes:()=>f});const h=v=>{const j=Vk(t,v);return j&&(j.unsubscribe(),v.cancelActive&&Pb(j)),!!j};jc(h,{withTypes:()=>h});const u=async(v,j,y,b)=>{const N=new AbortController,P=q9(f,N.signal),A=[];try{v.pending.add(N),a(v),await Promise.resolve(v.effect(j,jc({},y,{getOriginalState:b,condition:(k,I)=>P(k,I).then(Boolean),take:P,delay:e4(N.signal),pause:zm(N.signal),extra:o,signal:N.signal,fork:V9(N.signal,A),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((k,I,E)=>{k!==N&&(k.abort(kb),E.delete(k))})},cancel:()=>{N.abort(kb),v.pending.delete(N)},throwIfCancelled:()=>{al(N.signal)}})))}catch(k){k instanceof tg||qk(l,k,{raisedBy:"effect"})}finally{await Promise.all(A),N.abort(U9),s(v),v.pending.delete(N)}},m=G9(t,n);return{middleware:v=>j=>y=>{if(!M5(y))return j(y);if(n4.match(y))return f(y.payload);if(H9.match(y)){m();return}if(a4.match(y))return h(y.payload);let b=v.getState();const N=()=>{if(b===Bk)throw new Error(ga(23));return b};let P;try{if(P=j(y),t.size>0){const A=v.getState(),k=Array.from(t.values());for(const I of k){let E=!1;try{E=I.predicate(y,A,b)}catch(O){E=!1,qk(l,O,{raisedBy:"predicate"})}E&&u(I,y,v,N)}}}finally{b=Bk}return P},startListening:f,stopListening:h,clearListeners:m}};function ga(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var K9={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},s4=ta({name:"chartLayout",initialState:K9,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,s,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Y9,setLayout:X9,setChartSize:J9,setScale:Q9}=s4.actions,Z9=s4.reducer;function o4(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function xr(e){return Number.isFinite(e)}function Is(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(n),!0).forEach(function(a){eq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eq(e,t,n){return(t=tq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tq(e){var t=rq(e,"string");return typeof t=="symbol"?t:t+""}function rq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fr(e,t,n){return ln(e)||ln(t)?n:As(t)?hl(e,t,n):typeof t=="function"?t(e):n}var nq=(e,t,n)=>{if(t&&n){var{width:a,height:s}=n,{align:o,verticalAlign:l,layout:c}=t;if((c==="vertical"||c==="horizontal"&&l==="middle")&&o!=="center"&&lt(e[o]))return pc(pc({},e),{},{[o]:e[o]+(a||0)});if((c==="horizontal"||c==="vertical"&&o==="center")&&l!=="middle"&&lt(e[l]))return pc(pc({},e),{},{[l]:e[l]+(s||0)})}return e},xo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",i4=(e,t,n,a)=>{if(a)return e.map(c=>c.coordinate);var s,o,l=e.map(c=>(c.coordinate===t&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate));return s||l.push(t),o||l.push(n),l},l4=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:o,scale:l,realScaleType:c,isCategorical:f,categoricalDomain:h,tickCount:u,ticks:m,niceTicks:p,axisType:v}=e;if(!l)return null;var j=c==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,y=s==="category"&&l.bandwidth?l.bandwidth()/j:0;if(y=v==="angleAxis"&&o&&o.length>=2?In(o[0]-o[1])*2*y:y,m||p){var b=(m||p||[]).map((N,P)=>{var A=a?a.indexOf(N):N;return{coordinate:l(A)+y,value:N,offset:y,index:P}});return b.filter(N=>!ls(N.coordinate))}return f&&h?h.map((N,P)=>({coordinate:l(N)+y,value:N,index:P,offset:y})):l.ticks&&u!=null?l.ticks(u).map((N,P)=>({coordinate:l(N)+y,value:N,offset:y,index:P})):l.domain().map((N,P)=>({coordinate:l(N)+y,value:a?a[N]:N,index:P,offset:y}))},Hk=1e-4,aq=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,a=e.range(),s=Math.min(a[0],a[1])-Hk,o=Math.max(a[0],a[1])+Hk,l=e(t[0]),c=e(t[n-1]);(l<s||l>o||c<s||c>o)&&e.domain([t[0],t[n-1]])}},sq=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var s=0;s<a;++s)for(var o=0,l=0,c=0;c<n;++c){var f=e[c],h=f?.[s];if(h!=null){var u=h[1],m=h[0],p=ls(u)?m:u;p>=0?(h[0]=o,h[1]=o+p,o=u):(h[0]=l,h[1]=l+p,l=u)}}}},oq=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var s=0;s<a;++s)for(var o=0,l=0;l<n;++l){var c=e[l],f=c?.[s];if(f!=null){var h=ls(f[1])?f[0]:f[1];h>=0?(f[0]=o,f[1]=o+h,o=f[1]):(f[0]=0,f[1]=0)}}}},iq={sign:sq,expand:_7,none:fl,silhouette:$7,wiggle:F7,positive:oq},lq=(e,t,n)=>{var a,s=(a=iq[n])!==null&&a!==void 0?a:fl,o=R7().keys(t).value((c,f)=>Number(fr(c,f,0))).order(gb).offset(s),l=o(e);return l.forEach((c,f)=>{c.forEach((h,u)=>{var m=fr(e[u],t[f],0);Array.isArray(m)&&m.length===2&&lt(m[0])&&lt(m[1])&&(h[0]=m[0],h[1]=m[1])})}),l};function cq(e){return e==null?void 0:String(e)}function Wk(e){var{axis:t,ticks:n,bandSize:a,entry:s,index:o,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ln(s[t.dataKey])){var c=h5(n,"value",s[t.dataKey]);if(c)return c.coordinate+a/2}return n[o]?n[o].coordinate+a/2:null}var f=fr(s,ln(l)?t.dataKey:l);return ln(f)?null:t.scale(f)}var dq=e=>{var t=e.flat(2).filter(lt);return[Math.min(...t),Math.max(...t)]},uq=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],fq=(e,t,n)=>{if(e!=null)return uq(Object.keys(e).reduce((a,s)=>{var o=e[s];if(!o)return a;var{stackedData:l}=o,c=l.reduce((f,h)=>{var u=o4(h,t,n),m=dq(u);return!xr(m[0])||!xr(m[1])?f:[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]))},Kk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Um=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var s=Kp(t,u=>u.coordinate),o=1/0,l=1,c=s.length;l<c;l++){var f=s[l],h=s[l-1];o=Math.min((f?.coordinate||0)-(h?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function Xk(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:s,name:o}=e;return pc(pc({},t),{},{dataKey:n,payload:a,value:s,name:o})}function ng(e,t){if(e)return String(e);if(typeof t=="string")return t}var hq=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},mq=(e,t)=>t==="centric"?e.angle:e.radius,vo=e=>e.layout.width,yo=e=>e.layout.height,pq=e=>e.layout.scale,c4=e=>e.layout.margin,ag=Pe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),sg=Pe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),d4="data-recharts-item-index",u4="data-recharts-item-id",rf=60;function Jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jk(Object(n),!0).forEach(function(a){gq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gq(e,t,n){return(t=xq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xq(e){var t=vq(e,"string");return typeof t=="symbol"?t:t+""}function vq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yq=e=>e.brush.height;function bq(e){var t=sg(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var s=typeof a.width=="number"?a.width:rf;return n+s}return n},0)}function jq(e){var t=sg(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var s=typeof a.width=="number"?a.width:rf;return n+s}return n},0)}function wq(e){var t=ag(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function Nq(e){var t=ag(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var un=Pe([vo,yo,c4,yq,bq,jq,wq,Nq,I5,QV],(e,t,n,a,s,o,l,c,f,h)=>{var u={left:(n.left||0)+s,right:(n.right||0)+o},m={top:(n.top||0)+l,bottom:(n.bottom||0)+c},p=Gh(Gh({},m),u),v=p.bottom;p.bottom+=a,p=nq(p,f,h);var j=e-p.left-p.right,y=t-p.top-p.bottom;return Gh(Gh({brushBottom:v},p),{},{width:Math.max(j,0),height:Math.max(y,0)})}),Sq=Pe(un,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),f4=Pe(vo,yo,(e,t)=>({x:0,y:0,width:e,height:t})),Cq=x.createContext(null),ra=()=>x.useContext(Cq)!=null,og=e=>e.brush,ig=Pe([og,un,c4],(e,t,n)=>({height:e.height,x:lt(e.x)?e.x:t.left,y:lt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:lt(e.width)?e.width:t.width})),Gv={},Hv={},Wv={},Qk;function kq(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:s,edges:o}={}){let l,c=null;const f=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),u=()=>{c!==null&&(n.apply(l,c),l=void 0,c=null)},m=()=>{h&&u(),y()};let p=null;const v=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,m()},a)},j=()=>{p!==null&&(clearTimeout(p),p=null)},y=()=>{j(),l=void 0,c=null},b=()=>{u()},N=function(...P){if(s?.aborted)return;l=this,c=P;const A=p==null;v(),f&&A&&u()};return N.schedule=v,N.cancel=y,N.flush=b,s?.addEventListener("abort",y,{once:!0}),N}e.debounce=t})(Wv)),Wv}var Zk;function Pq(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kq();function n(a,s=0,o={}){typeof o!="object"&&(o={});const{leading:l=!1,trailing:c=!0,maxWait:f}=o,h=Array(2);l&&(h[0]="leading"),c&&(h[1]="trailing");let u,m=null;const p=t.debounce(function(...y){u=a.apply(this,y),m=null},s,{edges:h}),v=function(...y){return f!=null&&(m===null&&(m=Date.now()),Date.now()-m>=f)?(u=a.apply(this,y),m=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,y),u)},j=()=>(p.flush(),u);return v.cancel=p.cancel,v.flush=j,v}e.debounce=n})(Hv)),Hv}var eP;function Eq(){return eP||(eP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pq();function n(a,s=0,o={}){const{leading:l=!0,trailing:c=!0}=o;return t.debounce(a,s,{leading:l,maxWait:s,trailing:c})}e.throttle=n})(Gv)),Gv}var Kv,tP;function Aq(){return tP||(tP=1,Kv=Eq().throttle),Kv}var Iq=Aq();const Dq=Os(Iq);var Bm=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>s[l++]))}},h4=(e,t,n)=>{var{width:a="100%",height:s="100%",aspect:o,maxHeight:l}=n,c=lo(a)?e:Number(a),f=lo(s)?t:Number(s);return o&&o>0&&(c?f=c/o:f&&(c=f*o),l&&f!=null&&f>l&&(f=l)),{calculatedWidth:c,calculatedHeight:f}},Oq={width:0,height:0,overflow:"visible"},Mq={width:0,overflowX:"visible"},Tq={height:0,overflowY:"visible"},Rq={},_q=e=>{var{width:t,height:n}=e,a=lo(t),s=lo(n);return a&&s?Oq:a?Mq:s?Tq:Rq};function $q(e){var{width:t,height:n,aspect:a}=e,s=t,o=n;return s===void 0&&o===void 0?(s="100%",o="100%"):s===void 0?s=a&&a>0?void 0:"100%":o===void 0&&(o=a&&a>0?void 0:"100%"),{width:s,height:o}}function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eb.apply(null,arguments)}function rP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function nP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(n),!0).forEach(function(a){Fq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fq(e,t,n){return(t=Lq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lq(e){var t=zq(e,"string");return typeof t=="symbol"?t:t+""}function zq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m4=x.createContext({width:-1,height:-1});function Uq(e){return Is(e.width)&&Is(e.height)}function p4(e){var{children:t,width:n,height:a}=e,s=x.useMemo(()=>({width:n,height:a}),[n,a]);return Uq(s)?x.createElement(m4.Provider,{value:s},t):null}var ow=()=>x.useContext(m4),Bq=x.forwardRef((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:s,height:o,minWidth:l=0,minHeight:c,maxHeight:f,children:h,debounce:u=0,id:m,className:p,onResize:v,style:j={}}=e,y=x.useRef(null),b=x.useRef();b.current=v,x.useImperativeHandle(t,()=>y.current);var[N,P]=x.useState({containerWidth:a.width,containerHeight:a.height}),A=x.useCallback((C,M)=>{P(F=>{var V=Math.round(C),T=Math.round(M);return F.containerWidth===V&&F.containerHeight===T?F:{containerWidth:V,containerHeight:T}})},[]);x.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return Qu;var C=T=>{var L,{width:U,height:J}=T[0].contentRect;A(U,J),(L=b.current)===null||L===void 0||L.call(b,U,J)};u>0&&(C=Dq(C,u,{trailing:!0,leading:!1}));var M=new ResizeObserver(C),{width:F,height:V}=y.current.getBoundingClientRect();return A(F,V),M.observe(y.current),()=>{M.disconnect()}},[A,u]);var{containerWidth:k,containerHeight:I}=N;Bm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:E,calculatedHeight:O}=h4(k,I,{width:s,height:o,aspect:n,maxHeight:f});return Bm(E!=null&&E>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,O,s,o,l,c,n),x.createElement("div",{id:m?"".concat(m):void 0,className:Yt("recharts-responsive-container",p),style:nP(nP({},j),{},{width:s,height:o,minWidth:l,minHeight:c,maxHeight:f}),ref:y},x.createElement("div",{style:_q({width:s,height:o})},x.createElement(p4,{width:E,height:O},h)))}),aP=x.forwardRef((e,t)=>{var n=ow();if(Is(n.width)&&Is(n.height))return e.children;var{width:a,height:s}=$q({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:l}=h4(void 0,void 0,{width:a,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return lt(o)&&lt(l)?x.createElement(p4,{width:o,height:l},e.children):x.createElement(Bq,Eb({},e,{width:a,height:s,ref:t}))});function g4(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var lg=()=>{var e,t=ra(),n=mt(Sq),a=mt(ig),s=(e=mt(og))===null||e===void 0?void 0:e.padding;return!t||!a||!s?n:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},Vq={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},x4=()=>{var e;return(e=mt(un))!==null&&e!==void 0?e:Vq},v4=()=>mt(vo),y4=()=>mt(yo),tr=e=>e.layout.layoutType,Gc=()=>mt(tr),qq=()=>{var e=Gc();if(e==="horizontal"||e==="vertical")return e},Gq=()=>{var e=Gc();return e!==void 0},cg=e=>{var t=vr(),n=ra(),{width:a,height:s}=e,o=ow(),l=a,c=s;return o&&(l=o.width>0?o.width:a,c=o.height>0?o.height:s),x.useEffect(()=>{!n&&Is(l)&&Is(c)&&t(J9({width:l,height:c}))},[t,n,l,c]),null},b4=Symbol.for("immer-nothing"),sP=Symbol.for("immer-draftable"),ja=Symbol.for("immer-state");function rs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Su=Object.getPrototypeOf;function Ac(e){return!!e&&!!e[ja]}function pl(e){return e?j4(e)||Array.isArray(e)||!!e[sP]||!!e.constructor?.[sP]||nf(e)||ug(e):!1}var Hq=Object.prototype.constructor.toString(),oP=new WeakMap;function j4(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=oP.get(n);return a===void 0&&(a=Function.toString.call(n),oP.set(n,a)),a===Hq}function Vm(e,t,n=!0){dg(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((a,s)=>t(s,a,e))}function dg(e){const t=e[ja];return t?t.type_:Array.isArray(e)?1:nf(e)?2:ug(e)?3:0}function Ab(e,t){return dg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function w4(e,t,n){const a=dg(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function Wq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nf(e){return e instanceof Map}function ug(e){return e instanceof Set}function Ki(e){return e.copy_||e.base_}function Ib(e,t){if(nf(e))return new Map(e);if(ug(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=j4(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[ja];let s=Reflect.ownKeys(a);for(let o=0;o<s.length;o++){const l=s[o],c=a[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(a[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[l]})}return Object.create(Su(e),a)}else{const a=Su(e);if(a!==null&&n)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function iw(e,t=!1){return fg(e)||Ac(e)||!pl(e)||(dg(e)>1&&Object.defineProperties(e,{set:Hh,add:Hh,clear:Hh,delete:Hh}),Object.freeze(e),t&&Object.values(e).forEach(n=>iw(n,!0))),e}function Kq(){rs(2)}var Hh={value:Kq};function fg(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Yq={};function gl(e){const t=Yq[e];return t||rs(0,e),t}var Cu;function N4(){return Cu}function Xq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function iP(e,t){t&&(gl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Db(e){Ob(e),e.drafts_.forEach(Jq),e.drafts_=null}function Ob(e){e===Cu&&(Cu=e.parent_)}function lP(e){return Cu=Xq(Cu,e)}function Jq(e){const t=e[ja];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function cP(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ja].modified_&&(Db(t),rs(4)),pl(e)&&(e=qm(t,e),t.parent_||Gm(t,e)),t.patches_&&gl("Patches").generateReplacementPatches_(n[ja].base_,e,t.patches_,t.inversePatches_)):e=qm(t,n,[]),Db(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==b4?e:void 0}function qm(e,t,n){if(fg(t))return t;const a=e.immer_.shouldUseStrictIteration(),s=t[ja];if(!s)return Vm(t,(o,l)=>dP(e,s,t,o,l,n),a),t;if(s.scope_!==e)return t;if(!s.modified_)return Gm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let l=o,c=!1;s.type_===3&&(l=new Set(o),o.clear(),c=!0),Vm(l,(f,h)=>dP(e,s,o,f,h,n,c),a),Gm(e,o,!1),n&&e.patches_&&gl("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function dP(e,t,n,a,s,o,l){if(s==null||typeof s!="object"&&!l)return;const c=fg(s);if(!(c&&!l)){if(Ac(s)){const f=o&&t&&t.type_!==3&&!Ab(t.assigned_,a)?o.concat(a):void 0,h=qm(e,s,f);if(w4(n,a,h),Ac(h))e.canAutoFreeze_=!1;else return}else l&&n.add(s);if(pl(s)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===s&&c)return;qm(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(nf(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&Gm(e,s)}}}function Gm(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&iw(t,n)}function Qq(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:N4(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,o=lw;n&&(s=[a],o=ku);const{revoke:l,proxy:c}=Proxy.revocable(s,o);return a.draft_=c,a.revoke_=l,c}var lw={get(e,t){if(t===ja)return e;const n=Ki(e);if(!Ab(n,t))return Zq(e,n,t);const a=n[t];return e.finalized_||!pl(a)?a:a===Yv(e.base_,t)?(Xv(e),e.copy_[t]=Tb(a,e)):a},has(e,t){return t in Ki(e)},ownKeys(e){return Reflect.ownKeys(Ki(e))},set(e,t,n){const a=S4(Ki(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const s=Yv(Ki(e),t),o=s?.[ja];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Wq(n,s)&&(n!==void 0||Ab(e.base_,t)))return!0;Xv(e),Mb(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Yv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Xv(e),Mb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ki(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){rs(11)},getPrototypeOf(e){return Su(e.base_)},setPrototypeOf(){rs(12)}},ku={};Vm(lw,(e,t)=>{ku[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ku.deleteProperty=function(e,t){return ku.set.call(this,e,t,void 0)};ku.set=function(e,t,n){return lw.set.call(this,e[0],t,n,e[0])};function Yv(e,t){const n=e[ja];return(n?Ki(n):e)[t]}function Zq(e,t,n){const a=S4(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function S4(e,t){if(!(t in e))return;let n=Su(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Su(n)}}function Mb(e){e.modified_||(e.modified_=!0,e.parent_&&Mb(e.parent_))}function Xv(e){e.copy_||(e.copy_=Ib(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var eG=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const l=this;return function(f=o,...h){return l.produce(f,u=>n.call(this,u,...h))}}typeof n!="function"&&rs(6),a!==void 0&&typeof a!="function"&&rs(7);let s;if(pl(t)){const o=lP(this),l=Tb(t,void 0);let c=!0;try{s=n(l),c=!1}finally{c?Db(o):Ob(o)}return iP(o,a),cP(s,o)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===b4&&(s=void 0),this.autoFreeze_&&iw(s,!0),a){const o=[],l=[];gl("Patches").generateReplacementPatches_(t,s,o,l),a(o,l)}return s}else rs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...c)=>this.produceWithPatches(l,f=>t(f,...c));let a,s;return[this.produce(t,n,(l,c)=>{a=l,s=c}),a,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){pl(e)||rs(8),Ac(e)&&(e=tG(e));const t=lP(this),n=Tb(e,void 0);return n[ja].isManual_=!0,Ob(t),n}finishDraft(e,t){const n=e&&e[ja];(!n||!n.isManual_)&&rs(9);const{scope_:a}=n;return iP(a,t),cP(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const a=gl("Patches").applyPatches_;return Ac(e)?a(e,t):this.produce(e,s=>a(s,t))}};function Tb(e,t){const n=nf(e)?gl("MapSet").proxyMap_(e,t):ug(e)?gl("MapSet").proxySet_(e,t):Qq(e,t);return(t?t.scope_:N4()).drafts_.push(n),n}function tG(e){return Ac(e)||rs(10,e),C4(e)}function C4(e){if(!pl(e)||fg(e))return e;const t=e[ja];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ib(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Ib(e,!0);return Vm(n,(s,o)=>{w4(n,s,C4(o))},a),t&&(t.finalized_=!1),n}var rG=new eG;rG.produce;var nG={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},k4=ta({name:"legend",initialState:nG,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:pr()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,s=is(e).payload.indexOf(n);s>-1&&(e.payload[s]=a)},prepare:pr()},removeLegendPayload:{reducer(e,t){var n=is(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:pr()}}}),{setLegendSize:rde,setLegendSettings:nde,addLegendPayload:P4,replaceLegendPayload:E4,removeLegendPayload:A4}=k4.actions,aG=k4.reducer;function Rb(){return Rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rb.apply(null,arguments)}function uP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Jv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(n),!0).forEach(function(a){sG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sG(e,t,n){return(t=oG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oG(e){var t=iG(e,"string");return typeof t=="symbol"?t:t+""}function iG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lG(e){return Array.isArray(e)&&As(e[0])&&As(e[1])?e.join(" ~ "):e}var cG=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:s={},payload:o,formatter:l,itemSorter:c,wrapperClassName:f,labelClassName:h,label:u,labelFormatter:m,accessibilityLayer:p=!1}=e,v=()=>{if(o&&o.length){var I={padding:0,margin:0},E=(c?Kp(o,c):o).map((O,C)=>{if(O.type==="none")return null;var M=O.formatter||l||lG,{value:F,name:V}=O,T=F,L=V;if(M){var U=M(F,V,O,C,o);if(Array.isArray(U))[T,L]=U;else if(U!=null)T=U;else return null}var J=Jv({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},a);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:J},As(L)?x.createElement("span",{className:"recharts-tooltip-item-name"},L):null,As(L)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},T),x.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:I},E)}return null},j=Jv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),y=Jv({margin:0},s),b=!ln(u),N=b?u:"",P=Yt("recharts-default-tooltip",f),A=Yt("recharts-tooltip-label",h);b&&m&&o!==void 0&&o!==null&&(N=m(u,o));var k=p?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Rb({className:P,style:j},k),x.createElement("p",{className:A,style:y},x.isValidElement(N)?N:"".concat(N)),v())},Wd="recharts-tooltip-wrapper",dG={visibility:"hidden"};function uG(e){var{coordinate:t,translateX:n,translateY:a}=e;return Yt(Wd,{["".concat(Wd,"-right")]:lt(n)&&t&&lt(t.x)&&n>=t.x,["".concat(Wd,"-left")]:lt(n)&&t&&lt(t.x)&&n<t.x,["".concat(Wd,"-bottom")]:lt(a)&&t&&lt(t.y)&&a>=t.y,["".concat(Wd,"-top")]:lt(a)&&t&&lt(t.y)&&a<t.y})}function fP(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c,viewBox:f,viewBoxDimension:h}=e;if(o&&lt(o[a]))return o[a];var u=n[a]-c-(s>0?s:0),m=n[a]+s;if(t[a])return l[a]?u:m;var p=f[a];if(p==null)return 0;if(l[a]){var v=u,j=p;return v<j?Math.max(m,p):Math.max(u,p)}if(h==null)return 0;var y=m+c,b=p+h;return y>b?Math.max(u,p):Math.max(m,p)}function fG(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function hG(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipBox:l,useTranslate3d:c,viewBox:f}=e,h,u,m;return l.height>0&&l.width>0&&n?(u=fP({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),m=fP({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),h=fG({translateX:u,translateY:m,useTranslate3d:c})):h=dG,{cssProperties:h,cssClasses:uG({translateX:u,translateY:m,coordinate:n})}}function hP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(n),!0).forEach(function(a){_b(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _b(e,t,n){return(t=mG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gG extends x.PureComponent{constructor(){super(...arguments),_b(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_b(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,s,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(s=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,children:o,coordinate:l,hasPayload:c,isAnimationActive:f,offset:h,position:u,reverseDirection:m,useTranslate3d:p,viewBox:v,wrapperStyle:j,lastBoundingBox:y,innerRef:b,hasPortalFromProps:N}=this.props,{cssClasses:P,cssProperties:A}=hG({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:u,reverseDirection:m,tooltipBox:{height:y.height,width:y.width},useTranslate3d:p,viewBox:v}),k=N?{}:Wh(Wh({transition:f&&t?"transform ".concat(a,"ms ").concat(s):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),I=Wh(Wh({},k),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},j);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:I,ref:b},o)}}var I4=()=>{var e;return(e=mt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$b.apply(null,arguments)}function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function pP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(a){xG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xG(e,t,n){return(t=vG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vG(e){var t=yG(e,"string");return typeof t=="symbol"?t:t+""}function yG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gP={curveBasisClosed:S7,curveBasisOpen:C7,curveBasis:N7,curveBumpX:c7,curveBumpY:d7,curveLinearClosed:k7,curveLinear:Hp,curveMonotoneX:P7,curveMonotoneY:E7,curveNatural:A7,curveStep:I7,curveStepAfter:O7,curveStepBefore:D7},Hm=e=>xr(e.x)&&xr(e.y),xP=e=>e.base!=null&&Hm(e.base)&&Hm(e),Kd=e=>e.x,Yd=e=>e.y,bG=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Ju(e));return(n==="curveMonotone"||n==="curveBump")&&t?gP["".concat(n).concat(t==="vertical"?"Y":"X")]:gP[n]||Hp},jG=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:s,connectNulls:o=!1}=e,l=bG(t,s),c=o?n.filter(Hm):n,f;if(Array.isArray(a)){var h=n.map((v,j)=>pP(pP({},v),{},{base:a[j]}));s==="vertical"?f=Lh().y(Yd).x1(Kd).x0(v=>v.base.x):f=Lh().x(Kd).y1(Yd).y0(v=>v.base.y);var u=f.defined(xP).curve(l),m=o?h.filter(xP):h;return u(m)}s==="vertical"&&lt(a)?f=Lh().y(Yd).x1(Kd).x0(a):lt(a)?f=Lh().x(Kd).y1(Yd).y0(a):f=e5().x(Kd).y(Yd);var p=f.defined(Hm).curve(l);return p(c)},wc=e=>{var{className:t,points:n,path:a,pathRef:s}=e,o=Gc();if((!n||!n.length)&&!a)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},c=n&&n.length?jG(l):a;return x.createElement("path",$b({},ba(e),Kj(e),{className:Yt("recharts-curve",t),d:c===null?void 0:c,ref:s}))},wG=["x","y","top","left","width","height","className"];function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fb.apply(null,arguments)}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function NG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(a){SG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SG(e,t,n){return(t=CG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CG(e){var t=kG(e,"string");return typeof t=="symbol"?t:t+""}function kG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PG(e,t){if(e==null)return{};var n,a,s=EG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function EG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var AG=(e,t,n,a,s,o)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),IG=e=>{var{x:t=0,y:n=0,top:a=0,left:s=0,width:o=0,height:l=0,className:c}=e,f=PG(e,wG),h=NG({x:t,y:n,top:a,left:s,width:o,height:l},f);return!lt(t)||!lt(n)||!lt(o)||!lt(l)||!lt(a)||!lt(s)?null:x.createElement("path",Fb({},zn(h),{className:Yt("recharts-cross",c),d:AG(t,n,o,l,a,s)}))};function DG(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function bP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(a){OG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function OG(e,t,n){return(t=MG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=TG(e,"string");return typeof t=="symbol"?t:t+""}function TG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RG=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),D4=(e,t,n)=>e.map(a=>"".concat(RG(a)," ").concat(t,"ms ").concat(n)).join(","),_G=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(s=>a.includes(s))),Pu=(e,t)=>Object.keys(t).reduce((n,a)=>bP(bP({},n),{},{[a]:e(a,t[a])}),{});function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(a){$G(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $G(e,t,n){return(t=FG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FG(e){var t=LG(e,"string");return typeof t=="symbol"?t:t+""}function LG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wm=(e,t,n)=>e+(t-e)*n,Lb=e=>{var{from:t,to:n}=e;return t!==n},O4=(e,t,n)=>{var a=Pu((s,o)=>{if(Lb(o)){var[l,c]=e(o.from,o.to,o.velocity);return Gr(Gr({},o),{},{from:l,velocity:c})}return o},t);return n<1?Pu((s,o)=>Lb(o)&&a[s]!=null?Gr(Gr({},o),{},{velocity:Wm(o.velocity,a[s].velocity,n),from:Wm(o.from,a[s].from,n)}):o,t):O4(e,a,n-1)};function zG(e,t,n,a,s,o){var l,c=a.reduce((p,v)=>Gr(Gr({},p),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),f=()=>Pu((p,v)=>v.from,c),h=()=>!Object.values(c).filter(Lb).length,u=null,m=p=>{l||(l=p);var v=p-l,j=v/n.dt;c=O4(n,c,j),s(Gr(Gr(Gr({},e),t),f())),l=p,h()||(u=o.setTimeout(m))};return()=>(u=o.setTimeout(m),()=>{var p;(p=u)===null||p===void 0||p()})}function UG(e,t,n,a,s,o,l){var c=null,f=s.reduce((m,p)=>{var v=e[p],j=t[p];return v==null||j==null?m:Gr(Gr({},m),{},{[p]:[v,j]})},{}),h,u=m=>{h||(h=m);var p=(m-h)/a,v=Pu((y,b)=>Wm(...b,n(p)),f);if(o(Gr(Gr(Gr({},e),t),v)),p<1)c=l.setTimeout(u);else{var j=Pu((y,b)=>Wm(...b,n(1)),f);o(Gr(Gr(Gr({},e),t),j))}};return()=>(c=l.setTimeout(u),()=>{var m;(m=c)===null||m===void 0||m()})}const BG=(e,t,n,a,s,o)=>{var l=_G(e,t);return n==null?()=>(s(Gr(Gr({},e),t)),()=>{}):n.isStepper===!0?zG(e,t,n,l,s,o):UG(e,t,n,a,l,s,o)};var Km=1e-4,M4=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],T4=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),wP=(e,t)=>n=>{var a=M4(e,t);return T4(a,n)},VG=(e,t)=>n=>{var a=M4(e,t),s=[...a.map((o,l)=>o*l).slice(1),0];return T4(s,n)},qG=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var s=a.map(o=>parseFloat(o));return[s[0],s[1],s[2],s[3]]},GG=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=qG(n[0]);if(s)return s}}return n.length===4?n:[0,0,1,1]},HG=(e,t,n,a)=>{var s=wP(e,n),o=wP(t,a),l=VG(e,n),c=h=>h>1?1:h<0?0:h,f=h=>{for(var u=h>1?1:h,m=u,p=0;p<8;++p){var v=s(m)-u,j=l(m);if(Math.abs(v-u)<Km||j<Km)return o(m);m=c(m-v/j)}return o(m)};return f.isStepper=!1,f},NP=function(){return HG(...GG(...arguments))},WG=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:s=17}=t,o=(l,c,f)=>{var h=-(l-c)*n,u=f*a,m=f+(h-u)*s/1e3,p=f*s/1e3+l;return Math.abs(p-c)<Km&&Math.abs(m)<Km?[c,0]:[p,m]};return o.isStepper=!0,o.dt=s,o},KG=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NP(e);case"spring":return WG();default:if(e.split("(")[0]==="cubic-bezier")return NP(e)}return typeof e=="function"?e:null};function YG(e){var t,n=()=>null,a=!1,s=null,o=l=>{if(!a){if(Array.isArray(l)){if(!l.length)return;var c=l,[f,...h]=c;if(typeof f=="number"){s=e.setTimeout(o.bind(null,h),f);return}o(f),s=e.setTimeout(o.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{a=!0},start:l=>{a=!1,s&&(s(),s=null),o(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class XG{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,o=l=>{l-a>=n?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(o))};return s=requestAnimationFrame(o),()=>{s!=null&&cancelAnimationFrame(s)}}}function JG(){return YG(new XG)}var QG=x.createContext(JG);function ZG(e,t){var n=x.useContext(QG);return x.useMemo(()=>t??n(e),[e,t,n])}var eH=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),af={isSsr:eH()},tH={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},SP={t:0},Qv={t:1};function hg(e){var t=jn(e,tH),{isActive:n,canBegin:a,duration:s,easing:o,begin:l,onAnimationEnd:c,onAnimationStart:f,children:h}=t,u=n==="auto"?!af.isSsr:n,m=ZG(t.animationId,t.animationManager),[p,v]=x.useState(u?SP:Qv),j=x.useRef(null);return x.useEffect(()=>{u||v(Qv)},[u]),x.useEffect(()=>{if(!u||!a)return Qu;var y=BG(SP,Qv,KG(o),s,v,m.getTimeoutController()),b=()=>{j.current=y()};return m.start([f,l,b,s,c]),()=>{m.stop(),j.current&&j.current(),c()}},[u,a,s,o,l,f,c,m]),h(p.t)}function mg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=x.useRef(yu(t)),a=x.useRef(e);return a.current!==e&&(n.current=yu(t),a.current=e),n.current}var rH=["radius"],nH=["radius"],CP,kP,PP,EP,AP,IP,DP,OP,MP,TP;function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function _P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(n),!0).forEach(function(a){aH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aH(e,t,n){return(t=sH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sH(e){var t=oH(e,"string");return typeof t=="symbol"?t:t+""}function oH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ym.apply(null,arguments)}function $P(e,t){if(e==null)return{};var n,a,s=iH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function iH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Ss(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var FP=(e,t,n,a,s)=>{var o=ei(n),l=ei(a),c=Math.min(Math.abs(o)/2,Math.abs(l)/2),f=l>=0?1:-1,h=o>=0?1:-1,u=l>=0&&o>=0||l<0&&o<0?1:0,m;if(c>0&&s instanceof Array){for(var p=[0,0,0,0],v=0,j=4;v<j;v++)p[v]=s[v]>c?c:s[v];m=Er(CP||(CP=Ss(["M",",",""])),e,t+f*p[0]),p[0]>0&&(m+=Er(kP||(kP=Ss(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+h*p[0],t)),m+=Er(PP||(PP=Ss(["L ",",",""])),e+n-h*p[1],t),p[1]>0&&(m+=Er(EP||(EP=Ss(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+n,t+f*p[1])),m+=Er(AP||(AP=Ss(["L ",",",""])),e+n,t+a-f*p[2]),p[2]>0&&(m+=Er(IP||(IP=Ss(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+n-h*p[2],t+a)),m+=Er(DP||(DP=Ss(["L ",",",""])),e+h*p[3],t+a),p[3]>0&&(m+=Er(OP||(OP=Ss(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+a-f*p[3])),m+="Z"}else if(c>0&&s===+s&&s>0){var y=Math.min(c,s);m=Er(MP||(MP=Ss(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+f*y,y,y,u,e+h*y,t,e+n-h*y,t,y,y,u,e+n,t+f*y,e+n,t+a-f*y,y,y,u,e+n-h*y,t+a,e+h*y,t+a,y,y,u,e,t+a-f*y)}else m=Er(TP||(TP=Ss(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return m},LP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},R4=e=>{var t=jn(e,LP),n=x.useRef(null),[a,s]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var W=n.current.getTotalLength();W&&s(W)}catch{}},[]);var{x:o,y:l,width:c,height:f,radius:h,className:u}=t,{animationEasing:m,animationDuration:p,animationBegin:v,isAnimationActive:j,isUpdateAnimationActive:y}=t,b=x.useRef(c),N=x.useRef(f),P=x.useRef(o),A=x.useRef(l),k=x.useMemo(()=>({x:o,y:l,width:c,height:f,radius:h}),[o,l,c,f,h]),I=mg(k,"rectangle-");if(o!==+o||l!==+l||c!==+c||f!==+f||c===0||f===0)return null;var E=Yt("recharts-rectangle",u);if(!y){var O=zn(t),{radius:C}=O,M=$P(O,rH);return x.createElement("path",Ym({},M,{x:ei(o),y:ei(l),width:ei(c),height:ei(f),radius:typeof h=="number"?h:void 0,className:E,d:FP(o,l,c,f,h)}))}var F=b.current,V=N.current,T=P.current,L=A.current,U="0px ".concat(a===-1?1:a,"px"),J="".concat(a,"px 0px"),q=D4(["strokeDasharray"],p,typeof m=="string"?m:LP.animationEasing);return x.createElement(hg,{animationId:I,key:I,canBegin:a>0,duration:p,easing:m,isActive:y,begin:v},W=>{var z=xn(F,c,W),K=xn(V,f,W),B=xn(T,o,W),R=xn(L,l,W);n.current&&(b.current=z,N.current=K,P.current=B,A.current=R);var H;j?W>0?H={transition:q,strokeDasharray:J}:H={strokeDasharray:U}:H={strokeDasharray:J};var Y=zn(t),{radius:ee}=Y,me=$P(Y,nH);return x.createElement("path",Ym({},me,{radius:typeof h=="number"?h:void 0,className:E,d:FP(B,R,z,K,h),ref:n,style:_P(_P({},H),t.style)}))})};function zP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function UP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(n),!0).forEach(function(a){lH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lH(e,t,n){return(t=cH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cH(e){var t=dH(e,"string");return typeof t=="symbol"?t:t+""}function dH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xm=Math.PI/180,uH=e=>e*180/Math.PI,Fr=(e,t,n,a)=>({x:e+Math.cos(-Xm*a)*n,y:t+Math.sin(-Xm*a)*n}),_4=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},fH=(e,t)=>{var{x:n,y:a}=e,{x:s,y:o}=t;return Math.sqrt((n-s)**2+(a-o)**2)},hH=(e,t)=>{var{x:n,y:a}=e,{cx:s,cy:o}=t,l=fH({x:n,y:a},{x:s,y:o});if(l<=0)return{radius:l,angle:0};var c=(n-s)/l,f=Math.acos(c);return a>o&&(f=2*Math.PI-f),{radius:l,angle:uH(f),angleInRadian:f}},mH=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:t-o*360,endAngle:n-o*360}},pH=(e,t)=>{var{startAngle:n,endAngle:a}=t,s=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(s,o);return e+l*360},gH=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:s,angle:o}=hH({x:n,y:a},t),{innerRadius:l,outerRadius:c}=t;if(s<l||s>c||s===0)return null;var{startAngle:f,endAngle:h}=mH(t),u=o,m;if(f<=h){for(;u>h;)u-=360;for(;u<f;)u+=360;m=u>=f&&u<=h}else{for(;u>f;)u-=360;for(;u<h;)u+=360;m=u>=h&&u<=f}return m?UP(UP({},t),{},{radius:s,angle:pH(u,t)}):null};function $4(e){var{cx:t,cy:n,radius:a,startAngle:s,endAngle:o}=e,l=Fr(t,n,a,s),c=Fr(t,n,a,o);return{points:[l,c],cx:t,cy:n,radius:a,startAngle:s,endAngle:o}}var BP,VP,qP,GP,HP,WP,KP;function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zb.apply(null,arguments)}function Zi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xH=(e,t)=>{var n=In(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},Kh=e=>{var{cx:t,cy:n,radius:a,angle:s,sign:o,isExternal:l,cornerRadius:c,cornerIsExternal:f}=e,h=c*(l?1:-1)+a,u=Math.asin(c/h)/Xm,m=f?s:s+o*u,p=Fr(t,n,h,m),v=Fr(t,n,a,m),j=f?s-o*u:s,y=Fr(t,n,h*Math.cos(u*Xm),j);return{center:p,circleTangency:v,lineTangency:y,theta:u}},F4=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,c=xH(o,l),f=o+c,h=Fr(t,n,s,o),u=Fr(t,n,s,f),m=Er(BP||(BP=Zi(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,s,s,+(Math.abs(c)>180),+(o>f),u.x,u.y);if(a>0){var p=Fr(t,n,a,o),v=Fr(t,n,a,f);m+=Er(VP||(VP=Zi(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,a,a,+(Math.abs(c)>180),+(o<=f),p.x,p.y)}else m+=Er(qP||(qP=Zi(["L ",","," Z"])),t,n);return m},vH=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h}=e,u=In(h-f),{circleTangency:m,lineTangency:p,theta:v}=Kh({cx:t,cy:n,radius:s,angle:f,sign:u,cornerRadius:o,cornerIsExternal:c}),{circleTangency:j,lineTangency:y,theta:b}=Kh({cx:t,cy:n,radius:s,angle:h,sign:-u,cornerRadius:o,cornerIsExternal:c}),N=c?Math.abs(f-h):Math.abs(f-h)-v-b;if(N<0)return l?Er(GP||(GP=Zi(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,o,o,o*2,o,o,-o*2):F4({cx:t,cy:n,innerRadius:a,outerRadius:s,startAngle:f,endAngle:h});var P=Er(HP||(HP=Zi(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,o,o,+(u<0),m.x,m.y,s,s,+(N>180),+(u<0),j.x,j.y,o,o,+(u<0),y.x,y.y);if(a>0){var{circleTangency:A,lineTangency:k,theta:I}=Kh({cx:t,cy:n,radius:a,angle:f,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),{circleTangency:E,lineTangency:O,theta:C}=Kh({cx:t,cy:n,radius:a,angle:h,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),M=c?Math.abs(f-h):Math.abs(f-h)-I-C;if(M<0&&o===0)return"".concat(P,"L").concat(t,",").concat(n,"Z");P+=Er(WP||(WP=Zi(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),O.x,O.y,o,o,+(u<0),E.x,E.y,a,a,+(M>180),+(u>0),A.x,A.y,o,o,+(u<0),k.x,k.y)}else P+=Er(KP||(KP=Zi(["L",",","Z"])),t,n);return P},yH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},L4=e=>{var t=jn(e,yH),{cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:f,startAngle:h,endAngle:u,className:m}=t;if(o<s||h===u)return null;var p=Yt("recharts-sector",m),v=o-s,j=pa(l,v,0,!0),y;return j>0&&Math.abs(h-u)<360?y=vH({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,v/2),forceCornerRadius:c,cornerIsExternal:f,startAngle:h,endAngle:u}):y=F4({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:h,endAngle:u}),x.createElement("path",zb({},zn(t),{className:p,d:y}))};function bH(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(g5(t)){if(e==="centric"){var{cx:a,cy:s,innerRadius:o,outerRadius:l,angle:c}=t,f=Fr(a,s,o,c),h=Fr(a,s,l,c);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return $4(t)}}var Zv={},ey={},ty={},YP;function jH(){return YP||(YP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E5();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(ty)),ty}var XP;function wH(){return XP||(XP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jH();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(ey)),ey}var JP;function NH(){return JP||(JP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5(),n=wH();function a(s,o,l){l&&typeof l!="number"&&t.isIterateeCall(s,o,l)&&(o=l=void 0),s=n.toFinite(s),o===void 0?(o=s,s=0):o=n.toFinite(o),l=l===void 0?s<o?1:-1:n.toFinite(l);const c=Math.max(Math.ceil((o-s)/(l||1)),0),f=new Array(c);for(let h=0;h<c;h++)f[h]=s,s+=l;return f}e.range=a})(Zv)),Zv}var ry,QP;function SH(){return QP||(QP=1,ry=NH().range),ry}var CH=SH();const z4=Os(CH);function ri(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cw(e){let t,n,a;e.length!==2?(t=ri,n=(c,f)=>ri(e(c),f),a=(c,f)=>e(c)-f):(t=e===ri||e===kH?e:PH,n=e,a=e);function s(c,f,h=0,u=c.length){if(h<u){if(t(f,f)!==0)return u;do{const m=h+u>>>1;n(c[m],f)<0?h=m+1:u=m}while(h<u)}return h}function o(c,f,h=0,u=c.length){if(h<u){if(t(f,f)!==0)return u;do{const m=h+u>>>1;n(c[m],f)<=0?h=m+1:u=m}while(h<u)}return h}function l(c,f,h=0,u=c.length){const m=s(c,f,h,u-1);return m>h&&a(c[m-1],f)>-a(c[m],f)?m-1:m}return{left:s,center:l,right:o}}function PH(){return 0}function U4(e){return e===null?NaN:+e}function*EH(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const AH=cw(ri),sf=AH.right;cw(U4).center;class ZP extends Map{constructor(t,n=OH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(eE(this,t))}has(t){return super.has(eE(this,t))}set(t,n){return super.set(IH(this,t),n)}delete(t){return super.delete(DH(this,t))}}function eE({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function IH({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function DH({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function OH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function MH(e=ri){if(e===ri)return B4;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function B4(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const TH=Math.sqrt(50),RH=Math.sqrt(10),_H=Math.sqrt(2);function Jm(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),o=a/Math.pow(10,s),l=o>=TH?10:o>=RH?5:o>=_H?2:1;let c,f,h;return s<0?(h=Math.pow(10,-s)/l,c=Math.round(e*h),f=Math.round(t*h),c/h<e&&++c,f/h>t&&--f,h=-h):(h=Math.pow(10,s)*l,c=Math.round(e/h),f=Math.round(t/h),c*h<e&&++c,f*h>t&&--f),f<c&&.5<=n&&n<2?Jm(e,t,n*2):[c,f,h]}function Ub(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,o,l]=a?Jm(t,e,n):Jm(e,t,n);if(!(o>=s))return[];const c=o-s+1,f=new Array(c);if(a)if(l<0)for(let h=0;h<c;++h)f[h]=(o-h)/-l;else for(let h=0;h<c;++h)f[h]=(o-h)*l;else if(l<0)for(let h=0;h<c;++h)f[h]=(s+h)/-l;else for(let h=0;h<c;++h)f[h]=(s+h)*l;return f}function Bb(e,t,n){return t=+t,e=+e,n=+n,Jm(e,t,n)[2]}function Vb(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?Bb(t,e,n):Bb(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function tE(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function rE(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function V4(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?B4:MH(s);a>n;){if(a-n>600){const f=a-n+1,h=t-n+1,u=Math.log(f),m=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*m*(f-m)/f)*(h-f/2<0?-1:1),v=Math.max(n,Math.floor(t-h*m/f+p)),j=Math.min(a,Math.floor(t+(f-h)*m/f+p));V4(e,t,v,j,s)}const o=e[t];let l=n,c=a;for(Xd(e,n,t),s(e[a],o)>0&&Xd(e,n,a);l<c;){for(Xd(e,l,c),++l,--c;s(e[l],o)<0;)++l;for(;s(e[c],o)>0;)--c}s(e[n],o)===0?Xd(e,n,c):(++c,Xd(e,c,a)),c<=t&&(n=c+1),t<=c&&(a=c-1)}return e}function Xd(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function $H(e,t,n){if(e=Float64Array.from(EH(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return rE(e);if(t>=1)return tE(e);var a,s=(a-1)*t,o=Math.floor(s),l=tE(V4(e,o).subarray(0,o+1)),c=rE(e.subarray(o+1));return l+(c-l)*(s-o)}}function FH(e,t,n=U4){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,o=Math.floor(s),l=+n(e[o],o,e),c=+n(e[o+1],o+1,e);return l+(c-l)*(s-o)}}function LH(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(s);++a<s;)o[a]=e+a*n;return o}function qa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const qb=Symbol("implicit");function dw(){var e=new ZP,t=[],n=[],a=qb;function s(o){let l=e.get(o);if(l===void 0){if(a!==qb)return a;e.set(o,l=t.push(o)-1)}return n[l%n.length]}return s.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ZP;for(const l of o)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(o){return arguments.length?(n=Array.from(o),s):n.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.copy=function(){return dw(t,n).unknown(a)},qa.apply(s,arguments),s}function uw(){var e=dw().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,o,l,c=!1,f=0,h=0,u=.5;delete e.unknown;function m(){var p=t().length,v=s<a,j=v?s:a,y=v?a:s;o=(y-j)/Math.max(1,p-f+h*2),c&&(o=Math.floor(o)),j+=(y-j-o*(p-f))*u,l=o*(1-f),c&&(j=Math.round(j),l=Math.round(l));var b=LH(p).map(function(N){return j+o*N});return n(v?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,c=!0,m()},e.bandwidth=function(){return l},e.step=function(){return o},e.round=function(p){return arguments.length?(c=!!p,m()):c},e.padding=function(p){return arguments.length?(f=Math.min(1,h=+p),m()):f},e.paddingInner=function(p){return arguments.length?(f=Math.min(1,p),m()):f},e.paddingOuter=function(p){return arguments.length?(h=+p,m()):h},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),m()):u},e.copy=function(){return uw(t(),[a,s]).round(c).paddingInner(f).paddingOuter(h).align(u)},qa.apply(m(),arguments)}function q4(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return q4(t())},e}function zH(){return q4(uw.apply(null,arguments).paddingInner(1))}function fw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function G4(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function of(){}var Eu=.7,Qm=1/Eu,Nc="\\s*([+-]?\\d+)\\s*",Au="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UH=/^#([0-9a-f]{3,8})$/,BH=new RegExp(`^rgb\\(${Nc},${Nc},${Nc}\\)$`),VH=new RegExp(`^rgb\\(${Es},${Es},${Es}\\)$`),qH=new RegExp(`^rgba\\(${Nc},${Nc},${Nc},${Au}\\)$`),GH=new RegExp(`^rgba\\(${Es},${Es},${Es},${Au}\\)$`),HH=new RegExp(`^hsl\\(${Au},${Es},${Es}\\)$`),WH=new RegExp(`^hsla\\(${Au},${Es},${Es},${Au}\\)$`),nE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fw(of,Iu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aE,formatHex:aE,formatHex8:KH,formatHsl:YH,formatRgb:sE,toString:sE});function aE(){return this.rgb().formatHex()}function KH(){return this.rgb().formatHex8()}function YH(){return H4(this).formatHsl()}function sE(){return this.rgb().formatRgb()}function Iu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oE(t):n===3?new Zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BH.exec(e))?new Zn(t[1],t[2],t[3],1):(t=VH.exec(e))?new Zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qH.exec(e))?Yh(t[1],t[2],t[3],t[4]):(t=GH.exec(e))?Yh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HH.exec(e))?cE(t[1],t[2]/100,t[3]/100,1):(t=WH.exec(e))?cE(t[1],t[2]/100,t[3]/100,t[4]):nE.hasOwnProperty(e)?oE(nE[e]):e==="transparent"?new Zn(NaN,NaN,NaN,0):null}function oE(e){return new Zn(e>>16&255,e>>8&255,e&255,1)}function Yh(e,t,n,a){return a<=0&&(e=t=n=NaN),new Zn(e,t,n,a)}function XH(e){return e instanceof of||(e=Iu(e)),e?(e=e.rgb(),new Zn(e.r,e.g,e.b,e.opacity)):new Zn}function Gb(e,t,n,a){return arguments.length===1?XH(e):new Zn(e,t,n,a??1)}function Zn(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}fw(Zn,Gb,G4(of,{brighter(e){return e=e==null?Qm:Math.pow(Qm,e),new Zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new Zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zn(sl(this.r),sl(this.g),sl(this.b),Zm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iE,formatHex:iE,formatHex8:JH,formatRgb:lE,toString:lE}));function iE(){return`#${el(this.r)}${el(this.g)}${el(this.b)}`}function JH(){return`#${el(this.r)}${el(this.g)}${el(this.b)}${el((isNaN(this.opacity)?1:this.opacity)*255)}`}function lE(){const e=Zm(this.opacity);return`${e===1?"rgb(":"rgba("}${sl(this.r)}, ${sl(this.g)}, ${sl(this.b)}${e===1?")":`, ${e})`}`}function Zm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function el(e){return e=sl(e),(e<16?"0":"")+e.toString(16)}function cE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ns(e,t,n,a)}function H4(e){if(e instanceof ns)return new ns(e.h,e.s,e.l,e.opacity);if(e instanceof of||(e=Iu(e)),!e)return new ns;if(e instanceof ns)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),o=Math.max(t,n,a),l=NaN,c=o-s,f=(o+s)/2;return c?(t===o?l=(n-a)/c+(n<a)*6:n===o?l=(a-t)/c+2:l=(t-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new ns(l,c,f,e.opacity)}function QH(e,t,n,a){return arguments.length===1?H4(e):new ns(e,t,n,a??1)}function ns(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}fw(ns,QH,G4(of,{brighter(e){return e=e==null?Qm:Math.pow(Qm,e),new ns(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new ns(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new Zn(ny(e>=240?e-240:e+120,s,a),ny(e,s,a),ny(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new ns(dE(this.h),Xh(this.s),Xh(this.l),Zm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zm(this.opacity);return`${e===1?"hsl(":"hsla("}${dE(this.h)}, ${Xh(this.s)*100}%, ${Xh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dE(e){return e=(e||0)%360,e<0?e+360:e}function Xh(e){return Math.max(0,Math.min(1,e||0))}function ny(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hw=e=>()=>e;function ZH(e,t){return function(n){return e+n*t}}function eW(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function tW(e){return(e=+e)==1?W4:function(t,n){return n-t?eW(t,n,e):hw(isNaN(t)?n:t)}}function W4(e,t){var n=t-e;return n?ZH(e,n):hw(isNaN(e)?t:e)}const uE=(function e(t){var n=tW(t);function a(s,o){var l=n((s=Gb(s)).r,(o=Gb(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=W4(s.opacity,o.opacity);return function(u){return s.r=l(u),s.g=c(u),s.b=f(u),s.opacity=h(u),s+""}}return a.gamma=e,a})(1);function rW(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(o){for(s=0;s<n;++s)a[s]=e[s]*(1-o)+t[s]*o;return a}}function nW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aW(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),o=new Array(n),l;for(l=0;l<a;++l)s[l]=Hc(e[l],t[l]);for(;l<n;++l)o[l]=t[l];return function(c){for(l=0;l<a;++l)o[l]=s[l](c);return o}}function sW(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function ep(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oW(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Hc(e[s],t[s]):a[s]=t[s];return function(o){for(s in n)a[s]=n[s](o);return a}}var Hb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ay=new RegExp(Hb.source,"g");function iW(e){return function(){return e}}function lW(e){return function(t){return e(t)+""}}function cW(e,t){var n=Hb.lastIndex=ay.lastIndex=0,a,s,o,l=-1,c=[],f=[];for(e=e+"",t=t+"";(a=Hb.exec(e))&&(s=ay.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(a=a[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:ep(a,s)})),n=ay.lastIndex;return n<t.length&&(o=t.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?lW(f[0].x):iW(t):(t=f.length,function(h){for(var u=0,m;u<t;++u)c[(m=f[u]).i]=m.x(h);return c.join("")})}function Hc(e,t){var n=typeof t,a;return t==null||n==="boolean"?hw(t):(n==="number"?ep:n==="string"?(a=Iu(t))?(t=a,uE):cW:t instanceof Iu?uE:t instanceof Date?sW:nW(t)?rW:Array.isArray(t)?aW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oW:ep)(e,t)}function mw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function dW(e,t){t===void 0&&(t=e,e=Hc);for(var n=0,a=t.length-1,s=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(s,s=t[++n]);return function(l){var c=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return o[c](l-c)}}function uW(e){return function(){return e}}function tp(e){return+e}var fE=[0,1];function Fn(e){return e}function Wb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:uW(isNaN(t)?NaN:.5)}function fW(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function hW(e,t,n){var a=e[0],s=e[1],o=t[0],l=t[1];return s<a?(a=Wb(s,a),o=n(l,o)):(a=Wb(a,s),o=n(o,l)),function(c){return o(a(c))}}function mW(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),o=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=Wb(e[l],e[l+1]),o[l]=n(t[l],t[l+1]);return function(c){var f=sf(e,c,1,a)-1;return o[f](s[f](c))}}function lf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pg(){var e=fE,t=fE,n=Hc,a,s,o,l=Fn,c,f,h;function u(){var p=Math.min(e.length,t.length);return l!==Fn&&(l=fW(e[0],e[p-1])),c=p>2?mW:hW,f=h=null,m}function m(p){return p==null||isNaN(p=+p)?o:(f||(f=c(e.map(a),t,n)))(a(l(p)))}return m.invert=function(p){return l(s((h||(h=c(t,e.map(a),ep)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,tp),u()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),n=mw,u()},m.clamp=function(p){return arguments.length?(l=p?!0:Fn,u()):l!==Fn},m.interpolate=function(p){return arguments.length?(n=p,u()):n},m.unknown=function(p){return arguments.length?(o=p,m):o},function(p,v){return a=p,s=v,u()}}function pw(){return pg()(Fn,Fn)}function pW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Ic(e){return e=rp(Math.abs(e)),e?e[1]:NaN}function gW(e,t){return function(n,a){for(var s=n.length,o=[],l=0,c=e[0],f=0;s>0&&c>0&&(f+c+1>a&&(c=Math.max(1,a-f)),o.push(n.substring(s-=c,s+c)),!((f+=c+1)>a));)c=e[l=(l+1)%e.length];return o.reverse().join(t)}}function xW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var vW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Du(e){if(!(t=vW.exec(e)))throw new Error("invalid format: "+e);var t;return new gw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Du.prototype=gw.prototype;function gw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yW(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var K4;function bW(e,t){var n=rp(e,t);if(!n)return e+"";var a=n[0],s=n[1],o=s-(K4=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return o===l?a:o>l?a+new Array(o-l+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+rp(e,Math.max(0,t+o-1))[0]}function hE(e,t){var n=rp(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const mE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hE(e*100,t),r:hE,s:bW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pE(e){return e}var gE=Array.prototype.map,xE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jW(e){var t=e.grouping===void 0||e.thousands===void 0?pE:gW(gE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?pE:xW(gE.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Du(m);var p=m.fill,v=m.align,j=m.sign,y=m.symbol,b=m.zero,N=m.width,P=m.comma,A=m.precision,k=m.trim,I=m.type;I==="n"?(P=!0,I="g"):mE[I]||(A===void 0&&(A=12),k=!0,I="g"),(b||p==="0"&&v==="=")&&(b=!0,p="0",v="=");var E=y==="$"?n:y==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",O=y==="$"?a:/[%p]/.test(I)?l:"",C=mE[I],M=/[defgprs%]/.test(I);A=A===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function F(V){var T=E,L=O,U,J,q;if(I==="c")L=C(V)+L,V="";else{V=+V;var W=V<0||1/V<0;if(V=isNaN(V)?f:C(Math.abs(V),A),k&&(V=yW(V)),W&&+V==0&&j!=="+"&&(W=!1),T=(W?j==="("?j:c:j==="-"||j==="("?"":j)+T,L=(I==="s"?xE[8+K4/3]:"")+L+(W&&j==="("?")":""),M){for(U=-1,J=V.length;++U<J;)if(q=V.charCodeAt(U),48>q||q>57){L=(q===46?s+V.slice(U+1):V.slice(U))+L,V=V.slice(0,U);break}}}P&&!b&&(V=t(V,1/0));var z=T.length+V.length+L.length,K=z<N?new Array(N-z+1).join(p):"";switch(P&&b&&(V=t(K+V,K.length?N-L.length:1/0),K=""),v){case"<":V=T+V+L+K;break;case"=":V=T+K+V+L;break;case"^":V=K.slice(0,z=K.length>>1)+T+V+L+K.slice(z);break;default:V=K+T+V+L;break}return o(V)}return F.toString=function(){return m+""},F}function u(m,p){var v=h((m=Du(m),m.type="f",m)),j=Math.max(-8,Math.min(8,Math.floor(Ic(p)/3)))*3,y=Math.pow(10,-j),b=xE[8+j/3];return function(N){return v(y*N)+b}}return{format:h,formatPrefix:u}}var Jh,xw,Y4;wW({thousands:",",grouping:[3],currency:["$",""]});function wW(e){return Jh=jW(e),xw=Jh.format,Y4=Jh.formatPrefix,Jh}function NW(e){return Math.max(0,-Ic(Math.abs(e)))}function SW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ic(t)/3)))*3-Ic(Math.abs(e)))}function CW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ic(t)-Ic(e))+1}function X4(e,t,n,a){var s=Vb(e,t,n),o;switch(a=Du(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=SW(s,l))&&(a.precision=o),Y4(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=CW(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=NW(s))&&(a.precision=o-(a.type==="%")*2);break}}return xw(a)}function pi(e){var t=e.domain;return e.ticks=function(n){var a=t();return Ub(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=t();return X4(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,o=a.length-1,l=a[s],c=a[o],f,h,u=10;for(c<l&&(h=l,l=c,c=h,h=s,s=o,o=h);u-- >0;){if(h=Bb(l,c,n),h===f)return a[s]=l,a[o]=c,t(a);if(h>0)l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h;else if(h<0)l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h;else break;f=h}return e},e}function J4(){var e=pw();return e.copy=function(){return lf(e,J4())},qa.apply(e,arguments),pi(e)}function Q4(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,tp),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return Q4(e).unknown(t)},e=arguments.length?Array.from(e,tp):[0,1],pi(n)}function Z4(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],o=e[a],l;return o<s&&(l=n,n=a,a=l,l=s,s=o,o=l),e[n]=t.floor(s),e[a]=t.ceil(o),e}function vE(e){return Math.log(e)}function yE(e){return Math.exp(e)}function kW(e){return-Math.log(-e)}function PW(e){return-Math.exp(-e)}function EW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function AW(e){return e===10?EW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function IW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function bE(e){return(t,n)=>-e(-t,n)}function vw(e){const t=e(vE,yE),n=t.domain;let a=10,s,o;function l(){return s=IW(a),o=AW(a),n()[0]<0?(s=bE(s),o=bE(o),e(kW,PW)):e(vE,yE),t}return t.base=function(c){return arguments.length?(a=+c,l()):a},t.domain=function(c){return arguments.length?(n(c),l()):n()},t.ticks=c=>{const f=n();let h=f[0],u=f[f.length-1];const m=u<h;m&&([h,u]=[u,h]);let p=s(h),v=s(u),j,y;const b=c==null?10:+c;let N=[];if(!(a%1)&&v-p<b){if(p=Math.floor(p),v=Math.ceil(v),h>0){for(;p<=v;++p)for(j=1;j<a;++j)if(y=p<0?j/o(-p):j*o(p),!(y<h)){if(y>u)break;N.push(y)}}else for(;p<=v;++p)for(j=a-1;j>=1;--j)if(y=p>0?j/o(-p):j*o(p),!(y<h)){if(y>u)break;N.push(y)}N.length*2<b&&(N=Ub(h,u,b))}else N=Ub(p,v,Math.min(v-p,b)).map(o);return m?N.reverse():N},t.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=a===10?"s":","),typeof f!="function"&&(!(a%1)&&(f=Du(f)).precision==null&&(f.trim=!0),f=xw(f)),c===1/0)return f;const h=Math.max(1,a*c/t.ticks().length);return u=>{let m=u/o(Math.round(s(u)));return m*a<a-.5&&(m*=a),m<=h?f(u):""}},t.nice=()=>n(Z4(n(),{floor:c=>o(Math.floor(s(c))),ceil:c=>o(Math.ceil(s(c)))})),t}function eM(){const e=vw(pg()).domain([1,10]);return e.copy=()=>lf(e,eM()).base(e.base()),qa.apply(e,arguments),e}function jE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function wE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function yw(e){var t=1,n=e(jE(t),wE(t));return n.constant=function(a){return arguments.length?e(jE(t=+a),wE(t)):t},pi(n)}function tM(){var e=yw(pg());return e.copy=function(){return lf(e,tM()).constant(e.constant())},qa.apply(e,arguments)}function NE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function DW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function OW(e){return e<0?-e*e:e*e}function bw(e){var t=e(Fn,Fn),n=1;function a(){return n===1?e(Fn,Fn):n===.5?e(DW,OW):e(NE(n),NE(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},pi(t)}function jw(){var e=bw(pg());return e.copy=function(){return lf(e,jw()).exponent(e.exponent())},qa.apply(e,arguments),e}function MW(){return jw.apply(null,arguments).exponent(.5)}function SE(e){return Math.sign(e)*e*e}function TW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function rM(){var e=pw(),t=[0,1],n=!1,a;function s(o){var l=TW(e(o));return isNaN(l)?a:n?Math.round(l):l}return s.invert=function(o){return e.invert(SE(o))},s.domain=function(o){return arguments.length?(e.domain(o),s):e.domain()},s.range=function(o){return arguments.length?(e.range((t=Array.from(o,tp)).map(SE)),s):t.slice()},s.rangeRound=function(o){return s.range(o).round(!0)},s.round=function(o){return arguments.length?(n=!!o,s):n},s.clamp=function(o){return arguments.length?(e.clamp(o),s):e.clamp()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.copy=function(){return rM(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},qa.apply(s,arguments),pi(s)}function nM(){var e=[],t=[],n=[],a;function s(){var l=0,c=Math.max(1,t.length);for(n=new Array(c-1);++l<c;)n[l-1]=FH(e,l/c);return o}function o(l){return l==null||isNaN(l=+l)?a:t[sf(n,l)]}return o.invertExtent=function(l){var c=t.indexOf(l);return c<0?[NaN,NaN]:[c>0?n[c-1]:e[0],c<n.length?n[c]:e[e.length-1]]},o.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let c of l)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(ri),s()},o.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},o.unknown=function(l){return arguments.length?(a=l,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return nM().domain(e).range(t).unknown(a)},qa.apply(o,arguments)}function aM(){var e=0,t=1,n=1,a=[.5],s=[0,1],o;function l(f){return f!=null&&f<=f?s[sf(a,f,0,n)]:o}function c(){var f=-1;for(a=new Array(n);++f<n;)a[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,c()):[e,t]},l.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,c()):s.slice()},l.invertExtent=function(f){var h=s.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=n?[a[n-1],t]:[a[h-1],a[h]]},l.unknown=function(f){return arguments.length&&(o=f),l},l.thresholds=function(){return a.slice()},l.copy=function(){return aM().domain([e,t]).range(s).unknown(o)},qa.apply(pi(l),arguments)}function sM(){var e=[.5],t=[0,1],n,a=1;function s(o){return o!=null&&o<=o?t[sf(e,o,0,a)]:n}return s.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(o){var l=t.indexOf(o);return[e[l-1],e[l]]},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return sM().domain(e).range(t).unknown(n)},qa.apply(s,arguments)}const sy=new Date,oy=new Date;function Yr(e,t,n,a){function s(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(e(o=new Date(+o)),o),s.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),s.round=o=>{const l=s(o),c=s.ceil(o);return o-l<c-o?l:c},s.offset=(o,l)=>(t(o=new Date(+o),l==null?1:Math.floor(l)),o),s.range=(o,l,c)=>{const f=[];if(o=s.ceil(o),c=c==null?1:Math.floor(c),!(o<l)||!(c>0))return f;let h;do f.push(h=new Date(+o)),t(o,c),e(o);while(h<o&&o<l);return f},s.filter=o=>Yr(l=>{if(l>=l)for(;e(l),!o(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;t(l,-1),!o(l););else for(;--c>=0;)for(;t(l,1),!o(l););}),n&&(s.count=(o,l)=>(sy.setTime(+o),oy.setTime(+l),e(sy),e(oy),Math.floor(n(sy,oy))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(a?l=>a(l)%o===0:l=>s.count(0,l)%o===0):s)),s}const np=Yr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);np.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Yr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):np);np.range;const eo=1e3,_a=eo*60,to=_a*60,uo=to*24,ww=uo*7,CE=uo*30,iy=uo*365,tl=Yr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCSeconds());tl.range;const Nw=Yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eo)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getMinutes());Nw.range;const Sw=Yr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_a)},(e,t)=>(t-e)/_a,e=>e.getUTCMinutes());Sw.range;const Cw=Yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eo-e.getMinutes()*_a)},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getHours());Cw.range;const kw=Yr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getUTCHours());kw.range;const cf=Yr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_a)/uo,e=>e.getDate()-1);cf.range;const gg=Yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uo,e=>e.getUTCDate()-1);gg.range;const oM=Yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uo,e=>Math.floor(e/uo));oM.range;function Sl(e){return Yr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_a)/ww)}const xg=Sl(0),ap=Sl(1),RW=Sl(2),_W=Sl(3),Dc=Sl(4),$W=Sl(5),FW=Sl(6);xg.range;ap.range;RW.range;_W.range;Dc.range;$W.range;FW.range;function Cl(e){return Yr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ww)}const vg=Cl(0),sp=Cl(1),LW=Cl(2),zW=Cl(3),Oc=Cl(4),UW=Cl(5),BW=Cl(6);vg.range;sp.range;LW.range;zW.range;Oc.range;UW.range;BW.range;const Pw=Yr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Pw.range;const Ew=Yr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ew.range;const fo=Yr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());fo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});fo.range;const ho=Yr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ho.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Yr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ho.range;function iM(e,t,n,a,s,o){const l=[[tl,1,eo],[tl,5,5*eo],[tl,15,15*eo],[tl,30,30*eo],[o,1,_a],[o,5,5*_a],[o,15,15*_a],[o,30,30*_a],[s,1,to],[s,3,3*to],[s,6,6*to],[s,12,12*to],[a,1,uo],[a,2,2*uo],[n,1,ww],[t,1,CE],[t,3,3*CE],[e,1,iy]];function c(h,u,m){const p=u<h;p&&([h,u]=[u,h]);const v=m&&typeof m.range=="function"?m:f(h,u,m),j=v?v.range(h,+u+1):[];return p?j.reverse():j}function f(h,u,m){const p=Math.abs(u-h)/m,v=cw(([,,b])=>b).right(l,p);if(v===l.length)return e.every(Vb(h/iy,u/iy,m));if(v===0)return np.every(Math.max(Vb(h,u,m),1));const[j,y]=l[p/l[v-1][2]<l[v][2]/p?v-1:v];return j.every(y)}return[c,f]}const[VW,qW]=iM(ho,Ew,vg,oM,kw,Sw),[GW,HW]=iM(fo,Pw,xg,cf,Cw,Nw);function ly(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function WW(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,o=e.days,l=e.shortDays,c=e.months,f=e.shortMonths,h=Qd(s),u=Zd(s),m=Qd(o),p=Zd(o),v=Qd(l),j=Zd(l),y=Qd(c),b=Zd(c),N=Qd(f),P=Zd(f),A={a:W,A:z,b:K,B,c:null,d:DE,e:DE,f:gK,g:kK,G:EK,H:hK,I:mK,j:pK,L:lM,m:xK,M:vK,p:R,q:H,Q:TE,s:RE,S:yK,u:bK,U:jK,V:wK,w:NK,W:SK,x:null,X:null,y:CK,Y:PK,Z:AK,"%":ME},k={a:Y,A:ee,b:me,B:De,c:null,d:OE,e:OE,f:MK,g:VK,G:GK,H:IK,I:DK,j:OK,L:dM,m:TK,M:RK,p:Se,q:We,Q:TE,s:RE,S:_K,u:$K,U:FK,V:LK,w:zK,W:UK,x:null,X:null,y:BK,Y:qK,Z:HK,"%":ME},I={a:F,A:V,b:T,B:L,c:U,d:AE,e:AE,f:cK,g:EE,G:PE,H:IE,I:IE,j:sK,L:lK,m:aK,M:oK,p:M,q:nK,Q:uK,s:fK,S:iK,u:QW,U:ZW,V:eK,w:JW,W:tK,x:J,X:q,y:EE,Y:PE,Z:rK,"%":dK};A.x=E(n,A),A.X=E(a,A),A.c=E(t,A),k.x=E(n,k),k.X=E(a,k),k.c=E(t,k);function E(pe,ue){return function(ke){var se=[],fe=-1,Te=0,Re=pe.length,Ie,Qe,Xe;for(ke instanceof Date||(ke=new Date(+ke));++fe<Re;)pe.charCodeAt(fe)===37&&(se.push(pe.slice(Te,fe)),(Qe=kE[Ie=pe.charAt(++fe)])!=null?Ie=pe.charAt(++fe):Qe=Ie==="e"?" ":"0",(Xe=ue[Ie])&&(Ie=Xe(ke,Qe)),se.push(Ie),Te=fe+1);return se.push(pe.slice(Te,fe)),se.join("")}}function O(pe,ue){return function(ke){var se=Jd(1900,void 0,1),fe=C(se,pe,ke+="",0),Te,Re;if(fe!=ke.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(ue&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Te=cy(Jd(se.y,0,1)),Re=Te.getUTCDay(),Te=Re>4||Re===0?sp.ceil(Te):sp(Te),Te=gg.offset(Te,(se.V-1)*7),se.y=Te.getUTCFullYear(),se.m=Te.getUTCMonth(),se.d=Te.getUTCDate()+(se.w+6)%7):(Te=ly(Jd(se.y,0,1)),Re=Te.getDay(),Te=Re>4||Re===0?ap.ceil(Te):ap(Te),Te=cf.offset(Te,(se.V-1)*7),se.y=Te.getFullYear(),se.m=Te.getMonth(),se.d=Te.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),Re="Z"in se?cy(Jd(se.y,0,1)).getUTCDay():ly(Jd(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(Re+5)%7:se.w+se.U*7-(Re+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,cy(se)):ly(se)}}function C(pe,ue,ke,se){for(var fe=0,Te=ue.length,Re=ke.length,Ie,Qe;fe<Te;){if(se>=Re)return-1;if(Ie=ue.charCodeAt(fe++),Ie===37){if(Ie=ue.charAt(fe++),Qe=I[Ie in kE?ue.charAt(fe++):Ie],!Qe||(se=Qe(pe,ke,se))<0)return-1}else if(Ie!=ke.charCodeAt(se++))return-1}return se}function M(pe,ue,ke){var se=h.exec(ue.slice(ke));return se?(pe.p=u.get(se[0].toLowerCase()),ke+se[0].length):-1}function F(pe,ue,ke){var se=v.exec(ue.slice(ke));return se?(pe.w=j.get(se[0].toLowerCase()),ke+se[0].length):-1}function V(pe,ue,ke){var se=m.exec(ue.slice(ke));return se?(pe.w=p.get(se[0].toLowerCase()),ke+se[0].length):-1}function T(pe,ue,ke){var se=N.exec(ue.slice(ke));return se?(pe.m=P.get(se[0].toLowerCase()),ke+se[0].length):-1}function L(pe,ue,ke){var se=y.exec(ue.slice(ke));return se?(pe.m=b.get(se[0].toLowerCase()),ke+se[0].length):-1}function U(pe,ue,ke){return C(pe,t,ue,ke)}function J(pe,ue,ke){return C(pe,n,ue,ke)}function q(pe,ue,ke){return C(pe,a,ue,ke)}function W(pe){return l[pe.getDay()]}function z(pe){return o[pe.getDay()]}function K(pe){return f[pe.getMonth()]}function B(pe){return c[pe.getMonth()]}function R(pe){return s[+(pe.getHours()>=12)]}function H(pe){return 1+~~(pe.getMonth()/3)}function Y(pe){return l[pe.getUTCDay()]}function ee(pe){return o[pe.getUTCDay()]}function me(pe){return f[pe.getUTCMonth()]}function De(pe){return c[pe.getUTCMonth()]}function Se(pe){return s[+(pe.getUTCHours()>=12)]}function We(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var ue=E(pe+="",A);return ue.toString=function(){return pe},ue},parse:function(pe){var ue=O(pe+="",!1);return ue.toString=function(){return pe},ue},utcFormat:function(pe){var ue=E(pe+="",k);return ue.toString=function(){return pe},ue},utcParse:function(pe){var ue=O(pe+="",!0);return ue.toString=function(){return pe},ue}}}var kE={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,KW=/^%/,YW=/[\\^$*+?|[\]().{}]/g;function Wt(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",o=s.length;return a+(o<n?new Array(n-o+1).join(t)+s:s)}function XW(e){return e.replace(YW,"\\$&")}function Qd(e){return new RegExp("^(?:"+e.map(XW).join("|")+")","i")}function Zd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function JW(e,t,n){var a=fn.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function QW(e,t,n){var a=fn.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function ZW(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function eK(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function tK(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function PE(e,t,n){var a=fn.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function EE(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function rK(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function nK(e,t,n){var a=fn.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function aK(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function AE(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function sK(e,t,n){var a=fn.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function IE(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function oK(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function iK(e,t,n){var a=fn.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function lK(e,t,n){var a=fn.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function cK(e,t,n){var a=fn.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function dK(e,t,n){var a=KW.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function uK(e,t,n){var a=fn.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function fK(e,t,n){var a=fn.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function DE(e,t){return Wt(e.getDate(),t,2)}function hK(e,t){return Wt(e.getHours(),t,2)}function mK(e,t){return Wt(e.getHours()%12||12,t,2)}function pK(e,t){return Wt(1+cf.count(fo(e),e),t,3)}function lM(e,t){return Wt(e.getMilliseconds(),t,3)}function gK(e,t){return lM(e,t)+"000"}function xK(e,t){return Wt(e.getMonth()+1,t,2)}function vK(e,t){return Wt(e.getMinutes(),t,2)}function yK(e,t){return Wt(e.getSeconds(),t,2)}function bK(e){var t=e.getDay();return t===0?7:t}function jK(e,t){return Wt(xg.count(fo(e)-1,e),t,2)}function cM(e){var t=e.getDay();return t>=4||t===0?Dc(e):Dc.ceil(e)}function wK(e,t){return e=cM(e),Wt(Dc.count(fo(e),e)+(fo(e).getDay()===4),t,2)}function NK(e){return e.getDay()}function SK(e,t){return Wt(ap.count(fo(e)-1,e),t,2)}function CK(e,t){return Wt(e.getFullYear()%100,t,2)}function kK(e,t){return e=cM(e),Wt(e.getFullYear()%100,t,2)}function PK(e,t){return Wt(e.getFullYear()%1e4,t,4)}function EK(e,t){var n=e.getDay();return e=n>=4||n===0?Dc(e):Dc.ceil(e),Wt(e.getFullYear()%1e4,t,4)}function AK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Wt(t/60|0,"0",2)+Wt(t%60,"0",2)}function OE(e,t){return Wt(e.getUTCDate(),t,2)}function IK(e,t){return Wt(e.getUTCHours(),t,2)}function DK(e,t){return Wt(e.getUTCHours()%12||12,t,2)}function OK(e,t){return Wt(1+gg.count(ho(e),e),t,3)}function dM(e,t){return Wt(e.getUTCMilliseconds(),t,3)}function MK(e,t){return dM(e,t)+"000"}function TK(e,t){return Wt(e.getUTCMonth()+1,t,2)}function RK(e,t){return Wt(e.getUTCMinutes(),t,2)}function _K(e,t){return Wt(e.getUTCSeconds(),t,2)}function $K(e){var t=e.getUTCDay();return t===0?7:t}function FK(e,t){return Wt(vg.count(ho(e)-1,e),t,2)}function uM(e){var t=e.getUTCDay();return t>=4||t===0?Oc(e):Oc.ceil(e)}function LK(e,t){return e=uM(e),Wt(Oc.count(ho(e),e)+(ho(e).getUTCDay()===4),t,2)}function zK(e){return e.getUTCDay()}function UK(e,t){return Wt(sp.count(ho(e)-1,e),t,2)}function BK(e,t){return Wt(e.getUTCFullYear()%100,t,2)}function VK(e,t){return e=uM(e),Wt(e.getUTCFullYear()%100,t,2)}function qK(e,t){return Wt(e.getUTCFullYear()%1e4,t,4)}function GK(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Oc(e):Oc.ceil(e),Wt(e.getUTCFullYear()%1e4,t,4)}function HK(){return"+0000"}function ME(){return"%"}function TE(e){return+e}function RE(e){return Math.floor(+e/1e3)}var lc,fM,hM;WK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function WK(e){return lc=WW(e),fM=lc.format,lc.parse,hM=lc.utcFormat,lc.utcParse,lc}function KK(e){return new Date(e)}function YK(e){return e instanceof Date?+e:+new Date(+e)}function Aw(e,t,n,a,s,o,l,c,f,h){var u=pw(),m=u.invert,p=u.domain,v=h(".%L"),j=h(":%S"),y=h("%I:%M"),b=h("%I %p"),N=h("%a %d"),P=h("%b %d"),A=h("%B"),k=h("%Y");function I(E){return(f(E)<E?v:c(E)<E?j:l(E)<E?y:o(E)<E?b:a(E)<E?s(E)<E?N:P:n(E)<E?A:k)(E)}return u.invert=function(E){return new Date(m(E))},u.domain=function(E){return arguments.length?p(Array.from(E,YK)):p().map(KK)},u.ticks=function(E){var O=p();return e(O[0],O[O.length-1],E??10)},u.tickFormat=function(E,O){return O==null?I:h(O)},u.nice=function(E){var O=p();return(!E||typeof E.range!="function")&&(E=t(O[0],O[O.length-1],E??10)),E?p(Z4(O,E)):u},u.copy=function(){return lf(u,Aw(e,t,n,a,s,o,l,c,f,h))},u}function XK(){return qa.apply(Aw(GW,HW,fo,Pw,xg,cf,Cw,Nw,tl,fM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function JK(){return qa.apply(Aw(VW,qW,ho,Ew,vg,gg,kw,Sw,tl,hM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yg(){var e=0,t=1,n,a,s,o,l=Fn,c=!1,f;function h(m){return m==null||isNaN(m=+m)?f:l(s===0?.5:(m=(o(m)-n)*s,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=o(e=+e),a=o(t=+t),s=n===a?0:1/(a-n),h):[e,t]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(l=m,h):l};function u(m){return function(p){var v,j;return arguments.length?([v,j]=p,l=m(v,j),h):[l(0),l(1)]}}return h.range=u(Hc),h.rangeRound=u(mw),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return o=m,n=m(e),a=m(t),s=n===a?0:1/(a-n),h}}function gi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mM(){var e=pi(yg()(Fn));return e.copy=function(){return gi(e,mM())},bo.apply(e,arguments)}function pM(){var e=vw(yg()).domain([1,10]);return e.copy=function(){return gi(e,pM()).base(e.base())},bo.apply(e,arguments)}function gM(){var e=yw(yg());return e.copy=function(){return gi(e,gM()).constant(e.constant())},bo.apply(e,arguments)}function Iw(){var e=bw(yg());return e.copy=function(){return gi(e,Iw()).exponent(e.exponent())},bo.apply(e,arguments)}function QK(){return Iw.apply(null,arguments).exponent(.5)}function xM(){var e=[],t=Fn;function n(a){if(a!=null&&!isNaN(a=+a))return t((sf(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ri),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,o)=>$H(e,o/a))},n.copy=function(){return xM(t).domain(e)},bo.apply(n,arguments)}function bg(){var e=0,t=.5,n=1,a=1,s,o,l,c,f,h=Fn,u,m=!1,p;function v(y){return isNaN(y=+y)?p:(y=.5+((y=+u(y))-o)*(a*y<a*o?c:f),h(m?Math.max(0,Math.min(1,y)):y))}v.domain=function(y){return arguments.length?([e,t,n]=y,s=u(e=+e),o=u(t=+t),l=u(n=+n),c=s===o?0:.5/(o-s),f=o===l?0:.5/(l-o),a=o<s?-1:1,v):[e,t,n]},v.clamp=function(y){return arguments.length?(m=!!y,v):m},v.interpolator=function(y){return arguments.length?(h=y,v):h};function j(y){return function(b){var N,P,A;return arguments.length?([N,P,A]=b,h=dW(y,[N,P,A]),v):[h(0),h(.5),h(1)]}}return v.range=j(Hc),v.rangeRound=j(mw),v.unknown=function(y){return arguments.length?(p=y,v):p},function(y){return u=y,s=y(e),o=y(t),l=y(n),c=s===o?0:.5/(o-s),f=o===l?0:.5/(l-o),a=o<s?-1:1,v}}function vM(){var e=pi(bg()(Fn));return e.copy=function(){return gi(e,vM())},bo.apply(e,arguments)}function yM(){var e=vw(bg()).domain([.1,1,10]);return e.copy=function(){return gi(e,yM()).base(e.base())},bo.apply(e,arguments)}function bM(){var e=yw(bg());return e.copy=function(){return gi(e,bM()).constant(e.constant())},bo.apply(e,arguments)}function Dw(){var e=bw(bg());return e.copy=function(){return gi(e,Dw()).exponent(e.exponent())},bo.apply(e,arguments)}function ZK(){return Dw.apply(null,arguments).exponent(.5)}const su=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uw,scaleDiverging:vM,scaleDivergingLog:yM,scaleDivergingPow:Dw,scaleDivergingSqrt:ZK,scaleDivergingSymlog:bM,scaleIdentity:Q4,scaleImplicit:qb,scaleLinear:J4,scaleLog:eM,scaleOrdinal:dw,scalePoint:zH,scalePow:jw,scaleQuantile:nM,scaleQuantize:aM,scaleRadial:rM,scaleSequential:mM,scaleSequentialLog:pM,scaleSequentialPow:Iw,scaleSequentialQuantile:xM,scaleSequentialSqrt:QK,scaleSequentialSymlog:gM,scaleSqrt:MW,scaleSymlog:tM,scaleThreshold:sM,scaleTime:XK,scaleUtc:JK,tickFormat:X4},Symbol.toStringTag,{value:"Module"}));var jo=e=>e.chartData,jg=Pe([jo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),jM=(e,t,n,a)=>a?jg(e):jo(e),eY=(e,t,n)=>n?jg(e):jo(e);function ui(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(xr(t)&&xr(n))return!0}return!1}function _E(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function wM(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,s,o;if(xr(n))s=n;else if(typeof n=="function")return;if(xr(a))o=a;else if(typeof a=="function")return;var l=[s,o];if(ui(l))return l}}function tY(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(ui(a))return _E(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[s,o]=e,l,c;if(s==="auto")t!=null&&(l=Math.min(...t));else if(lt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t?.[0]))}catch{}else if(typeof s=="string"&&Kk.test(s)){var f=Kk.exec(s);if(f==null||f[1]==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t?.[0];if(o==="auto")t!=null&&(c=Math.max(...t));else if(lt(o))c=o;else if(typeof o=="function")try{t!=null&&(c=o(t?.[1]))}catch{}else if(typeof o=="string"&&Yk.test(o)){var u=Yk.exec(o);if(u==null||u[1]==null||t==null)c=void 0;else{var m=+u[1];c=t[1]+m}}else c=t?.[1];var p=[l,c];if(ui(p))return t==null?p:_E(p,t,n)}}}var Wc=1e9,rY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Mw,gr=!0,Va="[DecimalError] ",ol=Va+"Invalid argument: ",Ow=Va+"Exponent out of range: ",Kc=Math.floor,Yi=Math.pow,nY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ua,sn=1e7,ur=7,NM=9007199254740991,op=Kc(NM/ur),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var t,n,a,s,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===s?0:a>s^o.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ur;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(e){return no(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var t=this,n=t.constructor;return sr(no(t,new n(e),0,1),n.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return zr(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var t,n=this,a=n.constructor,s=a.precision,o=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(ua))throw Error(Va+"NaN");if(n.s<1)throw Error(Va+(n.s?"NaN":"-Infinity"));return n.eq(ua)?new a(0):(gr=!1,t=no(Ou(n,o),Ou(e,o),o),gr=!0,sr(t,s))};nt.minus=nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kM(t,e):SM(t,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Va+"NaN");return n.s?(gr=!1,t=no(n,e,0,1).times(e),gr=!0,n.minus(t)):sr(new a(n),s)};nt.naturalExponential=nt.exp=function(){return CM(this)};nt.naturalLogarithm=nt.ln=function(){return Ou(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?SM(t,e):kM(t,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ol+e);if(t=zr(s)+1,a=s.d.length-1,n=a*ur+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};nt.squareRoot=nt.sqrt=function(){var e,t,n,a,s,o,l,c=this,f=c.constructor;if(c.s<1){if(!c.s)return new f(0);throw Error(Va+"NaN")}for(e=zr(c),gr=!1,s=Math.sqrt(+c),s==0||s==1/0?(t=Ps(c.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Kc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new f(t)):a=new f(s.toString()),n=f.precision,s=l=n+3;;)if(o=a,a=o.plus(no(c,o,l+2)).times(.5),Ps(o.d).slice(0,l)===(t=Ps(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(sr(o,n+1,0),o.times(o).eq(c)){a=o;break}}else if(t!="9999")break;l+=4}return gr=!0,sr(a,n)};nt.times=nt.mul=function(e){var t,n,a,s,o,l,c,f,h,u=this,m=u.constructor,p=u.d,v=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,n=u.e+e.e,f=p.length,h=v.length,f<h&&(o=p,p=v,v=o,l=f,f=h,h=l),o=[],l=f+h,a=l;a--;)o.push(0);for(a=h;--a>=0;){for(t=0,s=f+a;s>a;)c=o[s]+v[a]*p[s-a-1]+t,o[s--]=c%sn|0,t=c/sn|0;o[s]=(o[s]+t)%sn|0}for(;!o[--l];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,gr?sr(e,m.precision):e};nt.toDecimalPlaces=nt.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Ds(e,0,Wc),t===void 0?t=a.rounding:Ds(t,0,8),sr(n,e+zr(n)+1,t))};nt.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=xl(a,!0):(Ds(e,0,Wc),t===void 0?t=s.rounding:Ds(t,0,8),a=sr(new s(a),e+1,t),n=xl(a,!0,e+1)),n};nt.toFixed=function(e,t){var n,a,s=this,o=s.constructor;return e===void 0?xl(s):(Ds(e,0,Wc),t===void 0?t=o.rounding:Ds(t,0,8),a=sr(new o(s),e+zr(s)+1,t),n=xl(a.abs(),!1,e+zr(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var e=this,t=e.constructor;return sr(new t(e),zr(e)+1,t.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var t,n,a,s,o,l,c=this,f=c.constructor,h=12,u=+(e=new f(e));if(!e.s)return new f(ua);if(c=new f(c),!c.s){if(e.s<1)throw Error(Va+"Infinity");return c}if(c.eq(ua))return c;if(a=f.precision,e.eq(ua))return sr(c,a);if(t=e.e,n=e.d.length-1,l=t>=n,o=c.s,l){if((n=u<0?-u:u)<=NM){for(s=new f(ua),t=Math.ceil(a/ur+4),gr=!1;n%2&&(s=s.times(c),FE(s.d,t)),n=Kc(n/2),n!==0;)c=c.times(c),FE(c.d,t);return gr=!0,e.s<0?new f(ua).div(s):sr(s,a)}}else if(o<0)throw Error(Va+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,c.s=1,gr=!1,s=e.times(Ou(c,a+h)),gr=!0,s=CM(s),s.s=o,s};nt.toPrecision=function(e,t){var n,a,s=this,o=s.constructor;return e===void 0?(n=zr(s),a=xl(s,n<=o.toExpNeg||n>=o.toExpPos)):(Ds(e,1,Wc),t===void 0?t=o.rounding:Ds(t,0,8),s=sr(new o(s),e,t),n=zr(s),a=xl(s,e<=n||n<=o.toExpNeg,e)),a};nt.toSignificantDigits=nt.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ds(e,1,Wc),t===void 0?t=a.rounding:Ds(t,0,8)),sr(new a(n),e,t)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=zr(e),n=e.constructor;return xl(e,t<=n.toExpNeg||t>=n.toExpPos)};function SM(e,t){var n,a,s,o,l,c,f,h,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),gr?sr(t,m):t;if(f=e.d,h=t.d,l=e.e,s=t.e,f=f.slice(),o=l-s,o){for(o<0?(a=f,o=-o,c=h.length):(a=h,s=l,c=f.length),l=Math.ceil(m/ur),c=l>c?l+1:c+1,o>c&&(o=c,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(c=f.length,o=h.length,c-o<0&&(o=c,a=h,h=f,f=a),n=0;o;)n=(f[--o]=f[o]+h[o]+n)/sn|0,f[o]%=sn;for(n&&(f.unshift(n),++s),c=f.length;f[--c]==0;)f.pop();return t.d=f,t.e=s,gr?sr(t,m):t}function Ds(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ol+e)}function Ps(e){var t,n,a,s=e.length-1,o="",l=e[0];if(s>0){for(o+=l,t=1;t<s;t++)a=e[t]+"",n=ur-a.length,n&&(o+=Ho(n)),o+=a;l=e[t],a=l+"",n=ur-a.length,n&&(o+=Ho(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var no=(function(){function e(a,s){var o,l=0,c=a.length;for(a=a.slice();c--;)o=a[c]*s+l,a[c]=o%sn|0,l=o/sn|0;return l&&a.unshift(l),a}function t(a,s,o,l){var c,f;if(o!=l)f=o>l?1:-1;else for(c=f=0;c<o;c++)if(a[c]!=s[c]){f=a[c]>s[c]?1:-1;break}return f}function n(a,s,o){for(var l=0;o--;)a[o]-=l,l=a[o]<s[o]?1:0,a[o]=l*sn+a[o]-s[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,o,l){var c,f,h,u,m,p,v,j,y,b,N,P,A,k,I,E,O,C,M=a.constructor,F=a.s==s.s?1:-1,V=a.d,T=s.d;if(!a.s)return new M(a);if(!s.s)throw Error(Va+"Division by zero");for(f=a.e-s.e,O=T.length,I=V.length,v=new M(F),j=v.d=[],h=0;T[h]==(V[h]||0);)++h;if(T[h]>(V[h]||0)&&--f,o==null?P=o=M.precision:l?P=o+(zr(a)-zr(s))+1:P=o,P<0)return new M(0);if(P=P/ur+2|0,h=0,O==1)for(u=0,T=T[0],P++;(h<I||u)&&P--;h++)A=u*sn+(V[h]||0),j[h]=A/T|0,u=A%T|0;else{for(u=sn/(T[0]+1)|0,u>1&&(T=e(T,u),V=e(V,u),O=T.length,I=V.length),k=O,y=V.slice(0,O),b=y.length;b<O;)y[b++]=0;C=T.slice(),C.unshift(0),E=T[0],T[1]>=sn/2&&++E;do u=0,c=t(T,y,O,b),c<0?(N=y[0],O!=b&&(N=N*sn+(y[1]||0)),u=N/E|0,u>1?(u>=sn&&(u=sn-1),m=e(T,u),p=m.length,b=y.length,c=t(m,y,p,b),c==1&&(u--,n(m,O<p?C:T,p))):(u==0&&(c=u=1),m=T.slice()),p=m.length,p<b&&m.unshift(0),n(y,m,b),c==-1&&(b=y.length,c=t(T,y,O,b),c<1&&(u++,n(y,O<b?C:T,b))),b=y.length):c===0&&(u++,y=[0]),j[h++]=u,c&&y[0]?y[b++]=V[k]||0:(y=[V[k]],b=1);while((k++<I||y[0]!==void 0)&&P--)}return j[0]||j.shift(),v.e=f,sr(v,l?o+zr(v)+1:o)}})();function CM(e,t){var n,a,s,o,l,c,f=0,h=0,u=e.constructor,m=u.precision;if(zr(e)>16)throw Error(Ow+zr(e));if(!e.s)return new u(ua);for(gr=!1,c=m,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(a=Math.log(Yi(2,h))/Math.LN10*2+5|0,c+=a,n=s=o=new u(ua),u.precision=c;;){if(s=sr(s.times(e),c),n=n.times(++f),l=o.plus(no(s,n,c)),Ps(l.d).slice(0,c)===Ps(o.d).slice(0,c)){for(;h--;)o=sr(o.times(o),c);return u.precision=m,t==null?(gr=!0,sr(o,m)):o}o=l}}function zr(e){for(var t=e.e*ur,n=e.d[0];n>=10;n/=10)t++;return t}function dy(e,t,n){if(t>e.LN10.sd())throw gr=!0,n&&(e.precision=n),Error(Va+"LN10 precision limit exceeded");return sr(new e(e.LN10),t)}function Ho(e){for(var t="";e--;)t+="0";return t}function Ou(e,t){var n,a,s,o,l,c,f,h,u,m=1,p=10,v=e,j=v.d,y=v.constructor,b=y.precision;if(v.s<1)throw Error(Va+(v.s?"NaN":"-Infinity"));if(v.eq(ua))return new y(0);if(t==null?(gr=!1,h=b):h=t,v.eq(10))return t==null&&(gr=!0),dy(y,h);if(h+=p,y.precision=h,n=Ps(j),a=n.charAt(0),o=zr(v),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)v=v.times(e),n=Ps(v.d),a=n.charAt(0),m++;o=zr(v),a>1?(v=new y("0."+n),o++):v=new y(a+"."+n.slice(1))}else return f=dy(y,h+2,b).times(o+""),v=Ou(new y(a+"."+n.slice(1)),h-p).plus(f),y.precision=b,t==null?(gr=!0,sr(v,b)):v;for(c=l=v=no(v.minus(ua),v.plus(ua),h),u=sr(v.times(v),h),s=3;;){if(l=sr(l.times(u),h),f=c.plus(no(l,new y(s),h)),Ps(f.d).slice(0,h)===Ps(c.d).slice(0,h))return c=c.times(2),o!==0&&(c=c.plus(dy(y,h+2,b).times(o+""))),c=no(c,new y(m),h),y.precision=b,t==null?(gr=!0,sr(c,b)):c;c=f,s+=2}}function $E(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=Kc(n/ur),e.d=[],a=(n+1)%ur,n<0&&(a+=ur),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=ur;a<s;)e.d.push(+t.slice(a,a+=ur));t=t.slice(a),a=ur-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),gr&&(e.e>op||e.e<-op))throw Error(Ow+n)}else e.s=0,e.e=0,e.d=[0];return e}function sr(e,t,n){var a,s,o,l,c,f,h,u,m=e.d;for(l=1,o=m[0];o>=10;o/=10)l++;if(a=t-l,a<0)a+=ur,s=t,h=m[u=0];else{if(u=Math.ceil((a+1)/ur),o=m.length,u>=o)return e;for(h=o=m[u],l=1;o>=10;o/=10)l++;a%=ur,s=a-ur+l}if(n!==void 0&&(o=Yi(10,l-s-1),c=h/o%10|0,f=t<0||m[u+1]!==void 0||h%o,f=n<4?(c||f)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||f||n==6&&(a>0?s>0?h/Yi(10,l-s):0:m[u-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return f?(o=zr(e),m.length=1,t=t-o-1,m[0]=Yi(10,(ur-t%ur)%ur),e.e=Kc(-t/ur)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=u,o=1,u--):(m.length=u+1,o=Yi(10,ur-a),m[u]=s>0?(h/Yi(10,l-s)%Yi(10,s)|0)*o:0),f)for(;;)if(u==0){(m[0]+=o)==sn&&(m[0]=1,++e.e);break}else{if(m[u]+=o,m[u]!=sn)break;m[u--]=0,o=1}for(a=m.length;m[--a]===0;)m.pop();if(gr&&(e.e>op||e.e<-op))throw Error(Ow+zr(e));return e}function kM(e,t){var n,a,s,o,l,c,f,h,u,m,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),gr?sr(t,v):t;if(f=e.d,m=t.d,a=t.e,h=e.e,f=f.slice(),l=h-a,l){for(u=l<0,u?(n=f,l=-l,c=m.length):(n=m,a=h,c=f.length),s=Math.max(Math.ceil(v/ur),c)+2,l>s&&(l=s,n.length=1),n.reverse(),s=l;s--;)n.push(0);n.reverse()}else{for(s=f.length,c=m.length,u=s<c,u&&(c=s),s=0;s<c;s++)if(f[s]!=m[s]){u=f[s]<m[s];break}l=0}for(u&&(n=f,f=m,m=n,t.s=-t.s),c=f.length,s=m.length-c;s>0;--s)f[c++]=0;for(s=m.length;s>l;){if(f[--s]<m[s]){for(o=s;o&&f[--o]===0;)f[o]=sn-1;--f[o],f[s]+=sn}f[s]-=m[s]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--a;return f[0]?(t.d=f,t.e=a,gr?sr(t,v):t):new p(0)}function xl(e,t,n){var a,s=zr(e),o=Ps(e.d),l=o.length;return t?(n&&(a=n-l)>0?o=o.charAt(0)+"."+o.slice(1)+Ho(a):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+Ho(-s-1)+o,n&&(a=n-l)>0&&(o+=Ho(a))):s>=l?(o+=Ho(s+1-l),n&&(a=n-s-1)>0&&(o=o+"."+Ho(a))):((a=s+1)<l&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-l)>0&&(s+1===l&&(o+="."),o+=Ho(a))),e.s<0?"-"+o:o}function FE(e,t){if(e.length>t)return e.length=t,!0}function PM(e){var t,n,a;function s(o){var l=this;if(!(l instanceof s))return new s(o);if(l.constructor=s,o instanceof s){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(ol+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return $E(l,o.toString())}else if(typeof o!="string")throw Error(ol+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,nY.test(o))$E(l,o);else throw Error(ol+o)}if(s.prototype=nt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=PM,s.config=s.set=aY,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function aY(e){if(!e||typeof e!="object")throw Error(Va+"Object expected");var t,n,a,s=["precision",1,Wc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(Kc(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(ol+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(ol+n+": "+a);return this}var Mw=PM(rY);ua=new Mw(1);const er=Mw;var sY=e=>e,EM={},AM=e=>e===EM,LE=e=>function t(){return arguments.length===0||arguments.length===1&&AM(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},IM=(e,t)=>e===1?t:LE(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(l=>l!==EM).length;return o>=e?t(...a):IM(e-o,LE(function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var h=a.map(u=>AM(u)?c.shift():u);return t(...h,...c)}))}),oY=e=>IM(e.length,e),Kb=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},iY=oY((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),lY=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return sY;var s=n.reverse(),o=s[0],l=s.slice(1);return function(){return l.reduce((c,f)=>f(c),o(...arguments))}};function DM(e){var t;return e===0?t=1:t=Math.floor(new er(e).abs().log(10).toNumber())+1,t}function OM(e,t,n){for(var a=new er(e),s=0,o=[];a.lt(t)&&s<1e5;)o.push(a.toNumber()),a=a.add(n),s++;return o}var MM=e=>{var[t,n]=e,[a,s]=[t,n];return t>n&&([a,s]=[n,t]),[a,s]},TM=(e,t,n)=>{if(e.lte(0))return new er(0);var a=DM(e.toNumber()),s=new er(10).pow(a),o=e.div(s),l=a!==1?.05:.1,c=new er(Math.ceil(o.div(l).toNumber())).add(n).mul(l),f=c.mul(s);return t?new er(f.toNumber()):new er(Math.ceil(f.toNumber()))},cY=(e,t,n)=>{var a=new er(1),s=new er(e);if(!s.isint()&&n){var o=Math.abs(e);o<1?(a=new er(10).pow(DM(e)-1),s=new er(Math.floor(s.div(a).toNumber())).mul(a)):o>1&&(s=new er(Math.floor(e)))}else e===0?s=new er(Math.floor((t-1)/2)):n||(s=new er(Math.floor(e)));var l=Math.floor((t-1)/2),c=lY(iY(f=>s.add(new er(f-l).mul(a)).toNumber()),Kb);return c(0,t)},RM=function(t,n,a,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new er(0),tickMin:new er(0),tickMax:new er(0)};var l=TM(new er(n).sub(t).div(a-1),s,o),c;t<=0&&n>=0?c=new er(0):(c=new er(t).add(n).div(2),c=c.sub(new er(c).mod(l)));var f=Math.ceil(c.sub(t).div(l).toNumber()),h=Math.ceil(new er(n).sub(c).div(l).toNumber()),u=f+h+1;return u>a?RM(t,n,a,s,o+1):(u<a&&(h=n>0?h+(a-u):h,f=n>0?f:f+(a-u)),{step:l,tickMin:c.sub(new er(f).mul(l)),tickMax:c.add(new er(h).mul(l))})},dY=function(t){var[n,a]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),[c,f]=MM([n,a]);if(c===-1/0||f===1/0){var h=f===1/0?[c,...Kb(0,s-1).map(()=>1/0)]:[...Kb(0,s-1).map(()=>-1/0),f];return n>a?h.reverse():h}if(c===f)return cY(c,s,o);var{step:u,tickMin:m,tickMax:p}=RM(c,f,l,o,0),v=OM(m,p.add(new er(.1).mul(u)),u);return n>a?v.reverse():v},uY=function(t,n){var[a,s]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,c]=MM([a,s]);if(l===-1/0||c===1/0)return[a,s];if(l===c)return[l];var f=Math.max(n,2),h=TM(new er(c).sub(l).div(f-1),o,0),u=[...OM(new er(l),new er(c),h),c];return o===!1&&(u=u.map(m=>Math.round(m))),a>s?u.reverse():u},fY=e=>e.rootProps.barCategoryGap,df=e=>e.rootProps.stackOffset,_M=e=>e.rootProps.reverseStackOrder,Tw=e=>e.options.chartName,Rw=e=>e.rootProps.syncId,$M=e=>e.rootProps.syncMethod,_w=e=>e.options.eventEmitter,hY=e=>e.rootProps.baseValue,vn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Qs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ca={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},wg=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},mY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Qs.angleAxisId,includeHidden:!1,name:void 0,reversed:Qs.reversed,scale:Qs.scale,tick:Qs.tick,tickCount:void 0,ticks:void 0,type:Qs.type,unit:void 0},pY={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:ca.type,unit:void 0},gY={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Qs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qs.scale,tick:Qs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xY={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:"category",unit:void 0},$w=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?gY:mY,Fw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?xY:pY,Ng=e=>e.polarOptions,Lw=Pe([vo,yo,un],_4),FM=Pe([Ng,Lw],(e,t)=>{if(e!=null)return pa(e.innerRadius,t,0)}),LM=Pe([Ng,Lw],(e,t)=>{if(e!=null)return pa(e.outerRadius,t,t*.8)}),vY=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},zM=Pe([Ng],vY);Pe([$w,zM],wg);var UM=Pe([Lw,FM,LM],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Pe([Fw,UM],wg);var BM=Pe([tr,Ng,FM,LM,vo,yo],(e,t,n,a,s,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:l,cy:c,startAngle:f,endAngle:h}=t;return{cx:pa(l,s,s/2),cy:pa(c,o,o/2),innerRadius:n,outerRadius:a,startAngle:f,endAngle:h,clockWise:!1}}}),yr=(e,t)=>t,uf=(e,t,n)=>n;function zw(e){return e?.id}function VM(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:s,dataKey:o}=n,l=new Map;return e.forEach(c=>{var f,h=(f=c.data)!==null&&f!==void 0?f:a;if(!(h==null||h.length===0)){var u=zw(c);h.forEach((m,p)=>{var v=o==null||s?p:String(fr(m,o,null)),j=fr(m,c.dataKey,0),y;l.has(v)?y=l.get(v):y={},Object.assign(y,{[u]:j}),l.set(v,y)})}}),Array.from(l.values())}function Uw(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Sg=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Cg(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function yY(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var Xr=e=>{var t=tr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Yc=e=>e.tooltip.settings.axisId;function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(a){bY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bY(e,t,n){return(t=jY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jY(e){var t=wY(e,"string");return typeof t=="symbol"?t:t+""}function wY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yb=[0,"auto"],rn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},qM=(e,t)=>e.cartesianAxis.xAxis[t],wo=(e,t)=>{var n=qM(e,t);return n??rn},nn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Yb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:rf},GM=(e,t)=>e.cartesianAxis.yAxis[t],No=(e,t)=>{var n=GM(e,t);return n??nn},NY={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Bw=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??NY},kr=(e,t,n)=>{switch(t){case"xAxis":return wo(e,n);case"yAxis":return No(e,n);case"zAxis":return Bw(e,n);case"angleAxis":return $w(e,n);case"radiusAxis":return Fw(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},SY=(e,t,n)=>{switch(t){case"xAxis":return wo(e,n);case"yAxis":return No(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ff=(e,t,n)=>{switch(t){case"xAxis":return wo(e,n);case"yAxis":return No(e,n);case"angleAxis":return $w(e,n);case"radiusAxis":return Fw(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},HM=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Vw(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var WM=e=>e.graphicalItems.cartesianItems,CY=Pe([yr,uf],Vw),qw=(e,t,n)=>e.filter(n).filter(a=>t?.includeHidden===!0?!0:!a.hide),hf=Pe([WM,kr,CY],qw,{memoizeOptions:{resultEqualityCheck:Cg}}),KM=Pe([hf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Uw)),YM=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),kY=Pe([hf],YM),Gw=e=>e.map(t=>t.data).filter(Boolean).flat(1),PY=Pe([hf],Gw,{memoizeOptions:{resultEqualityCheck:Cg}}),Hw=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:n.slice(a,s+1)},Ww=Pe([PY,jM],Hw),Kw=(e,t,n)=>t?.dataKey!=null?e.map(a=>({value:fr(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:fr(s,a)}))):e.map(a=>({value:a})),kg=Pe([Ww,kr,hf],Kw);function XM(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function dm(e){if(As(e)||e instanceof Date){var t=Number(e);if(xr(t))return t}}function UE(e){if(Array.isArray(e)){var t=[dm(e[0]),dm(e[1])];return ui(t)?t:void 0}var n=dm(e);if(n!=null)return[n,n]}function mo(e){return e.map(dm).filter(G7)}function EY(e,t,n){return!n||typeof t!="number"||ls(t)?[]:n.length?mo(n.flatMap(a=>{var s=fr(e,a.dataKey),o,l;if(Array.isArray(s)?[o,l]=s:o=l=s,!(!xr(o)||!xr(l)))return[t-o,t+l]})):[]}var Jr=e=>{var t=Xr(e),n=Yc(e);return ff(e,t,n)},mf=Pe([Jr],e=>e?.dataKey),AY=Pe([KM,jM,Jr],VM),JM=(e,t,n,a)=>{var s={},o=t.reduce((l,c)=>{if(c.stackId==null)return l;var f=l[c.stackId];return f==null&&(f=[]),f.push(c),l[c.stackId]=f,l},s);return Object.fromEntries(Object.entries(o).map(l=>{var[c,f]=l,h=a?[...f].reverse():f,u=h.map(zw);return[c,{stackedData:lq(e,u,n),graphicalItems:h}]}))},QM=Pe([AY,KM,df,_M],JM),ZM=(e,t,n,a)=>{var{dataStartIndex:s,dataEndIndex:o}=t;if(a==null&&n!=="zAxis"){var l=fq(e,s,o);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},IY=Pe([kr],e=>e.allowDataOverflow),Yw=e=>{var t;if(e==null||!("domain"in e))return Yb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=mo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Yb},Xw=Pe([kr],Yw),Jw=Pe([Xw,IY],wM),DY=Pe([QM,jo,yr,Jw],ZM,{memoizeOptions:{resultEqualityCheck:Sg}}),Pg=e=>e.errorBars,OY=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>XM(n,a)),lp=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n.filter(Boolean);if(s.length!==0){var o=s.flat(),l=Math.min(...o),c=Math.max(...o);return[l,c]}},Qw=(e,t,n,a,s)=>{var o,l;if(n.length>0&&e.forEach(c=>{n.forEach(f=>{var h,u,m=(h=a[f.id])===null||h===void 0?void 0:h.filter(N=>XM(s,N)),p=fr(c,(u=t.dataKey)!==null&&u!==void 0?u:f.dataKey),v=EY(c,p,m);if(v.length>=2){var j=Math.min(...v),y=Math.max(...v);(o==null||j<o)&&(o=j),(l==null||y>l)&&(l=y)}var b=UE(p);b!=null&&(o=o==null?b[0]:Math.min(o,b[0]),l=l==null?b[1]:Math.max(l,b[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var f=UE(fr(c,t.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),l=l==null?f[1]:Math.max(l,f[1]))}),xr(o)&&xr(l))return[o,l]},MY=Pe([Ww,kr,kY,Pg,yr],Qw,{memoizeOptions:{resultEqualityCheck:Sg}});function TY(e){var{value:t}=e;if(As(t)||t instanceof Date)return t}var RY=(e,t,n)=>{var a=e.map(TY).filter(s=>s!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&f5(a))?z4(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},eT=e=>e.referenceElements.dots,Xc=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),_Y=Pe([eT,yr,uf],Xc),tT=e=>e.referenceElements.areas,$Y=Pe([tT,yr,uf],Xc),rT=e=>e.referenceElements.lines,FY=Pe([rT,yr,uf],Xc),nT=(e,t)=>{if(e!=null){var n=mo(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},LY=Pe(_Y,yr,nT),aT=(e,t)=>{if(e!=null){var n=mo(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},zY=Pe([$Y,yr],aT);function UY(e){var t;if(e.x!=null)return mo([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:mo(n)}function BY(e){var t;if(e.y!=null)return mo([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:mo(n)}var sT=(e,t)=>{if(e!=null){var n=e.flatMap(a=>t==="xAxis"?UY(a):BY(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},VY=Pe([FY,yr],sT),qY=Pe(LY,VY,zY,(e,t,n)=>lp(e,n,t)),Zw=(e,t,n,a,s,o,l,c)=>{if(n!=null)return n;var f=l==="vertical"&&c==="xAxis"||l==="horizontal"&&c==="yAxis",h=f?lp(a,o,s):lp(o,s);return tY(t,h,e.allowDataOverflow)},GY=Pe([kr,Xw,Jw,DY,MY,qY,tr,yr],Zw,{memoizeOptions:{resultEqualityCheck:Sg}}),HY=[0,1],eN=(e,t,n,a,s,o,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:c,type:f}=e,h=xo(t,o);if(h&&c==null){var u;return z4(0,(u=n?.length)!==null&&u!==void 0?u:0)}return f==="category"?RY(a,e,h):s==="expand"?HY:l}},tN=Pe([kr,tr,Ww,kg,df,yr,GY],eN),oT=(e,t,n,a,s)=>{if(e!=null){var{scale:o,type:l}=e;if(o==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof o=="string"){var c="scale".concat(Ju(o));return c in su?c:"point"}}},Jc=Pe([kr,tr,HM,Tw,yr],oT);function WY(e){if(e!=null){if(e in su)return su[e]();var t="scale".concat(Ju(e));if(t in su)return su[t]()}}function rN(e,t,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var s=WY(t);if(s!=null){var o=s.domain(n).range(a);return aq(o),o}}}var nN=(e,t,n)=>{var a=Yw(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&ui(e))return dY(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ui(e))return uY(e,t.tickCount,t.allowDecimals)}},aN=Pe([tN,ff,Jc],nN),sN=(e,t,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&ui(t)&&Array.isArray(n)&&n.length>0){var s=t[0],o=n[0],l=t[1],c=n[n.length-1];return[Math.min(s,o),Math.max(l,c)]}return t},KY=Pe([kr,tN,aN,yr],sN),YY=Pe(kg,kr,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(mo(e.map(m=>m.value))).sort((m,p)=>m-p),s=a[0],o=a[a.length-1];if(s==null||o==null)return 1/0;var l=o-s;if(l===0)return 1/0;for(var c=0;c<a.length-1;c++){var f=a[c],h=a[c+1];if(!(f==null||h==null)){var u=h-f;n=Math.min(n,u)}}return n/l}}),iT=Pe(YY,tr,fY,un,(e,t,n,a,s)=>s,(e,t,n,a,s)=>{if(!xr(e))return 0;var o=t==="vertical"?a.height:a.width;if(s==="gap")return e*o/2;if(s==="no-gap"){var l=pa(n,e*o),c=e*o/2;return c-l-(c-l)/o*l}return 0}),XY=(e,t,n)=>{var a=wo(e,t);return a==null||typeof a.padding!="string"?0:iT(e,"xAxis",t,n,a.padding)},JY=(e,t,n)=>{var a=No(e,t);return a==null||typeof a.padding!="string"?0:iT(e,"yAxis",t,n,a.padding)},QY=Pe(wo,XY,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((n=s.left)!==null&&n!==void 0?n:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),ZY=Pe(No,JY,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((n=s.top)!==null&&n!==void 0?n:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),eX=Pe([un,QY,ig,og,(e,t,n)=>n],(e,t,n,a,s)=>{var{padding:o}=a;return s?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),tX=Pe([un,tr,ZY,ig,og,(e,t,n)=>n],(e,t,n,a,s,o)=>{var{padding:l}=s;return o?[a.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),pf=(e,t,n,a)=>{var s;switch(t){case"xAxis":return eX(e,n,a);case"yAxis":return tX(e,n,a);case"zAxis":return(s=Bw(e,n))===null||s===void 0?void 0:s.range;case"angleAxis":return zM(e);case"radiusAxis":return UM(e,n);default:return}},lT=Pe([kr,pf],wg),Eg=Pe([kr,Jc,KY,lT],rN);Pe([hf,Pg,yr],OY);function cT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ag=(e,t)=>t,Ig=(e,t,n)=>n,rX=Pe(ag,Ag,Ig,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(cT)),nX=Pe(sg,Ag,Ig,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(cT)),dT=(e,t)=>({width:e.width,height:t.height}),aX=(e,t)=>{var n=typeof t.width=="number"?t.width:rf;return{width:n,height:e.height}},sX=Pe(un,wo,dT),oX=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},iX=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},lX=Pe(yo,un,rX,Ag,Ig,(e,t,n,a,s)=>{var o={},l;return n.forEach(c=>{var f=dT(t,c);l==null&&(l=oX(t,a,e));var h=a==="top"&&!s||a==="bottom"&&s;o[c.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),o}),cX=Pe(vo,un,nX,Ag,Ig,(e,t,n,a,s)=>{var o={},l;return n.forEach(c=>{var f=aX(t,c);l==null&&(l=iX(t,a,e));var h=a==="left"&&!s||a==="right"&&s;o[c.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),o}),dX=(e,t)=>{var n=wo(e,t);if(n!=null)return lX(e,n.orientation,n.mirror)},uX=Pe([un,wo,dX,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var s=n?.[a];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),fX=(e,t)=>{var n=No(e,t);if(n!=null)return cX(e,n.orientation,n.mirror)},hX=Pe([un,No,fX,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var s=n?.[a];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),mX=Pe(un,No,(e,t)=>{var n=typeof t.width=="number"?t.width:rf;return{width:n,height:e.height}}),uT=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:s,type:o,dataKey:l}=n,c=xo(e,a),f=t.map(h=>h.value);if(l&&c&&o==="category"&&s&&f5(f))return f}},oN=Pe([tr,kg,kr,yr],uT),fT=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:o}=n,l=xo(e,a);if(l&&(s==="number"||o!=="auto"))return t.map(c=>c.value)}},iN=Pe([tr,kg,ff,yr],fT),BE=Pe([tr,SY,Jc,Eg,oN,iN,pf,aN,yr],(e,t,n,a,s,o,l,c,f)=>{if(t!=null){var h=xo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:o,duplicateDomain:s,isCategorical:h,niceTicks:c,range:l,realScaleType:n,scale:a}}}),pX=(e,t,n,a,s,o,l,c,f)=>{if(!(t==null||a==null)){var h=xo(e,f),{type:u,ticks:m,tickCount:p}=t,v=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,j=u==="category"&&a.bandwidth?a.bandwidth()/v:0;j=f==="angleAxis"&&o!=null&&o.length>=2?In(o[0]-o[1])*2*j:j;var y=m||s;if(y){var b=y.map((N,P)=>{var A=l?l.indexOf(N):N;return{index:P,coordinate:a(A)+j,value:N,offset:j}});return b.filter(N=>xr(N.coordinate))}return h&&c?c.map((N,P)=>({coordinate:a(N)+j,value:N,index:P,offset:j})).filter(N=>xr(N.coordinate)):a.ticks?a.ticks(p).map(N=>({coordinate:a(N)+j,value:N,offset:j})):a.domain().map((N,P)=>({coordinate:a(N)+j,value:l?l[N]:N,index:P,offset:j}))}},hT=Pe([tr,ff,Jc,Eg,aN,pf,oN,iN,yr],pX),gX=(e,t,n,a,s,o,l)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var c=xo(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&a?.length>=2?In(a[0]-a[1])*2*h:h,c&&o?o.map((u,m)=>({coordinate:n(u)+h,value:u,index:m,offset:h})):n.ticks?n.ticks(f).map(u=>({coordinate:n(u)+h,value:u,offset:h})):n.domain().map((u,m)=>({coordinate:n(u)+h,value:s?s[u]:u,index:m,offset:h}))}},mT=Pe([tr,ff,Eg,pf,oN,iN,yr],gX),pT=Pe(kr,Eg,(e,t)=>{if(!(e==null||t==null))return ip(ip({},e),{},{scale:t})}),xX=Pe([kr,Jc,tN,lT],rN);Pe((e,t,n)=>Bw(e,n),xX,(e,t)=>{if(!(e==null||t==null))return ip(ip({},e),{},{scale:t})});var vX=Pe([tr,ag,sg],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),gT=e=>e.options.defaultTooltipEventType,xT=e=>e.options.validateTooltipEventTypes;function vT(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function lN(e,t){var n=gT(e),a=xT(e);return vT(t,n,a)}function yX(e){return mt(t=>lN(t,e))}var yT=(e,t)=>{var n,a=Number(t);if(!(ls(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},bX=e=>e.tooltip.settings,Xo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},jX={itemInteraction:{click:Xo,hover:Xo},axisInteraction:{click:Xo,hover:Xo},keyboardInteraction:Xo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bT=ta({name:"tooltip",initialState:jX,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:pr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,s=is(e).tooltipItemPayloads.indexOf(n);s>-1&&(e.tooltipItemPayloads[s]=a)},prepare:pr()},removeTooltipEntrySettings:{reducer(e,t){var n=is(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:pr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:wX,replaceTooltipEntrySettings:NX,removeTooltipEntrySettings:SX,setTooltipSettingsState:CX,setActiveMouseOverItemIndex:jT,mouseLeaveItem:kX,mouseLeaveChart:wT,setActiveClickItemIndex:PX,setMouseOverAxisIndex:NT,setMouseClickAxisIndex:EX,setSyncInteraction:Xb,setKeyboardInteraction:Jb}=bT.actions,AX=bT.reducer;function VE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(n),!0).forEach(function(a){IX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function IX(e,t,n){return(t=DX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DX(e){var t=OX(e,"string");return typeof t=="symbol"?t:t+""}function OX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MX(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function TX(e){return e.index!=null}var ST=(e,t,n,a)=>{if(t==null)return Xo;var s=MX(e,t,n);if(s==null)return Xo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(TX(s)){if(o)return Qh(Qh({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Qh(Qh({},Xo),{},{coordinate:s.coordinate})};function RX(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function _X(e,t){var n=RX(e),a=t[0],s=t[1];if(n===void 0)return!1;var o=Math.min(a,s),l=Math.max(a,s);return n>=o&&n<=l}function $X(e,t,n){if(n==null||t==null)return!0;var a=fr(e,t);return a==null||!ui(n)?!0:_X(a,n)}var cN=(e,t,n,a)=>{var s=e?.index;if(s==null)return null;var o=Number(s);if(!xr(o))return s;var l=0,c=1/0;t.length>0&&(c=t.length-1);var f=Math.max(l,Math.min(o,c)),h=t[f];return h==null||$X(h,n,a)?String(f):null},CT=(e,t,n,a,s,o,l,c)=>{if(!(o==null||c==null)){var f=l[0],h=f==null?void 0:c(f.positions,o);if(h!=null)return h;var u=s?.[Number(o)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},kT=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(n==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(l=>{var c;return((c=l.settings)===null||c===void 0?void 0:c.graphicalItemId)===s})},gf=e=>e.options.tooltipPayloadSearcher,Qc=e=>e.tooltip;function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function GE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(n),!0).forEach(function(a){FX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FX(e,t,n){return(t=LX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LX(e){var t=zX(e,"string");return typeof t=="symbol"?t:t+""}function zX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UX(e,t){return e??t}var PT=(e,t,n,a,s,o,l)=>{if(!(t==null||o==null)){var{chartData:c,computedData:f,dataStartIndex:h,dataEndIndex:u}=n,m=[];return e.reduce((p,v)=>{var j,{dataDefinedOnItem:y,settings:b}=v,N=UX(y,c),P=Array.isArray(N)?o4(N,h,u):N,A=(j=b?.dataKey)!==null&&j!==void 0?j:a,k=b?.nameKey,I;if(a&&Array.isArray(P)&&!Array.isArray(P[0])&&l==="axis"?I=h5(P,a,s):I=o(P,t,f,k),Array.isArray(I))I.forEach(O=>{var C=GE(GE({},b),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(Xk({tooltipEntrySettings:C,dataKey:O.dataKey,payload:O.payload,value:fr(O.payload,O.dataKey),name:O.name}))});else{var E;p.push(Xk({tooltipEntrySettings:b,dataKey:A,payload:I,value:fr(I,A),name:(E=fr(I,k))!==null&&E!==void 0?E:b?.name}))}return p},m)}},dN=Pe([Jr,tr,HM,Tw,Xr],oT),BX=Pe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),VX=Pe([Xr,Yc],Vw),Zc=Pe([BX,Jr,VX],qw,{memoizeOptions:{resultEqualityCheck:Cg}}),qX=Pe([Zc],e=>e.filter(Uw)),GX=Pe([Zc],Gw,{memoizeOptions:{resultEqualityCheck:Cg}}),ed=Pe([GX,jo],Hw),HX=Pe([qX,jo,Jr],VM),uN=Pe([ed,Jr,Zc],Kw),ET=Pe([Jr],Yw),WX=Pe([Jr],e=>e.allowDataOverflow),AT=Pe([ET,WX],wM),KX=Pe([Zc],e=>e.filter(Uw)),YX=Pe([HX,KX,df,_M],JM),XX=Pe([YX,jo,Xr,AT],ZM),JX=Pe([Zc],YM),QX=Pe([ed,Jr,JX,Pg,Xr],Qw,{memoizeOptions:{resultEqualityCheck:Sg}}),ZX=Pe([eT,Xr,Yc],Xc),eJ=Pe([ZX,Xr],nT),tJ=Pe([tT,Xr,Yc],Xc),rJ=Pe([tJ,Xr],aT),nJ=Pe([rT,Xr,Yc],Xc),aJ=Pe([nJ,Xr],sT),sJ=Pe([eJ,aJ,rJ],lp),oJ=Pe([Jr,ET,AT,XX,QX,sJ,tr,Xr],Zw),xf=Pe([Jr,tr,ed,uN,df,Xr,oJ],eN),iJ=Pe([xf,Jr,dN],nN),lJ=Pe([Jr,xf,iJ,Xr],sN),IT=e=>{var t=Xr(e),n=Yc(e),a=!1;return pf(e,t,n,a)},DT=Pe([Jr,IT],wg),OT=Pe([Jr,dN,lJ,DT],rN),cJ=Pe([tr,uN,Jr,Xr],uT),dJ=Pe([tr,uN,Jr,Xr],fT),uJ=(e,t,n,a,s,o,l,c)=>{if(t){var{type:f}=t,h=xo(e,c);if(a){var u=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,m=f==="category"&&a.bandwidth?a.bandwidth()/u:0;return m=c==="angleAxis"&&s!=null&&s?.length>=2?In(s[0]-s[1])*2*m:m,h&&l?l.map((p,v)=>({coordinate:a(p)+m,value:p,index:v,offset:m})):a.domain().map((p,v)=>({coordinate:a(p)+m,value:o?o[p]:p,index:v,offset:m}))}}},So=Pe([tr,Jr,dN,OT,IT,cJ,dJ,Xr],uJ),fN=Pe([gT,xT,bX],(e,t,n)=>vT(n.shared,e,t)),MT=e=>e.tooltip.settings.trigger,hN=e=>e.tooltip.settings.defaultIndex,vf=Pe([Qc,fN,MT,hN],ST),Mc=Pe([vf,ed,mf,xf],cN),TT=Pe([So,Mc],yT),RT=Pe([vf],e=>{if(e)return e.dataKey}),fJ=Pe([vf],e=>{if(e)return e.graphicalItemId}),_T=Pe([Qc,fN,MT,hN],kT),hJ=Pe([vo,yo,tr,un,So,hN,_T,gf],CT),mJ=Pe([vf,hJ],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),pJ=Pe([vf],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),gJ=Pe([_T,Mc,jo,mf,TT,gf,fN],PT),xJ=Pe([gJ],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function WE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(a){vJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vJ(e,t,n){return(t=yJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yJ(e){var t=bJ(e,"string");return typeof t=="symbol"?t:t+""}function bJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jJ=()=>mt(Jr),wJ=()=>{var e=jJ(),t=mt(So),n=mt(OT);return Um(!e||!n?void 0:WE(WE({},e),{},{scale:n}),t)};function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function cc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(a){NJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function NJ(e,t,n){return(t=SJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SJ(e){var t=CJ(e,"string");return typeof t=="symbol"?t:t+""}function CJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kJ=(e,t,n,a)=>{var s=t.find(o=>o&&o.index===n);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:s.coordinate}}return{x:0,y:0}},PJ=(e,t,n,a)=>{var s=t.find(h=>h&&h.index===n);if(s){if(e==="centric"){var o=s.coordinate,{radius:l}=a;return cc(cc(cc({},a),Fr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,{angle:f}=a;return cc(cc(cc({},a),Fr(a.cx,a.cy,c,f)),{},{angle:f,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function EJ(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var $T=(e,t,n,a,s)=>{var o,l=(o=t?.length)!==null&&o!==void 0?o:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var f,h,u,m,p,v=c>0?(f=n[c-1])===null||f===void 0?void 0:f.coordinate:(h=n[l-1])===null||h===void 0?void 0:h.coordinate,j=(u=n[c])===null||u===void 0?void 0:u.coordinate,y=c>=l-1?(m=n[0])===null||m===void 0?void 0:m.coordinate:(p=n[c+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(v==null||j==null||y==null))if(In(j-v)!==In(y-j)){var N=[];if(In(y-j)===In(s[1]-s[0])){b=y;var P=j+s[1]-s[0];N[0]=Math.min(P,(P+v)/2),N[1]=Math.max(P,(P+v)/2)}else{b=v;var A=y+s[1]-s[0];N[0]=Math.min(j,(A+j)/2),N[1]=Math.max(j,(A+j)/2)}var k=[Math.min(j,(b+j)/2),Math.max(j,(b+j)/2)];if(e>k[0]&&e<=k[1]||e>=N[0]&&e<=N[1]){var I;return(I=n[c])===null||I===void 0?void 0:I.index}}else{var E=Math.min(v,y),O=Math.max(v,y);if(e>(E+j)/2&&e<=(O+j)/2){var C;return(C=n[c])===null||C===void 0?void 0:C.index}}}else if(t)for(var M=0;M<l;M++){var F=t[M];if(F!=null){var V=t[M+1],T=t[M-1];if(M===0&&V!=null&&e<=(F.coordinate+V.coordinate)/2||M===l-1&&T!=null&&e>(F.coordinate+T.coordinate)/2||M>0&&M<l-1&&T!=null&&V!=null&&e>(F.coordinate+T.coordinate)/2&&e<=(F.coordinate+V.coordinate)/2)return F.index}}return-1},FT=()=>mt(Tw),mN=(e,t)=>t,LT=(e,t,n)=>n,pN=(e,t,n,a)=>a,AJ=Pe(So,e=>Kp(e,t=>t.coordinate)),gN=Pe([Qc,mN,LT,pN],ST),xN=Pe([gN,ed,mf,xf],cN),IJ=(e,t,n)=>{if(t!=null){var a=Qc(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},zT=Pe([Qc,mN,LT,pN],kT),cp=Pe([vo,yo,tr,un,So,pN,zT,gf],CT),DJ=Pe([gN,cp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),UT=Pe([So,xN],yT),OJ=Pe([zT,xN,jo,mf,UT,gf,mN],PT),MJ=Pe([gN,xN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),TJ=(e,t,n,a,s,o,l)=>{if(!(!e||!n||!a||!s)&&EJ(e,l)){var c=hq(e,t),f=$T(c,o,s,n,a),h=kJ(t,s,f,e);return{activeIndex:String(f),activeCoordinate:h}}},RJ=(e,t,n,a,s,o,l)=>{if(!(!e||!a||!s||!o||!n)){var c=gH(e,n);if(c){var f=mq(c,t),h=$T(f,l,o,a,s),u=PJ(t,o,h,c);return{activeIndex:String(h),activeCoordinate:u}}}},_J=(e,t,n,a,s,o,l,c)=>{if(!(!e||!t||!a||!s||!o))return t==="horizontal"||t==="vertical"?TJ(e,t,a,s,o,l,c):RJ(e,t,n,a,s,o,l)},$J=Pe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElement:a.element}}),FJ=Pe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(vn)),n=Array.from(new Set(t));return n.sort((a,s)=>a-s)},{memoizeOptions:{resultEqualityCheck:yY}});function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function XE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(n),!0).forEach(function(a){LJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function LJ(e,t,n){return(t=zJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zJ(e){var t=UJ(e,"string");return typeof t=="symbol"?t:t+""}function UJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BJ={},VJ={zIndexMap:Object.values(vn).reduce((e,t)=>XE(XE({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),BJ)},qJ=new Set(Object.values(vn));function GJ(e){return qJ.has(e)}var BT=ta({name:"zIndex",initialState:VJ,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:pr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!GJ(n)&&delete e.zIndexMap[n])},prepare:pr()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:s}=t.payload;e.zIndexMap[n]?s?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:s?void 0:a,panoramaElement:s?a:void 0}},prepare:pr()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:pr()}}}),{registerZIndexPortal:HJ,unregisterZIndexPortal:WJ,registerZIndexPortalElement:KJ,unregisterZIndexPortalElement:YJ}=BT.actions,XJ=BT.reducer;function fs(e){var{zIndex:t,children:n}=e,a=Gq(),s=a&&t!==void 0&&t!==0,o=ra(),l=vr();x.useLayoutEffect(()=>s?(l(HJ({zIndex:t})),()=>{l(WJ({zIndex:t}))}):Qu,[l,t,s]);var c=mt(f=>$J(f,t,o));return s?c?so.createPortal(n,c):null:n}function Qb(){return Qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qb.apply(null,arguments)}function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Zh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(a){JJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JJ(e,t,n){return(t=QJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QJ(e){var t=ZJ(e,"string");return typeof t=="symbol"?t:t+""}function ZJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eQ(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return x.isValidElement(t)?x.cloneElement(t,a):x.createElement(n,a)}function tQ(e){var t,{coordinate:n,payload:a,index:s,offset:o,tooltipAxisBandSize:l,layout:c,cursor:f,tooltipEventType:h,chartName:u}=e,m=n,p=a,v=s;if(!f||!m||u!=="ScatterChart"&&h!=="axis")return null;var j,y,b;if(u==="ScatterChart")j=m,y=IG,b=vn.cursorLine;else if(u==="BarChart")j=DG(c,m,o,l),y=R4,b=vn.cursorRectangle;else if(c==="radial"&&g5(m)){var{cx:N,cy:P,radius:A,startAngle:k,endAngle:I}=$4(m);j={cx:N,cy:P,startAngle:k,endAngle:I,innerRadius:A,outerRadius:A},y=L4,b=vn.cursorLine}else j={points:bH(c,m,o)},y=wc,b=vn.cursorLine;var E=typeof f=="object"&&"className"in f?f.className:void 0,O=Zh(Zh(Zh(Zh({stroke:"#ccc",pointerEvents:"none"},o),j),Pc(f)),{},{payload:p,payloadIndex:v,className:Yt("recharts-tooltip-cursor",E)});return x.createElement(fs,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},x.createElement(eQ,{cursor:f,cursorComp:y,cursorProps:O}))}function rQ(e){var t=wJ(),n=x4(),a=Gc(),s=FT();return t==null||n==null||a==null||s==null?null:x.createElement(tQ,Qb({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:s}))}var VT=x.createContext(null),nQ=()=>x.useContext(VT),uy={exports:{}},QE;function aQ(){return QE||(QE=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(f,h,u){this.fn=f,this.context=h,this.once=u||!1}function o(f,h,u,m,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var v=new s(u,m||f,p),j=n?n+h:h;return f._events[j]?f._events[j].fn?f._events[j]=[f._events[j],v]:f._events[j].push(v):(f._events[j]=v,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new a:delete f._events[h]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],u,m;if(this._eventsCount===0)return h;for(m in u=this._events)t.call(u,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(u)):h},c.prototype.listeners=function(h){var u=n?n+h:h,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,v=m.length,j=new Array(v);p<v;p++)j[p]=m[p].fn;return j},c.prototype.listenerCount=function(h){var u=n?n+h:h,m=this._events[u];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,u,m,p,v,j){var y=n?n+h:h;if(!this._events[y])return!1;var b=this._events[y],N=arguments.length,P,A;if(b.fn){switch(b.once&&this.removeListener(h,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,m),!0;case 4:return b.fn.call(b.context,u,m,p),!0;case 5:return b.fn.call(b.context,u,m,p,v),!0;case 6:return b.fn.call(b.context,u,m,p,v,j),!0}for(A=1,P=new Array(N-1);A<N;A++)P[A-1]=arguments[A];b.fn.apply(b.context,P)}else{var k=b.length,I;for(A=0;A<k;A++)switch(b[A].once&&this.removeListener(h,b[A].fn,void 0,!0),N){case 1:b[A].fn.call(b[A].context);break;case 2:b[A].fn.call(b[A].context,u);break;case 3:b[A].fn.call(b[A].context,u,m);break;case 4:b[A].fn.call(b[A].context,u,m,p);break;default:if(!P)for(I=1,P=new Array(N-1);I<N;I++)P[I-1]=arguments[I];b[A].fn.apply(b[A].context,P)}}return!0},c.prototype.on=function(h,u,m){return o(this,h,u,m,!1)},c.prototype.once=function(h,u,m){return o(this,h,u,m,!0)},c.prototype.removeListener=function(h,u,m,p){var v=n?n+h:h;if(!this._events[v])return this;if(!u)return l(this,v),this;var j=this._events[v];if(j.fn)j.fn===u&&(!p||j.once)&&(!m||j.context===m)&&l(this,v);else{for(var y=0,b=[],N=j.length;y<N;y++)(j[y].fn!==u||p&&!j[y].once||m&&j[y].context!==m)&&b.push(j[y]);b.length?this._events[v]=b.length===1?b[0]:b:l(this,v)}return this},c.prototype.removeAllListeners=function(h){var u;return h?(u=n?n+h:h,this._events[u]&&l(this,u)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(uy)),uy.exports}var sQ=aQ();const oQ=Os(sQ);var Mu=new oQ,Zb="recharts.syncEvent.tooltip",ZE="recharts.syncEvent.brush";function qT(e,t){if(t){var n=Number.parseInt(t,10);if(!ls(n))return e?.[n]}}var iQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},GT=ta({name:"options",initialState:iQ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),lQ=GT.reducer,{createEventEmitter:cQ}=GT.actions;function dQ(e){return e.tooltip.syncInteraction}var uQ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},HT=ta({name:"chartData",initialState:uQ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:eA,setDataStartEndIndexes:fQ,setComputedData:ade}=HT.actions,hQ=HT.reducer,mQ=["x","y"];function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(a){pQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pQ(e,t,n){return(t=gQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gQ(e){var t=xQ(e,"string");return typeof t=="symbol"?t:t+""}function xQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vQ(e,t){if(e==null)return{};var n,a,s=yQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function yQ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function bQ(){var e=mt(Rw),t=mt(_w),n=vr(),a=mt($M),s=mt(So),o=Gc(),l=lg(),c=mt(f=>f.rootProps.className);x.useEffect(()=>{if(e==null)return Qu;var f=(h,u,m)=>{if(t!==m&&e===h){if(a==="index"){var p;if(l&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var v=u.payload.coordinate,{x:j,y}=v,b=vQ(v,mQ),{x:N,y:P,width:A,height:k}=u.payload.sourceViewBox,I=dc(dc({},b),{},{x:l.x+(A?(j-N)/A:0)*l.width,y:l.y+(k?(y-P)/k:0)*l.height});n(dc(dc({},u),{},{payload:dc(dc({},u.payload),{},{coordinate:I})}))}else n(u);return}if(s!=null){var E;if(typeof a=="function"){var O={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},C=a(s,O);E=s[C]}else a==="value"&&(E=s.find(q=>String(q.value)===u.payload.label));var{coordinate:M}=u.payload;if(E==null||u.payload.active===!1||M==null||l==null){n(Xb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:V}=M,T=Math.min(F,l.x+l.width),L=Math.min(V,l.y+l.height),U={x:o==="horizontal"?E.coordinate:T,y:o==="horizontal"?L:E.coordinate},J=Xb({active:u.payload.active,coordinate:U,dataKey:u.payload.dataKey,index:String(E.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(J)}}};return Mu.on(Zb,f),()=>{Mu.off(Zb,f)}},[c,n,t,e,a,s,o,l])}function jQ(){var e=mt(Rw),t=mt(_w),n=vr();x.useEffect(()=>{if(e==null)return Qu;var a=(s,o,l)=>{t!==l&&e===s&&n(fQ(o))};return Mu.on(ZE,a),()=>{Mu.off(ZE,a)}},[n,t,e])}function wQ(){var e=vr();x.useEffect(()=>{e(cQ())},[e]),bQ(),jQ()}function NQ(e,t,n,a,s,o){var l=mt(v=>IJ(v,e,t)),c=mt(_w),f=mt(Rw),h=mt($M),u=mt(dQ),m=u?.active,p=lg();x.useEffect(()=>{if(!m&&f!=null&&c!=null){var v=Xb({active:o,coordinate:n,dataKey:l,index:s,label:typeof a=="number"?String(a):a,sourceViewBox:p,graphicalItemId:void 0});Mu.emit(Zb,f,v,c)}},[m,n,l,s,a,c,f,h,o,p])}function rA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function nA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(n),!0).forEach(function(a){SQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SQ(e,t,n){return(t=CQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CQ(e){var t=kQ(e,"string");return typeof t=="symbol"?t:t+""}function kQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PQ(e){return e.dataKey}function EQ(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(cG,t)}var aA=[],AQ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sA(e){var t,n,a=jn(e,AQ),{active:s,allowEscapeViewBox:o,animationDuration:l,animationEasing:c,content:f,filterNull:h,isAnimationActive:u,offset:m,payloadUniqBy:p,position:v,reverseDirection:j,useTranslate3d:y,wrapperStyle:b,cursor:N,shared:P,trigger:A,defaultIndex:k,portal:I,axisId:E}=a,O=vr(),C=typeof k=="number"?String(k):k;x.useEffect(()=>{O(CX({shared:P,trigger:A,axisId:E,active:s,defaultIndex:C}))},[O,P,A,E,s,C]);var M=lg(),F=I4(),V=yX(P),{activeIndex:T,isActive:L}=(t=mt(Se=>MJ(Se,V,A,C)))!==null&&t!==void 0?t:{},U=mt(Se=>OJ(Se,V,A,C)),J=mt(Se=>UT(Se,V,A,C)),q=mt(Se=>DJ(Se,V,A,C)),W=U,z=nQ(),K=(n=s??L)!==null&&n!==void 0?n:!1,[B,R]=e9([W,K]),H=V==="axis"?J:void 0;NQ(V,A,q,H,T,K);var Y=I??z;if(Y==null||M==null||V==null)return null;var ee=W??aA;K||(ee=aA),h&&ee.length&&(ee=kV(ee.filter(Se=>Se.value!=null&&(Se.hide!==!0||a.includeHidden)),p,PQ));var me=ee.length>0,De=x.createElement(gG,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:u,active:K,coordinate:q,hasPayload:me,offset:m,position:v,reverseDirection:j,useTranslate3d:y,viewBox:M,wrapperStyle:b,lastBoundingBox:B,innerRef:R,hasPortalFromProps:!!I},EQ(f,nA(nA({},a),{},{payload:ee,label:H,active:K,activeIndex:T,coordinate:q,accessibilityLayer:F})));return x.createElement(x.Fragment,null,so.createPortal(De,Y),K&&x.createElement(rQ,{cursor:N,tooltipEventType:V,coordinate:q,payload:ee,index:T}))}var Dg=e=>null;Dg.displayName="Cell";function IQ(e,t,n){return(t=DQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DQ(e){var t=OQ(e,"string");return typeof t=="symbol"?t:t+""}function OQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MQ{constructor(t){IQ(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function oA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function TQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(n),!0).forEach(function(a){RQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RQ(e,t,n){return(t=_Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Q(e){var t=$Q(e,"string");return typeof t=="symbol"?t:t+""}function $Q(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FQ={cacheSize:2e3,enableCache:!0},WT=TQ({},FQ),iA=new MQ(WT.cacheSize),LQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lA="recharts_measurement_span";function zQ(e,t){var n=t.fontSize||"",a=t.fontFamily||"",s=t.fontWeight||"",o=t.fontStyle||"",l=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l,"|").concat(c)}var cA=(e,t)=>{try{var n=document.getElementById(lA);n||(n=document.createElement("span"),n.setAttribute("id",lA),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,LQ,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},du=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||af.isSsr)return{width:0,height:0};if(!WT.enableCache)return cA(t,n);var a=zQ(t,n),s=iA.get(a);if(s)return s;var o=cA(t,n);return iA.set(a,o),o},KT;function UQ(e,t,n){return(t=BQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BQ(e){var t=VQ(e,"string");return typeof t=="symbol"?t:t+""}function VQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,GQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,HQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},WQ=["cm","mm","pt","pc","in","Q","px"];function KQ(e){return WQ.includes(e)}var gc="NaN";function YQ(e,t){return e*HQ[t]}class pn{static parse(t){var n,[,a,s]=(n=GQ.exec(t))!==null&&n!==void 0?n:[];return a==null?pn.NaN:new pn(parseFloat(a),s??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ls(t)&&(this.unit=""),n!==""&&!qQ.test(n)&&(this.num=NaN,this.unit=""),KQ(n)&&(this.num=YQ(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new pn(NaN,""):new pn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new pn(NaN,""):new pn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pn(NaN,""):new pn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new pn(NaN,""):new pn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ls(this.num)}}KT=pn;UQ(pn,"NaN",new KT(NaN,""));function YT(e){if(e==null||e.includes(gc))return gc;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,s,o]=(n=dA.exec(t))!==null&&n!==void 0?n:[],l=pn.parse(a??""),c=pn.parse(o??""),f=s==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return gc;t=t.replace(dA,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,u,m,p]=(h=uA.exec(t))!==null&&h!==void 0?h:[],v=pn.parse(u??""),j=pn.parse(p??""),y=m==="+"?v.add(j):v.subtract(j);if(y.isNaN())return gc;t=t.replace(uA,y.toString())}return t}var fA=/\(([^()]*)\)/;function XQ(e){for(var t=e,n;(n=fA.exec(t))!=null;){var[,a]=n;t=t.replace(fA,YT(a))}return t}function JQ(e){var t=e.replace(/\s+/g,"");return t=XQ(t),t=YT(t),t}function QQ(e){try{return JQ(e)}catch{return gc}}function fy(e){var t=QQ(e.slice(5,-1));return t===gc?"":t}var ZQ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],eZ=["dx","dy","angle","className","breakAll"];function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ej.apply(null,arguments)}function hA(e,t){if(e==null)return{};var n,a,s=tZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function tZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var XT=/[ \f\n\r\t\v\u2028\u2029]+/,JT=e=>{var{children:t,breakAll:n,style:a}=e;try{var s=[];ln(t)||(n?s=t.toString().split(""):s=t.toString().split(XT));var o=s.map(c=>({word:c,width:du(c,a).width})),l=n?0:du("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}};function rZ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var QT=(e,t,n,a)=>e.reduce((s,o)=>{var{word:l,width:c}=o,f=s[s.length-1];if(f&&c!=null&&(t==null||a||f.width+c+n<Number(t)))f.words.push(l),f.width+=c+n;else{var h={words:[l],width:c};s.push(h)}return s},[]),ZT=e=>e.reduce((t,n)=>t.width>n.width?t:n),nZ="",mA=(e,t,n,a,s,o,l,c)=>{var f=e.slice(0,t),h=JT({breakAll:n,style:a,children:f+nZ});if(!h)return[!1,[]];var u=QT(h.wordsWithComputedWidth,o,l,c),m=u.length>s||ZT(u).width>Number(o);return[m,u]},aZ=(e,t,n,a,s)=>{var{maxLines:o,children:l,style:c,breakAll:f}=e,h=lt(o),u=String(l),m=QT(t,a,n,s);if(!h||s)return m;var p=m.length>o||ZT(m).width>Number(a);if(!p)return m;for(var v=0,j=u.length-1,y=0,b;v<=j&&y<=u.length-1;){var N=Math.floor((v+j)/2),P=N-1,[A,k]=mA(u,P,f,c,o,a,n,s),[I]=mA(u,N,f,c,o,a,n,s);if(!A&&!I&&(v=N+1),A&&I&&(j=N-1),!A&&I){b=k;break}y++}return b||m},pA=e=>{var t=ln(e)?[]:e.toString().split(XT);return[{words:t,width:void 0}]},sZ=e=>{var{width:t,scaleToFit:n,children:a,style:s,breakAll:o,maxLines:l}=e;if((t||n)&&!af.isSsr){var c,f,h=JT({breakAll:o,children:a,style:s});if(h){var{wordsWithComputedWidth:u,spaceWidth:m}=h;c=u,f=m}else return pA(a);return aZ({breakAll:o,children:a,maxLines:l,style:s},c,f,t,!!n)}return pA(a)},eR="#808080",oZ={angle:0,breakAll:!1,capHeight:"0.71em",fill:eR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Og=x.forwardRef((e,t)=>{var n=jn(e,oZ),{x:a,y:s,lineHeight:o,capHeight:l,fill:c,scaleToFit:f,textAnchor:h,verticalAnchor:u}=n,m=hA(n,ZQ),p=x.useMemo(()=>sZ({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),{dx:v,dy:j,angle:y,className:b,breakAll:N}=m,P=hA(m,eZ);if(!As(a)||!As(s)||p.length===0)return null;var A=Number(a)+(lt(v)?v:0),k=Number(s)+(lt(j)?j:0);if(!xr(A)||!xr(k))return null;var I;switch(u){case"start":I=fy("calc(".concat(l,")"));break;case"middle":I=fy("calc(".concat((p.length-1)/2," * -").concat(o," + (").concat(l," / 2))"));break;default:I=fy("calc(".concat(p.length-1," * -").concat(o,")"));break}var E=[];if(f){var O=p[0].width,{width:C}=m;E.push("scale(".concat(lt(C)&&lt(O)?C/O:1,")"))}return y&&E.push("rotate(".concat(y,", ").concat(A,", ").concat(k,")")),E.length&&(P.transform=E.join(" ")),x.createElement("text",ej({},zn(P),{ref:t,x:A,y:k,className:Yt("recharts-text",b),textAnchor:h,fill:c.includes("url")?eR:c}),p.map((M,F)=>{var V=M.words.join(N?"":" ");return x.createElement("tspan",{x:A,dy:F===0?I:o,key:"".concat(V,"-").concat(F)},V)}))});Og.displayName="Text";var iZ=["labelRef"],lZ=["content"];function gA(e,t){if(e==null)return{};var n,a,s=cZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function cZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(a){dZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dZ(e,t,n){return(t=uZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uZ(e){var t=fZ(e,"string");return typeof t=="symbol"?t:t+""}function fZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zs.apply(null,arguments)}var tR=x.createContext(null),hZ=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:s,width:o,height:l,children:c}=e,f=x.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:s,width:o,height:l}),[t,n,a,s,o,l]);return x.createElement(tR.Provider,{value:f},c)},rR=()=>{var e=x.useContext(tR),t=lg();return e||g4(t)},mZ=x.createContext(null),pZ=()=>{var e=x.useContext(mZ),t=mt(BM);return e||t},gZ=e=>{var{value:t,formatter:n}=e,a=ln(e.children)?t:e.children;return typeof n=="function"?n(a):a},vN=e=>e!=null&&typeof e=="function",xZ=(e,t)=>{var n=In(t-e),a=Math.min(Math.abs(t-e),360);return n*a},vZ=(e,t,n,a,s)=>{var{offset:o,className:l}=e,{cx:c,cy:f,innerRadius:h,outerRadius:u,startAngle:m,endAngle:p,clockWise:v}=s,j=(h+u)/2,y=xZ(m,p),b=y>=0?1:-1,N,P;switch(t){case"insideStart":N=m+b*o,P=v;break;case"insideEnd":N=p-b*o,P=!v;break;case"end":N=p+b*o,P=v;break;default:throw new Error("Unsupported position ".concat(t))}P=y<=0?P:!P;var A=Fr(c,f,j,N),k=Fr(c,f,j,N+(P?1:-1)*359),I="M".concat(A.x,",").concat(A.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(P?0:1,`,
    `).concat(k.x,",").concat(k.y),E=ln(e.id)?yu("recharts-radial-line-"):e.id;return x.createElement("text",Zs({},a,{dominantBaseline:"central",className:Yt("recharts-radial-bar-label",l)}),x.createElement("defs",null,x.createElement("path",{id:E,d:I})),x.createElement("textPath",{xlinkHref:"#".concat(E)},n))},yZ=(e,t,n)=>{var{cx:a,cy:s,innerRadius:o,outerRadius:l,startAngle:c,endAngle:f}=e,h=(c+f)/2;if(n==="outside"){var{x:u,y:m}=Fr(a,s,l+t,h);return{x:u,y:m,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x:v,y:j}=Fr(a,s,p,h);return{x:v,y:j,textAnchor:"middle",verticalAnchor:"middle"}},tj=e=>"cx"in e&&lt(e.cx),bZ=(e,t)=>{var{parentViewBox:n,offset:a,position:s}=e,o;n!=null&&!tj(n)&&(o=n);var{x:l,y:c,upperWidth:f,lowerWidth:h,height:u}=t,m=l,p=l+(f-h)/2,v=(m+p)/2,j=(f+h)/2,y=m+f/2,b=u>=0?1:-1,N=b*a,P=b>0?"end":"start",A=b>0?"start":"end",k=f>=0?1:-1,I=k*a,E=k>0?"end":"start",O=k>0?"start":"end";if(s==="top"){var C={x:m+f/2,y:c-N,textAnchor:"middle",verticalAnchor:P};return Or(Or({},C),o?{height:Math.max(c-o.y,0),width:f}:{})}if(s==="bottom"){var M={x:p+h/2,y:c+u+N,textAnchor:"middle",verticalAnchor:A};return Or(Or({},M),o?{height:Math.max(o.y+o.height-(c+u),0),width:h}:{})}if(s==="left"){var F={x:v-I,y:c+u/2,textAnchor:E,verticalAnchor:"middle"};return Or(Or({},F),o?{width:Math.max(F.x-o.x,0),height:u}:{})}if(s==="right"){var V={x:v+j+I,y:c+u/2,textAnchor:O,verticalAnchor:"middle"};return Or(Or({},V),o?{width:Math.max(o.x+o.width-V.x,0),height:u}:{})}var T=o?{width:j,height:u}:{};return s==="insideLeft"?Or({x:v+I,y:c+u/2,textAnchor:O,verticalAnchor:"middle"},T):s==="insideRight"?Or({x:v+j-I,y:c+u/2,textAnchor:E,verticalAnchor:"middle"},T):s==="insideTop"?Or({x:m+f/2,y:c+N,textAnchor:"middle",verticalAnchor:A},T):s==="insideBottom"?Or({x:p+h/2,y:c+u-N,textAnchor:"middle",verticalAnchor:P},T):s==="insideTopLeft"?Or({x:m+I,y:c+N,textAnchor:O,verticalAnchor:A},T):s==="insideTopRight"?Or({x:m+f-I,y:c+N,textAnchor:E,verticalAnchor:A},T):s==="insideBottomLeft"?Or({x:p+I,y:c+u-N,textAnchor:O,verticalAnchor:P},T):s==="insideBottomRight"?Or({x:p+h-I,y:c+u-N,textAnchor:E,verticalAnchor:P},T):s&&typeof s=="object"&&(lt(s.x)||lo(s.x))&&(lt(s.y)||lo(s.y))?Or({x:l+pa(s.x,j),y:c+pa(s.y,u),textAnchor:"end",verticalAnchor:"end"},T):Or({x:y,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},jZ={angle:0,offset:5,zIndex:vn.label,position:"middle",textBreakAll:!1};function Wo(e){var t=jn(e,jZ),{viewBox:n,position:a,value:s,children:o,content:l,className:c="",textBreakAll:f,labelRef:h}=t,u=pZ(),m=rR(),p=a==="center"?m:u??m,v,j,y;if(n==null?v=p:tj(n)?v=n:v=g4(n),!v||ln(s)&&ln(o)&&!x.isValidElement(l)&&typeof l!="function")return null;var b=Or(Or({},t),{},{viewBox:v});if(x.isValidElement(l)){var{labelRef:N}=b,P=gA(b,iZ);return x.cloneElement(l,P)}if(typeof l=="function"){var{content:A}=b,k=gA(b,lZ);if(j=x.createElement(l,k),x.isValidElement(j))return j}else j=gZ(t);var I=zn(t);if(tj(v)){if(a==="insideStart"||a==="insideEnd"||a==="end")return vZ(t,a,j,I,v);y=yZ(v,t.offset,t.position)}else y=bZ(t,v);return x.createElement(fs,{zIndex:t.zIndex},x.createElement(Og,Zs({ref:h,className:Yt("recharts-label",c)},I,y,{textAnchor:rZ(I.textAnchor)?I.textAnchor:y.textAnchor,breakAll:f}),j))}Wo.displayName="Label";var wZ=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?x.createElement(Wo,Zs({key:"label-implicit"},a)):As(e)?x.createElement(Wo,Zs({key:"label-implicit",value:e},a)):x.isValidElement(e)?e.type===Wo?x.cloneElement(e,Or({key:"label-implicit"},a)):x.createElement(Wo,Zs({key:"label-implicit",content:e},a)):vN(e)?x.createElement(Wo,Zs({key:"label-implicit",content:e},a)):e&&typeof e=="object"?x.createElement(Wo,Zs({},e,{key:"label-implicit"},a)):null};function NZ(e){var{label:t,labelRef:n}=e,a=rR();return wZ(t,a,n)||null}var hy={},my={},vA;function SZ(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(my)),my}var py={},yA;function CZ(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(py)),py}var bA;function kZ(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SZ(),n=CZ(),a=Yj();function s(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=s})(hy)),hy}var gy,jA;function PZ(){return jA||(jA=1,gy=kZ().last),gy}var EZ=PZ();const AZ=Os(EZ);var IZ=["valueAccessor"],DZ=["dataKey","clockWise","id","textBreakAll","zIndex"];function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dp.apply(null,arguments)}function wA(e,t){if(e==null)return{};var n,a,s=OZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function OZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var MZ=e=>Array.isArray(e.value)?AZ(e.value):e.value,nR=x.createContext(void 0),TZ=nR.Provider,aR=x.createContext(void 0),RZ=aR.Provider;function _Z(){return x.useContext(nR)}function $Z(){return x.useContext(aR)}function um(e){var{valueAccessor:t=MZ}=e,n=wA(e,IZ),{dataKey:a,clockWise:s,id:o,textBreakAll:l,zIndex:c}=n,f=wA(n,DZ),h=_Z(),u=$Z(),m=h||u;return!m||!m.length?null:x.createElement(fs,{zIndex:c??vn.label},x.createElement(bn,{className:"recharts-label-list"},m.map((p,v)=>{var j,y=ln(a)?t(p,v):fr(p&&p.payload,a),b=ln(o)?{}:{id:"".concat(o,"-").concat(v)};return x.createElement(Wo,dp({key:"label-".concat(v)},zn(p),f,b,{fill:(j=n.fill)!==null&&j!==void 0?j:p.fill,parentViewBox:p.parentViewBox,value:y,textBreakAll:l,viewBox:p.viewBox,index:v,zIndex:0}))})))}um.displayName="LabelList";function sR(e){var{label:t}=e;return t?t===!0?x.createElement(um,{key:"labelList-implicit"}):x.isValidElement(t)||vN(t)?x.createElement(um,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(um,dp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rj.apply(null,arguments)}var oR=e=>{var{cx:t,cy:n,r:a,className:s}=e,o=Yt("recharts-dot",s);return lt(t)&&lt(n)&&lt(a)?x.createElement("circle",rj({},ba(e),Kj(e),{className:o,cx:t,cy:n,r:a})):null},iR=e=>e.graphicalItems.polarItems,FZ=Pe([yr,uf],Vw),Mg=Pe([iR,kr,FZ],qw),LZ=Pe([Mg],Gw),Tg=Pe([LZ,jg],Hw),zZ=Pe([Tg,kr,Mg],Kw);Pe([Tg,kr,Mg],(e,t,n)=>n.length>0?e.flatMap(a=>n.flatMap(s=>{var o,l=fr(a,(o=t.dataKey)!==null&&o!==void 0?o:s.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:fr(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})));var NA=()=>{},UZ=Pe([Tg,kr,Mg,Pg,yr],Qw),BZ=Pe([kr,Xw,Jw,NA,UZ,NA,tr,yr],Zw),lR=Pe([kr,tr,Tg,zZ,df,yr,BZ],eN),VZ=Pe([lR,kr,Jc],nN);Pe([kr,lR,VZ,yr],sN);var qZ={radiusAxis:{},angleAxis:{}},cR=ta({name:"polarAxis",initialState:qZ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:sde,removeRadiusAxis:ode,addAngleAxis:ide,removeAngleAxis:lde}=cR.actions,GZ=cR.reducer;function SA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function CA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(n),!0).forEach(function(a){HZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function HZ(e,t,n){return(t=WZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WZ(e){var t=KZ(e,"string");return typeof t=="symbol"?t:t+""}function KZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YZ=(e,t)=>t,yN=Pe([iR,YZ],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),XZ=[],bN=(e,t,n)=>n?.length===0?XZ:n,dR=Pe([jg,yN,bN],(e,t,n)=>{var{chartData:a}=e;if(t!=null){var s;if(t?.data!=null&&t.data.length>0?s=t.data:s=a,(!s||!s.length)&&n!=null&&(s=n.map(o=>CA(CA({},t.presentationProps),o.props))),s!=null)return s}}),JZ=Pe([dR,yN,bN],(e,t,n)=>{if(!(e==null||t==null))return e.map((a,s)=>{var o,l=fr(a,t.nameKey,t.name),c;return n!=null&&(o=n[s])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?c=n[s].props.fill:typeof a=="object"&&a!=null&&"fill"in a?c=a.fill:c=t.fill,{value:ng(l,t.dataKey),color:c,payload:a,type:t.legendType}})}),QZ=Pe([dR,yN,bN,un],(e,t,n,a)=>{if(!(t==null||e==null))return ote({offset:a,pieSettings:t,displayedData:e,cells:n})}),xy={exports:{}},nr={};var kA;function ZZ(){if(kA)return nr;kA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function j(y){if(typeof y=="object"&&y!==null){var b=y.$$typeof;switch(b){case e:switch(y=y.type,y){case n:case s:case a:case f:case h:case p:return y;default:switch(y=y&&y.$$typeof,y){case l:case c:case m:case u:return y;case o:return y;default:return b}}case t:return b}}}return nr.ContextConsumer=o,nr.ContextProvider=l,nr.Element=e,nr.ForwardRef=c,nr.Fragment=n,nr.Lazy=m,nr.Memo=u,nr.Portal=t,nr.Profiler=s,nr.StrictMode=a,nr.Suspense=f,nr.SuspenseList=h,nr.isContextConsumer=function(y){return j(y)===o},nr.isContextProvider=function(y){return j(y)===l},nr.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},nr.isForwardRef=function(y){return j(y)===c},nr.isFragment=function(y){return j(y)===n},nr.isLazy=function(y){return j(y)===m},nr.isMemo=function(y){return j(y)===u},nr.isPortal=function(y){return j(y)===t},nr.isProfiler=function(y){return j(y)===s},nr.isStrictMode=function(y){return j(y)===a},nr.isSuspense=function(y){return j(y)===f},nr.isSuspenseList=function(y){return j(y)===h},nr.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===s||y===a||y===f||y===h||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===u||y.$$typeof===l||y.$$typeof===o||y.$$typeof===c||y.$$typeof===v||y.getModuleId!==void 0)},nr.typeOf=j,nr}var PA;function eee(){return PA||(PA=1,xy.exports=ZZ()),xy.exports}var tee=eee(),EA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",AA=null,vy=null,uR=e=>{if(e===AA&&Array.isArray(vy))return vy;var t=[];return x.Children.forEach(e,n=>{ln(n)||(tee.isFragment(n)?t=t.concat(uR(n.props.children)):t.push(n))}),vy=t,AA=e,t};function fR(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(s=>EA(s)):a=[EA(t)],uR(e).forEach(s=>{var o=hl(s,"type.displayName")||hl(s,"type.name");o&&a.indexOf(o)!==-1&&n.push(s)}),n}var hR=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,yy={},IA;function ree(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${s}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(yy)),yy}var by,DA;function nee(){return DA||(DA=1,by=ree().isPlainObject),by}var aee=nee();const see=Os(aee);var OA,MA,TA,RA,_A;function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function FA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(n),!0).forEach(function(a){oee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function oee(e,t,n){return(t=iee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iee(e){var t=lee(e,"string");return typeof t=="symbol"?t:t+""}function lee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},up.apply(null,arguments)}function eu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var LA=(e,t,n,a,s)=>{var o=n-a,l;return l=Er(OA||(OA=eu(["M ",",",""])),e,t),l+=Er(MA||(MA=eu(["L ",",",""])),e+n,t),l+=Er(TA||(TA=eu(["L ",",",""])),e+n-o/2,t+s),l+=Er(RA||(RA=eu(["L ",",",""])),e+n-o/2-a,t+s),l+=Er(_A||(_A=eu(["L ",","," Z"])),e,t),l},cee={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dee=e=>{var t=jn(e,cee),{x:n,y:a,upperWidth:s,lowerWidth:o,height:l,className:c}=t,{animationEasing:f,animationDuration:h,animationBegin:u,isUpdateAnimationActive:m}=t,p=x.useRef(null),[v,j]=x.useState(-1),y=x.useRef(s),b=x.useRef(o),N=x.useRef(l),P=x.useRef(n),A=x.useRef(a),k=mg(e,"trapezoid-");if(x.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var U=p.current.getTotalLength();U&&j(U)}catch{}},[]),n!==+n||a!==+a||s!==+s||o!==+o||l!==+l||s===0&&o===0||l===0)return null;var I=Yt("recharts-trapezoid",c);if(!m)return x.createElement("g",null,x.createElement("path",up({},zn(t),{className:I,d:LA(n,a,s,o,l)})));var E=y.current,O=b.current,C=N.current,M=P.current,F=A.current,V="0px ".concat(v===-1?1:v,"px"),T="".concat(v,"px 0px"),L=D4(["strokeDasharray"],h,f);return x.createElement(hg,{animationId:k,key:k,canBegin:v>0,duration:h,easing:f,isActive:m,begin:u},U=>{var J=xn(E,s,U),q=xn(O,o,U),W=xn(C,l,U),z=xn(M,n,U),K=xn(F,a,U);p.current&&(y.current=J,b.current=q,N.current=W,P.current=z,A.current=K);var B=U>0?{transition:L,strokeDasharray:T}:{strokeDasharray:V};return x.createElement("path",up({},zn(t),{className:I,d:LA(z,K,J,q,W),ref:p,style:FA(FA({},B),t.style)}))})},uee=["option","shapeType","activeClassName"];function fee(e,t){if(e==null)return{};var n,a,s=hee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function hee(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function fp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(n),!0).forEach(function(a){mee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mee(e,t,n){return(t=pee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pee(e){var t=gee(e,"string");return typeof t=="symbol"?t:t+""}function gee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xee(e,t){return fp(fp({},t),e)}function vee(e,t){return e==="symbols"}function UA(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return x.createElement(R4,n);case"trapezoid":return x.createElement(dee,n);case"sector":return x.createElement(L4,n);case"symbols":if(vee(t))return x.createElement(p5,n);break;case"curve":return x.createElement(wc,n);default:return null}}function yee(e){return x.isValidElement(e)?e.props:e}function bee(e){var{option:t,shapeType:n,activeClassName:a="recharts-active-shape"}=e,s=fee(e,uee),o;if(x.isValidElement(t))o=x.cloneElement(t,fp(fp({},s),yee(t)));else if(typeof t=="function")o=t(s,s.index);else if(see(t)&&typeof t!="boolean"){var l=xee(t,s);o=x.createElement(UA,{shapeType:n,elementProps:l})}else{var c=s;o=x.createElement(UA,{shapeType:n,elementProps:c})}return s.isActive?x.createElement(bn,{className:a},o):o}var jee=(e,t,n)=>{var a=vr();return(s,o)=>l=>{e?.(s,o,l),a(jT({activeIndex:String(o),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}},wee=e=>{var t=vr();return(n,a)=>s=>{e?.(n,a,s),t(kX())}},Nee=(e,t,n)=>{var a=vr();return(s,o)=>l=>{e?.(s,o,l),a(PX({activeIndex:String(o),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:n}))}};function mR(e){var{tooltipEntrySettings:t}=e,n=vr(),a=ra(),s=x.useRef(null);return x.useLayoutEffect(()=>{a||(s.current===null?n(wX(t)):s.current!==t&&n(NX({prev:s.current,next:t})),s.current=t)},[t,n,a]),x.useLayoutEffect(()=>()=>{s.current&&(n(SX(s.current)),s.current=null)},[n]),null}function See(e){var{legendPayload:t}=e,n=vr(),a=ra(),s=x.useRef(null);return x.useLayoutEffect(()=>{a||(s.current===null?n(P4(t)):s.current!==t&&n(E4({prev:s.current,next:t})),s.current=t)},[n,a,t]),x.useLayoutEffect(()=>()=>{s.current&&(n(A4(s.current)),s.current=null)},[n]),null}function Cee(e){var{legendPayload:t}=e,n=vr(),a=mt(tr),s=x.useRef(null);return x.useLayoutEffect(()=>{a!=="centric"&&a!=="radial"||(s.current===null?n(P4(t)):s.current!==t&&n(E4({prev:s.current,next:t})),s.current=t)},[n,a,t]),x.useLayoutEffect(()=>()=>{s.current&&(n(A4(s.current)),s.current=null)},[n]),null}var jy,kee=()=>{var[e]=x.useState(()=>yu("uid-"));return e},Pee=(jy=YI.useId)!==null&&jy!==void 0?jy:kee;function Eee(e,t){var n=Pee();return t||(e?"".concat(e,"-").concat(n):n)}var Aee=x.createContext(void 0),pR=e=>{var{id:t,type:n,children:a}=e,s=Eee("recharts-".concat(n),t);return x.createElement(Aee.Provider,{value:s},a(s))},Iee={cartesianItems:[],polarItems:[]},gR=ta({name:"graphicalItems",initialState:Iee,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:pr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,s=is(e).cartesianItems.indexOf(n);s>-1&&(e.cartesianItems[s]=a)},prepare:pr()},removeCartesianGraphicalItem:{reducer(e,t){var n=is(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:pr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:pr()},removePolarGraphicalItem:{reducer(e,t){var n=is(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:pr()}}}),{addCartesianGraphicalItem:Dee,replaceCartesianGraphicalItem:Oee,removeCartesianGraphicalItem:Mee,addPolarGraphicalItem:Tee,removePolarGraphicalItem:Ree}=gR.actions,_ee=gR.reducer,$ee=e=>{var t=vr(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?t(Dee(e)):n.current!==e&&t(Oee({prev:n.current,next:e})),n.current=e},[t,e]),x.useLayoutEffect(()=>()=>{n.current&&(t(Mee(n.current)),n.current=null)},[t]),null},Fee=x.memo($ee);function Lee(e){var t=vr();return x.useLayoutEffect(()=>(t(Tee(e)),()=>{t(Ree(e))}),[t,e]),null}var zee=["key"],Uee=["onMouseEnter","onClick","onMouseLeave"],Bee=["id"],Vee=["id"];function BA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(n),!0).forEach(function(a){qee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qee(e,t,n){return(t=Gee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gee(e){var t=Hee(e,"string");return typeof t=="symbol"?t:t+""}function Hee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fi.apply(null,arguments)}function Rg(e,t){if(e==null)return{};var n,a,s=Wee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Wee(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Kee(e){var t=x.useMemo(()=>fR(e.children,Dg),[e.children]),n=mt(a=>JZ(a,e.id,t));return n==null?null:x.createElement(Cee,{legendPayload:n})}var Yee=x.memo(e=>{var{dataKey:t,nameKey:n,sectors:a,stroke:s,strokeWidth:o,fill:l,name:c,hide:f,tooltipType:h,id:u}=e,m={dataDefinedOnItem:a.map(p=>p.tooltipPayload),positions:a.map(p=>p.tooltipPosition),settings:{stroke:s,strokeWidth:o,fill:l,dataKey:t,nameKey:n,name:ng(c,t),hide:f,type:h,color:l,unit:"",graphicalItemId:u}};return x.createElement(mR,{tooltipEntrySettings:m})}),Xee=(e,t)=>e>t?"start":e<t?"end":"middle",Jee=(e,t,n)=>pa(typeof t=="function"?t(e):t,n,n*.8),Qee=(e,t,n)=>{var{top:a,left:s,width:o,height:l}=t,c=_4(o,l),f=s+pa(e.cx,o,o/2),h=a+pa(e.cy,l,l/2),u=pa(e.innerRadius,c,0),m=Jee(n,e.outerRadius,c),p=e.maxRadius||Math.sqrt(o*o+l*l)/2;return{cx:f,cy:h,innerRadius:u,outerRadius:m,maxRadius:p}},Zee=(e,t)=>{var n=In(t-e),a=Math.min(Math.abs(t-e),360);return n*a};function ete(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var tte=(e,t)=>{if(x.isValidElement(e))return x.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Yt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:a}=t,s=Rg(t,zee);return x.createElement(wc,fi({},s,{type:"linear",className:n}))},rte=(e,t,n)=>{if(x.isValidElement(e))return x.cloneElement(e,t);var a=n;if(typeof e=="function"&&(a=e(t),x.isValidElement(a)))return a;var s=Yt("recharts-pie-label-text",ete(e));return x.createElement(Og,fi({},t,{alignmentBaseline:"middle",className:s}),a)};function nte(e){var{sectors:t,props:n,showLabels:a}=e,{label:s,labelLine:o,dataKey:l}=n;if(!a||!s||!t)return null;var c=ba(n),f=Pc(s),h=Pc(o),u=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,m=t.map((p,v)=>{var j=(p.startAngle+p.endAngle)/2,y=Fr(p.cx,p.cy,p.outerRadius+u,j),b=Ar(Ar(Ar(Ar({},c),p),{},{stroke:"none"},f),{},{index:v,textAnchor:Xee(y.x,p.cx)},y),N=Ar(Ar(Ar(Ar({},c),p),{},{fill:"none",stroke:p.fill},h),{},{index:v,points:[Fr(p.cx,p.cy,p.outerRadius,j),y],key:"line"});return x.createElement(fs,{zIndex:vn.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},x.createElement(bn,null,o&&tte(o,N),rte(s,b,fr(p,l))))});return x.createElement(bn,{className:"recharts-pie-labels"},m)}function ate(e){var{sectors:t,props:n,showLabels:a}=e,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?x.createElement(sR,{label:s}):x.createElement(nte,{sectors:t,props:n,showLabels:a})}function ste(e){var{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:s,shape:o,id:l}=e,c=mt(Mc),f=mt(RT),h=mt(fJ),{onMouseEnter:u,onClick:m,onMouseLeave:p}=s,v=Rg(s,Uee),j=jee(u,s.dataKey,l),y=wee(p),b=Nee(m,s.dataKey,l);return t==null||t.length===0?null:x.createElement(x.Fragment,null,t.map((N,P)=>{if(N?.startAngle===0&&N?.endAngle===0&&t.length!==1)return null;var A=h==null||h===l,k=String(P)===c&&(f==null||s.dataKey===f)&&A,I=c?a:null,E=n&&k?n:I,O=Ar(Ar({},N),{},{stroke:N.stroke,tabIndex:-1,[d4]:P,[u4]:l});return x.createElement(bn,fi({key:"sector-".concat(N?.startAngle,"-").concat(N?.endAngle,"-").concat(N.midAngle,"-").concat(P),tabIndex:-1,className:"recharts-pie-sector"},x5(v,N,P),{onMouseEnter:j(N,P),onMouseLeave:y(N,P),onClick:b(N,P)}),x.createElement(bee,fi({option:o??E,index:P,shapeType:"sector",isActive:k},O)))}))}function ote(e){var t,{pieSettings:n,displayedData:a,cells:s,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:f,dataKey:h,nameKey:u,tooltipType:m}=n,p=Math.abs(n.minAngle),v=Zee(c,f),j=Math.abs(v),y=a.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,b=a.filter(E=>fr(E,h,0)!==0).length,N=(j>=360?b:b-1)*y,P=j-b*p-N,A=a.reduce((E,O)=>{var C=fr(O,h,0);return E+(lt(C)?C:0)},0),k;if(A>0){var I;k=a.map((E,O)=>{var C=fr(E,h,0),M=fr(E,u,O),F=Qee(n,o,E),V=(lt(C)?C:0)/A,T,L=Ar(Ar({},E),s&&s[O]&&s[O].props);O?T=I.endAngle+In(v)*y*(C!==0?1:0):T=c;var U=T+In(v)*((C!==0?p:0)+V*P),J=(T+U)/2,q=(F.innerRadius+F.outerRadius)/2,W=[{name:M,value:C,payload:L,dataKey:h,type:m,graphicalItemId:n.id}],z=Fr(F.cx,F.cy,q,J);return I=Ar(Ar(Ar(Ar({},n.presentationProps),{},{percent:V,cornerRadius:typeof l=="string"?parseFloat(l):l,name:M,tooltipPayload:W,midAngle:J,middleRadius:q,tooltipPosition:z},L),F),{},{value:C,dataKey:h,startAngle:T,endAngle:U,payload:L,paddingAngle:In(v)*y}),I})}return k}function ite(e){var{showLabels:t,sectors:n,children:a}=e,s=x.useMemo(()=>!t||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,t]);return x.createElement(RZ,{value:t?s:void 0},a)}function lte(e){var{props:t,previousSectorsRef:n,id:a}=e,{sectors:s,isAnimationActive:o,animationBegin:l,animationDuration:c,animationEasing:f,activeShape:h,inactiveShape:u,onAnimationStart:m,onAnimationEnd:p}=t,v=mg(t,"recharts-pie-"),j=n.current,[y,b]=x.useState(!1),N=x.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),P=x.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]);return x.createElement(ite,{showLabels:!y,sectors:s},x.createElement(hg,{animationId:v,begin:l,duration:c,isActive:o,easing:f,onAnimationStart:P,onAnimationEnd:N,key:v},A=>{var k=[],I=s&&s[0],E=I?.startAngle;return s?.forEach((O,C)=>{var M=j&&j[C],F=C>0?hl(O,"paddingAngle",0):0;if(M){var V=xn(M.endAngle-M.startAngle,O.endAngle-O.startAngle,A),T=Ar(Ar({},O),{},{startAngle:E+F,endAngle:E+V+F});k.push(T),E=T.endAngle}else{var{endAngle:L,startAngle:U}=O,J=xn(0,L-U,A),q=Ar(Ar({},O),{},{startAngle:E+F,endAngle:E+J+F});k.push(q),E=q.endAngle}}),n.current=k,x.createElement(bn,null,x.createElement(ste,{sectors:k,activeShape:h,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:a}))}),x.createElement(ate,{showLabels:!y,sectors:s,props:t}),t.children)}var cte={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:vn.area};function dte(e){var{id:t}=e,n=Rg(e,Bee),{hide:a,className:s,rootTabIndex:o}=e,l=x.useMemo(()=>fR(e.children,Dg),[e.children]),c=mt(u=>QZ(u,t,l)),f=x.useRef(null),h=Yt("recharts-pie",s);return a||c==null?(f.current=null,x.createElement(bn,{tabIndex:o,className:h})):x.createElement(fs,{zIndex:e.zIndex},x.createElement(Yee,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),x.createElement(bn,{tabIndex:o,className:h},x.createElement(lte,{props:Ar(Ar({},n),{},{sectors:c}),previousSectorsRef:f,id:t})))}function xR(e){var t=jn(e,cte),{id:n}=t,a=Rg(t,Vee),s=ba(a);return x.createElement(pR,{id:n,type:"pie"},o=>x.createElement(x.Fragment,null,x.createElement(Lee,{type:"pie",id:o,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),x.createElement(Kee,fi({},a,{id:o})),x.createElement(dte,fi({},a,{id:o}))))}xR.displayName="Pie";var ute=["points"];function VA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function wy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(n),!0).forEach(function(a){fte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function fte(e,t,n){return(t=hte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hte(e){var t=mte(e,"string");return typeof t=="symbol"?t:t+""}function mte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hp.apply(null,arguments)}function pte(e,t){if(e==null)return{};var n,a,s=gte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function gte(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function xte(e){var{option:t,dotProps:n,className:a}=e;if(x.isValidElement(t))return x.cloneElement(t,n);if(typeof t=="function")return t(n);var s=Yt(a,typeof t!="boolean"?t.className:""),o=n??{},{points:l}=o,c=pte(o,ute);return x.createElement(oR,hp({},c,{className:s}))}function vte(e,t){return e==null?!1:t?!0:e.length===1}function yte(e){var{points:t,dot:n,className:a,dotClassName:s,dataKey:o,baseProps:l,needClip:c,clipPathId:f,zIndex:h=vn.scatter}=e;if(!vte(t,n))return null;var u=hR(n),m=QB(n),p=t.map((j,y)=>{var b,N,P=wy(wy(wy({r:3},l),m),{},{index:y,cx:(b=j.x)!==null&&b!==void 0?b:void 0,cy:(N=j.y)!==null&&N!==void 0?N:void 0,dataKey:o,value:j.value,payload:j.payload,points:t});return x.createElement(xte,{key:"dot-".concat(y),option:n,dotProps:P,className:s})}),v={};return c&&f!=null&&(v.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(f,")")),x.createElement(fs,{zIndex:h},x.createElement(bn,hp({className:a},v),p))}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function GA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(a){bte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bte(e,t,n){return(t=jte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jte(e){var t=wte(e,"string");return typeof t=="symbol"?t:t+""}function wte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vR=0,Nte={xAxis:{},yAxis:{},zAxis:{}},yR=ta({name:"cartesianAxis",initialState:Nte,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:pr()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:pr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:pr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:pr()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:pr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:pr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:pr()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:pr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:pr()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,s=e.yAxis[n];if(s){var o=s.widthHistory||[];if(o.length===3&&o[0]===o[2]&&a===o[1]&&a!==s.width&&Math.abs(a-o[0])<=1)return;var l=[...o,a].slice(-3);e.yAxis[n]=GA(GA({},e.yAxis[n]),{},{width:a,widthHistory:l})}}}}),{addXAxis:Ste,replaceXAxis:Cte,removeXAxis:kte,addYAxis:Pte,replaceYAxis:Ete,removeYAxis:Ate,addZAxis:cde,replaceZAxis:dde,removeZAxis:ude,updateYAxisWidth:Ite}=yR.actions,Dte=yR.reducer,Ote=Pe([un],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Mte=Pe([Ote,vo,yo],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),jN=()=>mt(Mte),Tte=()=>mt(xJ);function HA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(n),!0).forEach(function(a){Rte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Rte(e,t,n){return(t=_te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _te(e){var t=$te(e,"string");return typeof t=="symbol"?t:t+""}function $te(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fte=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:s,dataKey:o,clipPath:l}=e;if(s===!1||t.x==null||t.y==null)return null;var c={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},f=Ny(Ny(Ny({},c),Pc(s)),Kj(s)),h;return x.isValidElement(s)?h=x.cloneElement(s,f):typeof s=="function"?h=s(f):h=x.createElement(oR,f),x.createElement(bn,{className:"recharts-active-dot",clipPath:l},h)};function WA(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:s,clipPath:o,zIndex:l=vn.activeDot}=e,c=mt(Mc),f=Tte();if(t==null||f==null)return null;var h=t.find(u=>f.includes(u.payload));return ln(h)?null:x.createElement(fs,{zIndex:l},x.createElement(Fte,{point:h,childIndex:Number(c),mainColor:n,dataKey:s,activeDot:a,clipPath:o}))}var bR=e=>{var{chartData:t}=e,n=vr(),a=ra();return x.useEffect(()=>a?()=>{}:(n(eA(t)),()=>{n(eA(void 0))}),[t,n,a]),null},KA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},jR=ta({name:"brush",initialState:KA,reducers:{setBrushSettings(e,t){return t.payload==null?KA:t.payload}}}),{setBrushSettings:fde}=jR.actions,Lte=jR.reducer;function zte(e,t,n){return(t=Ute(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ute(e){var t=Bte(e,"string");return typeof t=="symbol"?t:t+""}function Bte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wN{static create(t){return new wN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}zte(wN,"EPS",1e-4);function Vte(e){return(e%180+180)%180}var qte=function(t){var{width:n,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Vte(s),l=o*Math.PI/180,c=Math.atan(a/n),f=l>c&&l<Math.PI-c?a/Math.sin(l):n/Math.cos(l);return Math.abs(f)},Gte={dots:[],areas:[],lines:[]},wR=ta({name:"referenceElements",initialState:Gte,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=is(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=is(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=is(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:hde,removeDot:mde,addArea:pde,removeArea:gde,addLine:xde,removeLine:vde}=wR.actions,Hte=wR.reducer,Wte=x.createContext(void 0),Kte=e=>{var{children:t}=e,[n]=x.useState("".concat(yu("recharts"),"-clip")),a=jN();if(a==null)return null;var{x:s,y:o,width:l,height:c}=a;return x.createElement(Wte.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:s,y:o,height:c,width:l}))),t)};function NR(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t){var s=e[a];s!==void 0&&n.push(s)}return n}function Yte(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return qte(a,n)}function Xte(e,t,n){var a=n==="width",{x:s,y:o,width:l,height:c}=e;return t===1?{start:a?s:o,end:a?s+l:o+c}:{start:a?s+l:o+c,end:a?s:o}}function Tu(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-s)<=0}function Jte(e,t){return NR(e,t+1)}function Qte(e,t,n,a,s){for(var o=(a||[]).slice(),{start:l,end:c}=t,f=0,h=1,u=l,m=function(){var j=a?.[f];if(j===void 0)return{v:NR(a,h)};var y=f,b,N=()=>(b===void 0&&(b=n(j,y)),b),P=j.coordinate,A=f===0||Tu(e,P,N,u,c);A||(f=0,u=l,h+=1),A&&(u=P+e*(N()/2+s),f+=h)},p;h<=o.length;)if(p=m(),p)return p.v;return[]}function Zte(e,t,n,a,s){var o=(a||[]).slice(),l=o.length;if(l===0)return[];for(var{start:c,end:f}=t,h=1;h<=l;h++){for(var u=(l-1)%h,m=c,p=!0,v=function(){var P=a[j],A=j,k,I=()=>(k===void 0&&(k=n(P,A)),k),E=P.coordinate,O=j===u||Tu(e,E,I,m,f);if(!O)return p=!1,1;O&&(m=E+e*(I()/2+s))},j=u;j<l&&!v();j+=h);if(p){for(var y=[],b=u;b<l;b+=h)y.push(a[b]);return y}}return[]}function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(n),!0).forEach(function(a){ere(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ere(e,t,n){return(t=tre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tre(e){var t=rre(e,"string");return typeof t=="symbol"?t:t+""}function rre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nre(e,t,n,a,s){for(var o=(a||[]).slice(),l=o.length,{start:c}=t,{end:f}=t,h=function(p){var v=o[p],j,y=()=>(j===void 0&&(j=n(v,p)),j);if(p===l-1){var b=e*(v.coordinate+e*y()/2-f);o[p]=v=Pn(Pn({},v),{},{tickCoord:b>0?v.coordinate-b*e:v.coordinate})}else o[p]=v=Pn(Pn({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var N=Tu(e,v.tickCoord,y,c,f);N&&(f=v.tickCoord-e*(y()/2+s),o[p]=Pn(Pn({},v),{},{isShow:!0}))}},u=l-1;u>=0;u--)h(u);return o}function are(e,t,n,a,s,o){var l=(a||[]).slice(),c=l.length,{start:f,end:h}=t;if(o){var u=a[c-1],m=n(u,c-1),p=e*(u.coordinate+e*m/2-h);if(l[c-1]=u=Pn(Pn({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var v=Tu(e,u.tickCoord,()=>m,f,h);v&&(h=u.tickCoord-e*(m/2+s),l[c-1]=Pn(Pn({},u),{},{isShow:!0}))}}for(var j=o?c-1:c,y=function(P){var A=l[P],k,I=()=>(k===void 0&&(k=n(A,P)),k);if(P===0){var E=e*(A.coordinate-e*I()/2-f);l[P]=A=Pn(Pn({},A),{},{tickCoord:E<0?A.coordinate-E*e:A.coordinate})}else l[P]=A=Pn(Pn({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var O=Tu(e,A.tickCoord,I,f,h);O&&(f=A.tickCoord+e*(I()/2+s),l[P]=Pn(Pn({},A),{},{isShow:!0}))}},b=0;b<j;b++)y(b);return l}function NN(e,t,n){var{tick:a,ticks:s,viewBox:o,minTickGap:l,orientation:c,interval:f,tickFormatter:h,unit:u,angle:m}=e;if(!s||!s.length||!a)return[];if(lt(f)||af.isSsr){var p;return(p=Jte(s,lt(f)?f:0))!==null&&p!==void 0?p:[]}var v=[],j=c==="top"||c==="bottom"?"width":"height",y=u&&j==="width"?du(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},b=(A,k)=>{var I=typeof h=="function"?h(A.value,k):A.value;return j==="width"?Yte(du(I,{fontSize:t,letterSpacing:n}),y,m):du(I,{fontSize:t,letterSpacing:n})[j]},N=s.length>=2?In(s[1].coordinate-s[0].coordinate):1,P=Xte(o,N,j);return f==="equidistantPreserveStart"?Qte(N,P,b,s,l):f==="equidistantPreserveEnd"?Zte(N,P,b,s,l):(f==="preserveStart"||f==="preserveStartEnd"?v=are(N,P,b,s,l,f==="preserveStartEnd"):v=nre(N,P,b,s,l),v.filter(A=>A.isShow))}var sre=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:s=0,tickMargin:o=0}=e,l=0;if(t){Array.from(t).forEach(u=>{if(u){var m=u.getBoundingClientRect();m.width>l&&(l=m.width)}});var c=n?n.getBoundingClientRect().width:0,f=s+o,h=l+f+c+(n?a:0);return Math.round(h)}return 0},ore=["axisLine","width","height","className","hide","ticks","axisType"];function ire(e,t){if(e==null)return{};var n,a,s=lre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function lre(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vl.apply(null,arguments)}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(a){cre(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cre(e,t,n){return(t=dre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dre(e){var t=ure(e,"string");return typeof t=="symbol"?t:t+""}function ure(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ao={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:vn.axis};function fre(e){var{x:t,y:n,width:a,height:s,orientation:o,mirror:l,axisLine:c,otherSvgProps:f}=e;if(!c)return null;var h=$r($r($r({},f),ba(c)),{},{fill:"none"});if(o==="top"||o==="bottom"){var u=+(o==="top"&&!l||o==="bottom"&&l);h=$r($r({},h),{},{x1:t,y1:n+u*s,x2:t+a,y2:n+u*s})}else{var m=+(o==="left"&&!l||o==="right"&&l);h=$r($r({},h),{},{x1:t+m*a,y1:n,x2:t+m*a,y2:n+s})}return x.createElement("line",vl({},h,{className:Yt("recharts-cartesian-axis-line",hl(c,"className"))}))}function hre(e,t,n,a,s,o,l,c,f){var h,u,m,p,v,j,y=c?-1:1,b=e.tickSize||l,N=lt(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=u=e.coordinate,p=n+ +!c*s,m=p-y*b,j=m-y*f,v=N;break;case"left":m=p=e.coordinate,u=t+ +!c*a,h=u-y*b,v=h-y*f,j=N;break;case"right":m=p=e.coordinate,u=t+ +c*a,h=u+y*b,v=h+y*f,j=N;break;default:h=u=e.coordinate,p=n+ +c*s,m=p+y*b,j=m+y*f,v=N;break}return{line:{x1:h,y1:m,x2:u,y2:p},tick:{x:v,y:j}}}function mre(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function pre(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function gre(e){var{option:t,tickProps:n,value:a}=e,s,o=Yt(n.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))s=x.cloneElement(t,$r($r({},n),{},{className:o}));else if(typeof t=="function")s=t($r($r({},n),{},{className:o}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Yt(l,t?.className)),s=x.createElement(Og,vl({},n,{className:l}),a)}return s}var xre=x.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:s,stroke:o,tickFormatter:l,unit:c,padding:f,tickTextProps:h,orientation:u,mirror:m,x:p,y:v,width:j,height:y,tickSize:b,tickMargin:N,fontSize:P,letterSpacing:A,getTicksConfig:k,events:I,axisType:E}=e,O=NN($r($r({},k),{},{ticks:n}),P,A),C=mre(u,m),M=pre(u,m),F=ba(k),V=Pc(a),T={};typeof s=="object"&&(T=s);var L=$r($r({},F),{},{fill:"none"},T),U=O.map(W=>$r({entry:W},hre(W,p,v,j,y,u,b,m,N))),J=U.map(W=>{var{entry:z,line:K}=W;return x.createElement(bn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(z.value,"-").concat(z.coordinate,"-").concat(z.tickCoord)},s&&x.createElement("line",vl({},L,K,{className:Yt("recharts-cartesian-axis-tick-line",hl(s,"className"))})))}),q=U.map((W,z)=>{var{entry:K,tick:B}=W,R=$r($r($r($r({textAnchor:C,verticalAnchor:M},F),{},{stroke:"none",fill:o},V),B),{},{index:z,payload:K,visibleTicksCount:O.length,tickFormatter:l,padding:f},h);return x.createElement(bn,vl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},x5(I,K,z)),a&&x.createElement(gre,{option:a,tickProps:R,value:"".concat(typeof l=="function"?l(K.value,z):K.value).concat(c||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(E,"-ticks")},q.length>0&&x.createElement(fs,{zIndex:vn.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(E,"-tick-labels"),ref:t},q)),J.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(E,"-tick-lines")},J))}),vre=x.forwardRef((e,t)=>{var{axisLine:n,width:a,height:s,className:o,hide:l,ticks:c,axisType:f}=e,h=ire(e,ore),[u,m]=x.useState(""),[p,v]=x.useState(""),j=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return sre({ticks:j.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=x.useCallback(b=>{if(b){var N=b.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=N;var P=N[0];if(P){var A=window.getComputedStyle(P),k=A.fontSize,I=A.letterSpacing;(k!==u||I!==p)&&(m(k),v(I))}}},[u,p]);return l||a!=null&&a<=0||s!=null&&s<=0?null:x.createElement(fs,{zIndex:e.zIndex},x.createElement(bn,{className:Yt("recharts-cartesian-axis",o)},x.createElement(fre,{x:e.x,y:e.y,width:a,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:ba(e)}),x.createElement(xre,{ref:y,axisType:f,events:h,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(hZ,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(NZ,{label:e.label,labelRef:e.labelRef}),e.children)))}),SN=x.forwardRef((e,t)=>{var n=jn(e,ao);return x.createElement(vre,vl({},n,{ref:t}))});SN.displayName="CartesianAxis";var yre=["x1","y1","x2","y2","key"],bre=["offset"],jre=["xAxisId","yAxisId"],wre=["xAxisId","yAxisId"];function JA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(n),!0).forEach(function(a){Nre(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Nre(e,t,n){return(t=Sre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sre(e){var t=Cre(e,"string");return typeof t=="symbol"?t:t+""}function Cre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rl.apply(null,arguments)}function mp(e,t){if(e==null)return{};var n,a,s=kre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function kre(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Pre=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:s,width:o,height:l,ry:c}=e;return x.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function SR(e){var{option:t,lineItemProps:n}=e,a;if(x.isValidElement(t))a=x.cloneElement(t,n);else if(typeof t=="function")a=t(n);else{var s,{x1:o,y1:l,x2:c,y2:f,key:h}=n,u=mp(n,yre),m=(s=ba(u))!==null&&s!==void 0?s:{},{offset:p}=m,v=mp(m,bre);a=x.createElement("line",rl({},v,{x1:o,y1:l,x2:c,y2:f,fill:"none",key:h}))}return a}function Ere(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:o,yAxisId:l}=e,c=mp(e,jre),f=s.map((h,u)=>{var m=En(En({},c),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(u),index:u});return x.createElement(SR,{key:"line-".concat(u),option:a,lineItemProps:m})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Are(e){var{y:t,height:n,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:o,yAxisId:l}=e,c=mp(e,wre),f=s.map((h,u)=>{var m=En(En({},c),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(u),index:u});return x.createElement(SR,{option:a,lineItemProps:m,key:"line-".concat(u)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Ire(e){var{horizontalFill:t,fillOpacity:n,x:a,y:s,width:o,height:l,horizontalPoints:c,horizontal:f=!0}=e;if(!f||!t||!t.length||c==null)return null;var h=c.map(m=>Math.round(m+s-s)).sort((m,p)=>m-p);s!==h[0]&&h.unshift(0);var u=h.map((m,p)=>{var v=!h[p+1],j=v?s+l-m:h[p+1]-m;if(j<=0)return null;var y=p%t.length;return x.createElement("rect",{key:"react-".concat(p),y:m,x:a,height:j,width:o,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Dre(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:s,y:o,width:l,height:c,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var h=f.map(m=>Math.round(m+s-s)).sort((m,p)=>m-p);s!==h[0]&&h.unshift(0);var u=h.map((m,p)=>{var v=!h[p+1],j=v?s+l-m:h[p+1]-m;if(j<=0)return null;var y=p%n.length;return x.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:j,height:c,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Ore=(e,t)=>{var{xAxis:n,width:a,height:s,offset:o}=e;return i4(NN(En(En(En({},ao),n),{},{ticks:l4(n),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,t)},Mre=(e,t)=>{var{yAxis:n,width:a,height:s,offset:o}=e;return i4(NN(En(En(En({},ao),n),{},{ticks:l4(n),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,t)},Tre={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:vn.grid};function CR(e){var t=v4(),n=y4(),a=x4(),s=En(En({},jn(e,Tre)),{},{x:lt(e.x)?e.x:a.left,y:lt(e.y)?e.y:a.top,width:lt(e.width)?e.width:a.width,height:lt(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:l,x:c,y:f,width:h,height:u,syncWithTicks:m,horizontalValues:p,verticalValues:v}=s,j=ra(),y=mt(M=>BE(M,"xAxis",o,j)),b=mt(M=>BE(M,"yAxis",l,j));if(!Is(h)||!Is(u)||!lt(c)||!lt(f))return null;var N=s.verticalCoordinatesGenerator||Ore,P=s.horizontalCoordinatesGenerator||Mre,{horizontalPoints:A,verticalPoints:k}=s;if((!A||!A.length)&&typeof P=="function"){var I=p&&p.length,E=P({yAxis:b?En(En({},b),{},{ticks:I?p:b.ticks}):void 0,width:t??h,height:n??u,offset:a},I?!0:m);Bm(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(A=E)}if((!k||!k.length)&&typeof N=="function"){var O=v&&v.length,C=N({xAxis:y?En(En({},y),{},{ticks:O?v:y.ticks}):void 0,width:t??h,height:n??u,offset:a},O?!0:m);Bm(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(k=C)}return x.createElement(fs,{zIndex:s.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(Pre,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),x.createElement(Ire,rl({},s,{horizontalPoints:A})),x.createElement(Dre,rl({},s,{verticalPoints:k})),x.createElement(Ere,rl({},s,{offset:a,horizontalPoints:A,xAxis:y,yAxis:b})),x.createElement(Are,rl({},s,{offset:a,verticalPoints:k,xAxis:y,yAxis:b}))))}CR.displayName="CartesianGrid";var Rre={},kR=ta({name:"errorBars",initialState:Rre,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:s}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?s:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(s=>s.dataKey!==a.dataKey||s.direction!==a.direction))}}}),{addErrorBar:yde,replaceErrorBar:bde,removeErrorBar:jde}=kR.actions,_re=kR.reducer;function PR(e,t){var n,a,s=mt(h=>wo(h,e)),o=mt(h=>No(h,t)),l=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:rn.allowDataOverflow,c=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:nn.allowDataOverflow,f=l||c;return{needClip:f,needClipX:l,needClipY:c}}function $re(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,s=jN(),{needClipX:o,needClipY:l,needClip:c}=PR(t,n);if(!c||!s)return null;var{x:f,y:h,width:u,height:m}=s;return x.createElement("clipPath",{id:"clipPath-".concat(a)},x.createElement("rect",{x:o?f:f-u/2,y:l?h:h-m/2,width:o?u:u*2,height:l?m:m*2}))}function Fre(e){var t=Pc(e),n=3,a=2;if(t!=null){var{r:s,strokeWidth:o}=t,l=Number(s),c=Number(o);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(c)||c<0)&&(c=a),{r:l,strokeWidth:c}}return{r:n,strokeWidth:a}}var Sy={exports:{}},Cy={};var QA;function Lre(){if(QA)return Cy;QA=1;var e=$c();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return Cy.useSyncExternalStoreWithSelector=function(f,h,u,m,p){var v=s(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=l(function(){function b(I){if(!N){if(N=!0,P=I,I=m(I),p!==void 0&&j.hasValue){var E=j.value;if(p(E,I))return A=E}return A=I}if(E=A,n(P,I))return E;var O=m(I);return p!==void 0&&p(E,O)?(P=I,E):(P=I,A=O)}var N=!1,P,A,k=u===void 0?null:u;return[function(){return b(h())},k===null?void 0:function(){return b(k())}]},[h,u,m,p]);var y=a(f,v[0],v[1]);return o(function(){j.hasValue=!0,j.value=y},[y]),c(y),y},Cy}var ZA;function zre(){return ZA||(ZA=1,Sy.exports=Lre()),Sy.exports}zre();var Ure=x.version.startsWith("19"),Bre=Symbol.for(Ure?"react.transitional.element":"react.element"),Vre=Symbol.for("react.portal"),qre=Symbol.for("react.fragment"),Gre=Symbol.for("react.strict_mode"),Hre=Symbol.for("react.profiler"),Wre=Symbol.for("react.consumer"),Kre=Symbol.for("react.context"),ER=Symbol.for("react.forward_ref"),Yre=Symbol.for("react.suspense"),Xre=Symbol.for("react.suspense_list"),CN=Symbol.for("react.memo"),Jre=Symbol.for("react.lazy"),Qre=ER,Zre=CN;function ene(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Bre:switch(e=e.type,e){case qre:case Hre:case Gre:case Yre:case Xre:return e;default:switch(e=e&&e.$$typeof,e){case Kre:case ER:case Jre:case CN:return e;case Wre:return e;default:return t}}case Vre:return t}}}function tne(e){return ene(e)===CN}function rne(e,t,n,a,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:l}){let c=!1,f,h,u,m,p;function v(P,A){return f=P,h=A,u=e(f,h),m=t(a,h),p=n(u,m,h),c=!0,p}function j(){return u=e(f,h),t.dependsOnOwnProps&&(m=t(a,h)),p=n(u,m,h),p}function y(){return e.dependsOnOwnProps&&(u=e(f,h)),t.dependsOnOwnProps&&(m=t(a,h)),p=n(u,m,h),p}function b(){const P=e(f,h),A=!l(P,u);return u=P,A&&(p=n(u,m,h)),p}function N(P,A){const k=!o(A,h),I=!s(P,f,A,h);return f=P,h=A,k&&I?j():k?y():I?b():p}return function(A,k){return c?N(A,k):v(A,k)}}function nne(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:a,...s}){const o=t(e,s),l=n(e,s),c=a(e,s);return rne(o,l,c,e,s)}function ane(e,t){const n={};for(const a in e){const s=e[a];typeof s=="function"&&(n[a]=(...o)=>t(s(...o)))}return n}function nj(e){return function(n){const a=e(n);function s(){return a}return s.dependsOnOwnProps=!1,s}}function eI(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function AR(e,t){return function(a,{displayName:s}){const o=function(c,f){return o.dependsOnOwnProps?o.mapToProps(c,f):o.mapToProps(c,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(c,f){o.mapToProps=e,o.dependsOnOwnProps=eI(e);let h=o(c,f);return typeof h=="function"&&(o.mapToProps=h,o.dependsOnOwnProps=eI(h),h=o(c,f)),h},o}}function kN(e,t){return(n,a)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${a.wrappedComponentName}.`)}}function sne(e){return e&&typeof e=="object"?nj(t=>ane(e,t)):e?typeof e=="function"?AR(e):kN(e,"mapDispatchToProps"):nj(t=>({dispatch:t}))}function one(e){return e?typeof e=="function"?AR(e):kN(e,"mapStateToProps"):nj(()=>({}))}function ine(e,t,n){return{...n,...e,...t}}function lne(e){return function(n,{displayName:a,areMergedPropsEqual:s}){let o=!1,l;return function(f,h,u){const m=e(f,h,u);return o?s(m,l)||(l=m):(o=!0,l=m),l}}}function cne(e){return e?typeof e=="function"?lne(e):kN(e,"mergeProps"):()=>ine}function dne(e){e()}function une(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dne(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var tI={notify(){},get:()=>[]};function IR(e,t){let n,a=tI,s=0,o=!1;function l(y){u();const b=a.subscribe(y);let N=!1;return()=>{N||(N=!0,b(),m())}}function c(){a.notify()}function f(){j.onStateChange&&j.onStateChange()}function h(){return o}function u(){s++,n||(n=t?t.addNestedSub(f):e.subscribe(f),a=une())}function m(){s--,n&&s===0&&(n(),n=void 0,a.clear(),a=tI)}function p(){o||(o=!0,u())}function v(){o&&(o=!1,m())}const j={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:h,trySubscribe:p,tryUnsubscribe:v,getListeners:()=>a};return j}var fne=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hne=fne(),mne=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pne=mne(),gne=()=>hne||pne?x.useLayoutEffect:x.useEffect,pp=gne();function rI(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function fm(e,t){if(rI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!rI(e[n[s]],t[n[s]]))return!1;return!0}var xne={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},vne={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},yne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bne={[Qre]:yne,[Zre]:DR};function nI(e){return tne(e)?DR:bne[e.$$typeof]||xne}var jne=Object.defineProperty,wne=Object.getOwnPropertyNames,aI=Object.getOwnPropertySymbols,Nne=Object.getOwnPropertyDescriptor,Sne=Object.getPrototypeOf,sI=Object.prototype;function aj(e,t){if(typeof t!="string"){if(sI){const o=Sne(t);o&&o!==sI&&aj(e,o)}let n=wne(t);aI&&(n=n.concat(aI(t)));const a=nI(e),s=nI(t);for(let o=0;o<n.length;++o){const l=n[o];if(!vne[l]&&!(s&&s[l])&&!(a&&a[l])){const c=Nne(t,l);try{jne(e,l,c)}catch{}}}}return e}var Cne=Symbol.for("react-redux-context"),kne=typeof globalThis<"u"?globalThis:{};function Pne(){if(!x.createContext)return{};const e=kne[Cne]??=new Map;let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var OR=Pne(),Ene=[null,null];function Ane(e,t,n){pp(()=>e(...t),n)}function Ine(e,t,n,a,s,o){e.current=a,n.current=!1,s.current&&(s.current=null,o())}function Dne(e,t,n,a,s,o,l,c,f,h,u){if(!e)return()=>{};let m=!1,p=null;const v=()=>{if(m||!c.current)return;const y=t.getState();let b,N;try{b=a(y,s.current)}catch(P){N=P,p=P}N||(p=null),b===o.current?l.current||h():(o.current=b,f.current=b,l.current=!0,u())};return n.onStateChange=v,n.trySubscribe(),v(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function One(e,t){return e===t}function Mne(e,t,n,{pure:a,areStatesEqual:s=One,areOwnPropsEqual:o=fm,areStatePropsEqual:l=fm,areMergedPropsEqual:c=fm,forwardRef:f=!1,context:h=OR}={}){const u=h,m=one(e),p=sne(t),v=cne(n),j=!!e;return b=>{const N=b.displayName||b.name||"Component",P=`Connect(${N})`,A={shouldHandleStateChanges:j,displayName:P,wrappedComponentName:N,WrappedComponent:b,initMapStateToProps:m,initMapDispatchToProps:p,initMergeProps:v,areStatesEqual:s,areStatePropsEqual:l,areOwnPropsEqual:o,areMergedPropsEqual:c};function k(O){const[C,M,F]=x.useMemo(()=>{const{reactReduxForwardedRef:se,...fe}=O;return[O.context,se,fe]},[O]),V=x.useMemo(()=>{let se=u;return C?.Consumer,se},[C,u]),T=x.useContext(V),L=!!O.store&&!!O.store.getState&&!!O.store.dispatch,U=!!T&&!!T.store,J=L?O.store:T.store,q=U?T.getServerState:J.getState,W=x.useMemo(()=>nne(J.dispatch,A),[J]),[z,K]=x.useMemo(()=>{if(!j)return Ene;const se=IR(J,L?void 0:T.subscription),fe=se.notifyNestedSubs.bind(se);return[se,fe]},[J,L,T]),B=x.useMemo(()=>L?T:{...T,subscription:z},[L,T,z]),R=x.useRef(void 0),H=x.useRef(F),Y=x.useRef(void 0),ee=x.useRef(!1),me=x.useRef(!1),De=x.useRef(void 0);pp(()=>(me.current=!0,()=>{me.current=!1}),[]);const Se=x.useMemo(()=>()=>Y.current&&F===H.current?Y.current:W(J.getState(),F),[J,F]),We=x.useMemo(()=>fe=>z?Dne(j,J,z,W,H,R,ee,me,Y,K,fe):()=>{},[z]);Ane(Ine,[H,R,ee,F,Y,K]);let pe;try{pe=x.useSyncExternalStore(We,Se,q?()=>W(q(),F):Se)}catch(se){throw De.current&&(se.message+=`
The error may be correlated with this previous error:
${De.current.stack}

`),se}pp(()=>{De.current=void 0,Y.current=void 0,R.current=pe});const ue=x.useMemo(()=>x.createElement(b,{...pe,ref:M}),[M,b,pe]);return x.useMemo(()=>j?x.createElement(V.Provider,{value:B},ue):ue,[V,ue,B])}const E=x.memo(k);if(E.WrappedComponent=b,E.displayName=k.displayName=P,f){const C=x.forwardRef(function(F,V){return x.createElement(E,{...F,reactReduxForwardedRef:V})});return C.displayName=P,C.WrappedComponent=b,aj(C,b)}return aj(E,b)}}var MR=Mne;function Tne(e){const{children:t,context:n,serverState:a,store:s}=e,o=x.useMemo(()=>{const f=IR(s);return{store:s,subscription:f,getServerState:a?()=>a:void 0}},[s,a]),l=x.useMemo(()=>s.getState(),[s]);pp(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==s.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,l]);const c=n||OR;return x.createElement(c.Provider,{value:o},t)}var TR=Tne,Rne=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function _ne(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function PN(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(Rne.has(a)){if(e[a]==null&&t[a]==null)continue;if(!fm(e[a],t[a]))return!1}else if(!_ne(e[a],t[a]))return!1;return!0}function EN(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:vR}function AN(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:vR}var RR=(e,t,n)=>pT(e,"xAxis",EN(e,t),n),_R=(e,t,n)=>mT(e,"xAxis",EN(e,t),n),$R=(e,t,n)=>pT(e,"yAxis",AN(e,t),n),FR=(e,t,n)=>mT(e,"yAxis",AN(e,t),n),$ne=Pe([tr,RR,$R,_R,FR],(e,t,n,a,s)=>xo(e,"xAxis")?Um(t,a,!1):Um(n,s,!1)),Fne=(e,t)=>t,LR=Pe([WM,Fne],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),zR=e=>{var t=tr(e),n=xo(t,"xAxis");return n?"yAxis":"xAxis"},Lne=(e,t)=>{var n=zR(e);return n==="yAxis"?AN(e,t):EN(e,t)},zne=(e,t,n)=>QM(e,zR(e),Lne(e,t),n),Une=Pe([LR,zne],(e,t)=>{var n;if(!(e==null||t==null)){var{stackId:a}=e,s=zw(e);if(!(a==null||s==null)){var o=(n=t[a])===null||n===void 0?void 0:n.stackedData,l=o?.find(c=>c.key===s);if(l!=null)return l.map(c=>[c[0],c[1]])}}}),Bne=Pe([tr,RR,$R,_R,FR,Une,eY,$ne,LR,hY],(e,t,n,a,s,o,l,c,f,h)=>{var{chartData:u,dataStartIndex:m,dataEndIndex:p}=l;if(!(f==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||a==null||s==null||a.length===0||s.length===0||c==null)){var{data:v}=f,j;if(v&&v.length>0?j=v:j=u?.slice(m,p+1),j!=null)return iae({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataStartIndex:m,areaSettings:f,stackedData:o,displayedData:j,chartBaseValue:h,bandSize:c})}}),Vne=["id"],qne=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},il.apply(null,arguments)}function UR(e,t){if(e==null)return{};var n,a,s=Gne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Gne(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function oI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(n),!0).forEach(function(a){Hne(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Hne(e,t,n){return(t=Wne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wne(e){var t=Kne(e,"string");return typeof t=="symbol"?t:t+""}function Kne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gp(e,t){return e&&e!=="none"?e:t}var Yne=e=>{var{dataKey:t,name:n,stroke:a,fill:s,legendType:o,hide:l}=e;return[{inactive:l,dataKey:t,type:o,color:gp(a,s),value:ng(n,t),payload:e}]},Xne=x.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,unit:f,tooltipType:h,id:u}=e,m={dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:void 0,name:ng(l,t),hide:c,type:h,color:gp(a,o),unit:f,graphicalItemId:u}};return x.createElement(mR,{tooltipEntrySettings:m})});function Jne(e){var{clipPathId:t,points:n,props:a}=e,{needClip:s,dot:o,dataKey:l}=a,c=ba(a);return x.createElement(yte,{points:n,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:l,baseProps:c,needClip:s,clipPathId:t})}function Qne(e){var{showLabels:t,children:n,points:a}=e,s=a.map(o=>{var l,c,f={x:(l=o.x)!==null&&l!==void 0?l:0,y:(c=o.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return xc(xc({},f),{},{value:o.value,payload:o.payload,parentViewBox:void 0,viewBox:f,fill:void 0})});return x.createElement(TZ,{value:t?s:void 0},n)}function iI(e){var{points:t,baseLine:n,needClip:a,clipPathId:s,props:o}=e,{layout:l,type:c,stroke:f,connectNulls:h,isRange:u}=o,{id:m}=o,p=UR(o,Vne),v=ba(p),j=zn(p);return x.createElement(x.Fragment,null,t?.length>1&&x.createElement(bn,{clipPath:a?"url(#clipPath-".concat(s,")"):void 0},x.createElement(wc,il({},j,{id:m,points:t,connectNulls:h,type:c,baseLine:n,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&x.createElement(wc,il({},v,{className:"recharts-area-curve",layout:l,type:c,connectNulls:h,fill:"none",points:t})),f!=="none"&&u&&x.createElement(wc,il({},v,{className:"recharts-area-curve",layout:l,type:c,connectNulls:h,fill:"none",points:n}))),x.createElement(Jne,{points:t,props:p,clipPathId:s}))}function Zne(e){var t,n,{alpha:a,baseLine:s,points:o,strokeWidth:l}=e,c=(t=o[0])===null||t===void 0?void 0:t.y,f=(n=o[o.length-1])===null||n===void 0?void 0:n.y;if(!xr(c)||!xr(f))return null;var h=a*Math.abs(c-f),u=Math.max(...o.map(m=>m.x||0));return lt(s)?u=Math.max(s,u):s&&Array.isArray(s)&&s.length&&(u=Math.max(...s.map(m=>m.x||0),u)),lt(u)?x.createElement("rect",{x:0,y:c<f?c:c-h,width:u+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}function eae(e){var t,n,{alpha:a,baseLine:s,points:o,strokeWidth:l}=e,c=(t=o[0])===null||t===void 0?void 0:t.x,f=(n=o[o.length-1])===null||n===void 0?void 0:n.x;if(!xr(c)||!xr(f))return null;var h=a*Math.abs(c-f),u=Math.max(...o.map(m=>m.y||0));return lt(s)?u=Math.max(s,u):s&&Array.isArray(s)&&s.length&&(u=Math.max(...s.map(m=>m.y||0),u)),lt(u)?x.createElement("rect",{x:c<f?c:c-h,y:0,width:h,height:Math.floor(u+(l?parseInt("".concat(l),10):1))}):null}function tae(e){var{alpha:t,layout:n,points:a,baseLine:s,strokeWidth:o}=e;return n==="vertical"?x.createElement(Zne,{alpha:t,points:a,baseLine:s,strokeWidth:o}):x.createElement(eae,{alpha:t,points:a,baseLine:s,strokeWidth:o})}function rae(e){var{needClip:t,clipPathId:n,props:a,previousPointsRef:s,previousBaselineRef:o}=e,{points:l,baseLine:c,isAnimationActive:f,animationBegin:h,animationDuration:u,animationEasing:m,onAnimationStart:p,onAnimationEnd:v}=a,j=x.useMemo(()=>({points:l,baseLine:c}),[l,c]),y=mg(j,"recharts-area-"),b=qq(),[N,P]=x.useState(!1),A=!N,k=x.useCallback(()=>{typeof v=="function"&&v(),P(!1)},[v]),I=x.useCallback(()=>{typeof p=="function"&&p(),P(!0)},[p]);if(b==null)return null;var E=s.current,O=o.current;return x.createElement(Qne,{showLabels:A,points:l},a.children,x.createElement(hg,{animationId:y,begin:h,duration:u,isActive:f,easing:m,onAnimationEnd:k,onAnimationStart:I,key:y},C=>{if(E){var M=E.length/l.length,F=C===1?l:l.map((T,L)=>{var U=Math.floor(L*M);if(E[U]){var J=E[U];return xc(xc({},T),{},{x:xn(J.x,T.x,C),y:xn(J.y,T.y,C)})}return T}),V;return lt(c)?V=xn(O,c,C):ln(c)||ls(c)?V=xn(O,0,C):V=c.map((T,L)=>{var U=Math.floor(L*M);if(Array.isArray(O)&&O[U]){var J=O[U];return xc(xc({},T),{},{x:xn(J.x,T.x,C),y:xn(J.y,T.y,C)})}return T}),C>0&&(s.current=F,o.current=V),x.createElement(iI,{points:F,baseLine:V,needClip:t,clipPathId:n,props:a})}return C>0&&(s.current=l,o.current=c),x.createElement(bn,null,f&&x.createElement("defs",null,x.createElement("clipPath",{id:"animationClipPath-".concat(n)},x.createElement(tae,{alpha:C,points:l,baseLine:c,layout:b,strokeWidth:a.strokeWidth}))),x.createElement(bn,{clipPath:"url(#animationClipPath-".concat(n,")")},x.createElement(iI,{points:l,baseLine:c,needClip:t,clipPathId:n,props:a})))}),x.createElement(sR,{label:a.label}))}function nae(e){var{needClip:t,clipPathId:n,props:a}=e,s=x.useRef(null),o=x.useRef();return x.createElement(rae,{needClip:t,clipPathId:n,props:a,previousPointsRef:s,previousBaselineRef:o})}class aae extends x.PureComponent{render(){var{hide:t,dot:n,points:a,className:s,top:o,left:l,needClip:c,xAxisId:f,yAxisId:h,width:u,height:m,id:p,baseLine:v,zIndex:j}=this.props;if(t)return null;var y=Yt("recharts-area",s),b=p,{r:N,strokeWidth:P}=Fre(n),A=hR(n),k=N*2+P,I=c?"url(#clipPath-".concat(A?"":"dots-").concat(b,")"):void 0;return x.createElement(fs,{zIndex:j},x.createElement(bn,{className:y},c&&x.createElement("defs",null,x.createElement($re,{clipPathId:b,xAxisId:f,yAxisId:h}),!A&&x.createElement("clipPath",{id:"clipPath-dots-".concat(b)},x.createElement("rect",{x:l-k/2,y:o-k/2,width:u+k,height:m+k}))),x.createElement(nae,{needClip:c,clipPathId:b,props:this.props})),x.createElement(WA,{points:a,mainColor:gp(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}),this.props.isRange&&Array.isArray(v)&&x.createElement(WA,{points:v,mainColor:gp(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}))}}var BR={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:vn.area};function sae(e){var t,n=jn(e,BR),{activeDot:a,animationBegin:s,animationDuration:o,animationEasing:l,connectNulls:c,dot:f,fill:h,fillOpacity:u,hide:m,isAnimationActive:p,legendType:v,stroke:j,xAxisId:y,yAxisId:b}=n,N=UR(n,qne),P=Gc(),A=FT(),{needClip:k}=PR(y,b),I=ra(),{points:E,isRange:O,baseLine:C}=(t=mt(U=>Bne(U,e.id,I)))!==null&&t!==void 0?t:{},M=jN();if(P!=="horizontal"&&P!=="vertical"||M==null||A!=="AreaChart"&&A!=="ComposedChart")return null;var{height:F,width:V,x:T,y:L}=M;return!E||!E.length?null:x.createElement(aae,il({},N,{activeDot:a,animationBegin:s,animationDuration:o,animationEasing:l,baseLine:C,connectNulls:c,dot:f,fill:h,fillOpacity:u,height:F,hide:m,layout:P,isAnimationActive:p==="auto"?!af.isSsr:p,isRange:O,legendType:v,needClip:k,points:E,stroke:j,width:V,left:T,top:L,xAxisId:y,yAxisId:b}))}var oae=(e,t,n,a,s)=>{var o=n??t;if(lt(o))return o;var l=e==="horizontal"?s:a,c=l.scale.domain();if(l.type==="number"){var f=Math.max(c[0],c[1]),h=Math.min(c[0],c[1]);return o==="dataMin"?h:o==="dataMax"||f<0?f:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]};function iae(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:a},stackedData:s,layout:o,chartBaseValue:l,xAxis:c,yAxis:f,displayedData:h,dataStartIndex:u,xAxisTicks:m,yAxisTicks:p,bandSize:v}=e,j=s&&s.length,y=oae(o,l,n,c,f),b=o==="horizontal",N=!1,P=h.map((k,I)=>{var E,O,C;if(j)C=s[u+I];else{var M=fr(k,a);Array.isArray(M)?(C=M,N=!0):C=[y,M]}var F=(E=(O=C)===null||O===void 0?void 0:O[1])!==null&&E!==void 0?E:null,V=F==null||j&&!t&&fr(k,a)==null;return b?{x:Wk({axis:c,ticks:m,bandSize:v,entry:k,index:I}),y:V?null:f.scale(F),value:C,payload:k}:{x:V?null:c.scale(F),y:Wk({axis:f,ticks:p,bandSize:v,entry:k,index:I}),value:C,payload:k}}),A;return j||N?A=P.map(k=>{var I=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:I!=null&&k.y!=null?f.scale(I):null,payload:k.payload}:{x:I!=null?c.scale(I):null,y:k.y,payload:k.payload}}):A=b?f.scale(y):c.scale(y),{points:P,baseLine:A,isRange:N}}function lae(e){var t=jn(e,BR),n=ra();return x.createElement(pR,{id:t.id,type:"area"},a=>x.createElement(x.Fragment,null,x.createElement(See,{legendPayload:Yne(t)}),x.createElement(Xne,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),x.createElement(Fee,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:cq(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),x.createElement(sae,il({},t,{id:a}))))}var VR=x.memo(lae,PN);VR.displayName="Area";var cae="Invariant failed";function dae(e,t){throw new Error(cae)}var uae=["domain","range"],fae=["domain","range"];function lI(e,t){if(e==null)return{};var n,a,s=hae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function hae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function cI(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function qR(e,t){if(e===t)return!0;var{domain:n,range:a}=e,s=lI(e,uae),{domain:o,range:l}=t,c=lI(t,fae);return!cI(n,o)||!cI(a,l)?!1:PN(s,c)}var mae=["dangerouslySetInnerHTML","ticks","scale"],pae=["id","scale"];function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sj.apply(null,arguments)}function dI(e,t){if(e==null)return{};var n,a,s=gae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function gae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function xae(e){var t=vr(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?t(Ste(e)):n.current!==e&&t(Cte({prev:n.current,next:e})),n.current=e},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(t(kte(n.current)),n.current=null)},[t]),null}var vae=e=>{var{xAxisId:t,className:n}=e,a=mt(f4),s=ra(),o="xAxis",l=mt(N=>hT(N,o,t,s)),c=mt(N=>sX(N,t)),f=mt(N=>uX(N,t)),h=mt(N=>qM(N,t));if(c==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:u,ticks:m,scale:p}=e,v=dI(e,mae),{id:j,scale:y}=h,b=dI(h,pae);return x.createElement(SN,sj({},v,b,{x:f.x,y:f.y,width:c.width,height:c.height,className:Yt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:l,axisType:o}))},yae={allowDataOverflow:rn.allowDataOverflow,allowDecimals:rn.allowDecimals,allowDuplicatedCategory:rn.allowDuplicatedCategory,angle:rn.angle,axisLine:ao.axisLine,height:rn.height,hide:!1,includeHidden:rn.includeHidden,interval:rn.interval,minTickGap:rn.minTickGap,mirror:rn.mirror,orientation:rn.orientation,padding:rn.padding,reversed:rn.reversed,scale:rn.scale,tick:rn.tick,tickCount:rn.tickCount,tickLine:ao.tickLine,tickSize:ao.tickSize,type:rn.type,xAxisId:0},bae=e=>{var t=jn(e,yae);return x.createElement(x.Fragment,null,x.createElement(xae,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(vae,t))},GR=x.memo(bae,qR);GR.displayName="XAxis";var jae=["dangerouslySetInnerHTML","ticks","scale"],wae=["id","scale"];function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oj.apply(null,arguments)}function uI(e,t){if(e==null)return{};var n,a,s=Nae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Nae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Sae(e){var t=vr(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?t(Pte(e)):n.current!==e&&t(Ete({prev:n.current,next:e})),n.current=e},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(t(Ate(n.current)),n.current=null)},[t]),null}var Cae=e=>{var{yAxisId:t,className:n,width:a,label:s}=e,o=x.useRef(null),l=x.useRef(null),c=mt(f4),f=ra(),h=vr(),u="yAxis",m=mt(E=>mX(E,t)),p=mt(E=>hX(E,t)),v=mt(E=>hT(E,u,t,f)),j=mt(E=>GM(E,t));if(x.useLayoutEffect(()=>{if(!(a!=="auto"||!m||vN(s)||x.isValidElement(s)||j==null)){var E=o.current;if(E){var O=E.getCalculatedWidth();Math.round(m.width)!==Math.round(O)&&h(Ite({id:t,width:O}))}}},[v,m,h,s,t,a,j]),m==null||p==null||j==null)return null;var{dangerouslySetInnerHTML:y,ticks:b,scale:N}=e,P=uI(e,jae),{id:A,scale:k}=j,I=uI(j,wae);return x.createElement(SN,oj({},P,I,{ref:o,labelRef:l,x:p.x,y:p.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:m.width,height:m.height,className:Yt("recharts-".concat(u," ").concat(u),n),viewBox:c,ticks:v,axisType:u}))},kae={allowDataOverflow:nn.allowDataOverflow,allowDecimals:nn.allowDecimals,allowDuplicatedCategory:nn.allowDuplicatedCategory,angle:nn.angle,axisLine:ao.axisLine,hide:!1,includeHidden:nn.includeHidden,interval:nn.interval,minTickGap:nn.minTickGap,mirror:nn.mirror,orientation:nn.orientation,padding:nn.padding,reversed:nn.reversed,scale:nn.scale,tick:nn.tick,tickCount:nn.tickCount,tickLine:ao.tickLine,tickSize:ao.tickSize,type:nn.type,width:nn.width,yAxisId:0},Pae=e=>{var t=jn(e,kae);return x.createElement(x.Fragment,null,x.createElement(Sae,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement(Cae,t))},HR=x.memo(Pae,qR);HR.displayName="YAxis";var Eae=(e,t)=>t,IN=Pe([Eae,tr,BM,Xr,DT,So,AJ,un],_J),DN=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},WR=Ba("mouseClick"),KR=tf();KR.startListening({actionCreator:WR,effect:(e,t)=>{var n=e.payload,a=IN(t.getState(),DN(n));a?.activeIndex!=null&&t.dispatch(EX({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var ij=Ba("mouseMove"),YR=tf(),em=null;YR.startListening({actionCreator:ij,effect:(e,t)=>{var n=e.payload;em!==null&&cancelAnimationFrame(em);var a=DN(n);em=requestAnimationFrame(()=>{var s=t.getState(),o=lN(s,s.tooltip.settings.shared);if(o==="axis"){var l=IN(s,a);l?.activeIndex!=null?t.dispatch(NT({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(wT())}em=null})}});function Aae(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var fI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},XR=ta({name:"rootProps",initialState:fI,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:fI.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Iae=XR.reducer,{updateOptions:Dae}=XR.actions,JR=ta({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Oae}=JR.actions,Mae=JR.reducer,QR=Ba("keyDown"),ZR=Ba("focus"),ON=tf();ON.startListening({actionCreator:QR,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var l=cN(s,ed(n),mf(n),xf(n)),c=l==null?-1:Number(l);if(!(!Number.isFinite(c)||c<0)){var f=So(n);if(o==="Enter"){var h=cp(n,"axis","hover",String(s.index));t.dispatch(Jb({active:!s.active,activeIndex:s.index,activeCoordinate:h}));return}var u=vX(n),m=u==="left-to-right"?1:-1,p=o==="ArrowRight"?1:-1,v=c+p*m;if(!(f==null||v>=f.length||v<0)){var j=cp(n,"axis","hover",String(v));t.dispatch(Jb({active:!0,activeIndex:v.toString(),activeCoordinate:j}))}}}}}});ON.startListening({actionCreator:ZR,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var o="0",l=cp(n,"axis","hover",String(o));t.dispatch(Jb({active:!0,activeIndex:o,activeCoordinate:l}))}}}});var Ta=Ba("externalEvent"),e_=tf(),ky=new Map;e_.startListening({actionCreator:Ta,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var s=a.type,o=ky.get(s);o!==void 0&&cancelAnimationFrame(o);var l=requestAnimationFrame(()=>{try{var c=t.getState(),f={activeCoordinate:mJ(c),activeDataKey:RT(c),activeIndex:Mc(c),activeLabel:TT(c),activeTooltipIndex:Mc(c),isTooltipActive:pJ(c)};n(f,a)}finally{ky.delete(s)}});ky.set(s,l)}}});var Tae=Pe([Qc],e=>e.tooltipItemPayloads),Rae=Pe([Tae,gf,(e,t)=>t,(e,t,n)=>n],(e,t,n,a)=>{var s=e.find(c=>c.settings.graphicalItemId===a);if(s!=null){var{positions:o}=s;if(o!=null){var l=t(o,n);return l}}}),t_=Ba("touchMove"),r_=tf();r_.startListening({actionCreator:t_,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),s=lN(a,a.tooltip.settings.shared);if(s==="axis"){var o=n.touches[0];if(o==null)return;var l=IN(a,DN({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&t.dispatch(NT({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(s==="item"){var c,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var u=h.getAttribute(d4),m=(c=h.getAttribute(u4))!==null&&c!==void 0?c:void 0,p=Zc(a).find(y=>y.id===m);if(u==null||p==null||m==null)return;var{dataKey:v}=p,j=Rae(a,u,m);t.dispatch(jT({activeDataKey:v,activeIndex:u,activeCoordinate:j,activeGraphicalItemId:m}))}}}});var _ae=D5({brush:Lte,cartesianAxis:Dte,chartData:hQ,errorBars:_re,graphicalItems:_ee,layout:Z9,legend:aG,options:lQ,polarAxis:GZ,polarOptions:Mae,referenceElements:Hte,rootProps:Iae,tooltip:AX,zIndex:XJ}),$ae=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return S9({reducer:_ae,preloadedState:t,middleware:a=>{var s;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([KR.middleware,YR.middleware,ON.middleware,e_.middleware,r_.middleware])},enhancers:a=>{var s=a;return typeof a=="function"&&(s=a()),s.concat(W5({type:"raf"}))},devTools:{serialize:{replacer:Aae},name:"recharts-".concat(n)}})};function n_(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,s=ra(),o=x.useRef(null);if(s)return n;o.current==null&&(o.current=$ae(t,a));var l=Xj;return x.createElement(TR,{context:l,store:o.current},n)}function Fae(e){var{layout:t,margin:n}=e,a=vr(),s=ra();return x.useEffect(()=>{s||(a(X9(t)),a(Y9(n)))},[a,s,t,n]),null}var a_=x.memo(Fae,PN);function s_(e){var t=vr();return x.useEffect(()=>{t(Dae(e))},[t,e]),null}function hI(e){var{zIndex:t,isPanorama:n}=e,a=x.useRef(null),s=vr();return x.useLayoutEffect(()=>(a.current&&s(KJ({zIndex:t,element:a.current,isPanorama:n})),()=>{s(YJ({zIndex:t,isPanorama:n}))}),[s,t,n]),x.createElement("g",{tabIndex:-1,ref:a})}function mI(e){var{children:t,isPanorama:n}=e,a=mt(FJ);if(!a||a.length===0)return t;var s=a.filter(l=>l<0),o=a.filter(l=>l>0);return x.createElement(x.Fragment,null,s.map(l=>x.createElement(hI,{key:l,zIndex:l,isPanorama:n})),t,o.map(l=>x.createElement(hI,{key:l,zIndex:l,isPanorama:n})))}var Lae=["children"];function zae(e,t){if(e==null)return{};var n,a,s=Uae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Uae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xp.apply(null,arguments)}var Bae={width:"100%",height:"100%",display:"block"},Vae=x.forwardRef((e,t)=>{var n=v4(),a=y4(),s=I4();if(!Is(n)||!Is(a))return null;var{children:o,otherAttributes:l,title:c,desc:f}=e,h,u;return l!=null&&(typeof l.tabIndex=="number"?h=l.tabIndex:h=s?0:void 0,typeof l.role=="string"?u=l.role:u=s?"application":void 0),x.createElement(KO,xp({},l,{title:c,desc:f,role:u,tabIndex:h,width:n,height:a,style:Bae,ref:t}),o)}),qae=e=>{var{children:t}=e,n=mt(ig);if(!n)return null;var{width:a,height:s,y:o,x:l}=n;return x.createElement(KO,{width:a,height:s,x:l,y:o},t)},pI=x.forwardRef((e,t)=>{var{children:n}=e,a=zae(e,Lae),s=ra();return s?x.createElement(qae,null,x.createElement(mI,{isPanorama:!0},n)):x.createElement(Vae,xp({ref:t},a),x.createElement(mI,{isPanorama:!1},n))});function Gae(){var e=vr(),[t,n]=x.useState(null),a=mt(pq);return x.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),o=s.width/t.offsetWidth;xr(o)&&o!==a&&e(Q9(o))}},[t,e,a]),n}function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Hae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(n),!0).forEach(function(a){Wae(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Wae(e,t,n){return(t=Kae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kae(e){var t=Yae(e,"string");return typeof t=="symbol"?t:t+""}function Yae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yl.apply(null,arguments)}var Xae=()=>(wQ(),null);function vp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Jae=x.forwardRef((e,t)=>{var n,a,s=x.useRef(null),[o,l]=x.useState({containerWidth:vp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:vp((a=e.style)===null||a===void 0?void 0:a.height)}),c=x.useCallback((h,u)=>{l(m=>{var p=Math.round(h),v=Math.round(u);return m.containerWidth===p&&m.containerHeight===v?m:{containerWidth:p,containerHeight:v}})},[]),f=x.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:u,height:m}=h.getBoundingClientRect();c(u,m);var p=j=>{var{width:y,height:b}=j[0].contentRect;c(y,b)},v=new ResizeObserver(p);v.observe(h),s.current=v}},[t,c]);return x.useEffect(()=>()=>{var h=s.current;h?.disconnect()},[c]),x.createElement(x.Fragment,null,x.createElement(cg,{width:o.containerWidth,height:o.containerHeight}),x.createElement("div",yl({ref:f},e)))}),Qae=x.forwardRef((e,t)=>{var{width:n,height:a}=e,[s,o]=x.useState({containerWidth:vp(n),containerHeight:vp(a)}),l=x.useCallback((f,h)=>{o(u=>{var m=Math.round(f),p=Math.round(h);return u.containerWidth===m&&u.containerHeight===p?u:{containerWidth:m,containerHeight:p}})},[]),c=x.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null){var{width:h,height:u}=f.getBoundingClientRect();l(h,u)}},[t,l]);return x.createElement(x.Fragment,null,x.createElement(cg,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",yl({ref:c},e)))}),Zae=x.forwardRef((e,t)=>{var{width:n,height:a}=e;return x.createElement(x.Fragment,null,x.createElement(cg,{width:n,height:a}),x.createElement("div",yl({ref:t},e)))}),ese=x.forwardRef((e,t)=>{var{width:n,height:a}=e;return lo(n)||lo(a)?x.createElement(Qae,yl({},e,{ref:t})):x.createElement(Zae,yl({},e,{ref:t}))});function tse(e){return e===!0?Jae:ese}var rse=x.forwardRef((e,t)=>{var{children:n,className:a,height:s,onClick:o,onContextMenu:l,onDoubleClick:c,onMouseDown:f,onMouseEnter:h,onMouseLeave:u,onMouseMove:m,onMouseUp:p,onTouchEnd:v,onTouchMove:j,onTouchStart:y,style:b,width:N,responsive:P,dispatchTouchEvents:A=!0}=e,k=x.useRef(null),I=vr(),[E,O]=x.useState(null),[C,M]=x.useState(null),F=Gae(),V=ow(),T=V?.width>0?V.width:N,L=V?.height>0?V.height:s,U=x.useCallback(pe=>{F(pe),typeof t=="function"&&t(pe),O(pe),M(pe),pe!=null&&(k.current=pe)},[F,t,O,M]),J=x.useCallback(pe=>{I(WR(pe)),I(Ta({handler:o,reactEvent:pe}))},[I,o]),q=x.useCallback(pe=>{I(ij(pe)),I(Ta({handler:h,reactEvent:pe}))},[I,h]),W=x.useCallback(pe=>{I(wT()),I(Ta({handler:u,reactEvent:pe}))},[I,u]),z=x.useCallback(pe=>{I(ij(pe)),I(Ta({handler:m,reactEvent:pe}))},[I,m]),K=x.useCallback(()=>{I(ZR())},[I]),B=x.useCallback(pe=>{I(QR(pe.key))},[I]),R=x.useCallback(pe=>{I(Ta({handler:l,reactEvent:pe}))},[I,l]),H=x.useCallback(pe=>{I(Ta({handler:c,reactEvent:pe}))},[I,c]),Y=x.useCallback(pe=>{I(Ta({handler:f,reactEvent:pe}))},[I,f]),ee=x.useCallback(pe=>{I(Ta({handler:p,reactEvent:pe}))},[I,p]),me=x.useCallback(pe=>{I(Ta({handler:y,reactEvent:pe}))},[I,y]),De=x.useCallback(pe=>{A&&I(t_(pe)),I(Ta({handler:j,reactEvent:pe}))},[I,A,j]),Se=x.useCallback(pe=>{I(Ta({handler:v,reactEvent:pe}))},[I,v]),We=tse(P);return x.createElement(VT.Provider,{value:E},x.createElement(s7.Provider,{value:C},x.createElement(We,{width:T??b?.width,height:L??b?.height,className:Yt("recharts-wrapper",a),style:Hae({position:"relative",cursor:"default",width:T,height:L},b),onClick:J,onContextMenu:R,onDoubleClick:H,onFocus:K,onKeyDown:B,onMouseDown:Y,onMouseEnter:q,onMouseLeave:W,onMouseMove:z,onMouseUp:ee,onTouchEnd:Se,onTouchMove:De,onTouchStart:me,ref:U},x.createElement(Xae,null),n)))}),nse=["width","height","responsive","children","className","style","compact","title","desc"];function ase(e,t){if(e==null)return{};var n,a,s=sse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function sse(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var o_=x.forwardRef((e,t)=>{var{width:n,height:a,responsive:s,children:o,className:l,style:c,compact:f,title:h,desc:u}=e,m=ase(e,nse),p=ba(m);return f?x.createElement(x.Fragment,null,x.createElement(cg,{width:n,height:a}),x.createElement(pI,{otherAttributes:p,title:h,desc:u},o)):x.createElement(rse,{className:l,style:c,width:n,height:a,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(pI,{otherAttributes:p,title:h,desc:u,ref:t},x.createElement(Kte,null,o)))});function lj(){return lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lj.apply(null,arguments)}var ose={top:5,right:5,bottom:5,left:5},ise={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:ose,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},lse=x.forwardRef(function(t,n){var a,s=jn(t.categoricalChartProps,ise),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,u={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return x.createElement(n_,{preloadedState:{options:u},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:o},x.createElement(bR,{chartData:h.data}),x.createElement(a_,{layout:s.layout,margin:s.margin}),x.createElement(s_,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),x.createElement(o_,lj({},s,{ref:n})))});function cse(e){var t=vr();return x.useEffect(()=>{t(Oae(e))},[t,e]),null}var dse=["layout"];function cj(){return cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cj.apply(null,arguments)}function use(e,t){if(e==null)return{};var n,a,s=fse(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function fse(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var hse={top:5,right:5,bottom:5,left:5},i_={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:hse,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},mse=x.forwardRef(function(t,n){var a,s=jn(t.categoricalChartProps,i_),{layout:o}=s,l=use(s,dse),{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:u}=t,m={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:u,eventEmitter:void 0};return x.createElement(n_,{preloadedState:{options:m},reduxStoreName:(a=s.id)!==null&&a!==void 0?a:c},x.createElement(bR,{chartData:s.data}),x.createElement(a_,{layout:o,margin:s.margin}),x.createElement(s_,{baseValue:void 0,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),x.createElement(cse,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),x.createElement(o_,cj({},l,{ref:n})))});function xI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function vI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(n),!0).forEach(function(a){pse(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pse(e,t,n){return(t=gse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gse(e){var t=xse(e,"string");return typeof t=="symbol"?t:t+""}function xse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vse=["item"],yse=vI(vI({},i_),{},{layout:"centric",startAngle:0,endAngle:360}),bse=x.forwardRef((e,t)=>{var n=jn(e,yse);return x.createElement(mse,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:vse,tooltipPayloadSearcher:qT,categoricalChartProps:n,ref:t})}),jse=["axis"],wse=x.forwardRef((e,t)=>x.createElement(lse,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jse,tooltipPayloadSearcher:qT,categoricalChartProps:e,ref:t}));const yI="http://localhost:5006/api",tm=["#FF6600","#000000","#666666","#999999","#CCCCCC"],rm=({title:e,value:t,icon:n,trend:a,color:s,subtitle:o})=>r.jsx(Be,{className:"overflow-hidden border-none shadow-md hover:shadow-lg transition-shadow bg-white",children:r.jsxs(Pt,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:e}),r.jsx("h3",{className:"text-2xl font-black text-gray-900",children:t}),o&&r.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:o})]}),r.jsx("div",{className:`p-3 rounded-xl ${s} bg-opacity-10 text-${s.split("-")[1]}-600`,children:r.jsx(n,{size:24})})]}),a&&r.jsxs("div",{className:"mt-4 flex items-center text-xs font-bold",children:[a>0?r.jsxs("span",{className:"text-green-500 flex items-center bg-green-50 px-2 py-0.5 rounded-full",children:[r.jsx(gu,{size:14,className:"mr-1"})," +",a,"%"]}):r.jsxs("span",{className:"text-red-500 flex items-center bg-red-50 px-2 py-0.5 rounded-full",children:[r.jsx(dD,{size:14,className:"mr-1"})," ",a,"%"]}),r.jsx("span",{className:"text-gray-400 ml-2 font-medium",children:"vs ayer"})]})]})}),Nse=()=>{const e=Tt(),[t,n]=x.useState(!0),[a,s]=x.useState(!1),[o,l]=x.useState({salesToday:0,purchasesToday:0,cxpPending:0,lowStockCount:0,recentSales:[]}),[c,f]=x.useState({salesByHour:[],topProducts:[],cashStatus:[]});x.useEffect(()=>{(async()=>{try{n(!0);const[m,p]=await Promise.all([fetch(`${yI}/Dashboard/Summary`),fetch(`${yI}/Dashboard/Charts`)]);if(m.ok){const v=await m.json();l(v)}if(p.ok){const v=await p.json();f(v)}}catch(m){console.error("Dashboard error:",m)}finally{n(!1),setTimeout(()=>s(!0),100)}})()},[]);const h=u=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(u);return r.jsxs("div",{className:"p-6 space-y-8 max-w-[1600px] mx-auto transition-colors duration-500",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ll,{className:"text-hd-orange",size:24}),r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Consola Administrativa"})]}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Anlisis de tiempo real y gestin operativa del sistema."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(re,{onClick:()=>e("/launchpad"),className:"bg-black hover:bg-gray-800 text-white font-black uppercase tracking-tighter italic border-b-4 border-hd-orange",children:[r.jsx(cl,{size:18,className:"mr-2"})," Men de Mdulos"]}),r.jsxs("div",{className:"bg-white border px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold text-gray-600 shadow-sm",children:[r.jsx(gm,{size:16,className:"text-hd-orange"}),new Date().toLocaleDateString("es-DO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(rm,{title:"Ventas de Hoy",value:h(o.salesToday),icon:oo,color:"bg-blue-500",subtitle:"Subtotal + ITBIS acumulado"}),r.jsx(rm,{title:"Compras realizadas",value:h(o.purchasesToday),icon:Qo,color:"bg-green-500",subtitle:"Convertido a DOP"}),r.jsx(rm,{title:"CXP - Saldo Pendiente",value:h(o.cxpPending),icon:Wr,color:"bg-orange-500",subtitle:"Deuda total a proveedores"}),r.jsx(rm,{title:"Stock Crtico",value:o.lowStockCount,icon:pu,color:"bg-red-500",subtitle:"Bajo stock de seguridad"})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[r.jsxs(Be,{className:"xl:col-span-2 border-none shadow-xl bg-white overflow-hidden",children:[r.jsx(gt,{className:"flex flex-row items-center justify-between border-b bg-gray-50/30 px-6 py-4",children:r.jsxs(vt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(Qo,{className:"text-hd-orange",size:20}),"Flujo de Ventas (ltimas 24h)"]})}),r.jsx(Pt,{className:"p-6 pt-8",children:r.jsx("div",{className:"w-full h-[300px]",style:{width:"100%",height:300},children:a&&c.salesByHour.length>0?r.jsx("div",{style:{width:"100%",height:300},children:r.jsx(aP,{children:r.jsxs(wse,{data:c.salesByHour.map(u=>({hour:`${u.Hour}:00`,amount:u.Amount})),children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#FF6600",stopOpacity:.1}),r.jsx("stop",{offset:"95%",stopColor:"#FF6600",stopOpacity:0})]})}),r.jsx(CR,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),r.jsx(GR,{dataKey:"hour",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#9CA3AF"},dy:10}),r.jsx(HR,{hide:!0}),r.jsx(sA,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1)"},formatter:u=>[h(u),"Ventas"]}),r.jsx(VR,{type:"monotone",dataKey:"amount",stroke:"#FF6600",strokeWidth:3,fillOpacity:1,fill:"url(#colorSales)"})]})})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 gap-2 border-2 border-dashed border-gray-100 rounded-xl",children:[r.jsx(Qo,{size:32}),r.jsx("p",{className:"text-sm font-medium italic",children:"Sin actividad de ventas en las ltimas 24h"})]})})})]}),r.jsxs(Be,{className:"border-none shadow-xl bg-white overflow-hidden",children:[r.jsx(gt,{className:"border-b bg-gray-50/30 px-6 py-4",children:r.jsxs(vt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(RC,{className:"text-hd-orange",size:20}),"Distribucin de Efectivo"]})}),r.jsxs(Pt,{className:"p-6 flex flex-col items-center justify-center",children:[a&&c.cashStatus.length>0?r.jsx("div",{style:{width:"100%",height:240},children:r.jsx(aP,{children:r.jsxs(bse,{children:[r.jsx(xR,{data:c.cashStatus,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"Value",children:c.cashStatus.map((u,m)=>r.jsx(Dg,{fill:tm[m%tm.length]},`cell-${m}`))}),r.jsx(sA,{})]})})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 gap-2 border-2 border-dashed border-gray-100 rounded-xl",children:[r.jsx(RC,{size:32}),r.jsx("p",{className:"text-sm font-medium italic font-mono text-center px-4",children:"Sin datos de cobros hoy"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4 w-full",children:c.cashStatus.map((u,m)=>r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:tm[m%tm.length]}}),r.jsx("span",{className:"text-[10px] uppercase font-black text-gray-400",children:u.Name||"Otros"})]}),r.jsx("span",{className:"text-sm font-black text-gray-800 ml-4",children:h(u.Value)})]},m))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(Be,{className:"lg:col-span-2 border-none shadow-xl bg-white overflow-hidden",children:[r.jsxs(gt,{className:"flex flex-row items-center justify-between border-b bg-gray-50/30 px-6 py-4",children:[r.jsxs(vt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(ll,{className:"text-hd-orange",size:20}),"Ventas del Da"]}),r.jsxs(re,{variant:"ghost",size:"sm",className:"text-hd-orange font-bold text-xs uppercase tracking-widest hover:bg-orange-50",children:["Ver todas ",r.jsx(ar,{size:14})]})]}),r.jsx(Pt,{className:"p-0",children:r.jsx("div",{className:"max-h-[400px] overflow-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 text-gray-600 text-[10px] uppercase font-black tracking-widest border-b h-12 sticky top-0 bg-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6",children:"No. Factura"}),r.jsx("th",{className:"px-6",children:"Cliente"}),r.jsx("th",{className:"px-6",children:"Hora"}),r.jsx("th",{className:"px-6 text-right",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:o.recentSales.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-400 italic font-medium",children:"No se han registrado ventas hoy."})}):o.recentSales.map(u=>r.jsxs("tr",{className:"hover:bg-gray-50/80 transition-colors group",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-black text-xs text-hd-orange bg-orange-50 px-2 py-1 rounded border border-orange-100",children:u.NumeroFactura})}),r.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-700",children:u.Cliente||"Cliente General"}),r.jsx("td",{className:"px-6 py-4 text-xs font-medium text-gray-400 italic",children:new Date(u.Fecha).toLocaleString("es-DO",{hour:"2-digit",minute:"2-digit"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"text-sm font-black text-gray-900",children:h(u.Total)})})]},u.NumeroFactura))})]})})})]}),r.jsxs(Be,{className:"border-none shadow-xl bg-white text-gray-900 overflow-hidden flex flex-col",children:[r.jsx(gt,{className:"border-b bg-gray-50/30 px-6 py-4",children:r.jsxs(vt,{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(Qo,{className:"text-hd-orange",size:20}),"Productos Ms Vendidos"]})}),r.jsx(Pt,{className:"p-6 flex-grow",children:r.jsxs("div",{className:"space-y-6",children:[c.topProducts.map((u,m)=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-end",children:[r.jsx("span",{className:"text-xs font-bold text-gray-600 truncate max-w-[200px]",children:u.Name}),r.jsxs("span",{className:"text-xs font-black text-hd-orange",children:[u.Value," unds"]})]}),r.jsx("div",{className:"h-1.5 w-full bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-hd-orange rounded-full",style:{width:`${u.Value/Math.max(...c.topProducts.map(p=>p.Value))*100}%`}})})]},m)),c.topProducts.length===0&&r.jsx("p",{className:"text-gray-500 text-sm italic text-center py-10",children:"Sin datos de productos este mes."})]})}),o.lowStockCount>0&&r.jsx("div",{className:"p-6 bg-red-600/10 border-t border-red-500/20 group cursor-pointer hover:bg-red-600/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[r.jsx(pu,{size:18}),r.jsxs("span",{className:"text-xs font-black uppercase tracking-tight",children:[o.lowStockCount," Alertas de Stock"]})]}),r.jsx(ar,{size:16,className:"text-red-500 group-hover:translate-x-1 transition-transform"})]})})]})]})]})};function Sse(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function l_(e,t){var n=x.useState(function(){return{inputs:t,result:e()}})[0],a=x.useRef(!0),s=x.useRef(n),o=a.current||!!(t&&s.current.inputs&&Sse(t,s.current.inputs)),l=o?s.current:{inputs:t,result:e()};return x.useEffect(function(){a.current=!1,s.current=l},[l]),l.result}function Cse(e,t){return l_(function(){return e},t)}var qt=l_,pt=Cse,ss=function(t){var n=t.top,a=t.right,s=t.bottom,o=t.left,l=a-o,c=s-n,f={top:n,right:a,bottom:s,left:o,width:l,height:c,x:o,y:n,center:{x:(a+o)/2,y:(s+n)/2}};return f},MN=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},bI=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},kse=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Py={top:0,right:0,bottom:0,left:0},TN=function(t){var n=t.borderBox,a=t.margin,s=a===void 0?Py:a,o=t.border,l=o===void 0?Py:o,c=t.padding,f=c===void 0?Py:c,h=ss(MN(n,s)),u=ss(bI(n,l)),m=ss(bI(u,f));return{marginBox:h,borderBox:ss(n),paddingBox:u,contentBox:m,margin:s,border:l,padding:f}},Ma=function(t){var n=t.slice(0,-2),a=t.slice(-2);if(a!=="px")return 0;var s=Number(n);return isNaN(s)&&dae(),s},Pse=function(){return{x:window.pageXOffset,y:window.pageYOffset}},yp=function(t,n){var a=t.borderBox,s=t.border,o=t.margin,l=t.padding,c=kse(a,n);return TN({borderBox:c,border:s,margin:o,padding:l})},bp=function(t,n){return n===void 0&&(n=Pse()),yp(t,n)},c_=function(t,n){var a={top:Ma(n.marginTop),right:Ma(n.marginRight),bottom:Ma(n.marginBottom),left:Ma(n.marginLeft)},s={top:Ma(n.paddingTop),right:Ma(n.paddingRight),bottom:Ma(n.paddingBottom),left:Ma(n.paddingLeft)},o={top:Ma(n.borderTopWidth),right:Ma(n.borderRightWidth),bottom:Ma(n.borderBottomWidth),left:Ma(n.borderLeftWidth)};return TN({borderBox:t,margin:a,padding:s,border:o})},d_=function(t){var n=t.getBoundingClientRect(),a=window.getComputedStyle(t);return c_(n,a)},jI=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Ese(e,t){return!!(e===t||jI(e)&&jI(t))}function Ase(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Ese(e[n],t[n]))return!1;return!0}function cn(e,t){t===void 0&&(t=Ase);var n=null;function a(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var l=e.apply(this,s);return n={lastResult:l,lastArgs:s,lastThis:this},l}return a.clear=function(){n=null},a}var Ru=function(t){var n=[],a=null,s=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];n=c,!a&&(a=requestAnimationFrame(function(){a=null,t.apply(void 0,n)}))};return s.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},s};function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jp.apply(null,arguments)}function u_(e,t){}u_.bind(null,"warn");u_.bind(null,"error");function ni(){}function Ise(e,t){return{...e,...t}}function $a(e,t,n){const a=t.map(s=>{const o=Ise(n,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){a.forEach(o=>{o()})}}const Dse="Invariant failed";class wp extends Error{}wp.prototype.toString=function(){return this.message};function Ke(e,t){throw new wp(Dse)}class Ose extends bt.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=ni,this.onWindowError=n=>{const a=this.getCallbacks();a.isDragging()&&a.tryAbort(),n.error instanceof wp&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=$a(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof wp){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Mse=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Np=e=>e+1,Tse=e=>`
  You have lifted an item in position ${Np(e.source.index)}
`,f_=(e,t)=>{const n=e.droppableId===t.droppableId,a=Np(e.index),s=Np(t.index);return n?`
      You have moved the item from position ${a}
      to position ${s}
    `:`
    You have moved the item from position ${a}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},h_=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Rse=e=>{const t=e.destination;if(t)return f_(e.source,t);const n=e.combine;return n?h_(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},wI=e=>`
  The item has returned to its starting position
  of ${Np(e.index)}
`,_se=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${wI(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${f_(e.source,t)}
    `:n?`
      You have dropped the item.
      ${h_(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${wI(e.source)}
  `},hm={dragHandleUsageInstructions:Mse,onDragStart:Tse,onDragUpdate:Rse,onDragEnd:_se},dn={x:0,y:0},yn=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ha=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ai=(e,t)=>e.x===t.x&&e.y===t.y,td=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),bl=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},_u=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),NI=(e,t)=>Math.min(...t.map(n=>_u(e,n))),m_=e=>t=>({x:e(t.x),y:e(t.y)});var $se=(e,t)=>{const n=ss({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const yf=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),SI=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Fse={top:0,right:0,bottom:0,left:0},Lse=(e,t)=>t?yf(e,t.scroll.diff.displacement):e,zse=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Use=(e,t)=>t&&t.shouldClipSubject?$se(t.pageMarginBox,e):ss(e);var Tc=({page:e,withPlaceholder:t,axis:n,frame:a})=>{const s=Lse(e.marginBox,a),o=zse(s,n,t),l=Use(o,a);return{page:e,withPlaceholder:t,active:l}},RN=(e,t)=>{e.frame||Ke();const n=e.frame,a=ha(t,n.scroll.initial),s=td(a),o={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:a,displacement:s},max:n.scroll.max}},l=Tc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:l}};const p_=cn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),g_=cn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),_g=cn(e=>Object.values(e)),Bse=cn(e=>Object.values(e));var rd=cn((e,t)=>Bse(t).filter(a=>e===a.descriptor.droppableId).sort((a,s)=>a.descriptor.index-s.descriptor.index));function _N(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function $g(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Fg=cn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Vse=({isMovingForward:e,draggable:t,destination:n,insideDestination:a,previousImpact:s})=>{if(!n.isCombineEnabled||!_N(s))return null;function l(v){const j={type:"COMBINE",combine:{draggableId:v,droppableId:n.descriptor.id}};return{...s,at:j}}const c=s.displaced.all,f=c.length?c[0]:null;if(e)return f?l(f):null;const h=Fg(t,a);if(!f){if(!h.length)return null;const v=h[h.length-1];return l(v.descriptor.id)}const u=h.findIndex(v=>v.descriptor.id===f);u===-1&&Ke();const m=u-1;if(m<0)return null;const p=h[m];return l(p.descriptor.id)},nd=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const x_={point:dn,value:0},$u={invisible:{},visible:{},all:[]},qse={displaced:$u,displacedBy:x_,at:null};var Fa=(e,t)=>n=>e<=n&&n<=t,v_=e=>{const t=Fa(e.top,e.bottom),n=Fa(e.left,e.right);return a=>{if(t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right))return!0;const o=t(a.top)||t(a.bottom),l=n(a.left)||n(a.right);if(o&&l)return!0;const f=a.top<e.top&&a.bottom>e.bottom,h=a.left<e.left&&a.right>e.right;return f&&h?!0:f&&l||h&&o}},Gse=e=>{const t=Fa(e.top,e.bottom),n=Fa(e.left,e.right);return a=>t(a.top)&&t(a.bottom)&&n(a.left)&&n(a.right)};const $N={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},y_={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Hse=e=>t=>{const n=Fa(t.top,t.bottom),a=Fa(t.left,t.right);return s=>e===$N?n(s.top)&&n(s.bottom):a(s.left)&&a(s.right)};const Wse=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:dn;return yf(e,n)},Kse=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,Yse=(e,t,n)=>n(t)(e),FN=({target:e,destination:t,viewport:n,withDroppableDisplacement:a,isVisibleThroughFrameFn:s})=>{const o=a?Wse(e,t):e;return Kse(o,t,s)&&Yse(o,n,s)},Xse=e=>FN({...e,isVisibleThroughFrameFn:v_}),b_=e=>FN({...e,isVisibleThroughFrameFn:Gse}),Jse=e=>FN({...e,isVisibleThroughFrameFn:Hse(e.destination.axis)}),Qse=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:a,visible:s}=t;if(a[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function Zse(e,t){const n=e.page.marginBox,a={top:t.point.y,right:0,bottom:0,left:t.point.x};return ss(MN(n,a))}function Fu({afterDragging:e,destination:t,displacedBy:n,viewport:a,forceShouldAnimate:s,last:o}){return e.reduce(function(c,f){const h=Zse(f,n),u=f.descriptor.id;if(c.all.push(u),!Xse({target:h,destination:t,viewport:a,withDroppableDisplacement:!0}))return c.invisible[f.descriptor.id]=!0,c;const p=Qse(u,o,s),v={draggableId:u,shouldAnimate:p};return c.visible[u]=v,c},{all:[],visible:{},invisible:{}})}function eoe(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function CI({insideDestination:e,inHomeList:t,displacedBy:n,destination:a}){const s=eoe(e,{inHomeList:t});return{displaced:$u,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:s}}}}function Sp({draggable:e,insideDestination:t,destination:n,viewport:a,displacedBy:s,last:o,index:l,forceShouldAnimate:c}){const f=nd(e,n);if(l==null)return CI({insideDestination:t,inHomeList:f,displacedBy:s,destination:n});const h=t.find(j=>j.descriptor.index===l);if(!h)return CI({insideDestination:t,inHomeList:f,displacedBy:s,destination:n});const u=Fg(e,t),m=t.indexOf(h),p=u.slice(m);return{displaced:Fu({afterDragging:p,destination:n,displacedBy:s,last:o,viewport:a.frame,forceShouldAnimate:c}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function hi(e,t){return!!t.effected[e]}var toe=({isMovingForward:e,destination:t,draggables:n,combine:a,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=a.draggableId,c=n[o].descriptor.index;return hi(o,s)?e?c:c-1:e?c+1:c},roe=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:a})=>{if(!n.length)return null;const s=a.index,o=e?s+1:s-1,l=n[0].descriptor.index,c=n[n.length-1].descriptor.index,f=t?c:c+1;return o<l||o>f?null:o},noe=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:a,destination:s,insideDestination:o,previousImpact:l,viewport:c,afterCritical:f})=>{const h=l.at;if(h||Ke(),h.type==="REORDER"){const m=roe({isMovingForward:e,isInHomeList:t,location:h.destination,insideDestination:o});return m==null?null:Sp({draggable:n,insideDestination:o,destination:s,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:m})}const u=toe({isMovingForward:e,destination:s,displaced:l.displaced,draggables:a,combine:h.combine,afterCritical:f});return u==null?null:Sp({draggable:n,insideDestination:o,destination:s,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:u})},aoe=({displaced:e,afterCritical:t,combineWith:n,displacedBy:a})=>{const s=!!(e.visible[n]||e.invisible[n]);return hi(n,t)?s?dn:td(a.point):s?a.point:dn},soe=({afterCritical:e,impact:t,draggables:n})=>{const a=$g(t);a||Ke();const s=a.draggableId,o=n[s].page.borderBox.center,l=aoe({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return yn(o,l)};const j_=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,ooe=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,LN=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,kI=({axis:e,moveRelativeTo:t,isMoving:n})=>bl(e.line,t.marginBox[e.end]+j_(e,n),LN(e,t.marginBox,n)),PI=({axis:e,moveRelativeTo:t,isMoving:n})=>bl(e.line,t.marginBox[e.start]-ooe(e,n),LN(e,t.marginBox,n)),ioe=({axis:e,moveInto:t,isMoving:n})=>bl(e.line,t.contentBox[e.start]+j_(e,n),LN(e,t.contentBox,n));var loe=({impact:e,draggable:t,draggables:n,droppable:a,afterCritical:s})=>{const o=rd(a.descriptor.id,n),l=t.page,c=a.axis;if(!o.length)return ioe({axis:c,moveInto:a.page,isMoving:l});const{displaced:f,displacedBy:h}=e,u=f.all[0];if(u){const p=n[u];if(hi(u,s))return PI({axis:c,moveRelativeTo:p.page,isMoving:l});const v=yp(p.page,h.point);return PI({axis:c,moveRelativeTo:v,isMoving:l})}const m=o[o.length-1];if(m.descriptor.id===t.descriptor.id)return l.borderBox.center;if(hi(m.descriptor.id,s)){const p=yp(m.page,td(s.displacedBy.point));return kI({axis:c,moveRelativeTo:p,isMoving:l})}return kI({axis:c,moveRelativeTo:m.page,isMoving:l})},dj=(e,t)=>{const n=e.frame;return n?yn(t,n.scroll.diff.displacement):t};const coe=({impact:e,draggable:t,droppable:n,draggables:a,afterCritical:s})=>{const o=t.page.borderBox.center,l=e.at;return!n||!l?o:l.type==="REORDER"?loe({impact:e,draggable:t,draggables:a,droppable:n,afterCritical:s}):soe({impact:e,draggables:a,afterCritical:s})};var Lg=e=>{const t=coe(e),n=e.droppable;return n?dj(n,t):t},w_=(e,t)=>{const n=ha(t,e.scroll.initial),a=td(n);return{frame:ss({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:a}}}};function EI(e,t){return e.map(n=>t[n])}function doe(e,t){for(let n=0;n<t.length;n++){const a=t[n].visible[e];if(a)return a}return null}var uoe=({impact:e,viewport:t,destination:n,draggables:a,maxScrollChange:s})=>{const o=w_(t,yn(t.scroll.current,s)),l=n.frame?RN(n,yn(n.frame.scroll.current,s)):n,c=e.displaced,f=Fu({afterDragging:EI(c.all,a),destination:n,displacedBy:e.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),h=Fu({afterDragging:EI(c.all,a),destination:l,displacedBy:e.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),u={},m={},p=[c,f,h];return c.all.forEach(j=>{const y=doe(j,p);if(y){m[j]=y;return}u[j]=!0}),{...e,displaced:{all:c.all,invisible:u,visible:m}}},foe=(e,t)=>yn(e.scroll.diff.displacement,t),zN=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const a=foe(n,e),s=ha(a,t.page.borderBox.center);return yn(t.client.borderBox.center,s)},N_=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:a,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const l=ha(n,e.page.borderBox.center),f={target:yf(e.page.borderBox,l),destination:t,withDroppableDisplacement:s,viewport:a};return o?Jse(f):b_(f)},hoe=({isMovingForward:e,draggable:t,destination:n,draggables:a,previousImpact:s,viewport:o,previousPageBorderBoxCenter:l,previousClientSelection:c,afterCritical:f})=>{if(!n.isEnabled)return null;const h=rd(n.descriptor.id,a),u=nd(t,n),m=Vse({isMovingForward:e,draggable:t,destination:n,insideDestination:h,previousImpact:s})||noe({isMovingForward:e,isInHomeList:u,draggable:t,draggables:a,destination:n,insideDestination:h,previousImpact:s,viewport:o,afterCritical:f});if(!m)return null;const p=Lg({impact:m,draggable:t,droppable:n,draggables:a,afterCritical:f});if(N_({draggable:t,destination:n,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:zN({pageBorderBoxCenter:p,draggable:t,viewport:o}),impact:m,scrollJumpRequest:null};const j=ha(p,l),y=uoe({impact:m,viewport:o,destination:n,draggables:a,maxScrollChange:j});return{clientSelection:c,impact:y,scrollJumpRequest:j}};const _n=e=>{const t=e.subject.active;return t||Ke(),t};var moe=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:a,viewport:s})=>{const o=n.subject.active;if(!o)return null;const l=n.axis,c=Fa(o[l.start],o[l.end]),f=_g(a).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>v_(s.frame)(_n(u))).filter(u=>{const m=_n(u);return e?o[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<o[l.crossAxisStart]}).filter(u=>{const m=_n(u),p=Fa(m[l.start],m[l.end]);return c(m[l.start])||c(m[l.end])||p(o[l.start])||p(o[l.end])}).sort((u,m)=>{const p=_n(u)[l.crossAxisStart],v=_n(m)[l.crossAxisStart];return e?p-v:v-p}).filter((u,m,p)=>_n(u)[l.crossAxisStart]===_n(p[0])[l.crossAxisStart]);if(!f.length)return null;if(f.length===1)return f[0];const h=f.filter(u=>Fa(_n(u)[l.start],_n(u)[l.end])(t[l.line]));return h.length===1?h[0]:h.length>1?h.sort((u,m)=>_n(u)[l.start]-_n(m)[l.start])[0]:f.sort((u,m)=>{const p=NI(t,SI(_n(u))),v=NI(t,SI(_n(m)));return p!==v?p-v:_n(u)[l.start]-_n(m)[l.start]})[0]};const AI=(e,t)=>{const n=e.page.borderBox.center;return hi(e.descriptor.id,t)?ha(n,t.displacedBy.point):n},poe=(e,t)=>{const n=e.page.borderBox;return hi(e.descriptor.id,t)?yf(n,td(t.displacedBy.point)):n};var goe=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:a,afterCritical:s})=>a.filter(l=>b_({target:poe(l,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((l,c)=>{const f=_u(e,dj(n,AI(l,s))),h=_u(e,dj(n,AI(c,s)));return f<h?-1:h<f?1:l.descriptor.index-c.descriptor.index})[0]||null,bf=cn(function(t,n){const a=n[t.line];return{value:a,point:bl(t.line,a)}});const xoe=(e,t,n)=>{const a=e.axis;if(e.descriptor.mode==="virtual")return bl(a.line,t[a.line]);const s=e.subject.page.contentBox[a.size],f=rd(e.descriptor.id,n).reduce((h,u)=>h+u.client.marginBox[a.size],0)+t[a.line]-s;return f<=0?null:bl(a.line,f)},S_=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),C_=(e,t,n)=>{const a=e.frame;nd(t,e)&&Ke(),e.subject.withPlaceholder&&Ke();const s=bf(e.axis,t.displaceBy).point,o=xoe(e,s,n),l={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!a){const u=Tc({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return{...e,subject:u}}const c=o?yn(a.scroll.max,o):a.scroll.max,f=S_(a,c),h=Tc({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:f});return{...e,subject:h,frame:f}},voe=e=>{const t=e.subject.withPlaceholder;t||Ke();const n=e.frame;if(!n){const l=Tc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:l}}const a=t.oldFrameMaxScroll;a||Ke();const s=S_(n,a),o=Tc({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var yoe=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:a,draggables:s,destination:o,viewport:l,afterCritical:c})=>{if(!t){if(n.length)return null;const m={displaced:$u,displacedBy:x_,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},p=Lg({impact:m,draggable:a,droppable:o,draggables:s,afterCritical:c}),v=nd(a,o)?o:C_(o,a,s);return N_({draggable:a,destination:v,newPageBorderBoxCenter:p,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const f=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],h=(()=>{const m=t.descriptor.index;return t.descriptor.id===a.descriptor.id||f?m:m+1})(),u=bf(o.axis,a.displaceBy);return Sp({draggable:a,insideDestination:n,destination:o,viewport:l,displacedBy:u,last:$u,index:h})},boe=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:a,draggables:s,droppables:o,viewport:l,afterCritical:c})=>{const f=moe({isMovingForward:e,pageBorderBoxCenter:t,source:a,droppables:o,viewport:l});if(!f)return null;const h=rd(f.descriptor.id,s),u=goe({pageBorderBoxCenter:t,viewport:l,destination:f,insideDestination:h,afterCritical:c}),m=yoe({previousPageBorderBoxCenter:t,destination:f,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:h,viewport:l,afterCritical:c});if(!m)return null;const p=Lg({impact:m,draggable:n,droppable:f,draggables:s,afterCritical:c});return{clientSelection:zN({pageBorderBoxCenter:p,draggable:n,viewport:l}),impact:m,scrollJumpRequest:null}},xa=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const joe=(e,t)=>{const n=xa(e);return n?t[n]:null};var woe=({state:e,type:t})=>{const n=joe(e.impact,e.dimensions.droppables),a=!!n,s=e.dimensions.droppables[e.critical.droppable.id],o=n||s,l=o.axis.direction,c=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!a)return null;const f=t==="MOVE_DOWN"||t==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:m,droppables:p}=e.dimensions;return c?hoe({isMovingForward:f,previousPageBorderBoxCenter:u,draggable:h,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):boe({isMovingForward:f,previousPageBorderBoxCenter:u,draggable:h,isOver:o,draggables:m,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function Xi(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function k_(e){const t=Fa(e.top,e.bottom),n=Fa(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function Noe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Soe({pageBorderBox:e,draggable:t,candidates:n}){const a=t.page.borderBox.center,s=n.map(o=>{const l=o.axis,c=bl(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:_u(a,c)}}).sort((o,l)=>l.distance-o.distance);return s[0]?s[0].id:null}function Coe({pageBorderBox:e,draggable:t,droppables:n}){const a=_g(n).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!Noe(e,o))return!1;if(k_(o)(e.center))return!0;const l=s.axis,c=o.center[l.crossAxisLine],f=e[l.crossAxisStart],h=e[l.crossAxisEnd],u=Fa(o[l.crossAxisStart],o[l.crossAxisEnd]),m=u(f),p=u(h);return!m&&!p?!0:m?f<c:h>c});return a.length?a.length===1?a[0].descriptor.id:Soe({pageBorderBox:e,draggable:t,candidates:a}):null}const P_=(e,t)=>ss(yf(e,t));var koe=(e,t)=>{const n=e.frame;return n?P_(t,n.scroll.diff.value):t};function E_({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Poe({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Eoe=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:a,last:s,viewport:o,afterCritical:l})=>{const c=n.axis,f=bf(n.axis,t.displaceBy),h=f.value,u=e[c.start],m=e[c.end],v=Fg(t,a).find(y=>{const b=y.descriptor.id,N=y.page.borderBox.center[c.line],P=hi(b,l),A=E_({displaced:s,id:b});return P?A?m<=N:u<N-h:A?m<=N+h:u<N})||null,j=Poe({draggable:t,closest:v,inHomeList:nd(t,n)});return Sp({draggable:t,insideDestination:a,destination:n,viewport:o,last:s,displacedBy:f,index:j})};const Aoe=4;var Ioe=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:a,insideDestination:s,afterCritical:o})=>{if(!a.isCombineEnabled)return null;const l=a.axis,c=bf(a.axis,e.displaceBy),f=c.value,h=t[l.start],u=t[l.end],p=Fg(e,s).find(j=>{const y=j.descriptor.id,b=j.page.borderBox,P=b[l.size]/Aoe,A=hi(y,o),k=E_({displaced:n.displaced,id:y});return A?k?u>b[l.start]+P&&u<b[l.end]-P:h>b[l.start]-f+P&&h<b[l.end]-f-P:k?u>b[l.start]+f+P&&u<b[l.end]+f-P:h>b[l.start]+P&&h<b[l.end]-P});return p?{displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}}:null},A_=({pageOffset:e,draggable:t,draggables:n,droppables:a,previousImpact:s,viewport:o,afterCritical:l})=>{const c=P_(t.page.borderBox,e),f=Coe({pageBorderBox:c,draggable:t,droppables:a});if(!f)return qse;const h=a[f],u=rd(h.descriptor.id,n),m=koe(h,c);return Ioe({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:s,destination:h,insideDestination:u,afterCritical:l})||Eoe({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:h,insideDestination:u,last:s.displaced,viewport:o,afterCritical:l})},UN=(e,t)=>({...e,[t.descriptor.id]:t});const Doe=({previousImpact:e,impact:t,droppables:n})=>{const a=xa(e),s=xa(t);if(!a||a===s)return n;const o=n[a];if(!o.subject.withPlaceholder)return n;const l=voe(o);return UN(n,l)};var Ooe=({draggable:e,draggables:t,droppables:n,previousImpact:a,impact:s})=>{const o=Doe({previousImpact:a,impact:s,droppables:n}),l=xa(s);if(!l)return o;const c=n[l];if(nd(e,c)||c.subject.withPlaceholder)return o;const f=C_(c,e,t);return UN(o,f)},uu=({state:e,clientSelection:t,dimensions:n,viewport:a,impact:s,scrollJumpRequest:o})=>{const l=a||e.viewport,c=n||e.dimensions,f=t||e.current.client.selection,h=ha(f,e.initial.client.selection),u={offset:h,selection:f,borderBoxCenter:yn(e.initial.client.borderBoxCenter,h)},m={selection:yn(u.selection,l.scroll.current),borderBoxCenter:yn(u.borderBoxCenter,l.scroll.current),offset:yn(u.offset,l.scroll.diff.value)},p={client:u,page:m};if(e.phase==="COLLECTING")return{...e,dimensions:c,viewport:l,current:p};const v=c.draggables[e.critical.draggable.id],j=s||A_({pageOffset:m.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),y=Ooe({draggable:v,impact:j,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables});return{...e,current:p,dimensions:{draggables:c.draggables,droppables:y},impact:j,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function Moe(e,t){return e.map(n=>t[n])}var I_=({impact:e,viewport:t,draggables:n,destination:a,forceShouldAnimate:s})=>{const o=e.displaced,l=Moe(o.all,n),c=Fu({afterDragging:l,destination:a,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:c}},D_=({impact:e,draggable:t,droppable:n,draggables:a,viewport:s,afterCritical:o})=>{const l=Lg({impact:e,draggable:t,draggables:a,droppable:n,afterCritical:o});return zN({pageBorderBoxCenter:l,draggable:t,viewport:s})},O_=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Ke();const a=e.impact,s=n||e.viewport,o=t||e.dimensions,{draggables:l,droppables:c}=o,f=l[e.critical.draggable.id],h=xa(a);h||Ke();const u=c[h],m=I_({impact:a,viewport:s,destination:u,draggables:l}),p=D_({impact:m,draggable:f,droppable:u,draggables:l,viewport:s,afterCritical:e.afterCritical});return uu({impact:m,clientSelection:p,state:e,dimensions:o,viewport:s})},Toe=e=>({index:e.index,droppableId:e.droppableId}),M_=({draggable:e,home:t,draggables:n,viewport:a})=>{const s=bf(t.axis,e.displaceBy),o=rd(t.descriptor.id,n),l=o.indexOf(e);l===-1&&Ke();const c=o.slice(l+1),f=c.reduce((p,v)=>(p[v.descriptor.id]=!0,p),{}),h={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:f};return{impact:{displaced:Fu({afterDragging:c,destination:t,displacedBy:s,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:Toe(e.descriptor)}},afterCritical:h}},Roe=(e,t)=>({draggables:e.draggables,droppables:UN(e.droppables,t)}),_oe=({draggable:e,offset:t,initialWindowScroll:n})=>{const a=yp(e.client,t),s=bp(a,n);return{...e,placeholder:{...e.placeholder,client:a},client:a,page:s}},$oe=e=>{const t=e.frame;return t||Ke(),t},Foe=({additions:e,updatedDroppables:t,viewport:n})=>{const a=n.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,l=t[o],f=$oe(l).scroll.diff.value,h=yn(a,f);return _oe({draggable:s,offset:h,initialWindowScroll:n.scroll.initial})})},Loe=({state:e,published:t})=>{const n=t.modified.map(N=>{const P=e.dimensions.droppables[N.droppableId];return RN(P,N.scroll)}),a={...e.dimensions.droppables,...p_(n)},s=g_(Foe({additions:t.additions,updatedDroppables:a,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(N=>{delete o[N]});const l={droppables:a,draggables:o},c=xa(e.impact),f=c?l.droppables[c]:null,h=l.draggables[e.critical.draggable.id],u=l.droppables[e.critical.droppable.id],{impact:m,afterCritical:p}=M_({draggable:h,home:u,draggables:o,viewport:e.viewport}),v=f&&f.isCombineEnabled?e.impact:m,j=A_({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:e.viewport,afterCritical:p}),y={...e,phase:"DRAGGING",impact:j,onLiftImpact:m,dimensions:l,afterCritical:p,forceShouldAnimate:!1};return e.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const uj=e=>e.movementMode==="SNAP",Ey=(e,t,n)=>{const a=Roe(e.dimensions,t);return!uj(e)||n?uu({state:e,dimensions:a}):O_({state:e,dimensions:a})};function Ay(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const II={phase:"IDLE",completed:null,shouldFlush:!1};var zoe=(e=II,t)=>{if(t.type==="FLUSH")return{...II,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Ke();const{critical:n,clientSelection:a,viewport:s,dimensions:o,movementMode:l}=t.payload,c=o.draggables[n.draggable.id],f=o.droppables[n.droppable.id],h={selection:a,borderBoxCenter:c.client.borderBox.center,offset:dn},u={client:h,page:{selection:yn(h.selection,s.scroll.initial),borderBoxCenter:yn(h.selection,s.scroll.initial),offset:yn(h.selection,s.scroll.diff.value)}},m=_g(o.droppables).every(y=>!y.isFixedOnPage),{impact:p,afterCritical:v}=M_({draggable:c,home:f,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:o,initial:u,current:u,isWindowScrollAllowed:m,impact:p,afterCritical:v,onLiftImpact:p,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Ke(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Ke(),Loe({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Xi(e)||Ke();const{client:n}=t.payload;return ai(n,e.current.client.selection)?e:uu({state:e,clientSelection:n,impact:uj(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ay(e);Xi(e)||Ke();const{id:n,newScroll:a}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const o=RN(s,a);return Ey(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Xi(e)||Ke();const{id:n,isEnabled:a}=t.payload,s=e.dimensions.droppables[n];s||Ke(),s.isEnabled===a&&Ke();const o={...s,isEnabled:a};return Ey(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Xi(e)||Ke();const{id:n,isCombineEnabled:a}=t.payload,s=e.dimensions.droppables[n];s||Ke(),s.isCombineEnabled===a&&Ke();const o={...s,isCombineEnabled:a};return Ey(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Xi(e)||Ke(),e.isWindowScrollAllowed||Ke();const n=t.payload.newScroll;if(ai(e.viewport.scroll.current,n))return Ay(e);const a=w_(e.viewport,n);return uj(e)?O_({state:e,viewport:a}):uu({state:e,viewport:a})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Xi(e))return e;const n=t.payload.maxScroll;if(ai(n,e.viewport.scroll.max))return e;const a={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:a}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Ke();const n=woe({state:e,type:t.type});return n?uu({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Ke(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:a,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Ke(),{phase:"DROP_ANIMATING",completed:n,dropDuration:a,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Jt(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Uoe=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Boe=e=>({type:"LIFT",payload:e}),Voe=e=>({type:"INITIAL_PUBLISH",payload:e}),qoe=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Goe=()=>({type:"COLLECTION_STARTING",payload:null}),Hoe=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Woe=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Koe=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),T_=e=>({type:"MOVE",payload:e}),Yoe=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Xoe=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Joe=()=>({type:"MOVE_UP",payload:null}),Qoe=()=>({type:"MOVE_DOWN",payload:null}),Zoe=()=>({type:"MOVE_RIGHT",payload:null}),eie=()=>({type:"MOVE_LEFT",payload:null}),BN=()=>({type:"FLUSH",payload:null}),tie=e=>({type:"DROP_ANIMATE",payload:e}),VN=e=>({type:"DROP_COMPLETE",payload:e}),R_=e=>({type:"DROP",payload:e}),rie=e=>({type:"DROP_PENDING",payload:e}),__=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var nie=e=>({getState:t,dispatch:n})=>a=>s=>{if(!Jt(s,"LIFT")){a(s);return}const{id:o,clientSelection:l,movementMode:c}=s.payload,f=t();f.phase==="DROP_ANIMATING"&&n(VN({completed:f.completed})),t().phase!=="IDLE"&&Ke(),n(BN()),n(Uoe({draggableId:o,movementMode:c}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:m,dimensions:p,viewport:v}=e.startPublishing(u);n(Voe({critical:m,dimensions:p,clientSelection:l,movementMode:c,viewport:v}))},aie=e=>()=>t=>n=>{Jt(n,"INITIAL_PUBLISH")&&e.dragging(),Jt(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Jt(n,"FLUSH")||Jt(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const qN={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Lu={opacity:{drop:0,combining:.7},scale:{drop:.75}},$_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Hi=`${$_.outOfTheWay}s ${qN.outOfTheWay}`,fu={fluid:`opacity ${Hi}`,snap:`transform ${Hi}, opacity ${Hi}`,drop:e=>{const t=`${e}s ${qN.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Hi}`,placeholder:`height ${Hi}, width ${Hi}, margin ${Hi}`},DI=e=>ai(e,dn)?void 0:`translate(${e.x}px, ${e.y}px)`,fj={moveTo:DI,drop:(e,t)=>{const n=DI(e);if(n)return t?`${n} scale(${Lu.scale.drop})`:n}},{minDropTime:hj,maxDropTime:F_}=$_,sie=F_-hj,OI=1500,oie=.6;var iie=({current:e,destination:t,reason:n})=>{const a=_u(e,t);if(a<=0)return hj;if(a>=OI)return F_;const s=a/OI,o=hj+sie*s,l=n==="CANCEL"?o*oie:o;return Number(l.toFixed(2))},lie=({impact:e,draggable:t,dimensions:n,viewport:a,afterCritical:s})=>{const{draggables:o,droppables:l}=n,c=xa(e),f=c?l[c]:null,h=l[t.descriptor.droppableId],u=D_({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:f||h,viewport:a});return ha(u,t.client.borderBox.center)},cie=({draggables:e,reason:t,lastImpact:n,home:a,viewport:s,onLiftImpact:o})=>!n.at||t!=="DROP"?{impact:I_({draggables:e,impact:o,destination:a,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:$u},didDropInsideDroppable:!0};const die=({getState:e,dispatch:t})=>n=>a=>{if(!Jt(a,"DROP")){n(a);return}const s=e(),o=a.payload.reason;if(s.phase==="COLLECTING"){t(rie({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&Ke(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||Ke();const c=s.critical,f=s.dimensions,h=f.draggables[s.critical.draggable.id],{impact:u,didDropInsideDroppable:m}=cie({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),p=m?_N(u):null,v=m?$g(u):null,j={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:h.descriptor.id,type:h.descriptor.type,source:j,reason:o,mode:s.movementMode,destination:p,combine:v},b=lie({impact:u,draggable:h,dimensions:f,viewport:s.viewport,afterCritical:s.afterCritical}),N={critical:s.critical,afterCritical:s.afterCritical,result:y,impact:u};if(!(!ai(s.current.client.offset,b)||!!y.combine)){t(VN({completed:N}));return}const A=iie({current:s.current.client.offset,destination:b,reason:o});t(tie({newHomeClientOffset:b,dropDuration:A,completed:N}))};var L_=()=>({x:window.pageXOffset,y:window.pageYOffset});function uie(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function fie({onWindowScroll:e}){function t(){e(L_())}const n=Ru(t),a=uie(n);let s=ni;function o(){return s!==ni}function l(){o()&&Ke(),s=$a(window,[a])}function c(){o()||Ke(),n.cancel(),s(),s=ni}return{start:l,stop:c,isActive:o}}const hie=e=>Jt(e,"DROP_COMPLETE")||Jt(e,"DROP_ANIMATE")||Jt(e,"FLUSH"),mie=e=>{const t=fie({onWindowScroll:n=>{e.dispatch(Yoe({newScroll:n}))}});return n=>a=>{!t.isActive()&&Jt(a,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&hie(a)&&t.stop(),n(a)}};var pie=e=>{let t=!1,n=!1;const a=setTimeout(()=>{n=!0}),s=o=>{t||n||(t=!0,e(o),clearTimeout(a))};return s.wasCalled=()=>t,s},gie=()=>{const e=[],t=s=>{const o=e.findIndex(c=>c.timerId===s);o===-1&&Ke();const[l]=e.splice(o,1);l.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),l={timerId:o,callback:s};e.push(l)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const xie=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,vie=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,yie=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,a=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&a},tu=(e,t)=>{t()},nm=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Iy(e,t,n,a){if(!e){n(a(t));return}const s=pie(n);e(t,{announce:s}),s.wasCalled()||n(a(t))}var bie=(e,t)=>{const n=gie();let a=null;const s=(m,p)=>{a&&Ke(),tu("onBeforeCapture",()=>{const v=e().onBeforeCapture;v&&v({draggableId:m,mode:p})})},o=(m,p)=>{a&&Ke(),tu("onBeforeDragStart",()=>{const v=e().onBeforeDragStart;v&&v(nm(m,p))})},l=(m,p)=>{a&&Ke();const v=nm(m,p);a={mode:p,lastCritical:m,lastLocation:v.source,lastCombine:null},n.add(()=>{tu("onDragStart",()=>Iy(e().onDragStart,v,t,hm.onDragStart))})},c=(m,p)=>{const v=_N(p),j=$g(p);a||Ke();const y=!yie(m,a.lastCritical);y&&(a.lastCritical=m);const b=!xie(a.lastLocation,v);b&&(a.lastLocation=v);const N=!vie(a.lastCombine,j);if(N&&(a.lastCombine=j),!y&&!b&&!N)return;const P={...nm(m,a.mode),combine:j,destination:v};n.add(()=>{tu("onDragUpdate",()=>Iy(e().onDragUpdate,P,t,hm.onDragUpdate))})},f=()=>{a||Ke(),n.flush()},h=m=>{a||Ke(),a=null,tu("onDragEnd",()=>Iy(e().onDragEnd,m,t,hm.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:l,update:c,flush:f,drop:h,abort:()=>{if(!a)return;const m={...nm(a.lastCritical,a.mode),combine:null,destination:null,reason:"CANCEL"};h(m)}}},jie=(e,t)=>{const n=bie(e,t);return a=>s=>o=>{if(Jt(o,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(Jt(o,"INITIAL_PUBLISH")){const c=o.payload.critical;n.beforeStart(c,o.payload.movementMode),s(o),n.start(c,o.payload.movementMode);return}if(Jt(o,"DROP_COMPLETE")){const c=o.payload.completed.result;n.flush(),s(o),n.drop(c);return}if(s(o),Jt(o,"FLUSH")){n.abort();return}const l=a.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}};const wie=e=>t=>n=>{if(!Jt(n,"DROP_ANIMATION_FINISHED")){t(n);return}const a=e.getState();a.phase!=="DROP_ANIMATING"&&Ke(),e.dispatch(VN({completed:a.completed}))},Nie=e=>{let t=null,n=null;function a(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>o=>{if((Jt(o,"FLUSH")||Jt(o,"DROP_COMPLETE")||Jt(o,"DROP_ANIMATION_FINISHED"))&&a(),s(o),!Jt(o,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(__())}};n=requestAnimationFrame(()=>{n=null,t=$a(window,[l])})}};var Sie=e=>()=>t=>n=>{(Jt(n,"DROP_COMPLETE")||Jt(n,"FLUSH")||Jt(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},Cie=e=>{let t=!1;return()=>n=>a=>{if(Jt(a,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(a.payload.critical.draggable.id),n(a),e.tryRestoreFocusRecorded();return}if(n(a),!!t){if(Jt(a,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Jt(a,"DROP_COMPLETE")){t=!1;const s=a.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const kie=e=>Jt(e,"DROP_COMPLETE")||Jt(e,"DROP_ANIMATE")||Jt(e,"FLUSH");var Pie=e=>t=>n=>a=>{if(kie(a)){e.stop(),n(a);return}if(Jt(a,"INITIAL_PUBLISH")){n(a);const s=t.getState();s.phase!=="DRAGGING"&&Ke(),e.start(s);return}n(a),e.scroll(t.getState())};const Eie=e=>t=>n=>{if(t(n),!Jt(n,"PUBLISH_WHILE_DRAGGING"))return;const a=e.getState();a.phase==="DROP_PENDING"&&(a.isWaiting||e.dispatch(R_({reason:a.reason})))},Aie=bu;var Iie=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:a,announce:s,autoScroller:o})=>Qj(zoe,Aie(O5(aie(n),Sie(e),nie(e),die,wie,Nie,Eie,Pie(o),mie,Cie(t),jie(a,s))));const Dy=()=>({additions:{},removals:{},modified:{}});function Die({registry:e,callbacks:t}){let n=Dy(),a=null;const s=()=>{a||(t.collectionStarting(),a=requestAnimationFrame(()=>{a=null;const{additions:f,removals:h,modified:u}=n,m=Object.keys(f).map(j=>e.draggable.getById(j).getDimension(dn)).sort((j,y)=>j.descriptor.index-y.descriptor.index),p=Object.keys(u).map(j=>{const b=e.droppable.getById(j).callbacks.getScrollWhileDragging();return{droppableId:j,scroll:b}}),v={additions:m,removals:Object.keys(h),modified:p};n=Dy(),t.publish(v)}))};return{add:f=>{const h=f.descriptor.id;n.additions[h]=f,n.modified[f.descriptor.droppableId]=!0,n.removals[h]&&delete n.removals[h],s()},remove:f=>{const h=f.descriptor;n.removals[h.id]=!0,n.modified[h.droppableId]=!0,n.additions[h.id]&&delete n.additions[h.id],s()},stop:()=>{a&&(cancelAnimationFrame(a),a=null,n=Dy())}}}var z_=({scrollHeight:e,scrollWidth:t,height:n,width:a})=>{const s=ha({x:t,y:e},{x:a,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},U_=()=>{const e=document.documentElement;return e||Ke(),e},B_=()=>{const e=U_();return z_({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Oie=()=>{const e=L_(),t=B_(),n=e.y,a=e.x,s=U_(),o=s.clientWidth,l=s.clientHeight,c=a+o,f=n+l;return{frame:ss({top:n,left:a,right:c,bottom:f}),scroll:{initial:e,current:e,max:t,diff:{value:dn,displacement:dn}}}},Mie=({critical:e,scrollOptions:t,registry:n})=>{const a=Oie(),s=a.scroll.current,o=e.droppable,l=n.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(s,t)),c=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(s));return{dimensions:{draggables:g_(c),droppables:p_(l)},critical:e,viewport:a}};function MI(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Tie=(e,t)=>{let n=null;const a=Die({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(p,v)=>{e.droppable.exists(p)||Ke(),n&&t.updateDroppableIsEnabled({id:p,isEnabled:v})},o=(p,v)=>{n&&(e.droppable.exists(p)||Ke(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:v}))},l=(p,v)=>{n&&(e.droppable.exists(p)||Ke(),t.updateDroppableScroll({id:p,newScroll:v}))},c=(p,v)=>{n&&e.droppable.getById(p).callbacks.scroll(v)},f=()=>{if(!n)return;a.stop();const p=n.critical.droppable;e.droppable.getAllByType(p.type).forEach(v=>v.callbacks.dragStopped()),n.unsubscribe(),n=null},h=p=>{n||Ke();const v=n.critical.draggable;p.type==="ADDITION"&&MI(e,v,p.value)&&a.add(p.value),p.type==="REMOVAL"&&MI(e,v,p.value)&&a.remove(p.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:c,updateDroppableScroll:l,startPublishing:p=>{n&&Ke();const v=e.draggable.getById(p.draggableId),j=e.droppable.getById(v.descriptor.droppableId),y={draggable:v.descriptor,droppable:j.descriptor},b=e.subscribe(h);return n={critical:y,unsubscribe:b},Mie({critical:y,registry:e,scrollOptions:p.scrollOptions})},stopPublishing:f}},V_=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Rie=e=>{window.scrollBy(e.x,e.y)};const _ie=cn(e=>_g(e).filter(t=>!(!t.isEnabled||!t.frame))),$ie=(e,t)=>_ie(t).find(a=>(a.frame||Ke(),k_(a.frame.pageMarginBox)(e)))||null;var Fie=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return $ie(e,n)};const zu={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Lie=(e,t,n=()=>zu)=>{const a=n(),s=e[t.size]*a.startFromPercentage,o=e[t.size]*a.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},q_=({startOfRange:e,endOfRange:t,current:n})=>{const a=t-e;return a===0?0:(n-e)/a},GN=1,zie=(e,t,n=()=>zu)=>{const a=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return a.maxPixelScroll;if(e===t.startScrollingFrom)return GN;const o=1-q_({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),l=a.maxPixelScroll*a.ease(o);return Math.ceil(l)},Uie=(e,t,n)=>{const a=n(),s=a.durationDampening.accelerateAt,o=a.durationDampening.stopDampeningAt,l=t,c=o,h=Date.now()-l;if(h>=o)return e;if(h<s)return GN;const u=q_({startOfRange:s,endOfRange:c,current:h}),m=e*a.ease(u);return Math.ceil(m)},TI=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const o=zie(e,t,s);return o===0?0:a?Math.max(Uie(o,n,s),GN):o},RI=({container:e,distanceToEdges:t,dragStartTime:n,axis:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=Lie(e,a,o);return t[a.end]<t[a.start]?TI({distanceToEdge:t[a.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*TI({distanceToEdge:t[a.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},Bie=({container:e,subject:t,proposedScroll:n})=>{const a=t.height>e.height,s=t.width>e.width;return!s&&!a?n:s&&a?null:{x:s?0:n.x,y:a?0:n.y}};const Vie=m_(e=>e===0?0:e);var G_=({dragStartTime:e,container:t,subject:n,center:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l={top:a.y-t.top,right:t.right-a.x,bottom:t.bottom-a.y,left:a.x-t.left},c=RI({container:t,distanceToEdges:l,dragStartTime:e,axis:$N,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),f=RI({container:t,distanceToEdges:l,dragStartTime:e,axis:y_,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),h=Vie({x:f,y:c});if(ai(h,dn))return null;const u=Bie({container:t,subject:n,proposedScroll:h});return u?ai(u,dn)?null:u:null};const qie=m_(e=>e===0?0:e>0?1:-1),HN=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:a})=>{const s=yn(t,a),o={x:e(s.x,n.x),y:e(s.y,n.y)};return ai(o,dn)?null:o}})(),H_=({max:e,current:t,change:n})=>{const a={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=qie(n),o=HN({max:a,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},WN=(e,t)=>H_({current:e.scroll.current,max:e.scroll.max,change:t}),Gie=(e,t)=>{if(!WN(e,t))return null;const n=e.scroll.max,a=e.scroll.current;return HN({current:a,max:n,change:t})},KN=(e,t)=>{const n=e.frame;return n?H_({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Hie=(e,t)=>{const n=e.frame;return!n||!KN(e,t)?null:HN({current:n.scroll.current,max:n.scroll.max,change:t})};var Wie=({viewport:e,subject:t,center:n,dragStartTime:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=G_({dragStartTime:a,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return l&&WN(e,l)?l:null},Kie=({droppable:e,subject:t,center:n,dragStartTime:a,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const l=e.frame;if(!l)return null;const c=G_({dragStartTime:a,container:l.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return c&&KN(e,c)?c:null},_I=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:a,scrollDroppable:s,getAutoScrollerOptions:o})=>{const l=e.current.page.borderBoxCenter,f=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const m=e.viewport,p=Wie({dragStartTime:t,viewport:m,subject:f,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:o});if(p){a(p);return}}const h=Fie({center:l,destination:xa(e.impact),droppables:e.dimensions.droppables});if(!h)return;const u=Kie({dragStartTime:t,droppable:h,subject:f,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:o});u&&s(h.descriptor.id,u)},Yie=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>zu})=>{const a=Ru(e),s=Ru(t);let o=null;const l=h=>{o||Ke();const{shouldUseTimeDampening:u,dragStartTime:m}=o;_I({state:h,scrollWindow:a,scrollDroppable:s,dragStartTime:m,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:h=>{o&&Ke();const u=Date.now();let m=!1;const p=()=>{m=!0};_I({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),o={dragStartTime:u,shouldUseTimeDampening:m},m&&l(h)},stop:()=>{o&&(a.cancel(),s.cancel(),o=null)},scroll:l}},Xie=({move:e,scrollDroppable:t,scrollWindow:n})=>{const a=(c,f)=>{const h=yn(c.current.client.selection,f);e({client:h})},s=(c,f)=>{if(!KN(c,f))return f;const h=Hie(c,f);if(!h)return t(c.descriptor.id,f),null;const u=ha(f,h);return t(c.descriptor.id,u),ha(f,u)},o=(c,f,h)=>{if(!c||!WN(f,h))return h;const u=Gie(f,h);if(!u)return n(h),null;const m=ha(h,u);return n(m),ha(h,m)};return c=>{const f=c.scrollJumpRequest;if(!f)return;const h=xa(c.impact);h||Ke();const u=s(c.dimensions.droppables[h],f);if(!u)return;const m=c.viewport,p=o(c.isWindowScrollAllowed,m,u);p&&a(c,p)}},Jie=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:a})=>{const s=Yie({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:a}),o=Xie({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:f=>{if(!(a().disabled||f.phase!=="DRAGGING")){if(f.movementMode==="FLUID"){s.scroll(f);return}f.scrollJumpRequest&&o(f)}},start:s.start,stop:s.stop}};const Rc="data-rfd",_c=(()=>{const e=`${Rc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),mj=(()=>{const e=`${Rc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Qie=(()=>{const e=`${Rc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),$I={contextId:`${Rc}-scroll-container-context-id`},Zie=e=>t=>`[${t}="${e}"]`,ru=(e,t)=>e.map(n=>{const a=n.styles[t];return a?`${n.selector} { ${a} }`:""}).join(" "),ele="pointer-events: none;";var tle=e=>{const t=Zie(e),n=(()=>{const c=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(_c.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:c,dragging:ele,dropAnimating:c}}})(),a=(()=>{const c=`
      transition: ${fu.outOfTheWay};
    `;return{selector:t(mj.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),s={selector:t(Qie.contextId),styles:{always:"overflow-anchor: none;"}},l=[a,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ru(l,"always"),resting:ru(l,"resting"),dragging:ru(l,"dragging"),dropAnimating:ru(l,"dropAnimating"),userCancel:ru(l,"userCancel")}};const va=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,Oy=()=>{const e=document.querySelector("head");return e||Ke(),e},FI=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function rle(e,t){const n=qt(()=>tle(e),[e]),a=x.useRef(null),s=x.useRef(null),o=pt(cn(m=>{const p=s.current;p||Ke(),p.textContent=m}),[]),l=pt(m=>{const p=a.current;p||Ke(),p.textContent=m},[]);va(()=>{!a.current&&!s.current||Ke();const m=FI(t),p=FI(t);return a.current=m,s.current=p,m.setAttribute(`${Rc}-always`,e),p.setAttribute(`${Rc}-dynamic`,e),Oy().appendChild(m),Oy().appendChild(p),l(n.always),o(n.resting),()=>{const v=j=>{const y=j.current;y||Ke(),Oy().removeChild(y),j.current=null};v(a),v(s)}},[t,l,o,n.always,n.resting,e]);const c=pt(()=>o(n.dragging),[o,n.dragging]),f=pt(m=>{if(m==="DROP"){o(n.dropAnimating);return}o(n.userCancel)},[o,n.dropAnimating,n.userCancel]),h=pt(()=>{s.current&&o(n.resting)},[o,n.resting]);return qt(()=>({dragging:c,dropping:f,resting:h}),[c,f,h])}function W_(e,t){return Array.from(e.querySelectorAll(t))}var K_=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function zg(e){return e instanceof K_(e).HTMLElement}function nle(e,t){const n=`[${_c.contextId}="${e}"]`,a=W_(document,n);if(!a.length)return null;const s=a.find(o=>o.getAttribute(_c.draggableId)===t);return!s||!zg(s)?null:s}function ale(e){const t=x.useRef({}),n=x.useRef(null),a=x.useRef(null),s=x.useRef(!1),o=pt(function(p,v){const j={id:p,focus:v};return t.current[p]=j,function(){const b=t.current;b[p]!==j&&delete b[p]}},[]),l=pt(function(p){const v=nle(e,p);v&&v!==document.activeElement&&v.focus()},[e]),c=pt(function(p,v){n.current===p&&(n.current=v)},[]),f=pt(function(){a.current||s.current&&(a.current=requestAnimationFrame(()=>{a.current=null;const p=n.current;p&&l(p)}))},[l]),h=pt(function(p){n.current=null;const v=document.activeElement;v&&v.getAttribute(_c.draggableId)===p&&(n.current=p)},[]);return va(()=>(s.current=!0,function(){s.current=!1;const p=a.current;p&&cancelAnimationFrame(p)}),[]),qt(()=>({register:o,tryRecordFocus:h,tryRestoreFocusRecorded:f,tryShiftRecord:c}),[o,h,f,c])}function sle(){const e={draggables:{},droppables:{}},t=[];function n(m){return t.push(m),function(){const v=t.indexOf(m);v!==-1&&t.splice(v,1)}}function a(m){t.length&&t.forEach(p=>p(m))}function s(m){return e.draggables[m]||null}function o(m){const p=s(m);return p||Ke(),p}const l={register:m=>{e.draggables[m.descriptor.id]=m,a({type:"ADDITION",value:m})},update:(m,p)=>{const v=e.draggables[p.descriptor.id];v&&v.uniqueId===m.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[m.descriptor.id]=m)},unregister:m=>{const p=m.descriptor.id,v=s(p);v&&m.uniqueId===v.uniqueId&&(delete e.draggables[p],e.droppables[m.descriptor.droppableId]&&a({type:"REMOVAL",value:m}))},getById:o,findById:s,exists:m=>!!s(m),getAllByType:m=>Object.values(e.draggables).filter(p=>p.descriptor.type===m)};function c(m){return e.droppables[m]||null}function f(m){const p=c(m);return p||Ke(),p}const h={register:m=>{e.droppables[m.descriptor.id]=m},unregister:m=>{const p=c(m.descriptor.id);p&&m.uniqueId===p.uniqueId&&delete e.droppables[m.descriptor.id]},getById:f,findById:c,exists:m=>!!c(m),getAllByType:m=>Object.values(e.droppables).filter(p=>p.descriptor.type===m)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:h,subscribe:n,clean:u}}function ole(){const e=qt(sle,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var YN=bt.createContext(null),Cp=()=>{const e=document.body;return e||Ke(),e};const ile={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},lle=e=>`rfd-announcement-${e}`;function cle(e){const t=qt(()=>lle(e),[e]),n=x.useRef(null);return x.useEffect(function(){const o=document.createElement("div");return n.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),jp(o.style,ile),Cp().appendChild(o),function(){setTimeout(function(){const f=Cp();f.contains(o)&&f.removeChild(o),o===n.current&&(n.current=null)})}},[t]),pt(s=>{const o=n.current;if(o){o.textContent=s;return}},[])}const dle={separator:"::"};function XN(e,t=dle){const n=bt.useId();return qt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function ule({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function fle({contextId:e,text:t}){const n=XN("hidden-text",{separator:"-"}),a=qt(()=>ule({contextId:e,uniqueId:n}),[n,e]);return x.useEffect(function(){const o=document.createElement("div");return o.id=a,o.textContent=t,o.style.display="none",Cp().appendChild(o),function(){const c=Cp();c.contains(o)&&c.removeChild(o)}},[a,t]),a}var Ug=bt.createContext(null);function Y_(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function hle(){let e=null;function t(){return!!e}function n(l){return l===e}function a(l){e&&Ke();const c={abandon:l};return e=c,c}function s(){e||Ke(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:a,release:s,tryAbandon:o}}function Uu(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const mle=9,ple=13,JN=27,X_=32,gle=33,xle=34,vle=35,yle=36,ble=37,jle=38,wle=39,Nle=40,Sle={[ple]:!0,[mle]:!0};var J_=e=>{Sle[e.keyCode]&&e.preventDefault()};const Bg=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(a=>`on${a}`in document)||e})(),Q_=0,LI=5;function Cle(e,t){return Math.abs(t.x-e.x)>=LI||Math.abs(t.y-e.y)>=LI}const zI={type:"IDLE"};function kle({cancel:e,completed:t,getPhase:n,setPhase:a}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:l,clientY:c}=s;if(o!==Q_)return;const f={x:l,y:c},h=n();if(h.type==="DRAGGING"){s.preventDefault(),h.actions.move(f);return}h.type!=="PENDING"&&Ke();const u=h.point;if(!Cle(u,f))return;s.preventDefault();const m=h.actions.fluidLift(f);a({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===JN){s.preventDefault(),e();return}J_(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=n();if(o.type==="IDLE"&&Ke(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Bg,fn:e}]}function Ple(e){const t=x.useRef(zI),n=x.useRef(ni),a=qt(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==Q_||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const p=e.findClosestDraggableId(m);if(!p)return;const v=e.tryGetLock(p,l,{sourceEvent:m});if(!v)return;m.preventDefault();const j={x:m.clientX,y:m.clientY};n.current(),h(v,j)}}),[e]),s=qt(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const m=e.findClosestDraggableId(u);if(!m)return;const p=e.findOptionsForDraggable(m);p&&(p.shouldRespectForcePress||e.canGetLock(m)&&u.preventDefault())}}),[e]),o=pt(function(){const m={passive:!1,capture:!0};n.current=$a(window,[s,a],m)},[s,a]),l=pt(()=>{t.current.type!=="IDLE"&&(t.current=zI,n.current(),o())},[o]),c=pt(()=>{const u=t.current;l(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[l]),f=pt(function(){const m={capture:!0,passive:!1},p=kle({cancel:c,completed:l,getPhase:()=>t.current,setPhase:v=>{t.current=v}});n.current=$a(window,p,m)},[c,l]),h=pt(function(m,p){t.current.type!=="IDLE"&&Ke(),t.current={type:"PENDING",point:p,actions:m},f()},[f]);va(function(){return o(),function(){n.current()}},[o])}function Ele(){}const Ale={[xle]:!0,[gle]:!0,[yle]:!0,[vle]:!0};function Ile(e,t){function n(){t(),e.cancel()}function a(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===JN){s.preventDefault(),n();return}if(s.keyCode===X_){s.preventDefault(),a();return}if(s.keyCode===Nle){s.preventDefault(),e.moveDown();return}if(s.keyCode===jle){s.preventDefault(),e.moveUp();return}if(s.keyCode===wle){s.preventDefault(),e.moveRight();return}if(s.keyCode===ble){s.preventDefault(),e.moveLeft();return}if(Ale[s.keyCode]){s.preventDefault();return}J_(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Bg,fn:n}]}function Dle(e){const t=x.useRef(Ele),n=qt(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==X_)return;const l=e.findClosestDraggableId(o);if(!l)return;const c=e.tryGetLock(l,u,{sourceEvent:o});if(!c)return;o.preventDefault();let f=!0;const h=c.snapLift();t.current();function u(){f||Ke(),f=!1,t.current(),a()}t.current=$a(window,Ile(h,u),{capture:!0,passive:!1})}}),[e]),a=pt(function(){const o={passive:!1,capture:!0};t.current=$a(window,[n],o)},[n]);va(function(){return a(),function(){t.current()}},[a])}const My={type:"IDLE"},Ole=120,Mle=.15;function Tle({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===JN&&n.preventDefault(),e()}},{eventName:Bg,fn:e}]}function Rle({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:a=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:l}=a.touches[0],c={x:o,y:l};a.preventDefault(),s.actions.move(c)}},{eventName:"touchend",fn:a=>{const s=n();if(s.type!=="DRAGGING"){e();return}a.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:a=>{if(n().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:a=>{const s=n();s.type==="IDLE"&&Ke();const o=a.touches[0];if(!o||!(o.force>=Mle))return;const c=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){c&&e();return}if(c){if(s.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}},{eventName:Bg,fn:e}]}function _le(e){const t=x.useRef(My),n=x.useRef(ni),a=pt(function(){return t.current},[]),s=pt(function(v){t.current=v},[]),o=qt(()=>({eventName:"touchstart",fn:function(v){if(v.defaultPrevented)return;const j=e.findClosestDraggableId(v);if(!j)return;const y=e.tryGetLock(j,c,{sourceEvent:v});if(!y)return;const b=v.touches[0],{clientX:N,clientY:P}=b,A={x:N,y:P};n.current(),m(y,A)}}),[e]),l=pt(function(){const v={capture:!0,passive:!1};n.current=$a(window,[o],v)},[o]),c=pt(()=>{const p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(My),n.current(),l())},[l,s]),f=pt(()=>{const p=t.current;c(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[c]),h=pt(function(){const v={capture:!0,passive:!1},j={cancel:f,completed:c,getPhase:a},y=$a(window,Rle(j),v),b=$a(window,Tle(j),v);n.current=function(){y(),b()}},[f,a,c]),u=pt(function(){const v=a();v.type!=="PENDING"&&Ke();const j=v.actions.fluidLift(v.point);s({type:"DRAGGING",actions:j,hasMoved:!1})},[a,s]),m=pt(function(v,j){a().type!=="IDLE"&&Ke();const y=setTimeout(u,Ole);s({type:"PENDING",point:j,actions:v,longPressTimerId:y}),h()},[h,a,s,u]);va(function(){return l(),function(){n.current();const j=a();j.type==="PENDING"&&(clearTimeout(j.longPressTimerId),s(My))}},[a,l,s]),va(function(){return $a(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const $le=["input","button","textarea","select","option","optgroup","video","audio"];function Z_(e,t){if(t==null)return!1;if($le.includes(t.tagName.toLowerCase()))return!0;const a=t.getAttribute("contenteditable");return a==="true"||a===""?!0:t===e?!1:Z_(e,t.parentElement)}function Fle(e,t){const n=t.target;return zg(n)?Z_(e,n):!1}var Lle=e=>ss(e.getBoundingClientRect()).center;function zle(e){return e instanceof K_(e).Element}const Ule=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(a=>a in Element.prototype)||e})();function e6(e,t){return e==null?null:e[Ule](t)?e:e6(e.parentElement,t)}function Ble(e,t){return e.closest?e.closest(t):e6(e,t)}function Vle(e){return`[${_c.contextId}="${e}"]`}function qle(e,t){const n=t.target;if(!zle(n))return null;const a=Vle(e),s=Ble(n,a);return!s||!zg(s)?null:s}function Gle(e,t){const n=qle(e,t);return n?n.getAttribute(_c.draggableId):null}function Hle(e,t){const n=`[${mj.contextId}="${e}"]`,s=W_(document,n).find(o=>o.getAttribute(mj.id)===t);return!s||!zg(s)?null:s}function Wle(e){e.preventDefault()}function am({expected:e,phase:t,isLockActive:n,shouldWarn:a}){return!(!n()||e!==t)}function t6({lockAPI:e,store:t,registry:n,draggableId:a}){if(e.isClaimed())return!1;const s=n.draggable.findById(a);return!(!s||!s.options.isEnabled||!V_(t.getState(),a))}function Kle({lockAPI:e,contextId:t,store:n,registry:a,draggableId:s,forceSensorStop:o,sourceEvent:l}){if(!t6({lockAPI:e,store:n,registry:a,draggableId:s}))return null;const f=a.draggable.getById(s),h=Hle(t,f.descriptor.id);if(!h||l&&!f.options.canDragInteractiveElements&&Fle(h,l))return null;const u=e.claim(o||ni);let m="PRE_DRAG";function p(){return f.options.shouldRespectForcePress}function v(){return e.isActive(u)}function j(I,E){am({expected:I,phase:m,isLockActive:v,shouldWarn:!0})&&n.dispatch(E())}const y=j.bind(null,"DRAGGING");function b(I){function E(){e.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(E(),Ke()),n.dispatch(Boe(I.liftActionArgs)),m="DRAGGING";function O(C,M={shouldBlockNextClick:!1}){if(I.cleanup(),M.shouldBlockNextClick){const F=$a(window,[{eventName:"click",fn:Wle,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}E(),n.dispatch(R_({reason:C}))}return{isActive:()=>am({expected:"DRAGGING",phase:m,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:p,drop:C=>O("DROP",C),cancel:C=>O("CANCEL",C),...I.actions}}function N(I){const E=Ru(C=>{y(()=>T_({client:C}))});return{...b({liftActionArgs:{id:s,clientSelection:I,movementMode:"FLUID"},cleanup:()=>E.cancel(),actions:{move:E}}),move:E}}function P(){const I={moveUp:()=>y(Joe),moveRight:()=>y(Zoe),moveDown:()=>y(Qoe),moveLeft:()=>y(eie)};return b({liftActionArgs:{id:s,clientSelection:Lle(h),movementMode:"SNAP"},cleanup:ni,actions:I})}function A(){am({expected:"PRE_DRAG",phase:m,isLockActive:v,shouldWarn:!0})&&e.release()}return{isActive:()=>am({expected:"PRE_DRAG",phase:m,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:N,snapLift:P,abort:A}}const Yle=[Ple,Dle,_le];function Xle({contextId:e,store:t,registry:n,customSensors:a,enableDefaultSensors:s}){const o=[...s?Yle:[],...a||[]],l=x.useState(()=>hle())[0],c=pt(function(b,N){Uu(b)&&!Uu(N)&&l.tryAbandon()},[l]);va(function(){let b=t.getState();return t.subscribe(()=>{const P=t.getState();c(b,P),b=P})},[l,t,c]),va(()=>l.tryAbandon,[l.tryAbandon]);const f=pt(y=>t6({lockAPI:l,registry:n,store:t,draggableId:y}),[l,n,t]),h=pt((y,b,N)=>Kle({lockAPI:l,registry:n,contextId:e,store:t,draggableId:y,forceSensorStop:b||null,sourceEvent:N&&N.sourceEvent?N.sourceEvent:null}),[e,l,n,t]),u=pt(y=>Gle(e,y),[e]),m=pt(y=>{const b=n.draggable.findById(y);return b?b.options:null},[n.draggable]),p=pt(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(BN()))},[l,t]),v=pt(()=>l.isClaimed(),[l]),j=qt(()=>({canGetLock:f,tryGetLock:h,findClosestDraggableId:u,findOptionsForDraggable:m,tryReleaseLock:p,isLockClaimed:v}),[f,h,u,m,p,v]);for(let y=0;y<o.length;y++)o[y](j)}const Jle=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};so.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Qle=e=>({...zu,...e.autoScrollerOptions,durationDampening:{...zu.durationDampening,...e.autoScrollerOptions}});function nu(e){return e.current||Ke(),e.current}function Zle(e){const{contextId:t,setCallbacks:n,sensors:a,nonce:s,dragHandleUsageInstructions:o}=e,l=x.useRef(null),c=Y_(e),f=pt(()=>Jle(c.current),[c]),h=pt(()=>Qle(c.current),[c]),u=cle(t),m=fle({contextId:t,text:o}),p=rle(t,s),v=pt(F=>{nu(l).dispatch(F)},[]),j=qt(()=>Ik({publishWhileDragging:qoe,updateDroppableScroll:Hoe,updateDroppableIsEnabled:Woe,updateDroppableIsCombineEnabled:Koe,collectionStarting:Goe},v),[v]),y=ole(),b=qt(()=>Tie(y,j),[y,j]),N=qt(()=>Jie({scrollWindow:Rie,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:h,...Ik({move:T_},v)}),[b.scrollDroppable,v,h]),P=ale(t),A=qt(()=>Iie({announce:u,autoScroller:N,dimensionMarshal:b,focusMarshal:P,getResponders:f,styleMarshal:p}),[u,N,b,P,f,p]);l.current=A;const k=pt(()=>{const F=nu(l);F.getState().phase!=="IDLE"&&F.dispatch(BN())},[]),I=pt(()=>{const F=nu(l).getState();return F.phase==="DROP_ANIMATING"?!0:F.phase==="IDLE"?!1:F.isDragging},[]),E=qt(()=>({isDragging:I,tryAbort:k}),[I,k]);n(E);const O=pt(F=>V_(nu(l).getState(),F),[]),C=pt(()=>Xi(nu(l).getState()),[]),M=qt(()=>({marshal:b,focus:P,contextId:t,canLift:O,isMovementAllowed:C,dragHandleUsageInstructionsId:m,registry:y}),[t,b,m,P,O,C,y]);return Xle({contextId:t,store:A,registry:y,customSensors:a||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>k,[k]),bt.createElement(Ug.Provider,{value:M},bt.createElement(TR,{context:YN,store:A},e.children))}function ece(){return bt.useId()}function r6(e){const t=ece(),n=e.dragHandleUsageInstructions||hm.dragHandleUsageInstructions;return bt.createElement(Ose,null,a=>bt.createElement(Zle,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const UI={dragging:5e3,dropAnimating:4500},tce=(e,t)=>t?fu.drop(t.duration):e?fu.snap:fu.fluid,rce=(e,t)=>{if(e)return t?Lu.opacity.drop:Lu.opacity.combining},nce=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function ace(e){const n=e.dimension.client,{offset:a,combineWith:s,dropping:o}=e,l=!!s,c=nce(e),f=!!o,h=f?fj.drop(a,l):fj.moveTo(a);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:tce(c,o),transform:h,opacity:rce(l,f),zIndex:f?UI.dropAnimating:UI.dragging,pointerEvents:"none"}}function sce(e){return{transform:fj.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function oce(e){return e.type==="DRAGGING"?ace(e):sce(e)}function ice(e,t,n=dn){const a=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=c_(s,a),l=bp(o,n),c={client:o,tagName:t.tagName.toLowerCase(),display:a.display},f={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:c,displaceBy:f,client:o,page:l}}function lce(e){const t=XN("draggable"),{descriptor:n,registry:a,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}=e,f=qt(()=>({canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}),[o,c,l]),h=pt(v=>{const j=s();return j||Ke(),ice(n,j,v)},[n,s]),u=qt(()=>({uniqueId:t,descriptor:n,options:f,getDimension:h}),[n,h,f,t]),m=x.useRef(u),p=x.useRef(!0);va(()=>(a.draggable.register(m.current),()=>a.draggable.unregister(m.current)),[a.draggable]),va(()=>{if(p.current){p.current=!1;return}const v=m.current;m.current=u,a.draggable.update(u,v)},[u,a.draggable])}var QN=bt.createContext(null);function kp(e){const t=x.useContext(e);return t||Ke(),t}function cce(e){e.preventDefault()}const dce=e=>{const t=x.useRef(null),n=pt((E=null)=>{t.current=E},[]),a=pt(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:l}=kp(Ug),{type:c,droppableId:f}=kp(QN),h=qt(()=>({id:e.draggableId,index:e.index,type:c,droppableId:f}),[e.draggableId,e.index,c,f]),{children:u,draggableId:m,isEnabled:p,shouldRespectForcePress:v,canDragInteractiveElements:j,isClone:y,mapped:b,dropAnimationFinished:N}=e;if(!y){const E=qt(()=>({descriptor:h,registry:l,getDraggableRef:a,canDragInteractiveElements:j,shouldRespectForcePress:v,isEnabled:p}),[h,l,a,j,v,p]);lce(E)}const P=qt(()=>p?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:cce}:null,[s,o,m,p]),A=pt(E=>{b.type==="DRAGGING"&&b.dropping&&E.propertyName==="transform"&&so.flushSync(N)},[N,b]),k=qt(()=>{const E=oce(b),O=b.type==="DRAGGING"&&b.dropping?A:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":m,style:E,onTransitionEnd:O},dragHandleProps:P}},[s,P,m,b,A,n]),I=qt(()=>({draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}),[h.droppableId,h.id,h.index,h.type]);return bt.createElement(bt.Fragment,null,u(k,b.snapshot,I))};var n6=(e,t)=>e===t,a6=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const uce=e=>e.combine?e.combine.draggableId:null,fce=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function hce(){const e=cn((s,o)=>({x:s,y:o})),t=cn((s,o,l=null,c=null,f=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!f,dropAnimation:f,mode:s,draggingOver:l,combineWith:c,combineTargetFor:null})),n=cn((s,o,l,c,f=null,h=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:f,combineWith:h,mode:o,offset:s,dimension:l,forceShouldAnimate:u,snapshot:t(o,c,f,h,null)}}));return(s,o)=>{if(Uu(s)){if(s.critical.draggable.id!==o.draggableId)return null;const l=s.current.client.offset,c=s.dimensions.draggables[o.draggableId],f=xa(s.impact),h=fce(s.impact),u=s.forceShouldAnimate;return n(e(l.x,l.y),s.movementMode,c,o.isClone,f,h,u)}if(s.phase==="DROP_ANIMATING"){const l=s.completed;if(l.result.draggableId!==o.draggableId)return null;const c=o.isClone,f=s.dimensions.draggables[o.draggableId],h=l.result,u=h.mode,m=a6(h),p=uce(h),j={duration:s.dropDuration,curve:qN.drop,moveTo:s.newHomeClientOffset,opacity:p?Lu.opacity.drop:null,scale:p?Lu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:f,dropping:j,draggingOver:m,combineWith:p,mode:u,forceShouldAnimate:null,snapshot:t(u,c,m,p,j)}}}return null}}function s6(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const mce={mapped:{type:"SECONDARY",offset:dn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:s6(null)}};function pce(){const e=cn((l,c)=>({x:l,y:c})),t=cn(s6),n=cn((l,c=null,f)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:c,shouldAnimateDisplacement:f,snapshot:t(c)}})),a=l=>l?n(dn,l,!0):null,s=(l,c,f,h)=>{const u=f.displaced.visible[l],m=!!(h.inVirtualList&&h.effected[l]),p=$g(f),v=p&&p.draggableId===l?c:null;if(!u){if(!m)return a(v);if(f.displaced.invisible[l])return null;const b=td(h.displacedBy.point),N=e(b.x,b.y);return n(N,v,!0)}if(m)return a(v);const j=f.displacedBy.point,y=e(j.x,j.y);return n(y,v,u.shouldAnimate)};return(l,c)=>{if(Uu(l))return l.critical.draggable.id===c.draggableId?null:s(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const f=l.completed;return f.result.draggableId===c.draggableId?null:s(c.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null}}const gce=()=>{const e=hce(),t=pce();return(a,s)=>e(a,s)||t(a,s)||mce},xce={dropAnimationFinished:__},vce=MR(gce,xce,null,{context:YN,areStatePropsEqual:n6})(dce);function o6(e){return kp(QN).isUsingCloneFor===e.draggableId&&!e.isClone?null:bt.createElement(vce,e)}function Pp(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,a=!!e.shouldRespectForcePress;return bt.createElement(o6,jp({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:a}))}const i6=e=>t=>e===t,yce=i6("scroll"),bce=i6("auto"),BI=(e,t)=>t(e.overflowX)||t(e.overflowY),jce=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return BI(n,yce)||BI(n,bce)},wce=()=>!1,l6=e=>e==null?null:e===document.body?wce()?e:null:e===document.documentElement?null:jce(e)?e:l6(e.parentElement);var pj=e=>({x:e.scrollLeft,y:e.scrollTop});const c6=e=>e?window.getComputedStyle(e).position==="fixed"?!0:c6(e.parentElement):!1;var Nce=e=>{const t=l6(e),n=c6(e);return{closestScrollable:t,isFixedOnPage:n}},Sce=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:a,direction:s,client:o,page:l,closest:c})=>{const f=(()=>{if(!c)return null;const{scrollSize:p,client:v}=c,j=z_({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:j,diff:{value:dn,displacement:dn}}}})(),h=s==="vertical"?$N:y_,u=Tc({page:l,withPlaceholder:null,axis:h,frame:f});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:a,axis:h,isEnabled:t,client:o,page:l,frame:f,subject:u}};const Cce=(e,t)=>{const n=d_(e);if(!t||e!==t)return n;const a=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,o=a+t.scrollHeight,l=s+t.scrollWidth,f=MN({top:a,right:l,bottom:o,left:s},n.border);return TN({borderBox:f,margin:n.margin,border:n.border,padding:n.padding})};var kce=({ref:e,descriptor:t,env:n,windowScroll:a,direction:s,isDropDisabled:o,isCombineEnabled:l,shouldClipSubject:c})=>{const f=n.closestScrollable,h=Cce(e,f),u=bp(h,a),m=(()=>{if(!f)return null;const v=d_(f),j={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:v,page:bp(v,a),scroll:pj(f),scrollSize:j,shouldClipSubject:c}})();return Sce({descriptor:t,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:s,client:h,page:u,closest:m})};const Pce={passive:!1},Ece={passive:!0};var VI=e=>e.shouldPublishImmediately?Pce:Ece;const sm=e=>e&&e.env.closestScrollable||null;function Ace(e){const t=x.useRef(null),n=kp(Ug),a=XN("droppable"),{registry:s,marshal:o}=n,l=Y_(e),c=qt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),f=x.useRef(c),h=qt(()=>cn((k,I)=>{t.current||Ke();const E={x:k,y:I};o.updateDroppableScroll(c.id,E)}),[c.id,o]),u=pt(()=>{const k=t.current;return!k||!k.env.closestScrollable?dn:pj(k.env.closestScrollable)},[]),m=pt(()=>{const k=u();h(k.x,k.y)},[u,h]),p=qt(()=>Ru(m),[m]),v=pt(()=>{const k=t.current,I=sm(k);if(k&&I||Ke(),k.scrollOptions.shouldPublishImmediately){m();return}p()},[p,m]),j=pt((k,I)=>{t.current&&Ke();const E=l.current,O=E.getDroppableRef();O||Ke();const C=Nce(O),M={ref:O,descriptor:c,env:C,scrollOptions:I};t.current=M;const F=kce({ref:O,descriptor:c,env:C,windowScroll:k,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),V=C.closestScrollable;return V&&(V.setAttribute($I.contextId,n.contextId),V.addEventListener("scroll",v,VI(M.scrollOptions))),F},[n.contextId,c,v,l]),y=pt(()=>{const k=t.current,I=sm(k);return k&&I||Ke(),pj(I)},[]),b=pt(()=>{const k=t.current;k||Ke();const I=sm(k);t.current=null,I&&(p.cancel(),I.removeAttribute($I.contextId),I.removeEventListener("scroll",v,VI(k.scrollOptions)))},[v,p]),N=pt(k=>{const I=t.current;I||Ke();const E=sm(I);E||Ke(),E.scrollTop+=k.y,E.scrollLeft+=k.x},[]),P=qt(()=>({getDimensionAndWatchScroll:j,getScrollWhileDragging:y,dragStopped:b,scroll:N}),[b,j,y,N]),A=qt(()=>({uniqueId:a,descriptor:c,callbacks:P}),[P,c,a]);va(()=>(f.current=A.descriptor,s.droppable.register(A),()=>{t.current&&b(),s.droppable.unregister(A)}),[P,c,b,A,o,s.droppable]),va(()=>{t.current&&o.updateDroppableIsEnabled(f.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),va(()=>{t.current&&o.updateDroppableIsCombineEnabled(f.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function Ty(){}const qI={width:0,height:0,margin:Fse},Ice=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?qI:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Dce=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const a=Ice({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?fu.placeholder:null}},Oce=e=>{const t=x.useRef(null),n=pt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:a,onTransitionEnd:s,onClose:o,contextId:l}=e,[c,f]=x.useState(e.animate==="open");x.useEffect(()=>c?a!=="open"?(n(),f(!1),Ty):t.current?Ty:(t.current=setTimeout(()=>{t.current=null,f(!1)}),n):Ty,[a,c,n]);const h=pt(m=>{m.propertyName==="height"&&(s(),a==="close"&&o())},[a,o,s]),u=Dce({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return bt.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":l,onTransitionEnd:h,ref:e.innerRef})};var Mce=bt.memo(Oce);class Tce extends bt.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Rce=e=>{const t=x.useContext(Ug);t||Ke();const{contextId:n,isMovementAllowed:a}=t,s=x.useRef(null),o=x.useRef(null),{children:l,droppableId:c,type:f,mode:h,direction:u,ignoreContainerClipping:m,isDropDisabled:p,isCombineEnabled:v,snapshot:j,useClone:y,updateViewportMaxScroll:b,getContainerForClone:N}=e,P=pt(()=>s.current,[]),A=pt((V=null)=>{s.current=V},[]);pt(()=>o.current,[]);const k=pt((V=null)=>{o.current=V},[]),I=pt(()=>{a()&&b({maxScroll:B_()})},[a,b]);Ace({droppableId:c,type:f,mode:h,direction:u,isDropDisabled:p,isCombineEnabled:v,ignoreContainerClipping:m,getDroppableRef:P});const E=qt(()=>bt.createElement(Tce,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:V,data:T,animate:L})=>bt.createElement(Mce,{placeholder:T,onClose:V,innerRef:k,animate:L,contextId:n,onTransitionEnd:I})),[n,I,e.placeholder,e.shouldAnimatePlaceholder,k]),O=qt(()=>({innerRef:A,placeholder:E,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":n}}),[n,c,E,A]),C=y?y.dragging.draggableId:null,M=qt(()=>({droppableId:c,type:f,isUsingCloneFor:C}),[c,C,f]);function F(){if(!y)return null;const{dragging:V,render:T}=y,L=bt.createElement(o6,{draggableId:V.draggableId,index:V.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(U,J)=>T(U,J,V));return W$.createPortal(L,N())}return bt.createElement(QN.Provider,{value:M},l(O,j),F())};function _ce(){return document.body||Ke(),document.body}const GI={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_ce},d6=e=>{let t={...e},n;for(n in GI)e[n]===void 0&&(t={...t,[n]:GI[n]});return t},Ry=(e,t)=>e===t.droppable.type,HI=(e,t)=>t.draggables[e.draggable.id],$ce=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=cn(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),a=cn((o,l,c,f,h,u)=>{const m=h.descriptor.id;if(h.descriptor.droppableId===o){const j=u?{render:u,dragging:n(h.descriptor)}:null,y={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:j}}if(!l)return t;if(!f)return e;const v={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}});return(o,l)=>{const c=d6(l),f=c.droppableId,h=c.type,u=!c.isDropDisabled,m=c.renderClone;if(Uu(o)){const p=o.critical;if(!Ry(h,p))return t;const v=HI(p,o.dimensions),j=xa(o.impact)===f;return a(f,u,j,j,v,m)}if(o.phase==="DROP_ANIMATING"){const p=o.completed;if(!Ry(h,p.critical))return t;const v=HI(p.critical,o.dimensions);return a(f,u,a6(p.result)===f,xa(p.impact)===f,v,m)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const p=o.completed;if(!Ry(h,p.critical))return t;const v=xa(p.impact)===f,j=!!(p.impact.at&&p.impact.at.type==="COMBINE"),y=p.critical.droppable.id===f;return v?j?e:t:y?e:t}return t}},Fce={updateViewportMaxScroll:Xoe},Lce=MR($ce,Fce,(e,t,n)=>({...d6(n),...e,...t}),{context:YN,areStatePropsEqual:n6})(Rce);var Ep=Lce;const zce=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState(!1);x.useEffect(()=>{const p=localStorage.getItem("launchpad_structure"),v=localStorage.getItem("launchpad_hidden"),j=Wy.filter(y=>y.id!=="inicio");if(v)try{s(JSON.parse(v))}catch{}if(p)try{let b=JSON.parse(p).map(P=>{const A=j.find(k=>k.id===P.id);return A?{...A,id:P.id,label:P.label,subItems:P.subItems.map(k=>{let I=null;return j.forEach(E=>{const O=E.subItems?.find(C=>C.path===k.path);O&&(I=O)}),I||k})}:null}).filter(Boolean);const N=j.filter(P=>!b.some(A=>A.id===P.id));N.length>0&&(b=[...b,...N]),n(b)}catch{n(j)}else n(j)},[]);const c=(p,v=a)=>{n(p);const j=p.map(y=>({id:y.id,label:y.label,subItems:y.subItems?.map(b=>({label:b.label,path:b.path,highlight:b.highlight}))||[]}));localStorage.setItem("launchpad_structure",JSON.stringify(j)),localStorage.setItem("launchpad_hidden",JSON.stringify(v))},f=p=>{const v=a.includes(p)?a.filter(j=>j!==p):[...a,p];s(v),localStorage.setItem("launchpad_hidden",JSON.stringify(v))},h=()=>{window.confirm("Restablecer el men a su estado original?")&&(localStorage.removeItem("launchpad_structure"),localStorage.removeItem("launchpad_hidden"),window.location.reload())},u=p=>{const{source:v,destination:j,type:y}=p;if(j){if(y==="MODULE"){const b=Array.from(t),[N]=b.splice(v.index,1);b.splice(j.index,0,N),c(b);return}if(y==="SUBITEM"){const b=t.findIndex(O=>O.id===v.droppableId),N=t.findIndex(O=>O.id===j.droppableId);if(b===-1||N===-1)return;const P=[...t],A={...P[b]},k={...P[N]},I=Array.from(A.subItems||[]),[E]=I.splice(v.index,1);if(v.droppableId===j.droppableId)I.splice(j.index,0,E),A.subItems=I,P[b]=A;else{const O=Array.from(k.subItems||[]);O.splice(j.index,0,E),A.subItems=I,k.subItems=O,P[b]=A,P[N]=k}c(P)}}},m=o?t:t.filter(p=>!a.includes(p.id));return r.jsx("div",{className:"min-h-screen bg-gray-50 p-6 lg:p-12 animate-in fade-in duration-500 overflow-y-auto font-sans",children:r.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-10",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[r.jsx("div",{className:"p-2 bg-hd-orange rounded-lg shadow-lg shadow-hd-orange/20",children:r.jsx(cl,{size:22,className:"text-white"})}),r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-widest uppercase italic",children:"Mapa Operativo"})]}),r.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-[0.4em] text-[10px] flex items-center gap-2 font-mono",children:"Personalizacin y Control Unificado"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(re,{variant:o?"hd-orange":"outline",size:"sm",className:`font-bold uppercase tracking-tight text-[10px] h-10 px-4 ${o?"bg-hd-orange text-white":"bg-white text-gray-400 border-gray-200 hover:text-hd-orange"}`,onClick:()=>l(!o),children:[r.jsx(By,{size:16,className:"mr-2"}),o?"Guardar Cambios":"Personalizar Vista"]}),r.jsx(re,{variant:"outline",size:"sm",className:"bg-white text-gray-300 hover:text-red-500 border-gray-100 h-10",onClick:h,children:r.jsx(Qn,{size:14})}),r.jsx(re,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-hd-orange hover:bg-orange-50 rounded-full h-12 w-12 transition-colors",onClick:()=>e("/"),children:r.jsx(It,{size:32})})]})]}),o&&r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-hd-orange/20 shadow-sm animate-in slide-in-from-top duration-300",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(By,{size:18,className:"text-hd-orange"}),r.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-gray-900 italic",children:"Gestin de Visibilidad"})]}),r.jsx("div",{className:"flex flex-wrap gap-4",children:t.map(p=>{const v=a.includes(p.id);return r.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-all cursor-pointer ${v?"bg-gray-50 border-gray-100 opacity-60":"bg-orange-50 border-orange-100 text-hd-orange"}`,children:[r.jsx("input",{type:"checkbox",checked:!v,onChange:()=>f(p.id),className:"accent-hd-orange h-4 w-4"}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-tighter",children:p.label})]},p.id)})}),r.jsx("p",{className:"text-[9px] text-gray-400 mt-4 italic font-bold uppercase tracking-wider",children:"* Los mdulos desmarcados no aparecern en la vista normal. Puedes arrastrar los paneles abajo para reordenarlos."})]}),r.jsx(r6,{onDragEnd:u,children:r.jsx(Ep,{droppableId:"all-modules",direction:"horizontal",type:"MODULE",children:p=>r.jsxs("div",{...p.droppableProps,ref:p.innerRef,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12 pb-20",children:[m.map((v,j)=>{const y=v.icon||ll,b=a.includes(v.id);return r.jsx(Pp,{draggableId:v.id,index:j,isDragDisabled:!o,children:(N,P)=>r.jsx(Be,{ref:N.innerRef,...N.draggableProps,className:`border-none shadow-md bg-white hover:shadow-xl transition-all duration-300 flex flex-col relative ${P.isDragging?"ring-2 ring-hd-orange shadow-2xl scale-105 z-50":""} ${b&&o?"opacity-50 grayscale":""}`,children:r.jsxs("div",{className:"p-5 flex-grow flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg border transition-colors ${b?"bg-gray-100 text-gray-400":"bg-orange-50 text-hd-orange border-orange-100"}`,children:r.jsx(y,{size:20})}),r.jsx("h2",{className:"text-lg font-black text-gray-800 tracking-tight uppercase italic",children:v.label})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[o&&r.jsx("button",{onClick:()=>f(v.id),className:`p-1.5 rounded-full transition-colors ${b?"text-gray-400 hover:text-green-500 bg-gray-50":"text-hd-orange hover:text-gray-400 bg-orange-50"}`,title:b?"Mostrar":"Ocultar",children:b?r.jsx(bj,{size:16}):r.jsx(oi,{size:16})}),o&&r.jsx("div",{...N.dragHandleProps,className:"text-gray-300 hover:text-hd-orange cursor-grab active:cursor-grabbing p-1",children:r.jsx(Uy,{size:18})})]})]}),r.jsx(Ep,{droppableId:v.id,type:"SUBITEM",isDropDisabled:!o&&!v.id.includes("utilidades"),children:(A,k)=>r.jsxs("div",{...A.droppableProps,ref:A.innerRef,className:`flex-grow space-y-1 p-2 rounded-lg transition-colors min-h-[50px] ${k.isDraggingOver?"bg-orange-50/50 outline-2 outline-dashed outline-hd-orange/20":""}`,children:[v.subItems?.map((I,E)=>{const O=I.icon||ar,C=`${v.id}-${I.path}-${E}`;return r.jsx(Pp,{draggableId:C,index:E,isDragDisabled:!o,children:(M,F)=>r.jsxs("div",{ref:M.innerRef,...M.draggableProps,...M.dragHandleProps,onClick:()=>!F.isDragging&&e(I.path),className:`flex items-center group cursor-pointer p-3 rounded-lg transition-all border border-transparent ${F.isDragging?"bg-white shadow-xl scale-105 border-hd-orange z-[100]":"hover:bg-gray-50"} ${I.highlight?"bg-orange-50/50 border-orange-100":""}`,children:[r.jsx("div",{className:`p-1.5 rounded bg-gray-100 mr-3 transition-colors ${I.highlight?"text-hd-orange":"text-gray-400 group-hover:text-hd-orange"}`,children:r.jsx(O,{size:14})}),r.jsx("div",{className:"flex-grow",children:r.jsx("span",{className:`text-[11px] font-bold uppercase tracking-wider transition-colors ${I.highlight?"text-hd-orange":"text-gray-600 group-hover:text-gray-900"}`,children:I.label})}),r.jsx(ar,{size:12,className:`transition-all text-hd-orange ${F.isDragging?"opacity-100":"opacity-0 group-hover:opacity-100 group-hover:translate-x-1"}`})]})},C)}),A.placeholder]})})]})})},v.id)}),p.placeholder]})})}),r.jsx("div",{className:"text-center opacity-40 pt-8 border-t border-gray-200",children:r.jsx("p",{className:"text-gray-400 text-[10px] font-black uppercase tracking-[0.5em]",children:"CENTRO DE CONTROL PERSONALIZABLE  v1.3.0"})})]})})},Cs="http://localhost:5006/api",Uce=()=>{const[e,t]=x.useState({showStockBreakdown:!0,enableBeep:!0,defaultWarehouseId:null,filterByCurrency:!1,filterByPriceLevel:!1,selectedPriceLevel:"",distributionDefaultUnit:"UND",distributionUseSeparateSequence:!1,enableStockTooltip:!0}),[n,a]=x.useState({id:0,code:"SALES_INVOICE",prefix:"FACT-",currentValue:0,length:6}),[s,o]=x.useState({id:0,code:"DIST_INVOICE",prefix:"DIST-",currentValue:0,length:6}),[l,c]=x.useState({id:0,code:"QUOTATION",prefix:"COT-",currentValue:0,length:6}),[f,h]=x.useState({id:0,code:"RETURN_SEQUENCE",prefix:"DEV-",currentValue:0,length:6}),[u,m]=x.useState({defaultClientId:null}),[p,v]=x.useState([]),[j,y]=x.useState([]),[b,N]=x.useState([]),[P,A]=x.useState(!1),[k,I]=x.useState(null);x.useEffect(()=>{const C=localStorage.getItem("pos_config");if(C)try{const U=JSON.parse(C);t(J=>({...J,...U}))}catch(U){console.error("Failed to parse saved POS config",U)}const M=async()=>{try{const U=await za();if(v(U),I(null),!e.defaultWarehouseId&&U.length>0){const J=U[0].id??U[0].Id;t(q=>({...q,defaultWarehouseId:J}))}}catch(U){console.error(U),I(U.message)}},F=async()=>{try{const U=await fetch(`${Cs}/Clients`);if(U.ok){const J=await U.json();y(Array.isArray(J)?J:J.value||[])}}catch(U){console.error("Error fetching clients:",U)}},V=async()=>{try{const U=await kc();N(U)}catch(U){console.error("Error fetching price levels:",U)}},T=async()=>{try{const U=await fetch(`${Cs}/Sequences`);if(U.ok){const J=await U.json(),q=J.find(B=>B.code==="SALES_INVOICE");q&&a(q);const W=J.find(B=>B.code==="DIST_INVOICE");W&&o(W);const z=J.find(B=>B.code==="QUOTATION");z&&c(z);const K=J.find(B=>B.code==="RETURN_SEQUENCE");K&&h(K)}}catch(U){console.error("Error fetching sequences:",U)}},L=async()=>{try{const U=await fetch(`${Cs}/CompanyConfiguration`);if(U.ok){const J=await U.json();m(J||{})}}catch(U){console.error("Error fetching company config:",U)}};M(),F(),V(),T(),L()},[]);const E=(C,M)=>{t(F=>{const V={...F,[C]:M};return localStorage.setItem("pos_config",JSON.stringify(V)),window.dispatchEvent(new Event("pos_config_changed")),V})},O=async()=>{A(!0);try{if(n.id&&await fetch(`${Cs}/Sequences/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),e.distributionUseSeparateSequence&&s.id&&await fetch(`${Cs}/Sequences/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),l.id?await fetch(`${Cs}/Sequences/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}):await fetch(`${Cs}/Sequences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,code:"QUOTATION",name:"Cotizacin"})}),f.id?await fetch(`${Cs}/Sequences/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}):await fetch(`${Cs}/Sequences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,code:"RETURN_SEQUENCE",name:"Devolucin"})}),(await fetch(`${Cs}/CompanyConfiguration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)alert("Configuracin guardada correctamente");else throw new Error("Error al guardar configuracin de empresa")}catch(C){console.error(C),alert("Error al guardar cambios")}finally{A(!1)}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-4xl mx-auto p-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Configuracin de POS"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Personalice el comportamiento y la visualizacin del terminal de punto de venta."})]}),r.jsxs(ED,{defaultValue:"general",className:"w-full",children:[r.jsxs(AD,{className:"mb-4",children:[r.jsx(hc,{value:"general",children:"General"}),r.jsx(hc,{value:"distribucion",children:"Ventas Distribucin"}),r.jsx(hc,{value:"cotizaciones",children:"Cotizaciones"}),r.jsx(hc,{value:"devoluciones",children:"Devoluciones"})]}),r.jsxs(mc,{value:"general",className:"space-y-6",children:[r.jsxs(Be,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(vt,{className:"flex items-center gap-2",children:[r.jsx(vm,{className:"h-5 w-5 text-hd-orange"}),"Interfaz de Venta"]})}),r.jsxs(Pt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Almacn Predeterminado"}),r.jsxs("select",{value:e.defaultWarehouseId??"",onChange:C=>E("defaultWarehouseId",parseInt(C.target.value)||null),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-hd-orange focus:border-hd-orange p-2.5",children:[r.jsx("option",{value:"",children:"-- Seleccione --"}),p.map((C,M)=>r.jsx("option",{value:C.id||C.Id,children:C.nombre||C.Nombre},C.id||C.Id||M))]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Se selecciona al abrir el POS."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Cliente Predeterminado"}),r.jsxs("select",{value:u.defaultClientId??"",onChange:C=>m(M=>({...M,defaultClientId:parseInt(C.target.value)||null})),className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-hd-orange focus:border-hd-orange p-2.5",children:[r.jsx("option",{value:"",children:"-- Seleccione (Por defecto: Consumidor Final) --"}),j.map((C,M)=>r.jsx("option",{value:C.id||C.Id,children:C.name||C.Name},C.id||C.Id||M))]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Se carga automticamente en la venta."})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Permitir Venta sin Stock"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Permitir facturar artculos con inventario cero o negativo."})]}),r.jsx("button",{onClick:()=>m(C=>({...C,allowNegativeStock:!C.allowNegativeStock})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ${u.allowNegativeStock?"bg-hd-orange":"bg-gray-200"}`,children:r.jsx("span",{className:`${u.allowNegativeStock?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Desglose de Stock"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver existencia por almacn al pasar el mouse."})]}),r.jsx("button",{onClick:()=>E("showStockBreakdown",!e.showStockBreakdown),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ${e.showStockBreakdown?"bg-hd-orange":"bg-gray-200"}`,children:r.jsx("span",{className:`${e.showStockBreakdown?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Sonido (Beep)"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Reproduce sonido al escanear."})]}),r.jsx("button",{onClick:()=>E("enableBeep",!e.enableBeep),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ${e.enableBeep!==!1?"bg-hd-orange":"bg-gray-200"}`,children:r.jsx("span",{className:`${e.enableBeep!==!1?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Filtrar por Moneda del Cliente"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ocultar artculos que no tengan precio en la moneda del cliente."})]}),r.jsx("button",{onClick:()=>E("filterByCurrency",!e.filterByCurrency),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ${e.filterByCurrency?"bg-hd-orange":"bg-gray-200"}`,children:r.jsx("span",{className:`${e.filterByCurrency?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]}),r.jsx("div",{className:"flex items-center justify-between col-span-1 md:col-span-2 border-t border-gray-100 pt-4 mt-2",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Filtrar por Nivel de Precio"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Solo mostrar artculos que tengan precio definido en el nivel seleccionado."})]}),r.jsx("button",{onClick:()=>E("filterByPriceLevel",!e.filterByPriceLevel),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-hd-orange focus:ring-offset-2 ${e.filterByPriceLevel?"bg-hd-orange":"bg-gray-200"}`,children:r.jsx("span",{className:`${e.filterByPriceLevel?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]}),e.filterByPriceLevel&&r.jsxs("div",{className:"mt-2 animate-in slide-in-from-top-2 duration-300",children:[r.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block",children:"Nivel de Precio requerido"}),r.jsxs("select",{value:e.selectedPriceLevel||"",onChange:C=>E("selectedPriceLevel",C.target.value),className:"w-full md:w-1/2 bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-hd-orange focus:border-hd-orange p-2.5",children:[r.jsx("option",{value:"",children:"-- Seleccione Nivel --"}),b.map((C,M)=>r.jsx("option",{value:C.nombre||C.Nombre,children:C.nombre||C.Nombre},M))]})]})]})})]})]})]}),r.jsxs(Be,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(vt,{className:"flex items-center gap-2",children:[r.jsx(Ft,{className:"h-5 w-5 text-blue-600"}),"Secuencia de Ventas (Facturas)"]})}),r.jsxs(Pt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:n.prefix||"",onChange:C=>a({...n,prefix:C.target.value}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: FACT-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secuencia Actual"}),r.jsx("input",{type:"number",value:n.currentValue,onChange:C=>a({...n,currentValue:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Siguiente: ",n.prefix,String(n.currentValue+1).padStart(n.length,"0")]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ceros a la Izquierda"}),r.jsx("input",{type:"number",value:n.length,onChange:C=>a({...n,length:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:O,disabled:P,className:"bg-blue-600 hover:bg-blue-700",children:P?"Guardando...":"Guardar Configuracin"})})]})]})]}),r.jsx(mc,{value:"distribucion",children:r.jsxs(Be,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(vt,{className:"flex items-center gap-2",children:[r.jsx(vm,{className:"h-5 w-5 text-purple-600"}),"Configuracin de Distribucin"]})}),r.jsxs(Pt,{className:"p-6 space-y-6",children:[r.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-100 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-yellow-900 text-sm",children:"Control de Inventario (Global)"}),r.jsx("p",{className:"text-xs text-yellow-700",children:"Permitir facturar artculos con inventario cero o negativo."})]}),r.jsx("button",{onClick:()=>m(C=>({...C,allowNegativeStock:!C.allowNegativeStock})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 ${u.allowNegativeStock?"bg-yellow-500":"bg-gray-200"}`,children:r.jsx("span",{className:`${u.allowNegativeStock?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]})}),r.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-medium text-blue-900 text-sm",children:"Tooltip de Inventario"}),r.jsx("p",{className:"text-xs text-blue-700",children:"Mostrar desglose de stock por almacn al pasar el mouse sobre un producto."})]}),r.jsx("button",{onClick:()=>E("enableStockTooltip",!e.enableStockTooltip),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${e.enableStockTooltip?"bg-blue-600":"bg-gray-200"}`,children:r.jsx("span",{className:`${e.enableStockTooltip?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm`})})]})}),r.jsxs("div",{className:"space-y-2 max-w-md",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Unidad Predeterminada"}),r.jsx("input",{type:"text",value:e.distributionDefaultUnit||"UND",onChange:C=>E("distributionDefaultUnit",C.target.value),className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-600 focus:border-purple-600 p-2.5",placeholder:"Ej: UND, CAJA, LBS"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Unidad por defecto al agregar productos si no tienen una definida."})]}),r.jsx("hr",{className:"border-gray-100"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:"Secuencia de Numeracin"}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"seqStrategy",checked:!e.distributionUseSeparateSequence,onChange:()=>E("distributionUseSeparateSequence",!1),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-sm font-medium text-gray-900",children:"Usar la misma secuencia de Ventas"}),r.jsxs("span",{className:"block text-xs text-gray-500",children:["Las facturas de distribucin seguirn el consecutivo general (",n.prefix,"...)."]})]})]}),r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"seqStrategy",checked:e.distributionUseSeparateSequence,onChange:()=>E("distributionUseSeparateSequence",!0),className:"w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-sm font-medium text-gray-900",children:"Usar secuencia independiente"}),r.jsx("span",{className:"block text-xs text-gray-500",children:"Crear una numeracin separada para el mdulo de distribucin."})]})]})]})]}),e.distributionUseSeparateSequence&&r.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-100 animate-in fade-in slide-in-from-top-2",children:[r.jsx("h4",{className:"text-sm font-bold text-purple-800 mb-3",children:"Configurar Secuencia de Distribucin"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-purple-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:s.prefix||"",onChange:C=>o({...s,prefix:C.target.value}),className:"w-full bg-white border border-purple-200 rounded p-2 text-sm focus:ring-purple-500 focus:border-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-purple-700 mb-1",children:"Actual"}),r.jsx("input",{type:"number",value:s.currentValue,onChange:C=>o({...s,currentValue:parseInt(C.target.value)}),className:"w-full bg-white border border-purple-200 rounded p-2 text-sm focus:ring-purple-500 focus:border-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-purple-700 mb-1",children:"Longitud"}),r.jsx("input",{type:"number",value:s.length,onChange:C=>o({...s,length:parseInt(C.target.value)}),className:"w-full bg-white border border-purple-200 rounded p-2 text-sm focus:ring-purple-500 focus:border-purple-500"})]})]}),r.jsxs("p",{className:"text-xs text-purple-600 mt-2",children:["Ejemplo de prxima factura: ",r.jsxs("strong",{children:[s.prefix,String(s.currentValue+1).padStart(s.length,"0")]})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:O,disabled:P,className:"bg-purple-600 hover:bg-purple-700",children:P?"Guardando...":"Guardar Cambios"})})]})]})}),r.jsx(mc,{value:"cotizaciones",children:r.jsxs(Be,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(vt,{className:"flex items-center gap-2",children:[r.jsx(Ft,{className:"h-5 w-5 text-emerald-600"}),"Secuencia de Cotizaciones"]})}),r.jsxs(Pt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:l.prefix||"",onChange:C=>c({...l,prefix:C.target.value}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Ej: COT-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secuencia Actual"}),r.jsx("input",{type:"number",value:l.currentValue,onChange:C=>c({...l,currentValue:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud"}),r.jsx("input",{type:"number",value:l.length,onChange:C=>c({...l,length:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-emerald-500 focus:border-emerald-500"})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:O,disabled:P,className:"bg-emerald-600 hover:bg-emerald-700",children:P?"Guardando...":"Guardar Secuencia"})})]})]})}),r.jsx(mc,{value:"devoluciones",children:r.jsxs(Be,{className:"shadow-lg border-none overflow-hidden",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(vt,{className:"flex items-center gap-2",children:[r.jsx(Ft,{className:"h-5 w-5 text-red-600"}),"Secuencia de Devoluciones"]})}),r.jsxs(Pt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:f.prefix||"",onChange:C=>h({...f,prefix:C.target.value}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-red-500 focus:border-red-500",placeholder:"Ej: DEV-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secuencia Actual"}),r.jsx("input",{type:"number",value:f.currentValue,onChange:C=>h({...f,currentValue:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-red-500 focus:border-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud"}),r.jsx("input",{type:"number",value:f.length,onChange:C=>h({...f,length:parseInt(C.target.value)}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-red-500 focus:border-red-500"})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:O,disabled:P,className:"bg-red-600 hover:bg-red-700",children:P?"Guardando...":"Guardar Secuencia"})})]})]})})]})]})},WI="http://localhost:5006/api",Bce=()=>{const[e,t]=x.useState([]),[n,a]=x.useState(!1),[s,o]=x.useState("");x.useEffect(()=>{l()},[]);const l=async()=>{try{const u=await fetch(`${WI}/Sequences`);if(u.ok){const m=await u.json();t(m.filter(p=>["PURCHASE_ORDER","GOODS_RECEIPT","DIRECT_PURCHASE"].includes(p.code)))}}catch(u){console.error("Error fetching sequences:",u)}},c=(u,m,p)=>{t(v=>v.map(j=>j.id===u?{...j,[m]:p}:j))},f=async u=>{a(!0);try{(await fetch(`${WI}/Sequences/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok?(o("Configuracin guardada correctamente"),setTimeout(()=>o(""),3e3)):alert("Eror al guardar")}catch(m){console.error("Error saving:",m),alert("Error al guardar")}finally{a(!1)}},h=(u,m,p)=>{const v=e.find(j=>j.code===u);return v?r.jsxs(Be,{className:"shadow-lg border-none overflow-hidden h-full",children:[r.jsx(gt,{className:"bg-gray-50/50 border-b border-gray-100",children:r.jsxs(vt,{className:"flex items-center gap-2",children:[p,m]})}),r.jsxs(Pt,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefijo"}),r.jsx("input",{type:"text",value:v.prefix||"",onChange:j=>c(v.id,"prefix",j.target.value),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500 font-mono"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secuencia Actual"}),r.jsx("input",{type:"number",value:v.currentValue,onChange:j=>c(v.id,"currentValue",parseInt(j.target.value)),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500 font-mono"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Prximo: ",v.prefix,String(v.currentValue+1).padStart(v.length,"0")]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud (Ceros)"}),r.jsx("input",{type:"number",value:v.length,onChange:j=>c(v.id,"length",parseInt(j.target.value)),className:"w-full bg-gray-50 border border-gray-300 rounded-lg p-2.5 text-sm focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]})]}),r.jsx("div",{className:"flex items-center justify-end pt-4",children:r.jsx(re,{onClick:()=>f(v),disabled:n,className:"bg-blue-600 hover:bg-blue-700 w-full",children:"Guardar Cambios"})})]})]}):null};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 max-w-5xl mx-auto p-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Configuracin de Compras"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Gestione las secuencias de documentos para el ciclo de compras."})]}),s&&r.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-lg text-sm font-medium animate-pulse",children:s})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h("PURCHASE_ORDER","Orden de Compra",r.jsx(Sr,{className:"h-5 w-5 text-blue-600"})),h("GOODS_RECEIPT","Recepcin de Mercanca",r.jsx(An,{className:"h-5 w-5 text-orange-600"})),h("DIRECT_PURCHASE","Factura Directa",r.jsx(Sr,{className:"h-5 w-5 text-emerald-600"}))]})]})},Vce=`
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
    
    @keyframes slideIn {
        from { transform: translateX(20px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    .animate-slide-in { animation: slideIn 0.3s ease forwards; }
`,Ys="http://localhost:5006/api",qce=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(null),[o,l]=x.useState(null),[c,f]=x.useState(!1),[h,u]=x.useState(!1),[m,p]=x.useState("properties"),[v,j]=x.useState([]),[y,b]=x.useState(""),[N,P]=x.useState([]),[A,k]=x.useState([]),[I,E]=x.useState(!1),[O,C]=x.useState(null),[M,F]=x.useState("receipt.NumeroRecibo"),[V,T]=x.useState(!1),[L,U]=x.useState([]),[J,q]=x.useState(!1);x.useEffect(()=>{pe(),me(),W()},[]);const W=async()=>{q(!0);try{const _=await fetch(`${Ys}/Printers`);if(_.ok){const X=await _.json();U(X)}}catch(_){console.error("Error fetching printers:",_)}finally{q(!1)}},[z,K]=x.useState("Informacin Adicional"),[B,R]=x.useState({company:{name:"MI EMPRESA S.A.",rnc:"123-456-789",address:"Calle Principal #123, Santo Domingo",phone:"(809) 555-1234"},receipt:{NumeroRecibo:"REC-0001",NumeroFactura:"FACT-0001",date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),cashier:"Juan Prez",client:"Cliente General",subtotal:100,tax:18,total:118,paymentMethod:"Efectivo",ncf:"B0100000001",ncfExpiration:"31/12/2025",tipoNCF:"Factura de Crdito Fiscal",clientRnc:"101-00000-1",clientAddress:"Av. Winston Churchill, Santo Domingo",items:[{description:"Martillo De Ua 16oz",quantity:1,price:450,total:450,sku:"HER-001",discount:0,tax:81},{description:'Clavos de Acero 2"',quantity:50,price:2.5,total:125,sku:"FER-005",discount:5,tax:22.5},{description:"Cinta Mtrica 5m",quantity:1,price:350,total:350,sku:"HER-002",discount:0,tax:63}]}}),H=x.useMemo(()=>{const _={empresa:[{id:"companyLogo",type:"image",label:"Logo Empresa",source:"company.logoPath",height:60,alignment:"center"},{id:"companyName",type:"text",label:"Nombre Empresa",source:"company.name",fontSize:14,bold:!0,alignment:"center"},{id:"companyRNC",type:"text",label:"RNC",source:"company.rnc",fontSize:10,alignment:"center"},{id:"companyAddress",type:"text",label:"Direccin",source:"company.address",fontSize:9,alignment:"center"},{id:"companyPhone",type:"text",label:"Telfono",source:"company.phone",fontSize:9,alignment:"center"}],recibo:[{id:"invoiceNumber",type:"text",label:"No. Factura",source:"receipt.NumeroFactura",fontSize:10,alignment:"left"},{id:"receiptNumber",type:"text",label:"NumeroRecibo",source:"receipt.NumeroRecibo",fontSize:10,alignment:"left"},{id:"date",type:"text",label:"Fecha",source:"receipt.date",format:"date",fontSize:10,alignment:"left"},{id:"time",type:"text",label:"Hora",source:"receipt.time",format:"time",fontSize:10,alignment:"left"},{id:"cashier",type:"text",label:"Cajero",source:"receipt.cashier",fontSize:10,alignment:"left"},{id:"client",type:"text",label:"Cliente",source:"receipt.client",fontSize:10,alignment:"left"},{id:"clientRnc",type:"text",label:"RNC Cliente",source:"receipt.clientRnc",fontSize:10,alignment:"left"},{id:"clientAddress",type:"text",label:"Direccin Cliente",source:"receipt.clientAddress",fontSize:10,alignment:"left"},{id:"ncf",type:"text",label:"NCF",source:"receipt.ncf",fontSize:10,alignment:"left"},{id:"ncfExpiration",type:"text",label:"Vencimiento NCF",source:"receipt.ncfExpiration",fontSize:9,alignment:"left"},{id:"tipoNCF",type:"text",label:"Tipo NCF",source:"receipt.tipoNCF",fontSize:9,alignment:"left"},{id:"itemsTable",type:"table",label:"Tabla Detalles (Built-in)",source:"receipt.items",fontSize:9}],totales:[{id:"subtotal",type:"text",label:"Subtotal",source:"receipt.subtotal",format:"currency",fontSize:10,alignment:"right"},{id:"itbis",type:"text",label:"ITBIS",source:"receipt.tax",format:"currency",fontSize:10,alignment:"right"},{id:"total",type:"text",label:"Total",source:"receipt.total",format:"currency",fontSize:14,bold:!0,alignment:"right"},{id:"paymentMethod",type:"text",label:"Mtodo Pago",source:"receipt.paymentMethod",fontSize:10,alignment:"left"}],visuales:[{id:"separator",type:"line",label:"Lnea Separadora",style:"solid"},{id:"space_small",type:"space",label:"Espacio Pequeo",height:10},{id:"space_large",type:"space",label:"Espacio Grande",height:20},{id:"customText",type:"text",label:"Texto Simple",text:"Gracias por su compra!",fontSize:12,bold:!0,alignment:"center"},{id:"compositeText",type:"composite",label:"Texto Compuesto",text:"{receipt.NumeroRecibo} - {receipt.date}",fontSize:10,alignment:"center"}]};return y&&N.length>0&&(_.sqlView=N.map(X=>{const ne=X.Name||X.name||X.NAME;return{id:`sql_${y}_${ne}`,type:"text",label:`${ne}`,source:`ext.${ne}`,fontSize:10,alignment:"left"}})),_},[y,N]),Y=[{label:"Nombre Empresa",value:"{company.name}"},{label:"RNC",value:"{company.rnc}"},{label:"Direccin",value:"{company.address}"},{label:"Telfono",value:"{company.phone}"},{label:"NumeroRecibo",value:"{receipt.NumeroRecibo}"},{label:"Fecha",value:"{receipt.date}"},{label:"Hora",value:"{receipt.time}"},{label:"Cajero",value:"{receipt.cashier}"},{label:"Cliente",value:"{receipt.client}"},{label:"RNC Cliente",value:"{receipt.clientRnc}"},{label:"Dir. Cliente",value:"{receipt.clientAddress}"},{label:"NCF",value:"{receipt.ncf}"},{label:"Vencimiento NCF",value:"{receipt.ncfExpiration}"},{label:"Tipo NCF",value:"{receipt.tipoNCF}"},{label:"Subtotal",value:"{receipt.subtotal}"},{label:"ITBIS",value:"{receipt.tax}"},{label:"Total",value:"{receipt.total}"}],ee=x.useMemo(()=>{const _=[{label:"Descripcin",value:"description"},{label:"Cantidad",value:"quantity"},{label:"Precio",value:"price"},{label:"Total Fila",value:"total"},{label:"SKU / Cdigo",value:"sku"},{label:"Descuento",value:"discount"},{label:"ITBIS Art.",value:"tax"}];return y&&N.length>0&&N.forEach(X=>{const ne=X.Name||X.name||X.NAME;_.push({label:`SQL: ${ne}`,value:ne})}),_},[y,N]);x.useEffect(()=>{pe(),We(),me()},[]),x.useEffect(()=>{if(a?.config?.sections){const _=a.config.sections.find(X=>X.viewBinding?.viewName);_&&(console.log("Template has binding, fetching data for:",_.viewBinding.viewName),De(_.viewBinding.viewName))}},[a?.id]);const me=async()=>{E(!0),C(null);try{const _=new AbortController,X=setTimeout(()=>_.abort(),5e3),ne=await fetch(`${Ys}/SqlMetadata/Ping`,{signal:_.signal}).catch(()=>null);ne&&!ne.ok&&console.warn("Ping failed, but continuing with Views fetch...");const ae=await fetch(`${Ys}/SqlMetadata/Views`,{signal:_.signal});if(clearTimeout(X),ae.ok){const ge=await ae.json();console.log("SQL Views loaded:",ge),j(ge),C(null)}else{const ge=await ae.json().catch(()=>({}));C(ge.message||`Error del servidor (${ae.status}): El endpoint no fue encontrado o el backend no est cargando este controlador.`)}}catch(_){console.error("Error fetching SQL views:",_),_.name==="AbortError"?C("La conexin con el servidor SQL tard demasiado (Timeout)."):C("No se pudo conectar con el servidor. Verifique que el API est activo en "+Ys)}finally{E(!1)}},De=async _=>{if(_){E(!0);try{const X=await fetch(`${Ys}/SqlMetadata/Views/${encodeURIComponent(_)}/Columns`);if(X.ok){const ae=await X.json();P(ae),k([])}const ne=await fetch(`${Ys}/SqlMetadata/Execute/${encodeURIComponent(_)}`);if(ne.ok){const ae=await ne.json();let ge=ae;if(Array.isArray(ae)&&(ge=ae.length>0?ae[0]:null),!ge&&data.length>0&&(ge={},data.forEach(be=>{const Fe=be.Name||be.name||be.NAME;ge[Fe]=`[${Fe}]`}),console.log("Generated MOCK data for preview:",ge)),ge){const be={};Object.keys(ge).forEach(Fe=>{be[Fe]=ge[Fe],be[Fe.toLowerCase()]=ge[Fe]}),R(Fe=>({...Fe,ext:be}))}}}catch(X){console.error("Error fetching view metadata:",X)}finally{E(!1)}}},Se=()=>{if(!y||A.length===0)return;const _=`ext_${y.toLowerCase()}_${Date.now()}`,X=A.map((ge,be)=>({id:`field_${_}_${be}`,type:"text",label:ge,source:`ext.${ge}`,fontSize:10,alignment:"left",marginBottom:2})),ne={id:_,name:z,order:(a.config.sections.length>0?Math.max(...a.config.sections.map(ge=>ge.order)):0)+1,visible:!0,fields:X,viewBinding:{viewName:y,mappingField:M}},ae={...a.config,sections:[...a.config.sections,ne]};s({...a,config:ae}),alert("Seccin agregada al final del recibo con los campos seleccionados."),p("properties")},We=async()=>{try{const _=await fetch(`${Ys}/CompanyConfiguration`);if(_.ok){const X=await _.json();R(ne=>({...ne,company:{name:X.nombreEmpresa||ne.company.name,rnc:X.rnc||ne.company.rnc,address:X.direccion||ne.company.address,phone:X.telefono||ne.company.phone,logoPath:X.logoPath?`${Ys.replace("/api","")}${X.logoPath}`:null}}))}}catch(_){console.error("Error fetching company config:",_)}},pe=async()=>{try{const _=await CL();if(n(_),_.length>0){const X=_.find(ne=>ne.porDefecto)||_[0];ue(X.id)}else s({nombre:"Nueva Plantilla",tipoRecibo:"Venta",anchoMM:80,config:{paperWidth:"80mm",padding:0,sections:[{id:"header",name:"Encabezado",order:1,visible:!0,fields:[]},{id:"info",name:"Informacin",order:2,visible:!0,fields:[]},{id:"items",name:"Productos",order:3,visible:!0,type:"table",fields:[]},{id:"totals",name:"Totales",order:4,visible:!0,fields:[]},{id:"footer",name:"Pie",order:5,visible:!0,fields:[]}]}})}catch(_){console.error("Error loading templates:",_)}},ue=async _=>{try{const X=await kL(_),ne=JSON.parse(X.configuracionJSON);s({...X,config:ne})}catch(X){console.error("Error loading template:",X)}},ke=_=>{if(!_.destination)return;const{source:X,destination:ne,draggableId:ae}=_;if(X.droppableId==="palette"){let ge=null;for(const ve of Object.values(H)){const qe=ve.find(Z=>Z.id===ae);if(qe){console.log("Found field in palette:",qe),ge={...qe,id:`${qe.id}_${Date.now()}`};break}}if(!ge){console.warn("Field not found in palette:",ae);return}const be={...a.config},Fe=be.sections.findIndex(ve=>ve.id===ne.droppableId);Fe!==-1&&(be.sections[Fe].fields||(be.sections[Fe].fields=[]),be.sections[Fe].fields.splice(ne.index,0,ge),s({...a,config:be}))}else{const ge={...a.config},be=ge.sections.findIndex(ve=>ve.id===X.droppableId),Fe=ge.sections.findIndex(ve=>ve.id===ne.droppableId);if(be!==-1&&Fe!==-1){const ve=[...ge.sections[be].fields||[]],[qe]=ve.splice(X.index,1);if(X.droppableId===ne.droppableId)ve.splice(ne.index,0,qe),ge.sections[be].fields=ve;else{const Z=[...ge.sections[Fe].fields||[]];Z.splice(ne.index,0,qe),ge.sections[be].fields=ve,ge.sections[Fe].fields=Z}s({...a,config:ge})}}},se=(_,X,ne,ae)=>{const ge={...a.config},be=ge.sections.findIndex(Fe=>Fe.id===_);if(be!==-1){if(_===X)ge.sections[be][ne]=ae;else{const Fe=ge.sections[be].fields.findIndex(ve=>ve.id===X);Fe!==-1&&(ge.sections[be].fields[Fe][ne]=ae)}s({...a,config:ge}),o&&o.id===X&&l({...o,[ne]:ae})}},fe=(_,X)=>{const ne={...a.config},ae=ne.sections.findIndex(ge=>ge.id===_);ae!==-1&&(_===X?(ne.sections[ae].type=void 0,ne.sections[ae].fields=[]):ne.sections[ae].fields=ne.sections[ae].fields.filter(ge=>ge.id!==X),s({...a,config:ne}),o&&o.id===X&&l(null))},Te=(_,X,ne,ae)=>{_.preventDefault(),_.stopPropagation();const ge=_.clientX,be=[...ne.columns||[]],Fe=be[X],ve=be[X+1];if(!Fe||!ve)return;const qe=Fe.width,Z=ve.width,le=_.target.closest(".receipt-table");if(!le)return;const Ce=le.offsetWidth,Oe=Ye=>{const Ot=(Ye.clientX-ge)/Ce*100;let dt=qe+Ot,Lt=Z-Ot;dt<5||Lt<5||(Fe.width=dt,ve.width=Lt,se(ae,ne.id,"columns",[...be]))},Le=()=>{document.removeEventListener("mousemove",Oe),document.removeEventListener("mouseup",Le)};document.addEventListener("mousemove",Oe),document.addEventListener("mouseup",Le)},Re=(_,X)=>{const ne={...a.config,[_]:X};s({...a,config:ne})},Ie=(_,X)=>{if(!_)return"";const ne=_.split(".");let ae=B;for(const ge of ne)ae=ae&&ae[ge]!==void 0?ae[ge]:"";return X==="currency"?`$${Number(ae).toFixed(2)}`:ae},Qe=_=>_?_.replace(/\{([\w\.]+)\}/g,(X,ne)=>{const ae=Ie(ne);return ae??""}):"",Xe=(_,X)=>{const ne=_.alignment||"left",ae=_.fontSize||10,ge=_.bold?"bold":"normal";if(_.type==="line"){const Fe=_.style==="double"?"double":_.style==="dashed"?"dashed":"solid";return r.jsx("hr",{style:{borderTop:`1px ${Fe} #000`,margin:"5px 0"}})}if(_.type==="space")return r.jsx("div",{style:{height:`${_.height||10}px`}});if(_.type==="image"){const Fe=Ie(_.source);return Fe?r.jsx("div",{style:{textAlign:_.alignment||"center",marginBottom:"5px"},children:r.jsx("img",{src:Fe,alt:"logo",style:{maxHeight:`${_.height||60}px`,maxWidth:"100%",objectFit:"contain"}})}):r.jsx("div",{className:"text-red-500 text-xs text-center",children:"[Imagen no encontrada]"})}if(_.type==="table"){const Fe=B.receipt?.items||[],ve=_.columns&&_.columns.length>0?_.columns:[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Prec",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}],qe=Array.isArray(ve)?ve.filter(Le=>Le&&Le.active!==!1):[],Z=_.rowLayout||[{type:"columns"}],le=_.headerBorder||"dashed",Ce=le==="none"?"none":`1px ${le} black`,Oe=Le=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Le||0);return qe.length===0&&Z.length===0?r.jsx("div",{className:"p-2 border border-dashed text-gray-400 text-[10px] text-center italic",children:"Tabla sin configuracin"}):r.jsxs("div",{className:"receipt-table",style:{width:"100%",fontSize:`${ae}px`,fontFamily:"monospace",marginBottom:"5px"},children:[Z.some(Le=>Le.type==="columns")&&r.jsx("div",{style:{display:"flex",borderBottom:Ce,paddingBottom:"2px",marginBottom:"2px",fontWeight:"bold",position:"relative"},children:qe.map((Le,Ye)=>r.jsxs("div",{style:{width:`${Le.width}%`,textAlign:Le.alignment||"left",position:"relative"},children:[Le.label||"Col",_.resizeMode&&Ye<qe.length-1&&r.jsx("div",{onMouseDown:Ze=>Te(Ze,Ye,_,X),style:{position:"absolute",right:0,top:0,bottom:0,width:"10px",cursor:"col-resize",zIndex:10,transform:"translateX(50%)",display:"flex",justifyContent:"center"},className:"group/resizer hover:bg-blue-100/50",children:r.jsx("div",{className:"w-[2px] h-full bg-blue-400 opacity-50 group-hover/resizer:opacity-100"})})]},Ye))}),Array.isArray(Fe)&&Fe.slice(0,3).map((Le,Ye)=>r.jsx("div",{style:{marginBottom:"4px",borderBottom:Ye<Fe.length-1?"1px dotted #ccc":"none"},children:Z.map((Ze,Ot)=>{if(Ze.type==="columns")return r.jsx("div",{style:{display:"flex"},children:qe.map((dt,Lt)=>r.jsx("div",{style:{width:`${dt.width}%`,textAlign:dt.alignment||"left",overflow:"hidden"},children:dt.format==="currency"?Oe(Le[dt.field]):Le[dt.field]||"-"},Lt))},Ot);if(Ze.type==="text"){const dt=Ze.text?Ze.text.replace(/\{(\w+)\}/g,(Lt,br)=>Le[br]||Lt):"";return r.jsx("div",{style:{textAlign:Ze.alignment||"left",fontSize:`${Ze.fontSize||ae-1}px`,fontStyle:"italic",color:"#666",whiteSpace:"pre-wrap"},children:dt},Ot)}else if(Ze.type==="separator")return r.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"2px 0"}},Ot);return null})},Ye))]})}let be="";return _.type==="composite"||_.text&&_.text.includes("{")?be=Qe(_.text):be=_.text||(_.source?Ie(_.source,_.format):""),(!be||be==="")&&(be=`[${_.label||"Campo Vaco"}]`),r.jsx("div",{style:{textAlign:ne,fontSize:`${ae}px`,fontWeight:ge,marginBottom:"3px"},children:be})},tt=async()=>{if(a){f(!0);try{const _={Id:a.id||0,Nombre:a.nombre||a.Nombre||"Nueva Plantilla",Descripcion:a.descripcion||a.Descripcion||"",TipoRecibo:a.tipoRecibo||a.TipoRecibo||"Venta",AnchoMM:a.anchoMM||a.AnchoMM||(a.config?.paperWidth==="58mm"?58:80),PrinterName:a.printerName||a.PrinterName||"",ConfiguracionJSON:JSON.stringify(a.config),Activo:a.activo!==void 0?a.activo:a.Activo!==void 0?a.Activo:!0,PorDefecto:a.porDefecto!==void 0?a.porDefecto:a.PorDefecto!==void 0?a.PorDefecto:!1,Usuario:a.usuario||a.Usuario||"Admin"},X=_.Id&&_.Id>2e9;if(_.Id&&!X)await AL(_.Id,_);else{const{Id:ne,...ae}=_;await EL(ae)}alert("Plantilla guardada exitosamente!"),pe()}catch(_){console.error("Error saving template:",_),alert("Error al guardar: "+_.message)}finally{f(!1)}}},Q=_=>{if(!o)return;const X=o.text||"";se(o.sectionId,o.id,"text",X+_)};return r.jsxs(r6,{onDragEnd:ke,children:[r.jsx("style",{children:Vce}),r.jsxs("div",{className:"flex flex-col h-screen bg-gray-100 font-sans text-gray-800",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",onClick:()=>e("/configuracion/pos"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diseador de Recibos"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("select",{className:"text-xs bg-gray-50 border rounded px-2 py-1 font-semibold text-gray-700 focus:ring-1 focus:ring-hd-orange",value:a?.id||"",onChange:_=>ue(_.target.value),children:t.map(_=>r.jsx("option",{value:_.id,children:_.nombre},_.id))}),r.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest px-2 py-0.5 bg-gray-100 rounded",children:a?.tipoRecibo||"Venta"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full",children:[r.jsx("div",{className:`h-2 w-2 rounded-full ${O&&O.includes("API")?"bg-red-500 animate-pulse":"bg-green-500"}`}),r.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:O&&O.includes("API")?"API Offline":"API Online"})]}),r.jsxs(re,{variant:"outline",className:"h-9 px-4 text-gray-600 hover:text-hd-orange transition-colors",onClick:()=>e("/configuracion"),children:[r.jsx(on,{className:"h-4 w-4 mr-2"})," Volver"]}),r.jsx("div",{className:"h-6 w-px bg-gray-200"}),r.jsxs(re,{variant:"outline",className:"h-9 px-4 text-gray-600",onClick:()=>u(!0),children:[r.jsx(oi,{className:"h-4 w-4 mr-2"})," Previsualizar"]}),r.jsxs(re,{className:"h-9 px-6 bg-hd-orange text-white hover:bg-orange-600 shadow-md transform active:scale-95 transition-all",onClick:tt,disabled:c,children:[c?r.jsx(Dn,{className:"h-4 w-4 animate-spin mr-2"}):r.jsx(Ft,{className:"h-4 w-4 mr-2"}),"GUARDAR CAMBIOS"]})]})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:"w-72 bg-white border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b bg-gray-50 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest",children:"Paleta de Campos"}),r.jsx(_t,{className:"h-4 w-4 text-hd-orange"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar",children:r.jsx(Ep,{droppableId:"palette",isDropDisabled:!0,children:_=>{let X=0;return r.jsxs("div",{ref:_.innerRef,..._.droppableProps,style:{minHeight:"100%"},children:[Object.entries(H).map(([ne,ae])=>r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"h-1 w-1 bg-hd-orange rounded-full"}),r.jsx("h4",{className:"text-[11px] font-bold text-gray-400 uppercase tracking-wider",children:ne==="sqlView"?"DATO EXTERNO (SQL)":ne})]}),r.jsx("div",{className:"space-y-2",children:ae.map(ge=>{const be=X++;return r.jsx(Pp,{draggableId:ge.id,index:be,children:(Fe,ve)=>r.jsx("div",{ref:Fe.innerRef,...Fe.draggableProps,...Fe.dragHandleProps,style:{...Fe.draggableProps.style},className:`p-3 bg-white border border-gray-100 rounded shadow-sm cursor-move hover:border-hd-orange hover:shadow-md transition-all group ${ve.isDragging?"ring-2 ring-hd-orange ring-opacity-50":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Uy,{className:"h-4 w-4 text-gray-300 group-hover:text-hd-orange"}),r.jsx("span",{className:"text-xs font-bold text-gray-700",children:ge.label})]}),ne==="sqlView"&&r.jsx(Ld,{className:"h-3 w-3 text-blue-400"})]})})},ge.id)})})]},ne)),_.placeholder]})}})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-200/50 p-12 custom-scrollbar flex justify-center items-start",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-16 h-6 bg-gray-400/20 rounded z-0"}),r.jsxs("div",{className:"bg-white shadow-[0_10px_40px_rgba(0,0,0,0.1)] border-t-[3px] border-hd-orange overflow-hidden relative z-10",style:{width:a?.config?.paperWidth==="58mm"?"220px":"302px",minHeight:"600px",transition:"width 0.3s ease"},children:[r.jsx("div",{className:"h-2 w-full bg-white relative overflow-hidden",children:r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 flex justify-around opacity-20",children:Array(20).fill(0).map((_,X)=>r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 -mt-1"},X))})}),r.jsx("div",{className:"p-4",children:a?.config?.sections?.map(_=>r.jsx(Ep,{droppableId:_.id,children:(X,ne)=>r.jsxs("div",{ref:X.innerRef,...X.droppableProps,className:`min-h-[40px] mb-4 p-2 rounded ${ne.isDraggingOver?"bg-orange-50 border border-orange-200":"border border-transparent"}`,children:[r.jsxs("div",{className:"text-[10px] text-gray-400 mb-1.5 font-black uppercase flex justify-between items-center tracking-tighter",children:[r.jsx("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-gray-500",children:_.name}),_.type==="table"&&r.jsxs("span",{className:"text-blue-500 flex items-center gap-1 cursor-pointer hover:underline",onClick:()=>l({..._,sectionId:_.id}),children:[r.jsx(Ld,{size:10})," Editar Columnas"]})]}),_.type==="table"?r.jsx("div",{className:`p-1 rounded cursor-pointer ${o?.id===_.id?"bg-orange-50 border border-orange-200":"hover:bg-gray-50"}`,onClick:()=>l({..._,sectionId:_.id}),children:Xe({type:"table",..._},_.id)}):_.fields?.map((ae,ge)=>r.jsx(Pp,{draggableId:ae.id,index:ge,children:(be,Fe)=>r.jsxs("div",{ref:be.innerRef,...be.draggableProps,className:`group relative ${Fe.isDragging?"opacity-50":""}`,onClick:()=>l({...ae,sectionId:_.id}),children:[r.jsx("div",{...be.dragHandleProps,className:"absolute -left-4 top-1 opacity-0 group-hover:opacity-100 cursor-move",children:r.jsx(Uy,{className:"h-4 w-4 text-gray-400"})}),r.jsx("div",{className:`p-1 rounded ${o?.id===ae.id?"bg-orange-50 border border-orange-200":"hover:bg-gray-50"}`,children:Xe(ae,_.id)}),r.jsx("button",{onClick:ve=>{ve.stopPropagation(),fe(_.id,ae.id)},className:"absolute -right-4 top-1 opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700",children:r.jsx(Qt,{className:"h-3.5 w-3.5"})})]})},ae.id)),X.placeholder]})},_.id))})]})]})}),r.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col overflow-hidden shadow-xl",children:[r.jsxs("div",{className:"flex border-b",children:[r.jsxs("button",{onClick:()=>p("properties"),className:`flex-1 py-3 text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-2 ${m==="properties"?"text-hd-orange border-b-2 border-hd-orange bg-orange-50":"text-gray-500 hover:bg-gray-50"}`,children:[r.jsx(ii,{className:"h-3.5 w-3.5"})," Propiedades"]}),r.jsxs("button",{onClick:()=>p("views"),className:`flex-1 py-3 text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-2 ${m==="views"?"text-hd-orange border-b-2 border-hd-orange bg-orange-50":"text-gray-500 hover:bg-gray-50"}`,children:[r.jsx(Ld,{className:"h-3.5 w-3.5"})," Vista SQL"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:m==="properties"?r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("h3",{className:"text-xs font-black text-gray-700 uppercase tracking-tight flex items-center gap-2",children:[o?r.jsx(jF,{size:14,className:"text-hd-orange"}):r.jsx(ma,{size:14,className:"text-hd-orange"}),o?"Configurar Campo":"Diseo del Recibo"]}),o?r.jsxs("div",{className:"space-y-5 animate-in slide-in-from-right-2 duration-200",children:[r.jsxs("div",{className:"space-y-4 bg-gray-50 p-3 rounded-lg border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[8px] font-black text-gray-400 uppercase mb-2 tracking-widest",children:"Alineacin Horizontal"}),r.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(_=>r.jsxs("button",{onClick:()=>se(o.sectionId,o.id,"alignment",_),className:`flex-1 h-8 flex items-center justify-center rounded border transition-all ${o.alignment===_?"bg-hd-orange text-white border-hd-orange shadow-sm":"bg-white text-gray-400 border-gray-200 hover:border-hd-orange hover:text-hd-orange"}`,children:[_==="left"&&r.jsx(IC,{size:16}),_==="center"&&r.jsx(AC,{size:16}),_==="right"&&r.jsx(DC,{size:16})]},_))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[8px] font-black text-gray-400 uppercase mb-1 tracking-widest",children:"Tamao (px)"}),r.jsx(ye,{type:"number",value:o.fontSize||10,className:"h-8 text-xs font-bold",onChange:_=>se(o.sectionId,o.id,"fontSize",parseInt(_.target.value))})]}),r.jsx("div",{className:"flex flex-col justify-end",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer h-8 px-2 bg-white border rounded hover:border-hd-orange transition-colors",children:[r.jsx("input",{type:"checkbox",checked:o.bold||!1,className:"rounded text-hd-orange focus:ring-hd-orange",onChange:_=>se(o.sectionId,o.id,"bold",_.target.checked)}),r.jsx("span",{className:"text-[10px] font-bold text-gray-600",children:"Negrita"})]})})]})]}),o.type==="composite"&&r.jsxs("div",{className:"space-y-3 p-3 bg-white border rounded-lg shadow-sm",children:[r.jsx("label",{className:"block text-[10px] font-bold text-gray-700 uppercase",children:"Texto Dinmico"}),r.jsx("textarea",{value:o.text||"",rows:3,className:"w-full text-xs border rounded-md p-2 focus:ring-1 focus:ring-hd-orange outline-none bg-gray-50",onChange:_=>se(o.sectionId,o.id,"text",_.target.value),placeholder:"Escribe aqu. Usa el men de abajo para insertar variables."}),r.jsx("div",{className:"grid grid-cols-2 gap-1.5 max-h-40 overflow-y-auto p-1.5 border rounded bg-gray-50 custom-scrollbar",children:Y.map(_=>r.jsx("button",{onClick:()=>Q(_.value),className:"text-left text-[9px] p-2 bg-white border border-gray-100 rounded shadow-sm truncate hover:border-hd-orange hover:text-hd-orange transition-colors",children:_.label},_.value))})]}),o.type==="table"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-800 text-white p-2.5 rounded-t-lg",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Columnas Principales"}),r.jsx("span",{className:"text-[9px] text-gray-400",children:"Campos en la fila central"})]}),r.jsxs("div",{className:"flex gap-1 items-center",children:[r.jsxs("button",{onClick:()=>se(o.sectionId,o.id,"resizeMode",!o.resizeMode),className:`px-2 py-1 rounded text-[9px] font-black uppercase transition-colors flex items-center gap-1 ${o.resizeMode?"bg-blue-500 text-white":"bg-gray-700 text-gray-400 hover:text-white"}`,title:"Activar para redimensionar columnas con el mouse",children:[r.jsx(bF,{size:10})," ",o.resizeMode?"Ajustando":"Ajustar"]}),r.jsx("div",{className:"w-px h-3 bg-gray-600 mx-1"}),r.jsx("button",{onClick:()=>{const _=o.columns||[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Prec",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}],X=.8,ne=_.map(Fe=>({...Fe,width:Math.floor(Fe.width*X)})),be={label:"Nuevo",field:"description",width:100-ne.reduce((Fe,ve)=>Fe+ve.width,0),alignment:"left",active:!0};se(o.sectionId,o.id,"columns",[...ne,be])},className:"px-2 py-1 bg-hd-orange rounded text-[9px] font-black uppercase hover:bg-white hover:text-hd-orange transition-colors",children:"+ Col"}),r.jsx("button",{onClick:()=>{const _=[{label:"Desc",field:"description",width:40,active:!0},{label:"Cant",field:"quantity",width:20,active:!0},{label:"Prec",field:"price",width:20,active:!0,format:"currency"},{label:"Total",field:"total",width:20,active:!0,format:"currency"}];se(o.sectionId,o.id,"columns",_)},className:"px-2 py-1 bg-white/10 rounded text-[9px] font-black uppercase hover:bg-white/20 transition-colors",children:"Reset"})]})]}),r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto p-1.5 border border-t-0 rounded-b-lg bg-gray-50 custom-scrollbar",children:(o.columns||[]).map((_,X)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200 space-y-2 shadow-sm relative group/col",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ye,{placeholder:"Etiqueta",value:_.label,className:"h-7 text-[10px] font-bold",onChange:ne=>{const ae=[...o.columns||[]];ae[X].label=ne.target.value,se(o.sectionId,o.id,"columns",ae)}}),r.jsxs("select",{value:_.field,className:"h-7 text-[10px] border rounded bg-white focus:ring-1 focus:ring-hd-orange outline-none",onChange:ne=>{const ae=[...o.columns||[]];ae[X].field=ne.target.value,se(o.sectionId,o.id,"columns",ae)},children:[r.jsx("option",{value:"",children:"Seleccionar Campo..."}),ee.map(ne=>r.jsx("option",{value:ne.value,children:ne.label},ne.value))]})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1.5 border-t border-gray-100",children:[r.jsx("div",{className:"flex bg-gray-100 rounded p-0.5",children:["left","center","right"].map(ne=>r.jsxs("button",{onClick:()=>{const ae=[...o.columns||[]];ae[X].alignment=ne,se(o.sectionId,o.id,"columns",ae)},className:`p-1 rounded text-gray-500 hover:text-hd-orange transition-colors ${_.alignment===ne?"bg-white shadow text-hd-orange font-bold":""}`,title:ne==="left"?"Izquierda":ne==="center"?"Centro":"Derecha",children:[ne==="left"&&r.jsx(IC,{size:10}),ne==="center"&&r.jsx(AC,{size:10}),ne==="right"&&r.jsx(DC,{size:10})]},ne))}),r.jsxs("div",{className:"flex items-center bg-gray-100 rounded px-2 h-6 flex-1",children:[r.jsx("span",{className:"text-[8px] font-black text-gray-400 mr-2 uppercase",children:"W%"}),r.jsx("input",{type:"number",value:_.width,className:"bg-transparent text-[10px] font-bold w-full text-center outline-none",onChange:ne=>{const ae=[...o.columns||[]];ae[X].width=parseInt(ne.target.value),se(o.sectionId,o.id,"columns",ae)}})]}),r.jsxs("select",{value:_.format||"",className:"h-6 text-[9px] border rounded flex-1 bg-white",onChange:ne=>{const ae=[...o.columns||[]];ae[X].format=ne.target.value,se(o.sectionId,o.id,"columns",ae)},children:[r.jsx("option",{value:"",children:"Sin Formato"}),r.jsx("option",{value:"currency",children:"Moneda ($)"})]}),r.jsx("button",{className:"text-gray-300 hover:text-red-500 transition-colors ml-auto",onClick:()=>{const ne=(o.columns||[]).filter((ae,ge)=>ge!==X);se(o.sectionId,o.id,"columns",ne)},children:r.jsx(Qt,{size:12})})]})]},X))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center bg-hd-orange text-white p-2.5 rounded-t-lg",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Fila Extra (Multi-lnea)"}),r.jsx("span",{className:"text-[9px] text-orange-100",children:"Lneas arriba o abajo"})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{const _=o.rowLayout||[{type:"columns"}];se(o.sectionId,o.id,"rowLayout",[..._,{type:"text",text:"Ref: {sku}",alignment:"left",fontSize:8}])},className:"px-2 py-1 bg-white text-hd-orange rounded text-[9px] font-black uppercase hover:bg-orange-50 transition-colors",children:"+ Texto"}),r.jsx("button",{onClick:()=>{const _=o.rowLayout||[{type:"columns"}];se(o.sectionId,o.id,"rowLayout",[..._,{type:"separator"}])},className:"px-2 py-1 bg-white text-hd-orange rounded text-[9px] font-black uppercase hover:bg-orange-50 transition-colors",children:"+ Raya"})]})]}),r.jsx("div",{className:"space-y-2 p-1.5 border border-t-0 rounded-b-lg bg-gray-50 max-h-60 overflow-y-auto custom-scrollbar",children:(o.rowLayout||[{type:"columns"}]).map((_,X,ne)=>r.jsxs("div",{className:"bg-white p-2 rounded border border-gray-100 flex flex-col gap-2 group/row shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded uppercase ${_.type==="columns"?"bg-hd-orange/10 text-hd-orange":"bg-gray-100 text-gray-500"}`,children:_.type==="columns"?"Columnas":_.type==="text"?"Texto":"Raya"}),r.jsxs("div",{className:"flex items-center gap-1 opacity-50 group-hover:opacity-100 transition-opacity",children:[X>0&&r.jsx("button",{onClick:()=>{const ae=[...o.rowLayout||[]];[ae[X],ae[X-1]]=[ae[X-1],ae[X]],se(o.sectionId,o.id,"rowLayout",ae)},className:"text-gray-500 hover:text-hd-orange p-1 bg-gray-100 rounded",title:"Subir",children:r.jsx(fD,{size:14})}),X<ne.length-1&&r.jsx("button",{onClick:()=>{const ae=[...o.rowLayout||[]];[ae[X],ae[X+1]]=[ae[X+1],ae[X]],se(o.sectionId,o.id,"rowLayout",ae)},className:"text-gray-500 hover:text-hd-orange p-1 bg-gray-100 rounded",title:"Bajar",children:r.jsx(Nr,{size:14})}),_.type!=="columns"&&r.jsx("button",{onClick:()=>{const ae=(o.rowLayout||[]).filter((ge,be)=>be!==X);se(o.sectionId,o.id,"rowLayout",ae)},className:"text-red-400 hover:text-red-600 ml-1 p-1 bg-red-50 rounded",children:r.jsx(Qt,{size:14})})]})]}),_.type==="text"&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ye,{value:_.text,className:"h-7 text-[10px] flex-1",placeholder:"Ej: SKU: {sku}",onChange:ae=>{const ge=[...o.rowLayout||[]];ge[X].text=ae.target.value,se(o.sectionId,o.id,"rowLayout",ge)}}),r.jsxs("select",{value:"",className:"h-7 w-8 text-center bg-gray-50 border rounded font-black text-hd-orange text-xs cursor-pointer",onChange:ae=>{if(!ae.target.value)return;const ge=[...o.rowLayout||[]];ge[X].text=(ge[X].text||"")+` {${ae.target.value}}`,se(o.sectionId,o.id,"rowLayout",ge)},children:[r.jsx("option",{value:"",children:"+"}),ee.map(ae=>r.jsx("option",{value:ae.value,children:ae.label},ae.value))]})]}),_.type==="separator"&&r.jsx("div",{className:"h-px w-full border-t border-dashed border-gray-200"})]},X))})]})]}),r.jsx(re,{variant:"outline",className:"w-full h-9 text-[10px] font-black uppercase tracking-widest border-2 hover:bg-gray-50",onClick:()=>l(null),children:"Cerrar Editor"})]}):r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-3 tracking-widest flex items-center gap-2",children:[r.jsx("div",{className:"h-2 w-2 bg-hd-orange rounded-full"})," Ancho del Papel"]}),r.jsx("div",{className:"flex gap-2",children:["80mm","58mm"].map(_=>r.jsxs("button",{onClick:()=>Re("paperWidth",_),className:`flex-1 p-3 border-2 rounded-xl flex flex-col items-center gap-1 transition-all ${a?.config?.paperWidth===_?"border-hd-orange bg-orange-50 text-hd-orange shadow-inner":"border-gray-100 text-gray-400 hover:border-gray-200"}`,children:[r.jsx("div",{className:"text-sm font-bold",children:_}),r.jsx("div",{className:"text-[8px] uppercase tracking-tighter",children:_==="80mm"?"Estndar":"Cintas"})]},_))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Mrgenes Laterales"}),r.jsxs("span",{className:"text-[10px] font-bold text-hd-orange",children:[a?.config?.padding||0,"px"]})]}),r.jsx("input",{type:"range",min:"0",max:"30",value:a?.config?.padding||0,className:"w-full accent-hd-orange",onChange:_=>Re("padding",parseInt(_.target.value))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 tracking-widest flex items-center gap-2",children:[r.jsx(La,{className:"h-3 w-3 text-gray-400"})," Impresora Predeterminada"]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:a?.printerName||"",onChange:_=>{s(X=>({...X,printerName:_.target.value}))},className:"w-full h-10 text-xs font-bold border border-gray-200 rounded-lg px-3 bg-white focus:ring-2 focus:ring-hd-orange outline-none shadow-sm appearance-none",children:[r.jsx("option",{value:"",children:"-- Sin Impresora Asignada --"}),L.map(_=>r.jsx("option",{value:_,children:_},_))]}),r.jsx("div",{className:"absolute right-3 top-3 pointer-events-none",children:J?r.jsx(ro,{className:"h-4 w-4 text-hd-orange animate-spin"}):r.jsx(Nr,{className:"h-4 w-4 text-gray-400"})})]}),r.jsx("p",{className:"text-[8px] text-gray-400 mt-1.5 italic",children:"Esta impresora se usar automticamente al imprimir este recibo."})]}),r.jsxs("div",{className:"p-4 bg-orange-100/50 rounded-xl border border-orange-100 flex flex-col gap-2",children:[r.jsx(ma,{className:"h-5 w-5 text-blue-400 shrink-0"}),r.jsx("p",{className:"text-[9px] text-blue-600 leading-tight",children:"Las vistas SQL te permiten traer datos externos (como estados de cuenta o turnos) a tu recibo."})]})]})]}):r.jsx("div",{className:"p-4 space-y-4 h-full flex flex-col",children:y?r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right duration-300 flex-1 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>b(""),className:"text-[10px] font-black text-hd-orange flex items-center gap-1 uppercase hover:underline tracking-tight",children:[r.jsx(on,{className:"h-3 w-3"})," Lista de Vistas"]}),r.jsx("span",{className:"text-[9px] font-black text-gray-400 bg-gray-100 px-2 py-1 rounded uppercase tracking-tighter",children:y})]}),r.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-xl bg-gray-50/50 shadow-inner custom-scrollbar",children:I?r.jsxs("div",{className:"p-12 text-center text-gray-400",children:[r.jsx(Dn,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-hd-orange"}),r.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Leyendo SQL..."})]}):r.jsx("div",{className:"p-1 space-y-1",children:N.map(_=>{const X=_.Name||_.name||_.NAME;return r.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg border border-transparent hover:border-hd-orange cursor-pointer transition-all shadow-sm",children:[r.jsx("input",{type:"checkbox",className:"rounded text-hd-orange focus:ring-hd-orange",checked:A.includes(X),onChange:ne=>ne.target.checked?k([...A,X]):k(A.filter(ae=>ae!==X))}),r.jsx("span",{className:"text-xs font-bold text-gray-600",children:X})]},X)})})}),r.jsxs("div",{className:"space-y-3 bg-white p-3 rounded-xl border border-gray-100 shadow-lg mt-auto",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 tracking-widest",children:"Vincular con (Parmetro)"}),r.jsxs("select",{value:M,onChange:_=>F(_.target.value),className:"w-full h-9 text-xs font-bold border rounded px-2 bg-white focus:ring-1 focus:ring-hd-orange outline-none",children:[r.jsx("option",{value:"receipt.NumeroRecibo",children:"NumeroRecibo (REC-XXXX)"}),r.jsx("option",{value:"receipt.NumeroFactura",children:"No. Factura (FACT-XXXX)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase mb-2 tracking-widest",children:"Nombre del Nuevo Grupo"}),r.jsx(ye,{value:z,onChange:_=>K(_.target.value),placeholder:"Ej: Historial Pagos",className:"h-9 text-xs font-bold focus:ring-hd-orange"})]}),r.jsx(re,{onClick:Se,disabled:A.length===0,className:"w-full bg-hd-orange text-white text-xs font-black h-10 shadow-md hover:shadow-lg hover:-translate-y-0.5 transition-all uppercase tracking-widest",children:"VINCULAR DATOS"})]})]}):r.jsxs("div",{className:"space-y-4 flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("h3",{className:"text-xs font-black text-gray-700 uppercase tracking-tight flex items-center gap-2",children:[r.jsx(Ld,{className:"h-4 w-4 text-hd-orange"})," Objetos de Datos SQL"]}),r.jsx("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-tighter",children:Ys})]}),r.jsx("button",{onClick:me,disabled:I,className:"p-2 hover:bg-orange-50 rounded-full transition-colors text-hd-orange disabled:opacity-30",children:r.jsx(ro,{className:`h-4 w-4 ${I?"animate-spin":""}`})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto border border-gray-100 rounded-xl bg-gray-50/50 custom-scrollbar",children:[I&&r.jsxs("div",{className:"p-12 text-center text-gray-400",children:[r.jsx(Dn,{className:"h-8 w-8 animate-spin mx-auto mb-3 text-hd-orange"}),r.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Conectando..."})]}),O&&r.jsxs("div",{className:"p-8 text-center bg-red-50 border border-red-100 rounded-lg m-2",children:[r.jsx(It,{className:"h-8 w-8 mx-auto mb-2 text-red-500 opacity-50"}),r.jsx("p",{className:"text-[10px] font-black text-red-600 uppercase mb-2",children:"Error de Conexin"}),r.jsx("p",{className:"text-[9px] text-red-500 italic mb-3",children:O}),r.jsx(re,{size:"sm",variant:"outline",className:"h-7 text-[9px] border-red-200 text-red-600 hover:bg-red-50",onClick:me,children:"REINTENTAR"})]}),!I&&!O&&v.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Ld,{className:"h-12 w-12 mx-auto mb-3 text-gray-200"}),r.jsx("p",{className:"text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Sin datos disponibles"}),r.jsx("p",{className:"text-[9px] text-gray-400 italic mt-2",children:"No se encontraron Vistas o Tablas en el SQL del Backend."})]}),v.map((_,X)=>{const ne=_.Name||_.name||_.NAME,ae=_.Type||_.type||"View";return r.jsxs("button",{onClick:()=>{b(ne),De(ne)},className:"w-full text-left px-4 py-3 border-b border-gray-100 last:border-0 hover:bg-white flex justify-between items-center group transition-all hover:shadow-sm",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-bold text-xs text-gray-700",children:ne}),r.jsx("span",{className:"text-[8px] text-orange-400 px-1 py-0.5 bg-orange-50 rounded uppercase font-black self-start mt-1 tracking-tighter",children:ae})]}),r.jsx(ar,{className:"h-4 w-4 text-gray-300 group-hover:text-hd-orange transition-transform group-hover:translate-x-1"})]},ne||X)})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-lg flex gap-3",children:[r.jsx(ma,{className:"h-5 w-5 text-blue-400 shrink-0"}),r.jsx("p",{className:"text-[9px] text-blue-600 leading-tight",children:"Las vistas SQL te permiten traer datos externos (como estados de cuenta o turnos) a tu recibo."})]})]})})})]})]}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[r.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-b flex items-center justify-between",children:[r.jsxs("h3",{className:"font-black text-gray-800 uppercase tracking-widest text-xs flex items-center gap-2",children:[r.jsx(oi,{className:"h-4 w-4 text-hd-orange"})," Previsualizacin Real"]}),r.jsx("button",{onClick:()=>u(!1),className:"p-1.5 hover:bg-gray-200 rounded-full transition-colors",children:r.jsx(It,{className:"h-5 w-5 text-gray-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-10 flex justify-center bg-gray-200 custom-scrollbar",children:r.jsx("div",{className:"bg-white shadow-2xl p-6 ring-1 ring-black/5 h-fit mb-10",style:{width:a?.config?.paperWidth==="58mm"?"220px":"302px",minHeight:"400px"},children:r.jsx(qD,{template:a,data:B})})}),r.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-t flex justify-end gap-3",children:[r.jsx(re,{variant:"outline",className:"h-10 text-xs font-bold px-6",onClick:()=>u(!1),children:"Cerrar"}),r.jsxs(re,{className:"bg-hd-orange text-white h-10 text-xs font-black uppercase tracking-widest px-6 shadow-md",onClick:()=>window.print(),children:[r.jsx(La,{className:"h-5 w-5 mr-2"})," Imprimir"]})]})]})})]})]})},u6=x.createContext(),Gce=({children:e})=>{const[t,n]=x.useState(localStorage.getItem("theme")||"soft-dark");x.useEffect(()=>{document.documentElement.classList.remove("theme-original","theme-homeDepot","theme-soft-dark","theme-light","theme-dark"),document.documentElement.classList.add(`theme-${t}`),t==="soft-dark"||t==="homeDepot"?document.documentElement.classList.add("theme-dark"):document.documentElement.classList.add("theme-light"),localStorage.setItem("theme",t)},[t]);const a=()=>{n(o=>o==="original"?"soft-dark":"original")},s=t==="soft-dark"||t==="homeDepot";return r.jsx(u6.Provider,{value:{theme:t,toggleTheme:a,setTheme:n,isDarkMode:s},children:e})},Hce=()=>{const e=bt.useContext(u6);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Wce=()=>{const[e,t]=x.useState(""),[n,a]=x.useState(""),[s,o]=x.useState(!1),[l,c]=x.useState(!1),[f,h]=x.useState(""),{login:u}=jl(),{isDarkMode:m}=Hce(),p=async v=>{v.preventDefault(),c(!0),h("");try{const j=await fetch("http://localhost:5006/api/Auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:e,password:n})});if(j.ok){const y=await j.json();u(y)}else{const y=await j.json();h(y.message||"Credenciales invlidas (401)")}}catch{h("Error de conexin con el servidor")}finally{c(!1)}};return r.jsxs("div",{className:"min-h-screen bg-hd-black flex items-center justify-center p-4 relative overflow-hidden font-sans",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-hd-orange/10 blur-[120px] rounded-full animate-pulse"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-hd-orange/5 blur-[120px] rounded-full"}),r.jsxs("div",{className:"w-full max-w-md bg-zinc-900/80 backdrop-blur-xl rounded-3xl border border-white/10 shadow-2xl p-8 relative z-10 animate-in fade-in zoom-in duration-500",children:[r.jsxs("div",{className:"flex flex-col items-center mb-10",children:[r.jsx("div",{className:"w-16 h-16 bg-hd-orange rounded-2xl flex items-center justify-center shadow-lg shadow-hd-orange/20 mb-6 group transition-transform hover:scale-110",children:r.jsx(Vy,{size:36,className:"text-white group-hover:animate-bounce"})}),r.jsx("h1",{className:"text-3xl font-black text-white italic uppercase tracking-tighter mb-2",children:"POS CRONO"}),r.jsxs("p",{className:"text-zinc-500 text-xs font-black uppercase tracking-[0.3em] flex items-center gap-2",children:[r.jsx(ll,{size:12,className:"text-hd-orange"}),"Acceso de Seguridad"]})]}),r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 ml-1 italic",children:"Nombre de Usuario"}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-zinc-500 group-focus-within:text-hd-orange transition-colors",children:r.jsx(Nj,{size:18})}),r.jsx("input",{type:"text",required:!0,value:e,onChange:v=>t(v.target.value),className:"w-full bg-zinc-800/50 border border-white/5 rounded-xl py-4 pl-12 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-hd-orange/50 focus:border-hd-orange transition-all font-medium placeholder:text-zinc-700",placeholder:"Ingresa tu usuario"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 ml-1 italic",children:"Contrasea"}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-zinc-500 group-focus-within:text-hd-orange transition-colors",children:r.jsx(xm,{size:18})}),r.jsx("input",{type:s?"text":"password",required:!0,value:n,onChange:v=>a(v.target.value),className:"w-full bg-zinc-800/50 border border-white/5 rounded-xl py-4 pl-12 pr-12 text-white focus:outline-none focus:ring-2 focus:ring-hd-orange/50 focus:border-hd-orange transition-all font-medium placeholder:text-zinc-700",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-zinc-500 hover:text-white transition-colors",children:s?r.jsx(bj,{size:18}):r.jsx(oi,{size:18})})]})]}),f&&r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-500 text-[10px] font-black uppercase tracking-wider p-4 rounded-xl flex items-center gap-2 animate-in slide-in-from-top-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-ping"}),f]}),r.jsx(re,{type:"submit",disabled:l,className:"w-full bg-hd-orange hover:bg-orange-600 text-white font-black uppercase tracking-widest py-6 rounded-xl shadow-lg shadow-hd-orange/20 transition-all active:scale-95 flex items-center justify-center gap-2 italic",children:l?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:["Confirmar Acceso ",r.jsx(xm,{size:16})]})})]}),r.jsx("div",{className:"mt-10 pt-8 border-t border-white/5 text-center px-4",children:r.jsx("p",{className:"text-[9px] text-zinc-600 font-black uppercase tracking-[0.2em] leading-relaxed italic",children:"El acceso al sistema est monitoreado. Cualquier intento no autorizado ser registrado en los registros de auditora."})})]})]})},Kce=()=>{const{user:e}=jl(),[t,n]=x.useState([]),[a,s]=x.useState(null),[o,l]=x.useState([]),[c,f]=x.useState([]),[h,u]=x.useState(""),[m,p]=x.useState(!1),[v,j]=x.useState(!1),[y,b]=x.useState({type:"",text:""});x.useEffect(()=>{N(),P()},[]),x.useEffect(()=>{a&&A(a.id)},[a]);const N=async()=>{try{const F=await(await fetch("http://localhost:5006/api/SecurityEditor/groups",{headers:{Authorization:`Bearer ${e.token}`}})).json();n(F),F.length>0&&!a&&s(F[0])}catch(M){console.error("Error fetching groups",M)}},P=async()=>{try{const F=await(await fetch("http://localhost:5006/api/SecurityEditor/permissions-catalog",{headers:{Authorization:`Bearer ${e.token}`}})).json();l(F)}catch(M){console.error("Error fetching catalog",M)}},A=async M=>{p(!0);try{const V=await(await fetch(`http://localhost:5006/api/SecurityEditor/group-permissions/${M}`,{headers:{Authorization:`Bearer ${e.token}`}})).json();f(V)}catch(F){console.error("Error fetching group permissions",F)}finally{p(!1)}},k=M=>{f(F=>F.find(T=>T.securityObjectId===M)?F.map(T=>T.securityObjectId===M?{...T,isAllowed:!T.isAllowed}:T):[...F,{roleId:a.id,securityObjectId:M,isAllowed:!0,uiBehavior:1}])},I=M=>{f(F=>F.map(V=>V.securityObjectId===M?{...V,uiBehavior:V.uiBehavior===0?1:0}:V))},E=async()=>{j(!0),b({type:"",text:""});try{(await fetch("http://localhost:5006/api/SecurityEditor/group-permissions/bulk-update",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify(c.map(F=>({...F,roleId:a.id})))})).ok?(b({type:"success",text:"Configuracin guardada correctamente"}),setTimeout(()=>b({type:"",text:""}),3e3)):b({type:"error",text:"Error al guardar los cambios"})}catch{b({type:"error",text:"Error de conexin"})}finally{j(!1)}},O=o.filter(M=>M.name.toLowerCase().includes(h.toLowerCase())||M.code.toLowerCase().includes(h.toLowerCase())||M.category.toLowerCase().includes(h.toLowerCase())),C=Array.from(new Set(O.map(M=>M.category)));return r.jsxs("div",{className:"p-8 bg-[var(--bg-main)] min-h-screen text-[var(--text-main)] transition-colors duration-500 font-sans",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-6 border-b border-[var(--border-color)] pb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight flex items-center gap-3 text-[var(--text-main)]",children:[r.jsx("div",{className:"p-2.5 bg-hd-orange/10 rounded-xl",children:r.jsx(Tp,{size:28,className:"text-hd-orange"})}),"Editor de Seguridad"]}),r.jsxs("p",{className:"text-[var(--text-muted)] text-sm font-medium mt-1 ml-1 pl-14 flex items-center gap-2 opacity-80",children:[r.jsx(ll,{size:14,className:"text-hd-orange"}),"Control de acceso basado en roles (RBAC)"]})]}),r.jsxs("div",{className:"flex items-center gap-4 self-end md:self-auto",children:[y.text&&r.jsxs("div",{className:`px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-widest flex items-center gap-2 animate-in slide-in-from-right duration-300 shadow-sm ${y.type==="success"?"bg-emerald-500/10 text-emerald-600 border border-emerald-500/20":"bg-red-500/10 text-red-600 border border-red-500/20"}`,children:[y.type==="success"?r.jsx(Mp,{size:16}):r.jsx(pu,{size:16}),y.text]}),r.jsxs(re,{onClick:E,disabled:v||!a,className:"bg-hd-orange hover:bg-orange-600 text-white font-bold px-6 py-3 rounded-xl flex items-center gap-2 shadow-lg shadow-hd-orange/20 transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-50 disabled:pointer-events-none",children:[v?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsx(Ft,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Guardar Cambios"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsxs("div",{className:"lg:col-span-3 lg:col-start-1 bg-[var(--bg-card)] rounded-3xl border border-[var(--border-color)] p-6 flex flex-col shadow-sm h-[calc(100vh-250px)] sticky top-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xs font-bold uppercase tracking-widest text-[var(--text-muted)]",children:"Roles de Sistema"}),r.jsx("div",{className:"p-1.5 bg-[var(--bg-main)] rounded-lg text-hd-orange",children:r.jsx(_r,{size:16})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:t.map(M=>r.jsxs("button",{onClick:()=>s(M),className:`w-full text-left p-4 rounded-2xl transition-all border flex items-center justify-between group relative overflow-hidden ${a?.id===M.id?"bg-hd-orange border-hd-orange shadow-lg shadow-hd-orange/20 text-white":"bg-[var(--bg-main)] border-[var(--border-color)] text-[var(--text-muted)] hover:bg-[var(--bg-main)]/80 hover:border-hd-orange/30 hover:text-[var(--text-main)]"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx("div",{className:`p-2 rounded-xl ${a?.id===M.id?"bg-white/20":"bg-[var(--bg-card)] shadow-sm"} transition-colors`,children:r.jsx(xm,{size:16})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:M.name}),r.jsx("span",{className:`text-[10px] ${a?.id===M.id?"text-white/80":"text-[var(--text-muted)]"} font-medium mt-0.5 truncate max-w-[120px]`,children:M.description||"Sin descripcin"})]})]}),a?.id===M.id&&r.jsx(ar,{size:16,className:"text-white/80"})]},M.id))})]}),r.jsxs("div",{className:"lg:col-span-9 bg-[var(--bg-card)] rounded-3xl border border-[var(--border-color)] p-8 flex flex-col shadow-sm h-[calc(100vh-250px)]",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-8",children:[r.jsxs("div",{className:"relative flex-1 group w-full",children:[r.jsx("div",{className:"absolute inset-0 bg-hd-orange/5 rounded-2xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),r.jsx(Ht,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] group-focus-within:text-hd-orange transition-colors",size:20}),r.jsx("input",{type:"text",placeholder:"Buscar permiso, cdigo o categora...",value:h,onChange:M=>u(M.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4 pl-14 pr-6 text-[var(--text-main)] placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange/50 transition-all shadow-sm relative z-10"})]}),r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[var(--bg-main)] rounded-xl border border-[var(--border-color)]",children:[r.jsx("span",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider",children:"Permisos:"}),r.jsx("span",{className:"text-lg font-bold text-hd-orange",children:O.length})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto pr-4 custom-scrollbar space-y-10",children:C.map(M=>r.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[r.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest text-hd-orange flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-hd-orange"}),M]}),r.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-[var(--border-color)] to-transparent"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-4",children:O.filter(F=>F.category===M).map(F=>{const V=c.find(U=>U.securityObjectId===F.id),T=V?.isAllowed||!1,L=V?.uiBehavior??1;return r.jsxs("div",{className:`group p-5 rounded-2xl border transition-all duration-300 relative overflow-hidden ${T?"bg-gradient-to-br from-[var(--bg-main)] to-[var(--bg-card)] border-hd-orange/30 shadow-md shadow-hd-orange/5":"bg-[var(--bg-main)] border-[var(--border-color)] opacity-70 hover:opacity-100 hover:border-[var(--border-color)]/80"}`,children:[r.jsx("div",{className:"flex justify-between items-start mb-4",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("button",{onClick:()=>k(F.id),className:`mt-1 min-w-[24px] h-6 rounded-lg border-2 flex items-center justify-center transition-all duration-200 ${T?"bg-hd-orange border-hd-orange text-white shadow-sm scale-110":"border-[var(--text-muted)]/30 text-transparent hover:border-hd-orange/50"}`,children:r.jsx(uD,{size:16,strokeWidth:4})}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm font-bold leading-tight ${T?"text-[var(--text-main)]":"text-[var(--text-muted)]"}`,children:F.name}),r.jsx("span",{className:"inline-block mt-1.5 px-2 py-0.5 rounded text-[9px] font-mono font-bold bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-muted)] uppercase",children:F.code})]})]})}),r.jsx("p",{className:"text-xs text-[var(--text-muted)] leading-relaxed pl-10 mb-4 opacity-80",children:F.description}),r.jsxs("div",{className:`pl-10 flex items-center gap-2 transition-all duration-300 ${T?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"}`,children:[r.jsx("span",{className:"text-[9px] font-bold text-[var(--text-muted)] uppercase tracking-wider mr-2",children:"Si denegado:"}),r.jsx("button",{onClick:()=>T&&I(F.id),disabled:!T,className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${L===0?"bg-zinc-800 text-white border-zinc-900":"bg-transparent text-[var(--text-muted)] border-transparent hover:bg-[var(--bg-card)]"}`,title:"El elemento desaparece de la UI",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(bj,{size:12})," Ocultar"]})}),r.jsx("button",{onClick:()=>T&&I(F.id),disabled:!T,className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${L===1?"bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-gray-100 border-zinc-300 dark:border-zinc-600":"bg-transparent text-[var(--text-muted)] border-transparent hover:bg-[var(--bg-card)]"}`,title:"El elemento se ve pero no se puede usar",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(CF,{size:12})," Inactivar"]})})]})]},F.id)})})]},M))})]})]})]})},Yce=()=>{const{user:e}=jl(),[t,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState(""),[c,f]=x.useState(!0),[h,u]=x.useState({type:"",text:""}),[m,p]=x.useState(!1),[v,j]=x.useState(!1),[y,b]=x.useState(!1),[N,P]=x.useState(null),[A,k]=x.useState({userName:"",fullName:"",email:"",password:"",role:"CAJEROS",isActive:!0}),[I,E]=x.useState("");x.useEffect(()=>{O()},[]);const O=async()=>{f(!0);try{const[T,L]=await Promise.all([fetch("http://localhost:5006/api/SecurityEditor/users",{headers:{Authorization:`Bearer ${e.token}`}}),fetch("http://localhost:5006/api/SecurityEditor/groups",{headers:{Authorization:`Bearer ${e.token}`}})]);if(T.ok&&L.ok){const U=await T.json(),J=await L.json();n(U),s(J)}}catch(T){console.error("Error fetching data",T),u({type:"error",text:"Error al conectar con el servidor"})}finally{f(!1)}},C=(T=null)=>{T?(P(T),k({userName:T.userName,fullName:T.fullName||"",email:T.email||"",password:"",role:"CAJEROS",isActive:T.isActive})):(P(null),k({userName:"",fullName:"",email:"",password:"",role:"CAJEROS",isActive:!0})),p(!0)},M=async T=>{T.preventDefault(),b(!0);try{const L=N?`http://localhost:5006/api/SecurityEditor/users/${N.id}`:"http://localhost:5006/api/SecurityEditor/users",J=await fetch(L,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify(A)});if(J.ok)u({type:"success",text:`Usuario ${N?"actualizado":"creado"} correctamente`}),p(!1),O();else{const q=await J.json();u({type:"error",text:Array.isArray(q)?q[0].description:"Error al guardar usuario"})}}catch{u({type:"error",text:"Error de conexin"})}finally{b(!1)}},F=async()=>{if(I){b(!0);try{(await fetch(`http://localhost:5006/api/SecurityEditor/users/${N.id}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({newPassword:I})})).ok?(u({type:"success",text:"Contrasea actualizada"}),j(!1),E("")):u({type:"error",text:"Error al resetear contrasea"})}catch{u({type:"error",text:"Error de conexin"})}finally{b(!1)}}},V=t.filter(T=>T.userName.toLowerCase().includes(o.toLowerCase())||T.fullName&&T.fullName.toLowerCase().includes(o.toLowerCase()));return r.jsxs("div",{className:"p-8 bg-[var(--bg-main)] min-h-screen text-[var(--text-main)] transition-colors duration-500 font-sans",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight flex items-center gap-3 text-[var(--text-main)]",children:[r.jsx("div",{className:"p-2.5 bg-hd-orange/10 rounded-xl",children:r.jsx(_r,{size:28,className:"text-hd-orange"})}),"Directorio de Usuarios"]}),r.jsx("p",{className:"text-[var(--text-muted)] text-sm font-medium mt-1 ml-1 pl-14 flex items-center gap-2 opacity-80",children:"Gestin de accesos y seguridad"})]}),r.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[r.jsx(re,{onClick:O,className:"p-3 rounded-xl border border-[var(--border-color)] text-[var(--text-muted)] hover:text-[var(--text-main)] hover:bg-[var(--bg-card)] transition-all",title:"Recargar datos",children:r.jsx(ro,{size:20,className:c?"animate-spin":""})}),r.jsxs(re,{onClick:()=>C(),className:"bg-hd-orange hover:bg-orange-600 text-white font-bold px-6 py-3 rounded-xl flex items-center gap-2 shadow-lg shadow-hd-orange/20 transition-all hover:scale-[1.02] active:scale-95",children:[r.jsx(Gy,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Nuevo Usuario"})]})]})]}),h.text&&r.jsxs("div",{className:`mb-8 p-4 rounded-xl flex items-center gap-3 border animate-in slide-in-from-top-2 duration-300 ${h.type==="error"?"bg-red-500/10 border-red-500/20 text-red-600":"bg-emerald-500/10 border-emerald-500/20 text-emerald-600"}`,children:[h.type==="error"?r.jsx(A0,{size:20}):r.jsx(Mp,{size:20}),r.jsx("span",{className:"font-semibold text-sm",children:h.text}),r.jsx("button",{onClick:()=>u({type:"",text:""}),className:"ml-auto hover:bg-black/5 p-1 rounded-full transition-colors",children:r.jsx(A0,{size:16,className:"opacity-50"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8",children:[r.jsx("div",{className:"col-span-12 md:col-span-7 lg:col-span-8",children:r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-hd-orange/5 rounded-2xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),r.jsx(Ht,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] group-focus-within:text-hd-orange transition-colors",size:20}),r.jsx("input",{type:"text",placeholder:"Buscar usuario...",value:o,onChange:T=>l(T.target.value),className:"w-full bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl py-4 pl-14 pr-6 text-[var(--text-main)] placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange/50 transition-all shadow-sm relative z-10"})]})}),r.jsxs("div",{className:"col-span-12 md:col-span-5 lg:col-span-4 flex gap-4",children:[r.jsxs("div",{className:"flex-1 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl p-4 flex flex-col items-center justify-center shadow-sm hover:border-hd-orange/30 transition-colors",children:[r.jsx("span",{className:"text-2xl font-bold text-[var(--text-main)] w-full text-center truncate",children:t.length}),r.jsx("span",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-widest mt-1",children:"Registrados"})]}),r.jsxs("div",{className:"flex-1 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl p-4 flex flex-col items-center justify-center shadow-sm hover:border-emerald-500/30 transition-colors",children:[r.jsx("span",{className:"text-2xl font-bold text-emerald-500 w-full text-center truncate",children:t.filter(T=>T.isActive).length}),r.jsx("span",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-widest mt-1",children:"Activos"})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c?Array(6).fill(0).map((T,L)=>r.jsx("div",{className:"h-64 bg-[var(--bg-card)] rounded-2xl border border-[var(--border-color)] animate-pulse"},L)):V.map(T=>r.jsxs("div",{className:"bg-[var(--bg-card)] hover:shadow-xl hover:shadow-black/5 border border-[var(--border-color)] rounded-2xl p-6 transition-all duration-300 group relative flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-hd-orange/10 to-transparent rounded-2xl flex items-center justify-center text-hd-orange font-bold text-xl shadow-inner border border-hd-orange/5 group-hover:scale-110 transition-transform duration-300",children:T.userName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-[var(--text-main)] leading-tight truncate max-w-[140px]",children:T.fullName||T.userName}),r.jsxs("p",{className:"text-xs text-[var(--text-muted)] font-mono mt-1 opacity-75",children:["@",T.userName]})]})]}),r.jsxs("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border flex items-center gap-1.5 ${T.isActive?"bg-emerald-500/5 text-emerald-600 border-emerald-500/20":"bg-red-500/5 text-red-600 border-red-500/20"}`,children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T.isActive?"bg-emerald-500 animate-pulse":"bg-red-500"}`}),T.isActive?"Activo":"Inactivo"]})]}),r.jsxs("div",{className:"space-y-3 mb-6 bg-[var(--bg-main)]/50 p-4 rounded-xl border border-[var(--border-color)]/50",children:[r.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[r.jsx(Tp,{size:14,className:"text-hd-orange opacity-70"}),r.jsx("span",{className:"font-semibold uppercase tracking-wide",children:"Acceso Total"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[r.jsx(ou,{size:14,className:"text-hd-orange opacity-70"}),r.jsx("span",{className:"truncate",children:T.email||"Sin correo asociado"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-2 mt-auto",children:[r.jsxs("button",{onClick:()=>C(T),className:"flex-1 py-2.5 rounded-xl bg-[var(--bg-main)] hover:bg-hd-orange hover:text-white text-[var(--text-main)] font-semibold text-xs uppercase tracking-wider transition-all border border-[var(--border-color)] hover:border-hd-orange hover:shadow-md flex items-center justify-center gap-2 group/btn",children:[r.jsx(wl,{size:14,className:"group-hover/btn:-translate-y-0.5 transition-transform"}),"Editar"]}),r.jsx("button",{onClick:()=>{P(T),j(!0)},className:"w-10 h-10 flex items-center justify-center rounded-xl bg-[var(--bg-main)] hover:bg-[var(--text-main)] hover:text-[var(--bg-main)] text-[var(--text-muted)] transition-colors border border-[var(--border-color)] group/key",title:"Cambiar Contrasea",children:r.jsx(gF,{size:16,className:"group-hover/key:rotate-12 transition-transform"})})]})]},T.id))}),m&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[var(--bg-card)] w-full max-w-lg rounded-3xl shadow-2xl border border-[var(--border-color)] overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-6 border-b border-[var(--border-color)] flex justify-between items-center bg-[var(--bg-main)]/50",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-main)]",children:N?"Editar Perfil":"Nuevo Usuario"}),r.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Informacin de cuenta y permisos"})]}),r.jsx("button",{onClick:()=>p(!1),className:"text-[var(--text-muted)] hover:text-[var(--text-main)] hover:bg-[var(--bg-main)] p-2 rounded-full transition-all",children:r.jsx(A0,{size:24})})]}),r.jsx("div",{className:"overflow-y-auto p-6 md:p-8",children:r.jsxs("form",{id:"userForm",onSubmit:M,className:"space-y-5",children:[!N&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Username (ID)"}),r.jsx("input",{required:!0,type:"text",value:A.userName,onChange:T=>k({...A,userName:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all font-medium",placeholder:"ej. jperez"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Nombre Completo"}),r.jsx("input",{required:!0,type:"text",value:A.fullName,onChange:T=>k({...A,fullName:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:"Nombre y Apellido"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Email"}),r.jsx("input",{type:"email",value:A.email,onChange:T=>k({...A,email:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:"correo@ejemplo.com"})]}),!N&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Contrasea"}),r.jsx("input",{required:!0,type:"password",value:A.password,onChange:T=>k({...A,password:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:""})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Rol / Permisos"}),r.jsxs("div",{className:"relative",children:[r.jsx("select",{value:A.role,onChange:T=>k({...A,role:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all appearance-none cursor-pointer",children:a.map(T=>r.jsx("option",{value:T.name,children:T.name},T.id))}),r.jsx(ar,{size:18,className:"absolute right-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)] rotate-90 pointer-events-none"})]})]}),N&&r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-[var(--bg-main)] rounded-xl border border-[var(--border-color)] cursor-pointer hover:border-hd-orange/30 transition-colors",onClick:()=>k({...A,isActive:!A.isActive}),children:[r.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${A.isActive?"bg-hd-orange":"bg-gray-300 dark:bg-zinc-700"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform ${A.isActive?"translate-x-4":"translate-x-0"}`})}),r.jsx("label",{className:"text-sm font-semibold text-[var(--text-main)] cursor-pointer select-none flex-1",children:"Habilitar Acceso"})]})]})}),r.jsxs("div",{className:"p-6 border-t border-[var(--border-color)] bg-[var(--bg-main)]/30 flex gap-4",children:[r.jsx(re,{type:"button",onClick:()=>p(!1),className:"flex-1 bg-transparent hover:bg-[var(--bg-main)] text-[var(--text-muted)] border border-[var(--border-color)] font-bold py-3.5 rounded-xl transition-all",children:"Cancelar"}),r.jsx(re,{type:"submit",form:"userForm",disabled:y,className:"flex-1 bg-hd-orange hover:bg-orange-600 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-hd-orange/20 transition-all flex items-center justify-center gap-2",children:y?r.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}):"Guardar"})]})]})}),v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[var(--bg-card)] w-full max-w-md rounded-3xl shadow-2xl border border-[var(--border-color)] overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-6 border-b border-[var(--border-color)] bg-[var(--bg-main)]",children:[r.jsx("h2",{className:"text-xl font-bold text-[var(--text-main)]",children:"Reestablecer Acceso"}),r.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["Usuario: ",r.jsx("span",{className:"font-mono text-hd-orange font-bold uppercase",children:N?.userName})]})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-[var(--text-muted)] uppercase tracking-wider ml-1",children:"Nueva Contrasea"}),r.jsx("input",{type:"password",value:I,onChange:T=>E(T.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-3 px-4 text-[var(--text-main)] focus:ring-2 focus:ring-hd-orange/20 focus:border-hd-orange outline-none transition-all",placeholder:"",autoFocus:!0})]}),r.jsxs("div",{className:"flex gap-4 pt-2",children:[r.jsx(re,{onClick:()=>j(!1),className:"flex-1 bg-transparent hover:bg-[var(--bg-main)] text-[var(--text-muted)] border border-[var(--border-color)] font-bold py-3 rounded-xl",children:"Cancelar"}),r.jsx(re,{onClick:F,disabled:y,className:"flex-1 bg-hd-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl shadow-md",children:y?"...":"Actualizar"})]})]})]})})]})},Xce=()=>{const e=Tt(),[t,n]=x.useState([]),[a,s]=x.useState(!0);x.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const l=await jL();n(l)}catch(l){console.error("Failed to load promotions",l)}finally{s(!1)}};return r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto pb-20 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Promociones y Ofertas"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Gestiona descuentos, cupones y reglas automticas."})]}),r.jsxs(re,{onClick:()=>e("/marketing/promociones/nuevo"),className:"bg-hd-orange hover:bg-orange-600 font-bold",children:[r.jsx(_t,{className:"mr-2 h-5 w-5"})," Nueva Promocin"]})]}),r.jsx(Be,{className:"border-0 shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-4 px-6 font-bold text-gray-600",children:"Nombre"}),r.jsx("th",{className:"text-left py-4 px-6 font-bold text-gray-600",children:"Tipo"}),r.jsx("th",{className:"text-left py-4 px-6 font-bold text-gray-600",children:"Vigencia"}),r.jsx("th",{className:"text-center py-4 px-6 font-bold text-gray-600",children:"Estado"}),r.jsx("th",{className:"text-right py-4 px-6 font-bold text-gray-600",children:"Acciones"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-50",children:t.map(l=>r.jsxs("tr",{className:"hover:bg-orange-50/30 transition-colors group",children:[r.jsx("td",{className:"py-4 px-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-hd-orange",children:r.jsx(Nl,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-gray-800",children:l.name}),r.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",l.id]})]})]})}),r.jsx("td",{className:"py-4 px-6 text-sm",children:r.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded border border-gray-200 font-medium",children:l.type})}),r.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ea,{size:14}),l.startDate]})}),r.jsx("td",{className:"py-4 px-6 text-center",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l.isActive?"Activa":"Inactiva"})}),r.jsx("td",{className:"py-4 px-6 text-right",children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>e(`/marketing/promociones/editar/${l.id}`),children:r.jsx(Uc,{className:"h-4 w-4 text-gray-400 group-hover:text-hd-orange"})})})]},l.id))})]})})})]})},Jce=({isOpen:e,onClose:t,onSelect:n})=>{const[a,s]=x.useState(""),[o,l]=x.useState([]),[c,f]=x.useState(!1);x.useEffect(()=>{e&&(h(),s(""))},[e]);const h=async()=>{try{f(!0);const m=await jm();l(m)}catch(m){console.error("Error loading categories:",m)}finally{f(!1)}},u=x.useMemo(()=>{const m=a.toLowerCase();return m?o.filter(p=>p.nombre.toLowerCase().includes(m)||p.descripcion&&p.descripcion.toLowerCase().includes(m)):o},[o,a]);return r.jsx(li,{open:e,onOpenChange:t,children:r.jsxs(ci,{className:"max-w-md p-0 overflow-hidden border-0 shadow-2xl bg-white rounded-xl h-[60vh] flex flex-col",children:[r.jsxs("div",{className:"bg-white border-b border-gray-100 p-4 flex flex-col gap-3 shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800 tracking-tight flex items-center gap-2",children:[r.jsx(ma,{className:"h-5 w-5 text-hd-orange"}),"Seleccionar Categora"]}),r.jsx(re,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full h-8 w-8",children:r.jsx(It,{size:20})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ht,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),r.jsx(ye,{className:"w-full pl-9 h-9 bg-gray-50 border-gray-200 focus:bg-white transition-colors",placeholder:"Buscar categora...",value:a,onChange:m=>s(m.target.value),autoFocus:!0})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 bg-gray-50",children:[c?r.jsx("div",{className:"flex justify-center p-8 text-gray-400 animate-pulse",children:"Cargando..."}):u.map(m=>r.jsxs("div",{onClick:()=>{n(m),t()},className:"group flex items-center gap-3 p-3 rounded-lg hover:bg-white hover:shadow-md border border-transparent hover:border-gray-100 cursor-pointer transition-all",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center text-hd-orange group-hover:bg-hd-orange group-hover:text-white transition-colors",children:r.jsx(Nl,{size:18})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-800",children:m.nombre}),m.descripcion&&r.jsx("div",{className:"text-xs text-gray-500",children:m.descripcion})]}),r.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 text-hd-orange",children:r.jsx(uD,{size:16})})]},m.id)),!c&&u.length===0&&r.jsx("div",{className:"text-center py-10 text-gray-400",children:"No se encontraron categoras."})]})]})})},KI=()=>{const e=Tt(),{id:t}=Ts(),n=!!t,[a,s]=x.useState({name:"",description:"",startDate:new Date().toISOString().split("T")[0],endDate:"",isActive:!0,priority:0,rules:[],actions:[],autoApply:!1,stackable:!1,requiresCoupon:!1,applyTo:"Both"}),[o,l]=x.useState(!1),[c,f]=x.useState(!1),[h,u]=x.useState(null),[m,p]=x.useState(null);x.useEffect(()=>{n&&v()},[t]);const v=async()=>{try{const k=await wL(t),I={...k,startDate:k.startDate?.split("T")[0],endDate:k.endDate?.split("T")[0]||""};s(I)}catch(k){console.error("Error loading promo",k)}},j=[{value:"MinOrderTotal",label:"Monto Mnimo Orden"},{value:"ContainsProduct",label:"Contiene Producto (ID)"},{value:"ContainsCategory",label:"Contiene Categora (Nombre)"}],y=[{value:"DiscountPercentage",label:"Descuento (%)"},{value:"DiscountAmount",label:"Descuento Fijo ($)"}],b=async()=>{try{const k={...a,endDate:a.endDate?a.endDate:null,priority:parseInt(a.priority)||0,actions:a.actions.map(I=>({...I,value:parseFloat(I.value)||0,targetArtifact:I.targetArtifact||null})).filter(I=>I.value>0),rules:a.rules.map(I=>({...I,value:I.value?I.value.toString():""})).filter(I=>I.value!=="")};n?await SL(t,k):await NL(k),e("/marketing/promociones")}catch(k){console.error("Error saving promotion",k),alert(`Error al guardar: ${k.message}`)}},N=(k,I)=>{s(E=>({...E,[k]:I}))},P=k=>{if(h!==null){const I=[...a.rules];I[h].value=k.id.toString(),s({...a,rules:I}),u(null)}else if(m!==null){const I=[...a.actions];I[m].targetArtifact=k.id.toString(),s({...a,actions:I}),p(null)}l(!1)},A=k=>{if(h!==null){const I=[...a.rules];I[h].value=k.nombre,s({...a,rules:I}),u(null)}else if(m!==null){const I=[...a.actions];I[m].targetArtifact=k.nombre,s({...a,actions:I}),p(null)}f(!1)};return r.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto pb-20 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-gray-50/95 backdrop-blur z-20 py-4 border-b border-gray-200 -mx-6 px-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",onClick:()=>e("/marketing/promociones"),children:r.jsx(on,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Editar Promocin":"Nueva Promocin"}),r.jsx("p",{className:"text-sm text-gray-500",children:n?`ID: ${t}`:"Configura las reglas y beneficios"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(re,{variant:"outline",onClick:()=>e("/marketing/promociones"),children:"Cancelar"}),r.jsxs(re,{onClick:b,className:"bg-hd-orange hover:bg-orange-600",children:[r.jsx(Ft,{className:"mr-2 h-4 w-4"})," Guardar"]})]})]}),r.jsxs(Be,{className:"shadow-sm border-l-4 border-l-hd-orange",children:[r.jsx(gt,{children:r.jsxs(vt,{className:"flex items-center gap-2",children:[r.jsx(hD,{className:"h-5 w-5 text-gray-500"})," Informacin General"]})}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre de la Promocin"}),r.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.name,onChange:k=>N("name",k.target.value),placeholder:"Ej: Descuento Verano 2025"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),r.jsx("input",{type:"number",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.priority,onChange:k=>N("priority",k.target.value)}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mayor nmero = Se aplica primero."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Aplicar A:"}),r.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.applyTo,onChange:k=>N("applyTo",k.target.value),children:[r.jsx("option",{value:"Both",children:"Ambos (POS y Distribucin)"}),r.jsx("option",{value:"POS",children:"Solo POS"}),r.jsx("option",{value:"Distribution",children:"Solo Ventas Distribucin"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Inicio"}),r.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.startDate,onChange:k=>N("startDate",k.target.value)})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fin (Opcional)"}),r.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring focus:ring-orange-200 sm:text-sm p-2 border",value:a.endDate,onChange:k=>N("endDate",k.target.value)})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a.isActive,onChange:k=>N("isActive",k.target.checked),className:"rounded text-hd-orange focus:ring-orange-500 h-5 w-5"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Activa"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer ml-4",children:[r.jsx("input",{type:"checkbox",checked:a.autoApply,onChange:k=>N("autoApply",k.target.checked),className:"rounded text-hd-orange focus:ring-orange-500 h-5 w-5"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Aplicar Automticamente"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer ml-4",children:[r.jsx("input",{type:"checkbox",checked:a.stackable,onChange:k=>N("stackable",k.target.checked),className:"rounded text-hd-orange focus:ring-orange-500 h-5 w-5"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Acumulable"})]})]})]})]}),r.jsxs(Be,{className:"shadow-sm",children:[r.jsx(gt,{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(vt,{className:"text-gray-800",children:"Reglas (Condiciones)"}),r.jsxs(re,{size:"sm",variant:"outline",onClick:()=>s({...a,rules:[...a.rules,{type:"MinOrderTotal",operator:"GreaterThan",value:""}]}),children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Agregar Regla"]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[a.rules.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-400 border-2 border-dashed border-gray-200 rounded-lg",children:"No hay reglas definidas. La promocin se aplicar siempre."}),a.rules.map((k,I)=>r.jsxs("div",{className:"flex gap-4 items-center bg-gray-50 p-3 rounded border border-gray-200",children:[r.jsx("select",{className:"block w-1/3 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:k.type,onChange:E=>{const O=[...a.rules];O[I].type=E.target.value,s({...a,rules:O})},children:j.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))}),r.jsxs("select",{className:"block w-1/5 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:k.operator,onChange:E=>{const O=[...a.rules];O[I].operator=E.target.value,s({...a,rules:O})},children:[r.jsx("option",{value:"GreaterThan",children:"Mayor que"}),r.jsx("option",{value:"Equals",children:"Igual a"})]}),r.jsxs("div",{className:"relative flex-1 group",children:[r.jsx("input",{type:"text",className:`block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border ${k.type==="ContainsProduct"||k.type==="ContainsCategory"?"pr-10":""}`,placeholder:k.type==="ContainsProduct"?"ID Producto":k.type==="ContainsCategory"?"Nombre Categora":"Valor",value:k.value,onChange:E=>{const O=[...a.rules];O[I].value=E.target.value,s({...a,rules:O})}}),(k.type==="ContainsProduct"||k.type==="ContainsCategory")&&r.jsx("button",{type:"button",className:"absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-hd-orange transition-colors rounded-r-md border-l border-transparent hover:bg-orange-50",onClick:()=>{u(I),k.type==="ContainsProduct"?l(!0):f(!0)},title:"Buscar...",children:k.type==="ContainsProduct"?r.jsx(Ht,{size:16}):r.jsx(ma,{size:16})})]}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{const E=[...a.rules];E.splice(I,1),s({...a,rules:E})},children:r.jsx(Qt,{className:"h-4 w-4 text-red-500"})})]},I))]})]}),r.jsxs(Be,{className:"shadow-sm",children:[r.jsx(gt,{className:"bg-gray-50 border-b border-gray-100",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(vt,{className:"text-gray-800",children:"Beneficios (Acciones)"}),r.jsxs(re,{size:"sm",variant:"outline",className:"text-hd-orange border-hd-orange hover:bg-orange-50",onClick:()=>s({...a,actions:[...a.actions,{type:"DiscountPercentage",value:0,appliesTo:"Order",targetArtifact:""}]}),children:[r.jsx(_t,{className:"h-4 w-4 mr-1"})," Agregar Beneficio"]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[a.actions.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-400 border-2 border-dashed border-gray-200 rounded-lg",children:[r.jsx(zc,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),"Qu gana el cliente? Agrega un beneficio."]}),a.actions.map((k,I)=>r.jsxs("div",{className:"flex flex-col gap-2 bg-green-50 p-3 rounded border border-green-200",children:[r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsx("select",{className:"block w-1/3 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:k.type,onChange:E=>{const O=[...a.actions];O[I].type=E.target.value,s({...a,actions:O})},children:y.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))}),r.jsx("input",{type:"number",className:"block w-32 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",placeholder:"0",value:k.value,onChange:E=>{const O=[...a.actions];O[I].value=E.target.value,s({...a,actions:O})}}),r.jsx("span",{className:"text-sm text-gray-500",children:"en"}),r.jsxs("select",{className:"block w-1/4 rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-orange-200 sm:text-sm p-2 border",value:k.appliesTo,onChange:E=>{const O=[...a.actions];O[I].appliesTo=E.target.value,s({...a,actions:O})},children:[r.jsx("option",{value:"Order",children:"Total de la Orden"}),r.jsx("option",{value:"SpecificProduct",children:"Producto Especfico"}),r.jsx("option",{value:"Category",children:"Categora"})]}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{const E=[...a.actions];E.splice(I,1),s({...a,actions:E})},children:r.jsx(Qt,{className:"h-4 w-4 text-red-500"})})]}),(k.appliesTo==="SpecificProduct"||k.appliesTo==="Category")&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-1/3 text-right pr-2",children:k.appliesTo==="SpecificProduct"?"ID del Producto:":"Nombre Categora:"}),r.jsxs("div",{className:"relative flex-1 group",children:[r.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-hd-orange focus:ring-green-200 sm:text-sm p-2 border pr-10",placeholder:k.appliesTo==="SpecificProduct"?"Ej: 101":"Ej: Herramientas",value:k.targetArtifact||"",onChange:E=>{const O=[...a.actions];O[I].targetArtifact=E.target.value,s({...a,actions:O})}}),r.jsx("button",{type:"button",className:"absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-hd-orange transition-colors rounded-r-md border-l border-transparent hover:bg-orange-50",onClick:()=>{p(I),k.appliesTo==="SpecificProduct"?l(!0):f(!0)},title:"Buscar...",children:k.appliesTo==="SpecificProduct"?r.jsx(Ht,{size:16}):r.jsx(ma,{size:16})})]})]})]},I))]})]}),r.jsx(ul,{isOpen:o,onClose:()=>l(!1),onSelect:P}),r.jsx(Jce,{isOpen:c,onClose:()=>f(!1),onSelect:A})]})},Qce=()=>{const[e,t]=x.useState(null),[n,a]=x.useState(!0);if(x.useEffect(()=>{(async()=>{try{const c=await fetch("http://localhost:5006/api/Trial/status");if(c.ok){const f=await c.json();t(f)}}catch(c){console.error("Error fetching trial status",c)}finally{a(!1)}})()},[]),n||!e)return null;const{daysRemaining:s,isExpired:o}=e;return o?r.jsxs("div",{className:"bg-red-600 text-white py-2 px-4 flex items-center justify-center gap-3 z-[9999] sticky top-0 shadow-lg animate-pulse",children:[r.jsx(pu,{size:20,className:"text-yellow-300"}),r.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"PERIODO DE PRUEBA EXPIRADO. CONTACTE AL ADMINISTRADOR PARA ACTIVAR EL SISTEMA."})]}):s<=10?r.jsxs("div",{className:"bg-orange-500 text-white py-1.5 px-4 flex items-center justify-center gap-2 z-[9999] sticky top-0 shadow-md",children:[r.jsx(gm,{size:16}),r.jsxs("span",{className:"font-medium text-xs",children:["Atencin: Quedan ",r.jsxs("strong",{children:[s," das"]})," de tu periodo de prueba gratuito."]})]}):r.jsx("div",{className:"bg-gray-800 text-gray-300 py-1 px-4 flex items-center justify-center gap-2 z-[9999] sticky top-0 text-[10px] opacity-90 hover:opacity-100 transition-opacity",children:r.jsxs("span",{className:"uppercase tracking-widest font-semibold flex items-center gap-1",children:[r.jsx(gm,{size:10})," Versin Demo: ",s," das restantes"]})})};function Zce(){return r.jsxs(Gce,{children:[r.jsx(Qce,{}),r.jsx(K3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsx(rF,{children:r.jsxs(L3,{children:[r.jsx(He,{path:"/login",element:r.jsx(Wce,{})}),r.jsxs(He,{element:r.jsx(nF,{}),children:[r.jsxs(He,{path:"/",element:r.jsx(AF,{}),children:[r.jsx(He,{index:!0,element:r.jsx(Nse,{})}),r.jsx(He,{path:"clientes",element:r.jsx(IF,{})}),r.jsx(He,{path:"clientes/nuevo",element:r.jsx($C,{})}),r.jsx(He,{path:"clientes/editar/:id",element:r.jsx($C,{})}),r.jsx(He,{path:"proveedores",element:r.jsx(FF,{})}),r.jsx(He,{path:"proveedores/nuevo",element:r.jsx(FC,{})}),r.jsx(He,{path:"proveedores/editar/:id",element:r.jsx(FC,{})}),r.jsx(He,{path:"vendedores",element:r.jsx(bL,{})}),r.jsx(He,{path:"vendedores/nuevo",element:r.jsx(KC,{})}),r.jsx(He,{path:"vendedores/editar/:id",element:r.jsx(KC,{})}),r.jsx(He,{path:"productos",element:r.jsx(XF,{})}),r.jsx(He,{path:"productos/nuevo",element:r.jsx(UC,{})}),r.jsx(He,{path:"productos/editar/:id",element:r.jsx(UC,{})}),r.jsx(He,{path:"inventario/lista-precios",element:r.jsx(zU,{})}),r.jsx(He,{path:"inventario/niveles-precios",element:r.jsx(NB,{})}),r.jsx(He,{path:"inventario/categorias-articulos",element:r.jsx(RU,{})}),r.jsx(He,{path:"inventario/unidades-medida",element:r.jsx(IU,{})}),r.jsx(He,{path:"inventario/historial",element:r.jsx(S2,{})}),r.jsx(He,{path:"inventario/historial/:articuloId",element:r.jsx(S2,{})}),r.jsx(He,{path:"inventario/almacenes",element:r.jsx(DU,{})}),r.jsx(He,{path:"inventario/grupos-impuestos",element:r.jsx(OU,{})}),r.jsx(He,{path:"inventario/grupos-producto",element:r.jsx(MU,{})}),r.jsx(He,{path:"configuracion/motivos-ajuste",element:r.jsx(TU,{})}),r.jsx(He,{path:"ajustes",element:r.jsx(lL,{})}),r.jsx(He,{path:"ajustes/nuevo",element:r.jsx(gL,{})}),r.jsx(He,{path:"transferencias",element:r.jsx(xL,{})}),r.jsx(He,{path:"transferencias/nuevo",element:r.jsx(WC,{})}),r.jsx(He,{path:"transferencias/editar/:id",element:r.jsx(WC,{})}),r.jsx(He,{path:"kardex",element:r.jsx(sL,{})}),r.jsx(He,{path:"configuracion/ncf",element:r.jsx(H8,{})}),r.jsx(He,{path:"configuracion/clientes",element:r.jsx(W8,{})}),r.jsx(He,{path:"configuracion/articulos",element:r.jsx(Y8,{})}),r.jsx(He,{path:"configuracion/monedas",element:r.jsx(bU,{})}),r.jsx(He,{path:"configuracion/proveedores",element:r.jsx(NU,{})}),r.jsx(He,{path:"configuracion/compania",element:r.jsx(SU,{})}),r.jsx(He,{path:"configuracion/cxp",element:r.jsx(CU,{})}),r.jsx(He,{path:"configuracion/pos",element:r.jsx(Uce,{})}),r.jsx(He,{path:"configuracion/compras",element:r.jsx(Bce,{})}),r.jsx(He,{path:"configuracion/receipt-designer",element:r.jsx(qce,{})}),r.jsx(He,{path:"configuracion/transferencias",element:r.jsx(PU,{})}),r.jsx(He,{path:"configuracion/ajustes",element:r.jsx(AU,{})}),r.jsx(He,{path:"configuracion/security-editor",element:r.jsx(Kce,{})}),r.jsx(He,{path:"configuracion/usuarios",element:r.jsx(Yce,{})}),r.jsx(He,{path:"ventas/pos",element:r.jsx(_L,{})}),r.jsx(He,{path:"ventas/distribucion",element:r.jsx(XL,{})}),r.jsx(He,{path:"ventas/devoluciones",element:r.jsx($8,{})}),r.jsx(He,{path:"ventas/historial-devoluciones",element:r.jsx(F8,{})}),r.jsx(He,{path:"ventas/historial",element:r.jsx(R8,{})}),r.jsx(He,{path:"ventas/corte",element:r.jsx(z8,{})}),r.jsx(He,{path:"compras",element:r.jsx(V8,{})}),r.jsx(He,{path:"compras/nuevo",element:r.jsx(o2,{})}),r.jsx(He,{path:"compras/editar/:id",element:r.jsx(o2,{})}),r.jsx(He,{path:"compras/reportes",element:r.jsx(kU,{})}),r.jsx(He,{path:"reportes/ventas",element:r.jsx(la,{title:"Reporte de Ventas"})}),r.jsx(He,{path:"reportes/inventario",element:r.jsx(la,{title:"Reporte de Inventario"})}),r.jsx(He,{path:"reportes/valoracion-inventario",element:r.jsx(kB,{})}),r.jsx(He,{path:"reportes/compras-multi-moneda",element:r.jsx(EB,{})}),r.jsx(He,{path:"reportes/manager",element:r.jsx(IB,{})}),r.jsx(He,{path:"compras/imprimir/:id",element:r.jsx(AB,{})}),r.jsx(He,{path:"cuentas-por-pagar/pagos",element:r.jsx(MB,{})}),r.jsx(He,{path:"cuentas-por-pagar/pagos/imprimir/:id",element:r.jsx(RB,{})}),r.jsx(He,{path:"cuentas-por-cobrar/cobros",element:r.jsx(_B,{})}),r.jsx(He,{path:"reportes/ventas-vendedor",element:r.jsx(la,{title:"Reporte por Vendedor"})}),r.jsx(He,{path:"reportes/ventas-cliente",element:r.jsx(la,{title:"Reporte por Cliente"})}),r.jsx(He,{path:"reportes/kardex",element:r.jsx(la,{title:"Movimientos de Artculos"})}),r.jsx(He,{path:"reportes/clientes",element:r.jsx(la,{title:"Listado de Clientes"})}),r.jsx(He,{path:"reportes/proveedores",element:r.jsx(la,{title:"Listado de Proveedores"})}),r.jsx(He,{path:"marketing/promociones",element:r.jsx(Xce,{})}),r.jsx(He,{path:"marketing/promociones/nuevo",element:r.jsx(KI,{})}),r.jsx(He,{path:"marketing/promociones/editar/:id",element:r.jsx(KI,{})}),r.jsx(He,{path:"crm/dashboard",element:r.jsx(LB,{})}),r.jsx(He,{path:"crm/prospectos",element:r.jsx(FB,{})}),r.jsx(He,{path:"crm/oportunidades",element:r.jsx(la,{title:"CRM Oportunidades"})}),r.jsx(He,{path:"crm/actividades",element:r.jsx(la,{title:"CRM Actividades"})}),r.jsx(He,{path:"crm/interacciones",element:r.jsx(la,{title:"CRM Interacciones"})}),r.jsx(He,{path:"reportes/smartlist/facturas",element:r.jsx(VB,{})}),r.jsx(He,{path:"reportes/smartlist/articulos",element:r.jsx(qB,{})}),r.jsx(He,{path:"reportes/smartlist/proveedores",element:r.jsx(GB,{})}),r.jsx(He,{path:"reportes/smartlist/pagos",element:r.jsx(HB,{})}),r.jsx(He,{path:"reportes/smartlist/inventario",element:r.jsx(WB,{})}),r.jsx(He,{path:"reportes/ventas-cobros",element:r.jsx(KB,{})}),r.jsx(He,{path:"utilidades/calculadora",element:r.jsx(la,{title:"Calculadora"})}),r.jsx(He,{path:"utilidades/notas",element:r.jsx(la,{title:"Bloc de Notas"})}),r.jsx(He,{path:"utilidades/calendario",element:r.jsx(la,{title:"Calendario"})})]}),r.jsx(He,{path:"launchpad",element:r.jsx(zce,{})})]})]})})})]})}JI.createRoot(document.getElementById("root")).render(r.jsx(Zce,{}));
